window.__require=function t(e,o,n){function i(r,c){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var p=o[r]={exports:{}};e[r][0].call(p.exports,function(t){return i(e[r][1][t]||t)},p,p.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AStar:[function(t,e,o){"use strict";cc._RF.push(e,"2f779aB/TNE36HyjDYXdCjg","AStar");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.AStarNode=void 0;var i=(Object.defineProperty(a.prototype,"x",{get:function(){return this._x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},enumerable:!1,configurable:!0}),a);function a(t,e){this._x=0,this._y=0,this.priority=0,this._x=t,this._y=e}n.AStarNode=i;var r=(l.prototype.put=function(t,e){t.priority=e,this.arr.push(t),this.arr.sort(function(t,e){return e.priority-t.priority})},l.prototype.get=function(){return this.arr.pop()},Object.defineProperty(l.prototype,"size",{get:function(){return this.arr.length},enumerable:!1,configurable:!0}),l),c=(s.prototype.init=function(t,e,o,n){var i=this;void 0===n&&(n=[]),this.mSize=t,this.mStart=e,this.mEnd=o,n.forEach(function(t){i.setObstacles(t.x,t.y)}),this.nodePool={},this.mStartNode=this.createNode(this.mStart.x,this.mStart.y),this.mEndNode=this.createNode(this.mEnd.x,this.mEnd.y)},s.prototype.clean=function(){this.mStartNode=null,this.mEndNode=null},s.prototype.setObstacles=function(t,e){this.checkNode(t,e)&&(this.obstacles[t+"_"+e]=!0)},s.prototype.clearObstacles=function(t,e){delete this.obstacles[t+"_"+e]},s.prototype.clearAllObstacles=function(){this.obstacles={}},s.prototype.checkObstacles=function(t,e){return this.obstacles[t+"_"+e]},s.prototype.checkNode=function(t,e){return 0<=t&&0<=e&&t<=this.mSize.x&&e<=this.mSize.y},s.prototype.run=function(){console.log("##### \u5bfb\u8def\u5f00\u59cb #####"),console.log("\u51fa\u53d1\u70b9:",this.mStart.x,this.mStart.y),console.log("\u76ee\u6807\u70b9:",this.mEnd.x,this.mEnd.y),console.log("\u969c\u788d\u7269:",this.obstacles);var t=(new Date).getTime(),e=this.mStartNode,o=this.mEndNode;for(this.frontier=new r,this.frontier.put(e,0),this.cameForm.set(e,null),this.costSoFar.set(e,0);0<this.frontier.size;){var n=this.frontier.get();if(n===o)break;for(var i=0,a=this.getNeighbors(n);i<a.length;i++){var c,s=a[i],l=this.costSoFar.get(n)+this.getCost(n,s);(!this.costSoFar.has(s)||l<this.costSoFar.get(s))&&(this.costSoFar.set(s,l),c=this.getCost(s,o),this.frontier.put(s,l+c),this.cameForm.set(s,n))}}e=(new Date).getTime(),console.log("\u7ed3\u675f\uff1b\u8017\u65f6%s",e-t)},s.prototype.getPath=function(){var t=[],e=this.mEndNode;for(t.push(e);this.cameForm.has(e);)(e=this.cameForm.get(e))&&t.push(e);return t},s.prototype.getNeighbors=function(t){var e=[],o=this.getNode(t.x,t.y+1);return o&&e.push(o),(o=this.getNode(t.x,t.y-1))&&e.push(o),(o=this.getNode(t.x-1,t.y))&&e.push(o),(t=this.getNode(t.x+1,t.y))&&e.push(t),e},s.prototype.getCost=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},s.prototype.next=function(){},s.prototype.getNode=function(t,e){if(this.checkNode(t,e)&&!this.checkObstacles(t,e)){var o=this.getNodeKey(t,e);return this.nodePool[o]||this.createNode(t,e)}},s.prototype.createNode=function(t,e){var o=this.getNodeKey(t,e);return this.nodePool[o]=new i(t,e),this.nodePool[o]},s.prototype.getNodeKey=function(t,e){return t+"_"+e},s);function s(){this.mSize=null,this.mStart=null,this.mEnd=null,this.mStartNode=null,this.mEndNode=null,this.obstacles={},this.nodePool={},this.frontier=null,this.cameForm=new Map,this.costSoFar=new Map}function l(){this.arr=[]}n.default=c,cc._RF.pop()},{}],AccessMgr:[function(t,e,o){"use strict";cc._RF.push(e,"017a8WF0UVIQq5yeis3+w/X","AccessMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("FoodFactory"),p=i("ObjectPlant"),u=i("CommonUtils"),d=i("ConfigUtils"),h=i("Const"),_=i("GameMgr"),f=i("JumpMgr"),g=i("MapDataHelper");function y(){var t=null!==c&&c.apply(this,arguments)||this;return t.curTouchItemID=0,t}r(y,c=s.default),y.prototype.dealByItemID=function(t){cc.log("id:",t);var e=!1,o=d.PropUtils.getConfigByPropID(t);if(!o.access)return!1;for(var n=0,i=o.access;n<i.length;n++){var a=i[n];if(e=this._dealByWay(a))break}e?this.curTouchItemID=0:u.default.isInMainScene()&&(_.gm.ui.showNotice("\u53ef\u8fdb\u5165\u540e\u5c71\u91c7\u96c6"),this.dealExploreByItemID(t))},y.prototype._dealByWay=function(t){if(Number(t.wayclass)==h.E_WayClass.coin)return _.gm.ui.showModule(_.gm.const.GetStrengthUI,function(t){t.setData(2)}),!0;if(Number(t.wayclass)==h.E_WayClass.heart)return _.gm.ui.showModule(_.gm.const.GetStrengthUI,function(t){t.setData(4)}),!0;if(Number(t.wayclass)==h.E_WayClass.video)return _.gm.ui.showModule(_.gm.const.GetStrengthUI,function(e){e.setData(t.id)}),!0;if(Number(t.wayclass)==h.E_WayClass.cook){if(u.default.isInMainScene())return _.gm.ui.showModule(_.gm.const.MenuUI),!0;u.default.tipToGohome()}else if(Number(t.wayclass)==h.E_WayClass.product){if(u.default.isInMainScene())return(o=g.default.findDataByObjectID(t.id,!1))?(_.gm.ui.closeAllWindows(),o.loadObject(function(e){var o;(e=e.getComponent(l.default))&&(o=e.getFinger(0))?f.default.getInstance().jumpToFinger(o,function(){o.showFinger(!0,!0)}):f.default.getInstance().jumpToObjectAndShowFinger(t.id,!1)})):_.gm.ui.showNotice("\u672a\u89e3\u9501"),!0;u.default.tipToGohome()}else if(Number(t.wayclass)==h.E_WayClass.breed){if(u.default.isInMainScene())return(o=g.default.findDataByObjectID(t.id,!0))&&(_.gm.ui.closeAllWindows(),o.loadObject(function(){f.default.getInstance().jumpToObjectAndShowFinger(t.id,!0)})),!0;u.default.tipToGohome()}else if(Number(t.wayclass)==h.E_WayClass.plant)if(u.default.isInMainScene()){var e=g.default.findDataByObjectID(t.id,!1);if(e)return _.gm.ui.closeAllWindows(),e.loadObject(function(o){var n,i;o.getComponent(p.default)?!(n=e.slots[0])||(i=o.getComponent(p.default).getNodeByIndex(n.index))&&(f.default.getInstance().jumpToPos(o.node,cc.v2(348,440),!0),_.gm.ui.showModule(_.gm.const.FingerGuide,function(t){t.showFingerByNode(i)})):f.default.getInstance().jumpToObjectAndShowFinger(t.id,!1)}),!0}else(n=_.gm.ui.get_module(_.gm.const.Explore))&&n.goTaskRed(t.id);else{var o,n;if(u.default.isInMainScene()){if(o=g.default.findDataByObjectID(t.id,!1))return _.gm.ui.closeAllWindows(),o.loadObject(function(e){var o;(e=e.getComponent(l.default))&&(o=e.getFinger(0))?f.default.getInstance().jumpToFinger(o,function(){o.showFinger(!0,!0)}):f.default.getInstance().jumpToObjectAndShowFinger(t.id,!1)}),!0}else(n=_.gm.ui.get_module(_.gm.const.Explore))&&n.goTaskRed(t.id)}return!1},y.prototype.dealExploreByItemID=function(t,e){void 0===e&&(e=null),cc.log("id:",t);var o=!1;if((t=d.PropUtils.getConfigByPropID(t)).access)for(var n=0,i=t.access;n<i.length;n++){var a=i[n];if(1==a.wayclass&&d.BigMapConfigUtils.getConfig(a.id)){_.gm.ui.closeAllWindows(),this.curTouchItemID=a.id,_.gm.ui.showModule(_.gm.const.FingerGuide,function(t){t.showFingerByNode(u.default.getBaseUI().nod_explore)}),o=!0;break}}e&&e(o)},r=y,a.default=r,cc._RF.pop()},{}],ActionUtils:[function(t,e,o){"use strict";cc._RF.push(e,"e74ff2DXKBOw4YOxLpJ1OA3","ActionUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.touchScaleTween=function(t){t.scaleX=0<t.scaleX?1:-1,t.scaleY=0<t.scaleY?1:-1;var e=t.scaleX,o=t.scaleY;cc.tween(t).to(.1,{scaleX:1.02*e,scaleY:1.05*o}).to(.12,{scaleX:+e,scaleY:.97*o}).to(.17,{scaleX:1.02*e,scaleY:1.02*o}).to(.17,{scaleX:+e,scaleY:+o}).start()},i.btnRepairShake=function(t){t.scale=1,cc.tween(t).to(.1,{scaleX:1.1,scaleY:1.1}).to(.12,{scaleX:1,scaleY:.97}).to(.17,{scaleX:1.1,scaleY:1.1}).to(.17,{scaleX:1,scaleY:1}).start()},i.shake=function(t){cc.tween(t).repeatForever(cc.tween().delay(1).to(.1,{angle:-15}).to(.1,{angle:0}).to(.1,{angle:15}).to(.1,{angle:0})).start()},n.default=i,cc._RF.pop()},{}],AniUtils:[function(t,e,o){"use strict";cc._RF.push(e,"3e0922mrpdCQ6taOejfYOUa","AniUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.playAni=function(t,e,o){void 0===o&&(o=null),t&&(t.off("stop"),t.play(e),t.on("stop",function(){o&&o()}))},n.default=i,cc._RF.pop()},{}],AppConfig:[function(t,e,o){"use strict";cc._RF.push(e,"508f05nIMdIm7WMHPXP5u3b","AppConfig");var n,i=t,a=o;function r(){}Object.defineProperty(a,"__esModule",{value:!0}),n=i("Const"),r.version="1."+(r.debug_version=28)+".1",r.testMode=!1,r.QQ_Group="513635188",r.ServerMhtRequestUrl="https://yjth.qszhg.6hwan.com/",r.AppName="fairy_operation",r.allow_clear_local_data=!1,r.loadMapObjectID=[n.SpecialObjectID.mainHouse,n.SpecialObjectID.bedroom,n.SpecialObjectID.ToolRoom,n.SpecialObjectID.trunk,10203,10204,10325,10326,10327,10362,10372,10380,10393,10501,n.SpecialObjectID.food_table,n.SpecialObjectID.light_plate],r.defaultScale=.7,r.cookScale=1,r.boyInitDress={0:((i={})[n.E_ReplacementType.clothing]="301001",i[n.E_ReplacementType.face]="201001",i[n.E_ReplacementType.hair]="101001",i[n.E_ReplacementType.eye]="202001",i[n.E_ReplacementType.earing]="503001",i[n.E_ReplacementType.shoe]="401001",i),1:((i={})[n.E_ReplacementType.clothing]="301101",i[n.E_ReplacementType.face]="201101",i[n.E_ReplacementType.hair]="101101",i[n.E_ReplacementType.eye]="202101",i[n.E_ReplacementType.shoe]="401101",i),getMyInitDress:function(t){var e,o=[],n=r.boyInitDress[t];for(e in n)o.push(n[e]);return o}},a.default=i=r,cc._RF.pop()},{}],ArrayUtils:[function(t,e,o){"use strict";cc._RF.push(e,"a3fe2mX6VNKUqKK5UHcNDDT","ArrayUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.addNewElement=function(t,e){for(var o=0,n=t;o<n.length;o++)if(n[o]==e)return!1;return t.push(e),!0},i.deleteElement=function(t,e){for(var o=0,n=t.length;o<n;o++)if(t[o]==e)return t.splice(o,1);return[]},i.includes=function(t,e){for(var o=0,n=e;o<n.length;o++){var i=n[o];if(t.includes(i))return!0}return!1},i.replaceOrPush=function(t,e,o){for(var n=0;n<t.length;n++)if(o(t[n],e))return void(t[n]=e);t.push(e)},i.addNew=function(t,e,o){for(var n=0,i=t.length;n<i;n++)if(o(t[n],e))return!1;return t.push(e),!0},n.default=i,cc._RF.pop()},{}],AssetMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0dbf10XHv9AyYjG41hsehdJ","AssetMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("FWEvent"),l=i("Singleton"),p=i("EventManager");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.bundlesMap=new Map,t.curBundle=null,t}r(u,c=l.default),u.prototype.loadBundleByName=function(t,e){cc.assetManager.loadBundle(t,function(t,o){t?cc.error(t):e(o)})},u.prototype.loadBundleDir=function(t,e){var o=this;void 0===e&&(e=""),this._tryToLoadBundle(t,function(t){o._loadBundleDir(t,e)})},u.prototype.preloadBundleDir=function(t,e,o){void 0===e&&(e=""),void 0===o&&(o=null),this._tryToLoadBundle(t,function(t){t.preloadDir(e,function(t,e){t?cc.error(t):(cc.log(e),o&&o())})})},u.prototype.preload=function(t,e,o){void 0===o&&(o=null),this._tryToLoadBundle(t,function(t){t.preload(e,function(t){t?cc.error(t):o&&o()})})},u.prototype.getBundleByName=function(t){return cc.assetManager.getBundle(t)},u.prototype._tryToLoadBundle=function(t,e){var o=cc.assetManager.getBundle(t);o?e(o):cc.assetManager.loadBundle(t,function(t,o){t?cc.error(t):e(o)})},u.prototype.getRes=function(t,e,o){var n=this.getBundleByName(t);return n?n.get(e,o):(cc.warn("getRes \u627e\u4e0d\u5230bundle\uff1a",t+" "+e),null)},u.prototype.getDirRes=function(t,e,o){var n=[];if(this.getBundleByName(t))for(var i=0,a=this.getDirWithPath(t,e,o);i<a.length;i++){var r=a[i].path;(r=this.getRes(t,r,o))&&n.push(r)}else cc.error("getDirRes \u627e\u4e0d\u5230\u8be5\u8d44\u6e90\u6216\u8d44\u6e90\u672a\u52a0\u8f7d\uff1a",t+" "+e);return n},u.prototype.getDirWithPath=function(t,e,o){var n=this.getBundleByName(t);return n?n.getDirWithPath(e,o):(cc.error("getDirWithPath \u627e\u4e0d\u5230\u8be5\u8d44\u6e90\u6216\u8d44\u6e90\u672a\u52a0\u8f7d\uff1a",t+" "+e),null)},u.prototype.releaseRes=function(t,e){var o=this.getBundleByName(t);o?o.release(e):cc.warn("releaseRes \u627e\u4e0d\u5230\u8be5\u8d44\u6e90\u6216\u8d44\u6e90\u672a\u52a0\u8f7d\uff1a",t+" "+e)},u.prototype._loadBundleDir=function(t,e){void 0===e&&(e=""),t.loadDir(e,function(o,n){p.default.emit(s.FWEvent.LoadBundleResProgress,t.name,e,o,n)},function(){p.default.emit(s.FWEvent.LoadBundleResComplete,t.name,e)})},u.prototype.getResAsyn=function(t,e,o,n,i){this._tryToLoadBundle(t,function(t){var a=t.get(e,o);a?n(a):t.load(e,o,function(t,e){t?i?i(t):cc.error(t):(e.addRef(),n(e))})})},r=u,a.default=r,cc._RF.pop()},{}],AttrHelper:[function(t,e,o){"use strict";cc._RF.push(e,"dc581uOYWxIua+wn5HQ00cO","AttrHelper");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("GameMgr");function l(){return null!==c&&c.apply(this,arguments)||this}a(l,c=i("Singleton").default),l.prototype.getAttrValueStr=function(t){for(var e="",o=0,n=s.gm.config.data.AttrDatas;o<n.length;o++){var i=n[o];i.attr_type==t.attr_type&&(e=i.percentage?t.attr_num+"%":t.attr_num+"")}return e},l.prototype.getAttrName=function(t){for(var e="",o=0,n=s.gm.config.data.AttrDatas;o<n.length;o++){var i=n[o];if(i.attr_type==t.attr_type){e=i.desc;break}}return e},l.prototype.getAttrStr=function(t){return this.getAttrName(t)+":"+this.getAttrValueStr(t)},l.prototype.getAttrNum=function(t){for(var e=0,o=s.gm.config.data.AttrDatas;e<o.length;e++){var n=o[e];if(n.attr_type==t.attr_type&&n.percentage)return t.attr_num/100}return t.attr_num},a=l,r.default=a,cc._RF.pop()},{}],AudioPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"7d09cqt/Z9DAaQ/GFjCytVl","AudioPlayer");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(i,"masterVolume",{get:function(){return this._masterVolume},enumerable:!1,configurable:!0}),Object.defineProperty(i,"musicVolume",{get:function(){return this._musicVolume},enumerable:!1,configurable:!0}),Object.defineProperty(i,"effectVolume",{get:function(){return this._effectVolume},enumerable:!1,configurable:!0}),i.setMasterVolume=function(t){t<0?t=0:1<t&&(t=1),this._masterVolume=t,this.setMusicVolume(this._musicVolume),this.setEffectVolume(this._effectVolume)},i.setVolume=function(t){this.setMusicVolume(t),this.setEffectVolume(t)},i.setMusicVolume=function(t){t<0?t=0:1<t&&(t=1),this._musicVolume=t;var e=this._masterVolume*t;this._music.forEach(function(t){return cc.audioEngine.setVolume(t,e)})},i.setEffectVolume=function(t){t<0?t=0:1<t&&(t=1),this._effectVolume=t;var e=this._masterVolume*t;this._effect.forEach(function(t,o){return cc.audioEngine.setVolume(o,e)})},i.playMusic=function(t){this._music.has(t)&&this.stopMusic(t);var e=cc.audioEngine.play(t,!0,this._masterVolume*this._musicVolume);this._music.set(t,e)},i.playMusicOnce=function(t,e){t=cc.audioEngine.play(t,!1,this._masterVolume*this._musicVolume),cc.audioEngine.setFinishCallback(t,function(){e&&e()})},i.stopMusic=function(t){this._music.has(t)&&(cc.audioEngine.stop(this._music.get(t)),this._music.delete(t))},i.stopAllMusic=function(){var t=this;this._music.forEach(function(e,o){return t.stopMusic(o)})},i.pauseMusic=function(t){this._music.has(t)&&cc.audioEngine.pause(this._music.get(t))},i.pauseAllMusic=function(){var t=this;this._music.forEach(function(e,o){return t.pauseMusic(o)})},i.resumeMusic=function(t){this._music.has(t)&&cc.audioEngine.resume(this._music.get(t))},i.resumeAllMusic=function(){var t=this;this._music.forEach(function(e,o){return t.resumeMusic(o)})},i.playEffect=function(t,e){var o=this;void 0===e&&(e=!1);var n=cc.audioEngine.play(t,e,this._masterVolume*this._effectVolume);this._effect.set(n,t),e||cc.audioEngine.setFinishCallback(n,function(){return o._effect.delete(n)})},i.stopEffect=function(t){var e=this;this._effect.forEach(function(o,n){o===t&&(cc.audioEngine.stop(n),e._effect.delete(n))})},i.stopAllEffect=function(){var t=this;this._effect.forEach(function(e,o){cc.audioEngine.stop(o),t._effect.delete(o)})},i.pauseEffect=function(t){this._effect.forEach(function(e,o){return e===t&&cc.audioEngine.pause(o)})},i.pauseAllEffect=function(){this._effect.forEach(function(t,e){return cc.audioEngine.pause(e)})},i.resumeEffect=function(t){this._effect.forEach(function(e,o){return e===t&&cc.audioEngine.resume(o)})},i.resumeAllEffect=function(){this._effect.forEach(function(t,e){return cc.audioEngine.resume(e)})},i.stopAll=function(){this.stopAllMusic(),this.stopAllEffect()},i.pauseAll=function(){this.pauseAllMusic(),this.pauseAllEffect()},i.resumeAll=function(){this.resumeAllMusic(),this.resumeAllEffect()},i.mute=function(){this.setMasterVolume(0)},i._music=new Map,i._effect=new Map,i._masterVolume=1,i._musicVolume=.5,i._effectVolume=.5,n.default=i,cc._RF.pop()},{}],AudioUtils:[function(t,e,o){"use strict";cc._RF.push(e,"88339Z00JlCLpPUjDgNvlnr","AudioUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("AssetMgr"),r=n("AudioPlayer"),c=n("Const");function s(){}s.playBgHome=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/bg/background_home",cc.AudioClip,function(t){r.default.playMusic(t)})},s.playMakeTool=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/tool_created",cc.AudioClip,function(t){r.default.playEffect(t)})},s.click=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/ui_click_button",cc.AudioClip,function(t){r.default.playEffect(t)})},s.unlock=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/decorate_repair",cc.AudioClip,function(t){r.default.playEffect(t)})},s.broom=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/girl_clean_trash",cc.AudioClip,function(t){r.default.playEffect(t)})},s.award=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/mall_draw",cc.AudioClip,function(t){r.default.playEffect(t)})},s.collect_plant=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/tool_collect_plant",cc.AudioClip,function(t){r.default.playEffect(t)})},s.collect_stone=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/tool_collect_stone",cc.AudioClip,function(t){r.default.playEffect(t)})},s.collect_wood=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/tool_collect_wood",cc.AudioClip,function(t){r.default.playEffect(t)})},s.collect_mushroom=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/tool_collect_mushroom",cc.AudioClip,function(t){r.default.playEffect(t)})},s.start_business=function(){a.default.getInstance().getResAsyn(c.BundleName.COMMON,"audio/effect/start_business",cc.AudioClip,function(t){r.default.playEffect(t)})},n=s,i.default=n,cc._RF.pop()},{}],AwardItem:[function(t,e,o){"use strict";cc._RF.push(e,"377deYuBYxDAoqumFwNkdM+","AwardItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("CommonUtils");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_count=null,t.lbl_title=null,t.nod_tip=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=p.default),d.prototype.onEnable=function(){},d.prototype.onDisable=function(){},d.prototype.setData=function(t){this._data=t,this.updateUI(),this.nod_tip&&(this.nod_tip.active=t.limit),this.lbl_count.node.active=!t.notnumber,u.default.setUIByGainThing(t,this.spr_icon,this.lbl_title),this.lbl_count.string="x"+t.num},d.prototype.updateUI=function(){},s([a(cc.Sprite)],d.prototype,"spr_icon",void 0),s([a(cc.Label)],d.prototype,"lbl_count",void 0),s([a(cc.Label)],d.prototype,"lbl_title",void 0),s([a(cc.Node)],d.prototype,"nod_tip",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],BarbecueCookStudy:[function(t,e,o){"use strict";cc._RF.push(e,"c81adFQOplKyr7I5gcWT3RG","BarbecueCookStudy");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("Const"),d=i("PropMgr"),h=i("IconUtils"),_=i("EventManager"),f=i("GameModule"),g=i("Finger"),y=i("GuideMgr"),m=i("TaskRecordData"),v=i("BarbecueMenuData");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.spr_icon=null,t.finger=null,t.nod_consume_content=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=f.default),b.prototype.setData=function(t){this.data=t,this.updateUI()},b.prototype.updateUI=function(){this.lbl_title.string=this.data.menu_name,h.IconUtils.setBarbecueMenuIcon(this.data.menu_id,this.spr_icon),this.updateConsumeUI()},b.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=d.default.propItemToGainThing(this.data.learn_cost),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},b.prototype.onBtnStudy=function(){this.data.menu_id==y.default.getInstance().touchCondition.id&&y.default.getInstance().touchCondition.mission==u.ConditionType.bbq_learn_menu&&y.default.getInstance().resetTouchCondition(),d.default.tryConsume(this.data.learn_cost,!0)&&(v.default.getInstance().learnFoodMenu(this.data.menu_id),m.default.getInstance().addBBQLearnMenu(this.data.menu_id),_.default.emit(u.GameEvent.updateBase),_.default.emit(u.GameEvent.menu_update),this.closeMe())},s([a(cc.Label)],b.prototype,"lbl_title",void 0),s([a(cc.Sprite)],b.prototype,"spr_icon",void 0),s([a(g.default)],b.prototype,"finger",void 0),s([a(cc.Node)],b.prototype,"nod_consume_content",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],BarbecueIceBoxUI:[function(t,e,o){"use strict";cc._RF.push(e,"6e3f2G8aBtHerg1+l90EHMT","BarbecueIceBoxUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("CommonItem_4"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("GameModule"),y=i("NetUtils"),m=i("NodDecorationCommon"),v=i("Finger"),b=i("GuideMgr"),I=i("HouseKeeperMgr"),D=i("StaffViewMgr"),C=i("TaskMgr"),O=i("TaskRecordData"),w=i("BarbecueMenuData"),M=i("BarbecueMenuHelper");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.nodDecoration=null,t.item=null,t.list_prop=null,t.lbl_buy=null,t.finger_buy_prop=null,t.finger_add_goods=null,t.uid="",t.objectData=null,t.goods=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(P,l=g.default),P.prototype.onDisable=function(){b.default.getInstance().resetTouchCondition()},P.prototype.setData=function(t){this.uid=t,this.objectData=h.gm.mapData.getObjectData(this.uid),this.updateUI(),b.default.getInstance().touchCondition.mission==d.ConditionType.buy_prop?this.finger_buy_prop.showFinger(!0,!0):b.default.getInstance().touchCondition.mission==d.ConditionType.replenish_goods&&this.finger_add_goods.showFinger(!0,!0)},P.prototype.updateUI=function(){this.nodDecoration.setData(this.uid),this.item.setIconByPropID(d.CommonPropID.bbq_sauce),this.item.setCountStr("\u6570\u91cf\uff1a"+_.default.getPropCount(d.CommonPropID.bbq_sauce)),this.goods=M.default.getInstance().getAllLearnMenuMaterial(),this.list_prop.numItems=this.goods.length},P.prototype.onRenderProp=function(t,e){t.getComponent(p.default).setData({file:d.ThingType.normal,id:this.goods[e].prop_id,num:0}),t.getComponent(p.default).setCountStr((w.default.getInstance().stall_goods[this.goods[e].prop_id]||0)+"/"+this.goods[e].max_number)},P.prototype.onBtnBuy=function(){_.default.tryToBuy({file:d.ThingType.normal,id:d.CommonPropID.bbq_sauce,num:10},{file:d.ThingType.normal,id:d.CommonPropID.coin,num:300})&&(this.updateUI(),D.StaffViewMgr.getInstance().checkCook(),y.ReportData.instance.report_point(100005,41000020))},P.prototype.onBtnOneKey=function(){if(M.default.getInstance().getAllCanCookFood().length<=0)h.gm.ui.showNotice("\u8bf7\u5230\u70e7\u70e4\u67b6\u7814\u53d1\u83dc\u8c31");else{for(var t=!1,e=0,o=this.goods;e<o.length;e++){var n=o[e],i=Math.min(n.getLeftCount(),_.default.getPropCount(n.prop_id));M.default.getInstance().addGood(n.prop_id,i),0<i&&(t=!0)}t?(this.updateUI(),h.gm.ui.showNotice("\u8865\u8d27\u5b8c\u6210"),O.default.getInstance().setReplenish(this.objectData.objectID),C.default.getInstance().checkAll(),I.default.getInstance().onStallShelfAdd(),y.ReportData.instance.report_point(100005,41000018)):h.gm.ui.showNotice("\u65e0\u53ef\u8865\u5145\u8d27\u7269"),D.StaffViewMgr.getInstance().checkCook()}},s([a(m.default)],P.prototype,"nodDecoration",void 0),s([a(u.default)],P.prototype,"item",void 0),s([a(f.default)],P.prototype,"list_prop",void 0),s([a(cc.Label)],P.prototype,"lbl_buy",void 0),s([a(v.default)],P.prototype,"finger_buy_prop",void 0),s([a(v.default)],P.prototype,"finger_add_goods",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],BarbecueMenuData:[function(t,e,o){"use strict";cc._RF.push(e,"4b72a0uc0JNjJdwgHpduOw5","BarbecueMenuData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.BarbecueMenuItemData=void 0;var c,s=i("StorageBase"),l=i("BarbecueMenuHelper");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="BarbecueMenuData",t.menu_items={},t.stall_goods={},t}r(p,c=s.StorageBase),p.prototype.getMenuLv=function(t){var e=this.menu_items[t]?this.menu_items[t].lv:0;return this.menu_items[t]?Math.min(e,l.default.getInstance().getMaxLv(t)):e},p.prototype.isLearn=function(t){return!!this.menu_items[t]&&this.menu_items[t].learn},p.prototype.starLvUp=function(t){this.menu_items[t].lv++,this.async_write_data()},p.prototype.learnFoodMenu=function(t){this.menu_items[t]||(this.menu_items[t]=new u),this.menu_items[t].learn=!0,this.async_write_data()},p.prototype.addGoods=function(t,e){return this.stall_goods[t]||(this.stall_goods[t]=0),e<=0&&Math.abs(e)>this.stall_goods[t]?(cc.error("\u8d27\u7269\u4e0d\u8db3\u4ee5\u6263\u9664"),!1):(this.stall_goods[t]+=e,this.async_write_data(),!0)},p.prototype.getStallGoodCount=function(t){return this.stall_goods[t]||0},r=p,a.default=r;var u=function(){this.learn=!1,this.lv=1};a.BarbecueMenuItemData=u,cc._RF.pop()},{}],BarbecueMenuHelper:[function(t,e,o){"use strict";cc._RF.push(e,"13ca2TuE0tBxZoP78osvunH","BarbecueMenuHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.IceBoxItem=void 0;var c,s=i("Formula"),l=i("GameMgr"),p=i("PropMgr"),u=i("Singleton"),d=i("BarbecueMenuData");function h(){return null!==c&&c.apply(this,arguments)||this}r(h,c=u.default),h.prototype.getMaxLv=function(t){for(var e=0,o=0,n=l.gm.config.data.BarbecueMenuStarsData;o<n.length;o++){var i=n[o];i.id==t&&(e=Math.max(e,i.lv))}return e},h.prototype.getDatasByMenuType=function(t){for(var e=[],o=0,n=l.gm.config.data.BarbecueMenu;o<n.length;o++){var i=n[o];i.menu_type==t&&e.push(i)}return e},h.prototype.getConfigByID=function(t){for(var e=0,o=l.gm.config.data.BarbecueMenu;e<o.length;e++){var n=o[e];if(n.menu_id==t)return n}},h.prototype.getLightLines=function(t){for(var e=[],o=0,n=t;o<n.length;o++){var i=n[o];if(i.menu_unlock)for(var a=0,r=i.menu_unlock;a<r.length;a++){var c=r[a];d.default.getInstance().getMenuLv(c.menu_id)>=c.lv&&(c={start:c.menu_id,target:i.menu_id},e.push(c))}}return e},h.prototype.isUnlock=function(t){for(var e=0,o=l.gm.config.data.BarbecueMenu;e<o.length;e++){var n=o[e];if(n.menu_id==t){if(n.menu_unlock){for(var i=0,a=n.menu_unlock;i<a.length;i++){var r=a[i];if(d.default.getInstance().getMenuLv(r.menu_id)<r.lv)return!1}return!0}return!0}}return!1},h.prototype.getStarConfig=function(t,e){void 0===e&&(e=0);for(var o=0,n=l.gm.config.data.BarbecueMenuStarsData;o<n.length;o++){var i=n[o];if(i.id==t&&e==i.lv)return i}},h.prototype.getAllLearnMenuMaterial=function(){var t,e=[];for(t in d.default.getInstance().menu_items)if(d.default.getInstance().menu_items[t].learn)for(var o=0,n=l.gm.config.barbecueMenu[t].menu_cost;o<n.length;o++){var i,a=n[o];!function(t){for(var o=0,n=e;o<n.length;o++)if(n[o].prop_id==t)return;return 1}(a.id)||((i=new _).prop_id=a.id,i.max_number=s.Formula.bbq_ice_box_max(),e.push(i))}return e},h.prototype.getAllCanCookFood=function(){var t,e=[];for(t in d.default.getInstance().menu_items)d.default.getInstance().menu_items[t].learn&&e.push(l.gm.config.barbecueMenu[t].cook_food);return e},h.prototype.addGood=function(t,e){return!!(e=void 0===e?1:e)&&(p.default.getPropCount(t)<e?(l.gm.ui.showNotice("\u4ed3\u5e93\u8d27\u7269\u4e0d\u8db3"),!1):(p.default.tryConsume([{id:t,num:e}])&&d.default.getInstance().addGoods(t,e),!0))},h.prototype.getMenuConfigByFood=function(t){for(var e=0,o=l.gm.config.data.BarbecueMenu;e<o.length;e++){var n=o[e];if(n.cook_food.id==t)return n}},h.prototype.getMenuUpgradeConfigByFood=function(t){var e;if(e=this.getMenuConfigByFood(t).menu_id)return t=d.default.getInstance().getMenuLv(e),h.getInstance().getStarConfig(e,t)},h.prototype.tryConsumeMaterial=function(t,e){for(var o=0,n=t;o<n.length;o++){var i=n[o];if(d.default.getInstance().getStallGoodCount(i.id)<i.num)return!1}if(!p.default.checkBagEnough(e,!1))return!1;for(var a=0,r=t;a<r.length;a++)if(i=r[a],!d.default.getInstance().addGoods(i.id,-i.num))return cc.error("\u70e7\u70e4\u644a\u51b0\u7bb1\u8d27\u7269\u4e0d\u8db3\u4ee5\u6263\u51cf"),!1;return p.default.tryConsume(e,!1)},h.prototype.getGoodsByIceBox=function(){for(var t={curCount:0,totalCount:0},e=0,o=this.getAllLearnMenuMaterial();e<o.length;e++){var n=o[e],i=d.default.getInstance().stall_goods[n.prop_id]||0;n=n.max_number,t.curCount+=i,t.totalCount+=n}return t},r=h,a.default=r;var _=(f.prototype.getLeftCount=function(){var t=d.default.getInstance().stall_goods[this.prop_id]||0;return Math.max(this.max_number-t,0)},f);function f(){}a.IceBoxItem=_,cc._RF.pop()},{}],BarbecueMenuItem:[function(t,e,o){"use strict";cc._RF.push(e,"f8e6dIHgkNFELqwYgkOJYhM","BarbecueMenuItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("NodStars"),h=i("IconUtils"),_=i("ListItem"),f=i("GuideMgr"),g=i("BarbecueMenuData"),y=i("BarbecueMenuHelper");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.spr_icon=null,t.nod_lock=null,t.nodStars=null,t.lbl_count=null,t.nod_bg_count=null,t.nod_no_study=null,t.nod_bg_lv=null,t.lbl_lv=null,t.nod_next=null,t.data=null,t.state=p.MenuState.lock,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=_.default),m.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},m.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},m.prototype.start=function(){},m.prototype.setData=function(t){this.data=t,this.updateUI()},m.prototype.onTouchEnd=function(){var t=this;if(this.state==p.MenuState.learned)u.gm.ui.showModule(u.gm.const.BarbecueMenuUpgrade,function(e){e.setData(t.data)});else if(this.state==p.MenuState.unlock)u.gm.ui.showModule(u.gm.const.BarbecueCookStudy,function(e){e.setData(t.data)});else{if(this.data.menu_unlock){for(var e=0,o=this.data.menu_unlock;e<o.length;e++){var n=o[e];g.default.getInstance().getMenuLv(n.menu_id)<n.lv&&u.gm.ui.showNotice(u.gm.config.barbecueMenu[n.menu_id].menu_name+"\u9700\u8981\u8fbe\u5230Lv."+n.lv)}return!0}u.gm.ui.showNotice("\u83dc\u8c31\u672a\u89e3\u9501")}},m.prototype.updateUI=function(){var t=this;this.data&&(this.nod_no_study.active=!1,this.nod_bg_lv.active=!1,this.lbl_title.string=this.data.menu_name,y.default.getInstance().isUnlock(this.data.menu_id)?(this.state=p.MenuState.unlock,this.nod_lock.active=!1,this.spr_icon.node.opacity=255,g.default.getInstance().isLearn(this.data.menu_id)?(this.state=p.MenuState.learned,this.nod_bg_lv.active=!0):(this.nod_bg_count.active=!1,this.nod_no_study.active=!0)):(this.state=p.MenuState.lock,this.nod_lock.active=!0,this.spr_icon.node.opacity=100,this.nod_bg_count.active=!1),this.scheduleOnce(function(){h.IconUtils.setBarbecueMenuIcon(t.data.menu_id,t.spr_icon)}),this.nodStars.setStar(g.default.getInstance().getMenuLv(this.data.menu_id)),this.lbl_lv.string="Lv."+g.default.getInstance().getMenuLv(this.data.menu_id),this.data.menu_id==f.default.getInstance().touchCondition.id&&this.scheduleOnce(function(){u.gm.ui.showModule(u.gm.const.FingerGuide,function(e){e.showFingerByNode(t.node)})},.5))},s([a(cc.Label)],m.prototype,"lbl_title",void 0),s([a(cc.Sprite)],m.prototype,"spr_icon",void 0),s([a(cc.Node)],m.prototype,"nod_lock",void 0),s([a(d.default)],m.prototype,"nodStars",void 0),s([a(cc.Label)],m.prototype,"lbl_count",void 0),s([a(cc.Node)],m.prototype,"nod_bg_count",void 0),s([a(cc.Node)],m.prototype,"nod_no_study",void 0),s([a(cc.Node)],m.prototype,"nod_bg_lv",void 0),s([a(cc.Label)],m.prototype,"lbl_lv",void 0),s([a(cc.Node)],m.prototype,"nod_next",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],BarbecueMenuNew:[function(t,e,o){"use strict";cc._RF.push(e,"63f39/Uf6tB3aZzUwNY3QgX","BarbecueMenuNew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const"),d=i("EventManager"),h=i("GameModule"),_=i("GuideMgr"),f=i("BarbecueMenuHelper"),g=i("BarbecueMenuItem");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.node_meat=null,t.nod_line_meat=null,t.nod_meat_menu=null,t.nod_vegetable_items=null,t.nod_vegetable_lines=null,t.nod_vegetable_menu=null,t.toggle=null,t.curIndex=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=h.default),y.prototype.onEnable=function(){d.default.on(u.GameEvent.menu_update,this.updateUI,this)},y.prototype.onDisable=function(){d.default.off(u.GameEvent.menu_update,this.updateUI,this),_.default.getInstance().resetTouchCondition()},y.prototype.setData=function(t){if(t=void 0===t?0:t)this.curIndex=t;else if(_.default.getInstance().touchCondition.mission==u.ConditionType.bbq_learn_menu||_.default.getInstance().touchCondition.mission==u.ConditionType.bbq_menu_upgrade){var e=f.default.getInstance().getConfigByID(_.default.getInstance().touchCondition.id);if(e)for(var o=0;o<m.length;o++)m[o]==e.menu_type&&(this.curIndex=o)}this.updateUI()},y.prototype.updateUI=function(){this.toggle.toggleItems[this.curIndex].check(),1==m[this.curIndex]?(this.nod_vegetable_menu.active=!0,this.nod_meat_menu.active=!1,this.updateVegetableUI()):(this.nod_vegetable_menu.active=!1,this.nod_meat_menu.active=!0,this.updateMeatUI())},y.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.updateUI()},y.prototype.updateMeatUI=function(){for(var t=f.default.getInstance().getDatasByMenuType(2),e=0,o=t;e<o.length;e++){var n=o[e];this.node_meat.getChildByName(n.menu_id+"").getComponent(g.default).setData(n)}for(var i=0,a=f.default.getInstance().getLightLines(t);i<a.length;i++){var r=a[i],c=this.nod_line_meat.getChildByName("line_"+r.start+"_"+r.target);c?c.getChildByName("line_light").active=!0:cc.warn("line_"+r.start+"_"+r.target)}},y.prototype.updateVegetableUI=function(){for(var t=f.default.getInstance().getDatasByMenuType(1),e=0,o=t;e<o.length;e++){var n=o[e];this.nod_vegetable_items.getChildByName(n.menu_id+"").getComponent(g.default).setData(n)}for(var i=0,a=f.default.getInstance().getLightLines(t);i<a.length;i++){var r=a[i];this.nod_vegetable_lines.getChildByName("line_"+r.start+"_"+r.target).getChildByName("line_light").active=!0}},y.prototype.onBtnBack=function(){p.default.click(),this.closeMe()},s([a(cc.Node)],y.prototype,"node_meat",void 0),s([a(cc.Node)],y.prototype,"nod_line_meat",void 0),s([a(cc.Node)],y.prototype,"nod_meat_menu",void 0),s([a(cc.Node)],y.prototype,"nod_vegetable_items",void 0),s([a(cc.Node)],y.prototype,"nod_vegetable_lines",void 0),s([a(cc.Node)],y.prototype,"nod_vegetable_menu",void 0),s([a(cc.ToggleContainer)],y.prototype,"toggle",void 0),i=s([i],y),r.default=i;var m=[1,2];cc._RF.pop()},{}],BarbecueMenuUpgrade:[function(t,e,o){"use strict";cc._RF.push(e,"97455TjqYxOEY1ownSkve+x","BarbecueMenuUpgrade");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonItem"),d=i("CommonPropItem"),h=i("Const"),_=i("GameMgr"),f=i("NodPropertyItem"),g=i("NodStars"),y=i("PropMgr"),m=i("IconUtils"),v=i("List"),b=i("EventManager"),I=i("GameModule"),D=i("NetUtils"),C=i("GuideMgr"),O=i("BarbecueMenuData"),w=i("BarbecueMenuHelper");function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.spr_icon=null,t.nod_items=null,t.nod_reward_content=null,t.lbl_cost=null,t.spr_star_cost=null,t.nod_star_up=null,t.nodStars=null,t.list_property=null,t.nod_consume_content=null,t.data=null,t.cur_star_config=null,t.next_star_config=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(M,l=I.default),M.prototype.onEnable=function(){},M.prototype.setData=function(t){this.data=t,this.updateUI()},M.prototype.updateUI=function(){var t=this;this.lbl_title.string=this.data.menu_name,m.IconUtils.setBarbecueMenuIcon(this.data.menu_id,this.spr_icon);for(var e=0,o=this.nod_items.children;e<o.length;e++)o[e].active=!1;for(var n=this.data.menu_cost.concat(this.data.menu_cost_mix),i=0;i<n.length;i++)(s=this.nod_items.children[i])||(s=cc.instantiate(this.nod_items.children[0]),this.nod_items.addChild(s,i)),s.getComponent(d.default).setData(n[i]),n[i].id!=h.CommonPropID.bbq_sauce&&s.getComponent(d.default).setNum(n[i].num,O.default.getInstance().stall_goods[n[i].id]||0),s.active=!0;for(var a=0,r=this.nod_reward_content.children;a<r.length;a++)r[a].active=!1;var c=O.default.getInstance().getMenuLv(this.data.menu_id);this.cur_star_config=w.default.getInstance().getStarConfig(this.data.menu_id,c);var s,l=this.cur_star_config.evaluable;for(i=0;i<l.length;i++)(s=this.nod_reward_content.children[i])||(s=cc.instantiate(this.nod_reward_content.children[0]),this.nod_reward_content.addChild(s,i)),s.getComponent(u.default).setData(l[i]),s.active=!0;this.next_star_config=w.default.getInstance().getStarConfig(this.data.menu_id,c+1),this.nod_star_up.active=Boolean(this.next_star_config),this.nodStars.setStar(c),this.list_property.numItems=l.length,this.next_star_config&&this.updateConsumeUI(),cc.log(C.default.getInstance().touchCondition),C.default.getInstance().touchCondition.mission==h.ConditionType.bbq_menu_upgrade&&C.default.getInstance().touchCondition.id==this.data.menu_id&&this.scheduleOnce(function(){_.gm.ui.showModule(_.gm.const.FingerGuide,function(e){e.showFingerByNode(t.nod_star_up)})},.5)},M.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=y.default.propItemToGainThing(this.cur_star_config.cost),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(u.default).canTouch=!1,i.getComponent(u.default).setData(o[n]),i.active=!0}},M.prototype.onBtnStarLvUp=function(){p.default.click(),y.default.tryConsume(this.cur_star_config.cost,!0)&&(C.default.getInstance().resetTouchCondition(),O.default.getInstance().starLvUp(this.data.menu_id),b.default.emit(h.GameEvent.menu_update),this.updateUI(),D.ReportData.instance.report_point(100005,41000019))},M.prototype.onRenderProperty=function(t,e){var o=this.next_star_config?this.next_star_config.evaluable[e]:null;t.getComponent(f.default).setData(this.cur_star_config.evaluable[e],o)},s([a(cc.Label)],M.prototype,"lbl_title",void 0),s([a(cc.Sprite)],M.prototype,"spr_icon",void 0),s([a(cc.Node)],M.prototype,"nod_items",void 0),s([a(cc.Node)],M.prototype,"nod_reward_content",void 0),s([a(cc.Label)],M.prototype,"lbl_cost",void 0),s([a(cc.Sprite)],M.prototype,"spr_star_cost",void 0),s([a(cc.Node)],M.prototype,"nod_star_up",void 0),s([a(g.default)],M.prototype,"nodStars",void 0),s([a(v.default)],M.prototype,"list_property",void 0),s([a(cc.Node)],M.prototype,"nod_consume_content",void 0),i=s([i],M),r.default=i,cc._RF.pop()},{}],BarbecueMenu:[function(t,e,o){"use strict";cc._RF.push(e,"963e1vc4PdKgpOqUWvXKs60","BarbecueMenu");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("Const"),d=i("GameMgr"),h=i("NodStars"),_=i("PropMgr"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("DecorationMgr"),v=i("Finger"),b=i("GuideMgr"),I=i("NpcMgr"),D=i("ChooseStaffUI"),C=i("StaffData"),O=i("StaffHelper"),w=i("StaffViewMgr"),M=i("BarbecueMenuItem");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_menu=null,t.lbl_title=null,t.lbl_lv=null,t.nodStars=null,t.lbl_curAttr=null,t.lbl_nextAttr=null,t.nod_next=null,t.nod_consume_content=null,t.nod_bottom=null,t.nod_choose_tip=null,t.spine_choosed=null,t.finger_choose_staff=null,t.uid="",t.objectData=null,t.curData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(P,l=y.default),P.prototype.onEnable=function(){g.default.on(u.GameEvent.menu_update,this.updateUI,this),g.default.on(u.GameEvent.choose_staff,this.onChooseStaff,this)},P.prototype.onDisable=function(){g.default.off(u.GameEvent.menu_update,this.updateUI,this),g.default.off(u.GameEvent.choose_staff,this.onChooseStaff,this),b.default.getInstance().resetTouchCondition()},P.prototype.setData=function(t){this.uid=t,this.objectData=d.gm.mapData.getObjectData(this.uid),this.nod_bottom.active=!1,this.updateUI()},P.prototype.updateUI=function(){var t=this;this.list_menu.numItems=d.gm.config.data.BarbecueMenu.length,this.lbl_title.string=this.objectData.getConfig().name,this.lbl_lv.string="\u7b49\u7ea7\uff1a"+this.objectData.lv,this.nodStars.setStar(this.objectData.lv),this.curData=m.default.getDataModel(this.objectData.objectID,this.objectData.lv),this.lbl_curAttr.string=this.curData.getAttrStr();var e=m.default.getDataModel(this.objectData.objectID,this.objectData.lv+1);this.nod_next.active=Boolean(e),e&&(this.lbl_nextAttr.string=e.getAttrStr(),this.updateConsumeUI()),e=C.default.getInstance().getStaffByUID(this.objectData.getUID(),1),this.nod_choose_tip.active=!Boolean(e),this.spine_choosed.node.active=Boolean(e),e&&I.default.getInstance().loadSpineByNpcID(e,function(e){t.spine_choosed.skeletonData=e,t.spine_choosed.setSkin("default"),t.spine_choosed.setAnimation(0,"standby",!0)}),b.default.getInstance().touchCondition.mission==u.ConditionType.appoint_staff&&(e||this.finger_choose_staff.showFinger(!0,!0))},P.prototype.onRender=function(t,e){t.getComponent(M.default).setData(d.gm.config.data.BarbecueMenu[e])},P.prototype.onBtnUpgrade=function(){m.default.getConfig(this.objectData.objectID,this.objectData.lv+1)?_.default.tryConsume(this.curData.config.need,!0)&&(this.objectData.upgrade(),this.updateUI()):d.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},P.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=_.default.propItemToGainThing(this.curData.config.need),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},P.prototype.onBtnChooseStaff=function(){this.nod_bottom.active=!0,O.default.getInstance().cur_touch_slot_id=1,this.nod_bottom.getComponent(D.default).setData(this.objectData)},P.prototype.onBtnCloseBottom=function(){this.nod_bottom.active=!1},P.prototype.onBtnCloseUI=function(){this.closeMe()},P.prototype.onChooseStaff=function(){this.updateUI(),w.StaffViewMgr.getInstance().create(C.default.getInstance().getStaffByUID(this.uid,1),1)},s([a(f.default)],P.prototype,"list_menu",void 0),s([a(cc.Label)],P.prototype,"lbl_title",void 0),s([a(cc.Label)],P.prototype,"lbl_lv",void 0),s([a(h.default)],P.prototype,"nodStars",void 0),s([a(cc.Label)],P.prototype,"lbl_curAttr",void 0),s([a(cc.Label)],P.prototype,"lbl_nextAttr",void 0),s([a(cc.Node)],P.prototype,"nod_next",void 0),s([a(cc.Node)],P.prototype,"nod_consume_content",void 0),s([a(cc.Node)],P.prototype,"nod_bottom",void 0),s([a(cc.Node)],P.prototype,"nod_choose_tip",void 0),s([a(sp.Skeleton)],P.prototype,"spine_choosed",void 0),s([a(v.default)],P.prototype,"finger_choose_staff",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],BarbecueNpcData:[function(t,e,o){"use strict";cc._RF.push(e,"ed743O3NSdFwJjK5KhitTMA","BarbecueNpcData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.BBQNpcState=void 0;var c,s,l=i("EventManager"),p=i("Const"),u=i("ShelfNpcMgr"),d=i("Line"),h=i("NpcData"),_=i("BarbecueNpcMgr"),f=i("BarbecueOrderHelper"),g=i("BarbecueOrderData"),y=i("StaffViewMgr");function m(t){return(t=s.call(this,t)||this).state=c.none,t.isWaiting=!1,t.onTargetGrid=!1,t.speed=1,t.order=null,t.desk_uid="",t.chair_index=0,t}r(m,s=h.default),m.prototype.setChair=function(t,e){this.desk_uid=t,this.chair_index=e,e=g.default.getInstance().createNewOrder(this.npcID,this.desk_uid,this.chair_index),this.order=e,g.default.getInstance().addOrder(e,g.default.getInstance().waiting_orders),this.changeState(c.go_to_chair)},m.prototype.eatFood=function(t){this.order=t,this.changeState(c.eat_food)},m.prototype.eatFoodEnd=function(){g.default.getInstance().removeOrder(this.order,g.default.getInstance().eating_order),g.default.getInstance().addOrder(this.order,g.default.getInstance().eating_end_order),y.StaffViewMgr.getInstance().goToClean(),this.leaveFromChair()},m.prototype.onOutTimeLeave=function(){var t=this;_.default.getInstance().barbecueNpcView[this.npcID]&&(_.default.getInstance().barbecueNpcView[this.npcID].item_bubble.show(!1),_.default.getInstance().barbecueNpcView[this.npcID].nod_bubble.setText("\u7b49\u592a\u4e45\u4e86!!\u6211\u8d70\u4e86",!0,1,function(){t.leaveFromChair()}))},m.prototype.leaveFromChair=function(){this.changeState(c.leave_form_chair),_.default.getInstance().checkNpcCanGoIn()},m.prototype.changeState=function(t,e){void 0===e&&(e=!1),(t>this.state||e)&&this._setState(t)},m.prototype._setState=function(t){this.state=t,this.state==c.none?(_.default.getInstance().barbecueNpcView[this.npcID].node.destroy(),delete _.default.getInstance().barbecueNpcView[this.npcID],delete _.default.getInstance().barbecueNpcView[this.npcID],u.default.getInstance().removeNpc(this.npcID)):this.state==c.go_to_shelf?l.default.emit(p.GameEvent.change_bbq_npc_state,this.npcID):this.state==c.reach_shelf?(l.default.emit(p.GameEvent.change_bbq_npc_state,this.npcID),_.default.getInstance().npc_line_up.length>=f.default.getInstance().getLineUpMax()?(this.changeState(c.leave),(t=_.default.getInstance().barbecueNpcView[this.npcID])&&(t.moveByLine.line=d.default.createByNums(_.default.getInstance().line_leave),t.moveByLine.line.setCurIndex(0),t.moveByLine.goNextPointByData())):(_.default.getInstance().npc_line_up.push(this),_.default.getInstance().checkNpcCanGoIn())):this.state==c.go_to_chair?l.default.emit(p.GameEvent.change_bbq_npc_state,this.npcID):this.state==c.wait_for_place_order?(l.default.emit(p.GameEvent.change_bbq_npc_state,this.npcID),y.StaffViewMgr.getInstance().checkPlaceOrder()):this.state!=c.wait_for_goods&&this.state!=c.give_goods&&this.state!=c.no_goods&&this.state!=c.eat_food&&this.state!=c.leave_form_chair||l.default.emit(p.GameEvent.change_bbq_npc_state,this.npcID)},r=m,a.default=r,(a=c=a.BBQNpcState||(a.BBQNpcState={}))[a.none=0]="none",a[a.go_to_shelf=1]="go_to_shelf",a[a.reach_shelf=2]="reach_shelf",a[a.move_to_line_up=3]="move_to_line_up",a[a.go_to_chair=4]="go_to_chair",a[a.wait_for_place_order=5]="wait_for_place_order",a[a.wait_for_goods=6]="wait_for_goods",a[a.no_goods=7]="no_goods",a[a.give_goods=8]="give_goods",a[a.eat_food=9]="eat_food",a[a.wait_for_pay=10]="wait_for_pay",a[a.payed=11]="payed",a[a.leave=12]="leave",a[a.leave_form_chair=13]="leave_form_chair",cc._RF.pop()},{}],BarbecueNpcMgr:[function(t,e,o){"use strict";cc._RF.push(e,"46c63zzLUlLY6gXNYxOfxGJ","BarbecueNpcMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonData"),l=i("ConfigUtils"),p=i("Const"),u=i("Formula"),d=i("GameMgr"),h=i("Line"),_=i("MapDataHelper"),f=i("MapHelper"),g=i("Utils"),y=i("AssetMgr"),m=i("Singleton"),v=i("MathUtils"),b=i("ObjectUtils"),I=i("NpcAni"),D=i("NpcMgr"),C=i("TaskRecordData"),O=i("BarbecueMenuHelper"),w=i("BarbecueNpcData"),M=i("BarbecueNpcView"),P=i("BarbecueOrderHelper");function S(){var t=c.call(this)||this;return t.line_come_on=[41,2,40],t.line_leave=[40,9,8],t.line_start_grid=cc.v2(137,142),t.move_in_y=140,t.npc_configs_pool={},t.cur_configs={},t.barbecueNpcData={},t.barbecueNpcView={},t.time=0,t.npc_line_up=[],t._init(),t}r(S,c=m.default),S.prototype._init=function(){for(var t=0,e=d.gm.config.data.VillagerData;t<e.length;t++){var o=e[t];this.npc_configs_pool[o.npc_id]=o}},S.prototype.check=function(){if(this.isOpen()){if(this.time--,this.time<=0){for(var t=this.time=0,e=v.default.weight([{count:1,weight:4},{count:2,weight:3},{count:3,weight:2},{count:4,weight:1}],1);t<e.length;t++)for(var o=e[t],n=0;n<o.count;n++)this.tryToCreateNewNpc();this.time=u.Formula.getBBQNpcCDTime(_.default.getDataByID(p.SpecialObjectID.bbq_line_up))}s.default.getInstance().bbq_is_open||(s.default.getInstance().bbq_is_open=!0,s.default.getInstance().save(),d.gm.ui.showModule(d.gm.const.OpenRestaurantUI),g.Utils.broadWorld(p.BroadTypeEnum.OpenStore,0,"\u70e7\u70e4\u644a"))}},S.prototype.isOpen=function(){return!!(C.default.getInstance().unlockObjectRecord[p.SpecialObjectID.bbq_board_1]&&C.default.getInstance().unlockObjectRecord[p.SpecialObjectID.bbq_cash_box]&&C.default.getInstance().unlockObjectRecord[p.SpecialObjectID.bbq_desk]&&0<O.default.getInstance().getAllCanCookFood().length)},S.prototype.tryToCreateNewNpc=function(){var t=this._takeOutNpcConfig();return!!t&&(this.createByConfig(t,this.line_come_on),!0)},S.prototype._takeOutNpcConfig=function(){var t,e=[];for(t in this.npc_configs_pool){var o=this.npc_configs_pool[t];e.push(o)}if(0<e.length){var n=e[v.default.randomNum(0,e.length-1)];return b.default.moveTo(this.npc_configs_pool,this.cur_configs,n.npc_id),n}return null},S.prototype.removeNpc=function(t){this.barbecueNpcView[t].node.destroy(),delete this.barbecueNpcView[t],delete this.barbecueNpcData[t],b.default.moveTo(this.cur_configs,this.npc_configs_pool,t)},S.prototype.getView=function(){var t,e=[];for(t in this.barbecueNpcView)e.push(this.barbecueNpcView[t]);return e},S.prototype.getVisibleView=function(){var t,e=[];for(t in this.barbecueNpcView){var o=this.barbecueNpcView[t];o&&o.node&&f.default.checkNodeIsInWindow(o.node)&&e.push(o)}return e},S.prototype.createByConfig=function(t,e){var o=this,n=t.npc_id;this.barbecueNpcData[n]||(this.barbecueNpcData[n]=new w.default(n),this.barbecueNpcData[n].speed=l.NPCDataUtils.getConfigByID(n).customer_move_speed,this._createNodeByID(n,this.barbecueNpcData[n],function(t){o.barbecueNpcView[n]=t,o.barbecueNpcData[n].addLine(h.default.createByNums(e));var i=o.barbecueNpcData[n].line.getBegin();t.setGrid(i.gridPos),t.show(!0),o.barbecueNpcView[n].initLine(),o.barbecueNpcData[n].changeState(w.BBQNpcState.go_to_shelf)}))},S.prototype.create=function(t,e){var o=this,n=t.npc_id;this.barbecueNpcData[n]||(this.barbecueNpcData[n]=new w.default(n),this.barbecueNpcData[n].speed=l.NPCDataUtils.getConfigByID(n).customer_move_speed,this._createNodeByID(n,this.barbecueNpcData[n],function(t){o.barbecueNpcView[n]=t,e&&e(t)}))},S.prototype._createNodeByID=function(t,e,o){var n=this;y.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,"prefabs/npc/npc_barbecue",cc.Prefab,function(i){var a=(i=cc.instantiate(i)).getComponent(M.default);a.data=e,i.parent=d.gm.mainUI.map_object_layer,i.active=!0,a.show(!1),n.barbecueNpcView[t]=a,D.default.getInstance().loadSpineByNpcID(t,function(t){a.spine.skeletonData=t,a.spine.setSkin("default"),a.spine.setAnimation(0,"standby",!0),o&&o(a)})})},S.prototype.checkNpcCanGoIn=function(){var t=P.default.getInstance().getEmptyChair();return t&&0<t.left_chair_index.length&&0<this.npc_line_up.length?(this.npc_line_up.shift().setChair(t.uid,t.left_chair_index[0]),this.moveLineUp(),!0):(this.moveLineUp(),!1)},S.prototype.moveLineUp=function(){for(var t=0;t<this.npc_line_up.length;t++){var e=this.barbecueNpcView[this.npc_line_up[t].npcID];e&&(e.moveByLine.moveToPoint(cc.v2(this.line_start_grid.x+ +t,this.line_start_grid.y)),e.data.changeState(w.BBQNpcState.move_to_line_up))}},S.prototype.eatFood=function(t){var e=this.barbecueNpcData[t.npc_id];e&&e.eatFood(t)},S.prototype.move=function(t,e,o){void 0===o&&(o=null);var n=h.default.createByGrids(e),i=this.barbecueNpcView[t];i&&(i.moveByLine.moveByLine(n,function(t,e){i.getComponent(I.default).updateDirectionByPos(e,t),i.getComponent(I.default).playAniByType(p.EnumRoleAniType.walk),t=i.moveByLine.cur_speed/i.getNormalSpeed(),i.spine.timeScale=t},function(t){i.setGrid(t),f.default.checkNodeIsInWindow(i.node)&&f.default.sortReq(),i.data?(n.onMoveToNextPoint(),n.curIndex<n.getEndingIndex()?i.moveByLine.goNextPointByData():i.moveByLine.onMoveLineEnd()):cc.error("not found data")},o),i.moveByLine.line.setCurIndex(-1),i.moveByLine.goNextPointByData())},r=S,a.default=r,cc._RF.pop()},{}],BarbecueNpcView:[function(t,e,o){"use strict";cc._RF.push(e,"2125dkFKDlORbST+nazhQlS","BarbecueNpcView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("IMapPosCtrl"),_=i("ItemBubble"),f=i("Line"),g=i("MapDataHelper"),y=i("MapHelper"),m=i("MoveByLine"),v=i("NodBubble"),b=i("EventManager"),I=i("Vec2Utils"),D=i("Finger"),C=i("Object_25009"),O=i("Shopboard"),w=i("NpcAni"),M=i("BarbecueNpcData"),P=i("BarbecueNpcMgr");function S(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.spine_face=null,t.nod_touch=null,t.nod_foot=null,t.item_bubble=null,t.nod_bubble=null,t.nod_finger=null,t.moveByLine=null,t.nod_boundingBox=null,t.data=null,t.stepLen=60,t.stepTime=.6,t.curPath=[],t.posSys=new u.MapPosSys,t._display=!1,t._show=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(S,l=h.default),S.prototype.onLoad=function(){b.default.on(u.GameEvent.change_bbq_npc_state,this.onChangeState,this)},S.prototype.onDestroy=function(){b.default.off(u.GameEvent.change_bbq_npc_state,this.onChangeState,this)},S.prototype.onEnable=function(){this.spine.setCompleteListener(this.onSpineComplete.bind(this))},S.prototype.onDisable=function(){},S.prototype.initLine=function(){var t=this;this.moveByLine.line=this.data.line,this.moveByLine.cur_speed=this.data.speed,this.moveByLine.beforeMove=function(e,o){e.x>o.x?t.spine.node.scaleX=-1*Math.abs(t.spine.node.scaleX):t.spine.node.scaleX=Math.abs(t.spine.node.scaleX),e.y>o.y?t._setRoleAni("walk_back",!0):t._setRoleAni("walk",!0),o=t.moveByLine.cur_speed/t.getNormalSpeed(),t.spine.timeScale=o},this.moveByLine.onMoveToPoint=function(e){t.setGrid(e),y.default.checkNodeIsInWindow(t.getBoundingBoxNode())&&y.default.sortReq(),t.data?t.data.state==M.BBQNpcState.go_to_shelf?(t.moveByLine.line.onMoveToNextPoint(),t.moveByLine.line.curIndex<t.moveByLine.line.getEndingIndex()?t.moveByLine.goNextPointByData():t.data.changeState(M.BBQNpcState.reach_shelf)):t.data.state==M.BBQNpcState.leave?(t.moveByLine.line.onMoveToNextPoint(),t.moveByLine.line.curIndex<t.moveByLine.line.getEndingIndex()?t.moveByLine.goNextPointByData():(t.stand(),P.default.getInstance().removeNpc(t.data.npcID))):t.data.state==M.BBQNpcState.move_to_line_up&&t.stand():cc.error("not found data")}},S.prototype.onTouchItem=function(t){t.stopPropagation()},S.prototype.onSpineComplete=function(t){"give_gifts"==(t.animation.name||"")&&this._setRoleAni("standby",!0)},S.prototype.stand=function(){this.spine.timeScale=1,this._setRoleAni("standby",!0)},S.prototype.onChangeState=function(t){var e,o=this;t==this.data.npcID&&(this.data.state==M.BBQNpcState.go_to_shelf?(this.show(),this.moveByLine.goNextPointByData()):this.data.state==M.BBQNpcState.reach_shelf?this.stand():this.data.state==M.BBQNpcState.go_to_chair?(e=d.gm.mapData.getObjectData(this.data.desk_uid))&&e.loadObject(function(t){var e=t.getComponent(C.default).getStandGrid(o.data.chair_index),n=[cc.v2(o.getGrid().x,P.default.getInstance().move_in_y)];e=I.default.createLine(cc.v2(e.x,P.default.getInstance().move_in_y),e),n.push.apply(n,e),P.default.getInstance().move(o.data.npcID,n,function(){o.sitDownOnFoodChair(t.getComponent(C.default),o.data.chair_index),o.item_bubble.setItems([o.data.order.item]),o.item_bubble.show(),o.data.changeState(M.BBQNpcState.wait_for_place_order)})}):this.data.state==M.BBQNpcState.wait_for_goods?this.stand():this.data.state==M.BBQNpcState.no_goods?this.showAngry(!0):this.data.state==M.BBQNpcState.eat_food?(this.item_bubble.playProgress(1),this.getComponent(w.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1,function(){o.data.eatFoodEnd(),d.gm.mapData.getObjectData(o.data.desk_uid).loadObject(function(t){o.data.order&&t.getComponent(C.default).showGarbage(o.data.order.chair_index)})})):this.data.state==M.BBQNpcState.none?this.show(!1):this.data.state==M.BBQNpcState.leave_form_chair&&(this.reset(),this.item_bubble.show(!1),(e=d.gm.mapData.getObjectData(this.data.desk_uid))&&e.loadObject(function(t){var e=t.getComponent(C.default).getStandGrid(o.data.chair_index);t=f.default.createByNums(P.default.getInstance().line_leave).getGrids(),t=I.default.createLine(e,cc.v2(e.x,P.default.getInstance().move_in_y)).concat(t),P.default.getInstance().move(o.data.npcID,t,function(){P.default.getInstance().removeNpc(o.data.npcID)})})))},S.prototype.show=function(t){this._show=t=void 0===t||t,this._show&&this._display?this.node.opacity=255:this.node.opacity=0},S.prototype.display=function(t){this._display=t=void 0===t||t,this._show&&this._display?this.node.opacity=255:this.node.opacity=0},S.prototype.updateIndex=function(t){this.node.zIndex=t},S.prototype.getNormalSpeed=function(){return this.stepLen/this.stepTime},S.prototype.setGrid=function(t){this.curPath=[],this.posSys.worldGrid=t,this.moveByLine.lastPos=p.default.worldGridToPos(t),this.updatePos(),this.node.stopAllActions(),y.default.checkNodeIsInWindow(this.getBoundingBoxNode())&&y.default.update_scr_req()},S.prototype.updatePos=function(){var t,e,o=this;this.posSys.worldGrid&&(t=g.default.getDataByID(u.SpecialObjectID.stall),e=g.default.getDataByID(u.SpecialObjectID.barbecue),t&&I.default.includes(t.getSeizePos(),[this.posSys.worldGrid])?t.loadObject(function(e){o.node.parent=e.getComponent(O.default).nod_inside,o.posSys.parentUID=t.getUID(),o._updateByParent()}):e&&I.default.includes(e.getSeizePos(),[this.posSys.worldGrid])?e.loadObject(function(t){o.node.parent=t.nod_inside,o.posSys.parentUID=e.getUID(),o._updateByParent()}):(this.node.parent=d.gm.mainUI.map_object_layer,this.posSys.parentUID="",this._updateByParent()))},S.prototype._updateByParent=function(){var t=p.default.worldGridToPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(d.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)),this.node.x=t.x,this.node.y=t.y},S.prototype.getGrid=function(){return this.posSys.worldGrid},S.prototype.getPosSys=function(){return this.posSys},S.prototype.getGridWidth=function(){return 1},S.prototype.getGridHeight=function(){return 1},S.prototype.showFinger=function(){this.nod_finger&&this.nod_finger.showFinger(!0,!0)},S.prototype._setRoleAni=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),t==this.spine.animation&&!o||this.spine.setAnimation(0,t,e)},S.prototype.showAngry=function(t){void 0===t&&(t=!0),this.spine_face&&(this.spine_face.node.active=t)&&(this.spine_face.setSkin("default"),this.spine_face.setAnimation(0,"angry",!0))},S.prototype.sitDownOnFoodChair=function(t,e,o){void 0===o&&(o=null),(t=t.getChairByIndex(e)).removeAllChildren(),this.node.parent=t,this.node.x=0,this.node.y=0,this.show(),1==e||3==e?this.getComponent(w.default).updateDirectionByType(u.RoleDirection.left_up):this.getComponent(w.default).updateDirectionByType(u.RoleDirection.right_down),this.getComponent(w.default).playAniByType(u.EnumRoleAniType.sitdown,1,o)},S.prototype.reset=function(){this.setGrid(this.getGrid()),this.getComponent(w.default).setStandByAni(u.EnumRoleAniType.standby,!0)},S.prototype.getBoundingBoxNode=function(){return this.nod_boundingBox||(cc.error("not found nod_boundingBox",this.data),this.node)},s([a(sp.Skeleton)],S.prototype,"spine",void 0),s([a(sp.Skeleton)],S.prototype,"spine_face",void 0),s([a(cc.Node)],S.prototype,"nod_touch",void 0),s([a(cc.Node)],S.prototype,"nod_foot",void 0),s([a(_.default)],S.prototype,"item_bubble",void 0),s([a(v.default)],S.prototype,"nod_bubble",void 0),s([a(D.default)],S.prototype,"nod_finger",void 0),s([a(m.default)],S.prototype,"moveByLine",void 0),s([a(cc.Node)],S.prototype,"nod_boundingBox",void 0),i=s([i],S),r.default=i,cc._RF.pop()},{}],BarbecueOrderData:[function(t,e,o){"use strict";cc._RF.push(e,"573d27s2T9MhY/Nfxzv+0Wg","BarbecueOrderData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.BBQOrder=void 0;var c,s=i("GameMgr"),l=i("MathUtils"),p=i("StorageBase"),u=i("TimeUtils"),d=i("BarbecueMenuHelper"),h=i("BarbecueNpcMgr");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="BarbecueOrderData",t.waiting_orders=[],t.waiter_orders=[],t.chef_orders=[],t.cooking_orders=[],t.cook_end_order=[],t.eating_order=[],t.eating_end_order=[],t}r(_,c=p.StorageBase),_.prototype.addOrder=function(t,e){void 0===e&&(e=[]),t&&t.npc_id?(e.push(t),this.async_write_data()):cc.error(t)},_.prototype.removeOrder=function(t,e){if(0<(e=void 0===e?[]:e).length)for(var o=0;o<e.length;o++)if(e[o]==t)return e.splice(o,1),this.async_write_data(),!0;return cc.error("not found order",t,e),!1},_.prototype.getAllOrder=function(){return this.waiting_orders.concat(this.waiter_orders).concat(this.chef_orders).concat(this.cook_end_order).concat(this.cooking_orders).concat(this.eating_order).concat(this.eating_end_order)},_.prototype.createNewOrder=function(t,e,o){var n=new f;return n.npc_id=t,n.desk_uid=e,n.chair_index=o,n.item=this.createProp(),n},_.prototype.createProp=function(){var t=d.default.getInstance().getAllCanCookFood();return t[l.default.randomNum(0,t.length-1)]},_.prototype.takeOutCanCookOrder=function(){for(var t=0;t<_.getInstance().chef_orders.length;t++){var e=_.getInstance().chef_orders[t];if(e=d.default.getInstance().getMenuConfigByFood(e.item.id),d.default.getInstance().tryConsumeMaterial(e.menu_cost,e.menu_cost_mix))return _.getInstance().chef_orders.splice(t,1)[0]}},_.prototype.transOrderToChef=function(t){this.removeOrder(t,this.waiter_orders),t.beginTime=u.default.getTime(),t.dealing=!1,this.addOrder(t,this.chef_orders)},_.prototype.getDeskOrder=function(){for(var t=0,e=this.cook_end_order;t<e.length;t++){var o=e[t];if(!o.dealing)return this.setOrderDealing(o),o}},_.prototype.getEatingEndOrder=function(){for(var t=0,e=this.eating_end_order;t<e.length;t++){var o=e[t];if(!o.dealing)return this.setOrderDealing(o),o}},_.prototype.setOrderDealing=function(t,e){void 0===e&&(e=!0),t&&(t.dealing=e,this.async_write_data())},_.prototype.checkOrder=function(){for(var t=u.default.getTime(),e=0;e<this.chef_orders.length;e++){var o=this.chef_orders[e];if(!o.dealing&&t-o.beginTime>s.gm.config.data.Setting[0].bbq_order_out_time)return h.default.getInstance().barbecueNpcData[o.npc_id].onOutTimeLeave(),this.chef_orders.splice(e,1),void this.async_write_data()}},r=_,a.default=r;var f=function(){this.npc_id=0,this.desk_uid="",this.chair_index=0,this.item=null,this.beginTime=0,this.dealing=!1};a.BBQOrder=f,cc._RF.pop()},{}],BarbecueOrderHelper:[function(t,e,o){"use strict";cc._RF.push(e,"df65eQjvfdFerE23s8RBRmv","BarbecueOrderHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("MapDataHelper"),p=i("Singleton"),u=i("BarbecueOrderData");function d(){return null!==c&&c.apply(this,arguments)||this}r(d,c=p.default),d.prototype.getLineUpMax=function(){return 5*l.default.getUnlockDatas([s.SpecialObjectID.bbq_desk]).length},d.prototype.getEmptyChair=function(){var t=this,e=l.default.getUnlockBBQDesk();return e&&0<e.length?(e.sort(function(e,o){return t.getObjectEmptyChair(o).left_chair_index.length-t.getObjectEmptyChair(e).left_chair_index.length}),this.getObjectEmptyChair(e[0])):null},d.prototype.getObjectEmptyChair=function(t){for(var e={uid:t.getUID(),left_chair_index:[0,1,2,3]},o=0,n=u.default.getInstance().getAllOrder();o<n.length;o++){var i=n[o];if(i.desk_uid==t.getUID())for(var a=0;a<e.left_chair_index.length;a++)e.left_chair_index[a]==i.chair_index&&e.left_chair_index.splice(a,1)}return e},r=d,a.default=r,cc._RF.pop()},{}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"658b5x5VM1ArYi0AymMmSCI","BaseUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("AudioUtils"),d=i("ChannelManager"),h=i("CommonData"),_=i("CommonUtils"),f=i("Const"),g=i("GameMgr"),y=i("LeftItemCtrl"),m=i("LocalData"),v=i("LvMgr"),b=i("MapDataHelper"),I=i("PropMgr"),D=i("Utils"),C=i("IconUtils"),O=i("AssetMgr"),w=i("EventManager"),M=i("GameModule"),P=i("StringUtil"),S=i("TimeUtils"),T=i("NetUtils"),j=i("SaveMgr"),k=i("ModuleIcon"),A=i("ModuleIconMgr"),R=i("PlaceMgr"),N=i("FoodOrderMgr"),E=i("NodFoodItem"),B=i("HeartMgr"),U=i("ShareMgr"),G=i("NodTask"),x=i("TaskMgr"),L=i("TruckMgr");function F(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_coin=null,t.lbl_diamond=null,t.lbl_lv=null,t.nod_left=null,t.nod_task=null,t.nod_food=null,t.nod_stall=null,t.nod_right=null,t.nod_top=null,t.nod_auto_collect_on=null,t.nod_auto_collect_off=null,t.nod_auto_time_bg=null,t.auto_collect_time=null,t.dgree_spi=null,t.dgree_ani=null,t.nod_right_more=null,t.nod_right_top=null,t.nod_left_buttom=null,t.nod_warehouse=null,t.nod_shop=null,t.nod_exp=null,t.pro_heart=null,t.lbl_heart_progress=null,t.lbl_heart_count=null,t.lbl_pro_strength=null,t.pro_strength=null,t.lbl_pro_hp=null,t.pro_hp=null,t.lbl_add_coin=null,t.lbl_add_diamond=null,t.lbl_name=null,t.lbl_add_heart=null,t.nod_staff=null,t.nod_explore=null,t.nod_home=null,t.nod_houshan=null,t.nod_follow=null,t.nod_decorate=null,t.nod_online=null,t.nod_more=null,t.nod_daily_task=null,t.image_icon=null,t.nod_sign_in=null,t.nod_home_btn=null,t.staff_food=null,t.spr_video=null,t.video_state=0,t._record_start_time=0,t._record_end_time=0,t._base_ui_type=f.E_BaseUIType.home,t}i=(a=cc._decorator).ccclass,a=a.property,c(F,l=M.default),F.prototype.onLoad=function(){l.prototype.onLoad.call(this)},F.prototype.start=function(){var t=this;O.default.getInstance().getResAsyn(f.BundleName.MAIN_UI,g.gm.const.ExploreLoading.loadPath,cc.Prefab,function(){}),this.scheduleOnce(function(){_.default.createRedDot(t.nod_daily_task,"nod_daily_task",25,25),_.default.createRedDot(t.nod_online,"nod_online",25,25),_.default.createRedDot(t.nod_sign_in,"nod_sign_in",25,25)}),A.default.getInstance().checkHide(),this.staff_food.hide(),this.spr_video.node.active=g.gm.channel.get_channel_name()==d.ChannelManager.TT_GAME,this.updateVedioSpr()},F.prototype.registTaskListener=function(){for(var t=0,e=[f.GameEvent.on_recruit_staff,f.GameEvent.updateBase,f.GameEvent.appoint_staff,f.GameEvent.unlock_module,f.GameEvent.menu_update];t<e.length;t++)w.default.on(e[t],this.updateTaskItem,this)},F.prototype.closeTaskListener=function(){for(var t=0,e=[f.GameEvent.on_recruit_staff,f.GameEvent.updateBase,f.GameEvent.appoint_staff,f.GameEvent.unlock_module,f.GameEvent.menu_update];t<e.length;t++)w.default.off(e[t],this.updateTaskItem,this)},F.prototype.onEnable=function(){w.default.on(f.GameEvent.updateBase,this.updateBase,this),w.default.on(f.GameEvent.updateFoodUI,this.updateFoodItem,this),w.default.on(f.GameEvent.change_businessman_state,this.checkStallItem,this),w.default.on(f.GameEvent.updateFloatUI,this.updateFloatUI,this),w.default.on(f.GameEvent.show_exlore_follow,this.show_exlore_follow,this),w.default.on(f.GameEvent.show_exlore_unfollow,this.show_exlore_unfollow,this),w.default.on(f.GameEvent.object_upgrade,this.onObjectUpgrade,this),this.registTaskListener(),this.updateUI(),this.updateInviteData()},F.prototype.onDisable=function(){w.default.off(f.GameEvent.updateBase,this.updateBase,this),w.default.off(f.GameEvent.updateFoodUI,this.updateFoodItem,this),w.default.off(f.GameEvent.change_businessman_state,this.checkStallItem,this),w.default.off(f.GameEvent.updateFloatUI,this.updateFloatUI,this),w.default.off(f.GameEvent.show_exlore_follow,this.show_exlore_follow,this),w.default.off(f.GameEvent.show_exlore_unfollow,this.show_exlore_unfollow,this),w.default.off(f.GameEvent.object_upgrade,this.onObjectUpgrade,this),this.closeTaskListener()},F.prototype.updateUI=function(){this.nod_sign_in.active=Boolean(h.default.getInstance().sign_in_time.length<7),this.updateAttr(),this.updateTaskItem(),this.updateFoodItem(),this.checkStallItem(),this.nod_follow.active=!1,g.gm.channel.get_channel_name()==d.ChannelManager.WX_GAME&&g.gm.channel.autoUpdate(),g.gm.localData.get_bless_data(!0)},F.prototype.updateBase=function(){this.updateAttr()},F.prototype.updateAttr=function(){this.lbl_coin.string=""+P.default.n2k(I.default.getPropCount(f.CommonPropID.coin)),this.lbl_diamond.string=""+P.default.n2k(I.default.getPropCount(f.CommonPropID.diamond)),this.lbl_lv.string=""+v.default.getInstance().getLv(),this.nod_exp.getComponent(cc.ProgressBar).progress=v.default.getInstance().getProgress(),this.lbl_heart_count.string=""+P.default.n2k(I.default.getPropCount(f.CommonPropID.heart),2),this.lbl_heart_progress.string=B.default.getInstance().getProduce()+"/\u5206\u949f",this.lbl_pro_strength.string=g.gm.localData.curStrength+"/"+v.default.getInstance().getStrengthMax(),this.pro_strength.progress=g.gm.localData.curStrength/v.default.getInstance().getStrengthMax(),this.lbl_pro_hp.string=g.gm.localData.curHp+"/"+v.default.getInstance().getHpMax(),this.pro_hp.progress=g.gm.localData.curHp/v.default.getInstance().getHpMax(),""!=g.gm.localData.nick_name?this.lbl_name.string=g.gm.localData.nick_name:this.lbl_name.string="\u6211\u662f\u4e00\u4e2a\u5c0f\u82f9\u679c",C.IconUtils.setSpriteFrame(f.BundleName.COMMON,"texture/prop_90_90/prop_"+g.gm.localData.sex_id,this.image_icon)},F.prototype.getInviteRsp=function(t){if(0==t.ResultCode&&0<t.data.length){for(var e=0;e<t.data.length;++e){for(var o,n=!1,i=0;i<g.gm.localData.invite_data.children_list.length;++i)if(t.data[e].uid==g.gm.localData.invite_data.children_list[i].uid){n=!0,g.gm.localData.invite_data.children_list[i].level=t.data[e].level,g.gm.localData.invite_data.children_list[i].nick_name=t.data[e].nick_name,g.gm.localData.invite_data.children_list[i].image_id=t.data[e].image_id;break}n||((o=new m.InviteChildren).uid=t.data[e].uid,o.level=t.data[e].level,o.nick_name=t.data[e].nick_name,o.image_id=t.data[e].image_id,g.gm.localData.invite_data.children_list.push(o))}g.gm.localData.saveByKey("invite_data")}},F.prototype.updateInviteData=function(){if(g.gm.localData.invite_data&&(g.gm.localData.invite_data.now_index||0==g.gm.localData.invite_data.now_index)||(g.gm.localData.invite_data=new m.InviteData,g.gm.localData.saveByKey("invite_data")),g.gm.channel.get_channel_name()==d.ChannelManager.WX_GAME){var t=g.gm.channel.getShareOpenId();if(t&&""!=t&&t!=g.gm.data.uid){for(var e=!1,o=0;o<g.gm.localData.invite_data.parent_list.length;++o)if(g.gm.localData.invite_data.parent_list[o]==t){e=!0;break}e||(g.gm.localData.invite_data.parent_list.push(t),g.gm.localData.saveByKey("invite_data"))}for(o=0;o<g.gm.localData.invite_data.parent_list.length;++o)D.Utils.server_http_request(null,this,g.gm.channel.getServerUrl()+"user/upload_player_data_to_share/upload?uid=%s&token=%s&open_id=%s&channel_id=%s&nick_name=%s&level=%s&image_id=%s&inviter_uid=%s",g.gm.data.uid,g.gm.data.token,g.gm.data.open_id,g.gm.channel.get_channel_id().toString(),g.gm.localData.nick_name,v.default.getInstance().getLv().toString(),g.gm.localData.sex_id+"",g.gm.localData.invite_data.parent_list[o]);U.default.getInstance().GetDataFromServer()}},F.prototype.updateTaskItem=function(){for(var t=x.default.getInstance().getCurList(),e=0;e<this.nod_task.children.length;e++)(n=this.nod_task.children[e])&&!t[e]&&(n.active=!1);0==t.length&&(this.nod_task.height=0);var o=-1;for(e=0;e<t.length;e++){var n,i=t[e];this.nod_task.children[e]?(this.nod_task.children[e].active=!0,this.nod_task.children[e].getComponent(G.default).setData(i)):this.nod_task.children[0]?((n=cc.instantiate(this.nod_task.children[0])).active=!0,n.x=0,this.nod_task.addChild(n),n.getComponent(G.default).setData(i)):cc.error("not found task item"),i.getCurTask().isNew&&(i.getCurTask().isNew=!1,-1==o&&(o=e))}-1<o&&this.nod_task.children[o].getComponent(y.default).showAndAutoHide()},F.prototype.updateFoodItem=function(){for(var t=0,e=this.nod_food.children;t<e.length;t++)(n=e[t]).active=!1;var o=Object.values(N.default.getInstance().getCurOrders());this.nod_food.active=!1;for(var n,i,a=0;a<o.length;a++)(n=o[a]).state!=N.FoodOrderState.award&&(this.nod_food.active=!0,this.nod_food.children[a]?(this.nod_food.children[a].active=!0,this.nod_food.children[a].getComponent(E.default).setData(n)):this.nod_food.children[0]?((i=cc.instantiate(this.nod_food.children[0])).active=!0,i.x=0,this.nod_food.addChild(i),i.getComponent(E.default).setData(n)):cc.error("not found food item"))},F.prototype.checkStallItem=function(){for(var t=0,e=this.nod_stall.children;t<e.length;t++)e[t].active=!1;L.default.getInstance().truckView&&L.default.getInstance().truckView.data&&L.default.getInstance().truckView.data.state==f.TraderActionState.wait_for_trading?this.nod_stall.children[0].active=!0:this.nod_stall.children[0].active=!1},F.prototype.onClickBuild=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),g.gm.mapData.tempObjectData||g.gm.ui.showModule(g.gm.const.BuildUI))},F.prototype.onClickWarehouse=function(){var t;R.default.getInstance().isBuildingMode()||(u.default.click(),(t=b.default.getDataByID(f.SpecialObjectID.warehouse))&&!t.isLock()?g.gm.mapData.tempObjectData||g.gm.ui.showModule(g.gm.const.Warehouse):g.gm.ui.showNotice("\u4ed3\u5e93\u672a\u89e3\u9501"))},F.prototype.onClickShop=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),_.default.isInPetRoom()?(g.gm.ui.showModule(g.gm.const.ShopTopUI),g.gm.ui.closeModule(g.gm.const.BaseUI),g.gm.ui.showModule(g.gm.const.ShopDecorationPool,function(t){t.setDataByProp(f.CommonPropID.ticket,!0)})):g.gm.ui.showModule(g.gm.const.ShopMainUI))},F.prototype.onClickDecoration=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),T.ReportData.instance.report_point(100005,41000036),g.gm.mapData.tempObjectData||g.gm.ui.showModule(g.gm.const.DecorateUI))},F.prototype.onClickBroadcast=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),T.ReportData.instance.report_point(100005,41000013),g.gm.ui.showModule(g.gm.const.BroadcastPrepare))},F.prototype.onClickShare=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),T.ReportData.instance.report_point(100005,41000028),g.gm.ui.showModule(g.gm.const.ShareUI,function(t){t.setData()}))},F.prototype.onClickSetting=function(){R.default.getInstance().isBuildingMode()||(u.default.click(),g.gm.ui.showModule(g.gm.const.Setting))},F.prototype.onClickHead=function(){T.ReportData.instance.report_point(100005,41000035),g.gm.ui.showModule(g.gm.const.HeadUI)},F.prototype.setModeHide=function(t){(this._base_ui_type=t)==f.E_BaseUIType.explore?(this.nod_left.opacity=255,this.nod_right.active=!1,this.nod_top.active=!0,this.nod_right_top.active=!0,this.nod_left_buttom.active=!0,this.nod_home.active=!1,this.nod_home_btn.active=!0,this.nod_houshan.active=!0,this.showAutoCollectTime()):t==f.E_BaseUIType.home?(this.nod_left.opacity=255,this.nod_right.active=!0,this.nod_top.active=!0,this.nod_right_top.active=!0,this.nod_left_buttom.active=!0,this.nod_home.active=!0,this.nod_houshan.active=!1,this.nod_home_btn.active=!1):t==f.E_BaseUIType.petMap&&(this.hideRight(),this.hideLeft(),this.nod_home.active=!1,this.nod_houshan.active=!1,this.nod_home_btn.active=!0)},F.prototype.showAutoCollectTime=function(){this.nod_auto_time_bg.active=!0,0<g.gm.localData.autoCollectState?(this.nod_auto_collect_on.active=!0,this.nod_auto_collect_off.active=!1,this.dgree_spi.fillRange=g.gm.localData.autoCollectTime/g.gm.localData.autoCollectTotalTime,this.dgree_ani.angle=g.gm.localData.autoCollectTime/g.gm.localData.autoCollectTotalTime*360):(this.nod_auto_collect_on.active=!1,this.nod_auto_collect_off.active=!0,g.gm.localData.autoCollectTime<=0&&(this.nod_auto_time_bg.active=!1)),this.auto_collect_time.string=P.default.countDownFormat(g.gm.localData.autoCollectTime)},F.prototype.onClickOpenAutoUi=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.ExploreAutoCollect)},F.prototype.onClickOpenAuto=function(){if(u.default.click(),0<g.gm.localData.autoCollectTime){for(var t=!1,e=1;e<=6;++e)if(g.gm.localData.tools[e]&&g.gm.localData.tools[e].durability<=60){t=!0;break}t?g.gm.ui.showModule(g.gm.const.ExploreOneKeyRepair):(g.gm.localData.autoCollectState=1,g.gm.localData.saveByKey("autoCollectState"),this.showAutoCollectTime())}else g.gm.ui.showModule(g.gm.const.ExploreAutoCollect)},F.prototype.onClickCloseAuto=function(){u.default.click(),g.gm.localData.autoCollectState=0,g.gm.localData.saveByKey("autoCollectState"),this.showAutoCollectTime()},F.prototype.onClickExplore=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.ExploreLoading,function(){g.gm.ui.showModule(g.gm.const.Explore,function(t){t.setData(p.default.getInstance().curTouchItemID||0),p.default.getInstance().curTouchItemID=0})})},F.prototype.onClickPetRoom=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.ExploreLoading,function(){g.gm.ui.showModule(g.gm.const.PetRoom,function(){})})},F.prototype.onClickFollow=function(){u.default.click(),this.nod_follow.active=!1,w.default.emit(f.GameEvent.explore_follow)},F.prototype.show_exlore_follow=function(){this.nod_follow.active=!0},F.prototype.show_exlore_unfollow=function(){this.nod_follow.active=!1},F.prototype.onClickHome=function(){u.default.click(),w.default.emit(f.GameEvent.explore_go_home)},F.prototype.addCoin=function(){I.default.addProps([{id:f.CommonPropID.coin,num:1e6}],!1)},F.prototype.resetAuto=function(){g.gm.localData.autoCollectTime=0,g.gm.localData.autoCollectTotalTime=0,g.gm.localData.autoCollectState=0},F.prototype.cookingHideUI=function(){this.nod_left.opacity=0,this.nod_right.active=!1,this.nod_top.active=!1,this.nod_right_top.active=!1,this.nod_left_buttom.active=!1},F.prototype.hideRight=function(){this.nod_right.active=!1,this.nod_right_top.active=!1},F.prototype.hideLeft=function(){this.nod_left.opacity=0},F.prototype.showUI=function(){this.setModeHide(this._base_ui_type)},F.prototype.update=function(){this.pro_heart.progress=B.default.getInstance().curProgress,this.showAutoCollectTime(),g.gm.localData.get_bless_data(!1),this.savePlayerData()},F.prototype.savePlayerData=function(){g.gm.channel.get_is_save()&&(g.gm.localData.last_save_time||(g.gm.localData.last_save_time=0),S.default.getTime()>=g.gm.localData.last_save_time&&5<=v.default.getInstance().getLv()&&(j.default.getInstance().savePlayerData(),g.gm.localData.last_save_time=S.default.getTime()+300,g.gm.localData.saveByKey("last_save_time")))},F.prototype.updateFloatUI=function(t,e){t==f.CommonPropID.coin?(this.lbl_add_coin.string=0<e?"+"+e:e+"",this.float(this.lbl_add_coin.node)):t==f.CommonPropID.diamond?(this.lbl_add_diamond.string=0<e?"+"+e:e+"",this.float(this.lbl_add_diamond.node)):t==f.CommonPropID.heart&&(this.lbl_add_heart.string=0<e?"+"+e:e+"",this.float(this.lbl_add_heart.node))},F.prototype.float=function(t){var e=t.y;t.opacity=255,cc.tween(t).by(1,{y:50,opacity:-255}).call(function(){t.y=e}).start()},F.prototype.getTaskItemByID=function(t){for(var e=0,o=this.nod_task.children;e<o.length;e++){var n=o[e];if(n.getComponent(G.default).task.taskID==t)return n}},F.prototype.onClickDailyTask=function(){T.ReportData.instance.report_point(100005,41000027),u.default.click(),g.gm.ui.showModule(g.gm.const.DailyTaskUI)},F.prototype.onBtnStaff=function(){u.default.click(),g.gm.ui.showNotice("\u529f\u80fd\u672a\u5f00\u542f\uff0c\u656c\u8bf7\u671f\u5f85")},F.prototype.onBtnWelfare=function(){T.ReportData.instance.report_point(100005,41000029),u.default.click(),g.gm.ui.showModule(g.gm.const.WelfareUI)},F.prototype.onBtnMore=function(){this.nod_left.opacity=Boolean(this.nod_left.opacity)?0:255,this.nod_more.scaleY=this.nod_left.opacity?-1:1},F.prototype.onBtnHouseKeeper=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.HouseKeeperUI)},F.prototype.onBtnCoin=function(){g.gm.ui.showModule(g.gm.const.GetStrengthUI,function(t){t.setData(2)})},F.prototype.onBtnDiamond=function(){g.gm.ui.showModule(g.gm.const.GetStrengthUI,function(t){t.setData(3)})},F.prototype.onBtnHeart=function(){g.gm.ui.showModule(g.gm.const.GetStrengthUI,function(t){t.setData(4)})},F.prototype.onBtnStrength=function(){g.gm.ui.showModule(g.gm.const.GetStrengthUI,function(t){t.setData(1)})},F.prototype.onObjectUpgrade=function(t){this.updateTaskItem(),t!=f.SpecialObjectID.food_table&&t!=f.SpecialObjectID.light_plate||N.default.getInstance().checkNewOrder()},F.prototype.onBtnBless=function(){u.default.click(),T.ReportData.instance.report_point(100005,41000030),g.gm.ui.showModule(g.gm.const.BlessUI,function(){})},F.prototype.onBtnSignIn=function(){u.default.click(),T.ReportData.instance.report_point(100005,41000032),g.gm.ui.showModule(g.gm.const.SignInUI)},F.prototype.onClickMore=function(){u.default.click(),T.ReportData.instance.report_point(100005,41000033),this.nod_right_more.active=!this.nod_right_more.active},F.prototype.onClickPet=function(){u.default.click(),g.gm.ui.showNotice("\u529f\u80fd\u672a\u5f00\u542f\uff0c\u656c\u8bf7\u671f\u5f85")},F.prototype.onClickOnline=function(){u.default.click(),T.ReportData.instance.report_point(100005,41000037),g.gm.ui.showModule(g.gm.const.Online)},F.prototype.onClickReplace=function(){u.default.click(),T.ReportData.instance.report_point(100005,41000031),g.gm.ui.showModule(g.gm.const.ReplacementUI)},F.prototype.onClickCompletion=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.CompletionUI,function(t){t.setData()})},F.prototype.onClickPray=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.PrayUI,function(){})},F.prototype.onClickStaffFood=function(){u.default.click(),g.gm.ui.showModule(g.gm.const.StaffFoodUI)},F.prototype.onBtnVideo=function(){0==this.video_state?(g.gm.channel.record_start(),this.video_state=1,this._record_start_time=Date.now()):1==this.video_state?Date.now()-this._record_start_time<3300?g.gm.ui.showNotice("\u5f55\u5c4f\u65f6\u957f\u5c0f\u4e8e3s\uff0c\u65e0\u6cd5\u5206\u4eab"):(g.gm.channel.record_stop(!1),this.video_state=2):2==this.video_state&&(this.video_state=0,g.gm.ui.showModule(g.gm.const.ShareVedio)),this.updateVedioSpr()},F.prototype.updateVedioSpr=function(){0==this.video_state?C.IconUtils.setSpriteFrame(f.BundleName.MAIN_UI,"texture/main_ui/right_ui/video",this.spr_video):1==this.video_state?C.IconUtils.setSpriteFrame(f.BundleName.MAIN_UI,"texture/main_ui/right_ui/videoing",this.spr_video):2==this.video_state&&C.IconUtils.setSpriteFrame(f.BundleName.MAIN_UI,"texture/main_ui/right_ui/video_share",this.spr_video)},s([a(cc.Label)],F.prototype,"lbl_coin",void 0),s([a(cc.Label)],F.prototype,"lbl_diamond",void 0),s([a(cc.Label)],F.prototype,"lbl_lv",void 0),s([a(cc.Node)],F.prototype,"nod_left",void 0),s([a(cc.Node)],F.prototype,"nod_task",void 0),s([a(cc.Node)],F.prototype,"nod_food",void 0),s([a(cc.Node)],F.prototype,"nod_stall",void 0),s([a(cc.Node)],F.prototype,"nod_right",void 0),s([a(cc.Node)],F.prototype,"nod_top",void 0),s([a(cc.Node)],F.prototype,"nod_auto_collect_on",void 0),s([a(cc.Node)],F.prototype,"nod_auto_collect_off",void 0),s([a(cc.Node)],F.prototype,"nod_auto_time_bg",void 0),s([a(cc.Label)],F.prototype,"auto_collect_time",void 0),s([a(cc.Sprite)],F.prototype,"dgree_spi",void 0),s([a(cc.Node)],F.prototype,"dgree_ani",void 0),s([a(cc.Node)],F.prototype,"nod_right_more",void 0),s([a(cc.Node)],F.prototype,"nod_right_top",void 0),s([a(cc.Node)],F.prototype,"nod_left_buttom",void 0),s([a(cc.Node)],F.prototype,"nod_warehouse",void 0),s([a(cc.Node)],F.prototype,"nod_shop",void 0),s([a(cc.Node)],F.prototype,"nod_exp",void 0),s([a(cc.ProgressBar)],F.prototype,"pro_heart",void 0),s([a(cc.Label)],F.prototype,"lbl_heart_progress",void 0),s([a(cc.Label)],F.prototype,"lbl_heart_count",void 0),s([a(cc.Label)],F.prototype,"lbl_pro_strength",void 0),s([a(cc.ProgressBar)],F.prototype,"pro_strength",void 0),s([a(cc.Label)],F.prototype,"lbl_pro_hp",void 0),s([a(cc.ProgressBar)],F.prototype,"pro_hp",void 0),s([a(cc.Label)],F.prototype,"lbl_add_coin",void 0),s([a(cc.Label)],F.prototype,"lbl_add_diamond",void 0),s([a(cc.Label)],F.prototype,"lbl_name",void 0),s([a(cc.Label)],F.prototype,"lbl_add_heart",void 0),s([a(cc.Node)],F.prototype,"nod_staff",void 0),s([a(cc.Node)],F.prototype,"nod_explore",void 0),s([a(cc.Node)],F.prototype,"nod_home",void 0),s([a(cc.Node)],F.prototype,"nod_houshan",void 0),s([a(cc.Node)],F.prototype,"nod_follow",void 0),s([a(cc.Node)],F.prototype,"nod_decorate",void 0),s([a(cc.Node)],F.prototype,"nod_online",void 0),s([a(cc.Node)],F.prototype,"nod_more",void 0),s([a(cc.Node)],F.prototype,"nod_daily_task",void 0),s([a(cc.Sprite)],F.prototype,"image_icon",void 0),s([a(cc.Node)],F.prototype,"nod_sign_in",void 0),s([a(cc.Node)],F.prototype,"nod_home_btn",void 0),s([a(k.default)],F.prototype,"staff_food",void 0),s([a(cc.Sprite)],F.prototype,"spr_video",void 0),i=s([i],F),r.default=i,cc._RF.pop()},{}],BedRoom:[function(t,e,o){"use strict";cc._RF.push(e,"6b77f4EwMlL0ZSSwATDFqIy","BedRoom");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("RenovationHelper"),_=i("MapObject");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_outside=null,t.nod_inside=null,t.map_inside_floor_1=null,t.map_inside_floor_2=null,t.map_inside_floor_3=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=d.GameObject),f.prototype.onLoad=function(){u.default.on(p.GameEvent.change_floor,this.updateFloor,this)},f.prototype.onDestroy=function(){u.default.off(p.GameEvent.change_floor,this.updateFloor,this)},f.prototype.onEnable=function(){this.getComponent(_.default).data.isLock()?this.close():this.open(),this.updateFloor()},f.prototype.open=function(){this.nod_outside.active=!1},f.prototype.close=function(){},f.prototype.updateFloor=function(){var t=this.getComponent(_.default);if(t){for(var e=h.default.getInstance().getFloorID(t.objectID),o=0,n=this.map_inside_floor_1.getLayers();o<n.length;o++)(r=n[o]).getLayerName()==String(e)?r.node.active=!0:r.node.active=!1;for(var i=0,a=this.map_inside_floor_2.getLayers();i<a.length;i++)(r=a[i]).getLayerName()==String(e)?r.node.active=!0:r.node.active=!1;for(var r,c=0,s=this.map_inside_floor_3.getLayers();c<s.length;c++)(r=s[c]).getLayerName()==String(e)?r.node.active=!0:r.node.active=!1}},s([a(cc.Node)],f.prototype,"nod_outside",void 0),s([a(cc.Node)],f.prototype,"nod_inside",void 0),s([a(cc.TiledMap)],f.prototype,"map_inside_floor_1",void 0),s([a(cc.TiledMap)],f.prototype,"map_inside_floor_2",void 0),s([a(cc.TiledMap)],f.prototype,"map_inside_floor_3",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],BlessBroad:[function(t,e,o){"use strict";cc._RF.push(e,"0e0b148NshE15xx+6Rhpdzf","BlessBroad");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.BlessBroad=void 0;var l,p=i("GameMgr"),u=i("Utils"),d=i("NodePoolItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.bd_node=[],t.lb_node=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.NodePoolItem),h.prototype.onEnable=function(){},h.prototype.onDisable=function(){this.unscheduleAllCallbacks()},h.prototype.init_data=function(t,e,o){for(var n=this,i=0;i<this.bd_node.length;++i)this.bd_node[i].active=!1,this.lb_node[i].node.active=!1;this.bd_node[o].active=!0,this.lb_node[o].node.active=!0,this.lb_node[o].string=0==o?"<color=#876b4e>"+t+"\uff1a</color><color=#fc7945>"+e+"</color>":"<color=#ffffff>"+t+":</color>"+e,e=u.Utils.setRichText(e),e=220-(t=(t.length+e.length+1)*this.lb_node[o].fontSize+440),t/=100,this.lb_node[o].node.x=220,this.lb_node[o].node.runAction(cc.moveTo(t,e,0)),this.scheduleOnce(function(){p.gm.pool.put(n.node),p.gm.localData.send_bless()},t)},h.prototype.on_click_colse=function(){p.gm.pool.put(this.node),p.gm.localData.is_bless_broad=!1;var t=p.gm.localData.broad_bless_data.length;0<t&&(p.gm.localData.bless_data.broad_index=p.gm.localData.broad_bless_data[t-1].id,p.gm.localData.broad_bless_data=[],p.gm.localData.saveByKey("bless_data"))},s([a([cc.Node])],h.prototype,"bd_node",void 0),s([a([cc.RichText])],h.prototype,"lb_node",void 0),i=s([i],h),r.BlessBroad=i,cc._RF.pop()},{}],BlessItem:[function(t,e,o){"use strict";cc._RF.push(e,"4d3f81nQa9DS6Wkwui1hNim","BlessItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.lb_node=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.default),u.prototype.updateUI=function(){},u.prototype.onEnable=function(){},u.prototype.onDisable=function(){},u.prototype.setData=function(t){this.lb_node.string="<color=#d77501>"+t.nickname+"\uff1a</color><color=#a7844f>"+t.text_string+"</color>"},s([a(cc.RichText)],u.prototype,"lb_node",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],BlessUi:[function(t,e,o){"use strict";cc._RF.push(e,"5ee00jF8QZP7IfxI82XwLoM","BlessUi");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.BlessUi=void 0;var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("Utils"),_=i("List"),f=i("EventManager"),g=i("GameModule"),y=i("BlessItem");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.node_1=null,t.send_cost_lbl=null,t.bless_input_edit=null,t.list=null,t.showItems=[],t.SEND_BLESS_COST=10,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.onEnable=function(){this.node_1.active=!0,this.bless_input_edit.string="",this.bless_input_edit.textLabel.string="",f.default.on(p.GameEvent.update_bless,this.update_bless,this),this.update_bless()},m.prototype.onDisable=function(){f.default.off(p.GameEvent.update_bless,this.update_bless,this)},m.prototype.setShowItems=function(t){this.showItems=t,this.list.numItems=t.length},m.prototype.onRender=function(t,e){t.getComponent(y.default).setData(this.showItems[e])},m.prototype.update_bless=function(){this.setShowItems(u.gm.localData.player_broad_bless_data),1<=this.showItems.length&&this.list.scrollTo(this.showItems.length-1)},m.prototype.onClickSendBless=function(){var t,e=this;""!=u.gm.localData.nick_name?d.default.getPropCount(p.CommonPropID.diamond)<this.SEND_BLESS_COST?u.gm.ui.showModule(u.gm.const.GetStrengthUI,function(t){t.setData(3)}):""!=this.bless_input_edit.string?(t=this.bless_input_edit.string,u.gm.channel.check_is_dirty_word(t,function(o){o&&0!=o.ResultCode?u.gm.ui.showNotice("\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u5408\u89c4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):h.Utils.server_http_request(e.sendCallback,e,u.gm.channel.getServerUrl()+"user/upload_player_broadcast_record?token=%s&uid=%s&wish=%s&nickname=%s&type=%s",u.gm.data.token,u.gm.data.uid,t,u.gm.localData.nick_name,"0")}),this.bless_input_edit.string="",this.bless_input_edit.textLabel.string="",this.bless_input_edit.placeholderLabel.string="\u70b9\u51fb\u8f93\u5165"):u.gm.ui.showNotice("\u8f93\u5165\u6587\u5b57\u4e3a\u7a7a"):u.gm.ui.showNotice("\u8bf7\u5148\u70b9\u51fb\u5de6\u4e0a\u89d2\u5934\u50cf\u53bb\u4fee\u6539\u60a8\u7684\u6635\u79f0\u54e6")},m.prototype.sendCallback=function(t){0==t.ResultCode?d.default.tryConsume([{id:p.CommonPropID.diamond,num:this.SEND_BLESS_COST}],!0)&&(u.gm.ui.showNotice("\u53d1\u9001\u6210\u529f"),u.gm.localData.get_bless_data(!0)):u.gm.ui.showNotice("\u53d1\u9001\u5931\u8d25")},s([a(cc.Node)],m.prototype,"node_1",void 0),s([a(cc.Label)],m.prototype,"send_cost_lbl",void 0),s([a(cc.EditBox)],m.prototype,"bless_input_edit",void 0),s([a(_.default)],m.prototype,"list",void 0),i=s([i],m),r.BlessUi=i,cc._RF.pop()},{}],BlockGuide:[function(t,e,o){"use strict";cc._RF.push(e,"f284aRpbhlMHKjRp98xs0BR","BlockGuide");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("HollowOut"),u=i("GameModule");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_mask=null,t.finger=null,t.nod_mask_bg=null,t.nod_touch=null,t.hollowOut=null,t.cb=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=u.default),d.prototype.onLoad=function(){l.prototype.onLoad.call(this),this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},d.prototype.onEnabled=function(){},d.prototype.onDisable=function(){this.cb=null},d.prototype.setTouchCb=function(t){this.cb=t},d.prototype.setTargetNode=function(t,e){var o=this;void 0===e&&(e=!0);var n=t.width/2-t.width*t.anchorX,i=t.height/2-t.height*t.anchorY,a=(i=t.convertToWorldSpaceAR(cc.v2(n,i)),t=t.getContentSize(),this.node.convertToNodeSpaceAR(i));this.nod_mask.x=a.x,this.nod_mask.y=a.y,this.nod_mask.setContentSize(t);var r=Math.max(t.height,t.width)/1.5;this.scheduleOnce(function(){o.hollowOut.setNodeSize(),o.hollowOut.circleTo(.5,a,r,r/3)}),e&&(this.finger.x=a.x,this.finger.y=a.y,this.finger.active=!0)},d.prototype.onTouch=function(t){t.stopPropagation(),cc.log("on touch block guide"),this.cb&&this.cb()},d.prototype.onDestroy=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},s([a(cc.Node)],d.prototype,"nod_mask",void 0),s([a(cc.Node)],d.prototype,"finger",void 0),s([a(cc.Node)],d.prototype,"nod_mask_bg",void 0),s([a(cc.Node)],d.prototype,"nod_touch",void 0),s([a(p.default)],d.prototype,"hollowOut",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],BreedDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ce0396DrKdFrpuk2QAEJuLr","BreedDataMgr");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),r=s,c.default=r,cc._RF.pop()},{}],BreedData:[function(t,e,o){"use strict";cc._RF.push(e,"f2af8mmVzRMoJpJziu+UkGX","BreedData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.BreedAnimalData=void 0;var a=n("EventManager"),r=n("MathUtils"),c=n("StringUtil"),s=n("TimeUtils"),l=n("BreedMgr"),p=n("TaskRecordData"),u=n("Const"),d=n("GameMgr"),h=n("PropMgr");function _(){this.parentData=null,this.cur_energy=0,this.animals=[],this.cd=1,this.animal_grow_cost_each_time=1}_.create=function(t,e){var o=new _;o.parentData=e,o.cur_energy=t.cur_energy||0;var n=l.default.getInstance().getConfig(e.objectID,e.lv);o.animal_grow_cost_each_time=l.default.getInstance().getEatFoodCount(e);for(var i=0,a=t.animals;i<a.length;i++){var r=a[i],c=f.create(n);c.cur_energy=r.cur_energy||0,o.animals.push(c)}if(0<t.animals.length)for(var p=s.default.getTime()-d.gm.localData.lastOnlineTime,u=1;u<=p&&o.eatFoodOnce();u++);return o},_.prototype.reduceEnergy=function(){this.cur_energy>=this.animal_grow_cost_each_time&&(this.cur_energy-=this.animal_grow_cost_each_time)},_.prototype.updateEatFood=function(){this.animal_grow_cost_each_time=l.default.getInstance().getEatFoodCount(this.parentData)},_.prototype.eatFoodOnce=function(){for(var t=!1,e=0,o=this.animals;e<o.length;e++){var n=o[e];n.cur_energy<n.animal_grow_cost&&0<this.cur_energy&&(t=!0,n.addEnergy(),this.reduceEnergy())}return t},_.prototype.catch=function(t){for(var e=0;e<this.animals.length;e++){var o=this.animals[e];if(o.index==t&&o.canHarvest()&&!o.isCatch&&h.default.checkWarehouseLimit(o.productions))return o.isCatch=!0,h.default.addProps(o.productions,!1),o=this.animals.splice(e,1)[0],d.gm.mapData.updateBreedData(),o}return null},_.prototype.catchAll=function(){for(var t=[],e=this.animals.length-1;0<=e;e--){var o=this.catch(this.animals[e].index);t.push(o)}return t},_.prototype.addEnergy=function(t){p.default.getInstance().addBreedFeedRecord(this.parentData.objectID,1),this.cur_energy+=t,d.gm.mapData.updateBreedData(),a.default.emit(u.GameEvent.updateBase)},n=_,i.default=n;var f=(g.prototype.canHarvest=function(){return this.cur_energy>=this.animal_grow_cost},g.prototype.getPeriodTime=function(){return this.animal_grow_cost},g.prototype.getLeftTime=function(){return this.animal_grow_cost-this.cur_energy},g.prototype.getLeftTimeCountDownStr=function(){return c.default.countDownFormat_2(Math.floor(this.getLeftTime()))},g.prototype.addEnergy=function(t){(t=void 0===t?1:t)<=0||(this.cur_energy<this.animal_grow_cost&&(this.cur_energy+=t,this.cur_energy=Math.min(this.cur_energy,this.animal_grow_cost)),d.gm.mapData.updateBreedData())},g.prototype.completeNow=function(){this.cur_energy=this.animal_grow_cost,d.gm.mapData.updateBreedData()},Object.defineProperty(g.prototype,"productions",{get:function(){var t=1;100*l.default.getInstance().getProductionAdd(this.config.build_id)>=r.default.randomNum(1,100)&&(t=2);for(var e=[],o=0,n=this.config.productions;o<n.length;o++){var i={id:(i=n[o]).id,num:i.num*t};e.push(i)}return e},enumerable:!1,configurable:!0}),g.create=function(t){g._index+=1;var e=new g;return e.config=t,e.index=g._index,e.animal_grow_cost=t.anmal_grow_cost,e.id=t.productions[0].id,e},g._index=0,g);function g(){this.index=0,this.isCatch=!1,this._productions=[]}i.BreedAnimalData=f,cc._RF.pop()},{}],BreedMgr:[function(t,e,o){"use strict";cc._RF.push(e,"4f0375VaJFKUoYZqcpA8qEi","BreedMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("Formula"),p=i("GameMgr"),u=i("MapDataHelper"),d=i("Singleton"),h=i("CompletionHelper");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.datas=[],t}r(_,c=d.default),_.prototype.getConfig=function(t){for(var e=0,o=p.gm.config.data.Breed;e<o.length;e++){var n=o[e];if(n.build_id==t&&1==n.build_level)return n}},_.prototype.getAnimalMax=function(t){for(var e=0,o=0,n=h.default.getInstance().getDecorationSons(t,1);o<n.length;o++){var i=n[o];e+=l.Formula.getObjectFuncWork(i,s.E_AttrType.breed_animal_max)}return e+l.Formula.getObjectFuncWork(t,s.E_AttrType.breed_animal_max)},_.prototype.getFoodMax=function(t){for(var e=0,o=0,n=h.default.getInstance().getDecorationSons(t,1);o<n.length;o++){var i=n[o];e+=l.Formula.getObjectFuncWork(i,s.E_AttrType.breed_food_max)}return e+l.Formula.getObjectFuncWork(t,s.E_AttrType.breed_food_max)},_.prototype.getEatFoodCount=function(t){for(var e=0,o=0,n=h.default.getInstance().getDecorationSons(t,1);o<n.length;o++){var i=n[o];e+=l.Formula.getObjectFuncWork(i,s.E_AttrType.breed_rate,!0)}return e+=l.Formula.getObjectFuncWork(t,s.E_AttrType.breed_rate,!0),t=_.getInstance().getConfig(t.objectID,t.lv).animal_grow_cost_each_time*(1+e),Math.round(t)},_.prototype.getProductionAdd=function(t){var e=0,o=u.default.getDataByID(t);if(t){for(var n=0,i=h.default.getInstance().getDecorationSons(o,1);n<i.length;n++){var a=i[n];e+=l.Formula.getObjectFuncWork(a,s.E_AttrType.produce_add)}e+=l.Formula.getObjectFuncWork(o,s.E_AttrType.produce_add)}return e},_.prototype.addData=function(t){this.datas.push(t)},r=_,a.default=r,cc._RF.pop()},{}],BreedUI:[function(t,e,o){"use strict";cc._RF.push(e,"0d70dWjVV1FxJ1T12LcB5VC","BreedUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonPropItem"),u=i("GameMgr"),d=i("NodStars"),h=i("GameModule");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.needItem=null,t.lbl_curAttr=null,t.lbl_nextAttr=null,t.lbl_desc=null,t.lbl_name=null,t.lbl_upgrade_desc=null,t.stars=null,t.nod_next=null,t.lbl_curAttr_1=null,t.lbl_nextAttr_1=null,t.lbl_upgrade_desc_1=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.setData=function(t){this.uid=t,this.objectData=u.gm.mapData.getObjectData(this.uid),this.updateUI()},_.prototype.updateUI=function(){},_.prototype.onRenderList=function(){},_.prototype.onTouchSlot=function(){},_.prototype.onCloseBottom=function(){},_.prototype.onBtnUpgrade=function(){},s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),s([a(p.default)],_.prototype,"needItem",void 0),s([a(cc.Label)],_.prototype,"lbl_curAttr",void 0),s([a(cc.Label)],_.prototype,"lbl_nextAttr",void 0),s([a(cc.Label)],_.prototype,"lbl_desc",void 0),s([a(cc.Label)],_.prototype,"lbl_name",void 0),s([a(cc.Label)],_.prototype,"lbl_upgrade_desc",void 0),s([a(d.default)],_.prototype,"stars",void 0),s([a(cc.Node)],_.prototype,"nod_next",void 0),s([a(cc.Label)],_.prototype,"lbl_curAttr_1",void 0),s([a(cc.Label)],_.prototype,"lbl_nextAttr_1",void 0),s([a(cc.Label)],_.prototype,"lbl_upgrade_desc_1",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Bridge:[function(t,e,o){"use strict";cc._RF.push(e,"c15b5mhlMxCRau3gVQkQ7yW","Bridge");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.AdCodeTable=void 0;var a=n("EventManager"),r=n("Const"),c=(s.test="test",s.tool_room_mastery="tool_room_mastery",s.tool_room_repair="tool_room_repair",s.eat_food_video="eat_food_video",s.tool_upgrade="tool_upgrade",s);function s(){}function l(){}i.AdCodeTable=c,l.playAD=function(t){if(cc.sys.isMobile){if(console.log("ismobile"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS){console.log("ios");var e=jsb.reflection.callStaticMethod("AppController","showAd:",t||"");return void console.log(e)}if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID)return e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showAd","(Ljava/lang/String;)V",t||""),void cc.log("cocos",e);a.default.emit(r.GameEvent.adDone,t)}else a.default.emit(r.GameEvent.adDone,t);return!0},l.onADEnd=function(t){cc.log("code:===",t),c[t]||cc.warn("\u627e\u4e0d\u5230\u7f16\u53f7",t),a.default.emit(r.GameEvent.adDone,t)},l.copyToClipBoard=function(t){if(!cc.sys.isNative&&cc.sys.isBrowser){var e=document.createElement("textarea");e.textContent=t,document.body.appendChild(e),e.readOnly=!0,e.select(),e.setSelectionRange(0,e.textContent.length);try{var o=document.execCommand("copy");return document.body.removeChild(e),o?(cc.log("\u5df2\u7ecf\u590d\u5236\u5230\u526a\u8d34\u677f"),!0):(cc.log("\u590d\u5236\u5230\u526a\u8d34\u677f\u5931\u8d25"),!1)}catch(t){return cc.log("\u590d\u5236\u5230\u526a\u8d34\u677f\u5931\u8d25"),!1}}},l.webCopyString=function(t){if(console.log("\u590d\u5236ing---cc.sys.platform=",cc.sys.platform),cc.sys.platform!=cc.sys.WECHAT_GAME){var e=t+"",o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",o.style.fontSize="12pt";var n=getSelection(),i=null;0<n.rangeCount&&(i=n.getRangeAt(0)),document.body.appendChild(o),o.select(),o.selectionStart=0,o.selectionEnd=e.length,e=!1;try{e=document.execCommand("copy")}catch(t){}return document.body.removeChild(o),i&&(n.removeAllRanges(),n.addRange(i)),e?console.log("\u590d\u5236\u6210\u529f"):console.log("\u590d\u5236\u5931\u8d25"),e}wx.setClipboardData({data:t,success:function(t){return console.log("success\u590d\u5236\u6210\u529f\uff1a",t.data),!0}})},i.default=n=l,window.Bridge=n,cc._RF.pop()},{}],BroadcastChatItem:[function(t,e,o){"use strict";cc._RF.push(e,"faf5etypEZNuZQUrc10TWOd","BroadcastChatItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.lbl_name=null,t.lbl_chat=null,t.nod_fans=null,t.nod_bg=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.default),u.prototype.setData=function(t){this.data=t,this.data?(this.nod_fans.active=this.data.user_fans,this.lbl_lv.string=this.data.user_level+"",this.lbl_name.string=this.data.user_name+":",this.lbl_chat.string=this.data.user_word):cc.error("no data",t)},s([a(cc.Label)],u.prototype,"lbl_lv",void 0),s([a(cc.Label)],u.prototype,"lbl_name",void 0),s([a(cc.Label)],u.prototype,"lbl_chat",void 0),s([a(cc.Node)],u.prototype,"nod_fans",void 0),s([a(cc.Widget)],u.prototype,"nod_bg",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],BroadcastDropItem:[function(t,e,o){"use strict";cc._RF.push(e,"fd867oZq+pGqr84PDcsBbx5","BroadcastDropItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("EventManager"),g=i("NodePoolItem"),y=i("BroadcastLvMgr"),m=i("BroadcastPropMgr");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_hp=null,t.zb_effboom=null,t.nod_ani_click=null,t.ani_icon=null,t.pro_hp=null,t.nod_item=null,t.dropSpeed=100,t.speedAdd=0,t.data=null,t.touchCD=0,t.curHp=0,t.totalHp=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=g.NodePoolItem),v.prototype.setData=function(t){this.data=t,this.node.y=700,this.speedAdd=0,this.touchCD=0,this.nod_item.active=!0,this.zb_effboom.node.active=!1,this.nod_ani_click.active=!1,u.PropUtils.getConfigByPropID(t.id),this.totalHp=t.buy_price*t.num,this.curHp=this.totalHp,this.getComponent(p.default).setIconByPropID(t.id),this.getComponent(p.default).setLblCount(t.num),this.updateUI()},v.prototype.update=function(t){0<this.curHp&&this._down(t)},v.prototype.updateUI=function(){var t=this,e=this.curHp/this.totalHp;this.pro_hp.progress=e,this.pro_hp.node.color=e<=.3?cc.color(255,0,0):.3<e&&e<=.7?cc.color(248,238,87):cc.color(16,226,60),this.curHp<=0&&(m.default.getInstance().addMyProp(this.data),this.nod_item.active=!1,this.zb_effboom.node.active=!0,this.zb_effboom.play("zb_effboom"),this.scheduleOnce(function(){h.gm.pool.put(t.node)},.5))},v.prototype._down=function(t){this.touchCD-=t,this.touchCD<=0&&(this.touchCD=0,this.speedAdd=0),t=(this.dropSpeed+this.speedAdd)*t,this.node.y-=t,this.node.y<-640&&h.gm.pool.put(this.node)},v.prototype.onTouch=function(){},v.prototype.shoot=function(){this.ani_icon.play("zb_icom_on"),this.nod_ani_click.active=!0,this.nod_ani_click.getComponent(cc.Animation).play("cut_eff"),this.speedAdd=-50,this.touchCD=.5},v.prototype.onCollisionEnter=function(){console.log("on collision enter");var t,e,o=y.default.getInstance().getConfigByExp(),n=o.atk;this.touchCD||(t=_.default.getPropCount(d.CommonPropID.coin),(e=Math.min(this.curHp,n))<=t?(_.default.tryConsume([{id:d.CommonPropID.coin,num:e}]),f.default.emit(d.GameEvent.update_sell_ui),this.shoot(),this.curHp-=o.crit_rate>=Math.random()?2*n:n,this.updateUI()):h.gm.ui.showNotice("\u91d1\u5e01\u4e0d\u8db3"))},s([a(cc.Label)],v.prototype,"lbl_hp",void 0),s([a(cc.Animation)],v.prototype,"zb_effboom",void 0),s([a(cc.Node)],v.prototype,"nod_ani_click",void 0),s([a(cc.Animation)],v.prototype,"ani_icon",void 0),s([a(cc.ProgressBar)],v.prototype,"pro_hp",void 0),s([a(cc.Node)],v.prototype,"nod_item",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],BroadcastGiftMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cfa5aVg7q5Gz6HY7LPBkzQl","BroadcastGiftMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("GameMgr");function l(){var t=null!==c&&c.apply(this,arguments)||this;return t.gifts=[],t.showList=[],t}a(l,c=i("Singleton").default),l.prototype.getConfig=function(t){for(var e=0,o=s.gm.config.data.BroadcastGifts;e<o.length;e++){var n=o[e];if(n.prop_id==t)return n}},l.prototype.addGift=function(t){this.showList.push(t),2<this.showList.length&&this.showList.shift();for(var e=0,o=this.gifts;e<o.length;e++){var n=o[e];if(t.id==n.id)return void(n.num+=t.num)}this.gifts.push(t)},a=l,r.default=a,cc._RF.pop()},{}],BroadcastLvMgr:[function(t,e,o){"use strict";cc._RF.push(e,"51f47HLPrFOM43jrxO6lDcs","BroadcastLvMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("GameMgr"),l=i("Singleton"),p=i("BroadcastMgr");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t._curLv=0,t}r(u,c=l.default),u.prototype.getConfigByExp=function(){for(var t=s.gm.config.data.BroadcastLv,e=p.default.getInstance().renown,o=null,n=0;n<t.length;n++){var i=t[n];if(e-i.famous<0){o=i;break}n==t.length-1&&(o=i)}return o||cc.error("config not found",e),(!this._curLv||o.up_level>this._curLv)&&(this._curLv=o.up_level),o},u.prototype.getLv=function(){if(this._curLv)return this._curLv;var t=this.getConfigByExp();return t?t.up_level:1},u.prototype.getConfigByLv=function(t){for(var e=0,o=s.gm.config.data.BroadcastLv;e<o.length;e++){var n=o[e];if(n.up_level==t)return n}},u.prototype.getLastConfig=function(){return this.getConfigByLv(this._curLv-1)},u.prototype.getLastValue=function(){var t=this.getLastConfig();return t?t.famous:0},u.prototype.getProgress=function(){return{cur:p.default.getInstance().renown-this.getLastValue(),target:this.getConfigByExp().famous-this.getLastValue()}},u.prototype.getAddOnlineCount=function(){var t=s.gm.config.data.BroadcastSetting[0].visitor_increase.up_level;return t=Math.floor(this.getLv()/t),s.gm.config.data.BroadcastSetting[0].visitor_increase.num,t},r=u,a.default=r,cc._RF.pop()},{}],BroadcastMgr:[function(t,e,o){"use strict";cc._RF.push(e,"35c4bExeIdGFYXJcZmZwj0t","BroadcastMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.OnlineRecovery=void 0;var c,s=i("ConfigUtils"),l=i("Const"),p=i("GameMgr"),u=i("Singleton"),d=i("EventManager"),h=i("MathUtils"),_=i("BroadcastGiftMgr"),f=i("BroadcastLvMgr"),g=i("BroadcastPropMgr"),y=i("BroadcastRankMgr");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.renown=0,t.fans=0,t.onlines=0,t.likes=0,t.popularity=0,t.renownOnlineRecovery=null,t.fansOnlineRecovery=null,t.likeOnlineRecovery=null,t._curTime=0,t.isStart=!1,t.lastSeconds=0,t.lvConfig=null,t.likeCD=0,t.likeLandmark=0,t.giftCD=0,t.popularLandmark=0,t.rankAddOnlineCD=0,t.countFansCD=0,t.rankConfig=null,t.newFansCount=[],t.dropCD=0,t.sell_online_cd=0,t.sell_fans_cd=0,t}r(m,c=u.default),m.prototype.load=function(){this.renown=p.gm.localData.broadcast.renown||0,this.fans=p.gm.localData.broadcast.fans||0,this.lvConfig=f.default.getInstance().getConfigByExp()},m.prototype.begin=function(){this._curTime=0,this.lastSeconds=0,this.isStart=!0,this.newFansCount=[],_.default.getInstance().gifts=[],this.comeIn()},m.prototype.onTimeout=function(){cc.log("\u76f4\u64ad\u65f6\u95f4\u7ed3\u675f===="),this.end()},m.prototype.end=function(){this.isStart=!1,p.gm.ui.showModule(p.gm.const.BroadcastReport,function(){})},m.prototype.addTime=function(t){this.isStart&&(this._curTime+=t,Math.floor(this._curTime)>this.lastSeconds&&(this.onSeconds(),this.lastSeconds=Math.floor(this._curTime)),this.checkOnlineRecovery(t),this.checkLikes(t),this.checkGift(t),this.checkRankAddOnline(t),this.checkNewFans(t),this.checkDrop(t),this.checkSell(t))},m.prototype.getSeconds=function(){return Math.floor(this._curTime)},m.prototype.comeIn=function(){this.renownOnlineRecovery=new v,this.renownOnlineRecovery.totalCount=Math.floor(this.renown*this.lvConfig.famous_change_visitor),this.renownOnlineRecovery.reterval_time=p.gm.config.data.BroadcastSetting[0].famous_change_visior_speed.time,this.renownOnlineRecovery.perCount=Math.floor(this.renownOnlineRecovery.totalCount*p.gm.config.data.BroadcastSetting[0].famous_change_visior_speed.rate),this.renownOnlineRecovery.perCount=Math.max(this.renownOnlineRecovery.perCount,1),this.fansOnlineRecovery=new v,this.fansOnlineRecovery.totalCount=Math.floor(this.fans*p.gm.config.data.BroadcastSetting[0].fans_change_visior),this.fansOnlineRecovery.reterval_time=p.gm.config.data.BroadcastSetting[0].famous_change_visior_speed.time,this.fansOnlineRecovery.perCount=Math.floor(this.fansOnlineRecovery.totalCount*p.gm.config.data.BroadcastSetting[0].famous_change_visior_speed.rate),this.fansOnlineRecovery.perCount=Math.max(this.fansOnlineRecovery.perCount,1)},m.prototype.onSeconds=function(){this.autoOnline(),this.getSeconds()>=p.gm.config.data.BroadcastSetting[0].time&&this.onTimeout()},m.prototype.autoOnline=function(){for(var t,e,o,n=this.getSeconds(),i=p.gm.config.data.BroadcastOnlines,a=null,r=0,c=0;c<i.length;c++){var s=i[c];if(n-s.time_limit<=0){a=s,r=c;break}}a?(o=f.default.getInstance().getAddOnlineCount(),(n-(e=(e=t=0)!=r?i[r-1].time_limit:e))%a.time_increase==0&&(t+=h.default.weight(a.person_increase,1)[0].num,t+=o),(n-e)%a.time_reduce==0&&(t-=h.default.weight(a.person_reduce,1)[0].num,t-=o),o=100*this.lvConfig.extra_increase,h.default.weightBingo(Math.floor(o),100)&&(t*=2),this.onlines+=t):cc.error("not found conifg",n)},m.prototype.checkOnlineRecovery=function(t){var e;0<this.renownOnlineRecovery.totalCount&&(this.renownOnlineRecovery.curTime+=t,this.renownOnlineRecovery.curTime>=this.renownOnlineRecovery.reterval_time)&&(e=this.renownOnlineRecovery.take(),this.onlines+=e,this.renownOnlineRecovery.curTime=0),0<this.fansOnlineRecovery.totalCount&&(this.fansOnlineRecovery.curTime+=t,this.fansOnlineRecovery.curTime>=this.fansOnlineRecovery.reterval_time)&&(e=this.fansOnlineRecovery.take(),this.onlines+=e,this.fansOnlineRecovery.curTime=0),this.likeOnlineRecovery&&0<this.likeOnlineRecovery.totalCount&&(this.likeOnlineRecovery.curTime+=t,this.likeOnlineRecovery.curTime>=this.likeOnlineRecovery.reterval_time)&&(e=this.likeOnlineRecovery.take(),this.onlines+=e,this.likeOnlineRecovery.curTime=0)},m.prototype.checkLikes=function(t){this.likeCD+=t,t=p.gm.config.data.BroadcastSetting[0].visitor_likes.time,this.likeCD>=t&&(t=h.default.weight(p.gm.config.data.BroadcastSetting[0].visitor_extra_likes,1)[0].num,t=Math.floor(this.onlines*p.gm.config.data.BroadcastSetting[0].visitor_likes.rate)*t,this.likes+=t,this.addPopularty(t),this.likeCD=0,(t=this.getLikeLandmakConfig())&&(t=Math.floor(this.onlines*t.visitor_extra_increase),this.likeOnlineRecovery=new v,this.likeOnlineRecovery.totalCount=t,this.likeOnlineRecovery.reterval_time=1,this.likeOnlineRecovery.perCount=Math.floor(t/10),this.likeOnlineRecovery.perCount=Math.max(this.likeOnlineRecovery.perCount,1),cc.log("\u5347\u7ea7\u70b9\u8d5e\u91cc\u7a0b\u7891,\u589e\u52a0\u5728\u7ebf\u4eba\u6570",t)))},m.prototype.getLikeLandmakConfig=function(){for(var t=0,e=p.gm.config.data.BroadcastLandmark;t<e.length;t++){var o=e[t];if(this.likes>o.likes&&this.likeLandmark<o.likes)return this.likeLandmark=o.likes,o}},m.prototype.checkGift=function(t){if(this.giftCD+=t,this.giftCD>=p.gm.config.data.BroadcastSetting[0].draw_gift.time){for(var e=0,o=s.PropRandomPool.getItemsByPoolID(p.gm.config.data.BroadcastSetting[0].draw_gift.pool_id,1);e<o.length;e++){var n=o[e],i=n.id,a=n.num;_.default.getInstance().addGift({id:i,num:a}),n=_.default.getInstance().getConfig(i),cc.log("\u83b7\u5f97\u793c\u7269",n.gift_name),100<=n.gift_popular&&d.default.emit(l.GameEvent.show_big_gift,i),this.addPopularty(n.gift_popular*a),d.default.emit(l.GameEvent.update_sell_ui)}this.giftCD=0}},m.prototype.addPopularty=function(t){this.popularity+=t,this.rankConfig=y.default.getInstance().getConfig()},m.prototype.checkRankAddOnline=function(t){var e;this.rankConfig&&(this.rankAddOnlineCD+=t,this.rankAddOnlineCD>=this.rankConfig.increase_time)&&(e=h.default.weight(this.rankConfig.increase_num,1)[0],t=h.default.weightBingo(100*this.rankConfig.extra_increase,100),e=e.num,t&&(e*=2),this.onlines+=e,this.rankAddOnlineCD=0)},m.prototype.checkNewFans=function(t){this.countFansCD+=t,10<=this.countFansCD&&(this.newFansCount.push(Math.floor(.01*this.onlines)),this.countFansCD=0)},m.prototype.checkDrop=function(t){this.dropCD-=t,this.dropCD<=0&&(t=g.default.getInstance().getDropItems(),d.default.emit(l.GameEvent.drop_items,t),this.dropCD=g.default.getInstance().getDropConfig().time)},m.prototype.checkSell=function(t){if(this.sell_online_cd-=t,this.sell_online_cd<=0){for(var e=p.gm.config.data.BroadcastSell[0],o=Math.max(Math.floor(this.onlines*e.rate),1),n=0;n<o;n++)0<(i=g.default.getInstance().getMyPropRandom(e.business_class)).num&&g.default.getInstance().sellMyProp(i.id);this.sell_online_cd=e.time}if(this.sell_fans_cd-=t,this.sell_fans_cd<=0){for(e=p.gm.config.data.BroadcastSell[1],o=Math.max(Math.floor(this.fans*e.rate),1),n=0;n<o;n++){var i;(i=g.default.getInstance().getMyPropRandom(e.business_class))&&0<i.num&&g.default.getInstance().sellMyProp(i.id)}this.sell_fans_cd=e.time}},r=m,a.default=r;var v=(b.prototype.take=function(){var t=0;return 0<=this.totalCount&&(t=this.totalCount>=this.perCount?this.perCount:this.totalCount,this.totalCount-=t),t},b);function b(){this.curTime=0}a.OnlineRecovery=v,cc._RF.pop()},{}],BroadcastPrepare:[function(t,e,o){"use strict";cc._RF.push(e,"fda5ckey6JHzbzDzURs6dag","BroadcastPrepare");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("List"),f=i("EventManager"),g=i("GameModule"),y=i("NetUtils"),m=i("TaskRecordData"),v=i("BroadcastDropItem"),b=i("BroadcastLvMgr"),I=i("BroadcastMgr"),D=i("BroadcastPropMgr"),C=i("BroadcastSellItem"),O=i("BroadcastSellKnife");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.lbl_renown=null,t.lbl_fans=null,t.lbl_diamond=null,t.list_prop=null,t.pro_renown=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(w,l=g.default),w.prototype.onLoad=function(){l.prototype.onLoad.call(this),d.gm.pool.init(u.Contents.BroadcastDropItem.bundleName,u.Contents.BroadcastDropItem.loadPath,v.default),d.gm.pool.init(u.Contents.BroadcastSkellKnife.bundleName,u.Contents.BroadcastSkellKnife.loadPath,O.default),cc.director.getCollisionManager().enabled=!0},w.prototype.onEnable=function(){I.default.getInstance().load(),0==D.default.getInstance().myProps.length&&D.default.getInstance().createProps();var t=b.default.getInstance().getProgress();this.lbl_renown.string=t.cur+"/"+t.target,this.pro_renown.progress=t.cur/t.target,this.lbl_fans.string="\u7c89\u4e1d\uff1a"+I.default.getInstance().fans,this.lbl_lv.string="Lv."+b.default.getInstance().getLv(),this.list_prop.numItems=D.default.getInstance().myProps.length},w.prototype.onBtnStart=function(t){var e=t.getCurrentTarget().getComponent(cc.Button);if(e.interactable=!1,D.default.getInstance().myProps.length<6)return d.gm.ui.showNotice("\u8d27\u7269\u4e0d\u8db3"),void(e.interactable=!0);y.ReportData.instance.report_point(100005,41000014),d.gm.ui.showModule(d.gm.const.BroadcastSell,function(t){e.interactable=!0,m.default.getInstance().addBroadcastCount(),f.default.emit(u.GameEvent.updateBase),t.begin()})},w.prototype.onBtnReset=function(){h.default.tryConsume([{id:u.CommonPropID.diamond,num:5}],!0)&&(y.ReportData.instance.report_point(100005,41000015),D.default.getInstance().createProps(),this.list_prop.numItems=D.default.getInstance().myProps.length)},w.prototype.onRender=function(t,e){t.getComponent(p.default).setIconByPropID(D.default.getInstance().myProps[e].id),t.getComponent(C.default).setPrice(D.default.getInstance().myProps[e].sell_price)},s([a(cc.Label)],w.prototype,"lbl_lv",void 0),s([a(cc.Label)],w.prototype,"lbl_renown",void 0),s([a(cc.Label)],w.prototype,"lbl_fans",void 0),s([a(cc.Label)],w.prototype,"lbl_diamond",void 0),s([a(_.default)],w.prototype,"list_prop",void 0),s([a(cc.ProgressBar)],w.prototype,"pro_renown",void 0),i=s([i],w),r.default=i,cc._RF.pop()},{}],BroadcastPropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ce995KPuYFGebDdp0Dnb9Vn","BroadcastPropMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("ConfigUtils"),l=i("Const"),p=i("GameMgr"),u=i("PropMgr"),d=i("Singleton"),h=i("EventManager"),_=i("MathUtils");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.power=20,t.config=null,t.myProps=[],t.curIndex=-1,t}r(f,c=d.default),f.prototype.createProps=function(){if(this.config||(this.config=p.gm.config.data.BroadcastProp[0]),this.myProps=[],this.curIndex=-1,0!=(t=s.PropRandomPool.getCanSellConfigs(this.config.pool_id)).length){for(var t=_.default.weight(t,6),e=0;e<t.length;e++){var o=t[e].item.id,n=s.PropUtils.getConfigByPropID(o);n={id:o,num:0,sell_price:Math.floor(1.2*n.shop_price),buy_price:Math.floor(.8*n.shop_price),name:n.name,sellCount:0},this.myProps.push(n)}for(this.myProps.sort(function(t,e){return t.buy_price-e.buy_price}),e=0;e<this.myProps.length;e++)this.myProps[e].weight=p.gm.config.data.BroadcastSetting[0].prop_rate[e]}},f.prototype.getDropItems=function(){this.curIndex++,this.curIndex>p.gm.config.data.BroadcastProp.length-1&&(this.curIndex=0);for(var t=p.gm.config.data.BroadcastProp[this.curIndex],e=[],o=0,n=this.myProps;o<n.length;o++){var i={id:(s=n[o]).id,num:0,sell_price:s.sell_price,buy_price:s.buy_price,weight:s.weight};e.push(i)}for(var a=_.default.weight(t.class_rate,1)[0],r=0,c=a=_.default.weight(e,a.num);r<c.length;r++){var s=c[r],l=_.default.weight(t.num,1)[0];s.num=l.num}return a},f.prototype.getMyPropRandom=function(t){if(1==(t=void 0===t?1:t))return this.myProps[_.default.randomNum(0,this.myProps.length-1)];for(var e=[],o=0,n=this.myProps;o<n.length;o++){var i=n[o];0<i.num&&e.push(i)}return e[_.default.randomNum(0,e.length-1)]},f.prototype.sellMyProp=function(t){for(var e=0,o=this.myProps;e<o.length;e++){var n=o[e];if(n.id==t){if(!(0<n.num))return void cc.error("sell error",n);--n.num,n.sellCount+=1,u.default.addProps([{id:l.CommonPropID.coin,num:n.sell_price}],!1),h.default.emit(l.GameEvent.update_sell_ui)}}},f.prototype.addMyProp=function(t){for(var e=0,o=this.myProps;e<o.length;e++){var n=o[e];n.id==t.id&&(n.num+=t.num,h.default.emit(l.GameEvent.update_sell_ui))}},f.prototype.getAllsellCoins=function(){for(var t=0,e=0,o=this.myProps;e<o.length;e++){var n=o[e];t+=n.sellCount*n.sell_price}return t},f.prototype.getDropConfig=function(){return p.gm.config.data.BroadcastProp[this.curIndex]},r=f,a.default=r,cc._RF.pop()},{}],BroadcastRankMgr:[function(t,e,o){"use strict";cc._RF.push(e,"72e880Gu41APpS7T9Xu7RJM","BroadcastRankMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("GameMgr"),l=i("Singleton"),p=i("BroadcastMgr");function u(){return null!==c&&c.apply(this,arguments)||this}r(u,c=l.default),u.prototype.getConfig=function(){for(var t=s.gm.config.data.BroadcastRanks,e=p.default.getInstance().popularity,o=null,n=0;n<t.length;n++){var i=t[n];if(e-i.popular<0){o=i;break}n==t.length-1&&(o=i)}return o||cc.error("config not found",e),o},r=u,a.default=r,cc._RF.pop()},{}],BroadcastReportMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c688383by9HB4Mb/BFrZRP8","BroadcastReportMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("MathUtils"),p=i("BroadcastMgr");function u(){return null!==c&&c.apply(this,arguments)||this}r(u,c=s.default),u.prototype.getNewFans=function(){return Math.floor(l.default.average(p.default.getInstance().newFansCount))},u.prototype.getAddRenown=function(){return Math.floor(.1*p.default.getInstance().popularity)},r=u,a.default=r,cc._RF.pop()},{}],BroadcastReport:[function(t,e,o){"use strict";cc._RF.push(e,"da081OXRJdCNLrkZofbgpey","BroadcastReport");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("GameMgr"),d=i("List"),h=i("GameModule"),_=i("BroadcastGiftMgr"),f=i("BroadcastMgr"),g=i("BroadcastPropMgr"),y=i("BroadcastReportMgr");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.rich_fans=null,t.rich_renown=null,t.rich_online=null,t.rich_like=null,t.list_my_prop=null,t.list_my_gift=null,t.lbl_sell_price=null,t.lbl_popularty=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=h.default),m.prototype.onEnable=function(){this.updateUI()},m.prototype.updateUI=function(){this.list_my_prop.numItems=g.default.getInstance().myProps.length,this.list_my_gift.numItems=_.default.getInstance().gifts.length,this.lbl_sell_price.string="\u4ea4\u6613\u989d\uff1a"+g.default.getInstance().getAllsellCoins();var t=y.default.getInstance().getNewFans();this.rich_fans.string="\u7c89\u4e1d\uff1a"+f.default.getInstance().fans+"<color=#20D51C>+"+t+"</c>",t=y.default.getInstance().getAddRenown(),this.rich_renown.string="\u77e5\u540d\u5ea6\uff1a"+f.default.getInstance().renown+"<color=#20D51C>+"+t+"</c>",this.rich_online.string="\u5728\u7ebf\uff1a"+f.default.getInstance().onlines,this.rich_like.string="\u70b9\u8d5e\uff1a"+f.default.getInstance().likes,this.lbl_popularty.string="\u4eba\u6c14\u503c\uff1a"+f.default.getInstance().popularity},m.prototype.onBtnReward=function(){this.closeMe()},m.prototype.onBtnVideo=function(){this.closeMe()},m.prototype.onBtnClose=function(){this.closeMe()},m.prototype.onRenderMyProp=function(t,e){t.getComponent(p.default).setIconByPropID(g.default.getInstance().myProps[e].id),t.getComponent(p.default).setLblCount(g.default.getInstance().myProps[e].sellCount)},m.prototype.onRenderMyGift=function(t,e){t.getComponent(p.default).setIconByPropID(_.default.getInstance().gifts[e].id),t.getComponent(p.default).setLblCount(_.default.getInstance().gifts[e].num)},m.prototype.hide=function(){l.prototype.hide.call(this),u.gm.localData.broadcast.fans=y.default.getInstance().getNewFans()+f.default.getInstance().fans,u.gm.localData.broadcast.renown=y.default.getInstance().getAddRenown()+f.default.getInstance().renown,u.gm.localData.saveByKey("broadcast"),u.gm.ui.showModule(u.gm.const.MainUI)},s([a(cc.RichText)],m.prototype,"rich_fans",void 0),s([a(cc.RichText)],m.prototype,"rich_renown",void 0),s([a(cc.RichText)],m.prototype,"rich_online",void 0),s([a(cc.RichText)],m.prototype,"rich_like",void 0),s([a(d.default)],m.prototype,"list_my_prop",void 0),s([a(d.default)],m.prototype,"list_my_gift",void 0),s([a(cc.Label)],m.prototype,"lbl_sell_price",void 0),s([a(cc.Label)],m.prototype,"lbl_popularty",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],BroadcastSellItem:[function(t,e,o){"use strict";cc._RF.push(e,"a7cc1N7rP5HsoaHX0T9AgSc","BroadcastSellItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("ListItem");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_price=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=u.default),d.prototype.setPrice=function(t){this.lbl_price.string=""+t},d.prototype.setName=function(t){this.getComponent(p.default).setName(t)},d.prototype.setCount=function(t){this.getComponent(p.default).setLblCount(t)},s([a(cc.Label)],d.prototype,"lbl_price",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],BroadcastSellKnife:[function(t,e,o){"use strict";cc._RF.push(e,"c28b33m26NG/5WSP2hrGbbY","BroadcastSellKnife");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("NodePoolItem");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_move=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.NodePoolItem),u.prototype.onDisable=function(){this.nod_move.active=!1},u.prototype.setData=function(t){this.node.x=t.x,this.node.y=t.y,this.nod_move.x=0,this.nod_move.y=0,this.nod_move.getComponent(cc.MotionStreak).reset(),this.nod_move.active=!0},u.prototype.move=function(t){t=this.node.convertToNodeSpaceAR(t),this.nod_move.x=t.x,this.nod_move.y=t.y},s([a(cc.Node)],u.prototype,"nod_move",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],BroadcastSell:[function(t,e,o){"use strict";cc._RF.push(e,"eb2063XvglKQJozOAgpFz+I","BroadcastSell");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("GameModule"),d=i("BroadcastLvMgr"),h=i("BroadcastMgr"),_=i("StringUtil"),f=i("Const"),g=i("BroadcastDropItem"),y=i("EventManager"),m=i("PropMgr"),v=i("List"),b=i("BroadcastPropMgr"),I=i("BroadcastSellItem"),D=i("CommonItem_4"),C=i("BroadcastChatItem"),O=i("BroadcastGiftMgr"),w=i("BroadcastSellKnife"),M=i("MathUtils"),P=i("CommonUtils"),S=i("CommonData"),T=i("ReplacementModel");function j(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.lbl_popularity=null,t.lbl_renown=null,t.lbl_like=null,t.lbl_fans=null,t.lbl_online=null,t.lbl_time=null,t.lbl_coin=null,t.nod_create=null,t.list=null,t.chatList=null,t.list_gift=null,t.lbl_renown_progress=null,t.pro_renown=null,t.nod_touch=null,t.layer_gift=null,t.sp_role=null,t.temp_knife=null,t.myProps=[],t.chats=[],t.showGiftList=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(j,l=u.default),j.prototype.begin=function(){var t=this;h.default.getInstance().begin(),this.myProps=b.default.getInstance().myProps;for(var e=0,o=p.gm.config.data.BroadcastChat;e<o.length;e++){var n=o[e];this.chats.push(n)}this.list.numItems=this.myProps.length,this.chatList.numItems=3,this.schedule(function(){t.chats.push(t.chats.shift()),t.chatList.numItems=3},1,cc.macro.REPEAT_FOREVER),this.updateUI()},j.prototype.onLoad=function(){var t=this;l.prototype.onLoad.call(this),this.setKnifeEnable(!1),P.default.loadMainRoleSpine(this.sp_role,function(){T.default.createBySpine(t.sp_role,S.default.getInstance().dressing),t.sp_role.setAnimation(0,"sitdown",!0)})},j.prototype.onEnable=function(){y.default.on(f.GameEvent.drop_items,this.createDropItem,this),y.default.on(f.GameEvent.update_sell_ui,this.updateUI,this),y.default.on(f.GameEvent.show_big_gift,this.onShowGift,this),this.nod_touch.on(cc.Node.EventType.TOUCH_MOVE,this.onMove,this),this.nod_touch.on(cc.Node.EventType.TOUCH_START,this.onStart,this),this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onEnd,this)},j.prototype.onDisable=function(){y.default.off(f.GameEvent.drop_items,this.createDropItem,this),y.default.off(f.GameEvent.update_sell_ui,this.updateUI,this),y.default.off(f.GameEvent.show_big_gift,this.onShowGift,this),this.nod_touch.off(cc.Node.EventType.TOUCH_MOVE,this.onMove,this)},j.prototype.onBtnEnd=function(){h.default.getInstance().end()},j.prototype.updateUI=function(){this.lbl_lv.string="Lv."+d.default.getInstance().getLv(),this.lbl_coin.string=""+m.default.getPropCount(f.CommonPropID.coin),this.list.numItems=this.myProps.length;var t=d.default.getInstance().getProgress();this.lbl_renown_progress.string=t.cur+"/"+t.target,this.pro_renown.progress=t.cur/t.target,this.chatList.numItems=3,this.list_gift.numItems=O.default.getInstance().showList.length},j.prototype.update=function(){this.lbl_online.string=""+h.default.getInstance().onlines,this.lbl_popularity.string="\u4eba\u6c14\uff1a"+h.default.getInstance().popularity,this.lbl_renown.string="\u77e5\u540d\u5ea6\uff1a"+h.default.getInstance().renown,this.lbl_like.string="\u672c\u573a\u70b9\u8d5e\uff1a"+h.default.getInstance().likes,this.lbl_fans.string=""+h.default.getInstance().fans,this.lbl_time.string=""+_.default.countDownFormat_2(h.default.getInstance().getSeconds())},j.prototype.createDropItem=function(t){for(var e=this,o=-120*(t.length-1)/2,n=0;n<t.length;n++)!function(n){var i=t[n];p.gm.pool.async_get(f.Contents.BroadcastDropItem.bundleName,f.Contents.BroadcastDropItem.loadPath,g.default,function(t){e.nod_create.addChild(t.node),t.node.x=o+120*n+M.default.randomNum(-50,50),t.node.y=700,t.setData(i)})}(n)},j.prototype.onRender=function(t,e){(t=t.getComponent(I.default)).setPrice(this.myProps[e].sell_price),t.setName(this.myProps[e].name),t.setCount(this.myProps[e].num),t.getComponent(D.default).setIconByPropID(this.myProps[e].id)},j.prototype.onRenderChat=function(t,e){t.getComponent(C.default).setData(this.chats[e])},j.prototype.onRenderGift=function(t,e){(t=t.getComponent(D.default)).setIconByPropID(O.default.getInstance().showList[e].id),t.setName(m.default.getConfigByPropID(O.default.getInstance().showList[e].id).name)},j.prototype.onMove=function(t){var e=this,o=(t=t.getLocation(),this.nod_touch.convertToNodeSpaceAR(t));this.temp_knife?(this.temp_knife.x=o.x,this.temp_knife.y=o.y):p.gm.pool.async_get(f.Contents.BroadcastSkellKnife.bundleName,f.Contents.BroadcastSkellKnife.loadPath,w.default,function(t){t.setData(o),e.temp_knife=t.node,t.node.parent=e.nod_touch})},j.prototype.onStart=function(t){t=t.getLocation(),this.nod_touch.convertToNodeSpaceAR(t)},j.prototype.onEnd=function(){var t=this.temp_knife;this.scheduleOnce(function(){p.gm.pool.put(t)},.2),this.temp_knife=null},j.prototype.setKnifeEnable=function(t){void 0===t&&(t=!0),cc.log("enable ",t)},j.prototype.onShowGift=function(t){var e=this;P.default.getPrefab(f.BundleName.MAIN_UI,"prefabs/gifts/"+t,function(t){cc.instantiate(t).parent=e.layer_gift}),this.scheduleOnce(function(){e.layer_gift.removeAllChildren()},1.5)},s([a(cc.Label)],j.prototype,"lbl_lv",void 0),s([a(cc.Label)],j.prototype,"lbl_popularity",void 0),s([a(cc.Label)],j.prototype,"lbl_renown",void 0),s([a(cc.Label)],j.prototype,"lbl_like",void 0),s([a(cc.Label)],j.prototype,"lbl_fans",void 0),s([a(cc.Label)],j.prototype,"lbl_online",void 0),s([a(cc.Label)],j.prototype,"lbl_time",void 0),s([a(cc.Label)],j.prototype,"lbl_coin",void 0),s([a(cc.Node)],j.prototype,"nod_create",void 0),s([a(v.default)],j.prototype,"list",void 0),s([a(v.default)],j.prototype,"chatList",void 0),s([a(v.default)],j.prototype,"list_gift",void 0),s([a(cc.Label)],j.prototype,"lbl_renown_progress",void 0),s([a(cc.ProgressBar)],j.prototype,"pro_renown",void 0),s([a(cc.Node)],j.prototype,"nod_touch",void 0),s([a(cc.Node)],j.prototype,"layer_gift",void 0),s([a(sp.Skeleton)],j.prototype,"sp_role",void 0),i=s([i],j),r.default=i,cc._RF.pop()},{}],BrowserUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1e687D/++9Or6Hab4cQLgTp","BrowserUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.creatJsonFile=function(t,e){t=JSON.stringify(t),this.saveForBrowser(t,e)},i.saveForBrowser=function(t,e){var o;cc.sys.isBrowser&&(cc.log("\u6d4f\u89c8\u5668"),o=new Blob([t],{type:"application/json"}),(t=document.createElement("a")).download=e,t.innerHTML="Download File",null!=window.webkitURL&&(t.href=window.webkitURL.createObjectURL(o)),t.click())},n.default=i,cc._RF.pop()},{}],BubbleDialogMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1cb4c4Uh4lCr479uyT/yQvP","BubbleDialogMgr");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),r=s,c.default=r,cc._RF.pop()},{}],BuildBuildingItem:[function(t,e,o){"use strict";cc._RF.push(e,"13f9esWgn1I5ol5lDZNk7se","BuildBuildingItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("IconUtils"),g=i("ListItem"),y=i("TMXUtils"),m=i("GuideMgr");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_facade=null,t.nod_unlock=null,t.preview=!1,t.touching=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=g.default),v.prototype.start=function(){},v.prototype.setData=function(t){this.buildingConfig=t,this.updateUI()},v.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},v.prototype.updateUI=function(){this.lbl_name.string=this.buildingConfig.name,this.spr_facade.spriteFrame=null,f.IconUtils.setObjectSprite(this.buildingConfig.object_id,this.spr_facade)},v.prototype.onTouchEnd=function(){m.default.getInstance().endGuide(1018),this.touching=!1,h.gm.ui.get_module(h.gm.const.BuildUI).scr_building.enabled=!0,u.BuildBuildingUtils.draging||h.gm.ui.get_module(h.gm.const.BuildUI).showNeed(this.buildingConfig.object_id)},v.prototype.onTouchMove=function(t){var e,o,n=t.touch.getLocation().sub(t.touch.getStartLocation());if(0<n.y&&20<n.y-Math.abs(n.x)&&!this.touching){if(this.touching=!0,!(n=u.BuildBuildingUtils.getConfigByID(this.buildingConfig.object_id)))return void cc.error(" not found config",this.buildingConfig.object_id);if(!p.default.checkMastery(n.mastery,!0))return;if(!_.default.checkBagEnough(n.need_prop,!0))return;u.BuildBuildingUtils.need_prop=n.need_prop||[],u.BuildBuildingUtils.mastery_produce=n.mastery_produce,u.BuildBuildingUtils.draging||(u.BuildBuildingUtils.draging=!0,u.BuildBuildingUtils.setStatus(d.EnumBuildStatus.Build),cc.log("create object"),o=h.gm.mainUI.preview_layer.convertToNodeSpaceAR(t.getLocation()),(e=y.default.touchToTile(o,h.gm.mapData.mapSize,h.gm.const.GridSize))&&h.gm.mapData.createPreviewObject(this.buildingConfig.object_id,h.gm.mainUI.preview_layer,e),h.gm.ui.get_module(h.gm.const.BuildUI).scr_building.enabled=!1,h.gm.ui.get_module(h.gm.const.BuildUI).undisplay(),h.gm.ui.showModule(h.gm.const.BuildPut))}u.BuildBuildingUtils.draging&&h.gm.mapData.tempMapObject&&(o=h.gm.mainUI.preview_layer.convertToNodeSpaceAR(t.getLocation()),(e=y.default.touchToTile(o,h.gm.mapData.mapSize,h.gm.const.GridSize))?h.gm.mapData.tempMapObject.setGridPosAndShowGrid(e):cc.log(o.x,o.y))},v.prototype.onTouchStart=function(){},v.prototype.onTouchCancel=function(){h.gm.ui.get_module(h.gm.const.BuildUI).scr_building.enabled=!0,this.touching=!1,u.BuildBuildingUtils.draging&&(h.gm.ui.closeModule(h.gm.const.BuildUI),h.gm.ui.get_module(h.gm.const.BuildUI).display(),u.BuildBuildingUtils.draging=!1)},s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.Sprite)],v.prototype,"spr_facade",void 0),s([a(cc.Node)],v.prototype,"nod_unlock",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],BuildInsideUnlockUtils:[function(t,e,o){"use strict";cc._RF.push(e,"bb725SdUrVJKpLECGU7SLQG","BuildInsideUnlockUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("GameMgr");function r(){}r.getBuildInsideLockConfig=function(t,e){for(var o=0,n=a.gm.config.data.BuildInsideUnlock;o<n.length;o++){var i=n[o];if(i.build_id==t&&i.index==e)return i}},r.getConfig=function(t){for(var e=[],o=0,n=a.gm.config.data.BuildInsideUnlock;o<n.length;o++){var i=n[o];i.build_id==t&&e.push(i)}return e},n=r,i.default=n,cc._RF.pop()},{}],BuildMove:[function(t,e,o){"use strict";cc._RF.push(e,"b6e7aLppotDxrtxG/jTnPG1","BuildMove");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("ConfigUtils"),p=a("Const"),u=a("GameMgr"),d=a("MapDataHelper"),h=a("GameModule"),_=a("PlaceMgr");function f(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(f,s=h.default),f.prototype.onBack=function(){var t=d.default.getLiftObject();t.setGridPosAndShowGrid(u.gm.mapData.liftMapObjectGrid),u.gm.mapData.liftMapObjectGrid=null,_.default.getInstance().checkCanPut(t.data)?(t.setMode(p.MapObjectMode.normal),u.gm.mapData.place(t.data),this.closeMe(),l.BuildBuildingUtils.setStatus(p.EnumBuildStatus.Prepare),u.gm.ui.showModule(u.gm.const.BuildUI)):u.gm.ui.showNotice("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u653e\u7f6e")},f.prototype.onConfirm=function(){var t=d.default.getLiftObject();_.default.getInstance().checkCanPut(t.data)?(t.setMode(p.MapObjectMode.normal),u.gm.mapData.place(t.data),this.closeMe(),l.BuildBuildingUtils.setStatus(p.EnumBuildStatus.None)):u.gm.ui.showNotice("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u653e\u7f6e")},f.prototype.onRotation=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],f),r.default=a,cc._RF.pop()},{}],BuildNeedItem:[function(t,e,o){"use strict";cc._RF.push(e,"8bc13X6GupMtKpRSY924foQ","BuildNeedItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("PropMgr"),u=i("IconUtils"),d=i("ListItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.lbl_count=null,t.nod_done=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.default),h.prototype.start=function(){},h.prototype.setData=function(t){this.data=t,this.updateUI()},h.prototype.updateUI=function(){this.lbl_count.string=p.default.getPropCount(this.data.id)+"/"+this.data.num,this.nod_done.active=p.default.getPropCount(this.data.id)>=this.data.num,u.IconUtils.setPropSprite(this.data.id,this.spr_facade)},s([a(cc.Sprite)],h.prototype,"spr_facade",void 0),s([a(cc.Label)],h.prototype,"lbl_count",void 0),s([a(cc.Node)],h.prototype,"nod_done",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],BuildPut:[function(t,e,o){"use strict";cc._RF.push(e,"bbbc8zTVn5I4J6bwz8q2rn7","BuildPut");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("CommonUtils"),p=a("ConfigUtils"),u=a("Const"),d=a("GameMgr"),h=a("MapHelper"),_=a("MapObjectData"),f=a("PropMgr"),g=a("GameModule"),y=a("TaskRecordData");function m(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(m,s=g.default),m.prototype.onCancel=function(){this.closeMe(),d.gm.mapData.cancelPreview(),d.gm.ui.showModule(d.gm.const.BuildUI),d.gm.ui.get_module(d.gm.const.BuildUI).display(),p.BuildBuildingUtils.setStatus(u.EnumBuildStatus.Prepare)},m.prototype.onConfirm=function(){var t=d.gm.mapData.tempMapObject.objectID,e=cc.v2(d.gm.mapData.tempMapObject.worldGrid.x,d.gm.mapData.tempMapObject.worldGrid.y),o=_.default.createByID(t,l.default.createNewUID());o.setWorldGrid(e),d.gm.mapData.onConfirmPreviewByData(o)?(h.default.hideGrid(),h.default.setMapMove(),p.BuildBuildingUtils.setStatus(u.EnumBuildStatus.None),f.default.tryConsume(p.BuildBuildingUtils.need_prop),p.BuildBuildingUtils.need_prop=[],f.default.addProps(p.BuildBuildingUtils.mastery_produce),p.BuildBuildingUtils.mastery_produce=[],y.default.getInstance().addBuildRecord(t,1),d.gm.ui.closeModule(d.gm.const.BuildUI),this.closeMe()):d.gm.ui.showNotice("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u521b\u5efa")},m.prototype.onRotation=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],m),r.default=a,cc._RF.pop()},{}],BuildUI:[function(t,e,o){"use strict";cc._RF.push(e,"78482gJk+pMJKXP1Wn3jDj6","BuildUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("GameModule"),y=i("GuideMgr"),m=i("MainRoleMgr"),v=i("BuildBuildingItem"),b=i("BuildNeedItem");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.building_list=null,t.need_item_list=null,t.lbl_building_name=null,t.nod_need=null,t.tog_container=null,t.scr_building=null,t.curIndex=0,t.needProp=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=g.default),I.prototype.onStart=function(){this.tog_container.toggleItems[this.curIndex].check()},I.prototype.onEnable=function(){this.display(),u.BuildBuildingUtils.draging=!1,u.BuildBuildingUtils.setStatus(d.EnumBuildStatus.Prepare),this.nod_need.active=!1,y.default.getInstance().showTaskFinger(1018,1),this.updateUI()},I.prototype.onBtnClose=function(){u.BuildBuildingUtils.setStatus(d.EnumBuildStatus.None),this.closeMe()},I.prototype.onDisable=function(){},I.prototype.onToggle=function(t,e){cc.log(t,e),e=Number(e),this.curIndex=e-1,this.updateUI()},I.prototype.updateUI=function(){this.buildingConfig=u.BigMapConfigUtils.getCanBuildBuilding(D[this.curIndex]),this.building_list.numItems=this.buildingConfig.length,this.building_list.scrollTo(0);for(var t=0,e=this.tog_container.toggleItems;t<e.length;t++)e[t].node.getChildByName("Background").active=!0;this.tog_container.toggleItems[this.curIndex].node.getChildByName("Background").active=!1},I.prototype.onRenderBuildingItem=function(t,e){t.getComponent(v.default).setData(this.buildingConfig[e])},I.prototype.showNeed=function(t){this.nod_need.active=!0,this.curBuildingConfig=u.BigMapConfigUtils.getConfig(t),this.lbl_building_name.string=this.curBuildingConfig.name;var e=u.BuildBuildingUtils.getConfigByID(t);e?(this.needProp=e.need_prop||[],this.needProp&&(this.need_item_list.numItems=this.needProp.length,this.need_item_list.scrollTo(0))):cc.error("build config not found:",t)},I.prototype.onRenderNeedItem=function(t,e){t.getComponent(b.default).setData(this.needProp[e])},I.prototype.undisplay=function(){this.node.opacity=0},I.prototype.display=function(){this.node.opacity=255},I.prototype.onBuild=function(){var t=u.BuildBuildingUtils.getConfigByID(this.curBuildingConfig.object_id);t?p.default.checkMastery(t.mastery,!0)&&_.default.checkBagEnough(t.need_prop,!0)&&(u.BuildBuildingUtils.need_prop=t.need_prop||[],u.BuildBuildingUtils.mastery_produce=t.mastery_produce,u.BuildBuildingUtils.setStatus(d.EnumBuildStatus.Build),h.gm.ui.get_module(h.gm.const.BuildUI).scr_building.enabled=!1,h.gm.ui.get_module(h.gm.const.BuildUI).undisplay(),h.gm.ui.showModule(h.gm.const.BuildPut),t=h.gm.mainUI.getCenterGrid()||m.default.getInstance().getRoleGrid(),h.gm.mapData.createPreviewObject(this.curBuildingConfig.object_id,h.gm.mainUI.preview_layer,t)):cc.error(" not found config",this.curBuildingConfig.object_id)},s([a(f.default)],I.prototype,"building_list",void 0),s([a(f.default)],I.prototype,"need_item_list",void 0),s([a(cc.Label)],I.prototype,"lbl_building_name",void 0),s([a(cc.Node)],I.prototype,"nod_need",void 0),s([a(cc.ToggleContainer)],I.prototype,"tog_container",void 0),s([a(cc.ScrollView)],I.prototype,"scr_building",void 0),i=s([i],I),r.default=i;var D=((i={})[0]=[1,6],i[1]=[2],i[2]=[3],i[3]=[4],i[4]=[5],i);cc._RF.pop()},{}],BusinessManData:[function(t,e,o){"use strict";cc._RF.push(e,"86c2bNRh69MAo8Iz1fMSSGs","BusinessManData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("EventManager"),l=i("Const"),p=i("ShelfOrderData"),u=i("BusinessmanMgr"),d=i("ShelfNpcMgr"),h=i("NpcData"),_=i("TaskRecordData"),f=i("ShelfOrderHelper"),g=i("Line"),y=i("ShelfMgr");function m(t){return(t=c.call(this,t)||this).state=u.ShelfBusinessState.none,t.isWaiting=!1,t.onTargetGrid=!1,t.speed=1,t.order=null,t}r(m,c=h.default),m.prototype.pay=function(){return this.state==u.ShelfBusinessState.wait_for_pay&&(y.default.getInstance().sell(this.order.items),p.default.getInstance().deleteCashOrder(this.order),this.changeState(u.ShelfBusinessState.payed),!0)},m.prototype.giveGoods=function(){this.state==u.ShelfBusinessState.wait_for_goods&&(p.default.getInstance().tryRemoveFromShelf(this.order.getObjectID(),this.order.items)?(_.default.getInstance().addNPCTradeCount(this.npcID,1),this.changeState(u.ShelfBusinessState.give_goods)):this.changeState(u.ShelfBusinessState.no_goods))},m.prototype.changeState=function(t,e){void 0===e&&(e=!1),(t>this.state||e)&&this._setState(t)},m.prototype._setState=function(t){var e,o;this.state=t,this.state==u.ShelfBusinessState.none?(u.BusinessmanMgr.getInstance().businessmanView[this.npcID].node.destroy(),delete u.BusinessmanMgr.getInstance().businessmanView[this.npcID],delete u.BusinessmanMgr.getInstance().businessmanData[this.npcID],d.default.getInstance().removeNpc(this.npcID)):this.state==u.ShelfBusinessState.go_to_shelf?s.default.emit(l.GameEvent.change_businessman_state,this.npcID):this.state==u.ShelfBusinessState.reach_shelf?(s.default.emit(l.GameEvent.change_businessman_state,this.npcID),(e=f.default.getInstance().tryToCreateNewOrder())?(e.setNpcID(this.npcID),p.default.getInstance().async_write_data(),this.order=e,this.changeState(u.ShelfBusinessState.getOrder)):(o=u.BusinessmanMgr.getInstance().businessmanView[this.npcID])&&o.onNoOrder()):this.state==u.ShelfBusinessState.getOrder?(s.default.emit(l.GameEvent.change_businessman_state,this.npcID),e=f.default.getInstance().getFreeDesks(),(e=f.default.getInstance().checkItems(e,this.order.items))?(this.order.setObjectID(e),p.default.getInstance().pushToObjectList(this.order,e),this.changeState(u.ShelfBusinessState.go_to_goods)):this.changeState(u.ShelfBusinessState.no_goods)):this.state==u.ShelfBusinessState.go_to_goods||this.state==u.ShelfBusinessState.wait_for_goods||this.state==u.ShelfBusinessState.give_goods?s.default.emit(l.GameEvent.change_businessman_state,this.npcID):this.state==u.ShelfBusinessState.no_goods?(s.default.emit(l.GameEvent.change_businessman_state,this.npcID),p.default.getInstance().removeShelfOrder(this.order),(o=u.BusinessmanMgr.getInstance().businessmanView[this.npcID])&&o.onNoOrder()):this.state!=u.ShelfBusinessState.wait_for_pay&&this.state!=u.ShelfBusinessState.payed&&this.state!=u.ShelfBusinessState.end||s.default.emit(l.GameEvent.change_businessman_state,this.npcID)},m.prototype.addLeaveLine=function(){this.addLine(g.default.createByNums([39,34,18,17,16,15]))},r=m,a.default=r,cc._RF.pop()},{}],BusinessmanMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5871cYjk5NH+rAJY/68m341","BusinessmanMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ShelfBusinessState=a.BusinessmanMgr=void 0;var c,s,l=i("CommonUtils"),p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("Line"),_=i("MapDataHelper"),f=i("MapHelper"),g=i("AssetMgr"),y=i("Singleton"),m=i("ShelfOrderData"),v=i("BusinessManData"),b=i("BusinessmanView"),I=i("NpcAni"),D=i("NpcMgr");function C(){var t=null!==s&&s.apply(this,arguments)||this;return t.businessmanData={},t.businessmanView={},t}r(C,s=y.default),C.prototype.getView=function(){var t,e=[];for(t in this.businessmanView)e.push(this.businessmanView[t]);return e},C.prototype.getVisibleView=function(){var t,e=[];for(t in this.businessmanView){var o=this.businessmanView[t];o&&o.node&&f.default.checkNodeIsInWindow(o.node)&&e.push(o)}return e},C.prototype.createByConfig=function(t,e){var o=this,n=t.npc_id;this.businessmanData[n]||(this.businessmanData[n]=new v.default(n),this.businessmanData[n].speed=p.NPCDataUtils.getConfigByID(n).customer_move_speed,this.createNodeByID(n,this.businessmanData[n],function(t){o.businessmanView[n]=t,o.businessmanData[n].addLine(h.default.createByNums(e));var i=o.businessmanData[n].line.getBegin();t.setGrid(i.gridPos),o.businessmanData[n].changeState(c.go_to_shelf)}))},C.prototype.createNodeByID=function(t,e,o){var n=this;g.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"prefabs/npc/npc_businessman",cc.Prefab,function(i){var a=(i=cc.instantiate(i)).getComponent(b.default);a.data=e,i.parent=d.gm.mainUI.map_object_layer,i.active=!0,a.show(),n.businessmanView[t]=a,D.default.getInstance().loadSpineByNpcID(t,function(t){a.spine.skeletonData=t,a.spine.setSkin("default"),a.spine.setAnimation(0,"standby",!0),o&&o(a)})})},C.prototype.findDeskMan=function(){for(var t in m.default.getInstance().shelf_orders)for(var e=0,o=m.default.getInstance().shelf_orders[t];e<o.length;e++){var n=o[e];if(n.npc_id&&this.businessmanView[n.npc_id])return this.businessmanView[n.npc_id]}return null},C.prototype.move=function(t,e,o){void 0===o&&(o=null);var n=h.default.createByGrids(e),i=this.businessmanView[t];i&&(i.moveByLine.lastPos=l.default.worldGridToPos(i.getGrid()),i.moveByLine.cur_speed=i.data.speed,i.moveByLine.moveByLine(n,function(t,e){i.getComponent(I.default).updateDirectionByPos(e,t),i.getComponent(I.default).playAniByType(u.EnumRoleAniType.walk),t=i.moveByLine.cur_speed/i.getNormalSpeed(),i.spine.timeScale=t},function(t){i.setGrid(t),f.default.checkNodeIsInWindow(i.node)&&f.default.sortReq(),i.data?(n.onMoveToNextPoint(),n.curIndex<n.getEndingIndex()?i.moveByLine.goNextPointByData():i.moveByLine.onMoveLineEnd()):cc.error("not found data")},o),i.moveByLine.line.setCurIndex(-1),i.moveByLine.goNextPointByData())},C.prototype.moveLineUpInCashier=function(){for(var t=_.default.getDataByID(u.SpecialObjectID.shelf_cash_box),e=this,o=0;o<m.default.getInstance().cashier_orders.length;o++)!function(o){var n=m.default.getInstance().cashier_orders[o],i=C.getInstance().businessmanView[n.npc_id];i&&t&&i.data.state==c.wait_for_pay&&(o=t.getCashierLinkPos(o),e.move(n.npc_id,[o],function(){i.getComponent(I.default).updateDirectionByType(u.RoleDirection.left_up),i.getComponent(I.default).playAniByType(u.EnumRoleAniType.standby)}))}(o)},r=C,a.BusinessmanMgr=r,(a=c=a.ShelfBusinessState||(a.ShelfBusinessState={}))[a.none=0]="none",a[a.go_to_shelf=1]="go_to_shelf",a[a.reach_shelf=2]="reach_shelf",a[a.getOrder=3]="getOrder",a[a.go_to_goods=4]="go_to_goods",a[a.wait_for_goods=5]="wait_for_goods",a[a.no_goods=6]="no_goods",a[a.give_goods=7]="give_goods",a[a.go_to_pay=8]="go_to_pay",a[a.wait_for_pay=9]="wait_for_pay",a[a.payed=10]="payed",a[a.end=11]="end",cc._RF.pop()},{}],BusinessmanView:[function(t,e,o){"use strict";cc._RF.push(e,"5a3d0ks1e9HQavBZCL2HkrB","BusinessmanView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("IMapPosCtrl"),_=i("ItemBubble"),f=i("Line"),g=i("MapDataHelper"),y=i("MapHelper"),m=i("MoveByLine"),v=i("EventManager"),b=i("Vec2Utils"),I=i("NetUtils"),D=i("Finger"),C=i("Shopboard"),O=i("ShelfMgr"),w=i("ShelfOrderData"),M=i("BusinessmanMgr"),P=i("NpcAni");function S(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.spine_face=null,t.nod_touch=null,t.nod_foot=null,t.nod_bubble=null,t.spr_icon=null,t.item_bubble=null,t.nod_finger=null,t.moveByLine=null,t.nod_boundingBox=null,t.data=null,t.stepLen=60,t.stepTime=.6,t.moveToNextPointEnd=!0,t.moveEndCb=null,t.curPath=[],t.posSys=new u.MapPosSys,t._display=!1,t._show=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(S,l=h.default),S.prototype.onLoad=function(){v.default.on(u.GameEvent.change_businessman_state,this.onChangeState,this),this.hideBubble()},S.prototype.onDestroy=function(){v.default.off(u.GameEvent.change_businessman_state,this.onChangeState,this)},S.prototype.onEnable=function(){v.default.on(u.GameEvent.on_go_to_sell,this.onAutoSell,this),this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.item_bubble.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},S.prototype.onDisable=function(){v.default.off(u.GameEvent.on_go_to_sell,this.onAutoSell,this),this.item_bubble.node.off(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},S.prototype.onTouchItem=function(t){t.stopPropagation(),this.data.order&&(this.data.state==M.ShelfBusinessState.wait_for_goods?this.data.giveGoods():this.data.state==M.ShelfBusinessState.wait_for_pay&&this.data.pay())},S.prototype.onTouchView=function(t){t.stopPropagation(),cc.log(this.data)},S.prototype.onAutoSell=function(t){this.data.npcID==Number(t)&&(cc.log("play sell ani",this.data.npcID),this.playSellAni())},S.prototype.playSellAni=function(){this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),this.spine.setSkin("default"),this._setRoleAni("give_gifts",!1)},S.prototype.onSpineComplete=function(t){"walk"!=(t=t.animation.name||"")&&"standby"!=t&&cc.log("on Spine Complete ",this.data.npcID,t),"give_gifts"==t?(this._setRoleAni("standby",!0),I.ReportData.instance.report_point(100005,41000012)):"bag_back"!=t&&"bag"!=t||this.goToPay()},S.prototype.goForwardPoint=function(){var t;!this.moveToNextPointEnd||(t=this.data.line.getNextPoint())&&(this.moveToNextPointEnd=!1,this.movePath(t.gridPos))},S.prototype.goBack=function(){var t;!this.moveToNextPointEnd||(t=this.data.line.prePoint())&&(this.moveToNextPointEnd=!1,this.movePath(t.gridPos))},S.prototype.movePath=function(t){var e=this,o=p.default.worldGridToPos(t),n=this.node.parent.convertToNodeSpaceAR(d.gm.mainUI.map_object_layer.convertToWorldSpaceAR(o));o.x>this.lastPos.x?this.spine.node.scaleX=-1*Math.abs(this.spine.node.scaleX):this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),o.y>this.lastPos.y?this.data.order&&w.default.getInstance().checkOrderInCashier(this.data.order)?this._setRoleAni("bag_walk_back",!0):this._setRoleAni("walk_back",!0):this.data.order&&w.default.getInstance().checkOrderInCashier(this.data.order)?this._setRoleAni("bag_walk",!0):this._setRoleAni("walk",!0);var i=this.data.speed,a=i/this.getNormalSpeed(),r=b.default.getDistance(cc.v2(this.node.x,this.node.y),n);this.spine.timeScale=a,i=r/i,cc.tween(this.node).to(i,{x:n.x,y:n.y}).call(function(){e.moveToNextPointEnd=!0,e.lastPos=o,e._onMoveToOnLine(t)}).start()},S.prototype._onMoveToOnLine=function(t){this.setGrid(t),y.default.checkNodeIsInWindow(this.node)&&y.default.sortReq(),this.data?this.data.state==M.ShelfBusinessState.go_to_shelf?this.data.onTargetGrid?cc.error("onMoveTargetEnd"):(this.data.line.onMoveToNextPoint(),this.data.line.curIndex<this.data.line.getEndingIndex()?this.goForwardPoint():(this.data.onTargetGrid=!0,this.data.changeState(M.ShelfBusinessState.reach_shelf))):this.data.state==M.ShelfBusinessState.go_to_goods?this.data.changeState(M.ShelfBusinessState.wait_for_goods):this.data.state==M.ShelfBusinessState.wait_for_goods&&this.stand():cc.error("not found data")},S.prototype.stand=function(){this.spine.timeScale=1,this._setRoleAni("standby",!0)},S.prototype.hideBubble=function(){this.nod_bubble.active=!1},S.prototype.onChangeState=function(t){t==this.data.npcID&&(this.data.state==M.ShelfBusinessState.go_to_shelf?(this.show(),this.goForwardPoint(),this.hideBubble()):this.data.state==M.ShelfBusinessState.getOrder?this.data.order&&(this.item_bubble.setItems(this.data.order.items),this.item_bubble.show()):this.data.state==M.ShelfBusinessState.go_to_goods?this.goToGood():this.data.state==M.ShelfBusinessState.wait_for_goods?this.stand():this.data.state==M.ShelfBusinessState.wait_for_pay?(this.stand(),this.data.order&&(this.item_bubble.setItems([{id:u.CommonPropID.coin,num:1}]),this.item_bubble.show())):this.data.state==M.ShelfBusinessState.give_goods?this.onGiveGoods():this.data.state==M.ShelfBusinessState.no_goods?this.showAngry(!0):this.data.state==M.ShelfBusinessState.payed?this.payEnd():this.data.state==M.ShelfBusinessState.none&&this.show(!1))},S.prototype.onGiveGoods=function(){var t=this,e=[u.SpecialObjectID.stall_desk_1];this.data.order.getObjectID()>=u.SpecialObjectID.stall_desk_3?this.getComponent(P.default).updateDirectionByType(u.RoleDirection.right_up):e.includes(this.data.order.getObjectID())?this.getComponent(P.default).updateDirectionByType(u.RoleDirection.left_up):this.getComponent(P.default).updateDirectionByType(u.RoleDirection.right_down),this.getComponent(P.default).playAniByType(u.EnumRoleAniType.bag,1,function(){t.goToPay()}),this.item_bubble.playProgress(.7)},S.prototype.goToGood=function(){var t,e=this,o=g.default.getDataByID(this.data.order.getObjectID());o&&(t=w.default.getInstance().getOrderIndex(this.data.order),M.BusinessmanMgr.getInstance().move(this.data.npcID,[cc.v2(113,139),cc.v2(113,134)],function(){M.BusinessmanMgr.getInstance().move(e.data.npcID,[o.getShelfDeskLinkPos(t)],function(){e.data.changeState(M.ShelfBusinessState.wait_for_goods)})}))},S.prototype.payEnd=function(){var t=this;M.BusinessmanMgr.getInstance().moveLineUpInCashier(),this.item_bubble.show(!1);var e=O.default.getInstance().getCoinByItem(this.data.order.items);p.default.fly(this.node,[e]),(e=[cc.v2(107,141)]).push.apply(e,f.default.createGridsByNums([18,17,16,15])),M.BusinessmanMgr.getInstance().move(this.data.npcID,e,function(){t.show(!1),t.data.changeState(M.ShelfBusinessState.none,!0)})},S.prototype.goToPay=function(){var t=this;w.default.getInstance().moveToCashier(this.data.order),this.data.order&&(this.item_bubble.setItems([{id:u.CommonPropID.coin,num:1}]),this.item_bubble.show());var e,o=[],n=(o=[cc.v2(107,136),cc.v2(107,138)],g.default.getDataByID(u.SpecialObjectID.shelf_cash_box));n&&(e=w.default.getInstance().getOrderIndex(this.data.order),this.data.order.getObjectID()==u.SpecialObjectID.stall_desk_2&&o.unshift(cc.v2(112,134)),o.push(n.getCashierLinkPos(e)),M.BusinessmanMgr.getInstance().move(this.data.npcID,o,function(){t.data.changeState(M.ShelfBusinessState.wait_for_pay),M.BusinessmanMgr.getInstance().moveLineUpInCashier()}))},S.prototype.onNoOrder=function(){var t=this,e=b.default.createLine(cc.v2(113,134),cc.v2(107,134));e.unshift(cc.v2(113,139)),e.push(cc.v2(107,139),cc.v2(107,141)),e.push.apply(e,f.default.createGridsByNums([18,17,16,15])),M.BusinessmanMgr.getInstance().move(this.data.npcID,e,function(){t.show(!1),t.data.changeState(M.ShelfBusinessState.none,!0)})},S.prototype.show=function(t){this._show=t=void 0===t||t,this._show&&this._display?this.node.opacity=255:this.node.opacity=0},S.prototype.display=function(t){this._display=t=void 0===t||t,this._show&&this._display?this.node.opacity=255:this.node.opacity=0},S.prototype.onRenderItems=function(){},S.prototype.updateIndex=function(t){this.node.zIndex=t},S.prototype.getNormalSpeed=function(){return this.stepLen/this.stepTime},S.prototype.setGrid=function(t){this.curPath=[],this.posSys.worldGrid=t,this.lastPos=p.default.worldGridToPos(t),this.updatePos(),this.node.stopAllActions(),y.default.checkNodeIsInWindow(this.getBoundingBoxNode())&&y.default.update_scr_req()},S.prototype.updatePos=function(){var t,e=this;this.posSys.worldGrid&&((t=g.default.getDataByID(u.SpecialObjectID.stall))&&b.default.includes(t.getSeizePos(),[this.posSys.worldGrid])?t.loadObject(function(o){e.node.parent=o.getComponent(C.default).nod_inside,e.posSys.parentUID=t.getUID(),e._updateByParent()}):(this.node.parent=d.gm.mainUI.map_object_layer,this.posSys.parentUID="",this._updateByParent()))},S.prototype._updateByParent=function(){var t=p.default.worldGridToPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(d.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)),this.node.x=t.x,this.node.y=t.y},S.prototype.getGrid=function(){return this.posSys.worldGrid},S.prototype.getPosSys=function(){return this.posSys},S.prototype.getGridWidth=function(){return 1},S.prototype.getGridHeight=function(){return 1},S.prototype.showFinger=function(){this.nod_finger&&this.nod_finger.showFinger(!0,!0)},S.prototype._setRoleAni=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),t==this.spine.animation&&!o||this.spine.setAnimation(0,t,e)},S.prototype.showAngry=function(t){void 0===t&&(t=!0),this.spine_face&&(this.spine_face.node.active=t)&&(this.spine_face.setSkin("default"),this.spine_face.setAnimation(0,"angry",!0))},S.prototype.getBoundingBoxNode=function(){return this.nod_boundingBox||(cc.error("not found nod_boundingBox",this.data),this.node)},s([a(sp.Skeleton)],S.prototype,"spine",void 0),s([a(sp.Skeleton)],S.prototype,"spine_face",void 0),s([a(cc.Node)],S.prototype,"nod_touch",void 0),s([a(cc.Node)],S.prototype,"nod_foot",void 0),s([a(cc.Node)],S.prototype,"nod_bubble",void 0),s([a(cc.Sprite)],S.prototype,"spr_icon",void 0),s([a(_.default)],S.prototype,"item_bubble",void 0),s([a(D.default)],S.prototype,"nod_finger",void 0),s([a(m.default)],S.prototype,"moveByLine",void 0),s([a(cc.Node)],S.prototype,"nod_boundingBox",void 0),i=s([i],S),r.default=i,cc._RF.pop()},{}],ButtonUtils:[function(t,e,o){"use strict";cc._RF.push(e,"38628zfpO5IVLCLDUC98N7R","ButtonUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("NodeUtils");function r(){}r.setInteractAble=function(t,e){t.interactable=e=void 0===e||e,a.default.setGray(t.node,!e)},n=r,i.default=n,cc._RF.pop()},{}],BuyTicketItem:[function(t,e,o){"use strict";cc._RF.push(e,"2d3d7CRsRpGUoVctXCtJo+/","BuyTicketItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("PropMgr"),d=i("ListItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_prop_count=null,t.lbl_consume_count=null,t.prop_count=0,t.need=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.default),h.prototype.setData=function(t){this.prop_count=t,t=u.default.getConfigByPropID(p.CommonPropID.ticket).diamond_translate,this.need=t*this.prop_count,this.updateUI()},h.prototype.updateUI=function(){this.lbl_prop_count.string="X"+this.prop_count,this.lbl_consume_count.string=this.need+""},h.prototype.onBtnBuy=function(){u.default.tryToBuy({file:p.ThingType.normal,id:p.CommonPropID.ticket,num:this.prop_count},{file:p.ThingType.normal,id:p.CommonPropID.diamond,num:this.need},!0)},s([a(cc.Label)],h.prototype,"lbl_prop_count",void 0),s([a(cc.Label)],h.prototype,"lbl_consume_count",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],CartoonUI:[function(t,e,o){"use strict";cc._RF.push(e,"43477N9ZRlDf4uA0d4L4kzu","CartoonUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameModule"),u=i("AniUtils"),d=i("NetUtils"),h=i("GameMgr"),_=i("PreloadHelper");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_cartoon_1=null,t.nod_cartoon_2=null,t.nod_tip=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=p.default),f.prototype.onLoad=function(){l.prototype.onLoad.call(this),d.ReportData.instance.report_point(10021)},f.prototype.onEnable=function(){var t=this;this.nod_cartoon_1.active=!0,this.nod_cartoon_2.active=!1,this.nod_tip.active=!1,h.gm.ui.showTopBlock(!0,0);var e=this.nod_cartoon_1.getComponent(cc.Animation);u.default.playAni(e,"cartoon_01_a",function(){h.gm.ui.showTopBlock(!1,0),t.nod_tip.active=!0,t.node.on(cc.Node.EventType.TOUCH_END,function(){t.nod_tip.active=!1,h.gm.ui.showTopBlock(!0,0),u.default.playAni(e,"cartoon_01_b",function(){t.playCartoon2()})}),t.scheduleOnce(function(){t.nod_cartoon_1.active&&t.playCartoon2()},2)}),_.default.getInstance().preloadOnCartoom()},f.prototype.playCartoon2=function(){var t=this,e=this.nod_cartoon_2.getComponent(cc.Animation);this.nod_cartoon_1.active=!1,this.nod_cartoon_2.active=!0,u.default.playAni(e,"cartoon_02_a",function(){t.nod_tip.active=!0,h.gm.ui.showTopBlock(!1),t.node.on(cc.Node.EventType.TOUCH_END,function(){t.nod_tip.active=!1,h.gm.ui.showTopBlock(!0,0),u.default.playAni(e,"cartoon_02_b",function(){t.goToRegist()})}),t.scheduleOnce(function(){t.goToRegist()},2)})},f.prototype.goToRegist=function(){var t=this;h.gm.ui.showTopBlock(!1),h.gm.ui.showModule(h.gm.const.RegisterUI,function(){t.closeMe()})},s([a(cc.Node)],f.prototype,"nod_cartoon_1",void 0),s([a(cc.Node)],f.prototype,"nod_cartoon_2",void 0),s([a(cc.Node)],f.prototype,"nod_tip",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],CashierItem:[function(t,e,o){"use strict";cc._RF.push(e,"35989/fwCpGb5J8lbKae3NL","CashierItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.nod_check=null,t.data=null,t.maxCount=0,t.staff=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.default),u.prototype.setData=function(){},u.prototype.updateUI=function(){},u.prototype.onTouchItem=function(){},s([a(cc.Sprite)],u.prototype,"spr_icon",void 0),s([a(cc.Node)],u.prototype,"nod_check",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],CashierMgr:[function(t,e,o){"use strict";cc._RF.push(e,"242ffekF9hMMY4K+lXMrorr","CashierMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("Formula"),p=i("MapDataHelper"),u=i("Singleton"),d=i("StaffViewMgr"),h=i("ShelfMgr"),_=i("ShelfOrderData"),f=i("BusinessmanMgr");function g(){var t=null!==c&&c.apply(this,arguments)||this;return t.checkDeskTime=0,t.checkCashierTime=0,t}r(g,c=u.default),g.prototype.checkAutoSell=function(t){var e;this.checkCashierTime+=t,this.checkCashierTime>=this.getCheckCashierCD()&&(this.checkCashierTime=0,(e=_.default.getInstance().cashier_orders[0])&&((t=this.getViewByOrder(e))?t.data.pay():cc.warn("not found business view",e)))},g.prototype.getCheckCashierCD=function(){var t=h.default.getInstance().getShelfUnlockConifg(s.SpecialObjectID.shelf_cash_box);if(!d.StaffViewMgr.getInstance().getShelfCashier())return t.function_time||20;var e=p.default.getDataByID(s.SpecialObjectID.shelf_cash_box);return l.Formula.getStaffCashierTime(e,t.auto_function_time)},g.prototype.getViewByOrder=function(t){for(var e in f.BusinessmanMgr.getInstance().businessmanView)if((e=f.BusinessmanMgr.getInstance().businessmanView[e])&&e.data&&e.data.order&&t==e.data.order)return e},r=g,a.default=r,cc._RF.pop()},{}],CashierUI:[function(t,e,o){"use strict";cc._RF.push(e,"6ef50CUvy5L5IhGNC8gLnrl","CashierUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("List"),d=i("GameModule"),h=i("GuideMgr"),_=i("NodDecoration");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_bottom=null,t.list=null,t.lbl_attr=null,t.spine_npc=null,t.nodDecoration=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=d.default),f.prototype.onEnable=function(){this.uid=p.gm.ui.get_module_args(p.gm.const.CashierUI.key),this.nodDecoration.setData(this.uid),this.nod_bottom.active=!1,this.updateUI()},f.prototype.onDisable=function(){},f.prototype.updateUI=function(){},f.prototype.onRenderList=function(){},f.prototype.onTouchSlot=function(){this.nod_bottom.active=!0,h.default.getInstance().showTaskFinger(1037,2)},f.prototype.onCloseBottom=function(){this.nod_bottom.active=!1},s([a(cc.Node)],f.prototype,"nod_bottom",void 0),s([a(u.default)],f.prototype,"list",void 0),s([a(cc.Label)],f.prototype,"lbl_attr",void 0),s([a(sp.Skeleton)],f.prototype,"spine_npc",void 0),s([a(_.default)],f.prototype,"nodDecoration",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],CashierView:[function(t,e,o){"use strict";cc._RF.push(e,"ef16cCM35dFK4L4KwBVxPE1","CashierView");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,s.requireComponent,r(l,c=cc.Component),i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],CattleHouse:[function(t,e,o){"use strict";cc._RF.push(e,"6234bX/oVBFe7bXLG1BUecW","CattleHouse");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("AccessMgr"),p=a("Const"),u=a("GameMgr"),d=a("BreedData"),h=a("PropMgr"),_=a("NetUtils"),f=a("BreedMgr"),g=a("Cattle"),y=a("CommonAnimalHouse"),m=a("MapObject");function v(){var t=null!==s&&s.apply(this,arguments)||this;return t.foodMax=1,t}a=(n=cc._decorator).ccclass,n.property,c(v,s=y.default),v.prototype.start=function(){u.gm.pool.init(u.gm.const.Cattle.bundleName,u.gm.const.Cattle.loadPath,g.default),this.mapObject=this.getComponent(m.default);for(var t=0,e=this.mapObject.data.breedData.animals;t<e.length;t++){var o=e[t];this.createAnimal(o)}},v.prototype.updateUI=function(){this.config=f.default.getInstance().getConfig(this.mapObject.objectID,this.mapObject.data.lv),this.config?(this.foodMax=f.default.getInstance().getFoodMax(this.mapObject.data),this.mapObject.data.breedData.updateEatFood()):cc.error("not found config",this.mapObject.objectID,this.mapObject.data)},v.prototype.createAnimal=function(t){var e=this;u.gm.pool.async_get(u.gm.const.Cattle.bundleName,u.gm.const.Cattle.loadPath,g.default,function(o){e.nod_ani_layer.addChild(o.node),o.setData(t,e.nod_pos_layer,e.getComponent(m.default).data)})},v.prototype.onBtnBuy=function(){var t;this.mapObject.data.breedData.animals.length<f.default.getInstance().getAnimalMax(this.mapObject.data)?h.default.tryConsume([{id:p.CommonPropID.coin,num:this.config.animal_cost_money}])&&(u.gm.ui.showNotice("\u8d2d\u4e70\u6210\u529f"),(t=d.BreedAnimalData.create(this.config)).cur_energy=0,this.mapObject.data.buyAnimal(t),this.createAnimal(t),this.mapObject.objectID==p.SpecialObjectID.Milk_Cow?_.ReportData.instance.report_point(100005,41000005):this.mapObject.objectID==p.SpecialObjectID.Ox&&_.ReportData.instance.report_point(100005,41000007)):u.gm.ui.showNotice("\u6570\u91cf\u5df2\u8fbe\u4e0a\u9650\uff0c\u65e0\u6cd5\u8d2d\u4e70\uff0c\u8bf7\u5347\u7ea7\u5efa\u7b51")},v.prototype.onBtnReplenish=function(){var t=f.default.getInstance().getFoodMax(this.mapObject.data);this.mapObject.data.getCurEnergy();var e=t-this.mapObject.data.getCurEnergy(),o=(e=Math.max(e,0),h.default.getConfigByPropID(this.config.animal_food_id.id));return o.energy?(t=Math.ceil(e/o.energy))<=0?(u.gm.ui.showNotice("\u4e0d\u9700\u8981\u8865\u5145\u9972\u6599"),void l.default.getInstance().dealByItemID(this.config.animal_food_id.id)):void((e=h.default.getPropCount(this.config.animal_food_id.id))<=0?l.default.getInstance().dealByItemID(this.config.animal_food_id.id):(t=Math.min(e,t),h.default.tryConsumeThing([{file:p.ThingType.normal,id:this.config.animal_food_id.id,num:t}])&&(this.mapObject.data.breedData.addEnergy(o.energy*t),this.mapObject.objectID==p.SpecialObjectID.Milk_Cow?_.ReportData.instance.report_point(100005,41000006):this.mapObject.objectID==p.SpecialObjectID.Ox&&_.ReportData.instance.report_point(100005,41000008)))):(u.gm.ui.showNotice("\u914d\u7f6e\u51fa\u9519\uff0c\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a"),void cc.error("\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a"))},v.prototype.update=function(){},v.prototype.getAnimal=function(t){for(var e=0,o=this.nod_ani_layer.children;e<o.length;e++){var n=o[e].getComponent(g.default);if(n&&n.data.index==t)return n}},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],v),r.default=a,cc._RF.pop()},{}],Cattle:[function(t,e,o){"use strict";cc._RF.push(e,"dfa0b2PdntE7bZ6+digl4p/","Cattle");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("AssetMgr"),f=i("NodePoolItem"),g=i("MathUtils"),y=i("Vec2Utils"),m=i("TaskRecordData");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_tip_pos=null,t.data=null,t.initScale=.6,t.maxScale=1,t.lastScale=0,t.playingAni=!1,t.bigActions=["standby","sleep","eat"],t.posNodes=[],t.isSmall=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=f.NodePoolItem),v.prototype.onEnable=function(){this.spine.setCompleteListener(this.onSpineComplet.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},v.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},v.prototype.setData=function(t,e,o){var n=this;this.data=t,this.objectData=o,this.posNodes=e.children,this.spine.skeletonData=null,30044==this.data.id?_.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"ani/animal/cow",sp.SkeletonData,function(t){n.spine.skeletonData=t,n.spine.setSkin("default"),n.playAni("standby",!0),t=n.posNodes[g.default.randomNum(0,n.posNodes.length-1)],n.node.position=t.position}):_.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"ani/animal/cow_yellow",sp.SkeletonData,function(t){n.spine.skeletonData=t,n.spine.setSkin("default"),n.playAni("standby",!0),t=n.posNodes[g.default.randomNum(0,n.posNodes.length-1)],n.node.position=t.position})},v.prototype.updateUI=function(){},v.prototype.update=function(){this.data&&this.spine.skeletonData&&this._updateAni()},v.prototype._updateAni=function(){var t=(this.data.getPeriodTime()-this.data.getLeftTime())/this.data.getPeriodTime();this.lastScale=this.node.scale,this.node.scale=this.initScale+(this.maxScale-this.initScale)*t,this.node.scale<.8?this.playNormalAni():1==t?this.spine.setAnimation(0,"brood",!0):this.lastScale<.8?this.playAni("standby",!1):this.playingAni||(this.isSmall=!1,this.playNormalAni())},v.prototype.playNormalAni=function(){this.playingAni||(this.playingAni=!0,this.playNextAni())},v.prototype.onSpineComplet=function(t){t.animation.name,this.playingAni=!1,this.playNormalAni()},v.prototype.playNextAni=function(){var t,e="";this.isSmall||(t=g.default.randomNum(0,this.bigActions.length-1),e=this.bigActions[t]),"small_walk"==e||"walk"==e||this.playAni(e,!1)},v.prototype.walk=function(t){var e=this,o=this.getRandomPosNode(),n=y.default.getDistance(cc.v2(this.node.x,this.node.y),cc.v2(o.x,o.y));o.x>this.node.x?this.spine.node.scaleX=-1*Math.abs(this.spine.node.scaleX):this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),cc.tween(this.node).to(n/t,{x:o.x,y:o.y}).call(function(){e.playingAni=!1,e.playNextAni()}).start()},v.prototype.getRandomPosNode=function(){return this.posNodes[g.default.randomNum(0,this.posNodes.length-1)]},v.prototype.onTouchChicken=function(){var t=this;if(this.data.canHarvest()&&!this.data.isCatch){var e=this.objectData.breedData.catch(this.data.index);if(e){e=e.productions,p.default.fly(this.node,h.default.propItemToGainThing(e)),d.gm.pool.put(this.node);for(var o=0,n=e;o<n.length;o++){var i=n[o];m.default.getInstance().addHarvestRecord(i.id,1),m.default.getInstance().addHarvestCountRecord(i.id,i.num)}}}else{var a=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.nod_tip_pos&&(a=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),d.gm.ui.showModule(d.gm.const.LandTipNew,function(e){e.setData(t.data),e.updatePos(a)})}},v.prototype.playAni=function(t,e){this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],v.prototype,"spine",void 0),s([a(cc.Node)],v.prototype,"nod_tip_pos",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],ChannelConst:[function(t,e,o){"use strict";cc._RF.push(e,"87015xXYJ9CqLrZk0ic1H49","ChannelConst");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.ChannelTypeEnum=void 0,(n=n.ChannelTypeEnum||(n.ChannelTypeEnum={}))[n.CHANNEL_TYPE_DEFAULT=1]="CHANNEL_TYPE_DEFAULT",n[n.CHANNEL_TYPE_WECHAT=2]="CHANNEL_TYPE_WECHAT",n[n.CHANNEL_TYPE_TT_GAME=3]="CHANNEL_TYPE_TT_GAME",n[n.CHANNEL_TYPE_QQ_GAME=4]="CHANNEL_TYPE_QQ_GAME",n[n.CHANNEL_TYPE_OPPO_GAME=5]="CHANNEL_TYPE_OPPO_GAME",n[n.CHANNEL_TYPE_VIVO_GAME=6]="CHANNEL_TYPE_VIVO_GAME",n[n.CHANNEL_TYPE_HW_GAME=10]="CHANNEL_TYPE_HW_GAME",n[n.CHANNEL_TYPE_OHAYOO=8]="CHANNEL_TYPE_OHAYOO",n[n.CHANNEL_TYPE_JULIANG=7]="CHANNEL_TYPE_JULIANG",n[n.CHANNEL_TYPE_IPHONE=13]="CHANNEL_TYPE_IPHONE",n[n.CHANNEL_TYPE_IPAD=13]="CHANNEL_TYPE_IPAD",n[n.CHANNEL_TYPE_TAPTAP=7]="CHANNEL_TYPE_TAPTAP",n[n.CHANNEL_TYPE_NODEF1=9]="CHANNEL_TYPE_NODEF1",n[n.CHANNEL_TYPE_NODEF2=11]="CHANNEL_TYPE_NODEF2",n[n.CHANNEL_TYPE_GOOGLE=12]="CHANNEL_TYPE_GOOGLE",cc._RF.pop()},{}],ChannelManager:[function(t,e,o){"use strict";cc._RF.push(e,"0174fQheRVHkqw/A0YxAtGj","ChannelManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.ChannelManager=i.REWARD_VIDEO_AD_RESULT=i.REWARD_VIDEO_AD_TYPE=i.BANNER_AD_TYPE=void 0;var a,r,c=n("QQMiniGame"),s=n("TTMiniGame"),l=n("WXMiniGame"),p=n("DWMiniGame "),u=n("GameMgr"),d=n("VIVOMiniGame"),h=n("OPPOMiniGame"),_=n("SDKManager"),f=n("ChuanShanJiaNativeGame"),g=n("HWGame"),y=n("Utils"),m=n("ChannelConst"),v=n("Const"),b=n("DataManager"),I=n("AppConfig"),D=n("EventManager");function C(){this._is_fenghao=!1,this.unsave_openid_list=["oka485bdf_fyXRH1InNlu7HRcD9g","test117","oka485V7EweOeBraI4ZYv8DbZCYA"],this._ios_suc_call_back=null,this._call_back=null,this._pay_id="",this._rmb="",this._recharge_id=0,this.lock_call_back=null,this.game_id={google:"1338",233:"1311",taptap:"1245",juliang:"1273",ios:"1303",hykb:"1310",xiaomi:"1312",vivo:"1313",oppo:"1314",huawei:"1315",4399:"1320"},this.login_type={google:"google",233:"233",taptap:"tap",juliang:"juliang",ios:"ios",hykb:"hykb",xiaomi:"xiaomi",vivo:"vivo",oppo:"oppo",huawei:"huawei",4399:"4399"}}(n=i.BANNER_AD_TYPE||(i.BANNER_AD_TYPE={}))[n.ALL=0]="ALL",(n=a=i.REWARD_VIDEO_AD_TYPE||(i.REWARD_VIDEO_AD_TYPE={}))[n.ALL=0]="ALL",n[n.LONG=1]="LONG",n[n.SHORT=2]="SHORT",(n=r=i.REWARD_VIDEO_AD_RESULT||(i.REWARD_VIDEO_AD_RESULT={}))[n.PULL_UP=1]="PULL_UP",n[n.REWARD=2]="REWARD",Object.defineProperty(C,"instance",{get:function(){return this._instance||(this._instance=new C),this._instance},enumerable:!1,configurable:!0}),C.prototype.weiXin_Login=function(t){var e=this.get_channel_name();e!=C.TAP_TAP_GAME&&e!=C.IPHONE_GAME&&e!=C.IPAD_GAME||f.ChuanShanJiaNativeGame.instance.weiXin_Login(t)},Object.defineProperty(C.prototype,"is_fenghao",{get:function(){return this._is_fenghao},set:function(t){this._is_fenghao=t},enumerable:!1,configurable:!0}),C.prototype.login_on_rsp=function(t){0!=t.ResultCode||(console.log("msg.data:"+t.data),u.gm.data.open_id=t.data.open_id,console.log("gm.data.open_id:"+u.gm.data.open_id),u.gm.data.token=t.data.token,u.gm.data.uid=t.data.uid,this._is_fenghao=!1,0<t.data.if_block&&(this._is_fenghao=!0),console.log("login_on_rsp:if_block="+t.data.if_block),D.default.emit(v.GameEvent.login_done),u.gm.channel.get_channel_name()!=C.WX_GAME)||(t=u.gm.channel.getShareOpenId())&&""!=t&&t!=u.gm.data.uid&&(console.log("share_open_id="+t),y.Utils.server_http_request(null,this,u.gm.channel.getServerUrl()+"user/upload_player_data_to_inviter/upload?uid="+u.gm.data.uid+"&token="+u.gm.data.token+"&open_id="+u.gm.data.open_id+"&channel_id="+u.gm.channel.get_channel_id().toString()+"&nick_name=nick_name&update_percent=0&inviter_uid="+t))},C.prototype.get_is_save=function(){var t=this.get_channel_name();return t==C.TT_GAME||t==C.QQ_GAME||t==C.WX_GAME||t==C.DW_GAME||t==C.HW_GAME||t==C.VIVO_GAME||t==C.OPPO_GAME||t==C.KKMH_GAME||t==C.MZ_GAME||t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME||!(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)},C.prototype.get_is_login=function(){var t=this.get_channel_name();return t==C.TT_GAME||t==C.QQ_GAME||t==C.WX_GAME||t==C.DW_GAME||t==C.HW_GAME||t==C.VIVO_GAME||t==C.OPPO_GAME||t==C.KKMH_GAME||t==C.MZ_GAME||t!=C.TAP_TAP_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)},C.prototype.get_is_show_proposal=function(){return this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.get_is_show_proposal()},C.prototype.create_wx_button=function(){this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.create_wx_button()},C.prototype.destroy_wx_button=function(){this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.destory_wx_button()},C.prototype.report_item_unvalid=function(){},C.prototype.getRechargeSucAndiordRsp=function(t){console.log("getRechargeSucAndiordRsp ResultCode="+t.ResultCode),0==t.ResultCode?(this._call_back&&this._call_back(),u.gm.data.start_data.order_id_list.order_id="",u.gm.data.start_data.order_id_list.recharge_id=0,u.gm.data.start_data.async_write_data()):u.gm.ui.showNotice(t.msg)},C.prototype.sendRechargeSucToAndiordServer=function(){console.log("sendRechargeSucToAndiordServer"),y.Utils.server_http_request(this.getRechargeSucAndiordRsp,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_android/verify?uid=%s&token=%s&order_id=%s",u.gm.data.uid,u.gm.data.token,u.gm.data.start_data.order_id_list.order_id)},C.prototype.getAndiordRechargeRsp=function(t){var e=this;console.log("sendRechargeToAndriodServer ResultCode="+t.ResultCode),-2==t.ResultCode?(u.gm.data.start_data.order_id_list.order_id=t.data,u.gm.data.start_data.async_write_data(),l.WXMiniGame.instance.recharge(this._rmb,function(){console.log("sendRechargeToAndriodServer recharge"),e.sendRechargeToAndriodServer(e._pay_id,e._rmb)})):0==t.ResultCode?(console.log("sendRechargeToAndriodServer _call_back"),this._call_back&&this._call_back(),u.gm.data.start_data.order_id_list.order_id="",u.gm.data.start_data.order_id_list.recharge_id=0,u.gm.data.start_data.async_write_data()):u.gm.ui.showNotice(t.msg)},C.prototype.sendRechargeToAndriodServer=function(t,e){console.log("sendRechargeToAndriodServer"),y.Utils.server_http_request(this.getAndiordRechargeRsp,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_android/prepay?token=%s&uid=%s&open_id=%s&nick_name=%s&pay_id=%s&desc=%s&rmb=%s&amount=%s",u.gm.data.token,u.gm.data.uid,u.gm.data.open_id,u.gm.data.start_data.nick_name,t,t,e,e*u.gm.const.RECHARGE_RATION+"")},C.prototype.getRechargeSucIosRsp=function(t){console.log("getIosRechargeRsp getRechargeSucIosRsp ResultCode "+t.ResultCode),0==t.ResultCode&&(1==t.data.pay_to_game_status&&(u.gm.data.start_data.order_id_list.recharge_id=0,u.gm.data.start_data.order_id_list.order_id="",u.gm.data.start_data.async_write_data()),this._ios_suc_call_back&&this._ios_suc_call_back())},C.prototype.sendRechargeSucToIosServer=function(t){console.log("getIosRechargeRsp sendRechargeSucToIosServer "),this._ios_suc_call_back=t,y.Utils.server_http_request(this.getRechargeSucIosRsp,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_ios/verify?uid=%s&token=%s&order_id=%s",u.gm.data.uid,u.gm.data.token,u.gm.data.start_data.order_id_list.order_id)},C.prototype.getLoginRechargeSucIosRsp=function(t){var e,o;if(console.log("getIosRechargeRsp getRechargeSucIosRsp ResultCode "+t.ResultCode),0==t.ResultCode){for(o in(e=u.gm.channel.get_is_new_recharge_edtion()?u.gm.config.get_config_data("GpRechargeConfigData"):u.gm.config.get_config_data("RechargeConfigData")).data)if(e.data[o].product_id==t.data.pay_id){u.gm.data.start_data.add_recharge_reward(e.data[o]),u.gm.data.start_data.order_id_list.recharge_id=0,u.gm.data.start_data.order_id_list.order_id="",u.gm.data.start_data.async_write_data();break}}else u.gm.ui.showNotice(t.msg)},C.prototype.sendLoginRechargeSucToIosServer=function(t,e){console.log("getIosRechargeRsp sendRechargeSucToIosServer "),this._ios_suc_call_back=e,y.Utils.server_http_request(this.getLoginRechargeSucIosRsp,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_ios/verify?uid=%s&token=%s&order_id=%s",u.gm.data.uid,u.gm.data.token,t)},C.prototype.getIosRechargeRsp=function(){},C.prototype.sendRechargeToIosServer=function(t,e){console.log("getIosRechargeRsp sendRechargeToIosServer"),y.Utils.server_http_request(this.getIosRechargeRsp,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_ios/prepay?token=%s&uid=%s&open_id=%s&nick_name=%s&pay_id=%s&desc=%s&rmb=%s&amount=%s",u.gm.data.token,u.gm.data.uid,u.gm.data.open_id,u.gm.data.start_data.nick_name,t,t,e,e*u.gm.const.RECHARGE_RATION+"")},C.prototype.getIosRechargeRspByKefu=function(){},C.prototype.sendRechargeToIosServerByKefu=function(t,e){console.log("getIosRechargeRsp sendRechargeToIosServer"),y.Utils.server_http_request(this.getIosRechargeRspByKefu,this,u.gm.channel.getServerUrl()+"pay/wechat_pay_ios/prepay?token=%s&uid=%s&open_id=%s&nick_name=%s&pay_id=%s&desc=%s&rmb=%s&amount=%s",u.gm.data.token,u.gm.data.uid,u.gm.data.open_id,u.gm.data.start_data.nick_name,t,t,e,e*u.gm.const.RECHARGE_RATION+"")},C.prototype.getServerUrl=function(){return I.default.ServerMhtRequestUrl},C.prototype.recharge=function(){},C.prototype.get_is_diamond=function(){var t=this.get_channel_name();return t!=C.TT_GAME&&t!=C.QQ_GAME&&t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME&&(t!=C.TAP_TAP_GAME?t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!1):"ohayoo"!=u.gm.data.main_data.channelName&&("tap-tap-game"==u.gm.data.main_data.channelName?(t="","hykb"==(t=_.SDKManager.instance.getChannelAdName?_.SDKManager.instance.getChannelAdName():t)||"taptap"==t):void 0))},C.prototype.get_is_new_recharge_edtion=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME?"tap-tap-game"==_.SDKManager.instance.getChannelName()&&"google"==_.SDKManager.instance.getChannelAdName():t!=C.TT_GAME&&t!=C.QQ_GAME&&t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)},C.prototype.get_is_google=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME?"tap-tap-game"==_.SDKManager.instance.getChannelName()&&"google"==_.SDKManager.instance.getChannelAdName():t!=C.TT_GAME&&t!=C.QQ_GAME&&t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!1)},C.prototype.get_is_taptap=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME?"tap-tap-game"==_.SDKManager.instance.getChannelName()&&"taptap"==_.SDKManager.instance.getChannelAdName():t!=C.TT_GAME&&t!=C.QQ_GAME&&t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)},C.prototype.get_is_safe_notice=function(){var t=this.get_channel_name();return t!=C.TT_GAME&&(t==C.QQ_GAME||t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&(t==C.VIVO_GAME||t==C.OPPO_GAME||t==C.TAP_TAP_GAME||t!=C.KKMH_GAME&&t!=C.MZ_GAME&&(t==C.IPHONE_GAME||t==C.IPAD_GAME||!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)))},C.prototype.get_is_user_safe_notice=function(){var t=this.get_channel_name();return t!=C.TT_GAME&&(t==C.QQ_GAME||t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.TAP_TAP_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID))},C.prototype.get_is_show_setui_update_btn=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_is_show_set_ui_update():t==C.QQ_GAME?c.QQMiniGame.instance.get_is_show_set_ui_update():t==C.WX_GAME?l.WXMiniGame.instance.get_is_show_set_ui_update():t==C.DW_GAME||(t==C.HW_GAME?g.HWGame.instance.get_is_show_set_ui_update():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_is_show_set_ui_update():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_is_show_set_ui_update():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_is_show_set_ui_update():t==C.KKMH_GAME||t==C.MZ_GAME||(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!0))},C.prototype.get_is_recharge=function(){var t=this.get_channel_name();return t!=C.TT_GAME&&t!=C.QQ_GAME&&(t==C.WX_GAME?l.WXMiniGame.instance.getIsRecharge():t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&(t==C.TAP_TAP_GAME?f.ChuanShanJiaNativeGame.instance.getIsRecharge():t!=C.KKMH_GAME&&t!=C.MZ_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)))},C.prototype.get_is_manual_save=function(){var t=this.get_channel_name();return t!=C.TT_GAME&&t!=C.QQ_GAME&&t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&(t==C.TAP_TAP_GAME?this.get_is_server_cloud():t!=C.KKMH_GAME&&t!=C.MZ_GAME&&(t==C.IPHONE_GAME||t==C.IPAD_GAME?this.get_is_server_cloud():(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!1)))},C.prototype.get_data_code_is_show=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_data_code_is_show():t==C.QQ_GAME?c.QQMiniGame.instance.get_data_code_is_show():t==C.WX_GAME?l.WXMiniGame.instance.get_data_code_is_show():t!=C.DW_GAME&&(t==C.HW_GAME?g.HWGame.instance.get_data_code_is_show():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_data_code_is_show():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_data_code_is_show():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_data_code_is_show():t!=C.KKMH_GAME&&t!=C.MZ_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID))},C.prototype.get_ios_appStore_id=function(){var t=this.get_channel_name();return t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_ios_appStore_id():void 0},C.prototype.get_is_server_cloud=function(){var t=this.get_channel_name();return t!=C.TAP_TAP_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME||f.ChuanShanJiaNativeGame.instance.get_is_server_cloud()},C.prototype.get_is_show_nick_name=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_is_show_nick_name():t==C.QQ_GAME?c.QQMiniGame.instance.get_is_show_nick_name():t==C.WX_GAME?l.WXMiniGame.instance.get_is_show_nick_name():t==C.DW_GAME||(t==C.HW_GAME?g.HWGame.instance.get_is_show_nick_name():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_is_show_nick_name():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_is_show_nick_name():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_is_show_nick_name():t==C.KKMH_GAME||t==C.MZ_GAME||(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!0))},C.prototype.get_is_show_active_btn=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_is_show_active_btn():t==C.QQ_GAME?c.QQMiniGame.instance.get_is_show_active_btn():t==C.WX_GAME?l.WXMiniGame.instance.get_is_show_active_btn():t!=C.DW_GAME&&(t==C.HW_GAME?g.HWGame.instance.get_is_show_active_btn():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_is_show_active_btn():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_is_show_active_btn():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_is_show_active_btn():t==C.KKMH_GAME||t==C.MZ_GAME||(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),!0))},C.prototype.get_praise_pecent=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_praise_and_pecent():t==C.QQ_GAME?c.QQMiniGame.instance.get_praise_and_pecent():t==C.WX_GAME?l.WXMiniGame.instance.get_praise_and_pecent():t==C.DW_GAME?60:t==C.HW_GAME?g.HWGame.instance.get_praise_and_pecent():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_praise_and_pecent():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_praise_and_pecent():t==C.TAP_TAP_GAME?f.ChuanShanJiaNativeGame.instance.get_praise_and_pecent():t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_praise_ios_pecent():(t==C.KKMH_GAME||t==C.MZ_GAME||cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),60)},C.prototype.get_is_show_qq_copy=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_qq_copy_is_show():t==C.QQ_GAME?c.QQMiniGame.instance.get_qq_copy_is_show():t==C.WX_GAME?l.WXMiniGame.instance.get_qq_copy_is_show():t!=C.DW_GAME&&(t==C.HW_GAME?g.HWGame.instance.get_qq_copy_is_show():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_qq_copy_is_show():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_qq_copy_is_show():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_qq_copy_is_show():t!=C.KKMH_GAME&&t!=C.MZ_GAME&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID))},C.prototype.get_is_show_taptap_ad=function(){return this.get_channel_name()==C.TAP_TAP_GAME&&f.ChuanShanJiaNativeGame.instance.get_get_is_show_taptap_ad()},C.prototype.get_is_real_name=function(){var t=this.get_channel_name();return t!=C.TAP_TAP_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME||f.ChuanShanJiaNativeGame.instance.get_is_real_name()},C.prototype.get_is_praise=function(){var t=this.get_channel_name();return(t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME)&&f.ChuanShanJiaNativeGame.instance.get_is_praise()},C.prototype.login_on_bind_rsp=function(t){0==t.ResultCode&&(u.gm.data.bind_uid=t.data.uid,u.gm.data.bind_open_id=t.data.open_id,u.gm.data.bind_token=t.data.token,u.gm.data.uid=t.data.uid,u.gm.data.open_id=t.data.open_id,u.gm.data.token=t.data.token,console.log("login_on_bind_uid_rsp login_on_bind_rsp:bind_uid="+t.data.uid+"&bind_open_id="+t.data.open_id+"bind_token="+t.data.token),0<t.data.if_block&&(this._is_fenghao=!0),console.log("login_on_rsp:if_block="+t.data.if_block),D.default.emit(v.GameEvent.login_done))},C.prototype.login_on_bind_uid_rsp=function(t){0==t.ResultCode&&(u.gm.data.token=t.data.token,u.gm.data.start_data.token=t.data.token,u.gm.data.start_data.async_write_data(),console.log("login_on_bind_uid_rsp:token="+t.data.token))},C.prototype.bind_device_to_uid=function(){var t=this.get_channel_id();console.log("login_on_bind_uid_rsp:bind_device_to_uid:code="+u.gm.data.open_id+"bind_open_id="+u.gm.data.bind_open_id+"uid="+u.gm.data.bind_uid),y.Utils.server_http_request(this.login_on_bind_uid_rsp,this,u.gm.channel.getServerUrl()+"user/login?code=%s&channel_id=%s&bind_username=%s&bind_uid=%s&bind_channel=%s&if_anonymous=1",u.gm.data.open_id,t+"",u.gm.data.bind_open_id,u.gm.data.bind_uid,t+"")},C.prototype.getShareOpenId=function(){return this.get_channel_name()==C.WX_GAME?l.WXMiniGame.instance.getShareOpenId():""},C.prototype.get_channel_id=function(){var t,e=m.ChannelTypeEnum.CHANNEL_TYPE_DEFAULT,o=(e=b.DataManager.instance.is_test?m.ChannelTypeEnum.CHANNEL_TYPE_TAPTAP:m.ChannelTypeEnum.CHANNEL_TYPE_DEFAULT,this.get_channel_name());return o==C.WX_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_WECHAT:o==C.TT_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_TT_GAME:o==C.QQ_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_QQ_GAME:o==C.OPPO_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_OPPO_GAME:o==C.VIVO_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_VIVO_GAME:o==C.HW_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_HW_GAME:o==C.TAP_TAP_GAME?"ohayoo"==(t=_.SDKManager.instance.getChannelName())?e=m.ChannelTypeEnum.CHANNEL_TYPE_OHAYOO:"tap-tap-game"==t&&(e="juliang"==_.SDKManager.instance.getChannelAdName()?m.ChannelTypeEnum.CHANNEL_TYPE_JULIANG:"google"==_.SDKManager.instance.getChannelAdName()?m.ChannelTypeEnum.CHANNEL_TYPE_GOOGLE:m.ChannelTypeEnum.CHANNEL_TYPE_TAPTAP):o==C.IPHONE_GAME?e=m.ChannelTypeEnum.CHANNEL_TYPE_IPHONE:o==C.IPAD_GAME&&(e=m.ChannelTypeEnum.CHANNEL_TYPE_IPAD),e},C.prototype.app_login=function(t){var e=this.get_channel_id();console.log("login_on_rsp:app_login"),u.gm.data.report_login_value=17,y.Utils.server_http_request(this.login_on_bind_rsp,this,u.gm.channel.getServerUrl()+"user/login?code=%s&channel_id=%s&if_anonymous=1",t,e+"")},C.prototype.login_call_back=function(){var t;u.gm.data.report_login_value=11,u.gm.data.device_id&&""!=u.gm.data.device_id?(this.app_login(u.gm.data.device_id),this.lock_call_back&&this.lock_call_back()):(u.gm.data.report_login_value=12,this.lock_call_back&&this.lock_call_back(),t=_.SDKManager.instance.getJsIdfa(),console.log("report_login has_device_id="+t),t&&""!=t&&"undefined"!=t?(u.gm.data.report_login_value=13,u.gm.data.device_id=t,this.app_login(t)):(u.gm.data.report_login_value=14,u.gm.data.device_id=Date.now()+""+y.Utils.random(!0,0,1e3),this.app_login(u.gm.data.device_id)))},C.prototype.report_login=function(t,e){this.get_is_login()&&(u.gm.data.report_login_value=7,this.get_channel_id(),this.login_on_rsp({ResultCode:0,msg:"\u83b7\u53d6\u5230\u7528\u6237\u6570\u636e",data:{uid:"8660",open_id:"test119",nickname:"",coins:2052,data_last_update_time:1684998654,if_block:0,if_bind:0,bind_username:"",bind_uid:0,bind_channel:0,token:"1b60e2eb06ca3389319ac35e88996383"}})),e&&e()},C.prototype.report_logined=function(t,e){var o=this,n=this.get_channel_id();y.Utils.server_http_request(function(t){if(0==t.ResultCode){if(""==u.gm.data.start_data.open_id||u.gm.data.start_data.open_id==t.data.open_id){if(console.log("msg.data:"+t.data),u.gm.data.start_data.open_id=t.data.open_id,console.log("gm.data.open_id:"+u.gm.data.start_data.open_id),u.gm.data.start_data.token=t.data.token,u.gm.data.start_data.uid=t.data.uid,console.log("msg.data.data_last_update_time:"+t.data.data_last_update_time),u.gm.data.start_data.now_save_time=1e3*parseInt(t.data.data_last_update_time),u.gm.data.start_data.bind_uid=t.data.bind_uid,u.gm.data.start_data.async_write_data(),console.log("login_on_bind_uid_rsp:report_logined:this.uid="+t.data.uid+"this.token"+t.data.token+"open_id"+t.data.open_id+"bind_uid="+t.data.bind_uid),u.gm.data.main_data.uid=u.gm.data.start_data.uid,u.gm.data.main_data.open_id=u.gm.data.start_data.open_id,u.gm.data.main_data.token=u.gm.data.start_data.token,u.gm.data.main_data.async_write_data(),u.gm.data.uid=t.data.uid,u.gm.data.token=t.data.token,u.gm.data.open_id=t.data.open_id,u.gm.data.history_gold=t.data.coins,0<t.data.if_block&&!u.gm.const.IS_TEST)return o._is_fenghao=!0,void u.gm.ui.async_show_module(u.gm.const.FENGHAO);u.gm.channel.check_is_app()&&_.SDKManager.instance.setOpenId(t.data.open_id)}e&&e()}else u.gm.ui.showNotice("\u767b\u9646\u5931\u8d25\uff0cerr_ocde="+t.ResultCode)},this,u.gm.channel.getServerUrl()+"user/login?code=%s&channel_id=%s",t,n+"")},C.prototype.check_is_dirty_word=function(t,e){var o=this.get_channel_name();o==C.WX_GAME?l.WXMiniGame.instance.check_is_dirty_word(t,e):o==C.TT_GAME?s.TTMiniGame.instance.check_is_dirty_word(t,e):e(null)},C.prototype.get_edtion=function(){var t=this.get_channel_name();return t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_edtion():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_edtion():t==C.TT_GAME?s.TTMiniGame.instance.get_edtion():t==C.WX_GAME?l.WXMiniGame.instance.get_edtion():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_edtion():t==C.DW_GAME?p.DWMiniGame.instance.get_edtion():t==C.HW_GAME?g.HWGame.instance.get_edtion():u.gm.const.VERSION_NUMBER},C.prototype.check_is_banner=function(){var t=this.get_channel_name();return t==C.VIVO_GAME||t==C.OPPO_GAME||t==C.HW_GAME||t==C.WX_GAME},C.prototype.canvasResize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas),e=i=i||t.designResolution,o=(a=cc.view.getFrameSize()).width,n=a.height,i=o,a=n;n/o>e.height/e.width?(a=n/o*(i=e.width),t.fitHeight=!1,t.fitWidth=!0):(i=720<=(i=(a=e.height)*o/n)?720:i,t.fitHeight=!0,t.fitWidth=!1),n=cc.v2(i,a),u.gm.data.design_resolution=n,t.designResolution=cc.size(i,a),t.node.width=i,t.node.height=a,cc.log("MainVO.designResolution.x:,MainVO.designResolution.y:%s.",JSON.stringify(n))},C.prototype.init=function(t){this.report_login("test119",t)},C.prototype.report_edtion_no=function(){this.get_channel_name(),this.check_is_app()&&_.SDKManager.instance.getVersionCode()},C.prototype.get_user_info=function(t){var e=this.get_channel_name();e==C.TT_GAME?s.TTMiniGame.instance.get_user_info(t):e==C.WX_GAME&&l.WXMiniGame.instance.createUserInfoButton(t)},C.prototype.check_is_app=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME||t==C.IPAD_GAME||t==C.IPHONE_GAME},C.prototype.get_server_time_rsp=function(t){u.gm.data.server_time=Math.floor(Date.now()/1e3),0==t.ResultCode&&null!=t.data&&(u.gm.data.server_time=t.data)},C.prototype.get_server_time=function(){u.gm.const.IS_TEST?u.gm.data.server_time=Math.floor(Date.now()/1e3):y.Utils.server_http_request(this.get_server_time_rsp,this,u.gm.channel.getServerUrl()+"user/get_global_data/get_server_time&token=%s&uid=%s",u.gm.data.token,u.gm.data.uid)},C.prototype.google_report=function(t,e,o,n,i,a,r){var c=this.get_channel_name();(u.gm.const.IS_TEST||c==C.TAP_TAP_GAME&&"google"==_.SDKManager.instance.getChannelAdName())&&((c=new GoogleReportData).eventName=t,""!=e&&(c.paraArray[0]=e,c.paraObjData[0]=i),""!=o&&(c.paraArray[1]=o,c.paraObjData[1]=a),""!=n&&(c.paraArray[2]=n,c.paraObjData[2]=r),c=JSON.stringify(c),console.log("google_report="+c),_.SDKManager.instance.AppsFlyerLogReport(c))},C.prototype.get_channel_name=function(){return C.UNKNOWN},C.prototype.get_app_name=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_app_name():t==C.QQ_GAME?c.QQMiniGame.instance.get_app_name():t!=C.WX_GAME?t==C.DW_GAME?p.DWMiniGame.instance.get_app_name():t==C.HW_GAME?g.HWGame.instance.get_app_name():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_app_name():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_app_name():t==C.TAP_TAP_GAME?C.TAP_TAP_GAME:cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE?C.IPHONE_GAME:cc.sys.isNative&&cc.sys.platform==cc.sys.IPAD?C.IPAD_GAME:t!=C.KKMH_GAME&&t!=C.MZ_GAME?(cc.sys.isNative&&(cc.sys.platform,cc.sys.ANDROID),C.APP_UNKNOWN):void 0:0==C.APP_DS_MAP?l.WXMiniGame.instance.get_app_name():void 0},C.prototype.getChannelUrl=function(){var t=this.get_channel_name(),e="";return t==C.TT_GAME?e=s.TTMiniGame.instance.get_url():t==C.QQ_GAME?e=c.QQMiniGame.instance.get_url():t==C.WX_GAME?0==C.APP_DS_MAP&&(e=l.WXMiniGame.instance.get_url()):t==C.DW_GAME?e=p.DWMiniGame.instance.get_url():t==C.HW_GAME?e=g.HWGame.instance.get_url():t==C.VIVO_GAME?e=d.VIVOMiniGame.instance.get_url():t==C.OPPO_GAME?e=h.OPPOMiniGame.instance.get_url():t==C.TAP_TAP_GAME?e=u.gm.const.IS_GAME_XMCT?"ohayoo"==_.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/panda_android_ohayoo/share.json?"+Math.random().toString():"juliang"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_juliang/share.json?"+Math.random().toString():"233"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_233/share.json?"+Math.random().toString():"hykb"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_hykb/share.json?"+Math.random().toString():"xiaomi"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_xiaomi/share.json?"+Math.random().toString():"vivo"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_vivo/share.json?"+Math.random().toString():"oppo"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_oppo/share.json?"+Math.random().toString():"huawei"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_hwshare.json?"+Math.random().toString():"4399"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_4399/share.json?"+Math.random().toString():"google"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_google/share.json?"+Math.random().toString():"https://leduo.zqygame.com/res/leduo/panda_android/share.json?"+Math.random().toString():"ohayoo"==_.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/09_ohayoo/share.json?"+Math.random().toString():"juliang"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/08_juliang/share.json?"+Math.random().toString():"233"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/05_233/share.json?"+Math.random().toString():"hykb"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/04_hykb/share.json?"+Math.random().toString():"xiaomi"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/07_xiaomi/share.json?"+Math.random().toString():"vivo"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/11_vivo/share.json?"+Math.random().toString():"oppo"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/10_oppo/share.json?"+Math.random().toString():"huawei"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/12_hw/share.json?"+Math.random().toString():"4399"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/06_4399/share.json?"+Math.random().toString():"google"==_.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/51_google/share.json?"+Math.random().toString():"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/01_taptap/share.json?"+Math.random().toString():(cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE||cc.sys.isNative&&cc.sys.platform==cc.sys.IPAD)&&(e=u.gm.const.IS_GAME_XMCT?"https://leduo.zqygame.com/res/leduo/panda_ios/share.json?"+Math.random().toString():"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/02_ios/share.json?"+Math.random().toString()),e+"?"+Math.random().toString()},C.prototype.get_version=function(){return cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID?(u.gm.data.main_data.channelName=_.SDKManager.instance.getChannelName(),console.log("Android gm.data.main_data.channelName"+u.gm.data.main_data.channelName),console.log("Android gm.data.main_data.getChannelAdName"+_.SDKManager.instance.getChannelAdName()),VersionNum.IS_TEST?"ohayoo"==u.gm.data.main_data.channelName?u.gm.const.IS_GAME_XMCT?VersionNum.OHAYOO_TEST_URL:VersionNum.CHMHTXD_OHAYOO_TEST_URL:"juliang"==_.SDKManager.instance.getChannelAdName()?u.gm.const.IS_GAME_XMCT?VersionNum.JULIANG_TEST_URL:VersionNum.CHMHTXD_JULIANG_TEST_URL:"google"==_.SDKManager.instance.getChannelAdName()?u.gm.const.IS_GAME_XMCT?VersionNum.GOOGLE_TEST_URL:VersionNum.CHMHTXD_GOOGLE_TEST_URL:u.gm.const.IS_GAME_XMCT?VersionNum.TEST_URL:VersionNum.CHMHTXD_TEST_URL:"ohayoo"==u.gm.data.main_data.channelName?u.gm.const.IS_GAME_XMCT?VersionNum.OHAYOO_FORMAL_URL:VersionNum.CHMHTXD_OHAYOO_FORMAL_URL:"juliang"==_.SDKManager.instance.getChannelAdName()?u.gm.const.IS_GAME_XMCT?VersionNum.JULIANG_FORMAL_URL:VersionNum.CHMHTXD_JULIANG_FORMAL_URL:"google"==_.SDKManager.instance.getChannelAdName()?u.gm.const.IS_GAME_XMCT?VersionNum.GOOGLE_FORMAL_URL:VersionNum.CHMHTXD_GOOGLE_FORMAL_URL:u.gm.const.IS_GAME_XMCT?VersionNum.FORMAL_URL:VersionNum.CHMHTXD_FORMAL_URL):cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE||cc.sys.isNative&&cc.sys.platform==cc.sys.IPAD?VersionNum.IS_TEST?u.gm.const.IS_GAME_XMCT?VersionNum.IPHONE_TEST_URL:VersionNum.CHMHTXD_IPHONE_TEST_URL:u.gm.const.IS_GAME_XMCT?VersionNum.IPHONE_FORMAL_URL:VersionNum.CHMHTXD_IPHONE_FORMAL_URL:"https://cdnres.qszhg.6hwan.com/panda/version.json"},C.prototype.get_is_hot_update=function(){return!(b.DataManager.instance.is_test||(!cc.sys.isNative||cc.sys.platform!=cc.sys.ANDROID)&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.IPHONE)&&(!cc.sys.isNative||cc.sys.platform!=cc.sys.IPAD))},C.prototype.versionCompareHandle=function(t,e){for(var o=t.split("."),n=e.split("."),i=0;i<o.length;++i){var a=parseInt(o[i]),r=parseInt(n[i]||0);if(a!==r)return a-r}return n.length>o.length?-1:0},C.prototype.vibrate_short=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.vibrate_short():t==C.QQ_GAME?c.QQMiniGame.instance.vibrate_short():t==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.instance.vibrate_short():t==C.DW_GAME?p.DWMiniGame.instance.vibrate_short():t==C.HW_GAME?g.HWGame.instance.vibrate_short():t==C.VIVO_GAME?d.VIVOMiniGame.instance.vibrate_short():t==C.OPPO_GAME&&h.OPPOMiniGame.instance.vibrate_short()},C.prototype.vibrate_long=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.vibrate_long():t==C.QQ_GAME?c.QQMiniGame.instance.vibrate_long():t==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.instance.vibrate_long():t==C.DW_GAME?p.DWMiniGame.instance.vibrate_long():t==C.HW_GAME?g.HWGame.instance.vibrate_long():t==C.VIVO_GAME?d.VIVOMiniGame.instance.vibrate_long():t==C.OPPO_GAME?h.OPPOMiniGame.instance.vibrate_long():t!=C.TAP_TAP_GAME||f.ChuanShanJiaNativeGame.instance.vibrate_long()},Object.defineProperty(C.prototype,"is_support_more_game",{get:function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.is_support_more_game:t==C.QQ_GAME?c.QQMiniGame.instance.is_support_more_game:t!=C.WX_GAME?t==C.DW_GAME?p.DWMiniGame.instance.is_support_more_game:t==C.HW_GAME?g.HWGame.instance.is_support_more_game:t==C.VIVO_GAME?d.VIVOMiniGame.instance.is_support_more_game:t==C.OPPO_GAME?h.OPPOMiniGame.instance.is_support_more_game:(t==C.KKMH_GAME||t==C.MZ_GAME)&&void 0:0==C.APP_DS_MAP?l.WXMiniGame.instance.is_support_more_game:void 0},enumerable:!1,configurable:!0}),C.prototype.show_more_game=function(t,e){var o=this.get_channel_name();o==C.TT_GAME?s.TTMiniGame.instance.show_more_game(t,e):o==C.QQ_GAME?c.QQMiniGame.instance.show_more_game(t,e):o==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.instance.show_more_game(t,e):o==C.DW_GAME?console.error("\u68a6\u5de5\u5382\u4e0d\u652f\u6301\u66f4\u591a\u6e38\u620f\uff0c\u6240\u4ee5\u4e0d\u4f5c\u5904\u7406\uff01"):o==C.HW_GAME||o==C.VIVO_GAME||o==C.OPPO_GAME||o==C.KKMH_GAME||o==C.MZ_GAME||t&&e&&t.call(e)},C.prototype.set_rank_value=function(){var t=this.get_channel_name();if(t==C.TT_GAME)s.TTMiniGame.instance.set_rank_value();else if(t==C.QQ_GAME)c.QQMiniGame.instance.set_rank_value();else if(t==C.WX_GAME)0==C.APP_DS_MAP&&l.WXMiniGame.instance.set_rank_value();else if(t==C.DW_GAME)console.error("\u68a6\u5de5\u5382\u4e0d\u652f\u6301\u6392\u884c\u699c\uff01");else if(t!=C.HW_GAME&&t!=C.VIVO_GAME&&t==C.OPPO_GAME)return h.OPPOMiniGame.instance.set_rank_value()},C.prototype.DouYinFollowBS=function(){return this.get_channel_name()==C.TT_GAME?s.TTMiniGame.instance.DouYinFollowBS():"0"},Object.defineProperty(C.prototype,"is_support_app_box",{get:function(){return this.get_channel_name()==C.QQ_GAME&&c.QQMiniGame.instance.is_support_app_box},enumerable:!1,configurable:!0}),C.prototype.show_app_box_ad=function(){this.get_channel_name()==C.QQ_GAME&&c.QQMiniGame.instance.show_app_box_ad()},Object.defineProperty(C.prototype,"is_support_interstitial_ad",{get:function(){var t=this.get_channel_name();if(t==C.QQ_GAME)return c.QQMiniGame.instance.is_support_interstitial_ad;if(t==C.WX_GAME){if(0==C.APP_DS_MAP)return l.WXMiniGame.instance.is_support_interstitial_ad}else{if(t==C.TT_GAME)return s.TTMiniGame.instance.is_support_interstitial_ad;if(t==C.DW_GAME)return p.DWMiniGame.instance.is_support_interstitial_ad;if(t==C.HW_GAME)return g.HWGame.instance.is_support_interstitial_ad;if(t==C.VIVO_GAME)return d.VIVOMiniGame.instance.is_support_interstitial_ad;if(t==C.OPPO_GAME)return h.OPPOMiniGame.instance.is_support_interstitial_ad}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"is_rank",{get:function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.is_rank:t==C.QQ_GAME?c.QQMiniGame.instance.is_rank:t!=C.WX_GAME?t==C.DW_GAME?(console.error("\u68a6\u5de5\u5382\u4e0d\u652f\u6301\u6392\u884c\u699c\uff01"),p.DWMiniGame.instance.is_rank):t!=C.HW_GAME?t==C.VIVO_GAME?d.VIVOMiniGame.instance.is_rank:t==C.OPPO_GAME?h.OPPOMiniGame.instance.is_rank:(t==C.KKMH_GAME||t==C.MZ_GAME)&&void 0:void 0:0==C.APP_DS_MAP?l.WXMiniGame.instance.is_rank:void 0},enumerable:!1,configurable:!0}),C.prototype.get_is_invite=function(){if(this.get_channel_name()==C.WX_GAME){if(0==C.APP_DS_MAP)return l.WXMiniGame.instance.is_share}else if(u.gm.const.IS_TEST)return!0;return!1},C.prototype.init_recharge_show=function(){console.log("errorHandler init begin"),u.gm.data.recharge_key={};var t,e,o=new RechargeProductData;for(e in(t=u.gm.channel.get_is_new_recharge_edtion()?u.gm.config.get_config_data("GpRechargeConfigData"):u.gm.config.get_config_data("RechargeConfigData")).data)""!=t.data[e].product_id_google&&(u.gm.data.recharge_key[t.data[e].product_id_google]="$"+t.data[e].rmb_google/100,o.productList.push(t.data[e].product_id_google));console.log("errorHandler init end");var n=this.get_channel_name();n==C.TAP_TAP_GAME&&(console.log("errorHandler channel_name "+n),"google"==_.SDKManager.instance.getChannelAdName())&&(n=JSON.stringify(o),console.log("errorHandler json_string "+n),_.SDKManager.instance.queryProductInfo(n,function(t){console.log("errorHandler tmp_string "+t),u.gm.data.recharge_key={};for(var e=JSON.parse(t),o=0;o<e.length;++o)u.gm.data.recharge_key[e[o].productID]=e[o].FormattedPrice}))},C.prototype.get_recharge_fuhao=function(){return""},C.prototype.get_recharge_rmb=function(t){var e="",o=this.get_channel_name();return 2==t.type||9==t.type?e=t.rmb.toFixed():(e="\uffe5"+t.rmb,o==C.TAP_TAP_GAME&&"google"==_.SDKManager.instance.getChannelAdName()&&(e=u.gm.data.recharge_key[t.product_id_google])),e},Object.defineProperty(C.prototype,"is_share",{get:function(){var t=this.get_channel_name();if(t==C.QQ_GAME)return c.QQMiniGame.instance.is_share;if(t==C.WX_GAME){if(0==C.APP_DS_MAP)return l.WXMiniGame.instance.is_share}else{if(t==C.DW_GAME)return p.DWMiniGame.instance.is_share;if(t==C.TT_GAME)return s.TTMiniGame.instance.is_share;if(t==C.HW_GAME)return g.HWGame.instance.is_share;if(t==C.VIVO_GAME)return d.VIVOMiniGame.instance.is_share;if(t==C.OPPO_GAME)return h.OPPOMiniGame.instance.is_share;if(t==C.KKMH_GAME)return!1;if(t==C.MZ_GAME)return!1;if(t==C.TAP_TAP_GAME)return!1;if(t==C.IPHONE_GAME)return!1;if(t==C.IPAD_GAME)return!1}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"is_video_share",{get:function(){var t=this.get_channel_name();if(t==C.QQ_GAME)return c.QQMiniGame.instance.is_video_share;if(t==C.WX_GAME){if(0==C.APP_DS_MAP)return l.WXMiniGame.instance.is_video_share}else{if(t==C.DW_GAME)return p.DWMiniGame.instance.is_video_share;if(t==C.TT_GAME)return s.TTMiniGame.instance.is_video_share;if(t==C.HW_GAME)return g.HWGame.instance.is_video_share;if(t==C.VIVO_GAME)return d.VIVOMiniGame.instance.is_video_share;if(t==C.OPPO_GAME)return h.OPPOMiniGame.instance.is_video_share}return!1},enumerable:!1,configurable:!0}),C.prototype.show_interstitial_ad=function(t,e){var o=this.get_channel_name();if(o==C.QQ_GAME)c.QQMiniGame.ad_enable&&c.QQMiniGame.instance.show_interstitial_ad(t,e);else if(o!=C.WX_GAME)if(o==C.DW_GAME)console.error("\u68a6\u5de5\u5382\u4e0d\u652f\u6301\u63d2\u5c4f\u5e7f\u544a\uff01");else{if(o!=C.TT_GAME)return o==C.HW_GAME?g.HWGame.instance.showInsertCustom():o==C.VIVO_GAME?d.VIVOMiniGame.instance.show_interstitial_ad(t,e):o==C.OPPO_GAME?h.OPPOMiniGame.instance.show_interstitial_ad(t,e):void 0;s.TTMiniGame.ad_enable&&GameTTSdk.BI.showInsertAds(t,null)}},C.prototype.onTouchEnd=function(){},C.prototype.show_video_call_back=function(t,e,o){if(void 0===o&&(o=a.ALL),u.gm.channel.get_is_recharge()&&u.gm.data.start_data.today_video_count>=u.gm.const.DAILY_VIDO_COUNT)return u.gm.ui.set_module_args(u.gm.const.VIDEO_NOTICE.key,{data:0}),void u.gm.ui.show_panel(u.gm.const.VIDEO_NOTICE);var n=this.get_channel_name();n==C.TT_GAME?s.TTMiniGame.ad_enable?s.TTMiniGame.instance.show_video_ad(t,e):t.call(e):n==C.QQ_GAME?c.QQMiniGame.ad_enable?c.QQMiniGame.instance.show_video_ad(t,e):t.call(e):n==C.WX_GAME?0==C.APP_DS_MAP?l.WXMiniGame.ad_enable?l.WXMiniGame.instance.show_video_ad(t,e):t.call(e):1==C.APP_DS_MAP&&p.DWMiniGame.instance.show_video_ad(function(){t.call(e)},this):n==C.DW_GAME?p.DWMiniGame.instance.show_video_ad(t,e):n==C.HW_GAME?g.HWGame.instance.show_video_ad(t,e):n==C.VIVO_GAME?d.VIVOMiniGame.instance.show_video_ad(t,e):n==C.OPPO_GAME?h.OPPOMiniGame.instance.show_video_ad(t,e):n==C.KKMH_GAME||n==C.MZ_GAME||(n==C.TAP_TAP_GAME?f.ChuanShanJiaNativeGame.instance.show_video_ad(t,e,o):cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID?_.SDKManager.instance.showRewardVideoAd(function(){t.call(e)},this):n==C.IPHONE_GAME||n==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.show_video_ad(t,e):(cc.log(u.gm.const.TEXT_7),u.gm.data.start_data.today_video_count++,console.log("today_video_count="+u.gm.data.start_data.today_video_count),u.gm.data.start_data.today_video_laqi_count++,u.gm.data.start_data.total_video_count++,u.gm.data.start_data.total_video_laqi_count++,u.gm.data.start_data.async_write_data(),t.call(e),TaskManager.instance.checkTask(v.TaskConditionTypeEnum.TASK_CONDITION_TYPE_VIDEO,[0],1)))},C.prototype.show_video_ad=function(t,e,o){void 0===o&&(o=a.ALL);var n=this.get_channel_name();n==C.TT_GAME?s.TTMiniGame.ad_enable?s.TTMiniGame.instance.show_video_ad(t,e):t.call(e):n==C.QQ_GAME?c.QQMiniGame.ad_enable?c.QQMiniGame.instance.show_video_ad(t,e):t.call(e):n==C.WX_GAME?0==C.APP_DS_MAP?l.WXMiniGame.ad_enable?l.WXMiniGame.instance.show_video_ad(t,e):t.call(e,r.REWARD):1==C.APP_DS_MAP&&p.DWMiniGame.instance.show_video_ad(function(){t.call(e)},this):n==C.DW_GAME?p.DWMiniGame.instance.show_video_ad(t,e):n==C.HW_GAME?g.HWGame.instance.show_video_ad(t,e):n==C.VIVO_GAME?d.VIVOMiniGame.instance.show_video_ad(t,e):n==C.OPPO_GAME?h.OPPOMiniGame.instance.show_video_ad(t,e):n==C.KKMH_GAME||n==C.MZ_GAME||(n==C.TAP_TAP_GAME?f.ChuanShanJiaNativeGame.instance.show_video_ad(t,e,o):cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID||(n==C.IPHONE_GAME||n==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.show_video_ad(t,e):t.call(e,r.REWARD)))},C.prototype.share_req=function(t,e){var o,n=this.get_channel_name();n==C.TT_GAME?s.TTMiniGame.instance.share_req(t,e):n==C.QQ_GAME?c.QQMiniGame.instance.share_req(t,e):n==C.WX_GAME?0==C.APP_DS_MAP&&(o=Date.now(),cc.game.once(cc.game.EVENT_SHOW,function(){3e3<Date.now()-o&&t.call(e)}),l.WXMiniGame.instance.share_req(t,e)):(console.log("false share success"),t&&t())},C.prototype.report_data=function(t,e){var o=this.get_channel_name();o==C.WX_GAME?GameSdk.BI.evtCustomizeDataReport(t):o==C.TT_GAME?GameTTSdk.BI.evtCustomizeDataReport(t,e):o==C.OPPO_GAME?GameSdk.BI.evtCustomizeDataReport(t,e):o==C.VIVO_GAME?GameSdk.BI.evtOvhCustomizeDataReport(t,e):o==C.HW_GAME||o==C.TAP_TAP_GAME?GameSdk.BI.evtCustomizeDataReport(t):o!=C.IPHONE_GAME&&o!=C.IPAD_GAME||(JSON.stringify(e),GameSdk.BI.evtCustomizeDataReport(t))},C.prototype.ui_report=function(t,e,o){var n=this.get_channel_name();n==C.WX_GAME?0==o?GameSdk.BI.evtLevelStartReport(t,e):GameSdk.BI.evtLevelEndReport(t,e,"success"):n==C.TT_GAME?0==o?GameTTSdk.BI.evtLevelStartReport(t,e):GameTTSdk.BI.evtLevelEndReport(t,e,"success"):n!=C.OPPO_GAME&&n!=C.HW_GAME&&n!=C.TAP_TAP_GAME&&n!=C.IPHONE_GAME&&n!=C.IPAD_GAME||(0==o?GameSdk.BI.evtLevelStartReport(t,e):GameSdk.BI.evtLevelEndReport(t,e,"success"))},C.prototype.onTouchStart=function(){this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.onTouchStart(function(){console.log("onTouchStart"),GameSdk.BI.evtCustomizeDataReport("80001-\u70b9\u51fb\u5c4f\u5e55",null),l.WXMiniGame.instance.offTouchStart(function(){console.log("offTouchStart")})})},C.prototype.onHide=function(){this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.onHide(function(){u.gm.data.savePlayerData()})},C.prototype.offTouchStart=function(){l.WXMiniGame.instance.offTouchStart(function(){console.log("offTouchStart")})},C.prototype.get_shoucang=function(){return this.get_channel_name()==C.WX_GAME&&l.WXMiniGame.instance.getShoucang()},C.prototype.show_banner_ad=function(t){var e=this.get_channel_name();e!=C.TT_GAME&&(e==C.QQ_GAME?c.QQMiniGame.ad_enable&&c.QQMiniGame.instance.show_banner_ad():e==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.ad_enable&&l.WXMiniGame.instance.show_banner_ad(t):e==C.DW_GAME?p.DWMiniGame.instance.show_banner_ad(t):e==C.HW_GAME?g.HWGame.instance.show_banner_ad(t):e==C.VIVO_GAME?d.VIVOMiniGame.instance.show_banner_ad(t):e==C.OPPO_GAME?h.OPPOMiniGame.instance.show_banner_ad(t):e!=C.TAP_TAP_GAME&&(e==C.IPHONE_GAME||e==C.IPAD_GAME||e==C.KKMH_GAME||e==C.MZ_GAME||cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID&&_.SDKManager.instance.showBannerAd()))},C.prototype.hide_banner_ad=function(t){var e=this.get_channel_name();e==C.TT_GAME?s.TTMiniGame.ad_enable&&GameTTSdk.BI.hideBanner():e==C.QQ_GAME?c.QQMiniGame.ad_enable&&c.QQMiniGame.instance.hide_banner_ad():e==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.ad_enable&&l.WXMiniGame.instance.hide_banner_ad(t):e==C.DW_GAME?p.DWMiniGame.instance.hide_banner_ad(t):e==C.HW_GAME?g.HWGame.instance.hide_banner_ad():e==C.VIVO_GAME?d.VIVOMiniGame.instance.hide_banner_ad(t):e==C.OPPO_GAME?h.OPPOMiniGame.instance.hide_banner_ad(t):e!=C.TAP_TAP_GAME&&(e==C.IPHONE_GAME||e==C.IPAD_GAME||e==C.KKMH_GAME||e==C.MZ_GAME||cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID&&_.SDKManager.instance.hideBannerAd())},C.prototype.record_start=function(){this.get_channel_name()!=C.TT_GAME||s.TTMiniGame.instance.record_start()},C.prototype.record_stop=function(t){this.get_channel_name()!=C.TT_GAME||s.TTMiniGame.instance.record_stop(t)},C.prototype.share_video=function(t,e){var o=this.get_channel_name();o==C.TT_GAME?s.TTMiniGame.instance.share_video(t,e):o==C.QQ_GAME||o==C.WX_GAME||o==C.DW_GAME||o==C.HW_GAME||o==C.VIVO_GAME||o==C.OPPO_GAME||o==C.KKMH_GAME||o==C.MZ_GAME||e&&e(0)},C.prototype.viedo_share=function(t,e){var o=this.get_channel_name();o==C.TT_GAME?s.TTMiniGame.instance.viedo_share(t,e):o==C.QQ_GAME||o==C.WX_GAME||e&&e(0)},C.prototype.get_share_state=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_share_state():t==C.QQ_GAME||t!=C.WX_GAME&&t!=C.DW_GAME&&t!=C.HW_GAME&&t!=C.VIVO_GAME&&t!=C.OPPO_GAME&&t!=C.KKMH_GAME&&t!=C.MZ_GAME?0:1},C.prototype.get_npc_state=function(){return this.get_channel_name()==C.TT_GAME?s.TTMiniGame.instance.get_npc_state():0},C.prototype.get_task_cp=function(){var t=this.get_channel_name();return t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_task_cp():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_task_cp():t==C.HW_GAME?g.HWGame.instance.get_task_cp():0},C.prototype.get_map_cp=function(){var t=this.get_channel_name();return t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_map_cp():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_map_cp():t==C.HW_GAME?g.HWGame.instance.get_map_cp():0},C.prototype.get_qq_number=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_qq_number():t==C.QQ_GAME?0:t==C.WX_GAME?l.WXMiniGame.instance.get_qq_number():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_qq_number():t==C.DW_GAME||t==C.HW_GAME||t==C.VIVO_GAME||t==C.OPPO_GAME||t==C.KKMH_GAME||t==C.MZ_GAME?0:570179670},C.prototype.get_is_weak_guide=function(){var t=this.get_channel_name();return t==C.TT_GAME?s.TTMiniGame.instance.get_is_weak_guide():t==C.QQ_GAME?1:t==C.WX_GAME?l.WXMiniGame.instance.get_is_weak_guide():t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_is_weak_guide():t==C.DW_GAME?1:t==C.HW_GAME?g.HWGame.instance.get_is_weak_guide():t==C.VIVO_GAME?d.VIVOMiniGame.instance.get_is_weak_guide():t==C.OPPO_GAME?h.OPPOMiniGame.instance.get_is_weak_guide():1},C.prototype.get_is_bdd=function(){return this.get_channel_name()!=C.TT_GAME||s.TTMiniGame.instance.get_is_bdd()},C.prototype.get_open_id=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_open_id():u.gm.data.open_id},C.prototype.get_uid=function(){var t=this.get_channel_name();return t==C.TAP_TAP_GAME||t==C.IPHONE_GAME||t==C.IPAD_GAME?f.ChuanShanJiaNativeGame.instance.get_uid():u.gm.data.uid},C.prototype.get_rank_data=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.get_rank_data():t==C.QQ_GAME?c.QQMiniGame.instance.get_rank_data():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.get_rank_data()},C.prototype.set_rank_close=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.set_rank_close():t==C.QQ_GAME?c.QQMiniGame.instance.set_rank_close():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.set_rank_close()},C.prototype.on_rank_pre_page_click=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.on_rank_pre_page_click():t==C.QQ_GAME?c.QQMiniGame.instance.on_rank_pre_page_click():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.on_rank_pre_page_click()},C.prototype.on_rank_next_page_click=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.on_rank_next_page_click():t==C.QQ_GAME?c.QQMiniGame.instance.on_rank_next_page_click():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.on_rank_next_page_click()},C.prototype.get_self_rank_data=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.get_self_rank_data():t==C.QQ_GAME?c.QQMiniGame.instance.get_self_rank_data():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.get_self_rank_data()},C.prototype.set_self_rank_close=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.set_self_rank_close():t==C.QQ_GAME?c.QQMiniGame.instance.set_self_rank_close():t!=C.WX_GAME||0==C.APP_DS_MAP&&l.WXMiniGame.instance.set_self_rank_close()},C.prototype.clear_cache=function(){var t=this.get_channel_name();t==C.TT_GAME?s.TTMiniGame.instance.clear_cache():t==C.QQ_GAME?c.QQMiniGame.instance.clear_cache():t==C.WX_GAME?0==C.APP_DS_MAP&&l.WXMiniGame.instance.clear_cache():t!=C.DW_GAME||1==C.APP_DS_MAP&&p.DWMiniGame.instance.clear_cache()},C.prototype.compare_version=function(t,e){t=t.split("."),e=e.split(".");for(var o=Math.max(t.length,e.length);t.length<o;)t.push("0");for(;e.length<o;)e.push("0");for(var n=0;n<o;n++){var i=parseInt(t[n]),a=parseInt(e[n]);if(a<i)return 1;if(i<a)return-1}return 0},C.prototype.autoUpdate=function(){console.log("getUpdateManager");var t=wx.getUpdateManager();t.onCheckForUpdate(function(e){console.log("getUpdateManager11"),e.hasUpdate&&(console.log("getUpdateManager22"),t.onUpdateReady(function(){console.log("getUpdateManager33"),wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(e){if(e.confirm)t.applyUpdate();else if(e.cancel)return}})}),t.onUpdateFailed(function(){wx.showModal({title:"\u5df2\u7ecf\u6709\u65b0\u7248\u672c\u4e86\u54df~",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u4e0a\u7ebf\u5566~\uff0c\u8bf7\u60a8\u5220\u9664\u5f53\u524d\u5c0f\u7a0b\u5e8f\uff0c\u91cd\u65b0\u641c\u7d22\u6253\u5f00\u54df~"})}))})},C.prototype.markScene=function(){window.wx&&window.wx.markScene&&window.wx.markScene({sceneId:0})},C.prototype.follow=function(t,e){this.get_channel_name()!=C.TT_GAME||s.TTMiniGame.instance.follow(t,e)},C.prototype.hide_follow_btn=function(){this.get_channel_name()==C.TT_GAME&&s.TTMiniGame.instance.hide_follow_btn()},C.prototype.show_follow_btn=function(){this.get_channel_name()==C.TT_GAME&&s.TTMiniGame.instance.show_follow_btn()},C.prototype.follow_douyin=function(t,e){this.get_app_name()==C.APP_DOU_YIN&&s.TTMiniGame.instance.douYinFollow(t,e)},C.prototype.follow_btn_stat=function(){if(this.get_channel_name()==C.TT_GAME)return s.TTMiniGame.instance.follow_btn_stat()},C.prototype.user_subscribe_message=function(){this.get_channel_name()!=C.TT_GAME||s.TTMiniGame.instance.user_subscribe_message(function(){})},C.prototype.showBannerNative=function(t){var e=this.get_channel_name();e==C.OPPO_GAME?h.OPPOMiniGame.instance.showBannerNative(t):e==C.VIVO_GAME?d.VIVOMiniGame.instance.showBannerNative(t):e==C.WX_GAME||this.show_Banner_Native(t)},C.prototype.showBigJpgNative=function(t){var e=this.get_channel_name();e==C.OPPO_GAME?h.OPPOMiniGame.instance.showBigJpgNative(t):e==C.VIVO_GAME?d.VIVOMiniGame.instance.showBigJpgNative(t):e==C.WX_GAME||this.show_BigJpg_Native(t)},C.prototype.show_ico_native=function(t){var e=this.get_channel_name();e==C.OPPO_GAME?h.OPPOMiniGame.instance.showIcoNative(t):e==C.VIVO_GAME?d.VIVOMiniGame.instance.showIcoNative(t):e==C.WX_GAME||this.showIcoNative(t)},C.prototype.showIcoNative=function(t){var e=["http://imgwsdl.vivo.com.cn/appstore/ad/apk/icon/20201023/2020102323335239964.png"],o=void 0,n=void 0;o=t.getChildByName("adImg"),n=t.getChildByName("adLogo"),t.getChildByName("adClose"),o.active=!1,0<e.length&&cc.loader.load(e[0],function(t,e){o.active=!0,o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e),console.log("adImg load >>>>>>>>")}),n.active=!1,o.getComponent(cc.Button)||o.addComponent(cc.Button),o.on("click",function(){console.log("nativeIcoAd  Click Ico AdShow ")},this),console.log("nativeIcoAd  reportIcoAdShow adId:, this.bannerNativeData.adId")},C.prototype.show_BigJpg_Native=function(t){var e=["http://images.pinduoduo.com/marketing_api/2020-09-30/a064a4e2-057d-407d-b21b-7fa818bb4c06.jpeg"],o=void 0,n=void 0;o=t.getChildByName("adImg"),n=t.getChildByName("adLogo"),o.active=!1,0<e.length&&cc.loader.load(e[0],function(t,e){o.active=!0,o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)}),n.active=!1,o.getComponent(cc.Button)||o.addComponent(cc.Button),o.on("click",function(){console.log("adImg.on('click', () => {")},this),console.log("nativeIcoAd  reportIcoAdShow adId:, this.bigJpgNativeData.adId")},C.prototype.show_Banner_Native=function(t){var e=["http://imgwsdl.vivo.com.cn/appstore/ad/apk/icon/20201023/2020102323335239964.png"],o=void 0,n=void 0,i=void 0,a=void 0,r=void 0;o=t.getChildByName("adImg"),n=t.getChildByName("adDesc"),a=t.getChildByName("adTitle"),r=t.getChildByName("adButton"),i=t.getChildByName("adLogo"),o.active=!1,0<e.length&&cc.loader.load(e[0],function(t,e){o.active=!0,o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)}),a.active=!0,a.getComponent(cc.Label).string="\u7528\u4e86\u8fd9\u4e2a\u53e3\u7f69\uff0c\u5144\u5f1f\u4eec\u90fd\u627e\u6211\u8981\u94fe\u63a5\uff01\u592a\u503c\uff01",n.active=!0,n.getComponent(cc.Label).string="\u6d3b\u52a8\u771f\u5b9e\u6709\u6548",i.active=!1,r.getComponent(cc.Button)||r.addComponent(cc.Button),r.on("click",function(){console.log("nativeIcoAd  Click IcoAdShow ")},this),console.log("nativeIcoAd  reportIcoAdShow adId:, this.bannerNativeData.adId")},C.prototype.copy_to_clipboard=function(t,e){var o=this.get_channel_name();if(o==C.OPPO_GAME)h.OPPOMiniGame.instance.clipBoard(t,function(){});else if(o==C.VIVO_GAME)d.VIVOMiniGame.instance.clipBoard(t,function(){});else if(o==C.HW_GAME)g.HWGame.instance.clipBoard(t,function(){});else if(o==C.QQ_GAME)c.QQMiniGame.instance.clipBoard(t,function(){});else if(o==C.WX_GAME)l.WXMiniGame.instance.clipBoard(t,function(){});else{if(o!=C.TT_GAME)return cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","copyToClipboard","(Ljava/lang/String;)V",t):o==C.IPHONE_GAME||o==C.IPAD_GAME?jsb.reflection.callStaticMethod("AppActivity","copyToClipboard:",t):((o=document.createElement("input")).value=t+"",document.body.appendChild(o),o.select(),document.execCommand("Copy"),o.style.display="none",void(e&&e()));s.TTMiniGame.instance.clipBoard(t,function(){})}},C.prototype.exit_game=function(){var t=this.get_channel_name(),e=_.SDKManager.instance.getChannelAdName();this.check_is_app()?"oppo"==e||"xiaomi"==e?_.SDKManager.instance.exitGame():cc.game.end():t==C.TT_GAME?tt.exitMiniProgram():t==C.QQ_GAME?qq.exitMiniProgram():t==C.WX_GAME?wx.exitMiniProgram():t==C.VIVO_GAME?qg.exitApplication():t==C.OPPO_GAME||t==C.HW_GAME?qg.exitApplication({}):cc.game.end()},C.prototype.get_is_oldPlayer=function(){var t=this.get_channel_name();return t!=C.TAP_TAP_GAME&&t!=C.IPHONE_GAME&&t!=C.IPAD_GAME||f.ChuanShanJiaNativeGame.instance.get_is_oldPlayer()},C.prototype.juLiangEventReport=function(t){var e=this.get_channel_name();e==C.WX_GAME?l.WXMiniGame.instance.juLiangEventReport(t):e==C.TT_GAME?s.TTMiniGame.instance.juLiangEventReport(t):u.gm.channel.check_is_app()&&f.ChuanShanJiaNativeGame.instance.juLiangEventReport(t)},C.prototype.isHardCoreChanne=function(){var t=!1;switch(_.SDKManager.instance.getChannelAdName()){case"oppo":case"vivo":case"xiaomi":case"huawei":case"google":case"taptap":t=!0}return t},C._instance=null,C.WX_GAME="wechat-game",C.TT_GAME="tt-game",C.QQ_GAME="qq-game",C.DW_GAME="dw-game",C.UNKNOWN="unknown",C.HW_GAME="hw-game",C.VIVO_GAME="vivo-game",C.OPPO_GAME="oppo-game",C.KKMH_GAME="kkmh-game",C.MZ_GAME="mz-game",C.TAP_TAP_GAME="tap-tap-game",C.OHAYOO_GAME="ohayoo-game",C.APP_TOU_TIAO="Toutiao",C.IPHONE_GAME="iphone-game",C.IPAD_GAME="ipad-game",C.GOOGLE_PLAY="google",C.APP_NEWS_ARTICLE_LITE="news_article_lite",C.APP_DOU_YIN="Douyin",C.APP_DOU_YIN_LITE="Douyin_lite",C.APP_XI_GUA="XiGua",C.APP_QQ="qq",C.APP_WE_CHAT="wechat",C.APP_DW="DreamWorks",C.APP_TAP_TAP="tap_tap",C.APP_UNKNOWN="unknown",C.APP_DS_MAP=0,C.SHARE_CONFIG={share_id_array:["6rbkd4ptsrf3p282j4","1ja4cg4hi045f1f9cf","29pejigtkih3hait61"],share_array:[{title:"\u8d85\u6cbb\u6108\u7684\u767e\u53d8\u88c5\u4fee\u6765\u54af...",url:"https://cdnres.qszhg.6hwan.com/FarmOperation/4.jpg"},{title:"\u540e\u5c71\u7684\u871c\u8702\u6b63\u5728\u56f4\u653b\u72d7\u86cb...",url:"https://cdnres.qszhg.6hwan.com/FarmOperation/5.jpg"},{title:"\u56ed\u5b50\u91cc\u7684\u7389\u7c73\u719f\u4e86\uff0c\u4e00\u8d77\u6536\u5272\u5427...",url:"https://cdnres.qszhg.6hwan.com/FarmOperation/6.jpg"}]},i.ChannelManager=n=C,cc._RF.pop()},{}],CharaEnemy:[function(t,e,o){"use strict";cc._RF.push(e,"5495e5B+NFKS558372jLkEE","CharaEnemy");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("Utils"),_=i("EventManager"),f=i("Chara"),g=i("MonsterBulet");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.attack_node=null,t.dis_time=0,t.state=0,t.move_time=0,t.last_x_pos=0,t.last_y_pos=0,t._left_hp=1e3,t.init_pos=cc.v2(0,0),t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.default),y.prototype.init=function(){l.prototype.init.call(this),this.objectHp.node.active=!1,this.dis_time=0,this.init_pos.x=this.node.x,this.init_pos.y=this.node.y,this.randomFly()},y.prototype.play=function(t,e){return(e=void 0===e?null:e)&&e(),!0},y.prototype.editor_on_button_click_handler=function(t,e){void 0===e&&(e=null),console.warn("CharaItem editor_on_button_click_handler"),this.pZone.onCharaEvent(u.CharaEventTypeEnum.CLICK,this)},y.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,l.prototype.reset.call(this)},y.prototype.updateLogic=function(t){var e,o,n,i,a=this;this.node.zIndex=1e4,this.pZone&&(null==(e=this.pZone.getMainChara())||(this.move_time+=t,1<=this.move_time?2!=this.state&&(this.updateDir(this.node.x-this.last_x_pos,this.node.y-this.last_y_pos),this.chara_spine.node.scaleX=this.node.x>this.last_x_pos?-1:1,this.move_time=0):.5<=this.move_time&&(this.last_x_pos=this.node.x,this.last_y_pos=this.node.y),e.getIsDie()||d.gm.localData.curHp<=0)||(i=p.OutSideMapResUtils.getConfig(this.pZone.getCfgId(),this.iCfgId))&&(!(o=p.ConfigUtils.CollectionsUtils.getConfig(i.res_id))||(n=p.OutSideMonsterUtils.getConfig(o.id))&&(e.attack_uid!=this.getUid()&&(this.objectHp.node.active=!1),this.dis_time+=t,i=h.Utils.distance(e.node,this.node),n.attack_dis>=i?(this.node.stopAllActions(),this.state=2,this.updateDir(e.node.x-this.node.x,e.node.y-this.node.y),2<=this.dis_time&&(e.set_attack_me_uid(this.getUid()),this.playAniByType(u.EnumRoleAniType.attack,1,function(){a.playAniByType(u.EnumRoleAniType.walk)}),this.dis_time=0,this.scheduleOnce(function(){for(var t=0;t<n.bullet_count;++t)!function(t){d.gm.pool.async_get(u.BundleName.MAIN_UI,"prefabs/explore/bullet/monster_bullet_"+a.iCfgId,g.default,function(e){e.node.x=a.node.x,e.node.y=a.node.y;var o=cc.v2(0,0);o.x=a.node.x,o.y=a.node.y+120,o=a.downOrTop==u.EnumDownOrUp.down&&a.leftOrRight==u.EnumLeftOrRight.left?h.Utils.convertPosAR(a.bullet_node[0],a.pZone.node):a.downOrTop==u.EnumDownOrUp.down&&a.leftOrRight==u.EnumLeftOrRight.right?h.Utils.convertPosAR(a.bullet_node[1],a.pZone.node):a.downOrTop==u.EnumDownOrUp.up&&a.leftOrRight==u.EnumLeftOrRight.left?h.Utils.convertPosAR(a.bullet_node[2],a.pZone.node):h.Utils.convertPosAR(a.bullet_node[3],a.pZone.node),e.node.x=o.x,e.node.y=o.y,e.init(),e.setCfgId(a.iCfgId),a.pZone.addChara(e,null,0,0,null),e.setAttack(n.attack,n.weapon),e.bulletMove(t),e.set_is_bullet(!0)})}(t)},.5)),this.chara_spine.node.scaleX=this.node.x>e.node.x?1:-1):n.patrol_dis>=i?1!=this.state&&(this.state=1,this.updateDir(e.node.x-this.node.x,e.node.y-this.node.y),this.node.stopAllActions(),t=n.patrol_speed,this._left_hp<=o.collect_hp/2&&(t+=.2*t),this.node.runAction(cc.moveTo(i/t,e.node.getPosition())),this.scheduleOnce(function(){a.state=0},i/t),this.chara_spine.node.scaleX=this.node.x>e.node.x?1:-1):(0<this.state&&this.randomFly(),this.state=0))))},y.prototype.randomFly=function(){var t=this,e=h.Utils.math_random(!0,-300,300),o=h.Utils.math_random(!0,-300,300),n=cc.v2(this.init_pos.x+e,this.init_pos.y+o);n.x=3800<=n.x?3800:n.x,n.x=n.x<=-3800?-3800:n.x,n.y=2e3<=n.y?2e3:n.y,n.y=n.y<=-2e3?-2e3:n.y,this.updateDir(e,o);var i=h.Utils.distance(n,this.node);this.node.stopAllActions(),(e=p.OutSideMapResUtils.getConfig(this.pZone.getCfgId(),this.iCfgId))&&(!(o=p.ConfigUtils.CollectionsUtils.getConfig(e.res_id))||(e=p.OutSideMonsterUtils.getConfig(o.id))&&(e=e.move_speed,this._left_hp<=o.collect_hp/2&&(e+=.2*e),this.node.runAction(cc.moveTo(i/e,n)),this.scheduleOnce(function(){0==t.state&&t.randomFly()},i/e),this.chara_spine.node.scaleX=this.node.x>n.x?1:-1))},y.prototype.onCollisionEnter=function(){},y.prototype.showHp=function(t,e){e==this.getUid()&&(this._left_hp=t,!(e=p.OutSideMapResUtils.getConfig(this.pZone.getCfgId(),this.iCfgId))||(e=p.ConfigUtils.CollectionsUtils.getConfig(e.res_id))&&p.OutSideMonsterUtils.getConfig(e.id)&&(this.objectHp.node.active=!0,this.objectHp.setData(t,e.collect_hp)))},y.prototype.dieRandomFly=function(){this.state=0,this.randomFly()},y.prototype.onEnable=function(){_.default.on(u.GameEvent.explore_monster_show_hp,this.showHp,this),_.default.on(u.GameEvent.die_random_fly,this.dieRandomFly,this),this.playAniByType(u.EnumRoleAniType.walk)},y.prototype.onDisable=function(){_.default.off(u.GameEvent.explore_monster_show_hp,this.showHp,this),_.default.off(u.GameEvent.die_random_fly,this.dieRandomFly,this),this.node.stopAllActions(),this.unscheduleAllCallbacks()},y.prototype.stop_animation=function(){var t=this.node.getComponent(cc.Animation);t&&t.stop()},y.prototype.onCollisionExit=function(){},s([a(cc.Node)],y.prototype,"attack_node",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],CharaItem:[function(t,e,o){"use strict";cc._RF.push(e,"1e998UacQdMT4sR0E3NE8D2","CharaItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("Utils"),_=i("EventManager"),f=i("Chara");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.bIsHide=!1,t.touch_node_ary=[],t.help_node=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.init=function(){l.prototype.init.call(this),this.objectHp.node.active=!1,this.help_node&&(this.help_node.node.active=!1,this.help_node.stop())},g.prototype.play=function(t,e){return(e=void 0===e?null:e)&&e(),!0},g.prototype.editor_on_button_click_handler=function(t,e){void 0===e&&(e=null),this.pZone.onCharaEvent(u.CharaEventTypeEnum.CLICK,this),d.gm.localData.explore_data.collect_id=this.getUid()},g.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,this.bIsHide=!1,l.prototype.reset.call(this)},g.prototype.updateLogic=function(){if(this.pZone){var t=d.gm.ui.get_module(d.gm.const.Explore);if(t&&t.node.active&&(t.check_screen(this.node,this.node.width,this.node.height)?this.node.opacity=255:this.node.opacity=0),!t.getpLogic().getZoneResMap()[this.getUid()])return console.log("deleteChara uid3"),this.pZone.removeChara(this),void d.gm.pool.put(this.node);var e,o,n,i,a=this.pZone.getMainChara();null!=a&&(a.getCollectId()==this.getUid()?(i=t.getpLogic().getZoneResMap()[this.getUid()])&&this.showHp(i.leftHp,p.ConfigUtils.CollectionsUtils.getConfig(i.iResId).collect_hp):this.objectHp.node.active=!1,e=this.node.x-this.node.width*this.node.anchorX,o=this.node.x+this.node.width*(1-this.node.anchorX),n=this.node.y+this.node.height*(1-this.node.anchorY),t=this.node.y-this.node.height*this.node.anchorY,i=!1,e<a.node.x&&a.node.x<o&&t<a.node.y&&a.node.y+a.node.height<n&&(i=!0),(1e4<this.iCfgId||a.node.height>this.node.height)&&(i=!1),this.bIsHide!=i&&(this.bIsHide=i,cc.Tween.stopAllByTarget(this.node),i=i?100:255,cc.tween(this.node).to(.1,{opacity:i}).start()))}},g.prototype.onCollisionEnter=function(){this.help_node&&(this.help_node.setCurrentTime(0,"build_10801_auto_talk"),this.help_node.node.active=!0,this.help_node.play()),10801<=this.iCfgId&&this.iCfgId<=10900&&this.chara_spine.setAnimation(0,"standby_buy02",!0);var t,e=this.node.getComponent(cc.Animation);e&&(t=e.getClips()[0].name,e.getAnimationState(t),e.getAnimationState(t).isPlaying||e.play(t))},g.prototype.onEnable=function(){_.default.on(u.GameEvent.explore_item,this.resetHp,this);for(var t=0;t<this.touch_node_ary.length;++t)this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_START,this.touchStoreStart,this),this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_START,this.touchStoreMove,this),this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_END,this.touchStoreEnd,this);this.node.scale=1},g.prototype.onDisable=function(){_.default.off(u.GameEvent.explore_item,this.resetHp,this);var t=this.node.getComponent(cc.Animation);if(t){t.currentClip&&(t.play(t.currentClip.name,0),t.stop());for(var e=0;e<this.touch_node_ary.length;++e)this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_START,this.touchStoreStart,this),this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_START,this.touchStoreMove,this),this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_END,this.touchStoreEnd,this);this.unscheduleAllCallbacks(),this.node.stopAllActions()}},g.prototype.touchStoreStart=function(){},g.prototype.touchStoreMove=function(t){var e=d.gm.ui.get_module(d.gm.const.Explore);e&&e.getpLogic().touchMove(t)},g.prototype.touchStoreEnd=function(t){var e,o=d.gm.ui.get_module(d.gm.const.Explore);o&&(5<=h.Utils.distance(t.getStartLocation(),t.getLocation())?o.getpLogic().touchEnd(t):this.iCfgId<=1e4||(console.log("touchStoreEnd"),this.node.runAction(cc.sequence(cc.scaleTo(.07,1.2,1.2),cc.scaleTo(.05,1,1))),o.getpLogic().set_can_move(!1),this.scheduleOnce(function(){o.getpLogic().set_can_move(!0)},.1),!o.getZone().node||!o.getMainChara())||((e=cc.v2(0,0)).x=-o.getMainChara().node.x,e.y=-o.getMainChara().node.y,o.check_zone_pos(e,o.node_map.scale),null!=this.pZone.getMainChara()&&(d.gm.ui.get_module(d.gm.const.BaseUI).nod_follow.active||this.pZone.setNeedCameraFollow(!0),this.editor_on_button_click_handler(t))))},g.prototype.stop_animation=function(){var t=this.node.getComponent(cc.Animation);t&&t.stop()},g.prototype.onCollisionExit=function(){this.help_node&&(this.help_node.node.active=!1,this.help_node.stop()),10801<=this.iCfgId&&this.iCfgId<=10900&&this.chara_spine.setAnimation(0,"standby_buy",!0)},s([a([cc.Node])],g.prototype,"touch_node_ary",void 0),s([a(cc.Animation)],g.prototype,"help_node",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],CharaPetUi:[function(t,e,o){"use strict";cc._RF.push(e,"70d280PfHNPfLfbdWpO36Nj","CharaPetUi");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.onEnable=function(){},l.prototype.onDisable=function(){},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],CharaPet:[function(t,e,o){"use strict";cc._RF.push(e,"dd33eqPFM9Gn47fZRBeT2TP","CharaPet");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("Utils"),h=i("EventManager"),_=i("SpineUtils"),f=i("TimeUtils"),g=i("Chara");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.hungry_node=null,t.food_icon=null,t._pet_data=null,t._pet_index=0,t._random_ani=["standby01","standby02","standby03","standby04","standby05"],t._stand_time=0,t._stand_all_time=0,t.temp_pos=cc.v2(0,0),t._index_x=[cc.v2(100,0),cc.v2(-100,100),cc.v2(100,-100),cc.v2(0,-100),cc.v2(0,100),cc.v2(100,100),cc.v2(-100,0),cc.v2(-100,-100)],t._walk_time=0,t._stop_state=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=g.default),y.prototype.onEnable=function(){var t=this;h.default.on(p.GameEvent.pet_pos,this.save_pos,this),h.default.on(p.GameEvent.feed_pet,this.feed_pet,this),this._walk_time=0,this._pet_data=u.gm.localData.explore_data.getPetData(this.iPetId),this._pet_index=u.gm.localData.explore_data.getPetIndex(this.iPetId),this.hungry_node.active=!1,this._stand_all_time=d.Utils.math_random(!1,4,8),this.setStandByAni(this.hungry_node.active?p.EnumRoleAniType.standby_hungry:p.EnumRoleAniType.standby),_.default.setListener(this.chara_spine,function(){"eat"==t.chara_spine.animation?(t.setStandByAni(),t._stop_state=0):t._random_ani.includes(t.chara_spine.animation)&&t.setStandByAni(t.hungry_node.active?p.EnumRoleAniType.standby_hungry:p.EnumRoleAniType.standby)})},y.prototype.onDisable=function(){h.default.off(p.GameEvent.pet_pos,this.save_pos,this),h.default.off(p.GameEvent.feed_pet,this.feed_pet,this)},y.prototype.save_pos=function(){u.gm.localData.explore_data.savePetPos(this.iPetId,this.node.getPosition())},y.prototype.pet_walk=function(){var t,e=this,o=this.pZone.getMainChara();null!=o&&(t=d.Utils.distance(this.node,o.node),this.isWalking()?(this.updateDir(this.temp_pos.x-this.node.x,this.temp_pos.y-this.node.y,!1),this.playAniByType(this.hungry_node.active?p.EnumRoleAniType.walk_hungry:p.EnumRoleAniType.walk),t<200&&(this.setStandByAni(this.hungry_node.active?p.EnumRoleAniType.standby_hungry:p.EnumRoleAniType.standby),this.resetWalk(),this.save_pos())):200<=t?(this.updateDir(o.node.x-this.node.x,o.node.y-this.node.y,!1),this.setiCurWalkIndex(),this.playAniByType(this.hungry_node.active?p.EnumRoleAniType.walk_hungry:p.EnumRoleAniType.walk),this.temp_pos.x=o.node.x,this.temp_pos.y=o.node.y,this.temp_pos.y+=this._index_x[this._pet_index].y,this.temp_pos.x+=this._index_x[this._pet_index].x,this.walkTo(this.temp_pos,function(){e.pet_walk1()},this,!1)):(this.updateDir(o.node.x-this.node.x,o.node.y-this.node.y,!1),this._stand_time>=this._stand_all_time&&!this.hungry_node.active&&(this._stand_time=0,this._stand_all_time=d.Utils.math_random(!1,4,8),o="standby0"+d.Utils.math_random(!0,1,5),this.chara_spine.setAnimation(0,o,!1),this.lastAniName=o)))},y.prototype.pet_walk1=function(){var t=this,e=this.pZone.getMainChara();null!=e&&(200<=d.Utils.distance(this.node,e.node)?(this.setiCurWalkIndex(),this.temp_pos.x=e.node.x,this.temp_pos.y=e.node.y,this.temp_pos.y+=this._index_x[this._pet_index].y,this.temp_pos.x+=this._index_x[this._pet_index].x,this.walkTo(this.temp_pos,function(){t.pet_walk1()},this,!1)):(this.setStandByAni(this.hungry_node.active?p.EnumRoleAniType.standby_hungry:p.EnumRoleAniType.standby),this.resetWalk(),this.save_pos()))},y.prototype.update=function(t){this._walk_time+=t,this._stand_time+=t,.2<=this._walk_time&&0==this._stop_state&&(this._walk_time=0,this.pet_walk()),t=f.default.getTime(),this._pet_data.next_hungry_time||(this._pet_data.next_hungry_time=t),this._pet_data.hungry_value||(this._pet_data.hungry_value=0),this._pet_data.next_hungry_time<=t&&(this._pet_data.next_hungry_time=t+u.gm.const.PET_HUNGRY_TIME,u.gm.localData.saveByKey("explore_data"))},y.prototype.feed_pet=function(t){this.resetWalk(),this.save_pos(),this.iPetId==t&&(this._pet_data.hungry_value-=u.gm.const.MAX_PET_FOOD_VALUE,this._pet_data.hungry_value=this._pet_data.hungry_value<=0?0:this._pet_data.hungry_value,this.hungry_node.active=!1,t=this.getWalkSpeed(),this.setWalkSpeed(2*t),this._stop_state=1,this.chara_spine.setAnimation(0,"eat",!1))},y.prototype.onClickPetHungry=function(){var t=this;u.gm.ui.showModule(u.gm.const.ExploreFeedPet),u.gm.ui.showModule(u.gm.const.ExploreFeedPet,function(e){e.setData(t.iPetId)})},s([a(cc.Node)],y.prototype,"hungry_node",void 0),s([a(cc.Sprite)],y.prototype,"food_icon",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],CharaPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"ae686DkdcRNm5roEWRoJBYU","CharaPlayer");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("EventManager"),u=a("Chara");function d(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(d,s=u.default),d.prototype.init=function(){s.prototype.init.call(this),this.objectHp.node.active=!1},d.prototype.play=function(t,e){return(e=void 0===e?null:e)&&e(),!0},d.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,s.prototype.reset.call(this)},d.prototype.updateLogic=function(){0<this.attack_uid&&this.getIsFightingRes()&&p.default.emit(l.GameEvent.explore_attack_monster)},d.prototype.onCollisionEnter=function(){},d.prototype.onEnable=function(){p.default.on(l.GameEvent.explore_item,this.resetHp,this)},d.prototype.onDisable=function(){p.default.off(l.GameEvent.explore_item,this.resetHp,this),this.node.stopAllActions(),this.unscheduleAllCallbacks()},d.prototype.stop_animation=function(){var t=this.node.getComponent(cc.Animation);t&&t.stop()},d.prototype.onCollisionExit=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],d),r.default=a,cc._RF.pop()},{}],Chara:[function(t,e,o){"use strict";cc._RF.push(e,"ffa56xvTjxKFZq1o41zvi4g","Chara");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("ObjectHp"),h=i("Utils"),_=i("EventManager"),f=i("NodePoolItem"),g=i("SpineUtils");function y(){var t=l.call(this)||this;return t.ASTAR_RECHECK_LIMIT=.3,t.chara_spine=null,t.objectHp=null,t.bullet_node=[],t.animation=null,t.uid=0,t.iCfgId=0,t.iPetId=0,t.sCurAniName=null,t.sDefaultLoopAni=null,t.tWalkPoints=null,t.iCurWalkIndex=-1,t.iAStarIndex=0,t.tAStarPath=null,t.iAStarCheckCd=-1,t.pWalkFinishCb=null,t.pWalkFinishCbTarget=null,t.pZone=null,t._attack_uid=0,t._attacking_uid=0,t._attack_me_uid=[],t.iWalkSpeed=260,t.bIsCollectingRes=!1,t.bIsFightingRes=!1,t.bIsFightingPre=!1,t.bIsPlanting=!1,t.bIsAnimal=!1,t.bisDie=!1,t.speed=180,t._attack_time=0,t._distance=0,t._find_way_time=0,t._player_uid=0,t.is_player_in_room=!1,t.is_in_self_room=!1,t._is_show_vehicle=!1,t._is_bullet=!1,t._vehicle_id=0,t.leftOrRight=p.EnumLeftOrRight.right,t.downOrTop=p.EnumDownOrUp.up,t.model=null,t._is_zindex=!0,t.attack_end=!1,t.timeScale=1,t.lastAniName="",t.actionCount=0,t.isBack=!1,t.spineScale=1,t.maxCount=0,t.doneCallback=null,t._unback_ani=["sit","sleep","play","standby01","standby02","standby03","standby04","standby05","sleepDown","sleepUp","slide"],t.collect_id=0,t._is_check=!0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.NodePoolItem),y.prototype.start=function(){null!=this.sCurAniName&&(this.sCurAniName,this.sCurAniName=null)},y.prototype.set_is_show_vehicle=function(t){this._is_show_vehicle=t},Object.defineProperty(y.prototype,"is_show_vehicle",{get:function(){return this._is_show_vehicle},enumerable:!1,configurable:!0}),y.prototype.set_in_room=function(t){this.is_player_in_room=t},Object.defineProperty(y.prototype,"_is_in_self_room",{get:function(){return this.is_in_self_room},enumerable:!1,configurable:!0}),y.prototype.set_in_self_room=function(t){this.is_in_self_room=t},Object.defineProperty(y.prototype,"is_bullet",{get:function(){return this._is_bullet},enumerable:!1,configurable:!0}),y.prototype.set_is_bullet=function(t){this._is_bullet=t},Object.defineProperty(y.prototype,"_is_player_in_room",{get:function(){return this.is_player_in_room},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"attack_uid",{get:function(){return this._attack_uid},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"attacking_uid",{get:function(){return this._attacking_uid},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"attack_me_uid",{get:function(){return this._attack_me_uid[0]},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"attack_me_uid_list",{get:function(){return this._attack_me_uid},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"find_way_time",{get:function(){return this._find_way_time},set:function(t){this._find_way_time=t},enumerable:!1,configurable:!0}),y.prototype.set_is_myself=function(){},y.prototype.set_attack_uid=function(t){this._attack_uid=t},y.prototype.set_attacking_uid=function(t){0<(this._attacking_uid=t)&&(this.pZone.setNeedCameraFollow(!0),_.default.emit(p.GameEvent.show_exlore_unfollow))},y.prototype.set_attack_me_uid=function(t){for(var e=0;e<this._attack_me_uid.length;++e)if(t==this._attack_me_uid[e])return;this._attack_me_uid.push(t)},y.prototype.delete_attack_me_uid=function(t){if(void 0===t&&(t=0),0<this._attack_me_uid.length)if(0==t)this._attack_me_uid.splice(0,1);else for(var e=0;e<this._attack_me_uid.length;++e)if(t==this._attack_me_uid[e]){this._attack_me_uid.splice(e,1);break}},y.prototype.set_is_task=function(){},Object.defineProperty(y.prototype,"attack_time",{get:function(){return this._attack_time},enumerable:!1,configurable:!0}),y.prototype.set_attack_time=function(t){this._attack_time=t},y.prototype.get_player_uid=function(){return this._player_uid},y.prototype.set_player_uid=function(t){this._player_uid=t},y.prototype.getsCurAniName=function(){return this.sCurAniName},y.prototype.setsCurAniName=function(t){this.sCurAniName=t},y.prototype.getUid=function(){return this.uid},y.prototype.setUid=function(t){this.uid=t},y.prototype.init=function(){0==this.uid&&(this.uid=h.Utils.get_next_uid())},y.prototype.setZone=function(t){this.pZone=t},y.prototype.getZone=function(){return this.pZone},y.prototype.onLoad=function(){},y.prototype.set_vehicle_id=function(t){this._vehicle_id=t},y.prototype.updateLogic=function(t){this.bIsAnimal||(this.updateWalk(t),99999==this.iCfgId&&0<this.attack_uid&&this.getIsFightingRes()&&_.default.emit(p.GameEvent.explore_auto_attack_monster))},y.prototype.isWalking=function(){return 0<=this.iCurWalkIndex},y.prototype._updateDirection=function(){this.downOrTop==p.EnumDownOrUp.up?this.isBack=!0:this.isBack=!1,this.leftOrRight==p.EnumLeftOrRight.left?this.spineScale=1:this.spineScale=-1,this.chara_spine.node.scaleX=.38*this.spineScale,this.model&&this.model.updateByDirection(this.isBack)},y.prototype.updateDirectionByTarget=function(t){this.node.x<=t.x?this.leftOrRight=p.EnumLeftOrRight.right:this.leftOrRight=p.EnumLeftOrRight.left,this.node.y<=t.y?this.downOrTop=p.EnumDownOrUp.up:this.downOrTop=p.EnumDownOrUp.down,this._updateDirection()},y.prototype.updateWalk=function(t){var e=this;if(this.isWalking()&&!(this.tWalkPoints.length<=0)){var o=this.iWalkSpeed*t,n=o;0<this._distance&&(n=this._distance);var i=this.tWalkPoints[this.iCurWalkIndex];if(i){if(h.Utils.distance(this.node,i)<n)return this.iCurWalkIndex++,this.tAStarPath=null,this.iAStarIndex=0,this.callWalkFinishCb(),this.resetWalk(),void(this.pZone&&this.pZone.button_node&&this.pZone.button_node.removeAllChildren());if(null==this.tAStarPath&&(0<=this.iAStarCheckCd&&(this.iAStarCheckCd+=t),(this.iAStarCheckCd<0||this.iAStarCheckCd>=this.ASTAR_RECHECK_LIMIT)&&(this.tAStarPath=h.Utils.searchPathAStar(this.iCfgId,this.node,i,function(t,o){return!!e.pZone&&!!e._is_check&&e.pZone.checkHitWall(t,o)},u.gm.const.MIN_SEARCH_WAY),null==this.tAStarPath&&(this.iAStarCheckCd=0,this._find_way_time=h.Utils.get_cur_time()))),null!=this.tAStarPath){if(null==this.tAStarPath[this.iAStarIndex]){var a=h.Utils.getDirSpeed(this.node,i,o);return this.node.x+=a.x,this.node.y+=a.y,void(this.iPetId<=0&&this.updateDir(a.x,a.y))}null!=this.tAStarPath[this.iAStarIndex]&&(a=h.Utils.getDirSpeed(this.node,this.tAStarPath[this.iAStarIndex],o),this.node.x+=a.x,this.node.y+=a.y,this.iPetId<=0&&this.updateDir(a.x,a.y),h.Utils.distance(this.node,this.tAStarPath[this.iAStarIndex])<n&&this.iAStarIndex++),this._is_zindex&&h.Utils.updateZIndexWithY(this.node)}else this.deal_path_null(!0)}else this.resetWalk()}},y.prototype.set_is_zindex=function(t){this._is_zindex=t},y.prototype.deal_path_null=function(){},y.prototype.cleanAttachment=function(){0<this.iPetId||(this.chara_spine.findSlot("b_broom")&&this.chara_spine.findSlot("b_broom").setAttachment(null),this.chara_spine.findSlot("f_broom")&&this.chara_spine.findSlot("f_broom").setAttachment(null))},y.prototype._getAniName=function(t,e){var o=p.EnumRoleAniType[t];return(e=void 0!==e&&e)?p.EnumRoleAniType[t]+"_back":o},y.prototype._setRoleAni=function(t){var e;t==this.lastAniName&&!this.attack_end||(this.actionCount=0,(e=this.chara_spine).setAnimation(0,t,!0),this.lastAniName=t,e.timeScale=this.timeScale||1,this.attack_end=!1)},y.prototype.playAniByType=function(t,e,o,n){void 0===e&&(e=1),void 0===o&&(o=null),this.timeScale=n=void 0===n?1:n,this.maxCount=e,this.doneCallback=o,t=this._getAniName(t,this.isBack),this._setRoleAni(t)},y.prototype.playAniByName=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=null),t&&(this.isBack&&!this._unback_ani.includes(t)&&(t+="_back"),this.maxCount=e,this.doneCallback=o,this._setRoleAni(t))},y.prototype.setStandByAni=function(t){(t=void 0===t?p.EnumRoleAniType.standby:t)!=p.EnumRoleAniType.standby&&t!=p.EnumRoleAniType.standby_box&&t!=p.EnumRoleAniType.standby_hungry||(this.cleanAttachment(),t=this._getAniName(t,this.isBack),this._setRoleAni(t),this.chara_spine.node.scaleX=.38*this.spineScale)},y.prototype.onSpineComplete=function(t){"standby"!=(t=t.animation.name||"")&&"standby_back"!=t&&"standby_box"!=t&&"standby_box_back"!=t&&"walk"!=t&&"walk_back"!=t&&"walk_box"!=t&&"walk_box_back"!=t&&""!=t&&(this.actionCount+=1,this.actionCount<=this.maxCount&&this.doneCallback&&this.doneCallback())},y.prototype.updateDir=function(t,e,o){void 0===o&&(o=!0),this.cleanAttachment(),0<=t&&0<=e?(this.downOrTop=p.EnumDownOrUp.up,this.leftOrRight=p.EnumLeftOrRight.right,this._updateDirection(),o&&this.playAniByType(p.EnumRoleAniType.walk)):0<=t&&e<0?(this.downOrTop=p.EnumDownOrUp.down,this.leftOrRight=p.EnumLeftOrRight.right,this._updateDirection(),o&&this.playAniByType(p.EnumRoleAniType.walk)):t<0&&0<=e?(this.downOrTop=p.EnumDownOrUp.up,this.leftOrRight=p.EnumLeftOrRight.left,this._updateDirection(),o&&this.playAniByType(p.EnumRoleAniType.walk)):t<0&&e<0&&(this.downOrTop=p.EnumDownOrUp.down,this.leftOrRight=p.EnumLeftOrRight.left,this._updateDirection(),o&&this.playAniByType(p.EnumRoleAniType.walk))},y.prototype.setCfgId=function(t){this.iCfgId=t},y.prototype.getCfgId=function(){return this.iCfgId},y.prototype.getCollectId=function(){return this.collect_id},y.prototype.setCollectId=function(t){this.collect_id=t},y.prototype.setPetId=function(t){this.iPetId=t},y.prototype.getPetId=function(){return this.iPetId},y.prototype.resetWalk=function(){this.pWalkFinishCb=null,this.pWalkFinishCbTarget=null,this.iCurWalkIndex=-1,this.tWalkPoints=null,this.tAStarPath=null,this.iAStarIndex=0,this.iAStarCheckCd=-1},y.prototype.setRoleAniHoe=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("hoe_back"),g.default.changePartialCloth(this.chara_spine,"b_broom","default","role_tool_60001_2")):(this._setRoleAni("hoe"),g.default.changePartialCloth(this.chara_spine,"f_broom","default","role_tool_60001_1"))},y.prototype.setRoleAniAttack=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("crossbow_back"),g.default.changePartialCloth(this.chara_spine,"b_broom","default","role_tool_60081_2")):(this._setRoleAni("crossbow"),g.default.changePartialCloth(this.chara_spine,"f_broom","default","role_tool_60081_1"))},y.prototype.setRoleAniCut=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("sickle_back"),g.default.changePartialCloth(this.chara_spine,"b_broom","default","role_tool_60021_2")):(this._setRoleAni("sickle"),g.default.changePartialCloth(this.chara_spine,"f_broom","default","role_tool_60021_1"))},y.prototype.setRoleDie=function(t,e){this.timeScale=1,this.maxCount=1,this.doneCallback=e,this._setRoleAni("die")},y.prototype.setRoleAniAxe=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("axe_back"),g.default.changePartialCloth(this.chara_spine,"b_broom","default","role_tool_60031_2")):(this._setRoleAni("axe"),g.default.changePartialCloth(this.chara_spine,"f_broom","default","role_tool_60031_1"))},y.prototype.setRoleAniPickaxe=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("mininghoe_back"),g.default.changePartialCloth(this.chara_spine,"b_broom","default","role_tool_60041_2")):(this._setRoleAni("mininghoe"),g.default.changePartialCloth(this.chara_spine,"f_broom","default","role_tool_60041_1"))},y.prototype.setRoleAniShovel=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?this._setRoleAni("shovel_back"):this._setRoleAni("shovel")},y.prototype.setRoleAniClean=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?this._setRoleAni("plant_back"):this._setRoleAni("plant")},y.prototype.resetHp=function(){this.objectHp.node.active=!1},y.prototype.showHp=function(t,e){this.objectHp.node.active=!0,this.objectHp.setData(t,e)},y.prototype.play_animation=function(t){var e,o=this.node.getComponent(cc.Animation);o&&(e=o.getClips()[0].name,o.getAnimationState(e),o.play(e),o.off("stop"),o.on("stop",function(){t&&t()}))},y.prototype.walkByPoints=function(t,e,o,n,i,a,r){var c=this;void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!0),void 0===i&&(i=!0),void 0===a&&(a=null),void 0===r&&(r=!0),this.resetWalk(),this.pWalkFinishCb=e,this.pWalkFinishCbTarget=o;for(var s=0;s<t.length;s++){var l=t[s];if(this.pZone&&this.pZone.checkHitWall(l.x,l.y)&&n)return this.callWalkFinishCb(),this.resetWalk(),!1}return this.tAStarPath=h.Utils.searchPathAStar(this.iCfgId,this.node,t[0],function(t,e){return!!c.pZone&&!!n&&c.pZone.checkHitWall(t,e)},u.gm.const.MIN_SEARCH_WAY),this.tAStarPath?(this.tWalkPoints=t,this.iCurWalkIndex=0,i&&this.unscheduleAllCallbacks(),!0):(this.deal_path_null(r),!1)},y.prototype.setiCurWalkIndex=function(){this.iCurWalkIndex=0},y.prototype.callWalkFinishCb=function(){null!=this.pWalkFinishCb&&(null==this.pWalkFinishCbTarget?this.pWalkFinishCb():this.pWalkFinishCb.apply(this.pWalkFinishCbTarget))},y.prototype.setWalkSpeed=function(t){this.iWalkSpeed=t},y.prototype.getWalkSpeed=function(){return this.iWalkSpeed},y.prototype.walkTo=function(t,e,o,n,i,a,r,c){return void 0===e&&(e=null),void 0===o&&(o=null),void 0===i&&(i=!0),void 0===a&&(a=0),void 0===r&&(r=null),void 0===c&&(c=!0),this._is_check=n=void 0===n||n,this.walkByPoints([t],e,o,n,i,r,c)},y.prototype.setIsCollectingRes=function(t){this.bIsCollectingRes=t},y.prototype.getIsCollectingRes=function(){return this.bIsCollectingRes},y.prototype.setIsFightingRes=function(t){this.bIsFightingRes=t},y.prototype.getIsFightingRes=function(){return this.bIsFightingRes},y.prototype.getIsPlantRes=function(){return this.bIsPlanting},y.prototype.setIsPlantingRes=function(t){this.bIsPlanting=t},y.prototype.setIsAnimalRes=function(t){this.bIsAnimal=t},y.prototype.get_speed=function(){return this.speed},y.prototype.set_sepped=function(t){this.speed=t},y.prototype.setIsFightingPre=function(t){this.bIsFightingPre=t},y.prototype.setIsDie=function(t){this.bisDie=t},y.prototype.getIsDie=function(){return this.bisDie},y.prototype.getIsFightingPre=function(){return this.bIsFightingPre},y.prototype.reset=function(){this.pZone=null,this.uid=0},s([a(sp.Skeleton)],y.prototype,"chara_spine",void 0),s([a(d.default)],y.prototype,"objectHp",void 0),s([a([cc.Node])],y.prototype,"bullet_node",void 0),s([a(cc.Animation)],y.prototype,"animation",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],CheckCollider:[function(t,e,o){"use strict";cc._RF.push(e,"c43d7sNk65B+ZG1JGbINPv3","CheckCollider");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("MainRoleMgr"),d=i("FootPos"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.mapObject=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.start=function(){},_.prototype.onCollisionStay=function(t){var e;this.mapObject?this.mapObject.objectID!=p.SpecialObjectID.food_factory&&this.mapObject.objectID!=p.SpecialObjectID.fruit_factory&&this.mapObject.objectID!=p.SpecialObjectID.meat_factory&&this.mapObject.objectID!=p.SpecialObjectID.feed_factory&&this.mapObject.objectID!=p.SpecialObjectID.drink_factory||(e=u.default.getInstance().mainRolePosStatus==p.EnumRolePos.Field,this.mapObject.getComponent(d.default).getFootPos().y<=t.getComponent(d.default).getFootPos().y&&e?this.mapObject.node.opacity=100:this.mapObject.node.opacity=255):cc.warn("not found mapObject",this)},_.prototype.onCollisionExit=function(){this.mapObject.node.opacity=255},s([a(h.default)],_.prototype,"mapObject",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ChickenHouse:[function(t,e,o){"use strict";cc._RF.push(e,"38a34ObJA5DlLok/YOBSfCY","ChickenHouse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("Const"),d=i("GameMgr"),h=i("BreedData"),_=i("PropMgr"),f=i("NetUtils"),g=i("BreedMgr"),y=i("LandEgg"),m=i("Chicken"),v=i("CommonAnimalHouse"),b=i("MapObject");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_chicken_coops=[],t.foodMax=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=v.default),I.prototype.start=function(){d.gm.pool.init(d.gm.const.Chicken.bundleName,d.gm.const.Chicken.loadPath,m.default),d.gm.pool.init(d.gm.const.LandEgg.bundleName,d.gm.const.LandEgg.loadPath,y.default),this.mapObject=this.getComponent(b.default);for(var t=0,e=this.mapObject.data.breedData.animals;t<e.length;t++){var o=e[t];this.createAnimal(o)}},I.prototype.updateUI=function(){this.config=g.default.getInstance().getConfig(this.mapObject.objectID,this.mapObject.data.lv),this.config?(this.foodMax=g.default.getInstance().getFoodMax(this.mapObject.data),this.mapObject.data.breedData.updateEatFood()):cc.error("not found config",this.mapObject.objectID,this.mapObject.data)},I.prototype.createAnimal=function(t){var e=this;d.gm.pool.async_get(d.gm.const.Chicken.bundleName,d.gm.const.Chicken.loadPath,m.default,function(o){e.nod_ani_layer.addChild(o.node),o.node.active=!0,o.setData(t,e.nod_pos_layer,e.getComponent(b.default).data)}),d.gm.pool.async_get(d.gm.const.LandEgg.bundleName,d.gm.const.LandEgg.loadPath,y.default,function(o){e.nod_ani_layer.addChild(o.node),o.node.active=!0,o.setData(t,e.nod_pos_layer,e.getComponent(b.default).data)})},I.prototype.onBtnBuy=function(){var t;this.mapObject.data.breedData.animals.length<g.default.getInstance().getAnimalMax(this.mapObject.data)?_.default.tryConsume([{id:u.CommonPropID.coin,num:this.config.animal_cost_money}])&&(d.gm.ui.showNotice("\u8d2d\u4e70\u6210\u529f"),(t=h.BreedAnimalData.create(this.config)).cur_energy=0,this.mapObject.data.buyAnimal(t),this.createAnimal(t),f.ReportData.instance.report_point(100005,41000001)):d.gm.ui.showNotice("\u6570\u91cf\u5df2\u8fbe\u4e0a\u9650\uff0c\u65e0\u6cd5\u8d2d\u4e70\uff0c\u8bf7\u5347\u7ea7\u5efa\u7b51")},I.prototype.onBtnReplenish=function(){this.mapObject.data.getCurEnergy(),this.foodMax;var t=this.foodMax-this.mapObject.data.getCurEnergy(),e=(t=Math.max(t,0),_.default.getConfigByPropID(this.config.animal_food_id.id));if(!e.energy)return d.gm.ui.showNotice("\u914d\u7f6e\u51fa\u9519\uff0c\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a"),void cc.error("\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a");var o=Math.ceil(t/e.energy);if(o<=0)return d.gm.ui.showNotice("\u4e0d\u9700\u8981\u8865\u5145\u9972\u6599"),void p.default.getInstance().dealByItemID(this.config.animal_food_id.id);(t=_.default.getPropCount(this.config.animal_food_id.id))<=0?p.default.getInstance().dealByItemID(this.config.animal_food_id.id):(o=Math.min(t,o),_.default.tryConsumeThing([{file:u.ThingType.normal,id:this.config.animal_food_id.id,num:o}])&&(this.mapObject.data.breedData.addEnergy(e.energy*o),f.ReportData.instance.report_point(100005,41000002)))},I.prototype.update=function(){},I.prototype.getAnimal=function(t){for(var e=0,o=this.nod_ani_layer.children;e<o.length;e++){var n=o[e].getComponent(m.default);if(n&&n.data.index==t)return n}},s([a({type:[cc.Node]})],I.prototype,"nod_chicken_coops",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],Chicken:[function(t,e,o){"use strict";cc._RF.push(e,"6296c2EARhPJrhjTqDAvhUf","Chicken");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("GameMgr"),d=i("PropMgr"),h=i("NodePoolItem"),_=i("MathUtils"),f=i("Vec2Utils"),g=i("TaskRecordData");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_tip_pos=null,t.data=null,t.initScale=.7,t.maxScale=1.8,t.lastScale=0,t.playingAni=!1,t.smallActions=["small_standby","small_walk","small_sleep","small_eat"],t.bigActions=["standby","walk","sleep","eat"],t.posNodes=[],t.isSmall=!0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=h.NodePoolItem),y.prototype.onEnable=function(){this.spine.setCompleteListener(this.onSpineComplet.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},y.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},y.prototype.setData=function(t,e,o){this.data=t,this.objectData=o,this.posNodes=e.children,e=this.getRandomPosNode(),this.node.position=e.position,this.updateUI()},y.prototype.updateUI=function(){},y.prototype.update=function(){this.data&&this._updateAni()},y.prototype._updateAni=function(){var t=(this.data.getPeriodTime()-this.data.getLeftTime())/this.data.getPeriodTime();this.lastScale=this.node.scale,this.node.scale=this.initScale+(this.maxScale-this.initScale)*t,this.node.scale<1?this.playingAni||(this.isSmall=!0,this.playNormalAni()):1==t?this.spine.setAnimation(0,"brood",!0):this.lastScale<1?this.spine.setAnimation(0,"standby_up",!1):this.playingAni||(this.isSmall=!1,this.playNormalAni())},y.prototype.playNormalAni=function(){this.playingAni=!0,this.playNextAni()},y.prototype.onSpineComplet=function(t){"standby_up"==(t=t.animation.name||"")?(this.isSmall=!1,this.playNormalAni()):"walk"==t||"small_walk"==t||this.playNormalAni()},y.prototype.playNextAni=function(){var t,e=0;"small_walk"==(t=this.isSmall?(e=_.default.randomNum(0,this.smallActions.length-1),this.smallActions[e]):(e=_.default.randomNum(0,this.bigActions.length-1),this.bigActions[e]))||"walk"==t?(this.spine.setAnimation(0,t,!0),this.walk(100)):this.spine.setAnimation(0,t,!1)},y.prototype.walk=function(t){var e=this,o=this.getRandomPosNode(),n=f.default.getDistance(cc.v2(this.node.x,this.node.y),cc.v2(o.x,o.y));o.x>this.node.x?this.spine.node.scaleX=-1*Math.abs(this.spine.node.scaleX):this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),cc.tween(this.node).to(n/t,{x:o.x,y:o.y}).call(function(){e.playNextAni()}).start()},y.prototype.getRandomPosNode=function(){return this.posNodes[_.default.randomNum(0,this.posNodes.length-1)]},y.prototype.onTouchChicken=function(){var t=this;if(this.data.canHarvest()&&!this.data.isCatch){var e=this.objectData.breedData.catch(this.data.index);if(e){p.default.fly(this.node,d.default.propItemToGainThing(e.productions)),u.gm.pool.put(this.node);for(var o=0,n=e.productions;o<n.length;o++){var i=n[o];g.default.getInstance().addHarvestRecord(i.id,1),g.default.getInstance().addHarvestCountRecord(i.id,i.num)}}}else{var a=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.nod_tip_pos&&(a=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),u.gm.ui.showModule(u.gm.const.LandTipNew,function(e){e.setData(t.data),e.updatePos(a)})}},s([a(sp.Skeleton)],y.prototype,"spine",void 0),s([a(cc.Node)],y.prototype,"nod_tip_pos",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ChooseFeed:[function(t,e,o){"use strict";cc._RF.push(e,"63ce4YLQZ9PPrBB9ILV/umt","ChooseFeed");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonPropItem"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("GuideMgr"),v=i("CattleHouse"),b=i("ChickenHouse"),I=i("PigHouse"),D=i("ChooseProductHelper");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_need=null,t.list_item=null,t.lbl_time=null,t.produceConfig=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=y.default),C.prototype.setData=function(t){this.objectData=t,this.updateUI()},C.prototype.updateUI=function(){this.produceConfig=u.ProduceUtils.getConfigArrByBuildID(this.objectData.objectID),this.list_need.numItems=this.produceConfig[0].need_prop.length,this.list_need.scrollTo(0),this.list_item.numItems=this.produceConfig[0].productions.length,this.list_item.scrollTo(0)},C.prototype.onRenderItem=function(t,e){t.getComponent(p.default).setData(this.produceConfig[0].productions[e]),t.getComponent(p.default).setCountStr("x"+this.produceConfig[0].productions[e].num)},C.prototype.onRenderNeed=function(t,e){t.getComponent(p.default).setData(this.produceConfig[0].need_prop[e])},C.prototype.onBtnFeed=function(){m.default.getInstance().endGuide(1044),_.default.tryConsume(this.produceConfig[0].need_prop,!0)&&(this.objectData.setSlotProduce(D.default.curLandIndex,this.produceConfig[0].produce_id),g.default.emit(d.GameEvent.updateLand,D.default.curBuildingUID),(this.produceConfig[0].build_id==d.SpecialObjectID.Chicken?h.gm.mapData.mapObject[this.objectData.getUID()].getComponent(b.default):this.produceConfig[0].build_id==d.SpecialObjectID.Pig?h.gm.mapData.mapObject[this.objectData.getUID()].getComponent(I.default):h.gm.mapData.mapObject[this.objectData.getUID()].getComponent(v.default)).createAnimal(this.objectData.slots[D.default.curLandIndex]),this.closeMe())},s([a(f.default)],C.prototype,"list_need",void 0),s([a(f.default)],C.prototype,"list_item",void 0),s([a(cc.Label)],C.prototype,"lbl_time",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],ChooseProductHelper:[function(t,e,o){"use strict";cc._RF.push(e,"a5fa9DKS+5O4bjXs5PeQomU","ChooseProductHelper");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),s.lands={},r=s,c.default=r,cc._RF.pop()},{}],ChooseProduct:[function(t,e,o){"use strict";cc._RF.push(e,"f4f29b8QOZP0ZTNupHXFkaG","ChooseProduct");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("List"),d=i("GameModule"),h=i("ProductChooseItem"),_=i("GuideMgr"),f=i("Const"),g=i("EventManager"),y=i("StringUtil"),m=i("GameMgr"),v=i("MainRoleMgr"),b=i("ChooseProductHelper"),I=i("LvMgr"),D=i("ProduceData"),C=i("PropMgr"),O=i("Finger"),w=i("DailyTaskData"),M=i("Formula"),P=i("MapDataHelper");function S(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_name=null,t.lbl_time=null,t.lbl_unlock_rate=null,t.nod_rate_lock=null,t.togContainer=null,t.lbl_title=null,t.lbl_lv=null,t.finger=null,t.produceConfig=[],t.selectIndex=0,t.produce_rate=1,t.togIndex=0,t.canTouch=!0,t}i=(a=cc._decorator).ccclass,a=a.property,c(S,l=d.default),S.prototype.onEnable=function(){g.default.on(f.GameEvent.factory_ui_select,this.onSelect,this)},S.prototype.onDisable=function(){g.default.off(f.GameEvent.factory_ui_select,this.onSelect,this),_.default.getInstance().resetTouchCondition()},S.prototype.onSelect=function(t){this.selectIndex=t,this.produce_rate=1,this.togIndex=0,this.updateUI()},S.prototype.setData=function(t){var e,o=this;this.canTouch=!0,this.objectData=t,_.default.getInstance().showTaskFinger(1020,1),this.produceConfig=p.ProduceUtils.getConfigArrByBuildID(this.objectData.objectID),this.produce_rate=1,this.togIndex=0,this.selectIndex=0,this.updateUI(),_.default.getInstance().touchCondition.mission==f.ConditionType.produce_rate_unlock?p.ProduceUtils.getConfigByProduceID(_.default.getInstance().touchCondition.id).build_id==this.objectData.objectID&&(e=this.getIndex(_.default.getInstance().touchCondition.id),I.default.getInstance().getLv()>=this.produceConfig[e].lv_need&&this.onSelect(e),m.gm.ui.showModule(m.gm.const.FingerGuide,function(t){t.showFingerByNode(o.nod_rate_lock.parent)})):_.default.getInstance().touchCondition.mission==f.ConditionType.produce&&p.ProduceUtils.getConfigByProduceID(_.default.getInstance().touchCondition.id).build_id==this.objectData.objectID&&(e=this.getIndex(_.default.getInstance().touchCondition.id),I.default.getInstance().getLv()>=this.produceConfig[e].lv_need&&this.onSelect(e))},S.prototype.getIndex=function(t){for(var e=0;e<this.produceConfig.length;e++)if(t==this.produceConfig[e].produce_id)return e;return 0},S.prototype.updateUI=function(){var t=this;this.togContainer.toggleItems[this.togIndex].check(),this.list.numItems=this.produceConfig.length,this.list.scrollTo(0),this.togContainer.toggleItems.forEach(function(e){t.togContainer.toggleItems[t.togIndex]==e?e.node.getChildByName("Background").active=!1:e.node.getChildByName("Background").active=!0}),this.lbl_name.string=p.PropUtils.getConfigByPropID(this.produceConfig[this.selectIndex].productions[0].id).name;var e=D.ProduceConfig.create(this.produceConfig[this.selectIndex].produce_id,this.produce_rate);this.lbl_time.string=y.default.countDownFormat_2(e.getPeriodTime()),this.nod_rate_lock.active=!this.isProduceRateUnlock(),this.lbl_unlock_rate.node.active=this.isProduceRateUnlock(),this.lbl_unlock_rate.string="x"+this.getProduceRate(this.produceConfig[this.selectIndex]),this.lbl_title.string=this.objectData.getConfig().name,this.lbl_lv.string=this.objectData.lv+""},S.prototype.onRenderList=function(t,e){t.getComponent(h.default).setData(this.produceConfig[e],this.selectIndex,this.produce_rate)},S.prototype.onBtnProduce=function(){var t,e=this;this.canTouch&&(this.canTouch=!1,_.default.getInstance().endGuide(1020),this.produceConfig[this.selectIndex].lv_need<=I.default.getInstance().getLv()?C.default.tryConsume(this.produceConfig[this.selectIndex].need_prop,!0,this.produce_rate)&&(w.DailyTaskData.getInstance().plant++,m.gm.mapData.getObjectData(b.default.curBuildingUID).setSlotProduce(b.default.curLandIndex,this.produceConfig[this.selectIndex].produce_id,this.produce_rate),g.default.emit(f.GameEvent.updateLand,b.default.curBuildingUID),g.default.emit(f.GameEvent.produce,b.default.curBuildingUID,b.default.curLandIndex),t=this.objectData.getFirstEmptySlot(),v.default.getInstance().playAniByType(f.EnumRoleAniType.sow,1,function(){var o;v.default.getInstance().setStandByAni(),t&&(o=b.default.lands[e.objectData.getUID()][t.index])&&(o.flyToStandPos(),e.canTouch=!0,b.default.curLandIndex=t.index,e.updateUI())},2),t||m.gm.ui.closeModule(m.gm.const.ChooseProduct)):m.gm.ui.showNotice("\u7b49\u7ea7\u4e0d\u8db3"))},S.prototype.onBtnRate=function(){var t=this;this.isProduceRateUnlock()?(this.produce_rate=this.getProduceRate(this.produceConfig[this.selectIndex]),this.togIndex=1):I.default.getInstance().getLv()<this.produceConfig[this.selectIndex].rate_unlock_level?m.gm.ui.showNotice(this.produceConfig[this.selectIndex].rate_unlock_level+"\u7ea7\u89e3\u9501"):m.gm.ui.showModule(m.gm.const.UnlockUI,function(e){e.setTitle(""),e.setDesc(""),e.setIconByObjectID(t.objectData.objectID),e.setNeedProp(t.produceConfig[t.selectIndex].unlock_rate_consume),e.callback=function(){m.gm.localData.addProduceRateUnlock(t.produceConfig[t.selectIndex].produce_id),t.updateUI()}}),this.updateUI()},S.prototype.onBtnRateNormal=function(){this.produce_rate=1,this.togIndex=0,this.updateUI()},S.prototype.onToggle=function(t,e){0==(e=Number(e))?this.onBtnRateNormal():1==e&&this.onBtnRate()},S.prototype.isProduceRateUnlock=function(){return m.gm.localData.produce_rate_unlock.includes(this.produceConfig[this.selectIndex].produce_id)},S.prototype.getProduceRate=function(t){var e=1;if(t.build_id!=f.SpecialObjectID.land_wet)return t.build_id==f.SpecialObjectID.land_vegetable?(o=P.default.getDataByID(10005),e=t.produce_rate,o&&(e+=M.Formula.getObjectFuncWork(o,f.E_AttrType.rate_addition))):t.build_id==f.SpecialObjectID.land_gua?(o=P.default.getDataByID(10006),e=t.produce_rate,o&&(e+=M.Formula.getObjectFuncWork(o,f.E_AttrType.rate_addition))):t.build_id==f.SpecialObjectID.land_dry&&(o=P.default.getDataByID(10004),e=t.produce_rate,o&&(e+=M.Formula.getObjectFuncWork(o,f.E_AttrType.rate_addition))),e;var o=P.default.getDataByID(10003);return e=t.produce_rate,o&&(e+=M.Formula.getObjectFuncWork(o,f.E_AttrType.rate_addition)),e},s([a(u.default)],S.prototype,"list",void 0),s([a(cc.Label)],S.prototype,"lbl_name",void 0),s([a(cc.Label)],S.prototype,"lbl_time",void 0),s([a(cc.Label)],S.prototype,"lbl_unlock_rate",void 0),s([a(cc.Node)],S.prototype,"nod_rate_lock",void 0),s([a(cc.ToggleContainer)],S.prototype,"togContainer",void 0),s([a(cc.Label)],S.prototype,"lbl_title",void 0),s([a(cc.Label)],S.prototype,"lbl_lv",void 0),s([a(O.default)],S.prototype,"finger",void 0),i=s([i],S),r.default=i,cc._RF.pop()},{}],ChooseStaffItem:[function(t,e,o){"use strict";cc._RF.push(e,"6d327Iij+dCc4QuBD+dmyK8","ChooseStaffItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("IconUtils"),h=i("List"),_=i("ListItem"),f=i("EventManager"),g=i("AttrHelper"),y=i("NodAttrItem"),m=i("NpcMgr"),v=i("TaskRecordData"),b=i("StaffData"),I=i("StaffHelper");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.spine_staff=null,t.spr_bg=null,t.list_attr=null,t.npc_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=_.default),D.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},D.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},D.prototype.setData=function(t){this.npc_id=t,this.updateUI()},D.prototype.updateUI=function(){var t=this;this.lbl_lv.node.active=!0,this.spine_staff.node.active=!0,b.default.getInstance().staffs[this.npc_id]?(this.lbl_lv.string="Lv."+b.default.getInstance().staffs[this.npc_id].lv,d.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/choose_staff/001",this.spr_bg),m.default.getInstance().loadSpineByNpcID(this.npc_id,function(e){t.spine_staff.skeletonData=e,t.spine_staff.setSkin("default"),t.spine_staff.setAnimation(0,"standby",!0)}),this.lv_config=I.default.getInstance().getStaffUpgradeConfig(this.npc_id,b.default.getInstance().staffs[this.npc_id].lv),this.list_attr.numItems=this.lv_config.attr.length,I.default.getInstance().cur_touch_uid==b.default.getInstance().staffs[this.npc_id].work_in_uid?this.setSelect():this.setSelect(!1)):(this.lbl_lv.node.active=!1,this.spine_staff.node.active=!1,d.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/choose_staff/003",this.spr_bg),this.lv_config=null,this.list_attr.numItems=0,this.setSelect(!1))},D.prototype.onTouchItem=function(){var t;b.default.getInstance().staffs[this.npc_id]?b.default.getInstance().staffs[this.npc_id].work_in_uid?(u.gm.ui.showNotice("\u8be5\u5458\u5de5\u5df2\u7ecf\u5de5\u4f5c"),I.default.getInstance().cur_touch_uid,b.default.getInstance().staffs[this.npc_id].work_in_uid):b.default.getInstance().getStaffByUID(I.default.getInstance().cur_touch_uid,I.default.getInstance().cur_touch_slot_id)?u.gm.ui.showNotice("\u5df2\u7ecf\u6709\u5458\u5de5\u5728\u6b64\u4f4d\u7f6e"):(this.setSelect(),b.default.getInstance().selectStaff(this.npc_id,I.default.getInstance().cur_touch_uid,I.default.getInstance().cur_touch_slot_id),(t=u.gm.mapData.getObjectData(I.default.getInstance().cur_touch_uid))&&(v.default.getInstance().addAppointStaff(t.objectID),f.default.emit(p.GameEvent.appoint_staff)),f.default.emit(p.GameEvent.choose_staff,I.default.getInstance().cur_touch_slot_id)):u.gm.ui.showModule(u.gm.const.StaffUI,function(t){t.setData()})},D.prototype.setSelect=function(t){(t=void 0===t||t)?(this.node.width=141,this.node.height=212):(this.node.width=125,this.node.height=173)},D.prototype.onRenderAttr=function(t,e){e=g.default.getInstance().getAttrStr(this.lv_config.attr[e]),t.getComponent(y.default).setData(e)},s([a(cc.Label)],D.prototype,"lbl_lv",void 0),s([a(sp.Skeleton)],D.prototype,"spine_staff",void 0),s([a(cc.Sprite)],D.prototype,"spr_bg",void 0),s([a(h.default)],D.prototype,"list_attr",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],ChooseStaffUI:[function(t,e,o){"use strict";cc._RF.push(e,"c9ebcdGcNxJI6S8BfXmDbVc","ChooseStaffUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("List"),d=i("EventManager"),h=i("ChooseStaffItem"),_=i("StaffHelper");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_staffs=null,t.objectData=null,t.staffs=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=cc.Component),f.prototype.onEnable=function(){d.default.on(p.GameEvent.choose_staff,this.updateUI,this)},f.prototype.onDisable=function(){d.default.off(p.GameEvent.choose_staff,this.updateUI,this)},f.prototype.setData=function(t){this.objectData=t,_.default.getInstance().cur_touch_uid=t.getUID(),this.staffs=_.default.getInstance().getDisplayStaff(this.objectData.objectID),this.updateUI()},f.prototype.updateUI=function(){this.list_staffs.numItems=this.staffs.length},f.prototype.onRenderStaff=function(t,e){t.getComponent(h.default).setData(this.staffs[e].npc_id)},f.prototype.onBtnClose=function(){this.node.active=!1},s([a(u.default)],f.prototype,"list_staffs",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],ChuanShanJiaNativeGame:[function(t,e,o){"use strict";cc._RF.push(e,"66be9vcQe9OTLjHIibUlf1g","ChuanShanJiaNativeGame");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.ChuanShanJiaNativeGame=void 0;var r,c=i("md5"),s=i("Utils"),l=i("SDKManager"),p=i("LocalData"),u=i("GameMgr"),d=i("ChannelManager"),h=i("AudioPlayer");function _(){this.REAL_NAME_AGENT="douyinapp",this.WEB_SOCKET_URL="ws://logcenter.6hgame.com:30001",this.NATIVE_AD_INSERT="370589",this.KEYCODE_BACK=6,this.GROUP_AD_SETTLEMENT=["357621","376835"],this.nativeAdType=0,this.nextNativeDataOk=!0,this.nativeShowIntervalTime=3e4,this.adConfig={ad_chaping:"",ad_shipin:"409067",ad_banner:"409069",ad_yuansheng:"",ad_yuanshengbanner:"409069",ad_yuanshengdatu01:"409071",ad_yuanshengdatu02:"409073",ad_GDYX:"",ad_kaipin:"409068"},this.notShowBigBanner=!1,this.notShowBanner=!1,this.open_id="",this.uid="",this.qq_number=0,this.is_weak_guide=0,this.is_server_cloud=!0,this.is_praise=!1,this.is_real_name=!0,this.data_code_is_show=!1,this.qq_code_copy=!0,this.get_is_show_taptap_ad=!1,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_active_btn=!0,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.ios_appStore_id="id1599232242",this.is_oldPlayerReport=!0,this.sdkReportPrice=0,this.playVideoNumberReport=6,this.edtion="",this.iBlockVideoTime=0,this.ecpmReportStat=!1,this.juLiangUrl="",this.eventName={0:"active",1:"active_register",2:"retention_2d",3:"retention_3d",4:"retention_4d",5:"retention_5d",6:"retention_6d",7:"retention_7d",25:"game_addiction"},this.is_recharge=!0,this._recharge_id=0,this._pay_id="",this._rmb=0,this._temp_user_id=""}i=(n=cc._decorator).ccclass,n.property,r=_,Object.defineProperty(_,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),_.prototype.getIsConfirmRealName=function(){},_.prototype.load_channel_env=function(t){return this.init(t),!0},_.prototype.load_sub_packages_env=function(t){return t(),!0},_.prototype.open_id_uid_init=function(){var t;""==this.open_id&&(t=(new Date).getTime().toString()+Math.round(1).toString(),this.open_id=c.default.hex_md5(t),this.uid=this.open_id)},_.prototype.get_open_id=function(){return this.open_id},_.prototype.get_uid=function(){return this.uid},_.prototype.weiXin_Login=function(t){l.SDKManager.instance.weiXin_Login(t)},_.prototype.weiXin_Login_callBack=function(t){cc.log("ChuanShanJiaNativeGame.instance.weiXin_Login_callBack: "+t)},_.prototype.onKeyDown=function(t){t.keyCode===cc.macro.KEY.back&&l.SDKManager.instance.exitGame()},_.prototype.init=function(t){console.log("\u521d\u59cb\u5316----\u7a7f\u5c71\u7532----\u914d\u7f6e "),d.ChannelManager.instance.isHardCoreChanne()&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),window.NativeGame=r.instance,this.initRemoteConfig(),this.loadNativeAdData(),u.gm.data.event_emitter.on("ON_SDK_BTN_CLICK",this.onSdkBtnClick,this),this.getReportUrl(),t(0)},_.prototype.get_edtion=function(){return this.edtion},_.prototype.initRemoteConfig=function(){var t=this,e=u.gm.const.IS_GAME_XMCT?d.ChannelManager.instance.get_channel_name()==d.ChannelManager.IPHONE_GAME||d.ChannelManager.instance.get_channel_name()==d.ChannelManager.IPAD_GAME?"https://leduo.zqygame.com/res/leduo/panda_ios/share.json?"+Math.random().toString():"ohayoo"==l.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/panda_android_ohayoo/share.json?"+Math.random().toString():"juliang"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_juliang/share.json?"+Math.random().toString():"ohayoo"==l.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/panda_android_ohayoo/share.json?"+Math.random().toString():"233"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_233/share.json?"+Math.random().toString():"hykb"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_hykb/share.json?"+Math.random().toString():"xiaomi"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_xiaomi/share.json?"+Math.random().toString():"vivo"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_vivo/share.json?"+Math.random().toString():"oppo"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_oppo/share.json?"+Math.random().toString():"huawei"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_hw/share.json?"+Math.random().toString():"4399"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/panda_android_4399/share.json?"+Math.random().toString():"google"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/51_google/share.json?"+Math.random().toString():"https://leduo.zqygame.com/res/leduo/panda_android/share.json?"+Math.random().toString():d.ChannelManager.instance.get_channel_name()==d.ChannelManager.IPHONE_GAME||d.ChannelManager.instance.get_channel_name()==d.ChannelManager.IPAD_GAME?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/02_ios/share.json?"+Math.random().toString():"ohayoo"==l.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/09_ohayoo/share.json?"+Math.random().toString():"juliang"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/08_juliang/share.json?"+Math.random().toString():"ohayoo"==l.SDKManager.instance.getChannelName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/09_ohayoo/share.json?"+Math.random().toString():"233"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/05_233/share.json?"+Math.random().toString():"hykb"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/04_hykb/share.json?"+Math.random().toString():"xiaomi"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/07_xiaomi/share.json?"+Math.random().toString():"vivo"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/11_vivo/share.json?"+Math.random().toString():"oppo"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/10_oppo/share.json?"+Math.random().toString():"huawei"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/12_hw/share.json?"+Math.random().toString():"4399"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/06_4399/share.json?"+Math.random().toString():"google"==l.SDKManager.instance.getChannelAdName()?"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/51_google/share.json?"+Math.random().toString():"https://leduo.zqygame.com/res/leduo/01_mhtxd/02_app/01_taptap/share.json?"+Math.random().toString();s.Utils.server_http_request(function(e){console.log("ChuanShanJiaNativeGame initRemoteConfig "+JSON.stringify(e)),null!=e&&null!=e.qq_number&&(t.qq_number=e.qq_number),null!=e&&null!=e.is_weak_guide&&(t.is_weak_guide=e.is_weak_guide),null!=e&&null!=e.is_server_cloud&&(t.is_server_cloud=e.is_server_cloud),null!=e&&null!=e.is_praise&&(t.is_praise=e.is_praise),null!=e&&null!=e.is_real_name&&(t.is_real_name=e.is_real_name),null!=e&&null!=e.edtion&&(t.edtion=e.edtion),null!=e&&e.is_recharge&&(t.is_recharge=e.is_recharge),null!=e&&null!=e.data_code_is_show&&(t.data_code_is_show=e.data_code_is_show),null!=e&&null!=e.qq_code_copy&&(t.qq_code_copy=e.qq_code_copy),null!=e&&null!=e.get_is_show_taptap_ad&&(t.get_is_show_taptap_ad=e.get_is_show_taptap_ad),null!=e&&null!=e.prase_percent_and&&(t.prase_percent_and=e.prase_percent_and),null!=e&&null!=e.prase_percent_ios&&(t.prase_percent_ios=e.prase_percent_ios),null!=e&&null!=e.ios_appStore_id&&(t.ios_appStore_id=e.ios_appStore_id),null!=e&&null!=e.is_show_nick_name&&(t.is_show_nick_name=e.is_show_nick_name),null!=e&&null!=e.is_show_set_ui_update&&(t.is_show_set_ui_update=e.is_show_set_ui_update),null!=e&&null!=e.is_show_active_btn&&(t.is_show_active_btn=e.is_show_active_btn),t.edtion==u.gm.const.VERSION_NUMBER&&(null!=e&&null!=e.is_praise1&&(t.is_praise=e.is_praise1),null!=e&&null!=e.is_real_name1&&(t.is_real_name=e.is_real_name1),null!=e&&null!=e.is_show_active_btn1&&(t.is_show_active_btn=e.is_show_active_btn1),null!=e&&null!=e.qq_code_copy1&&(t.qq_code_copy=e.qq_code_copy1),null!=e&&null!=e.is_show_nick_name1&&(t.is_show_nick_name=e.is_show_nick_name1),null!=e&&null!=e.is_show_set_ui_update1&&(t.is_show_set_ui_update=e.is_show_set_ui_update1)),"juliang"==l.SDKManager.instance.getChannelAdName()&&(null!=e&&null!=e.playVideoNumberReport&&(t.playVideoNumberReport=e.playVideoNumberReport),null!=e&&null!=e.is_oldPlayerReport&&(t.is_oldPlayerReport=e.is_oldPlayerReport),null!=e&&null!=e.sdkReportPrice&&(t.sdkReportPrice=e.sdkReportPrice))},this,e)},_.prototype.vibrate_long=function(){qg.vibrateLong&&qg.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},_.prototype.onSdkBtnClick=function(t){console.log("OhayooNativeGame onSdkBtnClick sSdkBtnName:"+t);var e=null;switch(t){case p.default.SETTING_COLLECT_INFO:e="https://lf9-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/0bf2e010-9d17-4b4c-a1d0-2e39fb913df3.html";break;case p.default.SETTING_PERMISSION:e="https://lf26-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/fc30fde9-2edb-4bbb-86be-6c89ee8e516c.html";break;case p.default.SETTING_PRIVACE:e="https://lf9-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/50522007-028f-44e5-916c-be5ad6110e1f.html";break;case p.default.SETTING_PROTOL:e="https://lf26-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/a53844ac-ed8e-46e6-abdb-fcef3853f1d7.html";break;case p.default.SETTING_THIRD_SDK:e="https://lf26-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/88888888/fe1a973e-2a2d-412f-a932-9c9cab35c2de.html"}console.log("OhayooNativeGame onSdkBtnClick sUrlPath:"+e),null!=e&&this.js_call_java("showWebViewPage",e)},_.prototype.phoneVibrates=function(){this.js_call_java("shakePhone")},_.prototype.onJoinHome=function(){},_.prototype.getIsAddZuomian=function(){var t=this;qg.hasShortcutInstalled({success:function(e){t.isAdd_zuomian=e,console.error("getIsAddZuomian success= ",e)},fail:function(t){console.error("getIsAddZuomian fail= ",t)},complete:function(t){console.error("getIsAddZuomian complete= ",t)}})},_.prototype.get_qq_number=function(){return this.qq_number},_.prototype.get_is_weak_guide=function(){return this.is_weak_guide},_.prototype.get_is_server_cloud=function(){return this.is_server_cloud},_.prototype.get_is_praise=function(){return this.is_praise},_.prototype.get_is_real_name=function(){return this.is_real_name},_.prototype.get_data_code_is_show=function(){return this.data_code_is_show},_.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},_.prototype.get_get_is_show_taptap_ad=function(){return this.get_is_show_taptap_ad},_.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},_.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},_.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},_.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},_.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},_.prototype.get_ios_appStore_id=function(){return this.ios_appStore_id},_.prototype.get_sdkReportPrice=function(){return this.sdkReportPrice},_.prototype.get_is_oldPlayer=function(){return this.is_oldPlayerReport},_.prototype.get_playVideoNumberReport=function(){return this.playVideoNumberReport},_.prototype.onClickBtnAddDesk=function(){},_.prototype.showAd_GDYX=function(t){void 0===t&&(t=null),this.show_more_game()},_.prototype.initAd_shipin=function(){this.preload_video_Ad()},_.prototype.hideAd_banner=function(){console.log("hide_banner_ad 1"),r.AD_Nodebanner?r.AD_Nodebanner.active=!1:(this.hide_banner_ad(),r.nextNativeShowStat[409069]=!1)},_.prototype.hideAd_custom=function(){},_.prototype.hideAd_BigBanner=function(){r.AD_NodeBigBanner?(console.log("showAd_hideAd_BigBanner 1"),r.AD_NodeBigBanner.active=!1):(this.hide_native_settlement_ad(""),r.nextNativeShowStat[409071]=!1)},_.prototype.showAd_banner=function(){var t=(new Date).getTime();t-r.nextNativeShowTime[409069]<1e4||(console.log("showAd_banner 352a149324c84ec1b6f7822b47badb91"),r.nextNativeShowTime[409069]=t,l.SDKManager.instance.showBannerAd(),r.nextNativeShowStat[409069]=!0)},_.prototype.showAd_custom=function(){},_.prototype.showAd_bannerDa=function(){var t=(new Date).getTime();t-r.nextNativeShowTime[409071]<1e4||(console.log("showAd_bannerDa \u8bbe\u7f6e\u539f\u751f\u5927\u5c4f\u8282\u70b9\u663e\u793a\u72b6\u6001"),r.nextNativeShowTime[409071]=t,this.show_native_settlement_ad(300),r.nextNativeShowStat[409071]=!0)},_.prototype.showAd_GameOverbannerDa=function(){console.log("showAd_GameOverbannerDa \u8bbe\u7f6e\u539f\u751f\u5927\u5c4f\u8282\u70b9\u663e\u793a\u72b6\u6001"),this.showAd_bannerDa(!0)},_.prototype.hideAd_GameOverbannerDa=function(){r.AD_NodeGameOverBigBanner?(console.log("hideAd_GameOverbannerDa 1"),r.AD_NodeGameOverBigBanner.active=!1):(this.hide_native_settlement_ad(""),r.nextNativeShowStat[409071]=!1)},_.prototype.hideAd_ChaPing=function(){r.AD_NodeChaping?(console.log("showAd_hideAd_chaping 1"),r.AD_NodeChaping.active=!1):this.hide_native_settlement_ad("")},_.prototype.showAd_NativeChaping=function(){var t=(new Date).getTime();t-r.nextNativeShowTime[409073]<1e4||(console.log("showAd_GameOverbannerDa \u8bbe\u7f6e\u539f\u751f\u5927\u5c4f\u8282\u70b9\u663e\u793a\u72b6\u6001"),r.nextNativeShowTime[409073]=t,this.show_interstitial_ad(),r.nextNativeShowStat[409073]=!0)},_.prototype.showAd_SettlementVideoAd=function(){console.log("ChuanShanJiaNativeGame showAd_SettlementVideoAd"),this.js_call_java("showSettlementVideoAd")},_.prototype.initAd_ChaPing=function(t){var e=this;void 0===t&&(t=!1),console.log("initAd_chaping bool:",t),cc.resources.load("prefabs/clientAd/popMyAd",cc.Prefab,function(){},function(o,n){var i=cc.instantiate(n);r.AD_NodeChaping=i,setTimeout(function(){cc.find("Canvas").addChild(i,19999),console.log("ChuanShanJiaNativeGame.tNativeAdDataMap[409073].length: "+r.tNativeAdDataMap[409073].length),0<r.tNativeAdDataMap[409073].length?(e.data_nativeAd=r.tNativeAdDataMap[409073][0],r.AD_NodeChaping.getComponent("popMyAd").setMyNativeAdData(e.data_nativeAd),t?(r.AD_NodeChaping.active=!0,e.show_native_settlement_ad("409073"),r.nextNativeShowTime[409073]=(new Date).getTime()):r.AD_NodeChaping.active=!1):r.AD_NodeChaping.active=!1},1e3)})},_.prototype.nativeLoadnextShow=function(t){"409069"==t?r.AD_Nodebanner&&r.AD_Nodebanner.active&&this.showAd_banner():"409071"==t?r.AD_NodeBigBanner&&r.AD_NodeBigBanner.active?this.showAd_bannerDa({}):r.AD_NodeGameOverBigBanner&&r.AD_NodeGameOverBigBanner.active&&this.showAd_GameOverbannerDa(!0):"409073"==t&&r.AD_NodeChaping&&r.AD_NodeChaping.active&&this.showAd_NativeChaping()},_.prototype.show_banner_ad=function(){console.log("ChuanShanJiaNativeGame show_banner_ad"),l.SDKManager.instance.showBannerAd()},_.prototype.hide_banner_ad=function(){console.log("ChuanShanJiaNativeGame hide_banner_ad"),l.SDKManager.instance.hideBannerAd()},_.prototype.testOnjsPreloadNative=function(t){var e=t,o=[];o.push("https://adsfs.heytapimage.com/ads-material-depot/image/fe17b4d6611f34d4166125026f87ccd8.jpg.short.webp"),r.tNativeAdDataMap[e][0]=t={adId:e,title:"\u62fc\u591a\u591a",desc:"\u5b89\u5353\u7528\u6237\u4e13\u5c5e\u5956\u52b1",imgUrlList:o,logoUrl:"https://adsfs.heytapimage.com/union/adlogo/o_1512387525231.png"};var n=this;cc.loader.load(o[o.length-1],function(t,o){o?n.nativeLoadnextShow(e):n.preload_native_settlement_Ad(e)})},_.prototype.onJsPreloadNativeSettlementAdSuccess=function(t){var e=this.getStr(t,0),o=this.getStr(t,1),n=this.getStr(t,2),i=[];i.push(this.getStr(t,3)),t=this.getStr(t,4),r.tNativeAdDataMap[e][0]=t={adId:e,title:o,desc:n,imgUrlList:i,logoUrl:t},r.nextNativeShowTime[e]=0;var a=this;cc.loader.load(i[i.length-1],function(t,o){o?a.nativeLoadnextShow(e):a.preload_native_settlement_Ad(e)}),console.warn("ChuanShanJiaNativeGame onJsPreloadNativeSettlementAdSuccess sAdId:"+e+" tNativeAdData:"+JSON.stringify(r.tNativeAdDataMap[e]))},_.prototype.show_native_settlement_ad=function(t){console.log("ChuanShanJiaNativeGame show_native_settlement_ad"),"409073"==t&&this.nativeChaPingShowTime++,this.js_call_java("showNativeSettlementAd",t)},_.prototype.hide_native_settlement_ad=function(t){console.log("ChuanShanJiaNativeGame hide_native_settlement_ad"),this.js_call_java("hideNativeSettlementAd",t)},_.prototype.click_native_settlement_ad=function(t){var e=this;console.log("ChuanShanJiaNativeGame click_native_settlement_ad"),this.js_call_java("clickNativeSettlementAd",t),setTimeout(function(){e.preload_native_settlement_Ad(t),e.testOnjsPreloadNative(t)},300)},_.prototype.show_more_game=function(){console.log("ChuanShanJiaNativeGame show_more_game"),this.js_call_java("showMoreGame")},_.prototype.leave_game=function(){console.log("ChuanShanJiaNativeGame leave_game"),cc.game.end()},_.prototype.on_back_pressed=function(){console.log("ChuanShanJiaNativeGame on_back_pressed"),this.js_call_java("onBackPressed")},_.prototype.set_java_data=function(t,e){console.log("ChuanShanJiaNativeGame setJavaValue sKey:"+t+"sValue:"+e),this.js_call_java("setJavaValue",t,e)},_.prototype.show_video_ad=function(t,e,o){void 0===o&&(o=0);var n=s.Utils.get_cur_time();this.iBlockVideoTime=n+10,r.pVideoRewardCb=t,r.pVideoRewardTarget=e,h.default.pauseAllMusic(),l.SDKManager.instance.showRewardVideoAd(function(){h.default.resumeAllMusic(),t.apply(e,[d.REWARD_VIDEO_AD_RESULT.REWARD])},o.toString(),function(){})},_.prototype.preload_video_Ad=function(){console.log("ChuanShanJiaNativeGame preload_video_Ad"),this.js_call_java("preloadVideoAd","947313416")},_.prototype.preload_interstitial_Ad=function(){console.log("ChuanShanJiaNativeGame preload_insert_Ad"),this.js_call_java("preloadInsertAd","947313418")},_.prototype.preload_native_settlement_Ad=function(t){this.js_call_java("preloadNativeSettlementAd",t)},_.prototype.preload_settlement_video_ad=function(){this.js_call_java("preloadSettlementVideoAd","947313420")},_.prototype.show_interstitial_ad=function(t,e){null!=t&&null!=e&&t.call(e,0),console.log("ChuanShanJiaNativeGame show_insert_ad"),this.js_call_java("showInsertAd")},_.prototype.setIntervalLoadNativeAdData=function(){},_.prototype.loadNativeAdData=function(){},_.prototype.onJsShowVideoCb=function(t){null!=r.pVideoRewardCb?(this.getBool(t,0)?r.pVideoRewardCb.call(r.pVideoRewardTarget):r.pVideoFailCb&&r.pVideoFailTarget&&r.pVideoFailCb.call(r.pVideoFailTarget),r.pVideoRewardCb=null,r.pVideoRewardTarget=null,r.pVideoFailCb=null,r.pVideoFailTarget=null):console.log("onJsShowVideoCb ChuanShanJiaNativeGame this.pVideoRewardCb == null")},_.prototype.onJsLoadScrVideoCb=function(){console.log("onJsLoadScrVideoCb,\u5168\u5c4f\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f\uff01")},_.prototype.java_call_js=function(t,e){console.log("ChuanShanJiaNativeGame java_call_js  sFuncName:"+t+" sParams:"+e);var o=[];null!=e&&""!=e&&(o=e.split("|")),null!=this[t]?this[t](o):cc.error("NativeGame not found sFuncName:"+t+" sParams:"+e)},_.prototype.getStr=function(t,e){return null==t||null==t[e]?"":t[e]},_.prototype.getBool=function(t,e){return null!=t&&null!=t[e]&&"1"==t[e].trim()},_.prototype.js_call_java=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=null;if(null!=e&&0<e.length)for(var i=0;i<e.length;i++)null!=n?n+="|":n="",n+=e[i]+"";null==n&&(n="");var a="(Ljava/lang/String;)V";console.log("ChuanShanJiaNativeGame callJavaFunc "+t+a+" sFormatParams:"+n+" jsb exist:"+(null!=window.jsb)),window.jsb&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity",t,a,n),"showVideoAd"==t&&console.log("\u64ad\u653e\u6210\u529f")},_.prototype.showPrivacyPage=function(){this.js_call_java("showPrivacyPage")},_.prototype.onReportEvent=function(t){this.js_call_java("trackEvent",t,t)},_.prototype.getReportUrl=function(){var t=u.gm.channel.get_channel_name();t==d.ChannelManager.TAP_TAP_GAME&&"juliang"==l.SDKManager.instance.getChannelAdName()?this.juLiangUrl="https://api.zqygame.com/api/juliang/report?os=0&oaid="+l.SDKManager.instance.getJsIdfa()+"&event_type=":t!=d.ChannelManager.IPHONE_GAME&&t!=d.ChannelManager.IPAD_GAME||"juliang"==l.SDKManager.instance.getChannelAdName()&&(this.juLiangUrl="https://api.zqygame.com/api/juliang/report?os=1&idfa="+l.SDKManager.instance.getJsIdfa()+"&event_type="),console.warn("END---juLiangEventReport(event)   getReportUrl:  ",this.juLiangUrl)},_.prototype.juLiangEventReport=function(t){var e;""!=this.juLiangUrl&&""!=l.SDKManager.instance.getJsIdfa()&&(e=this.juLiangUrl+this.eventName[t],s.Utils.server_http_request(function(){console.warn("END----------------    juLiangEventReport(event)   ------------------END")},this,e),"2"==t&&(e=this.juLiangUrl+"next_day_open",s.Utils.server_http_request(function(){console.warn("END----------------    juLiangEventReport(event)   ------------------END")},this,e)))},_.prototype.get_is_recharge=function(){return this.is_recharge},_.prototype.getIsRecharge=function(){return d.ChannelManager.GOOGLE_PLAY==l.SDKManager.instance.getChannelAdName()&&this.is_recharge},_.prototype.recharge=function(t,e,o,n){this._pay_id=e,console.log("recharge..........."),this._recharge_id=t,this._rmb=o,this.payCallBack=n,"111"==u.gm.data.uid&&(this._temp_user_id="9"+s.Utils.random(!0,9e5,1e6)),console.log("recharge...appLogin......"),"google"==l.SDKManager.instance.getChannelAdName()&&this.getOrderId(e,o)},_.prototype.getOrderId=function(t,e){console.log("GooglePlay getOrderId"),"111"==u.gm.data.uid?s.Utils.server_http_request(this.getGoogleRechargeRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/prepay?token=%s&uid=%s&open_id=%s&nick_name=%s&pay_id=%s&desc=%s&rmb=%s&amount=%s",u.gm.data.token,this._temp_user_id,this._temp_user_id,u.gm.data.start_data.nick_name,t,t,e,e*u.gm.const.RECHARGE_RATION+""):s.Utils.server_http_request(this.getGoogleRechargeRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/prepay?token=%s&uid=%s&open_id=%s&nick_name=%s&pay_id=%s&desc=%s&rmb=%s&amount=%s",u.gm.data.token,u.gm.data.uid,u.gm.data.open_id,u.gm.data.start_data.nick_name,t,t,e,e*u.gm.const.RECHARGE_RATION+"")},_.prototype.getGoogleRechargeRsp=function(t){var e;console.log("GooglePlay getGoogleRechargeRsp ResultCode "+t.ResultCode),0==t.ResultCode?(u.gm.data.start_data.google_order_id_list.order_id=t.data,u.gm.data.start_data.google_order_id_list.recharge_id=this._recharge_id,u.gm.data.start_data.async_write_data(),e={pay_id:this._pay_id,order_id:t.data},l.SDKManager.instance.recharge(JSON.stringify(e))):u.gm.ui.show_notice(t.msg)},_.prototype.sendRechargeSucToAndiordServer=function(t){console.log("GooglePlay sendRechargeSucToAndiordServer"),u.gm.data.start_data.google_order_id_list.purchase_token=t,u.gm.data.start_data.async_write_data(),"111"==u.gm.data.uid?s.Utils.server_http_request(this.getRechargeSucAndiordRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/verify?uid=%s&token=%s&order_id=%s&purchase_token=%s",this._temp_user_id,u.gm.data.token,u.gm.data.start_data.google_order_id_list.order_id,t):s.Utils.server_http_request(this.getRechargeSucAndiordRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/verify?uid=%s&token=%s&order_id=%s&purchase_token=%s",u.gm.data.uid,u.gm.data.token,u.gm.data.start_data.google_order_id_list.order_id,t)},_.prototype.getRechargeSucAndiordRsp=function(t){console.log("GooglePlay getRechargeSucAndiordRsp ResultCode="+t.ResultCode),0==t.ResultCode&&2==t.data.pay_status?l.SDKManager.instance.consume(t.data.purchase_token):u.gm.ui.show_notice(t.msg)},_.prototype.onConsumeSucCallBack=function(t){console.log("GooglePlay onConsumeSucCallBack"),"111"==u.gm.data.uid?s.Utils.server_http_request(this.getConsumeSucAndiordRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/verify?uid=%s&token=%s&order_id=%s&purchase_token=%s",this._temp_user_id,u.gm.data.token,u.gm.data.start_data.google_order_id_list.order_id,t):s.Utils.server_http_request(this.getConsumeSucAndiordRsp,this,u.gm.const.ServerGoogleMhtRequestUrl+"pay/google_play_pay_android/verify?uid=%s&token=%s&order_id=%s&purchase_token=%s",u.gm.data.uid,u.gm.data.token,u.gm.data.start_data.google_order_id_list.order_id,t)},_.prototype.getConsumeSucAndiordRsp=function(){if(console.log("GooglePlay getConsumeSucAndiordRsp"),l.SDKManager.instance.get_qureryPurchasesState()){var t;if(console.log("GooglePlay getConsumeSucAndiordRsp this.payCallBack is null"),!(t=u.gm.channel.get_is_new_recharge_edtion()?u.gm.config.get_row_data("GpRechargeConfigData",u.gm.data.start_data.google_order_id_list.recharge_id.toString()):u.gm.config.get_row_data("RechargeConfigData",u.gm.data.start_data.google_order_id_list.recharge_id.toString())))return;console.log("getConsumeSucAndiordRsp recharge_cfg:",JSON.stringify(t)),u.gm.data.start_data.add_recharge_reward(t),l.SDKManager.instance.set_queryPurchasesState(!1)}else console.log("GooglePlay getConsumeSucAndiordRsp this.payCallBack is run"),this.payCallBack&&this.payCallBack();u.gm.data.start_data.google_order_id_list.order_id="",u.gm.data.start_data.google_order_id_list.recharge_id=0,u.gm.data.start_data.google_order_id_list.purchase_token="",u.gm.data.start_data.async_write_data(),this.payCallBack=null},_._instance=null,_.tNativeAdDataMap={409069:[],409071:[],409073:[]},_.nextNativeShowTime={409069:0,409071:0,409073:0},_.nextNativeShowStat={409069:!1,409071:!1,409073:!1},_.pVideoRewardCb=function(){},_.pVideoRewardTarget=null,_.pVideoFailCb=function(){},_.pVideoFailTarget=null,i=r=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],_),a.ChuanShanJiaNativeGame=i,cc._RF.pop()},{}],ColorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1fc84ORZDlGXIfOnH+1/IUo","ColorUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.fromHex=function(){},n.default=i,cc._RF.pop()},{}],CommonAction:[function(t,e,o){"use strict";cc._RF.push(e,"472c6/VimJMS6m68a9XOB6V","CommonAction");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.start=function(){},l.prototype.shape=function(){cc.tween(this.node).by(.02,{x:-15}).by(.02,{x:15}).by(.02,{x:15}).by(.02,{x:-15}).start()},l.prototype.scale=function(){cc.tween(this.node).to(.02,{scale:1.1}).to(.02,{scale:1}).to(.02,{scale:.9}).to(.02,{scale:1}).start()},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],CommonAnimalHouse:[function(t,e,o){"use strict";cc._RF.push(e,"da5a61YmhhKXI9FaVp6XJGJ","CommonAnimalHouse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("EventManager"),f=i("GameObject"),g=i("HouseKeeperMgr"),y=i("MainRoleMgr"),m=i("TaskRecordData"),v=i("Chicken"),b=i("MapObject");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_ani_layer=null,t.nod_pos_layer=null,t.nod_inside=null,t.mapObject=null,t.config=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=f.GameObject),I.prototype.onEnable=function(){this.mapObject=this.getComponent(b.default),_.default.on(u.GameEvent.object_upgrade,this.updateUI,this),_.default.on(u.GameEvent.object_unlock,this.updateUI,this),_.default.on(u.GameEvent.main_role_action,this.onMainRoleAction,this);for(var t=0,e=this.nod_ani_layer.children;t<e.length;t++)e[t].active=!0;this.updateUI()},I.prototype.onDisable=function(){_.default.off(u.GameEvent.object_upgrade,this.updateUI,this),_.default.off(u.GameEvent.object_unlock,this.updateUI,this),_.default.off(u.GameEvent.main_role_action,this.onMainRoleAction,this);for(var t=0,e=this.nod_ani_layer.children;t<e.length;t++)e[t].active=!1},I.prototype.onTouchHouse=function(t){var e=this;this.mapObject.data.isLock()||d.gm.mainUI.canTouchDistrict(t.getLocation())&&(t.stopPropagation(),d.gm.ui.showModule(d.gm.const.CommonDecoration_2,function(t){t.nodDecoration.hideCommonOperateBtn(),t.setData(e.mapObject.data.getUID())}))},I.prototype.getAnimal=function(t){for(var e=0,o=this.nod_ani_layer.children;e<o.length;e++){var n=o[e].getComponent(v.default);if(n&&n.data.index==t)return n}},I.prototype.onMainRoleAction=function(t){y.default.getInstance().inObjectUID==this.mapObject.data.getUID()&&(t==u.MainRoleAction.buy?this._buy():t==u.MainRoleAction.harvest?this.onBtnHarvest():t==u.MainRoleAction.replenish&&this._replenish())},I.prototype.onBtnHarvest=function(){for(var t=0,e=this.mapObject.data.breedData.catchAll();t<e.length;t++){var o=e[t];if(o){var n=this.getAnimal(o.index);if(n){p.default.fly(n.node,h.default.propItemToGainThing(o.productions)),d.gm.pool.put(n.node);for(var i=0,a=o.productions;i<a.length;i++){var r=a[i];m.default.getInstance().addHarvestRecord(r.id,1),m.default.getInstance().addHarvestCountRecord(r.id,r.num)}}}}},I.prototype._buy=function(){this.onBtnBuy(),g.default.getInstance().reCalculateAnimal(this.mapObject.objectID)},I.prototype._replenish=function(){this.onBtnReplenish(),g.default.getInstance().reCalculateAnimal(this.mapObject.objectID)},s([a(cc.Node)],I.prototype,"nod_ani_layer",void 0),s([a(cc.Node)],I.prototype,"nod_pos_layer",void 0),s([a(cc.Node)],I.prototype,"nod_inside",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],CommonData:[function(t,e,o){"use strict";cc._RF.push(e,"9af79bBLTtJtZS7L9VMgGg2","CommonData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("StorageBase"),l=i("FoodOrderMgr"),p=i("PrayData"),u=i("AppConfig"),d=i("GameMgr"),h=i("MapDataHelper");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="CommonData",t.bbq_is_open=!1,t.house_food_desk_order_times={},t.food_orders={},t.lastDataStr="",t.sign_in_time=[],t.floor={},t.dressing={},t.my_dress=[],t.ad_count=0,t.cook_count={},t.online_time=0,t.online_stage=0,t.owned_renovation=[],t.used_renovation={},t.prayData=null,t.landAwards={},t.landAwardCollectTime={},t.lastStaffFoodTime=-1,t}r(_,c=s.StorageBase),_.prototype.onLoadDataEnd=function(){for(var t in l.default.getInstance().init(),this.food_orders){var e=new l.FoodOrder;Object.assign(e,this.food_orders[t]),this.food_orders[t]=e,this.food_orders[t].onLoadEnd(),0==this.food_orders[t].npc_id.length&&delete this.food_orders[t]}0==this.my_dress.length&&(this.my_dress=u.default.boyInitDress.getMyInitDress(d.gm.localData.sex_id)),0==Object.values(this.dressing).length&&(this.dressing=u.default.boyInitDress[d.gm.localData.sex_id]),0==this.owned_renovation.length&&(this.owned_renovation=[101001,201001]),0==Object.values(this.used_renovation).length&&(this.used_renovation=((o={})["10001_1"]=101001,o["10002_1"]=201001,o));var o=new p.default;Object.assign(o,this.prayData),this.prayData=o;for(var n=0,i=[10003,10004,10005,10006,10025,10026,10027,10028,39994,39995,39996,39997,39998,39999];n<i.length;n++){var a,r=i[n];this.landAwardCollectTime[r]||((a=h.default.getDataByID(r))&&!a.isLock()?this.landAwardCollectTime[r]=0:this.landAwardCollectTime[r]=-1)}this.async_write_data()},_.prototype.addFoodOrderTime=function(t){this.house_food_desk_order_times[t]||(this.house_food_desk_order_times[t]=0),this.house_food_desk_order_times[t]+=1,this.save()},_.prototype.getFoodOrderTimes=function(t){return this.house_food_desk_order_times[t]||0},_.prototype.resetFoodOrderTime=function(){for(var t in this.house_food_desk_order_times)this.house_food_desk_order_times[t]=0;this.save()},_.prototype.save=function(){this.async_write_data()},_.prototype.signIn=function(t){this.sign_in_time.push(t),this.save()},_.prototype.setFloor=function(t,e){this.floor[t]=e,this.save()},_.prototype.getFloorID=function(t){return this.floor[t]||1},_.prototype.addADTimes=function(){this.ad_count++,this.save()},_.prototype.addCookCount=function(t){this.cook_count[t]||(this.cook_count[t]=0),this.cook_count[t]+=1},_.prototype.getCookCount=function(t){return this.cook_count[t]||0},_.prototype.addRenovation=function(t){this.owned_renovation.push(t),this.async_write_data()},_.prototype.dayReset=function(){this.cook_count={},this.ad_count=0,this.online_stage=0,this.online_time=0,this.prayData.resetData(),this.resetFoodOrderTime()},_.prototype.getLandAward=function(t){return _.getInstance().landAwards[t]||(_.getInstance().landAwards[t]=[]),_.getInstance().landAwards[t]},r=_,a.default=r,cc._RF.pop()},{}],CommonDecoration_2:[function(t,e,o){"use strict";cc._RF.push(e,"1a978e9R7JIzIj/l76mWkA6","CommonDecoration_2");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("List"),u=i("EventManager"),d=i("GameModule"),h=i("NodStaff"),_=i("DecorationCommonNew"),f=i("Finger"),g=i("GuideMgr"),y=i("ChooseStaffUI"),m=i("StaffHelper"),v=i("AudioUtils"),b=i("Const"),I=i("GameMgr");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.nodDecoration=null,t.nod_bottom=null,t.list_cur_staff=null,t.finger_choose_staff=null,t.uid="",t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=d.default),D.prototype.onEnable=function(){u.default.on(b.GameEvent.choose_staff,this.onChooseStaff,this)},D.prototype.onDisable=function(){u.default.off(b.GameEvent.choose_staff,this.onChooseStaff,this),g.default.getInstance().resetTouchCondition()},D.prototype.setData=function(t){var e=this;this.uid=t,this.objectData=I.gm.mapData.getObjectData(this.uid),this.nod_bottom.active=!1,this.updateUI(),g.default.getInstance().touchCondition.mission==b.ConditionType.replenish_goods&&g.default.getInstance().touchCondition.id==this.objectData.objectID?this.scheduleOnce(function(){I.gm.ui.showModule(I.gm.const.FingerGuide,function(t){t.showFingerByNode(e.nodDecoration.nod_replenish)})},.5):g.default.getInstance().touchCondition.mission==b.ConditionType.appoint_staff?this.finger_choose_staff.showFinger(!0,!0):g.default.getInstance().touchCondition.mission==b.ConditionType.bbq_learn_menu&&this.scheduleOnce(function(){I.gm.ui.showModule(I.gm.const.FingerGuide,function(t){t.showFingerByNode(e.nodDecoration.nod_food_menu)})},.5)},D.prototype.updateUI=function(){this.nodDecoration.setData(this.uid),m.default.getInstance().cur_touch_uid=this.objectData.getUID(),this.list_cur_staff.numItems=m.default.getInstance().getStaffMaxCount(this.uid)},D.prototype.onRenderCurStaff=function(t){t.getComponent(h.default).updateUI()},D.prototype.onBtnChooseStaff=function(){this.nod_bottom.active=!0,this.nod_bottom.getComponent(y.default).setData(this.objectData)},D.prototype.onChooseStaff=function(t){this.updateUI(),this.chooseStaffCB(this.uid,t)},D.prototype.chooseStaffCB=function(){},D.prototype.onBtnReplenish=function(){var t=this;I.gm.ui.showModule(I.gm.const.ShelfUI,function(e){e.setData(t.uid)})},D.prototype.onBtnClose=function(){v.default.click(),this.closeMe()},s([a(_.default)],D.prototype,"nodDecoration",void 0),s([a(cc.Node)],D.prototype,"nod_bottom",void 0),s([a(p.default)],D.prototype,"list_cur_staff",void 0),s([a(f.default)],D.prototype,"finger_choose_staff",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],CommonDiamondNeed:[function(t,e,o){"use strict";cc._RF.push(e,"fa2c8lkoyhKRpXOniMPztIb","CommonDiamondNeed");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("EventManager"),u=i("Const"),d=i("PropMgr");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count=null,t.nod=null,t.data=null,t.diamondCount=0,t.deltaProp=null,t.isStall=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=cc.Component),h.prototype.setData=function(t,e){void 0===e&&(e=!1),this.data=t,this.isStall=e,this.updateUI()},h.prototype.updateUI=function(){var t=d.default.getPropCount(this.data.id),e=this.data.num-t;this.diamondCount=0,this.deltaProp=null;var o=d.default.getConfigByPropID(this.data.id);t=o.diamond_translate,0<e&&t&&!o.not_translate?(this.nod.active=!0,t&&(this.diamondCount=e*t,this.deltaProp={id:this.data.id,num:e})):this.nod.active=!1,this.lbl_count.string=this.diamondCount+""},h.prototype.onBtnBuy=function(){d.default.tryConsume([{id:u.CommonPropID.diamond,num:this.diamondCount}],!0)&&(d.default.addProps([this.deltaProp]),this.updateUI(),p.default.emit(u.GameEvent.updateBase))},s([a(cc.Label)],h.prototype,"lbl_count",void 0),s([a(cc.Node)],h.prototype,"nod",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],CommonFactory:[function(t,e,o){"use strict";cc._RF.push(e,"af6e5xFF+lN9LIDvpDfi0AH","CommonFactory");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("Formula"),h=i("GameMgr"),_=i("LvMgr"),f=i("ProduceData"),g=i("PropMgr"),y=i("List"),m=i("EventManager"),v=i("GameModule"),b=i("StringUtil"),I=i("DailyTaskData"),D=i("Finger"),C=i("GuideMgr"),O=i("FactoryNeedItem"),w=i("FactoryProductionItem"),M=i("FeedSlot");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_need=null,t.list_produce=null,t.list_worktop=null,t.lbl_name=null,t.lbl_time=null,t.nod_slots=null,t.lbl_unlock_rate=null,t.nod_rate_lock=null,t.togContainer=null,t.lbl_title=null,t.lbl_lv=null,t.rate_finger=null,t.produceConfig=[],t.selectIndex=0,t.objectData=null,t.slotIndex=-1,t.produce_rate=1,t.togIndex=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(P,l=v.default),P.prototype.onEnable=function(){m.default.on(u.GameEvent.factory_ui_select,this.onSelect,this)},P.prototype.onDisable=function(){m.default.off(u.GameEvent.factory_ui_select,this.onSelect,this),C.default.getInstance().resetTouchCondition()},P.prototype.onSelect=function(t){this.selectIndex=t,this.produce_rate=1,this.togIndex=0,this.updateUI()},P.prototype.setData=function(t,e){var o,n=this;void 0===e&&(e=-1),this.objectData=t,this.slotIndex=e,C.default.getInstance().endGuide(1048),this.selectIndex=0,this.produceConfig=p.ProduceUtils.getConfigArrByBuildID(this.objectData.objectID),this.produce_rate=1,this.togIndex=0,this.updateUI(),C.default.getInstance().touchCondition.mission==u.ConditionType.produce_rate_unlock?p.ProduceUtils.getConfigByProduceID(C.default.getInstance().touchCondition.id).build_id==this.objectData.objectID&&(o=this.getIndex(C.default.getInstance().touchCondition.id),_.default.getInstance().getLv()>=this.produceConfig[o].lv_need&&this.onSelect(o),h.gm.ui.showModule(h.gm.const.FingerGuide,function(t){t.showFingerByNode(n.nod_rate_lock.parent,!0)})):C.default.getInstance().touchCondition.mission==u.ConditionType.produce&&p.ProduceUtils.getConfigByProduceID(C.default.getInstance().touchCondition.id).build_id==this.objectData.objectID&&(o=this.getIndex(C.default.getInstance().touchCondition.id),_.default.getInstance().getLv()>=this.produceConfig[o].lv_need&&this.onSelect(o))},P.prototype.getIndex=function(t){for(var e=0;e<this.produceConfig.length;e++)if(t==this.produceConfig[e].produce_id)return e;return 0},P.prototype.updateUI=function(){var t=this;this.togContainer.toggleItems[this.togIndex].check(),this.togContainer.toggleItems.forEach(function(e){t.togContainer.toggleItems[t.togIndex]==e?e.node.getChildByName("Background").active=!1:e.node.getChildByName("Background").active=!0}),this.list_produce.numItems=this.produceConfig.length,this.list_need.numItems=this.produceConfig[this.selectIndex].need_prop.length,this.list_need.scrollTo(0),this.lbl_name.string=p.PropUtils.getConfigByPropID(this.produceConfig[this.selectIndex].productions[0].id).name;var e=f.ProduceConfig.create(this.produceConfig[this.selectIndex].produce_id,this.produce_rate);this.lbl_time.string=b.default.countDownFormat_2(e.getPeriodTime()),this.nod_rate_lock.active=!this.isProduceRateUnlock(),this.lbl_unlock_rate.node.active=this.isProduceRateUnlock(),this.lbl_unlock_rate.string="x"+this.getProduceRate(this.produceConfig[this.selectIndex]),this.lbl_title.string=this.objectData.getConfig().name,this.lbl_lv.string=this.objectData.lv+""},P.prototype.onRenderProduce=function(t,e){t.getComponent(w.default).setData(this.produceConfig[e],this.selectIndex,this.produce_rate)},P.prototype.onRenderNeedItem=function(t,e){e={id:this.produceConfig[this.selectIndex].need_prop[e].id,num:this.produceConfig[this.selectIndex].need_prop[e].num*this.produce_rate},t.getComponent(O.default).setData(e)},P.prototype.onRenderWorktopItem=function(){},P.prototype.onBtnProduce=function(){var t=this.objectData.getFirstEmptySlot();if(t=-1!=this.slotIndex?this.objectData.slots[this.slotIndex]:t){if(g.default.tryConsume(this.produceConfig[this.selectIndex].need_prop,!0,this.produce_rate)){[u.SpecialObjectID.cutter,u.SpecialObjectID.loom,u.SpecialObjectID.sawmill].includes(this.objectData.objectID)?I.DailyTaskData.getInstance().factory_other++:I.DailyTaskData.getInstance().factory_food++,I.DailyTaskData.getInstance().async_write_data(),this.objectData.setSlotProduce(t.index,this.produceConfig[this.selectIndex].produce_id,this.produce_rate);for(var e=0,o=this.nod_slots.children;e<o.length;e++){var n=o[e].getComponent(M.default);n&&n.updateUI()}m.default.emit(u.GameEvent.update_slot_ui),this.closeMe()}}else h.gm.ui.showNotice("\u6ca1\u6709\u7a7a\u4f59\u52a0\u5de5\u53f0")},P.prototype.onBtnRate=function(){var t=this;this.isProduceRateUnlock()?(this.produce_rate=this.getProduceRate(this.produceConfig[this.selectIndex]),this.togIndex=1):_.default.getInstance().getLv()<this.produceConfig[this.selectIndex].rate_unlock_level?h.gm.ui.showNotice(this.produceConfig[this.selectIndex].rate_unlock_level+"\u7ea7\u89e3\u9501"):h.gm.ui.showModule(h.gm.const.UnlockUI,function(e){e.setTitle(""),e.setDesc(""),e.setIconByObjectID(t.objectData.objectID),e.setNeedProp(t.produceConfig[t.selectIndex].unlock_rate_consume),e.callback=function(){h.gm.localData.addProduceRateUnlock(t.produceConfig[t.selectIndex].produce_id),t.updateUI()}}),this.updateUI()},P.prototype.onBtnRateNormal=function(){this.produce_rate=1,this.togIndex=0,this.updateUI()},P.prototype.onToggle=function(t,e){0==(e=Number(e))?this.onBtnRateNormal():1==e&&this.onBtnRate()},P.prototype.isProduceRateUnlock=function(){return h.gm.localData.produce_rate_unlock.includes(this.produceConfig[this.selectIndex].produce_id)},P.prototype.getProduceRate=function(t){return t.produce_rate+d.Formula.getObjectFuncWork(this.objectData,u.E_AttrType.rate_addition)},s([a(y.default)],P.prototype,"list_need",void 0),s([a(y.default)],P.prototype,"list_produce",void 0),s([a(y.default)],P.prototype,"list_worktop",void 0),s([a(cc.Label)],P.prototype,"lbl_name",void 0),s([a(cc.Label)],P.prototype,"lbl_time",void 0),s([a(cc.Node)],P.prototype,"nod_slots",void 0),s([a(cc.Label)],P.prototype,"lbl_unlock_rate",void 0),s([a(cc.Node)],P.prototype,"nod_rate_lock",void 0),s([a(cc.ToggleContainer)],P.prototype,"togContainer",void 0),s([a(cc.Label)],P.prototype,"lbl_title",void 0),s([a(cc.Label)],P.prototype,"lbl_lv",void 0),s([a(D.default)],P.prototype,"rate_finger",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],CommonItem_4:[function(t,e,o){"use strict";cc._RF.push(e,"d6bf3Ua3H9B84dT3OyTQWaZ","CommonItem_4");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("StringUtil"),d=i("CommonUtils"),h=i("Const"),_=i("IconUtils");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_name=null,t.lbl_count=null,t.rich_count=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=p.default),f.prototype.setCommonUI=function(t){d.default.setUIByGainThing(t,this.spr_icon,this.lbl_name),this.setCountStr(t.num+"")},f.prototype.setIconByName=function(t){t=_.IconUtils.getIconFullPathByName(t),_.IconUtils.setSpriteFrame(h.BundleName.COMMON,t,this.spr_icon)},f.prototype.setIconByPath=function(t){this.spr_icon&&(this.spr_icon.spriteFrame=null,_.IconUtils.setSpriteFrame(h.BundleName.COMMON,t,this.spr_icon))},f.prototype.setIconByPropID=function(t){this.spr_icon&&_.IconUtils.setPropSprite(t,this.spr_icon)},f.prototype.setIconByMenuID=function(t){this.spr_icon&&_.IconUtils.setMenuIcon(t,this.spr_icon)},f.prototype.setName=function(t){this.lbl_name.string=t},f.prototype.setRich=function(t){this.rich_count&&(this.rich_count.string=t)},f.prototype.setRichByNum=function(t,e){var o;this.rich_count&&(o=u.default.n2k(t,0)+"",this.rich_count.string=(o=t<e?"<color=#e75937>"+o+"</c>":"<color=#299517>"+o+"</c>")+"/"+e)},f.prototype.setLblCount=function(t){this.lbl_count&&(this.lbl_count.string="x"+t)},f.prototype.setCountStr=function(t){this.lbl_count&&(this.lbl_count.string=t)},s([a(cc.Sprite)],f.prototype,"spr_icon",void 0),s([a(cc.Label)],f.prototype,"lbl_name",void 0),s([a(cc.Label)],f.prototype,"lbl_count",void 0),s([a(cc.RichText)],f.prototype,"rich_count",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],CommonItem:[function(t,e,o){"use strict";cc._RF.push(e,"99993mVtxFJPKJJLkJa/XyT","CommonItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("EventManager"),d=i("StringUtil"),h=i("AccessMgr"),_=i("CommonUtils"),f=i("Const");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_name=null,t.lbl_count=null,t.canTouch=!0,t._data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=p.default),g.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),u.default.on(f.GameEvent.prop_not_enougth,this.onPropNotEnougth,this)},g.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this),u.default.off(f.GameEvent.prop_not_enougth,this.onPropNotEnougth,this)},g.prototype.setData=function(t,e){void 0===e&&(e=1),this._data=t,_.default.setUIByGainThing(t,this.spr_icon,this.lbl_name),this.lbl_count&&(this.lbl_count.string=d.default.n2k(t.num*e,2))},g.prototype.setCountStr=function(t){this.lbl_count&&(this.lbl_count.string=t)},g.prototype.onTouch=function(){this._data&&this._data.id&&this.canTouch&&h.default.getInstance().dealByItemID(this._data.id)},g.prototype.onPropNotEnougth=function(t){var e=this;t==f.CommonPropID.zi_mo_zhu&&_.default.showFingerGuide(function(t){t.showFingerByNode(e.node)})},s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),s([a(cc.Label)],g.prototype,"lbl_name",void 0),s([a(cc.Label)],g.prototype,"lbl_count",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],CommonPropItem:[function(t,e,o){"use strict";cc._RF.push(e,"7399d0mZfxMC6j/hqmLzdLJ","CommonPropItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("EventManager"),d=i("AccessMgr"),h=i("CommonUtils"),_=i("Const"),f=i("PropMgr"),g=i("IconUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.rich_count=null,t.lbl_count=null,t.lbl_name=null,t.nod_enough=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=p.default),y.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),u.default.on(_.GameEvent.updateBase,this.updateUI,this)},y.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this),u.default.off(_.GameEvent.updateBase,this.updateUI,this)},y.prototype.setData=function(t){(this.data=t)&&this.updateUI()},y.prototype.updateUI=function(){var t;this.data&&(g.IconUtils.setPropSprite(this.data.id,this.spr_icon),this.lbl_name&&(this.lbl_name.string=f.default.getConfigByPropID(this.data.id).name),this.rich_count&&(this.rich_count.string=h.default.propNeedStr(this.data)),this.nod_enough)&&(t=f.default.getPropCount(this.data.id),this.nod_enough.active=Boolean(t>=this.data.num))},y.prototype.setCountStr=function(t){this.lbl_count&&(this.lbl_count.string=t)},y.prototype.setNum=function(t,e){this.rich_count&&(this.rich_count.string=h.default.propNeedStr2(e,t)),this.nod_enough&&(this.nod_enough.active=Boolean(t<=e))},y.prototype.onTouch=function(){cc.log(this.data.id),d.default.getInstance().dealByItemID(this.data.id)},s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(cc.RichText)],y.prototype,"rich_count",void 0),s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(cc.Label)],y.prototype,"lbl_name",void 0),s([a(cc.Node)],y.prototype,"nod_enough",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],CommonRewardItem:[function(t,e,o){"use strict";cc._RF.push(e,"e93d9i07+NDuK5Sy0Vf5tLf","CommonRewardItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("PropMgr"),d=i("IconUtils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_name=null,t.lbl_count=null,t.nod_check=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=p.default),h.prototype.onEnable=function(){},h.prototype.onDisable=function(){},h.prototype.setData=function(t){d.IconUtils.setPropSprite(t.id,this.spr_icon),this.lbl_name&&(this.lbl_name.string=u.default.getConfigByPropID(t.id).name),this.lbl_count&&(this.lbl_count.string="X"+t.num)},h.prototype.setCheck=function(t){this.nod_check.active=t},s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),s([a(cc.Label)],h.prototype,"lbl_name",void 0),s([a(cc.Label)],h.prototype,"lbl_count",void 0),s([a(cc.Node)],h.prototype,"nod_check",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],CommonUtils:[function(t,e,o){"use strict";cc._RF.push(e,"c9ff6FGRl5KLbMY2PLC2mT0","CommonUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("AssetMgr"),r=n("PathFinderMgr"),c=n("RedDotComponent"),s=n("MyAStar"),l=n("UIMgr"),p=n("ObjectUtils"),u=n("StringUtil"),d=n("TMXUtils"),h=n("Vec2Utils"),_=n("FoodOrderMgr"),f=n("DailyTaskData"),g=n("DecorationMgr"),y=n("MainRoleMgr"),m=n("MainHouse"),v=n("AudioUtils"),b=n("ConfigUtils"),I=n("Const"),D=n("FlyIconCreator"),C=n("GameMgr"),O=n("LvMgr"),w=n("MapDataHelper"),M=n("PropMgr"),P=n("IconUtils"),S=n("ChannelManager"),T=n("NetUtils"),j=n("Utils"),k=n("CommonData"),A=n("EventManager"),R=n("ReplacementHelper"),N=n("MathUtils"),E=n("ObjectMgrHelper"),B=n("NodTask"),U=n("TaskTargetItem");function G(){}G.getMasteryNeed=function(t){return t?t.base*(1+t.rate):0},G.checkMastery=function(t,e){void 0===e&&(e=!1);for(var o=0,n=t;o<n.length;o++){var i=n[o],a=M.default.getPropCount(i.id);if(this.getMasteryNeed(i)>a)return e&&C.gm.ui.showNotice("\u719f\u7ec3\u5ea6\u4e0d\u8db3"),!1}return!0},G.setUIByGainThing=function(t,e,o,n){var i;void 0===n&&(n=null),t.file!=I.ThingType.normal&&t.file?t.file==I.ThingType.mapObject?(P.IconUtils.setObjectSprite(t.id,e),(i=b.BigMapConfigUtils.getConfig(t.id))?(o&&(o.string=i.name),n&&(n.string=i.desc||"")):cc.error("not config",t)):t.file==I.ThingType.menu?(i=b.ConfigUtils.FoodMenuUtils.getConfigByID(t.id),P.IconUtils.setMenuIcon(t.id,e),i?(o&&(o.string=i.menu_name),n&&(n.string=i.menu_describe)):cc.error("not config",t)):t.file==I.ThingType.replacement&&(P.IconUtils.setDrawIcon(String(t.id),e),(i=R.default.getInstance().getConfigById(String(t.id)))?(o&&(o.string=i.name),n&&(n.string=i.describe)):cc.error("not config",t)):(P.IconUtils.setPropSprite(t.id,e),(i=M.default.getConfigByPropID(t.id))?(o&&(o.string=i.name),n&&(n.string=i.desc)):cc.error("not config",t))},G.createOriginalUID=function(t,e,o,n){return o=Number(t).toString(32)+"-"+Number(e).toString(32)+"-"+Number(o).toString(32),n&&(o+="-"+n),o},G.createNewUID=function(){return C.gm.localData.lastObjectIndex++,C.gm.localData.saveByKey("lastObjectIndex"),Number(C.gm.localData.lastObjectIndex).toString(32)+"-"+Date.now().toString(32)},G.propNeedStr=function(t){var e=M.default.getPropCount(t.id);return t=t.num,this.propNeedStr2(e,t)},G.propNeedStr2=function(t,e){return(e<=t?"<color=#7BA61D>"+u.default.n2k(t,0)+"</c>":"<color=#EA6A38>"+u.default.n2k(t,0)+"</c>")+"<color=#7E736F>/"+u.default.n2k(e,0)+"</color>"},G.propNeedStr3=function(t,e,o){var n=u.default.n2k(e,0)+"";if(e<o){if(n="<color=#FF0000>"+n+"</c>",t==I.CommonPropID.heart||t==I.CommonPropID.coin)return"<color=#FF0000>"+o+"</c>"}else if(n="<color=#299517>"+n+"</c>",t==I.CommonPropID.heart||t==I.CommonPropID.coin)return"<color=#299517>"+o+"</c>";return n+"/"+o},G.onTouchDecoration=function(t){t.data.getConfig().can_interact&&t.object_common?t.object_common.showInteract():this.showDecorationUI(t)},G.showDecorationUI=function(t){var e,o,n=t.objectID,i=E.default.getInstance().getConfigByObjectData(t.data);i?C.gm.ui.showModule(C.gm.const.ObjectMgrUI,function(e){e.setData(t,i)}):n==I.SpecialObjectID.cooking_bench?C.gm.ui.showModule(C.gm.const.MenuUI):n==I.SpecialObjectID.like_building?M.default.tryConsume([{id:I.CommonPropID.cook_like,num:C.gm.config.data.Setting[0].InitialSatisfactionNum}],!0)&&(e=_.default.getInstance().getAwardByLike(),C.gm.ui.showModule(C.gm.const.GetAwardUINew,function(t){t.setVideo(!0),t.setData(e)})):n==I.SpecialObjectID.bbq_like_building?M.default.tryConsume([{id:I.CommonPropID.bbq_like,num:C.gm.config.data.Setting[0].InitialSatisfactionNum}],!0)&&(o=_.default.getInstance().getAwardByLike(),C.gm.ui.showModule(C.gm.const.GetAwardUINew,function(t){t.setVideo(!0),t.setData(o)})):g.default.getDataModel(t.data.objectID,t.data.lv)?C.gm.ui.showModule(C.gm.const.DecorationInteractUI,function(e){e.setData(t)}):cc.error("\u88c5\u9970\u8868\u6ca1\u6709\u914d\u7f6e",t.data.objectID)},G.createTaskItem=function(t){a.default.getInstance().getResAsyn(I.BundleName.MAIN_UI,"prefabs/task/nod_task",cc.Prefab,function(e){t(e)})},G.getGuide_1001=function(){return C.gm.ui.get_module(C.gm.const.Guide)},G.addDecoration=function(t,e){void 0===e&&(e=!0);var o={x:0,y:0,objectID:t},n=G.createNewUID();C.gm.localData.collect_decoration_datas[n]=o,C.gm.localData.saveByKey("collect_decoration_datas"),e&&C.gm.ui.showNotice("\u83b7\u5f97"+b.BigMapConfigUtils.getConfig(t).name),3<=(e=g.default.getConfig(t,1)).color&&j.Utils.broadWorld(I.BroadTypeEnum.BroadDecorate,e.color,b.BigMapConfigUtils.getConfig(t).name)},G.setBulletSprite=function(t,e){P.IconUtils.setSpriteFrame(I.BundleName.MAIN_UI,t="texture/explore/bullet/"+t,e)},G.setNumSprite=function(t,e){P.IconUtils.setSpriteFrame(I.BundleName.COMMON,t,e)},G.flyIconToWarehouse_2=function(t,e,o,n){void 0===n&&(n=null),o=Math.min(4,o);var i=C.gm.ui.get_layer_node(l.LayerType.TOP);e.setFlyIconParent(i),e.flyIconByNode_2(e.nod_from,G.getBaseUI().nod_warehouse,1,o,t,n)},G.flyIconToExp_2=function(t,e,o,n){void 0===n&&(n=null),o=Math.min(4,o);var i=C.gm.ui.get_layer_node(l.LayerType.TOP);e.setFlyIconParent(i),e.flyIconByNode_2(e.nod_from,G.getBaseUI().nod_exp,1,o,t,n)},G.flyLikeIcon=function(t,e,o,n){void 0===n&&(n=null),o=Math.min(4,o);var i=C.gm.ui.get_layer_node(l.LayerType.TOP);e.setFlyIconParent(i),(i=w.default.findDataByObjectID(I.SpecialObjectID.like_building,!1))&&i.loadObject(function(i){e.flyIconByNode_2(e.nod_from,i.node,1,o,t,n)})},G.flyBBQLikeIcon=function(t,e,o,n){void 0===n&&(n=null),o=Math.min(4,o);var i=C.gm.ui.get_layer_node(l.LayerType.TOP);e.setFlyIconParent(i),(i=w.default.findDataByObjectID(I.SpecialObjectID.bbq_like_building,!1))&&i.loadObject(function(i){e.flyIconByNode_2(e.nod_from,i.node,1,o,t,n)})},G.flyMapObjectIcon=function(t,e,o,n){void 0===n&&(n=null),o=Math.min(1,o);var i=C.gm.ui.get_layer_node(l.LayerType.TOP);e.setFlyIconParent(i),e.flyIconByNode_2(e.nod_from,G.getBaseUI().nod_decorate,1,o,t,n)},G.fly=function(t,e,o){void 0===o&&(o=null);var n=C.gm.ui.get_module(C.gm.const.Explore),i=null;n&&n.getMainChara()?(i=n.getMainChara().getComponent(D.default))||(i=n.getMainChara().addComponent(D.default)):(i=y.default.getInstance().mainRole.getComponent(D.default))||(i=y.default.getInstance().mainRole.addComponent(D.default)),i.nod_from=t;for(var a=0,r=e;a<r.length;a++){var c=r[a];(c=p.default.copy(c)).file||(c.file=I.ThingType.normal),c.file==I.ThingType.normal?c.id==I.CommonPropID.exp?G.flyIconToExp_2(c,i,c.num,o):c.id==I.CommonPropID.cook_value?G.flyIconToExp_2(c,i,c.num):c.id==I.CommonPropID.cook_like?G.flyLikeIcon(c,i,c.num):c.id==I.CommonPropID.bbq_like?G.flyBBQLikeIcon(c,i,c.num):G.flyIconToWarehouse_2(c,i,c.num):c.file==I.ThingType.mapObject&&G.flyMapObjectIcon(c,i,c.num)}},G.checkBuildMode=function(){return b.BuildBuildingUtils.status!=I.EnumBuildStatus.None?(b.BuildBuildingUtils.status==I.EnumBuildStatus.Prepare&&b.BuildBuildingUtils.closeBuildUI(),!0):g.default.status!=I.EnumDecorateStatus.None&&(g.default.status==I.EnumDecorateStatus.Prepare&&g.default.closeDecorateUI(),!0)},G.getPrefab=function(t,e,o){a.default.getInstance().getResAsyn(t,e,cc.Prefab,function(t){o(t)},function(t){cc.error(t)})},G.loadMapObjectPrefab=function(t,e){var o=b.BigMapConfigUtils.getConfig(t);t="build_"+t,o&&o.prefab_id&&(t=o.prefab_id),G.getPrefab(I.BundleName.MAIN_UI,"prefabs/buildings/"+t,function(t){e(t)})},G.getCenterPoint=function(t){return t=h.default.getCenterPoint(t),cc.v2(t.x,t.y)},G.getPath=function(t,e,o){if(e.x>t.x+(o=void 0===o?100:o)||e.x<t.x-o||e.y>t.y+o||e.y<t.y-o)return cc.warn("\u5bfb\u8def\u8d85\u51fa\u8303\u56f4"),[];var n=new s.default,i=w.default.getVisibleObstacles();return(new Date).getTime(),n.init(cc.v2(o,o),t,e,i),n.run(),n.getPath()},G.getPath_2=function(t,e,o){if(void 0===o&&(o=null),e.x>t.x+150||e.x<t.x-150||e.y>t.y+150||e.y<t.y-150)return cc.warn("\u5bfb\u8def\u8d85\u51fa\u8303\u56f4"),[];var n=w.default.getVisibleObstacles();r.default.getInstance().setData(cc.v2(150,150),t,e,n,o)},G.getPath_3=function(t,e,o){(e.x>t.x+13||e.x<t.x-13||e.y>t.y+13||e.y<t.y-13)&&(cc.warn("\u5bfb\u8def\u8d85\u51fa\u8303\u56f4"),o([])),o={size:cc.v2(13,13),start:t,end:e,obstacles:[],obstacle_data:C.gm.mapData.obstacleData.getMapObstacle(),cb:o},r.default.getInstance().addTask(o)},G.checkCanProduce=function(t){for(var e=0,o=C.gm.config.data.Produce;e<o.length;e++){var n=o[e];if(O.default.getInstance().getLv()>=n.lv_need)for(var i=0,a=n.productions;i<a.length;i++){var r=a[i];if(r.id==t&&M.default.getConfigByPropID(r.id).shop_price)return!0}}return!1},G.checkProductionCanSell=function(t){return!!(M.default.checkFindProp(t)&&M.default.getConfigByPropID(t).shop_price&&this.checkCanProduce(t))},G.isCross=function(t,e,o,n){for(var i=t;i<=e;i++)for(var a=o;a<=n;a++)if(i==a)return!0;return!1},G.worldGridToObjectLayerPos=function(t){return t=d.default.tileToCocos(t,C.gm.mapData.mapSize,C.gm.const.GridSize),C.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)},G.worldGridToPos=function(t){return d.default.tileToCocos(t,C.gm.mapData.mapSize,C.gm.const.GridSize)},G.tryToOpenHouse=function(t){t&&t.objectID==I.SpecialObjectID.mainHouse&&C.gm.mapData.mapObject[t.getUID()].getComponent(m.default).open()},G.showVideo=function(t,e){40000020!=(e=void 0===e?0:e)&&k.default.getInstance().ad_count>=(C.gm.config.data.Setting[0].DailyADMax||20)?C.gm.ui.showNotice("\u6bcf\u65e5\u89c2\u770b\u89c2\u770b\u5e7f\u544a\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"):(e&&T.ReportData.instance.report_point(100002,e),C.gm.channel.show_video_ad(function(o){o==S.REWARD_VIDEO_AD_RESULT.REWARD?(e&&T.ReportData.instance.report_point(200002,e),k.default.getInstance().addADTimes(),f.DailyTaskData.getInstance().ad++,f.DailyTaskData.getInstance().async_write_data(),v.default.playBgHome(),t()):o==S.REWARD_VIDEO_AD_RESULT.PULL_UP&&e&&T.ReportData.instance.report_point(200001,e)},this))},G.isInMainScene=function(){return C.gm.ui.cur_scene_name==C.gm.const.MainUI.key},G.isInExplore=function(){return C.gm.ui.cur_scene_name==C.gm.const.Explore.key},G.isInPetRoom=function(){return C.gm.ui.cur_scene_name==C.gm.const.PetRoom.key},G.tipToGohome=function(){C.gm.ui.showNotice("\u8bf7\u56de\u5bb6\u64cd\u4f5c"),C.gm.ui.showModule(C.gm.const.FingerGuide,function(t){t.showFingerByNode(G.getBaseUI().nod_explore)})},G.createRedDot=function(t,e,o,n,i){void 0===o&&(o=0),void 0===n&&(n=0),void 0===i&&(i=null),G.getPrefab(I.BundleName.MAIN_UI,"prefabs/house_keeper/red_dot",function(a){a=cc.instantiate(a),t.addChild(a),(a=a.getComponent(c.default)).dotName=e,a.offsetX=o,a.offsetY=n,i&&i(a)})},G.checkInMainDistrict=function(t,e){return 78<=t&&t<=142&&90<=e&&e<=128&&!(107<=t&&t<=112&&116<=e&&e<=123)},G.checkGridsInMainDistrict=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];if(!this.checkInMainDistrict(n.x,n.y))return!1}return!0},G.goToExploreByID=function(t){var e=C.gm.ui.get_module(C.gm.const.Explore);e&&e.node.active?e.goTaskRed(t):C.gm.ui.showModule(C.gm.const.ExploreLoading,function(){C.gm.ui.showModule(C.gm.const.Explore,function(e){e.setData(t)})})},G.showFingerGuide=function(t){C.gm.ui.showModule(C.gm.const.FingerGuide,function(e){t(e)})},G.checkIsStallDesk=function(t){return[I.SpecialObjectID.stall_desk_1,I.SpecialObjectID.stall_desk_2,I.SpecialObjectID.stall_desk_3,I.SpecialObjectID.stall_desk_4,I.SpecialObjectID.stall_desk_5,I.SpecialObjectID.stall_desk_6].includes(t)},G.checkIsBBQIceBox=function(t){return[I.SpecialObjectID.bbq_ice_box_1,I.SpecialObjectID.bbq_ice_box_2,I.SpecialObjectID.bbq_ice_box_3].includes(t)},G.checkIsBBQBoard=function(t){return[I.SpecialObjectID.bbq_board_1,I.SpecialObjectID.bbq_board_2,I.SpecialObjectID.bbq_board_3].includes(t)},G.changeFloor=function(t,e){(t=w.default.getDataByID(t))&&(k.default.getInstance().setFloor(t.getUID(),e),A.default.emit(I.GameEvent.change_floor))},G.loadMainRoleSpine=function(t,e,o){void 0===e&&(e=null);var n=(o=void 0===o?C.gm.localData.sex_id:o)?"boy":"girl";a.default.getInstance().getResAsyn(I.BundleName.MAIN_UI,"ani/main_role_spine/"+n,sp.SkeletonData,function(i){console.log("===============sex_id",o,n),t.skeletonData=i,e&&e(i)})},G.createMainhouseFoodRandomGrid=function(){for(var t=N.default.randomNum(120,126),e=N.default.randomNum(107,114),o=w.default.checkCanStand(cc.v2(t,e)),n=0;!o&&n<=3;)t=N.default.randomNum(120,126),e=N.default.randomNum(107,114),o=w.default.checkCanStand(cc.v2(t,e)),n++;return o?cc.v2(t,e):cc.v2(126,113)},G.converToNewGrid=function(t){var e=Math.round((t.x+1)/8)-1,o=Math.round((t.y+1)/8)-1;return cc.log("converToNewGrid",t.x,t.y,e,o),cc.v2(e,o)},G.getBaseUI=function(){return C.gm.ui.get_module(C.gm.const.BaseUI)},G.getContentNode=function(){return(C.gm.ui.cur_scene_name==C.gm.const.MainUI.key?C.gm.ui.get_module(C.gm.const.MainUI):C.gm.ui.get_module(C.gm.const.PetMap)).getContentNode()},G.pointToTask=function(t){void 0===t&&(t=null);var e=C.gm.ui.get_module(C.gm.const.BaseUI).nod_task.children[0].getComponent(B.default);e&&e.task&&e.nod_bubble.active?C.gm.ui.showModule(C.gm.const.BlockGuide,function(o){C.gm.ui.showTopBlock(!1),o.scheduleOnce(function(){o.setTargetNode(e.nod_content.children[e.getMessage().length]),o.setTouchCb(function(){var o=e.nod_content.children[e.getMessage().length+0].getComponent(U.default);o&&o.onTouchItem(),C.gm.ui.closeModule(C.gm.const.BlockGuide),t&&t()})})}):t&&t()},n=G,i.default=n,cc._RF.pop()},{}],CompletionDistrictItem:[function(t,e,o){"use strict";cc._RF.push(e,"034330ys+pC1ITrYah5fhyN","CompletionDistrictItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("List"),u=i("ListItem"),d=i("CompletionHelper"),h=i("CompletionObjectItem");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.object_list=null,t.nod_completion=null,t.lbl_completion=null,t.nod_content=null,t.lbl_tip=null,t.dataArr=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=u.default),_.prototype.setData=function(t){this.data=t,this.updateUI()},_.prototype.updateUI=function(){this.lbl_title.string=this.data.name,this.dataArr=d.default.getInstance().getDecorations(this.data.object_id,this.data.range);var t=d.default.getInstance().getCurCompletion(this.dataArr);this.nod_completion.getComponent(cc.ProgressBar).progress=t/100,this.lbl_completion.string=t+"%",this.lbl_tip.string="\u7231\u5fc3\u52a0\u6210\uff1a"+Math.floor(t/25)+"%",this.updateGifts()},_.prototype.updateGifts=function(){for(var t=this.dataArr,e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;for(var n=0;n<t.length;n++){var i=this.nod_content.children[n];i||(i=cc.instantiate(this.nod_content.children[0]),this.nod_content.addChild(i,n)),i.getComponent(h.default).setData(t[n]),i.active=!0}},_.prototype.onRenderList=function(){},s([a(cc.Label)],_.prototype,"lbl_title",void 0),s([a(p.default)],_.prototype,"object_list",void 0),s([a(cc.Node)],_.prototype,"nod_completion",void 0),s([a(cc.Label)],_.prototype,"lbl_completion",void 0),s([a(cc.Node)],_.prototype,"nod_content",void 0),s([a(cc.Label)],_.prototype,"lbl_tip",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],CompletionHelper:[function(t,e,o){"use strict";cc._RF.push(e,"d7b12nk8TZBlKaG+6a8UdZB","CompletionHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("GameMgr"),l=i("MapDataHelper"),p=i("Singleton"),u=i("DecorationMgr");function d(){return null!==c&&c.apply(this,arguments)||this}r(d,c=p.default),d.prototype.getDecorationSons=function(t,e){var o,n=[],i=s.gm.mapData.getAllObjectDatas();for(o in i){var a=i[o],r=a.getParentData();a.isDecoration()&&r&&r.objectID==t.objectID&&(r=u.default.getConfig(a.objectID,1))&&r.type==e&&n.push(a)}return n},d.prototype.getArrMaxCompletion=function(t){for(var e=0,o=0,n=t;o<n.length;o++){var i=n[o],a=s.gm.config.decorationConfigs[i.objectID].length;(a=u.default.getConfig(i.objectID,a))&&(a.comp?e+=a.comp:cc.warn("not completion_num",a))}return e},d.prototype.getCurCompletion=function(t){for(var e=0,o=0,n=t;o<n.length;o++){var i=n[o];i.isLock()||(i=u.default.getConfig(i.objectID,i.lv))&&(i.comp?e+=i.comp:cc.warn("not completion_num",i))}return e},d.prototype.getObjectRange=function(t){for(var e=0,o=s.gm.config.data.DecorationCompletion;e<o.length;e++){var n=o[e],i=t.getParentData();if(i){if(n.object_id==i.objectID){var a=t.getLocalGrid().sub(cc.v2(n.left_top.x,n.left_top.y)),r=cc.v2(n.right_bottom.x,n.right_bottom.y).sub(t.getLocalGrid());if(0<=a.x&&0<=a.y&&0<=r.x&&0<=r.y)return{object_id:n.object_id,range:n.range}}}else if(a=t.getLocalGrid().sub(cc.v2(n.left_top.x,n.left_top.y)),r=cc.v2(n.right_bottom.x,n.right_bottom.y).sub(t.getLocalGrid()),0<=a.x&&0<=a.y&&0<=r.x&&0<=r.y)return{object_id:n.object_id,range:n.range}}return{object_id:0,range:0}},d.prototype.checkCanUnlock=function(t,e,o){void 0===o&&(o=!0);var n=this.getConfig(t,e);return n?!n.completion||(e=this.getDecorations(n.completion.id,n.completion.district),this.getCurCompletion(e)>=n.completion.value||(o&&(o=this.getConfig(n.completion.id,n.completion.district),s.gm.ui.showNotice(o.name+"\u88c5\u9970\u8fdb\u5ea6\u4e0d\u8db3"+n.completion.value+"%"),s.gm.ui.showModule(s.gm.const.CompletionUI,function(t){t.setData(n.completion.id,n.completion.district)})),!1)):(cc.error("error:",t,e),!0)},d.prototype.getDecorations=function(t,e){var o=[],n=s.gm.mapData.getAllObjectDatas(),i=null;1e3<=t&&(i=l.default.getDataByID(t));var a=this.getConfig(t,e);if(a){for(var r in n){var c=n[r],p=c.getParentData();c.isDecoration()&&(!(r=u.default.getConfig(c.objectID,1))||2!=r.type||p&&i!=p||(r=c.getLocalGrid().sub(cc.v2(a.left_top.x,a.left_top.y)),p=cc.v2(a.right_bottom.x,a.right_bottom.y).sub(c.getLocalGrid()),0<=r.x&&0<=r.y&&0<=p.x&&0<=p.y&&o.push(c)))}return o.sort(function(t,e){return t.objectID-e.objectID}),o}},d.prototype.getConfig=function(t,e){for(var o=0,n=s.gm.config.data.DecorationCompletion;o<n.length;o++){var i=n[o];if(i.object_id==t&&i.range==e)return i}},d.prototype.getHeartObjectCompletion=function(t,e){return e=this.getDecorations(t,e),this.getCurCompletion(e)},r=d,a.default=r,cc._RF.pop()},{}],CompletionObjectItem:[function(t,e,o){"use strict";cc._RF.push(e,"eaa73o0Am1AzrM9qdkP1psF","CompletionObjectItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("JumpMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("DecorationMgr");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.spr_bg=null,t.nod_lock=null,t.nod_done=null,t.spr_quality=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=_.default),g.prototype.onLoad=function(){l.prototype.onLoad.call(this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){this.nod_lock.active=Boolean(this.data.isLock()),this.nod_done.active=Boolean(!this.data.isLock()),h.IconUtils.setObjectSprite(this.data.objectID,this.spr_icon);var t=Boolean(this.data.isLock())?"004":"003";h.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/completion/"+t,this.spr_bg),(t=f.default.getDataModel(this.data.objectID,1))&&t.config.color&&h.IconUtils.setQuality(t.config.color,this.spr_quality)},g.prototype.onTouch=function(){d.default.getInstance().jumpToGrid(this.data.getWorldGrid()),this.data.loadObject(function(t){t.showFinger()}),u.gm.ui.closeModule(u.gm.const.CompletionUI)},s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),s([a(cc.Sprite)],g.prototype,"spr_bg",void 0),s([a(cc.Node)],g.prototype,"nod_lock",void 0),s([a(cc.Node)],g.prototype,"nod_done",void 0),s([a(cc.Sprite)],g.prototype,"spr_quality",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],CompletionUI:[function(t,e,o){"use strict";cc._RF.push(e,"7184179yA9JiZQahEMJV0hY","CompletionUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("List"),d=i("GameModule"),h=i("CompletionDistrictItem");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.default),_.prototype.onEnable=function(){},_.prototype.onDisable=function(){},_.prototype.setData=function(t,e){var o=this;if(void 0===t&&(t=0),void 0===e&&(e=0),this.updateUI(),t&&e)for(var n=this,i=0;i<p.gm.config.data.DecorationCompletion.length&&"break"!==function(i){var a=p.gm.config.data.DecorationCompletion[i];if(a.object_id==t&&a.range==e)return n.scheduleOnce(function(){o.list.scrollTo(i,0)},.5),"break"}(i);i++);},_.prototype.updateUI=function(){this.list.numItems=p.gm.config.data.DecorationCompletion.length},_.prototype.onRender=function(t,e){t.getComponent(h.default).setData(p.gm.config.data.DecorationCompletion[e])},_.prototype.onDestroy=function(){},s([a(u.default)],_.prototype,"list",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ConfigProxy:[function(t,e,o){"use strict";cc._RF.push(e,"ba5e5o9t3JNWbSFa2oc5+t0","ConfigProxy");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t._propMap={},t._bigMapObject={},t._tasks={},t._collections={},t._outsideMap={},t._outsideMapRes={},t._exploreStore={},t._menuConfigs={},t._barbecueMenu={},t._decorationConfigs={},t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),s.prototype.initConfig=function(t){this._dbConfig=t},Object.defineProperty(s.prototype,"data",{get:function(){return this._dbConfig},enumerable:!1,configurable:!0}),s.prototype.getPropMap=function(){if(0==Object.keys(this._propMap).length)for(var t=0,e=this._dbConfig.Prop;t<e.length;t++){var o=e[t];this._propMap[o.id]=o}return this._propMap},s.prototype.getBigMapObjectConfig=function(){if(!this._dbConfig)return{};if(0==Object.keys(this._bigMapObject).length)for(var t=0,e=this._dbConfig.BigMapObjects;t<e.length;t++){var o=e[t];this._bigMapObject[o.object_id]=o}return this._bigMapObject},Object.defineProperty(s.prototype,"taskConfigs",{get:function(){if(0==Object.keys(this._tasks).length)for(var t=0,e=this._dbConfig.Tasks;t<e.length;t++){var o=e[t];this._tasks[o.id]=o}return this._tasks},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"collectionsConfig",{get:function(){if(0==Object.keys(this._collections).length)for(var t=0,e=this._dbConfig.Collections;t<e.length;t++){var o=e[t];this._collections[o.id]=o}return this._collections},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"outsideMapConfig",{get:function(){if(0==Object.keys(this._outsideMap).length)for(var t=0,e=this._dbConfig.OutsideMap;t<e.length;t++){var o=e[t];this._outsideMap[o.id]=o}return this._outsideMap},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"outsideMapResConfig",{get:function(){if(0==Object.keys(this._outsideMapRes).length)for(var t=0,e=this._dbConfig.OutsideMapRes;t<e.length;t++){var o=e[t];this._outsideMapRes[o.id]=o}return this._outsideMapRes},enumerable:!1,configurable:!0}),s.prototype.getOutsideMapResConfigAry=function(t){for(var e=[],o=0,n=this._dbConfig.OutsideMapRes;o<n.length;o++){var i=n[o];i.zone_id==t&&e.push(i)}return e},s.prototype.getOutsideStoreConfigAry=function(){for(var t=[],e=0,o=this._dbConfig.OutsideMapStore;e<o.length;e++){var n=o[e];t.push(n)}return t},s.prototype.getPetAniConfigAry=function(){for(var t=[],e=0,o=this._dbConfig.PetRoomAni;e<o.length;e++){var n=o[e];t.push(n)}return t},s.prototype.getOutsideMapResConfig=function(t,e){for(var o=0,n=this._dbConfig.OutsideMapRes;o<n.length;o++){var i=n[o];if(i.zone_id==t&&i.res_id==e)return i}return null},s.prototype.getPetConfig=function(t){for(var e=0,o=this._dbConfig.Pet;e<o.length;e++){var n=o[e];if(n.id==t)return n}return null},s.prototype.getOutsideMonsterConfig=function(t){for(var e=0,o=this._dbConfig.OutsideMapMonster;e<o.length;e++){var n=o[e];if(n.id==t)return n}return null},s.prototype.getExploreStoreConfig=function(t){for(var e=0,o=this._dbConfig.OutsideMapStore;e<o.length;e++){var n=o[e];if(n.id==t)return n}return null},s.prototype.getRandomNameConfigAry=function(){for(var t=[],e=0,o=this._dbConfig.RandomName;e<o.length;e++){var n=o[e];t.push(n)}return t},s.prototype.getPetRoomConfigAry=function(){for(var t=[],e=0,o=this._dbConfig.PetRoomRes;e<o.length;e++){var n=o[e];t.push(n)}return t},s.prototype.getPetRoomConfig=function(t){for(var e=0,o=this._dbConfig.PetRoomRes;e<o.length;e++){var n=o[e];if(n.res_id==t)return n}return null},s.prototype.getOnlineConfig=function(t){for(var e=0,o=this._dbConfig.online;e<o.length;e++){var n=o[e];if(n.id==t)return n}return null},Object.defineProperty(s.prototype,"menuConfig",{get:function(){if(0==Object.keys(this._menuConfigs).length)for(var t=0,e=this._dbConfig.FoodMenuDatas;t<e.length;t++){var o=e[t];this._menuConfigs[o.menu_id]=o}return this._menuConfigs},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"barbecueMenu",{get:function(){if(0==Object.keys(this._barbecueMenu).length)for(var t=0,e=this._dbConfig.BarbecueMenu;t<e.length;t++){var o=e[t];this._barbecueMenu[o.menu_id]=o}return this._barbecueMenu},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"decorationConfigs",{get:function(){if(0==Object.keys(this._decorationConfigs).length)for(var t=0,e=this._dbConfig.Decorations;t<e.length;t++){var o=e[t];this._decorationConfigs[o.id]||(this._decorationConfigs[o.id]=[]),this._decorationConfigs[o.id].push(o)}return this._decorationConfigs},enumerable:!1,configurable:!0}),r=s,c.default=r,cc._RF.pop()},{}],ConfigUtils:[function(t,e,o){"use strict";cc._RF.push(e,"e3407g1J1RFEYNyb12I3F8D","ConfigUtils");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.NPCBubbleUtil=a.ToolsUnlock=a.PropRandomPool=a.NPCDataUtils=a.ProduceUtils=a.PropUtils=a.BuildBuildingUtils=a.BigMapConfigUtils=a.OutSideMonsterUtils=a.ExploreStoreUtils=a.OutSideMapResUtils=a.OutSideMapUtils=a.ConfigUtils=void 0;var r,c=i("EventManager"),s=i("MathUtils"),l=i("CookMgr"),p=i("TaskRecordData"),u=i("CommonUtils"),d=i("Const"),h=i("Formula"),_=i("GameMgr"),f=i("LvMgr");function g(){}function y(){}function m(){}function v(){}function b(){}function I(){}function D(){}function C(){}function O(){}function w(){}function M(){}function P(){}function S(){}function T(){}function j(){}function k(){}function A(){}function R(){}function N(){}function E(){}function B(){}function U(){}r=a.ConfigUtils||(a.ConfigUtils={}),g.getUnlockConfig=function(t){for(var e=p.default.getInstance().getUnlockObjectCount(t),o=0,n=_.gm.config.data.ObjectUnlock;o<n.length;o++){var i=n[o];if(i.id==t&&e==(i.i||0))return i}},n=g,r.BuildingUnlockUtils=n,y.getRewards=function(){for(var t=_.gm.config.data.ShopRewardProgress,e=[],o=0;o<t.length;o++){var n=t[o];_.gm.localData.shopLotteryTimes>=n.time&&-1==_.gm.localData.shopLotteryRewardID.indexOf(n.id)&&e.push(n)}return e},r.ShopRewardProgressUtils=y,m.getConfig=function(t){return _.gm.config.collectionsConfig[t]},m.getAutoCollect=function(){for(var t=[],e=0,o=_.gm.config.data.Collections;e<o.length;e++){var n=o[e];n.mastery_produce&&n.need_prop&&t.push(n)}return t},r.CollectionsUtils=m,v.getConfigByID=function(t){for(var e=0,o=_.gm.config.data.DistrictUnlock;e<o.length;e++){var n=o[e];if(n.district_id==t)return n}cc.error("not found config, district id",t)},r.UnlockDistrictUtil=v,b.getGuideConfig=function(t){for(var e=[],o=0,n=_.gm.config.data.GuideDatas;o<n.length;o++){var i=n[o];i.guide_id==t&&e.push(i)}return e},r.GuideDatasUtils=b,I.getConfig=function(t){for(var e=0,o=_.gm.config.data.WarehouseData;e<o.length;e++){var n=o[e];if(n.warehouse_level==t)return n}},r.WarehouseDataUtils=I,D.getConfigByClass=function(t){for(var e=[],o=0,n=_.gm.config.data.FoodMenuDatas;o<n.length;o++){var i=n[o];i.menu_class==t&&e.push(i)}return e},D.getConfigByID=function(t){for(var e=0,o=_.gm.config.data.FoodMenuDatas;e<o.length;e++){var n=o[e];if(n.menu_id==t)return n}},D.getMenuIDByFoodID=function(t){for(var e=0,o=_.gm.config.data.FoodMenuDatas;e<o.length;e++){var n=o[e];if(t==n.cook_food.id)return n.menu_id}},r.FoodMenuUtils=D,C.getConfigs=function(t){for(var e=[],o=0,n=_.gm.config.data.FoodMenuStarsData;o<n.length;o++){var i=n[o];i.menu_id==t&&e.push(i)}return e},C.getConfigByStar=function(t,e){for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i.menu_star==e)return i}},r.FoodMenuStarUtils=C,O.getLastValue=function(){var t=this.getConfigByLv(l.default.getInstance().getLv()-1);return t?t.evaluate.num:0},O.getLastConfig=function(){return this.getConfigByLv(l.default.getInstance().getLv()-1)},O.getConfigByLv=function(t){for(var e=0,o=_.gm.config.data.CookTitle;e<o.length;e++){var n=o[e];if(n.lv==t)return n}},r.CookTitleUtils=O,w.getConfig=function(t){for(var e=0,o=_.gm.config.data.FuncUnlock;e<o.length;e++){var n=o[e];if(n.id==t)return n}},r.FuncUnlockUtils=w,M.getConfig=function(t){return _.gm.config.outsideMapConfig[t]},a.OutSideMapUtils=i=M,P.getConfigAry=function(t){return _.gm.config.getOutsideMapResConfigAry(t)},P.getConfig=function(t,e){return _.gm.config.getOutsideMapResConfig(t,e)},a.OutSideMapResUtils=i=P,S.getConfig=function(t){return _.gm.config.getExploreStoreConfig(t)},S.getConfigAry=function(){return _.gm.config.getOutsideStoreConfigAry()},a.ExploreStoreUtils=i=S,T.getConfig=function(t){return _.gm.config.getOutsideMonsterConfig(t)},a.OutSideMonsterUtils=i=T,j.getCanBuildBuilding=function(t){for(var e=[],o=0,n=_.gm.config.data.BigMapObjects;o<n.length;o++){var i=n[o];Number(i.type.main_type)==d.EnumObjectType.Building&&i.can_build&&t.includes(i.type.sub_type)&&e.push(i)}return e},j.getConfig=function(t){return _.gm.config.getBigMapObjectConfig()[t]},j.getConfigByMainType=function(t){for(var e=[],o=0,n=_.gm.config.data.BigMapObjects;o<n.length;o++){var i=n[o];Number(i.type.main_type)==t&&e.push(i)}return e},a.BigMapConfigUtils=i=j,k.getConfigByID=function(){return null},k.showMovingUI=function(){_.gm.ui.showModule(_.gm.const.BuildMove),_.gm.ui.closeModule(_.gm.const.BuildUI)},k.setStatus=function(t){this.status=t,cc.log(d.EnumBuildStatus[this.status]),c.default.emit(d.GameEvent.changeBuildStatus)},k.closeBuildUI=function(){var t=_.gm.ui.get_module(_.gm.const.BuildUI);t&&(t.closeMe(),this.setStatus(d.EnumBuildStatus.None))},k.status=d.EnumBuildStatus.None,k.draging=!1,k.need_prop=[],k.mastery_produce=[],a.BuildBuildingUtils=i=k,A.getConfigByPropID=function(t){var e=_.gm.config.getPropMap();return e[t]||(cc.error("not found:",t,e),null)},a.PropUtils=i=A,R.getConfigArrByBuildID=function(t,e){void 0===e&&(e=0);for(var o=[],n=0,i=_.gm.config.data.Produce;n<i.length;n++){var a=i[n],r=!0;e&&(r=e>=a.lv_need),a.build_id==t&&r&&o.push(a)}return o},R.getConfigByProduceID=function(t){for(var e=0,o=_.gm.config.data.Produce;e<o.length;e++){var n=o[e];if(n.produce_id==t)return n}return null},R.getConifgByProductionID=function(t){for(var e=0,o=_.gm.config.data.Produce;e<o.length;e++)for(var n=o[e],i=0,a=n.productions;i<a.length;i++)if(a[i].id==t)return n},a.ProduceUtils=i=R,N.getNewUnlockNPC=function(){for(var t=[],e=0,o=_.gm.config.data.NPCData;e<o.length;e++){var n=o[e];n.unlock_level<=f.default.getInstance().getLv()&&!_.gm.localData.unlockNPC.includes(n.npc_id)&&t.push(n.npc_id)}return cc.log("\u65b0\u89e3\u9501NPC",t),t},N.getConfigByID=function(t){for(var e=0,o=_.gm.config.data.NPCData;e<o.length;e++){var n=o[e];if(n.npc_id==t)return n}},a.NPCDataUtils=i=N,E._getConfigByPoolID=function(t,e){void 0===e&&(e=1);for(var o=[],n=0,i=_.gm.config.data.PropRandomPool;n<i.length;n++){var a=i[n];a.pool_id==t&&o.push(a)}return s.default.weight(o,e)},E.getItemsByPoolID=function(t,e){for(var o=this._getConfigByPoolID(t,e=void 0===e?1:e),n=[],i=0;i<o.length;i++){var a=o[i],r=[],c=s.default.randomNum(a.num_min,a.num_max);r=a.pool?(r=this.getItemsByPool(a.pool),h.Formula.getCountByGainthing(r,c)):h.Formula.getCountByGainthing([a.item],c),n.push.apply(n,r)}return n},E.getConfigAryByPoolId=function(t){for(var e=[],o=0,n=_.gm.config.data.PropRandomPool;o<n.length;o++){var i=n[o];i.pool_id==t&&e.push(i)}return e},E.getItemsByPool=function(t){return this.getItemsByPoolID(t.pool_id,t.count)},E.getFoodPools=function(t,e){void 0===e&&(e=1);for(var o=l.default.getInstance().getAllLearnedFood(),n=[],i=0,a=_.gm.config.data.PropRandomPool;i<a.length;i++){var r=a[i];r.pool_id==t&&o.includes(r.item.id)&&n.push(r)}return s.default.weight(n,e)},E.getCanSellConfigs=function(t){for(var e=[],o=0,n=_.gm.config.data.PropRandomPool;o<n.length;o++){var i=n[o];i.pool_id==t&&i.item&&u.default.checkProductionCanSell(i.item.id)&&e.push(i)}return e},a.PropRandomPool=i=E,B.getConfig=function(t){for(var e=0,o=_.gm.config.data.ToolsUnlock;e<o.length;e++){var n=o[e];if(n.tool_class==t)return n}return null},a.ToolsUnlock=i=B,U.getConfig=function(t,e){for(var o=[],n=0,i=_.gm.config.data.NPCBubble;n<i.length;n++){var a=i[n];a.npc_id==t&&e==a.chat_class&&o.push(a)}return o},a.NPCBubbleUtil=i=U,cc._RF.pop()},{}],Const:[function(t,e,o){"use strict";cc._RF.push(e,"70c415bDs1PjbegNaeQcXp2","Const");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.E_ReplacementType=r.E_WayClass=r.StaffJobChart=r.StaffJob=r.E_AttrType=r.VideoReportTypeEnum=r.TaskConditionTypeEnum=r.LanguageTypeEnum=r.CollectionSubType=r.TraderActionState=r.PropType=r.MainRoleAction=r.MapPosSys=r.RoleDirection=r.EnumDownOrUp=r.EnumLeftOrRight=r.FaceType=r.ObjectState=r.ConditionType=r.SellType=r.MenuState=r.MenuClass=r.CreatePoint=r.EatFoodPoint=r.BroadTypeEnum=r.ENpcID=r.EatFoodRandomTalk=r.GuidePoint=r.TruckLotteryEnum=r.CashierAction=r.ThingType=r.CommonPropID=r.OutSideResClass=r.ToolClass=r.ProductionAni=r.SpecialObjectID=r.EnumRoleAniType=r.EnumRolePos=r.EnumDecorateStatus=r.EnumBuildStatus=r.CharaEventTypeEnum=r.DecorationType=r.BuildingType=r.EnumObjectType=r.GameEvent=r.Group=r.Contents=r.Const=r.MapObjectMode=r.BundleName=void 0,r.E_BaseUIType=void 0,a=i("Singleton");var s,l,p=i("UIMgr");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.Loading={key:"Loading",bundleName:s.PRE,loadPath:"prefabs/loading",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,try_release_when_close:!0,not_show_loading:!0},t.UserNoticePanel={key:"UserNoticePanel",bundleName:s.PRE,loadPath:"prefabs/userNoticePanel",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.WINDOW},t.MainUI={key:"MainUI",bundleName:s.MAIN_UI,loadPath:"prefabs/main_ui",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,isFullScreen:!0,not_block:!0},t.PetMap={key:"PetMap",bundleName:s.MAIN_UI,loadPath:"prefabs/pet_map/pet_map",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,isFullScreen:!0,not_block:!0,try_release_when_close:!0},t.RegisterUI={key:"RegisterUI",bundleName:s.MAIN_UI,loadPath:"prefabs/register/register_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.VIEW,isFullScreen:!0,not_block:!0,not_show_loading:!0},t.BaseUI={key:"BaseUI",bundleName:s.MAIN_UI,loadPath:"prefabs/base_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.VIEW,isFullScreen:!0,not_block:!0,not_show_loading:!0},t.UnlockUI={key:"UnlockUI",bundleName:s.MAIN_UI,loadPath:"prefabs/unlock/unlock_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.GMMod={key:"GMMod",bundleName:s.MAIN_UI,loadPath:"prefabs/unlock/gmmod",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.UnlockDistrictUI={key:"UnlockDistrictUI",bundleName:s.MAIN_UI,loadPath:"prefabs/unlock/unlock_district_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ChooseProduct={key:"ChooseProduct",bundleName:s.MAIN_UI,loadPath:"prefabs/land/choose_product",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.ChooseFeed={key:"ChooseFeed",bundleName:s.MAIN_UI,loadPath:"prefabs/land/choose_feed",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.LandTip={key:"LandTip",bundleName:s.MAIN_UI,loadPath:"prefabs/land/land_tip",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.LandTipNew={key:"LandTipNew",bundleName:s.MAIN_UI,loadPath:"prefabs/land/land_tip_new",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.BuildUI={key:"BuildUI",bundleName:s.MAIN_UI,loadPath:"prefabs/build/build_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.BuildPut={key:"BuildPut",bundleName:s.MAIN_UI,loadPath:"prefabs/build/build_put",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.BuildMove={key:"BuildMove",bundleName:s.MAIN_UI,loadPath:"prefabs/build/build_move",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.DecorateUI={key:"DecorateUI",bundleName:s.MAIN_UI,loadPath:"prefabs/decorate/decorate_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.PetDecorateUI={key:"PetDecorateUI",bundleName:s.MAIN_UI,loadPath:"prefabs/pet_map/pet_decorate_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.DecorateMove={key:"DecorateMove",bundleName:s.MAIN_UI,loadPath:"prefabs/decorate/decorate_move",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.DecoratePut={key:"DecoratePut",bundleName:s.MAIN_UI,loadPath:"prefabs/decorate/decorate_put",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.OrderUI={key:"OrderUI",bundleName:s.MAIN_UI,loadPath:"prefabs/stall/order_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.TruckOrderUI={key:"TruckOrderUI",bundleName:s.MAIN_UI,loadPath:"prefabs/truck/truck_order_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.Notice={key:"Notice",bundleName:s.COMMON,loadPath:"prefabs/notice",parent_node:p.LayerType.TOP,module_type:p.ModuleType.WINDOW,not_stack:!0,not_show_loading:!0},t.Chicken={bundleName:s.MAIN_UI,loadPath:"prefabs/npc/chicken"},t.LandEgg={bundleName:s.MAIN_UI,loadPath:"prefabs/land/land_egg"},t.Pig={bundleName:s.MAIN_UI,loadPath:"prefabs/npc/pig"},t.Cattle={bundleName:s.MAIN_UI,loadPath:"prefabs/npc/cattle"},t.NodTask={bundleName:s.MAIN_UI,loadPath:"prefabs/task/nod_task"},t.NodFoodItem={bundleName:s.MAIN_UI,loadPath:"prefabs/cook/nod_food_item"},t.Warehouse={key:"Warehouse",bundleName:s.MAIN_UI,loadPath:"prefabs/warehouse/warehouse",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.CommonFactory={key:"CommonFactory",bundleName:s.MAIN_UI,loadPath:"prefabs/factory/common_factory",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.NewOpenFactoryUI={key:"NewOpenFactoryUI",bundleName:s.MAIN_UI,loadPath:"prefabs/factory/new_open_factory_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.FeedSlot={bundleName:s.MAIN_UI,loadPath:"prefabs/factory/feed_slot"},t.ToolRoomUI={key:"ToolRoomUI",bundleName:s.MAIN_UI,loadPath:"prefabs/tool_room/tool_room_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ToolRoomTipUI={key:"ToolRoomTipUI",bundleName:s.MAIN_UI,loadPath:"prefabs/tool_room/tool_room_tip_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ShelfUI={key:"ShelfUI",bundleName:s.MAIN_UI,loadPath:"prefabs/stall/shelf_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.DecorationChairUI={key:"DecorationChairUI",bundleName:s.MAIN_UI,loadPath:"prefabs/decorate/decoration_chair_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.DecorationInteractUI={key:"DecorationInteractUI",bundleName:s.MAIN_UI,loadPath:"prefabs/decorate/decoration_interact_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.PetDecorationUI={key:"PetDecorationUI",bundleName:s.MAIN_UI,loadPath:"prefabs/pet_map/pet_decoration_interact_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.CashierUI={key:"CashierUI",bundleName:s.MAIN_UI,loadPath:"prefabs/stall/cashier_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.BreedUI={key:"BreedUI",bundleName:s.MAIN_UI,loadPath:"prefabs/breed/breed_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.Guide={key:"Guide",bundleName:s.MAIN_UI,loadPath:"prefabs/guide/guide",parent_node:p.LayerType.TOP,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.Guide_1002={key:"Guide_1002",bundleName:s.MAIN_UI,loadPath:"prefabs/guide/guide_1002",parent_node:p.LayerType.TOP,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.BlockGuide={key:"BlockGuide",bundleName:s.COMMON,loadPath:"prefabs/block_guide",parent_node:p.LayerType.TOP,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0,not_show_loading:!0},t.ShopUI={key:"ShopUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.ShopDecorationPool={key:"ShopDecorationPool",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_decoration_pool",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ShopMainUI={key:"ShopMainUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_main_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.ShopTopUI={key:"ShopTopUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_top_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0},t.ShopHeartUI={key:"ShopHeartUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_heart_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.ShopCoinUI={key:"ShopCoinUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_coin_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.LotteryMainUI={key:"LotteryMainUI",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/lottery_main_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.GetAwardUI={key:"GetAwardUI",bundleName:s.MAIN_UI,loadPath:"prefabs/get_award/get_award",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,wait_for_open_list:!0,open_effect:!0,isBg:!0},t.GetAwardUINew={key:"GetAwardUINew",bundleName:s.MAIN_UI,loadPath:"prefabs/get_award/get_award_new",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,wait_for_open_list:!0,open_effect:!0},t.SurpriseUI={key:"SurpriseUI",bundleName:s.MAIN_UI,loadPath:"prefabs/get_award/surprise_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,wait_for_open_list:!0,open_effect:!0},t.GetToolsUI={key:"GetToolsUI",bundleName:s.MAIN_UI,loadPath:"prefabs/get_tools/get_tools",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,wait_for_open_list:!0,open_effect:!0},t.GetStrengthUI={key:"GetStrengthUI",bundleName:s.MAIN_UI,loadPath:"prefabs/strength/get_strength",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,wait_for_open_list:!0,open_effect:!0},t.Online={key:"Online",bundleName:s.MAIN_UI,loadPath:"prefabs/share/online",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.DialogUI={key:"DialogUI",bundleName:s.MAIN_UI,loadPath:"prefabs/dialog/dialog_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,wait_for_open_list:!0},t.UpgradeView={key:"UpgradeView",bundleName:s.MAIN_UI,loadPath:"prefabs/upgrade/upgrade_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,wait_for_open_list:!0,open_effect:!0},t.MenuUI={key:"MenuUI",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/menu_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.MenuDetail={key:"MenuDetail",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/menu_detail",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.CookUI={key:"CookUI",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/cook_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.CookingUI={key:"CookingUI",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/cooking_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.OpenRestaurantUI={key:"OpenRestaurantUI",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/open_restaurant_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,isBg:!0},t.MenuGetNew={key:"MenuGetNew",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/menu_get_new",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,wait_for_open_list:!0},t.CookUpgrade={key:"CookUpgrade",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/cook_upgrade",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,try_release_when_close:!0,open_effect:!0},t.CookStudy={key:"CookStudy",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/cook_study",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.FoodAwardUI={key:"FoodAwardUI",bundleName:s.MAIN_UI,loadPath:"prefabs/cook/food_award_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.WarehouseSell={key:"WarehouseSell",bundleName:s.MAIN_UI,loadPath:"prefabs/warehouse/warehouse_sell",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.WarehouseUse={key:"WarehouseUse",bundleName:s.MAIN_UI,loadPath:"prefabs/warehouse/warehouse_use",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.WarehouseExpand={key:"WarehouseExpand",bundleName:s.MAIN_UI,loadPath:"prefabs/warehouse/warehouse_expand",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.BroadcastPrepare={key:"BroadcastPrepare",bundleName:s.MAIN_UI,loadPath:"prefabs/broadcast/broadcast_prepare",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.BroadcastReport={key:"BroadcastReport",bundleName:s.MAIN_UI,loadPath:"prefabs/broadcast/broadcast_sell_report",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isBg:!0,open_effect:!0},t.BroadcastSell={key:"BroadcastSell",bundleName:s.MAIN_UI,loadPath:"prefabs/broadcast/broadcast_sell",parent_node:p.LayerType.UI,module_type:p.ModuleType.SCENE,isFullScreen:!0,try_release_when_close:!0},t.FingerGuide={key:"FingerGuide",bundleName:s.COMMON,loadPath:"prefabs/finger_guide",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,not_block:!0,not_show_loading:!0},t.ShareUI={key:"ShareUI",bundleName:s.MAIN_UI,loadPath:"prefabs/share/share_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ShareVedio={key:"ShareVedio",bundleName:s.MAIN_UI,loadPath:"prefabs/share_vedio/share_vedio",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.Setting={key:"Setting",bundleName:s.MAIN_UI,loadPath:"prefabs/setting/setting_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0,try_release_when_close:!0},t.ExchangeUI={key:"ExchangeUI",bundleName:s.MAIN_UI,loadPath:"prefabs/setting/exchange_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.Explore={key:"SceneExploreView",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/scene_explore",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,touchEmpty:!1,isBg:!0,open_effect:!1},t.PetRoom={key:"PetRoomView",bundleName:s.MAIN_UI,loadPath:"prefabs/pet_map/pet_room",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,touchEmpty:!1,isBg:!0,open_effect:!1},t.ExploreLoading={key:"ExploreLoading",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/explore_loading",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!1,not_auto_close:!0},t.ExplorePet={key:"ExplorePet",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/explore_pet",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.ExploreBox={key:"ExploreBox",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/explore_box",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.ExploreFeedPet={key:"ExploreFeedPet",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/feed_pet",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.ExploreAutoCollect={key:"ExploreAutoCollect",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/auto_collect",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.ExploreOneKeyRepair={key:"ExploreOneKeyRepair",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/one_key_repair",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.Relive={key:"Relive",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/relive",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!1,isBg:!0,open_effect:!0},t.ExploreStore={key:"ExploreStore",bundleName:s.MAIN_UI,loadPath:"prefabs/explore/explore_store",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.DailyTaskUI={key:"DailyTaskUI",bundleName:s.MAIN_UI,loadPath:"prefabs/daily_task/daily_task_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.BarbecueMenuNew={key:"BarbecueMenuNew",bundleName:s.MAIN_UI,loadPath:"prefabs/barbecue/barbecue_menu_ui_new",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isBg:!0,open_effect:!0},t.BarbecueCookStudy={key:"BarbecueCookStudy",bundleName:s.MAIN_UI,loadPath:"prefabs/barbecue/barbecue_cook_study",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.BarbecueMenuUpgrade={key:"BarbecueMenuUpgrade",bundleName:s.MAIN_UI,loadPath:"prefabs/barbecue/barbecue_menu_upgrade",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.BarbecueIceBoxUI={key:"BarbecueIceBoxUI",bundleName:s.MAIN_UI,loadPath:"prefabs/barbecue/barbecue_ice_box_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.StaffUI={key:"StaffUI",bundleName:s.MAIN_UI,loadPath:"prefabs/staff/staff_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.WelfareUI={key:"WelfareUI",bundleName:s.MAIN_UI,loadPath:"prefabs/welfare/welfare_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.BlessUI={key:"BlessUi",bundleName:s.MAIN_UI,loadPath:"prefabs/bless/bless_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.CommonDecoration_2={key:"CommonDecoration_2",bundleName:s.COMMON,loadPath:"prefabs/common_decoration_2",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,open_effect:!0},t.HouseKeeperUI={key:"HouseKeeperUI",bundleName:s.MAIN_UI,loadPath:"prefabs/house_keeper/house_keeper_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0,isBg:!0,open_effect:!0},t.ObjectMgrUI={key:"ObjectMgrUI",bundleName:s.MAIN_UI,loadPath:"prefabs/object_mgr/object_mgr_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.CartoonUI={key:"CartoonUI",bundleName:s.PRE,loadPath:"cartoon/cartoon",parent_node:p.LayerType.SCENE,module_type:p.ModuleType.SCENE,try_release_when_close:!0,not_show_loading:!0,isFullScreen:!0},t.SignInUI={key:"SignInUI",bundleName:s.MAIN_UI,loadPath:"prefabs/sign_in/sign_in_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,try_release_when_close:!0,isBg:!0,isFullScreen:!0},t.ReplacementUI={key:"ReplacementUI",bundleName:s.MAIN_UI,loadPath:"prefabs/replacement/replacement_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,try_release_when_close:!0,isBg:!0,isFullScreen:!0},t.RenovationUI={key:"RenovationUI",bundleName:s.MAIN_UI,loadPath:"prefabs/renovation/renovation_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,isFullScreen:!0},t.RenovationUnlock={key:"RenovationUnlock",bundleName:s.MAIN_UI,loadPath:"prefabs/renovation/renovation_unlock",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,try_release_when_close:!0,isBg:!0,isFullScreen:!0},t.HeadUI={key:"HeadUI",bundleName:s.MAIN_UI,loadPath:"prefabs/replacement/head_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,try_release_when_close:!0,isBg:!0,isFullScreen:!0},t.CompletionUI={key:"CompletionUI",bundleName:s.MAIN_UI,loadPath:"prefabs/completion/completion_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,try_release_when_close:!0,isFullScreen:!0},t.PrayUI={key:"PrayUI",bundleName:s.MAIN_UI,loadPath:"prefabs/pray/pray_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.ShopBuyTicket={key:"ShopBuyTicket",bundleName:s.MAIN_UI,loadPath:"prefabs/shop/shop_buy_ticket",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.StaffFoodUI={key:"StaffFoodUI",bundleName:s.MAIN_UI,loadPath:"prefabs/staff/staff_food_ui",parent_node:p.LayerType.UI,module_type:p.ModuleType.WINDOW,touchEmpty:!0,isBg:!0,open_effect:!0},t.GridSize=cc.size(176,112),t.BigGridSize=cc.size(1,1),t.moveXMax=8350,t.moveYMax=7500,t.exploreMapX=8192,t.exploreMapY=4608,t.exploreMapInitScale=.7,t.exploreMapMinScale=.7,t.MIN_SEARCH_WAY=80,t.player_attack_len=600,t.explore_box_key_id=10102,t.MAX_BROAD_COUNT=20,t.MAX_PLAYER_BROAD_COUNT=20,t.MAX_INVITE_COUNT=20,t.roomPetMapX=6100,t.roomPetMapY=3850,t.PET_HUNGRY_TIME=10,t.MAX_PET_HUNGRY_VALUE=100,t.MAX_PET_INIT_HUNGRY_VALUE=88,t.MAX_PET_FOOD_VALUE=25,t.PET_HUNGRY_DIAMOND=2,t.SEX_GIRL_NAME="girl",t.SEX_BOY_NAME="boy",t.truck_random_pool_id=700005,t}function d(){}function h(){}function _(){}(i=s=r.BundleName||(r.BundleName={})).COMMON="common",i.PRE="pre_module",i.MAIN_UI="main_ui",(i=r.MapObjectMode||(r.MapObjectMode={}))[i.normal=0]="normal",i[i.preview=1]="preview",c(u,l=a.default),i=u,r.Const=i,d.CommonItem={bundleName:s.COMMON,loadPath:"prefabs/common_item"},d.CommonItem_4={bundleName:s.COMMON,loadPath:"prefabs/common_item_4"},d.AwardItem={bundleName:s.COMMON,loadPath:"prefabs/award_item"},d.LeftItemStall={bundleName:s.MAIN_UI,loadPath:"prefabs/left_items/left_item_stall"},d.NoticeItem={bundleName:s.COMMON,loadPath:"prefabs/notice_item"},d.BroadcastDropItem={bundleName:s.MAIN_UI,loadPath:"prefabs/broadcast/broadcast_drop_item"},d.BroadcastSkellKnife={bundleName:s.MAIN_UI,loadPath:"prefabs/broadcast/broadcast_sell_knife"},d.TouchItem={bundleName:s.COMMON,loadPath:"prefabs/touch_item"},r.Contents=a=d,(c=r.Group||(r.Group={})).main_bg="main_bg",c.main_ground="main_ground",c.default="default",c.main_role="main_role",c.drop_item="drop_item",c.knife="knife",(i=r.GameEvent||(r.GameEvent={})).role_lv_upgrade="role_lv_upgrade",i.login_done="login_done",i.get_server_data_done="get_server_data_done",i.Onshow="Onshow",i.OnHide="OnHide",i.updateBase="updateBase",i.updateLand="updateLand",i.replace_clothes="replace_clothes",i.produce="produce",i.changeBuildStatus="changeBuildStatus",i.task_reach="task_reach",i.updateBubble="updateBubble",i.main_load_end="main_load_end",i.auto_sell="auto_sell",i.update_slot_ui="update_slot_ui",i.slotDone="slotDone",i.on_go_to_sell="on_go_to_sell",i.end_task="end_task",i.end_dialog="end_dialog",i.touch_task="touch_task",i.go_to_check="go_to_check",i.nothing="nothing",i.change_businessman_state="change_businessman_state",i.set_truck_coin="set_truck_coin",i.change_bbq_npc_state="change_bbq_npc_state",i.cooking_end="cooking_end",i.updateFoodUI="updateFoodUI",i.changeFoodOrderState="changeFoodOrderState",i.menu_update="menu_update",i.updateLeftStallTip="updateLeftStallTip",i.updateFloatUI="updateFloatUI",i.drop_items="drop_items",i.update_sell_ui="update_sell_ui",i.factory_ui_select="factory_ui_select",i.show_big_gift="show_big_gift",i.adDone="adDone",i.object_upgrade="object_upgrade",i.object_unlock="object_unlock",i.main_role_action="main_role_action",i.save_breed_data="save_breed_data",i.update_share_data="update_share_data",i.onLogin="onLogin",i.updateFoodDesk="updateFoodDesk",i.bbq_ice_box_update="bbq_ice_box_update",i.on_recruit_staff="on_recruit_staff",i.appoint_staff="appoint_staff",i.welfare_update="welfare_update",i.unlock_module="unlock_module",i.replenish_goods="replenish_goods",i.change_floor="change_floor",i.change_facade="change_facade",i.decoration_can_upgrade="decoration_can_upgrade",i.on_decorate_status_change="on_decorate_status_change",i.prop_not_enougth="prop_not_enougth",i.updateLandAward="updateLandAward",i.staff_state_change="staff_state_change",i.editbox_change="editbox_change",i.explore_item="explore_item",i.update_bless="update_bless",i.choose_staff="choose_staff",i.explore_show_pet="explore_show_pet",i.explore_go_home="explore_go_home",i.explore_store_tips="explore_store_tips",i.delete_explore_pet="delete_explore_pet",i.explore_reset_hp="explore_reset_hp",i.close_explore="close_explore",i.explore_relive="explore_relive",i.explore_attack_monster="explore_attack_monster",i.explore_monster_hp="explore_monster_hp",i.explore_monster_show_hp="explore_monster_show_hp",i.explore_auto_attack_monster="explore_auto_attack_monster",i.die_random_fly="die_random_fly",i.explore_follow="explore_follow",i.show_exlore_follow="show_exlore_follow",i.show_exlore_unfollow="show_exlore_unfollow",i.explore_store="explore_store",i.pet_pos="pet_pos",i.explore_store_data="explore_store_data",i.feed_pet="feed_pet",i.online="online",i.truck_lottery_item="truck_lottery_item",i.room_pet_pos="room_pet_pos",i.change_pet_decorate="change_pet_decorate",i.change_pet_decorate_byid="change_pet_decorate_byid",i.pet_room_item_tips="pet_room_item_tips",(a=r.EnumObjectType||(r.EnumObjectType={}))[a.none=0]="none",a[a.Building=1]="Building",a[a.Decoration=2]="Decoration",a[a.sundries=3]="sundries",a[a.other=4]="other",a[a.collection=5]="collection",a[a.petRoomItem=6]="petRoomItem",(c=r.BuildingType||(r.BuildingType={}))[c.None=0]="None",c[c.plant=1]="plant",c[c.Machining=2]="Machining",c[c.Infrastructure=3]="Infrastructure",c[c.Landform=4]="Landform",c[c.other=5]="other",c[c.animal=6]="animal",(i=r.DecorationType||(r.DecorationType={}))[i.Furniture=1]="Furniture",i[i.Plant=2]="Plant",i[i.Toy=3]="Toy",i[i.Art=4]="Art",i[i.Other=5]="Other",(a=r.CharaEventTypeEnum||(r.CharaEventTypeEnum={})).CLICK="CLICK",a.DISAPPEAR="DISAPPEAR",a.BATTLE_ENGAGE="BATTLE_ENGAGE",a.FIGHT="FIGHT",(c=r.EnumBuildStatus||(r.EnumBuildStatus={}))[c.None=0]="None",c[c.Prepare=1]="Prepare",c[c.Moving=2]="Moving",c[c.Build=3]="Build",(i=r.EnumDecorateStatus||(r.EnumDecorateStatus={}))[i.None=0]="None",i[i.Prepare=1]="Prepare",i[i.Moving=2]="Moving",i[i.Build=3]="Build",(a=r.EnumRolePos||(r.EnumRolePos={}))[a.None=0]="None",a[a.MianHouse=1]="MianHouse",a[a.bedRoom=2]="bedRoom",a[a.shopboard=3]="shopboard",a[a.Field=4]="Field",(c=r.EnumRoleAniType||(r.EnumRoleAniType={}))[c.standby=0]="standby",c[c.standby_hungry=1]="standby_hungry",c[c.walk=2]="walk",c[c.walk_hungry=3]="walk_hungry",c[c.sitdown=4]="sitdown",c[c.sitdown_eat=5]="sitdown_eat",c[c.standby_basket=6]="standby_basket",c[c.walk_basket=7]="walk_basket",c[c.dialogue=8]="dialogue",c[c.cook_up=9]="cook_up",c[c.food_walk=10]="food_walk",c[c.walk_box=11]="walk_box",c[c.standby_box=12]="standby_box",c[c.plant=13]="plant",c[c.swing=14]="swing",c[c.sow=15]="sow",c[c.sow2=16]="sow2",c[c.broom=17]="broom",c[c.food_up=18]="food_up",c[c.make=19]="make",c[c.rocking_chair=20]="rocking_chair",c[c.attack=21]="attack",c[c.crossbow=22]="crossbow",c[c.clean=23]="clean",c[c.bag=24]="bag",c[c.eat=25]="eat",r.SpecialObjectID={swing_tree:1045,mainHouse:10001,bedroom:10002,cook_coin:10010,land_wet:10011,land_vegetable:10012,land_gua:10013,land_dry:10015,Chicken:10021,Pig:10022,Milk_Cow:10023,Ox:10024,ToolRoom:10061,stall:10071,barbecue:10072,left_door:10204,shelf_cash_box:10410,factory_grass:10411,factory_wood:10412,factory_stone:10413,like_building:10415,wholesale:10416,stall_desk_1:10417,stall_desk_2:10418,stall_desk_3:10419,stall_desk_4:10420,stall_desk_5:10421,stall_desk_6:10422,trunk:10308,cooking_bench:10326,rocking_chair:10310,sofa:10335,lamp:10336,fan:10337,food_factory:10041,fruit_factory:10042,meat_factory:10043,feed_factory:10044,drink_factory:10045,loom:10411,cutter:10412,sawmill:10413,warehouse:10063,food_table:10604,light_plate:10605,bbq_cash_box:25001,bbq_board_1:25002,bbq_board_2:25003,bbq_board_3:25004,bbq_ice_box_1:25005,bbq_ice_box_2:25006,bbq_ice_box_3:25007,bbq_food_desk:25008,bbq_desk:25009,bbq_like_building:25010,bbq_line_up:25011},r.ProductionAni={30001:"30001_shuidao",30002:"30002_xiaomai",30012:"30012_tudou"},(i=r.ToolClass||(r.ToolClass={}))[i.none=0]="none",i[i.liandao=1]="liandao",i[i.futou=2]="futou",i[i.gaozi=3]="gaozi",i[i.chutou=4]="chutou",i[i.chanzi=5]="chanzi",i[i.gongnu=6]="gongnu",(a=r.OutSideResClass||(r.OutSideResClass={}))[a.none=0]="none",a[a.collection=1]="collection",a[a.box=2]="box",a[a.pet=3]="pet",a[a.monster=4]="monster",a[a.npc=5]="npc",(c=r.CommonPropID||(r.CommonPropID={}))[c.diamond=10001]="diamond",c[c.coin=10002]="coin",c[c.heart=10003]="heart",c[c.exp=10004]="exp",c[c.sandglass=10008]="sandglass",c[c.strength=10009]="strength",c[c.cook_value=10010]="cook_value",c[c.cook_like=10011]="cook_like",c[c.daily_task_energy=10017]="daily_task_energy",c[c.bbq_sauce=10018]="bbq_sauce",c[c.bbq_star=10019]="bbq_star",c[c.bbq_like=10020]="bbq_like",c[c.ticket=10022]="ticket",c[c.speaker=10023]="speaker",c[c.flower=10024]="flower",c[c.auto_collect=110104]="auto_collect",c[c.broom=60051]="broom",c[c.zi_mo_zhu=11001]="zi_mo_zhu",c[c.max_power=110101]="max_power",c[c.max_hp=110102]="max_hp",c[c.add_hp=110103]="add_hp",h.normal=1,h.mapObject=2,h.menu=3,h.replacement=4,r.ThingType=i=h,(a=r.CashierAction||(r.CashierAction={}))[a.none=0]="none",a[a.check=1]="check",a[a.take=2]="take",a[a.sell=3]="sell",(c=r.TruckLotteryEnum||(r.TruckLotteryEnum={}))[c.none=0]="none",c[c.coin_add=1]="coin_add",c[c.truck_cd=2]="truck_cd",c[c.item_add=3]="item_add",_.YarDoor_Inside=cc.v2(123,124),_.YardDoor=cc.v2(123,128),_.MainHouseDoor_Grandma_=cc.v2(123,119),_.MainHouseDoor_MainRole_=cc.v2(122,119),_.MainHouseDoor_Wangshen_=cc.v2(124,120),_.MainHouseDoor_Goudan=cc.v2(125,120),_.MainHouseDoor_Wangshen_2=cc.v2(124,120),_.MainHouseDoor_10004_=cc.v2(122,119),_.ToolRoom_Wangshen_=cc.v2(118,120),_.ToolRoom_MainRole_=cc.v2(118,119),_.ToolRoom_Grandma_=cc.v2(119,119),_.WangShenMainHouse_=cc.v2(124,113),_.GrandmaMainHouse_=cc.v2(123,114),_.RoadMiddle_=cc.v2(123,134),_.GrandmaSofa_=cc.v2(120,107),_.XiaoQiangCreatePoint_=cc.v2(122,134),_.KuanggongCreatePoint=cc.v2(122,141),_.npc_10004_createPoint=cc.v2(132,131),r.GuidePoint=i=_,r.EatFoodRandomTalk=["\u5df4\u62c9\u5df4\u62c9","\u4f60\u597d\u554a","\u4f60\u597d\u5e05"],(c=a=r.ENpcID||(r.ENpcID={}))[c.Grandma=10001]="Grandma",c[c.WangShen=10002]="WangShen",c[c.Goudan=10003]="Goudan",c[c.Npc_10004=10004]="Npc_10004",c[c.Npc_10005=10005]="Npc_10005",c[c.Npc_10006=10006]="Npc_10006",c[c.XiaoQiang=10013]="XiaoQiang",c[c.Kuanggong=10014]="Kuanggong",(c=r.BroadTypeEnum||(r.BroadTypeEnum={}))[c.BroadLvUpgrade=1]="BroadLvUpgrade",c[c.BroadDecorate=2]="BroadDecorate",c[c.BroadPet=3]="BroadPet",c[c.BroadCloth=4]="BroadCloth",c[c.BroadCooker=5]="BroadCooker",c[c.OpenStore=6]="OpenStore",c[c.BroadEmployerLvUpgrade=7]="BroadEmployerLvUpgrade",r.EatFoodPoint=((c={})[a.WangShen]=cc.v2(126,112),c[a.Goudan]=cc.v2(125,115),c[a.Npc_10004]=cc.v2(128,110),c[a.Npc_10005]=cc.v2(126,112),c[a.Npc_10006]=cc.v2(126,112),c[a.XiaoQiang]=cc.v2(125,112),c[a.Kuanggong]=cc.v2(127,109),c),r.CreatePoint=((c={})[a.Grandma]=i.MainHouseDoor_Grandma_,c[a.WangShen]=cc.v2(123,130),c[a.XiaoQiang]=i.XiaoQiangCreatePoint_,c[a.Kuanggong]=i.KuanggongCreatePoint,c[a.Npc_10004]=i.npc_10004_createPoint,c),(i=r.MenuClass||(r.MenuClass={}))[i.none=0]="none",i[i.homemade=1]="homemade",i[i.huicai=2]="huicai",i[i.lucai=3]="lucai",i[i.mincai=4]="mincai",i[i.xiangcai=5]="xiangcai",i[i.chuancai=6]="chuancai",i[i.jiangsucai=7]="jiangsucai",i[i.yuecai=8]="yuecai",i[i.zhejiangcai=9]="zhejiangcai",(c=r.MenuState||(r.MenuState={}))[c.lock=0]="lock",c[c.unlock=1]="unlock",c[c.learned=2]="learned",(i=r.SellType||(r.SellType={}))[i.normal=0]="normal",i[i.shop=1]="shop",(c=r.ConditionType||(r.ConditionType={}))[c.new_prop=1]="new_prop",c[c.clean=2]="clean",c[c.unlock_map_object=3]="unlock_map_object",c[c.have_prop=4]="have_prop",c[c.harvest_count=5]="harvest_count",c[c.put_decoration=6]="put_decoration",c[c.collect=7]="collect",c[c.trade=8]="trade",c[c.build=9]="build",c[c.unlockSlot=10]="unlockSlot",c[c.produce=11]="produce",c[c.harvest_times=12]="harvest_times",c[c.buy_10=13]="buy_10",c[c.interact_heart=14]="interact_heart",c[c.NPC=15]="NPC",c[c.give_npc=16]="give_npc",c[c.unlock_district=17]="unlock_district",c[c.food_order=18]="food_order",c[c.buy_animal=19]="buy_animal",c[c.feed_animal=20]="feed_animal",c[c.produce_rate_unlock=21]="produce_rate_unlock",c[c.broadcast=22]="broadcast",c[c.login=23]="login",c[c.plant=24]="plant",c[c.factory_food=25]="factory_food",c[c.factory_other=26]="factory_other",c[c.cook=27]="cook",c[c.truck_order=28]="truck_order",c[c.shop_buy=29]="shop_buy",c[c.shop_draw=30]="shop_draw",c[c.ad=31]="ad",c[c.share=32]="share",c[c.consume_prop=33]="consume_prop",c[c.recruit_staff=34]="recruit_staff",c[c.appoint_staff=35]="appoint_staff",c[c.buy_prop=36]="buy_prop",c[c.bbq_learn_menu=37]="bbq_learn_menu",c[c.replenish_goods=38]="replenish_goods",c[c.object_upgrade=39]="object_upgrade",c[c.staff_upgrade=40]="staff_upgrade",c[c.unlock_module=41]="unlock_module",c[c.kill_monster=42]="kill_monster",c[c.open_box_buy_key=43]="open_box_buy_key",c[c.main_house_menu_upgrade=44]="main_house_menu_upgrade",c[c.bbq_menu_upgrade=45]="bbq_menu_upgrade",(i=r.ObjectState||(r.ObjectState={}))[i.none=0]="none",i[i.loading=1]="loading",i[i.loaded=2]="loaded",r.FaceType={write:1,success:2,fail:3,tip:4,angry:5,sad:6,funny:7,happy:8},(c=r.EnumLeftOrRight||(r.EnumLeftOrRight={}))[c.left=10]="left",c[c.right=20]="right",(i=r.EnumDownOrUp||(r.EnumDownOrUp={}))[i.down=1]="down",i[i.up=2]="up",(c=r.RoleDirection||(r.RoleDirection={}))[c.left_up=12]="left_up",c[c.right_up=22]="right_up",c[c.right_down=21]="right_down",c[c.left_down=11]="left_down",r.MapPosSys=function(){this.parentUID="",this.localGrid=cc.v2(0,0),this.worldGrid=cc.v2(0,0)},(i=r.MainRoleAction||(r.MainRoleAction={}))[i.none=0]="none",i[i.buy=1]="buy",i[i.harvest=2]="harvest",i[i.replenish=3]="replenish",(c=r.PropType||(r.PropType={}))[c.farm_produce=1]="farm_produce",c[c.fragment=2]="fragment",c[c.prop=3]="prop",c[c.collection=4]="collection",(i=r.TraderActionState||(r.TraderActionState={}))[i.none=0]="none",i[i.goForward=1]="goForward",i[i.wait_for_trading=2]="wait_for_trading",i[i.leave=3]="leave",i[i.end=4]="end",(c=r.CollectionSubType||(r.CollectionSubType={}))[c.none=0]="none",c[c.grass=1]="grass",c[c.wood=2]="wood",c[c.stone=3]="stone",c[c.mushroom=5]="mushroom",c[c.monster=6]="monster",(i=r.LanguageTypeEnum||(r.LanguageTypeEnum={}))[i.LANGUAGE_TYPE_ZH_CN=0]="LANGUAGE_TYPE_ZH_CN",i[i.LANGUAGE_TYPE_ZH_TW=1]="LANGUAGE_TYPE_ZH_TW",i[i.LANGUAGE_TYPE_EN_US=2]="LANGUAGE_TYPE_EN_US",r.TaskConditionTypeEnum||(r.TaskConditionTypeEnum={}),r.VideoReportTypeEnum||(r.VideoReportTypeEnum={}),(c=r.E_AttrType||(r.E_AttrType={}))[c.none=0]="none",c[c.reduce_npc_cd=1]="reduce_npc_cd",c[c.shelf_add_coin=2]="shelf_add_coin",c[c.shelf_add_volume=3]="shelf_add_volume",c[c.reduce_time=4]="reduce_time",c[c.add_food_exp=5]="add_food_exp",c[c.add_shelf_max=6]="add_shelf_max",c[c.other=7]="other",c[c.bba_star_addition=8]="bba_star_addition",c[c.bbq_man_yi_du=9]="bbq_man_yi_du",c[c.bbq_coin_add=10]="bbq_coin_add",c[c.bbq_ice_box_add=11]="bbq_ice_box_add",c[c.bbq_efficiency=2001]="bbq_efficiency",c[c.serve_efficiency=2002]="serve_efficiency",c[c.breed_rate=2003]="breed_rate",c[c.main_house_food_order_period=2006]="main_house_food_order_period",c[c.main_house_food_reward_double_rate=2007]="main_house_food_reward_double_rate",c[c.food_coin=2008]="food_coin",c[c.food_satisfaction=2009]="food_satisfaction",c[c.food_order_limit=2010]="food_order_limit",c[c.truck_coin_addition=2011]="truck_coin_addition",c[c.breed_animal_max=2012]="breed_animal_max",c[c.breed_food_max=2013]="breed_food_max",c[c.bbq_serve_efficiency=2014]="bbq_serve_efficiency",c[c.rate_addition=2015]="rate_addition",c[c.produce_add=2016]="produce_add",c[c.staff_plant_eff=20210]="staff_plant_eff",c[c.staff_collect_eff=20211]="staff_collect_eff",c[c.staff_factory_eff=20212]="staff_factory_eff",c[c.staff_animal_eff=20214]="staff_animal_eff",(c=i=r.StaffJob||(r.StaffJob={}))[c.none=0]="none",c[c.shelf=1]="shelf",c[c.feed=2]="feed",c[c.collect=3]="collect",c[c.farm=4]="farm",c[c.bbq=5]="bbq",c[c.transform=6]="transform",c[c.factory=7]="factory",r.StaffJobChart=((c={})[i.shelf]="\u8d27\u644a\u5de5\u4eba",c[i.feed]="\u517b\u6b96\u5de5\u4eba",c[i.collect]="\u91c7\u96c6\u5de5\u4eba",c[i.farm]="\u519c\u7530\u5de5\u4eba",c[i.bbq]="\u70e7\u70e4\u5de5\u4eba",c[i.transform]="\u8fd0\u8d27\u5de5\u4eba",c[i.factory]="\u5de5\u5382\u5de5\u4eba",c),(c=r.E_WayClass||(r.E_WayClass={}))[c.none=0]="none",c[c.collect=1]="collect",c[c.plant=2]="plant",c[c.breed=3]="breed",c[c.product=4]="product",c[c.cook=5]="cook",c[c.coin=6]="coin",c[c.heart=7]="heart",c[c.tool=8]="tool",c[c.video=9]="video",(c=r.E_ReplacementType||(r.E_ReplacementType={}))[c.none=0]="none",c[c.hair=1]="hair",c[c.face=2]="face",c[c.clothing=3]="clothing",c[c.shoe=4]="shoe",c[c.hat=5]="hat",c[c.glasses=6]="glasses",c[c.earing=7]="earing",c[c.eye=8]="eye",c[c.necklace=9]="necklace",(r=r.E_BaseUIType||(r.E_BaseUIType={}))[r.explore=0]="explore",r[r.home=1]="home",r[r.petMap=2]="petMap",cc._RF.pop()},{}],CookMgr:[function(t,e,o){"use strict";cc._RF.push(e,"df808qXtdhAIbS/bw+1UdKP","CookMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.MenuData=a.MenuTypeData=void 0;var c,s=i("ConfigUtils"),l=i("Const"),p=i("Formula"),u=i("GameMgr"),d=i("PropMgr"),h=i("Utils"),_=i("Singleton"),f=i("ObjectUtils"),g=i("StringUtil"),y=(r(m,c=_.default),m.prototype._init=function(){for(var t=1;t<=9;t++)this.typeData.push(new v(t));var e=this.getCookTitleConfig();e.title_menu_gain&&d.default.addGainThing(e.title_menu_gain)},m.prototype.study=function(t){u.gm.localData.getFoodMenu(t).state=l.MenuState.learned,u.gm.localData.saveFoodMenu()},m.prototype.startCook=function(){this.cooking=!0,this.leftTime=this.initCookTime},m.prototype.onCookEnd=function(){this.cooking=!1,this.leftTime=this.initCookTime},m.prototype.getAllLearnedFood=function(){for(var t=[],e=0,o=u.gm.config.data.FoodMenuDatas;e<o.length;e++){var n=o[e],i=n.menu_id;u.gm.localData.getFoodMenu(i).state==l.MenuState.learned&&t.push(n.cook_food.id)}return t},m.prototype.getAllLearnedFoodByType=function(t){for(var e=[],o=0,n=0,i=u.gm.config.data.FoodMenuDatas;n<i.length;n++){var a=i[n];a.menu_class==t&&u.gm.localData.getFoodMenu(a.menu_id).state==l.MenuState.learned&&(o+=a.ex_addition.num,e.push(a))}return{configs:e,count:o}},m.prototype.getMenuData=function(t){for(var e=0,o=this.typeData;e<o.length;e++)for(var n=0,i=o[e].menuDatas;n<i.length;n++){var a=i[n];if(a.menuConfig.menu_id==t)return a}},m.prototype.addCookValue=function(){this.getCookTitleConfig()},m.prototype.getTypeDataByFoodID=function(t){for(var e=0,o=this.typeData;e<o.length;e++)for(var n=o[e],i=0,a=n.menuDatas;i<a.length;i++)if(a[i].menuConfig.cook_food.id==t)return n;return null},m.prototype.getLv=function(){if(this._cookTitleLv)return this._cookTitleLv;var t=this.getCookTitleConfig();return t?t.lv:1},m.prototype.getCookTitleConfig=function(){for(var t=d.default.getPropCount(l.CommonPropID.cook_value),e=null,o=u.gm.config.data.CookTitle,n=0;n<o.length;n++){var i=o[n];if(t<i.evaluate.num){e=i;break}n==o.length-1&&(e=i)}return e||cc.error("config not found",t),this._cookTitleLv?e.lv>this._cookTitleLv&&(this._cookTitleLv=e.lv,u.gm.ui.showModule(u.gm.const.CookUpgrade,function(t){t.setData(e)}),h.Utils.broadWorld(l.BroadTypeEnum.BroadCooker,0,e.title_name)):this._cookTitleLv=e.lv,e},m);function m(){var t=c.call(this)||this;return t.initCookTime=10,t.leftTime=10,t.cooking=!1,t.typeData=[],t._cookTitleLv=0,t._init(),t}a.default=y;var v=function(t){this.menuClassName="",this.menuDatas=[];for(var e=0,o=s.ConfigUtils.FoodMenuUtils.getConfigByClass(t);e<o.length;e++){var n=o[e];this.menuClassName=n.menu_class_name,this.type=Number(n.menu_class),this.menuDatas.push(new b(n))}};a.MenuTypeData=v;var b=(I.create=function(t){return new I(s.ConfigUtils.FoodMenuUtils.getConfigByID(t))},I.prototype.isLock=function(){return u.gm.localData.getFoodMenu(this.menuConfig.menu_id).state==l.MenuState.lock},I.prototype.isLearned=function(){return u.gm.localData.getFoodMenu(this.menuConfig.menu_id).state==l.MenuState.learned},I.prototype.getStarLv=function(){return u.gm.localData.getFoodMenu(this.menuConfig.menu_id).star||0},I.prototype.getState=function(){return u.gm.localData.getFoodMenu(this.menuConfig.menu_id).state||l.MenuState.lock},I.prototype.getStarConfig=function(t){return s.ConfigUtils.FoodMenuStarUtils.getConfigByStar(this.starConfigs,t)},I.prototype.getCurStarLvConfig=function(){return this.getStarConfig(this.getStarLv())},I.prototype.getCurExp=function(){return this.getCurStarLvConfig().reward_add_ex||0},I.prototype.getCurCook=function(){return this.getCurStarLvConfig().reward_add_cook||0},I.prototype.getCurStarStr=function(){return"\u661f  \u7ea7\uff1a"+this.getStarLv()},I.prototype.getCurExpStr=function(){return"\u7ecf\u9a8c\u503c\uff1a"+g.default.numToPercentage(this.getCurExp())},I.prototype.getCurCookStr=function(){return"\u53a8\u827a\u503c\uff1a"+g.default.numToPercentage(this.getCurCook())},I.prototype.getNextStarConfig=function(){return this.getStarConfig(this.getStarLv()+1)},I.prototype.starLvUp=function(){var t=this.getNextStarConfig();t?(u.gm.localData.foodMenu[this.menuConfig.menu_id].star=t.menu_star,u.gm.localData.saveFoodMenu()):cc.error("\u83dc\u8c31\u5347\u661f\u9519\u8bef",this.menuConfig)},I.prototype.getCurCookReward=function(){for(var t=[],e=y.getInstance().getAllLearnedFoodByType(this.menuConfig.menu_class).count,o=0;o<this.menuConfig.cook_reward.length;o++){var n=f.default.copy(this.menuConfig.cook_reward[o]);t.push(n),1==n.file&&n.id==l.CommonPropID.exp?n.num=p.Formula.calCookExp(n.num,this.getCurExp(),e):1==n.file&&n.id==l.CommonPropID.cook_value&&(n.num=p.Formula.calCookCoin(n.num,this.getCurCook()))}return t},I);function I(t){this.name="",this.menuConfig=null,this.starConfigs=[],this.menuConfig=t,this.name=t.menu_name,this.starConfigs=s.ConfigUtils.FoodMenuStarUtils.getConfigs(this.menuConfig.menu_id)}a.MenuData=b,cc._RF.pop()},{}],CookStudy:[function(t,e,o){"use strict";cc._RF.push(e,"68702JrbPVBB7UqaGZ3YWS8","CookStudy");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("EventManager"),g=i("GameModule"),y=i("Finger"),m=i("GuideMgr");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.lbl_consume=null,t.spr_icon=null,t.finger=null,t.nod_consume_content=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=g.default),v.prototype.setData=function(t){this.data=t,this.updateUI()},v.prototype.updateUI=function(){this.lbl_title.string=this.data.menuConfig.menu_name,_.IconUtils.setMenuIcon(this.data.menuConfig.menu_id,this.spr_icon),this.data.menuConfig.cook_food.id==m.default.getInstance().touchConditionID?this.finger.showFinger():this.finger.hide(),this.updateConsumeUI()},v.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=h.default.propItemToGainThing(this.data.menuConfig.learn_cost),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},v.prototype.onBtnStudy=function(){this.data.menuConfig.cook_food.id!=m.default.getInstance().touchConditionID?m.default.getInstance().touchConditionID=0:this.finger.hide(),h.default.tryConsume(this.data.menuConfig.learn_cost,!0)&&(d.gm.localData.learnFoodMenu(this.data.menuConfig.menu_id),f.default.emit(u.GameEvent.menu_update),this.closeMe())},s([a(cc.Label)],v.prototype,"lbl_title",void 0),s([a(cc.Label)],v.prototype,"lbl_consume",void 0),s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),s([a(y.default)],v.prototype,"finger",void 0),s([a(cc.Node)],v.prototype,"nod_consume_content",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],CookUI:[function(t,e,o){"use strict";cc._RF.push(e,"3d174ckEkxFmI9GoR44ufmI","CookUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonData"),d=i("CommonDiamondNeed"),h=i("CommonItem"),_=i("CommonPropItem"),f=i("Const"),g=i("GameMgr"),y=i("MapDataHelper"),m=i("NodStars"),v=i("PropMgr"),b=i("IconUtils"),I=i("EventManager"),D=i("GameModule"),C=i("StringUtil"),O=i("NetUtils"),w=i("GuideMgr"),M=i("ObjectCookingBench"),P=i("CookMgr");function S(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.spr_icon=null,t.lbl_desc=null,t.nod_items=null,t.nod_reward_content=null,t.lbl_star_cur=null,t.lbl_next_star=null,t.nod_next_star=null,t.lbl_exp_cur=null,t.lbl_next_exp=null,t.nod_next_exp=null,t.lbl_cook_cur=null,t.lbl_next_cook=null,t.nod_next_cook=null,t.lbl_cook=null,t.spr_star_cost=null,t.nod_star_up=null,t.nodStars=null,t.btn_cook=null,t.nod_consume_content=null,t.lbl_tip=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(S,l=D.default),S.prototype.onEnable=function(){},S.prototype.onDisable=function(){w.default.getInstance().touchCondition.mission==f.ConditionType.main_house_menu_upgrade&&w.default.getInstance().touchCondition.id==this.data.menuConfig.menu_id&&w.default.getInstance().resetTouchCondition()},S.prototype.setData=function(t){var e=this;this.data=t,this.updateUI(),w.default.getInstance().touchCondition.mission==f.ConditionType.main_house_menu_upgrade&&w.default.getInstance().touchCondition.id==this.data.menuConfig.menu_id&&this.scheduleOnce(function(){g.gm.ui.showModule(g.gm.const.FingerGuide,function(t){t.showFingerByNode(e.nod_star_up)})},.6)},S.prototype.updateUI=function(){var t=this;this.lbl_title.string=this.data.name,b.IconUtils.setMenuIcon(this.data.menuConfig.menu_id,this.spr_icon),this.lbl_tip.string="\u4eca\u65e5\u5df2\u505a\uff1a"+u.default.getInstance().getCookCount(this.data.menuConfig.menu_id)+"/"+this.data.menuConfig.limit;for(var e=0,o=this.nod_items.children;e<o.length;e++)o[e].active=!1;for(var n=0;n<this.data.menuConfig.menu_cost.length;n++)(r=this.nod_items.children[n])||(r=cc.instantiate(this.nod_items.children[0]),this.nod_items.addChild(r,n)),r.getComponent(_.default).setData(this.data.menuConfig.menu_cost[n]),r.getComponent(d.default).setData(this.data.menuConfig.menu_cost[n]),r.active=!0;for(var i=0,a=this.nod_reward_content.children;i<a.length;i++)a[i].active=!1;var r,c=this.data.getCurCookReward();for(n=0;n<c.length;n++)(r=this.nod_reward_content.children[n])||(r=cc.instantiate(this.nod_reward_content.children[0]),this.nod_reward_content.addChild(r,n)),r.getComponent(h.default).setData(c[n]),r.active=!0;var s=this.data.getNextStarConfig();this.nod_next_star.active=Boolean(s),this.lbl_next_star.node.active=Boolean(s),this.nod_next_exp.active=Boolean(s),this.lbl_next_exp.node.active=Boolean(s),this.nod_next_cook.active=Boolean(s),this.lbl_next_cook.node.active=Boolean(s),this.nod_star_up.active=Boolean(s),this.nodStars.setStar(this.data.getStarLv()),this.lbl_star_cur.string=this.data.getCurStarStr(),this.lbl_exp_cur.string=this.data.getCurExpStr(),this.lbl_cook_cur.string=this.data.getCurCookStr(),s&&(this.lbl_next_star.string=s.menu_star+"",this.lbl_next_exp.string=C.default.numToPercentage(s.reward_add_ex),this.lbl_next_cook.string=C.default.numToPercentage(s.reward_add_cook),this.updateConsumeUI()),this.data.menuConfig.cook_food.id==w.default.getInstance().touchConditionID&&this.scheduleOnce(function(){g.gm.ui.showModule(g.gm.const.FingerGuide,function(e){e.showFingerByNode(t.btn_cook)})},.5)},S.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=v.default.propItemToGainThing(this.data.getCurStarLvConfig().starup_cost),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(h.default).canTouch=!1,i.getComponent(h.default).setData(o[n]),i.active=!0}},S.prototype.onBtnCook=function(){var t=this;p.default.click(),u.default.getInstance().getCookCount(this.data.menuConfig.menu_id)>=this.data.menuConfig.limit?g.gm.ui.showNotice("\u4eca\u65e5\u70f9\u996a\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"):(w.default.getInstance().touchConditionID=0,v.default.checkBagEnough(this.data.menuConfig.menu_cost,!0)&&(u.default.getInstance().addCookCount(this.data.menuConfig.menu_id),g.gm.ui.closeModule(g.gm.const.FingerGuide),P.default.getInstance().startCook(),g.gm.ui.closeModule(g.gm.const.MenuUI),g.gm.mainUI.visiable(!0),y.default.getMapObjectByID(f.SpecialObjectID.cooking_bench).getComponent(M.default).setData(this.data),g.gm.ui.showModule(g.gm.const.CookingUI,function(e){e.setData(t.data)}),O.ReportData.instance.report_point(100005,41000009),this.closeMe()))},S.prototype.onBtnStarLvUp=function(){p.default.click(),v.default.tryConsume(this.data.getCurStarLvConfig().starup_cost,!0)&&(w.default.getInstance().touchCondition.mission==f.ConditionType.main_house_menu_upgrade&&w.default.getInstance().touchCondition.id==this.data.menuConfig.menu_id&&w.default.getInstance().resetTouchCondition(),this.data.starLvUp(),I.default.emit(f.GameEvent.menu_update),this.updateUI())},s([a(cc.Label)],S.prototype,"lbl_title",void 0),s([a(cc.Sprite)],S.prototype,"spr_icon",void 0),s([a(cc.Label)],S.prototype,"lbl_desc",void 0),s([a(cc.Node)],S.prototype,"nod_items",void 0),s([a(cc.Node)],S.prototype,"nod_reward_content",void 0),s([a(cc.Label)],S.prototype,"lbl_star_cur",void 0),s([a(cc.Label)],S.prototype,"lbl_next_star",void 0),s([a(cc.Node)],S.prototype,"nod_next_star",void 0),s([a(cc.Label)],S.prototype,"lbl_exp_cur",void 0),s([a(cc.Label)],S.prototype,"lbl_next_exp",void 0),s([a(cc.Node)],S.prototype,"nod_next_exp",void 0),s([a(cc.Label)],S.prototype,"lbl_cook_cur",void 0),s([a(cc.Label)],S.prototype,"lbl_next_cook",void 0),s([a(cc.Node)],S.prototype,"nod_next_cook",void 0),s([a(cc.Label)],S.prototype,"lbl_cook",void 0),s([a(cc.Sprite)],S.prototype,"spr_star_cost",void 0),s([a(cc.Node)],S.prototype,"nod_star_up",void 0),s([a(m.default)],S.prototype,"nodStars",void 0),s([a(cc.Node)],S.prototype,"btn_cook",void 0),s([a(cc.Node)],S.prototype,"nod_consume_content",void 0),s([a(cc.Label)],S.prototype,"lbl_tip",void 0),i=s([i],S),r.default=i,cc._RF.pop()},{}],CookUpgrade:[function(t,e,o){"use strict";cc._RF.push(e,"36c02QPkBVDSIC+4XuJ45ir","CookUpgrade");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("ConfigUtils"),d=i("List"),h=i("GameModule");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_last_title=null,t.lbl_cur_title=null,t.lbl_last_add=null,t.lbl_cur_add=null,t.list=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.onEnable=function(){},_.prototype.onDisable=function(){},_.prototype.updateUI=function(){this.lbl_cur_title.string=this.data.title_name,this.list.numItems=(this.data.title_menu_gain||[]).length;var t=u.ConfigUtils.CookTitleUtils.getLastConfig();this.lbl_last_title.string=t.title_name,this.lbl_last_add.string="\u6ee1\u610f\u503c\u52a0\u6210\uff1a"+t.title_addition,this.lbl_cur_add.string="+"+(this.data.title_addition-t.title_addition)},_.prototype.setData=function(t){this.data=t,this.updateUI()},_.prototype.onRender=function(t,e){t.getComponent(p.default).setData(this.data.title_menu_gain[e])},s([a(cc.Label)],_.prototype,"lbl_last_title",void 0),s([a(cc.Label)],_.prototype,"lbl_cur_title",void 0),s([a(cc.Label)],_.prototype,"lbl_last_add",void 0),s([a(cc.Label)],_.prototype,"lbl_cur_add",void 0),s([a(d.default)],_.prototype,"list",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],CookingUI:[function(t,e,o){"use strict";cc._RF.push(e,"1757dBbGTxPq4Jm4Ph7byZn","CookingUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("EventManager"),_=i("GameModule"),f=i("MainRoleMgr"),g=i("Object_10326"),y=i("CookMgr"),m=i("NodeUtils"),v=i("GuideMgr"),b=i("MapDataHelper"),I=i("PropMgr"),D=i("JumpMgr"),C=i("DailyTaskData"),O=i("AppConfig");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_touch=null,t.data=null,t.canSpeed=!1,t.object=null,t.cookEnd=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(w,l=_.default),w.prototype.onEnable=function(){var t=this;this.object=b.default.getMapObjectByID(10326),v.default.getInstance().showTaskFinger(10245,3),this.nod_touch.on(cc.Node.EventType.TOUCH_START,this.onBtnSpeed,this),h.default.on(u.GameEvent.cooking_end,this.onCookEnd,this),p.default.getBaseUI().cookingHideUI(),d.gm.mapData.curTouchObject&&(f.default.getInstance().mainRole.inChair?f.default.getInstance().mainRole.goOutChair():f.default.getInstance().inSwingTree&&f.default.getInstance().mainRole.goOutSwingTree()),f.default.getInstance().flyTo(cc.v2(121,114),function(){d.gm.mainUI.setScale(O.default.cookScale)}),D.default.getInstance().jumpToGrid(f.default.getInstance().getRoleGrid()),f.default.getInstance().updateDirectionByType(u.RoleDirection.left_up),this.canSpeed=!1,m.default.setGray(this.nod_touch,!0),f.default.getInstance().setAniCut(1,function(){f.default.getInstance().tryToMove(cc.v2(121,113),function(){t.cookEnd=!1,f.default.getInstance().updateDirectionByType(u.RoleDirection.left_up),t.canSpeed=!0,m.default.setGray(t.nod_touch,!1),t.openFire(),f.default.getInstance().setAniCook(function(){})})})},w.prototype.openFire=function(){v.default.getInstance().endGuide(10245),this.object&&(this.object.getComponent(cc.Animation).play("build_10326_ontime"),this.setPanAni("cook"))},w.prototype.closeFire=function(){this.object&&(this.object.getComponent(cc.Animation).play("build_10326_off"),this.setPanAni("standby"))},w.prototype.setPanAni=function(t){var e=this.object.getComponent(g.default);e&&e.spine.animation!=t&&e.spine.setAnimation(0,t,!0)},w.prototype.onDisable=function(){this.reset()},w.prototype.reset=function(){this.cookEnd=!0,this.closeFire(),this.getComponent(cc.Animation).play("cooking_ui_off"),f.default.getInstance().setStandByAni(),h.default.off(u.GameEvent.cooking_end,this.onCookEnd,this),p.default.getBaseUI().showUI()},w.prototype.setData=function(t){this.data=t},w.prototype.onBtnSpeed=function(){var t=this;this.canSpeed&&(y.default.getInstance().leftTime-=this.data.menuConfig.flame,f.default.getInstance().setAniCook_2(),this.setPanAni("cook_2"),this.getComponent(cc.Animation).play("cooking_ui_on"),this.scheduleOnce(function(){t.onTouchEnd()},.5))},w.prototype.onTouchEnd=function(){this.cookEnd||(this.setPanAni("cook"),this.getComponent(cc.Animation).play("cooking_ui_off"),f.default.getInstance().setAniCook())},w.prototype.onCookEnd=function(){this.reset(),I.default.addGainThing(this.data.getCurCookReward()),I.default.addGainThing([this.data.menuConfig.cook_food],!1),d.gm.mainUI.setScale(O.default.defaultScale);var t=[];t.push.apply(t,this.data.getCurCookReward()),t.push(this.data.menuConfig.cook_food),p.default.fly(f.default.getInstance().mainRole.node,t),I.default.tryConsume(this.data.menuConfig.menu_cost,!0),C.DailyTaskData.getInstance().cook++,C.DailyTaskData.getInstance().async_write_data(),this.closeMe()},s([a(cc.Node)],w.prototype,"nod_touch",void 0),i=s([i],w),r.default=i,cc._RF.pop()},{}],CryptoJS:[function(t,e){"use strict";cc._RF.push(e,"ea746OiX7dMfqrPt+kCuUKl","CryptoJS");var o,n,i,a,r,c=e,s=s||function(t){function e(){}var o={},n=o.lib={},i=n.Base={extend:function(t){e.prototype=this;var o=new e;return t&&o.mixIn(t),o.hasOwnProperty("init")||(o.init=function(){o.$super.init.apply(this,arguments)}),(o.init.prototype=o).$super=this,o},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,o=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(o[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<o.length)for(i=0;i<t;i+=4)e[n+i>>>2]=o[i>>>2];else e.push.apply(e,o);return this.sigBytes+=t,this},clamp:function(){var e=this.words,o=this.sigBytes;e[o>>>2]&=4294967295<<32-o%4*8,e.length=t.ceil(o/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var o=[],n=0;n<e;n+=4)o.push(4294967296*t.random()|0);return new a.init(o,e)}}),r=o.enc={},c=r.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var o=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(t){for(var e=t.length,o=[],n=0;n<e;n+=2)o[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new a.init(o,e/2)}},s=r.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var o=[],n=0;n<t;n++)o.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return o.join("")},parse:function(t){for(var e=t.length,o=[],n=0;n<e;n++)o[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new a.init(o,e)}},l=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return s.parse(unescape(encodeURIComponent(t)))}},p=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var o=this._data,n=o.words,i=o.sigBytes,r=this.blockSize,c=i/(4*r);if(e=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*r,i=t.min(4*e,i),e){for(var s=0;s<e;s+=r)this._doProcessBlock(n,s);s=n.splice(0,e),o.sigBytes-=i}return new a.init(s,i)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=p.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,o){return new t.init(o).finalize(e)}},_createHmacHelper:function(t){return function(e,o){return new u.HMAC.init(t,o).finalize(e)}}});var u=o.algo={};return o}(Math),l=(i=s).lib.WordArray;i.enc.Base64={stringify:function(t){var e=t.words,o=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<o;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,r=0;r<4&&i+.75*r<o;r++)t.push(n.charAt(a>>>6*(3-r)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var e=t.length,o=this._map;(a=o.charAt(64))&&-1!=(a=t.indexOf(a))&&(e=a);for(var n,i,a=[],r=0,c=0;c<e;c++)c%4&&(n=o.indexOf(t.charAt(c-1))<<c%4*2,i=o.indexOf(t.charAt(c))>>>6-c%4*2,a[r>>>2]|=(n|i)<<24-r%4*8,r++);return l.create(a,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t){function e(t,e,o,n,i,a,r){return((t=t+(e&o|~e&n)+i+r)<<a|t>>>32-a)+e}function o(t,e,o,n,i,a,r){return((t=t+(e&n|o&~n)+i+r)<<a|t>>>32-a)+e}function n(t,e,o,n,i,a,r){return((t=t+(e^o^n)+i+r)<<a|t>>>32-a)+e}function i(t,e,o,n,i,a,r){return((t=t+(o^(e|~n))+i+r)<<a|t>>>32-a)+e}for(var a=s,r=(l=a.lib).WordArray,c=l.Hasher,l=a.algo,p=[],u=0;u<64;u++)p[u]=4294967296*t.abs(t.sin(u+1))|0;l=l.MD5=c.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,a){for(var r=0;r<16;r++){var c=t[s=a+r];t[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}r=this._hash.words;var s=t[a+0],l=(c=t[a+1],t[a+2]),u=t[a+3],d=t[a+4],h=t[a+5],_=t[a+6],f=t[a+7],g=t[a+8],y=t[a+9],m=t[a+10],v=t[a+11],b=t[a+12],I=t[a+13],D=t[a+14],C=t[a+15],O=e(r[0],P=r[1],M=r[2],w=r[3],s,7,p[0]),w=e(w,O,P,M,c,12,p[1]),M=e(M,w,O,P,l,17,p[2]),P=e(P,M,w,O,u,22,p[3]);O=e(O,P,M,w,d,7,p[4]),w=e(w,O,P,M,h,12,p[5]),M=e(M,w,O,P,_,17,p[6]),P=e(P,M,w,O,f,22,p[7]),O=e(O,P,M,w,g,7,p[8]),w=e(w,O,P,M,y,12,p[9]),M=e(M,w,O,P,m,17,p[10]),P=e(P,M,w,O,v,22,p[11]),O=e(O,P,M,w,b,7,p[12]),w=e(w,O,P,M,I,12,p[13]),M=e(M,w,O,P,D,17,p[14]),O=o(O,P=e(P,M,w,O,C,22,p[15]),M,w,c,5,p[16]),w=o(w,O,P,M,_,9,p[17]),M=o(M,w,O,P,v,14,p[18]),P=o(P,M,w,O,s,20,p[19]),O=o(O,P,M,w,h,5,p[20]),w=o(w,O,P,M,m,9,p[21]),M=o(M,w,O,P,C,14,p[22]),P=o(P,M,w,O,d,20,p[23]),O=o(O,P,M,w,y,5,p[24]),w=o(w,O,P,M,D,9,p[25]),M=o(M,w,O,P,u,14,p[26]),P=o(P,M,w,O,g,20,p[27]),O=o(O,P,M,w,I,5,p[28]),w=o(w,O,P,M,l,9,p[29]),M=o(M,w,O,P,f,14,p[30]),O=n(O,P=o(P,M,w,O,b,20,p[31]),M,w,h,4,p[32]),w=n(w,O,P,M,g,11,p[33]),M=n(M,w,O,P,v,16,p[34]),P=n(P,M,w,O,D,23,p[35]),O=n(O,P,M,w,c,4,p[36]),w=n(w,O,P,M,d,11,p[37]),M=n(M,w,O,P,f,16,p[38]),P=n(P,M,w,O,m,23,p[39]),O=n(O,P,M,w,I,4,p[40]),w=n(w,O,P,M,s,11,p[41]),M=n(M,w,O,P,u,16,p[42]),P=n(P,M,w,O,_,23,p[43]),O=n(O,P,M,w,y,4,p[44]),w=n(w,O,P,M,b,11,p[45]),M=n(M,w,O,P,C,16,p[46]),O=i(O,P=n(P,M,w,O,l,23,p[47]),M,w,s,6,p[48]),w=i(w,O,P,M,f,10,p[49]),M=i(M,w,O,P,D,15,p[50]),P=i(P,M,w,O,h,21,p[51]),O=i(O,P,M,w,b,6,p[52]),w=i(w,O,P,M,u,10,p[53]),M=i(M,w,O,P,m,15,p[54]),P=i(P,M,w,O,c,21,p[55]),O=i(O,P,M,w,g,6,p[56]),w=i(w,O,P,M,C,10,p[57]),M=i(M,w,O,P,_,15,p[58]),P=i(P,M,w,O,I,21,p[59]),O=i(O,P,M,w,d,6,p[60]),w=i(w,O,P,M,v,10,p[61]),M=i(M,w,O,P,l,15,p[62]),P=i(P,M,w,O,y,21,p[63]),r[0]=r[0]+O|0,r[1]=r[1]+P|0,r[2]=r[2]+M|0,r[3]=r[3]+w|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;o[i>>>5]|=128<<24-i%32;var a=t.floor(n/4294967296);for(o[15+(64+i>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),o[14+(64+i>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(o.length+1),this._process(),o=(e=this._hash).words,n=0;n<4;n++)i=o[n],o[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),a.MD5=c._createHelper(l),a.HmacMD5=c._createHmacHelper(l)}(Math),i=(o=(n=s).lib).Base,a=o.WordArray,r=(o=n.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var o=(c=this.cfg).hasher.create(),n=a.create(),i=n.words,r=c.keySize,c=c.iterations;i.length<r;){s&&o.update(s);var s=o.update(t).finalize(e);o.reset();for(var l=1;l<c;l++)s=o.finalize(s),o.reset();n.concat(s)}return n.sigBytes=4*r,n}}),n.EvpKDF=function(t,e,o){return r.create(o).compute(t,e)},s.lib.Cipher||function(){var t=(h=s).lib,e=t.Base,o=t.WordArray,n=t.BufferedBlockAlgorithm,i=h.enc.Base64,a=h.algo.EvpKDF,r=t.Cipher=n.extend({cfg:e.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,o){this.cfg=this.cfg.extend(o),this._xformMode=t,this._key=e,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,o,n){return("string"==typeof o?_:d).encrypt(t,e,o,n)},decrypt:function(e,o,n){return("string"==typeof o?_:d).decrypt(t,e,o,n)}}}});function c(t,e,o){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<o;i++)t[e+i]^=n[i]}t.StreamCipher=r.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=h.mode={},p=(t.BlockCipherMode=e.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();p.Encryptor=p.extend({processBlock:function(t,e){var o=this._cipher,n=o.blockSize;c.call(this,t,e,n),o.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),p.Decryptor=p.extend({processBlock:function(t,e){var o=this._cipher,n=o.blockSize,i=t.slice(e,e+n);o.decryptBlock(t,e),c.call(this,t,e,n),this._prevBlock=i}}),l=l.CBC=p,p=(h.pad={}).Pkcs7={pad:function(t,e){for(var n,i=(n=(n=4*e)-t.sigBytes%n)<<24|n<<16|n<<8|n,a=[],r=0;r<n;r+=4)a.push(i);n=o.create(a,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},t.BlockCipher=r.extend({cfg:r.cfg.extend({mode:l,padding:p}),reset:function(){r.reset.call(this);var t,e=(o=this.cfg).iv,o=o.mode;this._xformMode==this._ENC_XFORM_MODE?t=o.createEncryptor:(t=o.createDecryptor,this._minBufferSize=1),this._mode=t.call(o,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4});var u=t.CipherParams=e.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),d=(l=(h.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(i)},parse:function(t){var e,n=(t=i.parse(t)).words;return 1398893684==n[0]&&1701076831==n[1]&&(e=o.create(n.slice(2,4)),n.splice(0,4),t.sigBytes-=16),u.create({ciphertext:t,salt:e})}},t.SerializableCipher=e.extend({cfg:e.extend({format:l}),encrypt:function(t,e,o,n){n=this.cfg.extend(n);var i=t.createEncryptor(o,n);return e=i.finalize(e),i=i.cfg,u.create({ciphertext:e,key:o,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,o,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(o,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}})),h=(h.kdf={}).OpenSSL={execute:function(t,e,n,i){return i=i||o.random(8),t=a.create({keySize:e+n}).compute(t,i),n=o.create(t.words.slice(e),4*n),t.sigBytes=4*e,u.create({key:t,iv:n,salt:i})}},_=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:h}),encrypt:function(t,e,o,n){return o=(n=this.cfg.extend(n)).kdf.execute(o,t.keySize,t.ivSize),n.iv=o.iv,(t=d.encrypt.call(this,t,e,o.key,n)).mixIn(o),t},decrypt:function(t,e,o,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),o=n.kdf.execute(o,t.keySize,t.ivSize,e.salt),n.iv=o.iv,d.decrypt.call(this,t,e,o.key,n)}})}(),function(){for(var t=s,e=t.lib.BlockCipher,o=t.algo,n=[],i=[],a=[],r=[],c=[],l=[],p=[],u=[],d=[],h=[],_=[],f=0;f<256;f++)_[f]=f<128?f<<1:f<<1^283;var g=0,y=0;for(f=0;f<256;f++){var m=(m=y^y<<1^y<<2^y<<3^y<<4)>>>8^255&m^99;n[g]=m;var v=_[i[m]=g],b=_[v],I=_[b],D=257*_[m]^16843008*m;a[g]=D<<24|D>>>8,r[g]=D<<16|D>>>16,c[g]=D<<8|D>>>24,l[g]=D,p[m]=(D=16843009*I^65537*b^257*v^16843008*g)<<24|D>>>8,u[m]=D<<16|D>>>16,d[m]=D<<8|D>>>24,h[m]=D,g?(g=v^_[_[_[I^v]]],y^=_[_[y]]):g=y=1}var C=[0,1,2,4,8,16,32,64,128,27,54];o=o.AES=e.extend({_doReset:function(){for(var t,e=(i=this._key).words,o=i.sigBytes/4,i=4*((this._nRounds=o+6)+1),a=this._keySchedule=[],r=0;r<i;r++)r<o?a[r]=e[r]:(t=a[r-1],r%o?6<o&&4==r%o&&(t=n[t>>>24]<<24|n[t>>>16&255]<<16|n[t>>>8&255]<<8|n[255&t]):(t=n[(t=t<<8|t>>>24)>>>24]<<24|n[t>>>16&255]<<16|n[t>>>8&255]<<8|n[255&t],t^=C[r/o|0]<<24),a[r]=a[r-o]^t);for(e=this._invKeySchedule=[],o=0;o<i;o++)r=i-o,t=o%4?a[r]:a[r-4],e[o]=o<4||r<=4?t:p[n[t>>>24]]^u[n[t>>>16&255]]^d[n[t>>>8&255]]^h[n[255&t]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,r,c,l,n)},decryptBlock:function(t,e){var o=t[e+1];t[e+1]=t[e+3],t[e+3]=o,this._doCryptBlock(t,e,this._invKeySchedule,p,u,d,h,i),o=t[e+1],t[e+1]=t[e+3],t[e+3]=o},_doCryptBlock:function(t,e,o,n,i,a,r,c){for(var s=this._nRounds,l=t[e]^o[0],p=t[e+1]^o[1],u=t[e+2]^o[2],d=t[e+3]^o[3],h=4,_=1;_<s;_++){var f=n[l>>>24]^i[p>>>16&255]^a[u>>>8&255]^r[255&d]^o[h++],g=n[p>>>24]^i[u>>>16&255]^a[d>>>8&255]^r[255&l]^o[h++],y=n[u>>>24]^i[d>>>16&255]^a[l>>>8&255]^r[255&p]^o[h++];d=n[d>>>24]^i[l>>>16&255]^a[p>>>8&255]^r[255&u]^o[h++],l=f,p=g,u=y}f=(c[l>>>24]<<24|c[p>>>16&255]<<16|c[u>>>8&255]<<8|c[255&d])^o[h++],g=(c[p>>>24]<<24|c[u>>>16&255]<<16|c[d>>>8&255]<<8|c[255&l])^o[h++],y=(c[u>>>24]<<24|c[d>>>16&255]<<16|c[l>>>8&255]<<8|c[255&p])^o[h++],d=(c[d>>>24]<<24|c[l>>>16&255]<<16|c[p>>>8&255]<<8|c[255&u])^o[h++],t[e]=f,t[e+1]=g,t[e+2]=y,t[e+3]=d},keySize:8}),t.AES=e._createHelper(o)}(),s.pad.ZeroPadding={pad:function(t,e){e*=4,t.clamp(),t.sigBytes+=e-(t.sigBytes%e||e)},unpad:function(t){for(var e=t.words,o=t.sigBytes-1;!(e[o>>>2]>>>24-o%4*8&255);)o--;t.sigBytes=o+1}},c.exports=s,cc._RF.pop()},{}],"DWMiniGame ":[function(t,e,o){"use strict";cc._RF.push(e,"fb613Lo11dKxbbeu6Y7wHtS","DWMiniGame ");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.DWMiniGame=void 0;var a=n("GameMgr"),r=n("ChannelManager"),c=n("Utils"),s=n("Const");function l(){this._targetBannerAdWidth=300,this._banner_ad_id_array=["adunit-1a0789aa3d24c31c","adunit-4893ea318eaf44f5","adunit-ada16e8d5f5a0139","adunit-4c369f7c7e1cb4b7","adunit-1186e487eecafd26","adunit-a54e87fff0eacc73","adunit-941430e138629088"],this._banner_ad_array=[],this._banner_ad_flag_array=[!1,!1,!1,!1],this._banner_ad_loaded_array=[!1,!1,!1,!1],this._videoAd=null,this._videoCb=null,this._videoCbTarget=null,this._interstitial_ad=null,this._interstitial_ad_loaded=!1,this._app_box=null,this._app_box_loaded=!1,this._share_array=[],this._default_share={title:"\u4e00\u8d77\u4f53\u9a8c\u4ebf\u4e07\u50f5\u5c38",url:"https://cdnres.qszhg.6hwan.com/minigame/wife_cdn/res/shareImg.jpg"},this._share_config_url="https://leduo.zqygame.com/res/leduo/panda/share.json",this._chmhtxd_share_config_url="https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/01_wx/share.json",this._record_start_time=0,this._record_end_time=0,this._is_share_record_video=!1,this._is_restart=!1,this._ifNeedVideoShare=!1,this._videoPath="",this.edtion=""}Object.defineProperty(l,"instance",{get:function(){return this._instance||(this._instance=new l),this._instance},enumerable:!1,configurable:!0}),l.prototype.load_channel_env=function(t){return window.wx.onHide(function(){}),window.wx.onShow(function(){}),console.log("wx_DS"+JSON.stringify(window.wx)),window.wx.login({}),this.load_share_config(),t(),!0},l.prototype.get_url=function(){return a.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},l.prototype.load_sub_packages_env=function(t){return t(),!0},l.prototype.analyzeUrlPram=function(){return!0},l.prototype.get_app_name=function(){return r.ChannelManager.APP_DW},Object.defineProperty(l.prototype,"is_share",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.get_edtion=function(){return this.edtion},Object.defineProperty(l.prototype,"is_support_more_game",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.loginReport=function(){},l.prototype.create_banner_ad=function(){var t=this;if(window.wx)for(var e=window.wx.getSystemInfoSync(),o=e.windowWidth,n=e.windowHeight,i=this,a=0;a<this._banner_ad_id_array.length;a++)!function(){var e=a,r=wx.createBannerAd({adUnitId:i._banner_ad_id_array[e],adIntervals:40,style:{width:i._targetBannerAdWidth,top:n-i._targetBannerAdWidth/16*9,left:(o-i._targetBannerAdWidth)/2}});i._banner_ad_array.push(r),r.onLoad(function(){console.log("banner ad id:"+t._banner_ad_id_array[e]+" onLoad"),t._banner_ad_loaded_array[e]=!0}),r.onResize(function(t){r.style.top=n-t.height,r.style.left=(o-t.width)/2}),r.onError(function(t){console.log(t)})}()},l.prototype.show_banner_ad=function(t){var e,o=this;this._banner_ad_loaded_array[t]&&(this._banner_ad_flag_array[t]=!0,(e=this._banner_ad_array[t]).show().then(function(){o._banner_ad_flag_array[t]?console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f"):(e.hide(),console.log("\u5e7f\u544a\u663e\u793a\u6162\u4e86\uff0c\u4e0d\u9700\u8981\u663e\u793a\u4e86"))}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)}))},l.prototype.hide_banner_ad=function(t){var e;!this._banner_ad_loaded_array[t]||(e=this._banner_ad_array[t])&&(e.hide(),this._banner_ad_flag_array[t]=!1)},l.prototype.create_video_ad=function(){var t;null!=window.wx.createRewardedVideoAd&&(this._videoAd=window.wx.createRewardedVideoAd({adUnitId:"adunit-868693f6bf325824"}),(t=this)._videoAd.onClose(function(e){e.isEnded?(console.log("\u89c6\u9891\u5e7f\u544a\u89c2\u770b\u5b8c\u6210"),t._videoCb.apply(t._videoCbTarget)):(console.log("\u89c6\u9891\u5e7f\u544a\u89c2\u770b\u4e2d\u65ad"),a.gm.ui.show_notice(c.Utils.language_string_change(s.LanguageTypeEnum.TEXT_8)))}),t._videoAd.onError(function(t){console.log(t)}),t._videoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}))},l.prototype.show_video_ad=function(t,e){this._videoCb=t,this._videoCbTarget=e;var o=this;this._videoAd?o._videoAd.show().then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(){console.log("\u89c6\u9891\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o._videoAd.show().then(function(){console.log("\u91cd\u8bd5\uff0c\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){console.log("\u91cd\u8bd5\uff0c\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),1004==t.errCode?a.gm.ui.show_notice(c.Utils.language_string_change(s.LanguageTypeEnum.TEXT_360)):a.gm.ui.show_notice(c.Utils.language_string_change(s.LanguageTypeEnum.TEXT_10))})}):a.gm.ui.show_notice(c.Utils.language_string_change(s.LanguageTypeEnum.TEXT_9))},Object.defineProperty(l.prototype,"is_support_app_box",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.clear_cache=function(){window.wxDownloader&&(window.wxDownloader.cleanAllAssets(),console.log("delete cache success"))},l.prototype.vibrate_short=function(){wx.vibrateShort&&wx.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},l.prototype.vibrate_long=function(){wx.vibrateLong&&wx.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},l.prototype.load_share_config=function(){var t=this;c.Utils.httpRequest(a.gm.const.IS_GAME_XMCT?t._share_config_url:t._chmhtxd_share_config_url,c.Utils.GET,function(e){e.data&&(console.log("game.login requestSuc para2:",e),"data"in e&&"edtion"in e.data&&(t.edtion=e.data.edtion))},function(t){console.log("game.login config res if  fail:",JSON.stringify(t))})},Object.defineProperty(l.prototype,"is_support_interstitial_ad",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_rank",{get:function(){return!1},enumerable:!1,configurable:!0}),l._instance=null,n=l,i.DWMiniGame=n,cc._RF.pop()},{}],DailyTaskData:[function(t,e,o){"use strict";cc._RF.push(e,"e3154JMsBFJa6Mis4p4JZ3U","DailyTaskData");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.STORAGE_KEY="DailyTaskData",t.taskPoint=0,t.login=1,t.plant=0,t.buy_animal=0,t.factory_food=0,t.factory_other=0,t.cook=0,t.trunk_order=0,t.shop_buy=0,t.shop_draw=0,t.collect=0,t.ad=0,t.share=0,t.gotTaskItems=[],t.gotStageItems=[],t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),c.DailyTaskData=void 0,r(s,i=a("StorageBase").StorageBase),s.prototype.addPoint=function(t){this.taskPoint+=t,this.async_write_data()},s.prototype.init=function(){},s.prototype.reset=function(){var t=this;this.async_delete_data(function(){t.async_read_data(function(){s.release()})})},s.prototype.setTaskAward=function(t){this.gotTaskItems.push(t),this.async_write_data()},s.prototype.setGotStage=function(t){this.gotStageItems.push(t),this.async_write_data()},r=s,c.DailyTaskData=r,cc._RF.pop()},{}],DailyTaskHelper:[function(t,e,o){"use strict";cc._RF.push(e,"b0c7beHOxNK7Ka7ZcR6fylu","DailyTaskHelper");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.DailyTaskItemData=void 0;var a=n("Const"),r=n("GameMgr"),c=n("DailyTaskData"),s=(l.getConfig=function(t){for(var e=0,o=r.gm.config.data.DailyTasks;e<o.length;e++){var n=o[e];if(t==n.task_id)return n}},l.getTotalPoint=function(){for(var t=0,e=0,o=r.gm.config.data.DailyTasks;e<o.length;e++)for(var n=0,i=o[e].reward_prop;n<i.length;n++){var c=i[n];c.id==a.CommonPropID.daily_task_energy&&(t+=c.num)}return t},l.getTaskList=function(){for(var t=[],e=0,o=r.gm.config.data.DailyTasks;e<o.length;e++){var n=o[e];n=new p(n),t.push(n)}return t.sort(function(t,e){return t.status!=e.status?e.status-t.status:t.config.task_id-e.config.task_id}),t},l.checkByCondition=function(t){return t.mission==a.ConditionType.collect?c.DailyTaskData.getInstance().collect||0:t.mission==a.ConditionType.buy_animal?c.DailyTaskData.getInstance().buy_animal||0:t.mission==a.ConditionType.login?c.DailyTaskData.getInstance().login||0:t.mission==a.ConditionType.plant?c.DailyTaskData.getInstance().plant||0:t.mission==a.ConditionType.factory_food?c.DailyTaskData.getInstance().factory_food||0:t.mission==a.ConditionType.factory_other?c.DailyTaskData.getInstance().factory_other||0:t.mission==a.ConditionType.cook?c.DailyTaskData.getInstance().cook||0:t.mission==a.ConditionType.truck_order?c.DailyTaskData.getInstance().trunk_order||0:t.mission==a.ConditionType.shop_buy?c.DailyTaskData.getInstance().shop_buy||0:t.mission==a.ConditionType.shop_draw?c.DailyTaskData.getInstance().shop_draw||0:t.mission==a.ConditionType.ad?c.DailyTaskData.getInstance().ad||0:t.mission==a.ConditionType.share?c.DailyTaskData.getInstance().share||0:(cc.warn("no condition",t.mission),0)},l);function l(){}i.default=s;var p=(u.prototype.calStatus=function(){c.DailyTaskData.getInstance().gotTaskItems.includes(this.config.task_id)?this.status=-1:(this.curCount=this.getCurCount(),this.curCount<this.config.mission_condition.num?this.status=0:this.status=1)},u.prototype.getCurCount=function(){var t=this.config.mission_condition;return s.checkByCondition(t)},u);function u(t){this.config=null,this.status=0,this.curCount=0,this.config=t,this.calStatus()}i.DailyTaskItemData=p,cc._RF.pop()},{}],DailyTaskUI:[function(t,e,o){"use strict";cc._RF.push(e,"0146cvFtWFAaqHon14yHxce","DailyTaskUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("List"),f=i("EventManager"),g=i("GameModule"),y=i("DailyTaskData"),m=i("DailyTaskHelper"),v=i("NodDailyTaskItem"),b=i("NodDailyTaskStage");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_task=null,t.pro_point=null,t.nod_task_progress_point=null,t.taskList=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=g.default),I.prototype.onEnable=function(){this.updateUI(),u.default.getBaseUI().hideRight(),f.default.on(d.GameEvent.updateBase,this.updateUI,this)},I.prototype.onDisable=function(){u.default.getBaseUI().showUI(),f.default.off(d.GameEvent.updateBase,this.updateUI,this)},I.prototype.updateUI=function(){var t=this;this.taskList=m.default.getTaskList(),this.scheduleOnce(function(){t.list_task.numItems=t.taskList.length}),this.pro_point.progress=y.DailyTaskData.getInstance().taskPoint/m.default.getTotalPoint();for(var e=0;e<h.gm.config.data.DailyTasksProgress.length;e++){var o=h.gm.config.data.DailyTasksProgress[e];this.nod_task_progress_point.parent.children[e]||(cc.instantiate(this.nod_task_progress_point).parent=this.nod_task_progress_point.parent),this.nod_task_progress_point.parent.children[e].x=471*o.energ_need/m.default.getTotalPoint(),this.nod_task_progress_point.parent.children[e].getComponent(b.default).setData(o)}},I.prototype.onBtnClose=function(){p.default.click(),this.closeMe()},I.prototype.onRender=function(t,e){t.getComponent(v.default).setData(this.taskList[e])},s([a(_.default)],I.prototype,"list_task",void 0),s([a(cc.ProgressBar)],I.prototype,"pro_point",void 0),s([a(cc.Node)],I.prototype,"nod_task_progress_point",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],DataManager:[function(t,e,o){"use strict";cc._RF.push(e,"fa68fQ7R29Bd6Ysp4wCEGzj","DataManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.DataManager=void 0;var a=n("EventEmitter");function r(){this.event_emitter=new a.EventEmitter,this.is_test=!1,this.last_error_content="",this.error_content=""}Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),r.prototype.catch_error_log=function(t){var e;void 0===t&&(t=!1),null==window.onerror&&(e=this,window.onerror=t?function(t,o,n,i,a){return n=t+">>"+o+":"+n,3<arguments.length&&(n+=" "+i+" stack:",n+=a.stack.substr(0,Math.max(Math.min(10240-n.length,a.stack.length),0))),e.error_content==n||(e.last_error_content=e.error_content,e.error_content=n,!1)}.bind(e):function(){})},r._instance=null,n=r,i.DataManager=n,cc._RF.pop()},{}],DebugUtil:[function(t,e,o){"use strict";cc._RF.push(e,"6497eCBzvtEe6MYmlZEGnWl","DebugUtil");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.log=function(t,e){e?console.log("%c "+t+" %c "+e+" ","background: #35495E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"):console.log("%c "+t+" ","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;")},i.error=function(t){console.error(t)},i.showDynamicAtlas=function(t){return void 0===t&&(t=!0),cc.dynamicAtlasManager.showDebug(t)},i.showStats=function(t){void 0===t&&(t=!0),cc.debug.setDisplayStats(t)},i.setStatsColor=function(t,e){void 0===t&&(t=cc.Color.WHITE),void 0===e&&cc.color(0,0,0,150)},i.getDrawCalls=function(){return cc.renderer.drawCalls},i.getNodeParentTree=function(t){cc.error(t.name);for(var e=t.parent;e;)cc.error(e.name),e=e.parent},n.default=i,cc._RF.pop()},{}],DecorateMove:[function(t,e,o){"use strict";cc._RF.push(e,"752c5vj76tPX6rlWvVQNCJ5","DecorateMove");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("GameMgr"),u=a("MapDataHelper"),d=a("GameModule"),h=a("PlaceMgr"),_=a("HeartMgr"),f=a("DecorationMgr");function g(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(g,s=d.default),g.prototype.onDisable=function(){},g.prototype.onBack=function(){var t=u.default.getLiftObject();h.default.getInstance().checkCanPut(t.data)?(t.setMode(l.MapObjectMode.normal),p.gm.mapData.place(t.data),this.closeMe(),f.default.setStatus(l.EnumDecorateStatus.Prepare),p.gm.ui.showModule(p.gm.const.DecorateUI)):p.gm.ui.showNotice("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u653e\u7f6e")},g.prototype.onConfirm=function(){var t=u.default.getLiftObject();h.default.getInstance().checkCanPut(t.data)?(t.setMode(l.MapObjectMode.normal),p.gm.mapData.place(t.data),this.closeMe(),f.default.setStatus(l.EnumDecorateStatus.None)):p.gm.ui.showNotice("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u653e\u7f6e")},g.prototype.onRotation=function(){var t=u.default.getLiftObject();t.data.getConfig().can_cross||!t.data.getConfig().can_go_in?(t.data.setRotation(),t.updateUI()):p.gm.ui.showNotice("\u8be5\u7269\u4ef6\u6682\u4e0d\u652f\u6301\u65cb\u8f6c")},g.prototype.onCollect=function(){var t=u.default.getLiftObject();_.default.getInstance().onAdd(t.data,!1),p.gm.mapData.collect(t.data.getUID()),this.closeMe(),f.default.setStatus(l.EnumDecorateStatus.None)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],g),r.default=a,cc._RF.pop()},{}],DecoratePut:[function(t,e,o){"use strict";cc._RF.push(e,"b3e23+W5oZL5o8+CXq78LBb","DecoratePut");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("MapHelper"),_=i("GameModule"),f=i("NetUtils"),g=i("PlaceMgr"),y=i("HeartMgr"),m=i("TaskMgr"),v=i("DecorationMgr");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_confirm=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=_.default),b.prototype.onDisable=function(){},b.prototype.onCancel=function(){1001!=d.gm.mapData.guidingID&&(this.closeMe(),d.gm.mapData.cancelPreview(),d.gm.ui.get_module(d.gm.const.DecorateUI).display(),d.gm.ui.closeModule(d.gm.const.DecorateUI),v.default.setStatus(u.EnumDecorateStatus.None))},b.prototype.onConfirm=function(){var t;d.gm.mapData.tempObjectData&&(t=d.gm.mapData.tempObjectData.getUID(),d.gm.mapData.onConfirmPreviewByData(d.gm.mapData.tempObjectData)?(y.default.getInstance().onAdd(d.gm.mapData.getObjectData(t)),h.default.hideGrid(),h.default.setMapMove(),v.default.setStatus(u.EnumDecorateStatus.None),g.default.getInstance().removeCollect(t),this.closeMe(),v.default.showDecorateUI(),m.default.getInstance().checkAll(),1001==d.gm.mapData.guidingID&&(f.ReportData.instance.report_point(100005,41000026),v.default.closeDecorateUI(),p.default.getGuide_1001().onGuideEnd())):d.gm.ui.showNotice("\u5f53\u524d\u4f4d\u7f6e\u4e0d\u80fd\u6446\u653e"))},b.prototype.onRotation=function(){},b.prototype.onEnable=function(){v.default.setStatus(u.EnumDecorateStatus.Build),1001==d.gm.mapData.guidingID&&p.default.getGuide_1001().onTouchItem()},s([a(cc.Node)],b.prototype,"nod_confirm",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],DecorateUI:[function(t,e,o){"use strict";cc._RF.push(e,"4bbb9+zSM9JfoBz/OjulVE+","DecorateUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("List"),_=i("GameModule"),f=i("DecorationItem"),g=i("DecorationMgr");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.tog_container=null,t.scr=null,t.curType=u.DecorationType.Furniture,t.datas=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.onStart=function(){this.tog_container.toggleItems[this.curType-1].check()},y.prototype.onEnable=function(){g.default.draging=!1,g.default.setStatus(u.EnumDecorateStatus.Prepare),this.display(),this.updateUI(),1001==d.gm.mapData.guidingID&&p.default.getGuide_1001().onTouchDecoration()},y.prototype.onBtnClose=function(){g.default.setStatus(u.EnumDecorateStatus.None),this.closeMe()},y.prototype.onToggle=function(t,e){e=Number(e),this.curType=e,this.updateUI()},y.prototype.updateUI=function(){this.datas=g.default.getCollectDecoration(this.curType),this.list.numItems=this.datas.length},y.prototype.onRenderItem=function(t,e){t.getComponent(f.default).setData(this.datas[e])},y.prototype.undisplay=function(){this.node.opacity=0},y.prototype.display=function(){this.node.opacity=255},y.prototype.onBtnRenovation=function(){g.default.setStatus(u.EnumDecorateStatus.None),this.closeMe(),d.gm.ui.showModule(d.gm.const.RenovationUI)},s([a(h.default)],y.prototype,"list",void 0),s([a(cc.ToggleContainer)],y.prototype,"tog_container",void 0),s([a(cc.ScrollView)],y.prototype,"scr",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],DecorationCommonNew:[function(t,e,o){"use strict";cc._RF.push(e,"9aa97S7Mc1D2pH1ZgB8Brh5","DecorationCommonNew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("CommonPropItem"),d=i("GameMgr"),h=i("NodStars"),_=i("PropMgr"),f=i("IconUtils"),g=i("List"),y=i("GameObject"),m=i("DecorationMgr"),v=i("NodAttrItem");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_heart=null,t.spr_icon=null,t.needItem=null,t.lbl_desc=null,t.lbl_name=null,t.stars=null,t.lbl_lv=null,t.list_attr=null,t.nod_right=null,t.nod_consume_content=null,t.nod_food_menu=null,t.nod_replenish=null,t.nod_skin=null,t.ani=null,t.spr_prop_bg=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=y.GameObject),b.prototype.onBtnUpgrade=function(){this.nextData?_.default.tryConsume(this.curData.config.need,!0)&&(this.objectData.upgrade(),this.updateUI(),this.ani&&(this.ani.node.active=!0,this.ani.play("eff_gran"))):d.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},b.prototype.setData=function(t){this.uid=t,this.objectData=d.gm.mapData.getObjectData(this.uid),this.updateUI()},b.prototype.updateUI=function(){this.curData=m.default.getDataModel(this.objectData.objectID,this.objectData.lv),this.nextData=m.default.getDataModel(this.objectData.objectID,this.objectData.lv+1);var t=this.objectData.getConfig().name;this.lbl_name.string=t,this.lbl_desc.string=this.curData.config.desc,this.lbl_lv.string="Lv"+this.objectData.lv,this.stars.setStar(this.objectData.lv),this.curData.config.need&&this.curData.config.need[0]&&this.needItem.setData(this.curData.config.need[0]),f.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon),f.IconUtils.setQuality(this.curData.config.color,this.spr_prop_bg),this.list_attr.numItems=this.curData.config.attr&&this.curData.config.attr.length||1,this.updateConsumeUI()},b.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;if(this.curData.config.need)for(var o=_.default.propItemToGainThing(this.curData.config.need),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},b.prototype.onRenderAttr=function(t,e){var o=this.curData.getAttrName(e)+"\uff1a"+this.curData.getAttrStr(e),n="";this.nextData&&(n=this.nextData.getAttrStr(e)),t.getComponent(v.default).setData(o,n)},b.prototype.onBtnReplenishGoods=function(){},b.prototype.onBtnSkin=function(){},b.prototype.onBtnMenu=function(){cc.log("on btn menu")},b.prototype.hideCommonOperateBtn=function(){this.nod_food_menu.active=!1,this.nod_replenish.active=!1,this.nod_skin.active=!1},s([a(cc.Label)],b.prototype,"lbl_heart",void 0),s([a(cc.Sprite)],b.prototype,"spr_icon",void 0),s([a(u.default)],b.prototype,"needItem",void 0),s([a(cc.Label)],b.prototype,"lbl_desc",void 0),s([a(cc.Label)],b.prototype,"lbl_name",void 0),s([a(h.default)],b.prototype,"stars",void 0),s([a(cc.Label)],b.prototype,"lbl_lv",void 0),s([a(g.default)],b.prototype,"list_attr",void 0),s([a(cc.Node)],b.prototype,"nod_right",void 0),s([a(cc.Node)],b.prototype,"nod_consume_content",void 0),s([a(cc.Node)],b.prototype,"nod_food_menu",void 0),s([a(cc.Node)],b.prototype,"nod_replenish",void 0),s([a(cc.Node)],b.prototype,"nod_skin",void 0),s([a(cc.Animation)],b.prototype,"ani",void 0),s([a(cc.Sprite)],b.prototype,"spr_prop_bg",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],DecorationInteractUI:[function(t,e,o){"use strict";cc._RF.push(e,"fcff9fCI5tLraTwKmZZ94Rb","DecorationInteractUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const"),d=i("GameModule"),h=i("Finger"),_=i("GuideMgr"),f=i("DecorationCommonNew");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.decorationNew=null,t.finger=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=d.default),g.prototype.onDisable=function(){_.default.getInstance().resetTouchCondition()},g.prototype.setData=function(t,e){void 0===e&&(e=!0),this.data=t,this.updateUI(),_.default.getInstance().touchCondition.mission==u.ConditionType.interact_heart&&(_.default.getInstance().touchCondition.id,this.data.objectID)},g.prototype.updateUI=function(){this.decorationNew.setData(this.data.data.getUID())},g.prototype.onBtnClose=function(){p.default.click(),this.closeMe()},s([a(f.default)],g.prototype,"decorationNew",void 0),s([a(h.default)],g.prototype,"finger",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],DecorationItem:[function(t,e,o){"use strict";cc._RF.push(e,"e5360nTAb9EPbi+9p9s6GaO","DecorationItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("GameMgr"),d=i("IconUtils"),h=i("ListItem"),_=i("TMXUtils"),f=i("DecorationMgr");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_icon=null,t.preview=!1,t.touching=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.default),g.prototype.start=function(){},g.prototype.setData=function(t){this.objectData=t,this.updateUI()},g.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},g.prototype.updateUI=function(){this.lbl_name.string=this.objectData.getConfig().name,d.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon)},g.prototype.onTouchEnd=function(){var t;this.touching=!1,u.gm.ui.get_module(u.gm.const.DecorateUI).scr.enabled=!0,f.default.draging||(t=_.default.touchToTile(cc.v2(-p.default.getContentNode().x,-p.default.getContentNode().y-.2*u.gm.mainUI.getVisibleWindowSize().height),u.gm.mapData.mapSize,u.gm.const.GridSize),u.gm.mapData.createPreviewObject(this.objectData.objectID,u.gm.mainUI.preview_layer,t,this.objectData.getUID()),f.default.showPutUI(),u.gm.ui.get_module(u.gm.const.DecorateUI).closeMe(),u.gm.ui.get_module(u.gm.const.DecorateUI).display())},g.prototype.onTouchMove=function(t){var e,o,n=t.touch.getLocation().sub(t.touch.getStartLocation());0<n.y&&20<n.y-Math.abs(n.x)&&!this.touching&&(this.touching=!0,!f.default.draging)&&(f.default.draging=!0,cc.log("create object"),o=u.gm.mainUI.preview_layer.convertToNodeSpaceAR(t.getLocation()),(e=_.default.touchToTile(o,u.gm.mapData.mapSize,u.gm.const.GridSize))&&u.gm.mapData.createPreviewObject(this.objectData.objectID,u.gm.mainUI.preview_layer,e,this.objectData.getUID()),f.default.showPutUI()),f.default.draging&&u.gm.mapData.tempMapObject&&(o=u.gm.mainUI.preview_layer.convertToNodeSpaceAR(t.getLocation()),(e=_.default.touchToTile(o,u.gm.mapData.mapSize,u.gm.const.GridSize))?u.gm.mapData.tempMapObject.setGridPosAndShowGrid(e):cc.log(o.x,o.y))},g.prototype.onTouchStart=function(){},g.prototype.onTouchCancel=function(){u.gm.ui.get_module(u.gm.const.DecorateUI).scr.enabled=!0,this.touching=!1,f.default.draging&&(u.gm.ui.closeModule(u.gm.const.DecorateUI),u.gm.ui.get_module(u.gm.const.DecorateUI).display(),f.default.draging=!1)},s([a(cc.Label)],g.prototype,"lbl_name",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],DecorationMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1553b6j7hJJeanNF7ShAL7w","DecorationMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationModel=void 0;var c,s=i("CommonUtils"),l=i("Const"),p=i("GameMgr"),u=i("MapObjectData"),d=i("Singleton"),h=i("EventManager"),_=i("AttrHelper");function f(){return null!==c&&c.apply(this,arguments)||this}r(f,c=d.default),f.getConfig=function(t,e){var o=p.gm.config.decorationConfigs[t];if(o&&0<o.length)for(var n=0,i=o;n<i.length;n++){var a=i[n];if(a.id==t&&a.lv==e)return a}},f.getDataModel=function(t,e){if(t=this.getConfig(t,e))return(e=new g).config=t,e},f.getCollectDecoration=function(t){var e,o=[];for(e in p.gm.localData.collect_decoration_datas){var n=p.gm.localData.collect_decoration_datas[e],i=u.default.createByID(n.objectID,e);i.lv=n.lv,i.isDecoration()&&i.type.sub_type==t&&o.push(i)}return o},f.showMovingUI=function(){p.gm.ui.showModule(p.gm.const.DecorateMove),p.gm.ui.closeModule(p.gm.const.DecorateUI)},f.showPutUI=function(){f.setStatus(l.EnumDecorateStatus.Build),p.gm.ui.get_module(p.gm.const.DecorateUI).scr.enabled=!1,p.gm.ui.get_module(p.gm.const.DecorateUI).undisplay(),p.gm.ui.showModule(p.gm.const.DecoratePut)},f.showDecorateUI=function(){cc.log("\u663e\u793a\u88c5\u9970\u4e3b\u754c\u9762 == showDecorateUI"),f.setStatus(l.EnumDecorateStatus.Prepare),p.gm.ui.get_module(p.gm.const.DecorateUI).display(),p.gm.ui.showModule(p.gm.const.DecorateUI)},f.closeDecorateUI=function(){var t=p.gm.ui.get_module(p.gm.const.DecorateUI);t&&(t.closeMe(),f.setStatus(l.EnumDecorateStatus.None))},f.setStatus=function(t){f.status=t,cc.log("\u88c5\u4fee\u72b6\u6001:",l.EnumDecorateStatus[f.status]),f.status!=l.EnumDecorateStatus.None?(h.default.emit(l.GameEvent.on_decorate_status_change,!0),s.default.getBaseUI().cookingHideUI()):(h.default.emit(l.GameEvent.on_decorate_status_change,!1),s.default.getBaseUI().showUI())},f.status=l.EnumDecorateStatus.None,f.draging=!1,r=f,a.default=r;var g=(y.prototype.getAttrStr=function(t){return void 0===t&&(t=0),1==this.config.type&&this.config.attr?_.default.getInstance().getAttrValueStr(this.config.attr[t]):this.config.love_produce+""},y.prototype.getAttrName=function(t){return void 0===t&&(t=0),1==this.config.type&&this.config.attr?_.default.getInstance().getAttrName(this.config.attr[t]):"\u7231\u5fc3/\u5206\u949f"},y);function y(){this.config=null}a.DecorationModel=g,cc._RF.pop()},{}],Decorators:[function(t,e,o){"use strict";cc._RF.push(e,"e7cd3d1nQFHMYwNgK6xAQN0","Decorators");var n,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.FuncCount=i.PrintFuncTime=i.ButtonLock=void 0,(n=cc._decorator).ccclass,n.property,i.ButtonLock=function(t,e){return void 0===t&&(t=.3),function(o,n,i){var a=i.value,r=!1;return i.value=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];r?null==e||e():(r=!0,setTimeout(function(){r=!1},1e3*t),a.apply(this,o))},i}},i.PrintFuncTime=function(){return function(t,e,o){var n=o.value;return o.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return performance.now(),n.apply(this,t)},o}},i.FuncCount=function(){return function(t,e,o){var n=o.value;return o.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(this,t)},o}},cc._RF.pop()},{}],Dev:[function(t,e,o){"use strict";cc._RF.push(e,"48f433LH5tBDZ8epD68l2ZI","Dev");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("AssetMgr"),r=n("EventManager"),c=n("TimeUtils"),s=n("SaveMgr"),l=n("CookMgr"),p=n("DistrictMgr"),u=n("ShopData"),d=n("StaffData"),h=n("StaffViewMgr"),_=n("TaskItemData"),f=n("TaskMgr"),g=n("TaskRecordData"),y=n("CommonData"),m=n("ConfigUtils"),v=n("Const"),b=n("GameMgr"),I=n("LocalData"),D=n("MainCal"),C=n("MapDataHelper"),O=n("MapHelper"),w=n("PropMgr"),M=n("Utils");function P(){this.isDev=!0,this.warehouseLimit=!0}P.prototype.addProp=function(t,e){w.default.addProps([{id:t,num:e}])},P.prototype.addExp=function(t){w.default.addProps([{id:v.CommonPropID.exp,num:t}])},P.prototype.initProp=function(){},P.prototype.add_pet=function(){b.gm.localData.explore_data.push_pet(1,cc.v2(0,0))},P.prototype.addFood=function(){w.default.addProps([{id:31001,num:1}]),w.default.addProps([{id:31002,num:1}]),w.default.addProps([{id:31003,num:1}]),w.default.addProps([{id:31004,num:1}]),w.default.addProps([{id:31005,num:1}]),w.default.addProps([{id:31006,num:1}])},P.prototype.addAll=function(){w.default.addProps([{id:10001,num:1e6}]),w.default.addProps([{id:10002,num:1e6}]),w.default.addProps([{id:10003,num:1e6}]),w.default.addProps([{id:v.CommonPropID.exp,num:1e5}])},P.prototype.onClickPetRoom=function(){b.gm.ui.showModule(b.gm.const.ExploreLoading,function(){b.gm.ui.showModule(b.gm.const.PetRoom,function(){})})},P.prototype.add_pet_prop=function(t){b.gm.localData.explore_data.addPetProp(t)},P.prototype.get_broad=function(){b.gm.localData.get_bless_data(!0)},P.prototype.clear_pet_room=function(){b.gm.localData.explore_data.pet_decorate_data=[],b.gm.localData.explore_data.pet_props={},b.gm.localData.saveByKey("explore_data")},P.prototype.setTruckTime=function(){b.gm.localData.truck_order.start_time=c.default.getTime()-1200,b.gm.localData.truck_order.end_time=c.default.getTime()-600},P.prototype.dayReset=function(){b.gm.localData.onLineSecond=0,u.default.getInstance().refreshRecord(),y.default.getInstance().dayReset(),r.default.emit(v.GameEvent.online)},P.prototype.reset_online=function(t){y.default.getInstance().online_stage=t,y.default.getInstance().online_time=1e4},P.prototype.addInvite=function(){var t=new I.InviteChildren;t.image_id=M.Utils.math_random(!0,0,2),t.level=M.Utils.math_random(!0,1,20),t.reward_index=0,t.uid=M.Utils.math_random(!0,1,200)+"",t.nick_name=t.level+"="+t.uid,b.gm.localData.invite_data.children_list.push(t),b.gm.localData.saveByKey("invite_data")},P.prototype.delInvite=function(t){b.gm.localData.invite_data.delete_list.push(b.gm.localData.invite_data.children_list[t].uid),b.gm.localData.saveByKey("invite_data")},P.prototype.add_tool=function(){w.default.addProps([{id:60033,num:1}]),w.default.addProps([{id:60003,num:1}]),w.default.addProps([{id:60013,num:1}]),w.default.addProps([{id:60023,num:1}]),w.default.addProps([{id:60043,num:1}]),w.default.addProps([{id:60073,num:1}]),w.default.addProps([{id:60085,num:1}])},P.prototype.savePlayer=function(){b.gm.localData.history_gold+=1e4,s.default.getInstance().savePlayerData()},P.prototype.broadWold=function(){d.default.getInstance().upgrade(50027)},P.prototype.setToolD=function(t,e){b.gm.localData.tools[t].durability=e},P.prototype.unlockFoodMenu=function(t){w.default.addGainThing([{file:3,id:t,num:1}])},P.prototype.unlockDistrict=function(t){b.gm.localData.addUnlockDistrict(t),p.default.getInstance().updateViewRange(),r.default.emit(v.GameEvent.updateBase)},P.prototype.addCookValue=function(t){l.default.getInstance().addCookValue(t)},P.prototype.getDisplayObject=function(){var t,e=[],o=O.default.getSVBox();for(t in b.gm.mapData.mapObject)b.gm.mapData.mapObject[t]&&b.gm.mapData.mapObject[t].node.isValid?b.gm.mapData.mapObject[t].node.getBoundingBoxToWorld().intersects(o)&&e.push(b.gm.mapData.mapObject[t].data):cc.error(t);cc.log(e)},P.prototype.setCurTask=function(t){var e=b.gm.config.taskConfigs[t];if(e){e.type;var o=f.default.getInstance().taskTypeData[e.type];o.reset();for(var n,i=0,a=b.gm.config.data.Tasks;i<a.length;i++)(r=a[i]).type==e.type&&(n=new _.default(r.id),o.addItem(n));for(var r,c=0;c<o._items.length;c++)if((r=o._items[c]).taskID==t){o.setLastTaskID(o._items[c-1].taskID),g.default.getInstance().setLastTaskID(e.type,o._items[c-1].taskID);break}}},P.prototype.getActiveObject=function(){},P.prototype.showAsset=function(){cc.log(cc.assetManager.assets)},P.prototype.showPrefab=function(){var t=[];cc.assetManager.assets.forEach(function(e){e instanceof cc.Prefab&&t.push(e)}),cc.log(t)},P.prototype.showTexture=function(){var t=[];cc.assetManager.assets.forEach(function(e){e instanceof cc.SpriteFrame&&t.push(e)}),cc.log(t)},P.prototype.changeFloor=function(t,e){(t=C.default.getDataByID(t))&&(y.default.getInstance().setFloor(t.getUID(),e),r.default.emit(v.GameEvent.change_floor))},P.prototype.addDraw=function(t){w.default.addGainThing([{file:v.ThingType.replacement,id:t,num:1}])},P.prototype.findNotUseBuilding=function(){a.default.getInstance().loadBundleByName(v.BundleName.MAIN_UI,function(t){for(var e=0,o=t.getDirWithPath("prefabs/buildings",cc.Prefab);e<o.length;e++){var n=o[e];n=String(n.path).split("/")[2].split("_")[1],m.BigMapConfigUtils.getConfig(Number(n))||cc.log("config not found id",n)}})},P.prototype.test=function(t,e){var o=Math.round((t+1)/8)-1,n=Math.round((e+1)/8)-1;cc.log("converToNewGrid",t,e,o,n),cc.log("cc.v2("+o+", "+n+")")},P.prototype.test2=function(t){t=M.Utils.lzstring.decompressFromBase64(t),t=decodeURIComponent(t),cc.log(t)},P.prototype.showPetMap=function(){b.gm.ui.showModule(b.gm.const.ExploreLoading,function(){b.gm.ui.showModule(b.gm.const.PetMap)})},P.prototype.closePetMap=function(){b.gm.ui.showModule(b.gm.const.Loading,function(){b.gm.ui.closeModule(b.gm.const.PetMap)})},P.prototype.nextDay=function(){D.default.dayReset()},P.prototype.setLastStaffFoodTime=function(t){y.default.getInstance().lastStaffFoodTime=t},P.prototype.staffEatFood=function(){h.StaffViewMgr.getInstance().eatFood()},n=P,i.default=n,cc._RF.pop()},{}],DialogUI:[function(t,e,o){"use strict";cc._RF.push(e,"d26cc+E5etNtKP/+LfUMP8m","DialogUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonUtils"),d=i("ConfigUtils"),h=i("Const"),_=i("GameMgr"),f=i("JumpMgr"),g=i("ReplacementModel"),y=i("AssetMgr"),m=i("EventManager"),v=i("GameModule"),b=i("StringUtil"),I=i("MainRoleMgr"),D=i("NpcMgr");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_dialog_left=null,t.lbl_dialog_right=null,t.spr_dialog_left=null,t.spr_dialog_right=null,t.nod_role_left=null,t.nod_role_right=null,t.nod_left=null,t.nod_right=null,t.nod_touch=null,t.lbl_left_name=null,t.lbl_right_name=null,t.nod_light=null,t.nod_mask=null,t.printTime=.09,t.id=0,t.dialogIndex=0,t.dialogs=[],t.talkEndCb=null,t.isOneDialogEnd=!1,t.tempStrArr=[],t.curRichText=null,t.talkers=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=v.default),C.prototype.onEnable=function(){this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},C.prototype.onDisable=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},C.prototype.setData=function(t,e,o){void 0===o&&(o=!0),this.talkEndCb=e=void 0===e?null:e,this.id=t,this.dialogIndex=0,this.dialogs=this.getDialogsByID(this.id),this.talkers=[];for(var n=0,i=this.dialogs;n<i.length;n++){var a=i[n];this.talkers.includes(a.talker)||this.talkers.push(a.talker)}this.nod_light.active=o,this.nod_mask.active=o,this.nod_touch.opacity=o?0:100,cc.find("lamp",this.nod_left).active=!o,cc.find("lamp",this.nod_right).active=!o,this.updateUI()},C.prototype.updateUI=function(){0==this.dialogIndex&&this.updateDialog()},C.prototype.updateDialog=function(){this.isOneDialogEnd=!1,this.spr_dialog_left.node.active=!1,this.spr_dialog_right.node.active=!1,this.lbl_dialog_left.string="",this.lbl_dialog_right.string="",this.nod_role_left.active=!1,this.nod_role_right.active=!1,this.lbl_left_name.string="",this.lbl_right_name.string="",this.nod_left.active=!1,this.nod_right.active=!1;for(var t=0,e=this.talkers;t<e.length;t++){var o=e[t];this.hideBubble(o)}var n=this.dialogs.shift();n?(this.updatePos(),this.showBubble(n.talker),n.talk_left&&n.talker==n.talk_left?(this.spr_dialog_left.node.active=!0,this.tempStrArr=b.default.getTextRich(n.talk_word),this.curRichText=this.lbl_dialog_left,this.unschedule(this.typingRichText),this.schedule(this.typingRichText,this.printTime,this.tempStrArr.length),this.nod_left.active=!0,this.nod_role_left.active=!0,1==n.talk_left?this.lbl_left_name.string=_.gm.localData.nick_name:this.lbl_left_name.string=this.getNameByID(n.talk_left),this.setSpine(n.talk_left,this.nod_role_left,n.talker_action||"dialogue",!Boolean(n.talker_action))):(this.spr_dialog_right.node.active=!0,this.tempStrArr=b.default.getTextRich(n.talk_word),this.curRichText=this.lbl_dialog_right,this.unschedule(this.typingRichText),this.schedule(this.typingRichText,this.printTime,this.tempStrArr.length),this.nod_right.active=!0,1==n.talk_right?this.lbl_right_name.string=_.gm.localData.nick_name:this.lbl_right_name.string=this.getNameByID(n.talk_right),this.nod_role_right.active=!0,this.setSpine(n.talk_right,this.nod_role_right,n.talker_action||"dialogue",!Boolean(n.talker_action)))):(this.dialogIndex=0,m.default.emit(h.GameEvent.end_dialog,this.id),this.closeMe(),this.talkEndCb&&this.talkEndCb())},C.prototype.setSpine=function(t,e,o,n){void 0===o&&(o="dialogue"),void 0===n&&(n=!0);var i="",a=1==t?(i="ani/main_role_spine/girl","skin_301001"):(i="spine/npc/npc_"+t,"default");y.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,i,sp.SkeletonData,function(t){e.getComponent(sp.Skeleton).skeletonData=t,e.getComponent(sp.Skeleton).setSkin(a),e.getComponent(sp.Skeleton).setCompleteListener(function(t){"dialogue"!=t.animation.name&&e.getComponent(sp.Skeleton).setAnimation(0,"dialogue",!0)}),e.getComponent(sp.Skeleton).setAnimation(0,o,n)}),1==t&&u.default.loadMainRoleSpine(e.getComponent(sp.Skeleton),function(){g.default.createBySpine(e.getComponent(sp.Skeleton),p.default.getInstance().dressing),e.getComponent(sp.Skeleton).setAnimation(0,o,n)})},C.prototype.onTouchEnd=function(){this.isOneDialogEnd?(this.dialogIndex++,this.updateDialog()):this.isOneDialogEnd=!0},C.prototype.getNameByID=function(t){return t?1==t?_.gm.localData.nick_name||"\u6211":(t=d.NPCDataUtils.getConfigByID(t))?t.npc_name:"":""},C.prototype.typingRichText=function(){var t;this.isOneDialogEnd?this.tempStrArr[0]&&(this.curRichText.string=this.tempStrArr[0]):(t=this.tempStrArr.pop())?this.curRichText.string=t:this.isOneDialogEnd=!0},C.prototype.hideBubble=function(t){1==t?I.default.getInstance().mainRole.bubble.hideAll():D.default.getInstance().tryToGetView(t,function(t){t.bubble.hideAll()})},C.prototype.showBubble=function(t){1==t?I.default.getInstance().mainRole.bubble.showChating():D.default.getInstance().tryToGetView(t,function(t){t.bubble.showChating()})},C.prototype.updatePos=function(){var t=this.getDialogsByID(this.id)[0].light_people;if(128!=this.id&&140!=this.id&&126!=this.id&&144!=this.id&&t&&0<t.length){for(var e=[],o=0,n=t;o<n.length;o++){var i=n[o];1==i?e.push(I.default.getInstance().mainRole.getGrid()):(i=D.default.getInstance().getNpcViewByID(i))&&e.push(i.getGrid())}f.default.getInstance().moveToGrid(u.default.getCenterPoint(e))}},C.prototype.getDialogsByID=function(t){for(var e=[],o=0,n=_.gm.config.data.Dialogs;o<n.length;o++){var i=n[o];i.words_id==t&&e.push(i)}return e},s([a(cc.RichText)],C.prototype,"lbl_dialog_left",void 0),s([a(cc.RichText)],C.prototype,"lbl_dialog_right",void 0),s([a(cc.Sprite)],C.prototype,"spr_dialog_left",void 0),s([a(cc.Sprite)],C.prototype,"spr_dialog_right",void 0),s([a(cc.Node)],C.prototype,"nod_role_left",void 0),s([a(cc.Node)],C.prototype,"nod_role_right",void 0),s([a(cc.Node)],C.prototype,"nod_left",void 0),s([a(cc.Node)],C.prototype,"nod_right",void 0),s([a(cc.Node)],C.prototype,"nod_touch",void 0),s([a(cc.Label)],C.prototype,"lbl_left_name",void 0),s([a(cc.Label)],C.prototype,"lbl_right_name",void 0),s([a(cc.Node)],C.prototype,"nod_light",void 0),s([a(cc.Node)],C.prototype,"nod_mask",void 0),s([a({type:cc.Float,tooltip:"\u6253\u5b57\u95f4\u9694\u65f6\u95f4"})],C.prototype,"printTime",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],DistrictMgr:[function(t,e,o){"use strict";cc._RF.push(e,"92c041bYAFOnqLEBOtGWoDG","DistrictMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("ConfigUtils"),l=i("GameMgr"),p=i("Singleton"),u=i("Vec2Utils"),d=i("HouseKeeperMgr");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.district={},t.left=null,t.right=null,t.isLimit=!0,t}r(h,c=p.default),h.prototype.init=function(){this.district={}},h.prototype.addDistrct=function(t){this.district[t.district_id]?cc.warn("add district again"):this.district[t.district_id]=t},h.prototype.updateViewRange=function(){for(var t in this.district){var e=this.district[t];!l.gm.localData.unlockDistrict.includes(Number(t))&&(!(t=s.ConfigUtils.UnlockDistrictUtil.getConfigByID(e.district_id))||t.mission_id||t.cost_prop)||(e.setUnlock(!0),this.left=u.default.getSmallPoint(this.left,e.getBottom()),this.right=u.default.getBigPoint(this.right,e.getTop()))}d.default.getInstance().onUnlockDistrict()},h.prototype.getCenter=function(){return this.left.add(this.right).div(2)},h.prototype.getSize=function(){return cc.size(Math.abs(this.left.x-this.right.x),Math.abs(this.left.y-this.right.y))},h.prototype.getRect=function(){var t=this.getSize();return cc.rect(this.left.x,this.left.y,t.width,t.height)},h.prototype.isInUnlockDistrict=function(t){for(var e in this.district){var o=this.district[e];if(o.isUnlock&&(o=(e=o.collider).node.convertToNodeSpaceAR(t),cc.Intersection.pointInPolygon(o,e.points)))return!0}return!1},r=h,a.default=r,cc._RF.pop()},{}],District:[function(t,e,o){"use strict";cc._RF.push(e,"d51afNPOG1DOokFVlmCAQL1","District");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("NodeUtils"),d=i("NodDistrictLock"),h=cc._decorator;function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.district_id=0,t.collider=null,t.view_range=null,t.nod_cloud=null,t.districLock=null,t.isUnlock=!1,t}a=h.ccclass,i=h.property,h.requireComponent,c(_,l=cc.Component),_.prototype.onLoad=function(){},_.prototype.getBottom=function(){if(this.view_range){var t=this.view_range.convertToWorldSpaceAR(u.default.getMostSmallPoint(this.view_range));return p.gm.mainUI.getContentNode().convertToNodeSpaceAR(t)}return cc.error("no range"),cc.v2(0,0)},_.prototype.getTop=function(){if(this.view_range){var t=this.view_range.convertToWorldSpaceAR(u.default.getMostBigPoint(this.view_range));return p.gm.mainUI.getContentNode().convertToNodeSpaceAR(t)}return cc.error("no range"),cc.v2(0,0)},_.prototype.setUnlock=function(t){this.isUnlock=t,this.nod_cloud&&cc.isValid(this.nod_cloud)&&(this.nod_cloud.active=!this.isUnlock,this.isUnlock&&this.nod_cloud.destroy())},_.prototype.showUnlockTip=function(){this.districLock&&this.districLock.setCanUnlock()},s([i(cc.Integer)],_.prototype,"district_id",void 0),s([i(cc.PolygonCollider)],_.prototype,"collider",void 0),s([i(cc.Node)],_.prototype,"view_range",void 0),s([i(cc.Node)],_.prototype,"nod_cloud",void 0),s([i(d.default)],_.prototype,"districLock",void 0),a=s([a],_),r.default=a,cc._RF.pop()},{}],EditorAsset:[function(t,e,o){"use strict";cc._RF.push(e,"7e383U+Ni1AcrGEIgVxLsxB","EditorAsset");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.load=function(){return new Promise(function(t){t(null),cc.warn("[EditorAsset]","\u8be5\u51fd\u6570\u53ea\u5728\u7f16\u8f91\u5668\u73af\u5883\u5185\u6709\u6548\uff01")})},n.default=i,cc._RF.pop()},{}],EventEmitter:[function(t,e,o){"use strict";cc._RF.push(e,"c14d244P7ZG5K9SesxFMAuG","EventEmitter");var n=o;function i(){this._events={}}Object.defineProperty(n,"__esModule",{value:!0}),n.EventEmitter=void 0,i.prototype.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this._events[t];if(null!=n)for(var i,a=n.length-1;0<=a;a--)(i=n[a]).callback&&i.target&&(i.callback.apply(i.target,e),i.isOnce&&n.splice(a,1))},i.prototype.on=function(t,e,o){this._addListener(t,e,o)},i.prototype.once=function(t,e,o){this._addListener(t,e,o,!0)},i.prototype.off=function(t,e,o){var n=this._events[t];if(null!=n)for(var i=0;i<n.length;i++)if(n[i].callback==e&&n[i].target==o)return void n.splice(i,1)},i.prototype.count=function(t){return(this._events[t]||[]).length},i.prototype._addListener=function(t,e,o,n){void 0===n&&(n=!1);for(var i=this._events[t]||[],a=0;a<i.length;a++)if(i[a].callback==e&&i[a].target==o)return void console.log("\u4e0d\u8981\u91cd\u590d\u6ce8\u518c\u76d1\u542c"+t);i.unshift({callback:e,target:o,isOnce:n}),this._events[t]=i},n.EventEmitter=i,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"0adc4Of5JJM65W7Za5I4w1x","EventManager");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.on=function(t,e,o){var n=this.events;n.has(t)?n.get(t).push({callback:e,target:o}):n.set(t,[{callback:e,target:o}])},i.once=function(t,e,o){var n=this.onceEvents;n.has(t)?n.get(t).push({callback:e,target:o}):n.set(t,[{callback:e,target:o}])},i.off=function(t,e,o){var n=this.events.get(t);if(n)for(var i=0,a=n.length;i<a;i++)if(this.compare(n[i],e,o)){n.splice(i,1),0===n.length&&this.events.delete(t);break}var r=this.onceEvents.get(t);if(r)for(i=0,a=r.length;i<a;i++)if(this.compare(r[i],e,o)){r.splice(i,1),0===r.length&&this.onceEvents.delete(t);break}},i.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this.events.get(t);if(n)for(var i=0;i<n.length;i++){var a=n[i],r=a.callback;(s=a.target)||cc.warn("no target"),r.apply(s,e)}var c=this.onceEvents.get(t);if(c){for(i=0;i<c.length;i++){var s,l=c[i];r=l.callback,(s=l.target)||cc.warn("no target"),r.apply(s,e)}this.onceEvents.delete(t)}},i.remove=function(t){this.events.has(t)&&this.events.delete(t),this.onceEvents.has(t)&&this.onceEvents.delete(t)},i.removeAll=function(){this.events.clear(),this.onceEvents.clear()},i.compare=function(t,e,o){var n=t.callback;return t.target===o&&(n===e||n.toString()===e.toString())},i.events=new Map,i.onceEvents=new Map,n.default=i,cc._RF.pop()},{}],ExchangeUI:[function(t,e,o){"use strict";cc._RF.push(e,"f3b8amLBMRLq4TSpXcoZl9t","ExchangeUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("HttpHelper"),h=i("PropMgr"),_=i("GameModule"),f=i("GetAwardUI");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.edt_exchange=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=_.default),g.prototype.onBtnConfirm=function(){var t=this.edt_exchange.string;t?d.default.getInstance().exchange(t,this.getDataFromServerCB,this):u.gm.ui.showNotice("\u8f93\u5165\u5185\u5bb9\u4e3a\u7a7a"),cc.log(t)},g.prototype.onBtnClose=function(){this.edt_exchange.string="",this.closeMe()},g.prototype.getDataFromServerCB=function(t){if(0==t.ResultCode){cc.log(t.data);var e,o=[];for(e in t.data){var n={file:p.ThingType.normal,id:Number(e),num:Number(t.data[e])};o.push(n)}h.default.addGainThing(o,!1),u.gm.ui.showModule(u.gm.const.GetAwardUI,function(t){t.setVideo(!0),t.setData(o,f.GetAwardType.open)}),this.edt_exchange.string="",this.closeMe()}else u.gm.ui.showNotice(t.msg)},s([a(cc.EditBox)],g.prototype,"edt_exchange",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],ExploreAutoCollect:[function(t,e,o){"use strict";cc._RF.push(e,"8858bzQpCpGdYPV8TFjUa+o","ExploreAutoCollect");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("ReplacementModel"),f=i("GameModule"),g=i("SpineUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.sp_role=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.default),y.prototype.onEnable=function(){var t=this,e=0==h.gm.localData.sex_id?h.gm.const.SEX_GIRL_NAME:h.gm.const.SEX_BOY_NAME;g.default.async_set_spine(this.sp_role,d.BundleName.MAIN_UI,"ani/main_role_spine/"+e,function(){_.default.createBySpine(t.sp_role,p.default.getInstance().dressing,!0),t.sp_role.setAnimation(0,"axe_back",!0),g.default.changePartialCloth(t.sp_role,"b_broom","default","role_tool_60031_2")},this)},y.prototype.onDisable=function(){},y.prototype.onClickGet=function(){var t=this;u.default.showVideo(function(){h.gm.localData.autoCollectTime+=1800,h.gm.localData.autoCollectTotalTime+=1800,h.gm.localData.autoCollectState=1,h.gm.localData.saveByKey("autoCollectTotalTime"),t.closeMe()},40000031)},y.prototype.onClickDrop=function(){this.closeMe()},s([a(sp.Skeleton)],y.prototype,"sp_role",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ExploreBox:[function(t,e,o){"use strict";cc._RF.push(e,"2dffdbEgt9MoY5u+Jr75OfS","ExploreBox");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("IconUtils"),g=i("EventManager"),y=i("GameModule"),m=i("TaskRecordData"),v=i("ExploreData");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.video=null,t.key_lbl=null,t.key_node=null,t.icon=null,t.count=null,t._pool_id=0,t._zone_id=0,t._res_id=0,t._index=0,t._chara_uid=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=y.default),b.prototype.setData=function(t,e,o,n,i){this._pool_id=t,this._res_id=o,this._zone_id=e,this._index=n,this._chara_uid=i,this.show_data()},b.prototype.show_data=function(){var t;h.gm.localData.explore_data.box_data[this._chara_uid]||(t=u.PropRandomPool.getItemsByPoolID(this._pool_id,1),(e=new v.BoxItemData).uid=this._chara_uid,e.id=t[0].id,e.num=t[0].num,h.gm.localData.explore_data.box_data[this._chara_uid]=e,h.gm.localData.saveByKey("explore_data"));var e=u.PropUtils.getConfigByPropID(h.gm.localData.explore_data.box_data[this._chara_uid].id);this.count.string=e.name+"x"+h.gm.localData.explore_data.box_data[this._chara_uid].num,f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"texture/strength/prop_"+h.gm.localData.explore_data.box_data[this._chara_uid].id+"_strength",this.icon)},b.prototype.onEnable=function(){_.default.getPropCount(h.gm.const.explore_box_key_id)<=0?(this.key_node.active=!1,this.video.active=!0):(this.key_node.active=!0,this.video.active=!1)},b.prototype.onDisable=function(){},b.prototype.addProp=function(){var t=h.gm.localData.explore_data.box_data[this._chara_uid];_.default.addProps([{id:t.id,num:t.num}],!1);var e=h.gm.ui.get_module(h.gm.const.Explore);p.default.fly(e.getMainChara().node,[{id:t.id,num:t.num,file:1}]),delete h.gm.localData.explore_data.box_data[this._chara_uid],t=u.OutSideMapResUtils.getConfig(this._zone_id,this._res_id),t=Math.floor(Date.now()/1e3)+t.cd_min,h.gm.localData.explore_data.collectZoneRes(this._zone_id,this._res_id,this._index,t),g.default.emit(d.GameEvent.delete_explore_pet,this._chara_uid),h.gm.ui.closeModule(h.gm.const.ExploreBox)},b.prototype.onClickGet=function(){var t=this;p.default.showVideo(function(){t.addProp()})},b.prototype.onClickKey=function(){_.default.getPropCount(h.gm.const.explore_box_key_id)<=0||(_.default.tryConsume([{id:h.gm.const.explore_box_key_id,num:1}],!0),m.default.getInstance().addOpenBoxData(10701),this.addProp())},b.prototype.onClickClose=function(){h.gm.ui.closeModule(h.gm.const.ExploreBox)},s([a(cc.Node)],b.prototype,"video",void 0),s([a(cc.Label)],b.prototype,"key_lbl",void 0),s([a(cc.Node)],b.prototype,"key_node",void 0),s([a(cc.Sprite)],b.prototype,"icon",void 0),s([a(cc.Label)],b.prototype,"count",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],ExploreData:[function(t,e,o){"use strict";cc._RF.push(e,"54d4f5TrSNK9asNf7db3/fX","ExploreData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.BoxItemData=i.PetItemData=i.PetRoomDecorateWarehouse=i.PetRoomDecorateData=i.ZoneItemData=i.ZoneResData=i.ExploreData=void 0;var a=n("ConfigUtils"),r=n("Const"),c=n("GameMgr"),s=n("Utils"),l=n("EventManager"),p=n("TimeUtils");function u(){this.tZoneData={},this.pet_data_map=[],this.pet_decorate_data=[],this.pet_props={},this.chapter_id=1,this.max_id=1,this.explore_scale=1,this.explore_state=0,this.last_pos=cc.v2(0,0),this.target_pos=cc.v2(0,0),this.box_data={},this.collect_id=0,this.kill_monster_count=0}u.prototype.init_data=function(){this.chapter_id=1,this.max_id=1,this.tZoneData={},this.explore_scale=1,this.explore_state=0,this.box_data={}},u.prototype.savePetPos=function(t,e){for(var o=0;o<this.pet_data_map.length;++o)if(t==this.pet_data_map[o].pet_id)return this.pet_data_map[o].pos=e,void c.gm.localData.saveByKey("explore_data")},u.prototype.deletePetProp=function(t){return!!(this.pet_props[t]&&0<this.pet_props[t].count)&&(this.pet_props[t].count--,c.gm.localData.saveByKey("explore_data"),!0)},u.prototype.addPetProp=function(t,e){void 0===e&&(e=!0),this.pet_props[t]?e&&this.pet_props[t].count++:(this.pet_props[t]=new d,this.pet_props[t].id=t,this.pet_props[t].level=1,this.pet_props[t].count=e?1:0),l.default.emit(r.GameEvent.change_pet_decorate_byid,t),c.gm.localData.saveByKey("explore_data")},u.prototype.getPetPos=function(t){for(var e=0;e<this.pet_data_map.length;++e)if(t==this.pet_data_map[e].pet_id)return this.pet_data_map[e].pos;return null},u.prototype.getRoomPetPos=function(t){for(var e=0;e<this.pet_data_map.length;++e)if(t==this.pet_data_map[e].pet_id)return this.pet_data_map[e].pos_room;return null},u.prototype.saveRoomPetPos=function(t,e){for(var o=0;o<this.pet_data_map.length;++o)if(t==this.pet_data_map[o].pet_id)return this.pet_data_map[o].pos_room=e,void c.gm.localData.saveByKey("explore_data")},u.prototype.getPetDecorateId=function(t,e){for(var o=0;o<this.pet_decorate_data.length;++o)if(this.pet_decorate_data[o].type_id==t&&this.pet_decorate_data[o].index==e)return this.pet_decorate_data[o].decorate_id;return 0},u.prototype.getPetDecorateLv=function(t){return this.pet_props[t]?this.pet_props[t].level:1},u.prototype.getPetData=function(t){for(var e=0;e<this.pet_data_map.length;++e)if(t==this.pet_data_map[e].pet_id)return this.pet_data_map[e];return null},u.prototype.getPetIndex=function(t){for(var e=0;e<this.pet_data_map.length;++e)if(t==this.pet_data_map[e].pet_id)return e;return 0},u.prototype.getBridgeIsUnlock=function(t,e){if(this.tZoneData[t])for(var o=0;o<this.tZoneData[t].unlock_id_list.length;++o)if(e==this.tZoneData[t].unlock_id_list[o])return!0;return!1},u.prototype.getZoneData=function(t){return this.checkNeedResetZoneData(t)&&this.initZoneData(t),this.tZoneData[t]},u.prototype.checkNeedResetZoneData=function(t){if(null==this.tZoneData[t])return!0;for(var e=this.tZoneData[t].tResMap,o=a.OutSideMapResUtils.getConfigAry(t),n=0;n<o.length;n++){var i=o[n],r=e[i.res_id];if(null==r||r.length!=i.num)return!0}return!1},u.prototype.getZoneResData=function(t,e,o){return this.getZoneData(t).tResMap[e][o]},u.prototype.initZoneData=function(t){console.warn("------------------------------------------------"),console.warn("ExploreData initZoneData iZoneId:"+t),console.warn("------------------------------------------------"),this.chapter_id=1,this.max_id=1,this.tZoneData[t]={id:t,tResMap:{},ran_num:0,collect_times:0,unlock_id_list:[],treasure_times:0};for(var e=a.OutSideMapResUtils.getConfigAry(t),o=this.tZoneData[t].tResMap,n=0;n<e.length;n++){var i=e[n],r=s.Utils.derangedArray(i.pos_list);o[i.res_id]=[];for(var l=o[i.res_id],p=0;p<i.num;p++)l.push({id:i.res_id,sPosName:r[p],iNextGenTime:0,iNextDisappearTime:0,pos:null,leftCount:1,is_send:!1,uid:0})}c.gm.localData.saveByKey("explore_data")},u.prototype.checkZoneResIsCollected=function(t,e,o){return e=this.getZoneData(t).tResMap[e][o],o=s.Utils.get_cur_time(),e.iNextGenTime>o},u.prototype.collectZoneRes=function(t,e,o,n,i){void 0===i&&(i=1);var r=this.getZoneData(t),l=r.tResMap[e];if(t=a.OutSideMapResUtils.getConfig(t,e)){for(var p={},u=0;u<l.length;u++){var d=l[u];u!=o&&(p[d.sPosName]=1)}var h=s.Utils.derangedArray(t.pos_list);for(u=h.length-1;0<=u;u--)p[h[u]]&&h.splice(u,1);e=r.tResMap[e][o],0<n&&(e.iNextGenTime=n),e.leftCount=i,e.sPosName=h[0],c.gm.localData.saveByKey("explore_data")}},u.prototype.reset_time=function(t){var e,o=s.Utils.get_cur_time(),n=this.getZoneData(t);for(e in n.tResMap)for(var i=n.tResMap[e],a=0;a<i.length;a++)i[a].iNextGenTime=o;c.gm.localData.saveByKey("explore_data")},u.prototype.set_collect_time=function(){},u.prototype.push_pet=function(t,e){for(var o=0;o<this.pet_data_map.length;++o)if(t==this.pet_data_map[o].pet_id)return;l.default.emit(r.GameEvent.explore_show_pet,t);var n=new h;n.pet_id=t,n.pos.x=e.x,n.pos.y=e.y,n.hungry_value=c.gm.const.MAX_PET_INIT_HUNGRY_VALUE,n.next_hungry_time=p.default.getTime(),this.pet_data_map.push(n),c.gm.localData.saveByKey("explore_data"),n=c.gm.config.getPetConfig(t),s.Utils.broadWorld(r.BroadTypeEnum.BroadPet,0,n.name)},n=u,i.ExploreData=n,i.ZoneResData=function(){this.uid=0,this.id=0,this.iNextGenTime=0,this.sPosName="",this.iNextDisappearTime=0,this.pos=null,this.leftCount=0,this.is_send=!1},i.ZoneItemData=function(){this.id=0,this.tResMap=null,this.ran_num=0,this.collect_times=0,this.unlock_id_list=[],this.treasure_times=0},i.PetRoomDecorateData=function(){this.type_id=0,this.index=0,this.decorate_id=0};var d=function(){this.id=0,this.level=0,this.count=0};i.PetRoomDecorateWarehouse=d;var h=function(){this.pet_id=0,this.pos=cc.v2(0,0),this.pos_room=cc.v2(0,0),this.hungry_value=0,this.next_hungry_time=0};i.PetItemData=h,i.BoxItemData=function(){this.uid=0,this.id=0,this.num=0},cc._RF.pop()},{}],ExploreFeedPet:[function(t,e,o){"use strict";cc._RF.push(e,"1d589s0EqFJx75MRMCR8xip","ExploreFeedPet");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("EventManager"),f=i("GameModule"),g=i("SpineUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.sp_role=null,t.food_node=null,t.food_icon=null,t.diamond_node=null,t.diamond_count_lbl=null,t.diamond_food_icon=null,t._pet_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.default),y.prototype.setData=function(t){var e=this;this._pet_id=t;var o=u.gm.config.getPetConfig(t);g.default.async_set_spine(this.sp_role,p.BundleName.MAIN_UI,"ani/pet/"+o.ani_name,function(){e.sp_role.setAnimation(0,"standby_hungry",!0)},this),0<d.default.getPropCount(o.food)?(this.food_node.active=!0,this.diamond_node.active=!1,h.IconUtils.setPropSprite(o.food,this.food_icon)):(this.food_node.active=!1,this.diamond_node.active=!0,t=d.default.getConfigByPropID(o.food),this.diamond_count_lbl.string=t.diamond_translate+"",h.IconUtils.setPropSprite(o.food,this.diamond_food_icon))},y.prototype.onEnable=function(){},y.prototype.onDisable=function(){},y.prototype.feedPet=function(){},y.prototype.onClickFeedFood=function(){var t=u.gm.config.getPetConfig(this._pet_id),e=u.gm.localData.explore_data.getPetData(this._pet_id);d.default.tryConsume([{id:t.food,num:1}],!0)&&(e.hungry_value=0,e.hungry_value=e.hungry_value<=0?0:e.hungry_value,_.default.emit(p.GameEvent.feed_pet,this._pet_id),u.gm.localData.saveByKey("explore_data")),this.closeMe()},y.prototype.onClickFeedDiamond=function(){var t=u.gm.config.getPetConfig(this._pet_id),e=d.default.getConfigByPropID(t.food);t=u.gm.localData.explore_data.getPetData(this._pet_id),d.default.tryConsume([{id:p.CommonPropID.diamond,num:e.diamond_translate}],!0)&&(t.hungry_value=0,t.hungry_value=t.hungry_value<=0?0:t.hungry_value,_.default.emit(p.GameEvent.feed_pet,this._pet_id),u.gm.localData.saveByKey("explore_data")),this.closeMe()},s([a(sp.Skeleton)],y.prototype,"sp_role",void 0),s([a(cc.Node)],y.prototype,"food_node",void 0),s([a(cc.Sprite)],y.prototype,"food_icon",void 0),s([a(cc.Node)],y.prototype,"diamond_node",void 0),s([a(cc.Label)],y.prototype,"diamond_count_lbl",void 0),s([a(cc.Sprite)],y.prototype,"diamond_food_icon",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ExploreLoading:[function(t,e,o){"use strict";cc._RF.push(e,"c2d6eKmiIVJ06Lbcy1xDIxE","ExploreLoading");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameModule");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_car=null,t.spr_progress=null,t._time=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.default),u.prototype.onEnable=function(){this.spr_progress.fillRange=0,this.nod_car.x=-281},u.prototype.onDisable=function(){},u.prototype.update=function(t){this._time+=t,this.spr_progress.fillRange=this._time/2,this.nod_car.x=this._time/2*562-281,2<=this._time&&(this._time=0)},s([a(cc.Node)],u.prototype,"nod_car",void 0),s([a(cc.Sprite)],u.prototype,"spr_progress",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],ExploreOneKeyItem:[function(t,e,o){"use strict";cc._RF.push(e,"278f9djEM9Jp4iBx3E35k60","ExploreOneKeyItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("IconUtils"),d=i("ListItem"),h=i("ToolMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count=null,t.lbl_pro=null,t.spr_icon=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.default),_.prototype.onEnable=function(){},_.prototype.onDisable=function(){},_.prototype.setData=function(t){this.data=t;var e,o=h.default.getInstance().getConfigs(t),n=1;p.gm.localData.tools[t]?(e=o[(n=(n=p.gm.localData.tools[t].toolLv)<=0?1:n)-1],0==(t=p.gm.localData.tools[t].durability)||t||(t=e.tool_use_time),this.lbl_count.string=t+"/"+e.tool_use_time,this.lbl_pro.progress=t/e.tool_use_time):(e=o[n-1],this.lbl_count.string=e.tool_use_time+"/"+e.tool_use_time,this.lbl_pro.progress=1),u.IconUtils.setPropSprite(e.prop_id,this.spr_icon)},s([a(cc.Label)],_.prototype,"lbl_count",void 0),s([a(cc.ProgressBar)],_.prototype,"lbl_pro",void 0),s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ExploreOneKeyRepair:[function(t,e,o){"use strict";cc._RF.push(e,"8a70dmN41JPvJWPpqssH4e9","ExploreOneKeyRepair");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("List"),_=i("GameModule"),f=i("ToolMgr"),g=i("ExploreOneKeyItem");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.showItems=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.onEnable=function(){this.setShowItems()},y.prototype.setShowItems=function(){this.list.numItems=m.length},y.prototype.onRender=function(t,e){t.getComponent(g.default).setData(m[e])},y.prototype.onBtnBack=function(){d.gm.localData.autoCollectState=1,d.gm.localData.saveByKey("autoCollectState"),this.closeMe()},y.prototype.onClickRepairk=function(){var t=this;p.default.showVideo(function(){for(var e=0;e<=m.length;++e){var o=f.default.getInstance().getConfigs(m[e]);d.gm.localData.tools[m[e]]&&(o=o[d.gm.localData.tools[m[e]].toolLv-1],d.gm.localData.tools[m[e]].durability=o.tool_use_time,d.gm.localData.saveByKey("tools"))}d.gm.localData.autoCollectState=1,d.gm.localData.saveByKey("autoCollectState"),t.closeMe()},40000032)},s([a(h.default)],y.prototype,"list",void 0),i=s([i],y),r.default=i;var m=[u.ToolClass.liandao,u.ToolClass.futou,u.ToolClass.gaozi,u.ToolClass.chanzi,u.ToolClass.chutou,u.ToolClass.gongnu];cc._RF.pop()},{}],ExplorePet:[function(t,e,o){"use strict";cc._RF.push(e,"d590bMPFzZChLxUHXcGhyPv","ExplorePet");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("AssetMgr"),_=i("EventManager"),f=i("GameModule");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.get_node=null,t.get_pet_name=null,t.get_modle_node=null,t.rescure_node=null,t.rescure_modle_node=null,t.data=0,t.zone_id=0,t.res_id=0,t.index=0,t.pet_uid=0,t.pos=cc.v2(0,0),t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.setData=function(t,e,o,n,i,a){this.data=t,this.zone_id=e,this.res_id=o,this.index=n,this.pet_uid=i,this.pos=a,this.updateUI()},g.prototype.updateUI=function(){var t=this;this.rescure_node.active=!0,this.get_node.active=!1,this.rescure_modle_node.removeAllChildren(),h.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"prefabs/explore/pet_ui/pet_wild_ui_"+this.data,cc.Prefab,function(e){e=cc.instantiate(e),t.rescure_modle_node.addChild(e)}),this.get_node.removeAllChildren(),h.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"prefabs/explore/pet_ui/pet_ui_"+this.data,cc.Prefab,function(e){e=cc.instantiate(e),t.get_node.addChild(e)})},g.prototype.onEnable=function(){},g.prototype.onDisable=function(){},g.prototype.onClickGet=function(){var t=this;p.default.showVideo(function(){d.gm.localData.explore_data.push_pet(t.data,t.pos),t.rescure_node.active=!1,t.get_node.active=!0;var e=Math.floor(Date.now()/1e3)+1e8;d.gm.localData.explore_data.collectZoneRes(t.zone_id,t.res_id,t.index,e),_.default.emit(u.GameEvent.delete_explore_pet,t.pet_uid),d.gm.ui.closeModule(d.gm.const.ExplorePet)},40000034)},g.prototype.onClickDrop=function(){d.gm.ui.closeModule(d.gm.const.ExplorePet),_.default.emit(u.GameEvent.explore_reset_hp,this.pet_uid)},g.prototype.onClickClose=function(){d.gm.ui.closeModule(d.gm.const.ExplorePet)},s([a(cc.Node)],g.prototype,"get_node",void 0),s([a(cc.Label)],g.prototype,"get_pet_name",void 0),s([a(cc.Node)],g.prototype,"get_modle_node",void 0),s([a(cc.Node)],g.prototype,"rescure_node",void 0),s([a(cc.Node)],g.prototype,"rescure_modle_node",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],ExploreStoreItem:[function(t,e,o){"use strict";cc._RF.push(e,"7210ffBCmpPTYwMqBcRUi3z","ExploreStoreItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("PropMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("EventManager"),g=i("NetUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count=null,t.spr_icon=null,t.tips_name=null,t.tips_desc=null,t.tips_node=null,t.need_lbl_count=null,t.need_spr_icon=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.updateUI=function(){},y.prototype.onEnable=function(){f.default.on(u.GameEvent.explore_store_tips,this.hideTips,this)},y.prototype.onDisable=function(){f.default.off(u.GameEvent.explore_store_tips,this.hideTips,this)},y.prototype.setData=function(t){this.data=t,h.IconUtils.setPropSprite(t.need_id,this.need_spr_icon),p.default.setUIByGainThing(t.prop,this.spr_icon,this.tips_name,this.tips_desc),this.lbl_count.string="x"+t.prop.num,this.need_lbl_count.string=d.default.getPropCount(t.need_id)+"/"+t.need_num,this.tips_node.active=!1},y.prototype.onClickTips=function(){f.default.emit(u.GameEvent.explore_store_tips),this.tips_node.active=!this.tips_node.active},y.prototype.hideTips=function(){this.tips_node.active=!1},y.prototype.onClickBuy=function(){f.default.emit(u.GameEvent.explore_store_tips),d.default.tryToBuy(this.data.prop,{file:u.ThingType.normal,id:this.data.need_id,num:this.data.need_num},!0)&&(g.ReportData.instance.report_point(100008,this.listId+1),f.default.emit(u.GameEvent.explore_store))},y.prototype.onClickBg=function(){f.default.emit(u.GameEvent.explore_store_tips)},s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(cc.Label)],y.prototype,"tips_name",void 0),s([a(cc.Label)],y.prototype,"tips_desc",void 0),s([a(cc.Node)],y.prototype,"tips_node",void 0),s([a(cc.Label)],y.prototype,"need_lbl_count",void 0),s([a(cc.Sprite)],y.prototype,"need_spr_icon",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ExploreStore:[function(t,e,o){"use strict";cc._RF.push(e,"a6aa4z+eEJMopj4fceTCUR/","ExploreStore");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("ReplacementHelper"),v=i("ExploreStoreItem");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.item_count_lbl=null,t.showItems=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=y.default),b.prototype.onEnable=function(){this.updateUI(),g.default.on(d.GameEvent.explore_store,this.updateUI,this)},b.prototype.updateUI=function(){for(var t,e=u.ExploreStoreUtils.getConfigAry(),o=0;o<e.length;)e[o].prop.file==d.ThingType.replacement?(t=m.default.getInstance().getConfigById(String(e[o].prop.id)),p.default.getInstance().my_dress.includes(String(e[o].prop.id))||2!=t.gender&&t.gender!=h.gm.localData.sex_id?e.splice(o,1):++o):++o;this.setShowItems(e),this.show_item_count()},b.prototype.onDisable=function(){g.default.off(d.GameEvent.explore_store,this.updateUI,this)},b.prototype.show_item_count=function(){this.item_count_lbl.string=_.default.getPropCount(11001)+""},b.prototype.setShowItems=function(t){this.showItems=t,this.list.numItems=this.showItems.length},b.prototype.onRender=function(t,e){t.getComponent(v.default).setData(this.showItems[e])},b.prototype.onBtnBack=function(){this.closeMe()},b.prototype.onBtnBg=function(){g.default.emit(d.GameEvent.explore_store_tips)},s([a(f.default)],b.prototype,"list",void 0),s([a(cc.Label)],b.prototype,"item_count_lbl",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],FWEvent:[function(t,e,o){"use strict";cc._RF.push(e,"15417Y5NpBFMZdAwLfdkrsh","FWEvent");var n=o;Object.defineProperty(n,"__esModule",{value:!0}),n.FWEvent=void 0,(n=n.FWEvent||(n.FWEvent={})).LoadBundleResProgress="FrameEvent_LoadBundleResProgress",n.LoadBundleResComplete="FrameEvent_LoadBundleResComplete",n.Onshow="FrameEvent_Onshow",cc._RF.pop()},{}],FactoryNeedItem:[function(t,e,o){"use strict";cc._RF.push(e,"ee489P4GaBDBYP+v8tcTFkr","FactoryNeedItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonDiamondNeed"),u=i("CommonPropItem"),d=i("ListItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.propItem=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.default),h.prototype.start=function(){},h.prototype.setData=function(t){this.propItem.setData(t);var e=this.getComponent(p.default);e&&e.setData(t)},s([a(u.default)],h.prototype,"propItem",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],FactoryProductionItem:[function(t,e,o){"use strict";cc._RF.push(e,"14fe5BTDpdA/61H87q8FUxD","FactoryProductionItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("LvMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("EventManager"),g=i("NodeUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_check=null,t.spr_facade=null,t.lbl_lv=null,t.nod_lock=null,t.lbl_count=null,t.nod_rate=null,t.lbl_rate=null,t.lock=!0,t.selectIndex=0,t.produce_rate=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),f.default.on(p.GameEvent.updateBase,this.updateUI,this)},y.prototype.onTouch=function(){this.lock||(f.default.emit(p.GameEvent.factory_ui_select,this.listId),this.updateUI())},y.prototype.onDisable=function(){f.default.off(p.GameEvent.updateBase,this.updateUI,this)},y.prototype.setData=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=1),this.produceConfig=t,this.selectIndex=e,this.produce_rate=o,this.updateUI()},y.prototype.updateUI=function(){this.produceConfig.lv_need>u.default.getInstance().getLv()?(this.lbl_lv.string=this.produceConfig.lv_need+"\u7ea7",this.lock=!0):this.lock=!1,this.nod_check&&(this.nod_check.active=Boolean(this.selectIndex==this.listId)),this.nod_lock.active=this.lock,this.lbl_count.node.active=!this.lock,this.lbl_count.string=d.default.getPropCount(this.produceConfig.productions[0].id)+"",g.default.setGray(this.spr_facade.node,this.lock),h.IconUtils.setPropSprite(this.produceConfig.productions[0].id,this.spr_facade),this.nod_rate.active=Boolean(1<this.produce_rate)&&this.listId==this.selectIndex,this.lbl_rate.string="x"+this.produce_rate},s([a(cc.Node)],y.prototype,"nod_check",void 0),s([a(cc.Sprite)],y.prototype,"spr_facade",void 0),s([a(cc.Label)],y.prototype,"lbl_lv",void 0),s([a(cc.Node)],y.prototype,"nod_lock",void 0),s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(cc.Node)],y.prototype,"nod_rate",void 0),s([a(cc.Label)],y.prototype,"lbl_rate",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],FarmObjectData:[function(t,e,o){"use strict";cc._RF.push(e,"da40cOdyN9HGZ+VO/pPf9aV","FarmObjectData");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("MapObjectData").default),r=s,c.default=r,cc._RF.pop()},{}],FeedSlot:[function(t,e,o){"use strict";cc._RF.push(e,"5e809IPfrxCW65URXgLy0R2","FeedSlot");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("BuildInsideUnlockUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("EventManager"),f=i("NodeUtils"),g=i("GuideMgr");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_feed=null,t.nod_machine=null,t.lbl_desc=null,t.nod_tip_pos=null,t.nod_unlock=null,t.slotData=null,t.prop=null,t.produceConfig=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=cc.Component),y.prototype.onEnable=function(){},y.prototype.onDisable=function(){},y.prototype.setData=function(t,e){this.objectData=e,this.slotData=t,this.updateUI()},y.prototype.updateUI=function(){this.nod_unlock.active=!1,this.slotData.isLock?f.default.setGray(this.node):f.default.setGray(this.node,!1),this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.slotData.index&&(this.nod_unlock.active=!0,f.default.setGray(this.node,!1),g.default.getInstance().showTaskFinger(1046,1)),_.default.emit(d.GameEvent.update_slot_ui),this.slotData.checkHasProduce()?(this.nod_feed.active=!0,this.produceConfig=u.ProduceUtils.getConfigByProduceID(this.slotData.getCurProduce().produceID),this.prop=u.PropUtils.getConfigByPropID(this.produceConfig.productions[0].id),this.slotData.getCurProduce().canHarvest()?this.lbl_desc.string=this.prop.name+"\u5df2\u5b8c\u6210":this.lbl_desc.string=this.prop.name+"\u5236\u9020\u4e2d"+this.slotData.getCurProduce().getLeftTimeCountDownStr()):this.nod_feed.active=!1},y.prototype.update=function(){this.slotData&&this.slotData.checkHasProduce()&&this.produceConfig&&(this.slotData.getCurProduce().canHarvest()?(this.lbl_desc.string=this.prop.name+"\u5df2\u5b8c\u6210",_.default.emit(d.GameEvent.update_slot_ui)):this.lbl_desc.string=this.prop.name+"\u5236\u9020\u4e2d"+this.slotData.getCurProduce().getLeftTimeCountDownStr())},y.prototype.onTouchSlot=function(){var t,e,o,n=this;this.slotData.isLock?this.objectData.getFirstLockSlot().index==this.slotData.index&&(g.default.getInstance().showTaskFinger(1046,2),e=p.default.getBuildInsideLockConfig((t=this).objectData.objectID,this.slotData.index),h.gm.ui.showModule(h.gm.const.UnlockUI,function(o){o.setNeedProp(e.need_prop),o.setDesc(""),o.setIconByStr(e.icon),o.callback=function(){t.objectData.unlockSlot(t.slotData.index),t.updateUI(),_.default.emit(d.GameEvent.update_slot_ui)}})):this.slotData.checkHasProduce()&&(this.slotData.getCurProduce().canHarvest()?0<this.objectData.harvest(this.slotData.index).length&&this.updateUI():(o=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.nod_tip_pos&&(o=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),h.gm.ui.showModule(h.gm.const.LandTip,function(t){t.updatePos(o),t.setData(n.slotData.getCurProduce()),t.setNewData(n.objectData,n.slotData.index)})))},s([a(cc.Node)],y.prototype,"nod_feed",void 0),s([a(cc.Node)],y.prototype,"nod_machine",void 0),s([a(cc.Label)],y.prototype,"lbl_desc",void 0),s([a(cc.Node)],y.prototype,"nod_tip_pos",void 0),s([a(cc.Node)],y.prototype,"nod_unlock",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],FileSaver:[function(t,e){"use strict";cc._RF.push(e,"504d8cxYWlMboREHXNcPY/i","FileSaver"),cc._RF.pop()},{}],FingerGuide:[function(t,e,o){"use strict";cc._RF.push(e,"d0af8tR/1xEu4G2hwzgekJ7","FingerGuide");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("HollowOut"),u=i("GameModule"),d=i("Finger"),h=i("Const");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.finger=null,t.hollowOut=null,t.gridRecord=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=u.default),_.prototype.showFingerByObject=function(t){var e=this,o=t.getTopPos(!0);[h.SpecialObjectID.Ox,h.SpecialObjectID.Milk_Cow,h.SpecialObjectID.Chicken,10205,10208,10212,10217,10218,10340,10346,10372,10380,10410,10416,10417,10418,10419,10500,10510,10520,10521,10530,10405,10063,10071,h.SpecialObjectID.barbecue,h.SpecialObjectID.bbq_cash_box,h.SpecialObjectID.bbq_desk].includes(t.objectID)&&(o=t.getCenterPos(!0)),this.gridRecord=o,this.object=t,t=this.gridRecord,t=this.node.convertToNodeSpaceAR(t),this.finger.node.x=t.x,this.finger.node.y=t.y,this.finger.showFinger(!0,!0,function(){e.gridRecord=null,e.object=null}),this.showHole(t,cc.size(200,200))},_.prototype.update=function(){var t;this.object&&this.finger.finger.active&&this.gridRecord&&(t=this.gridRecord,t=this.node.convertToNodeSpaceAR(t),this.finger.node.x=t.x,this.finger.node.y=t.y)},_.prototype.showFingerByNode=function(t,e,o,n){var i=this;void 0===e&&(e=!0),void 0===o&&(o=cc.v2(0,0)),void 0===n&&(n=!0),t&&cc.isValid(t)?(this.finger.hide(),this.gridRecord=null,this.hollowOut.node.active=!1,this.unscheduleAllCallbacks(),this.scheduleOnce(function(){var a=t.convertToWorldSpaceAR(cc.v2(0,0));a=i.node.convertToNodeSpaceAR(a),i.finger.node.x=a.x+o.x,i.finger.node.y=a.y+o.y,i.finger.showFinger(!0,n,function(){i.gridRecord=null}),e&&i.showHole(a,t.getContentSize())},0)):cc.error("not node",t)},_.prototype.showHole=function(t,e){var o=this;this.hollowOut.node.active=!0,this.hollowOut.setNodeSize(),e=Math.max(e.height,e.width)/1.5||100,this.hollowOut.circleTo(.5,t,e,e/3),this.scheduleOnce(function(){o.hollowOut.node.active=!1},1)},s([a(d.default)],_.prototype,"finger",void 0),s([a(p.default)],_.prototype,"hollowOut",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Finger:[function(t,e,o){"use strict";cc._RF.push(e,"d1decNVrUJOEKcRGgOXed4O","Finger");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GuideMgr");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.finger=null,t.task_uids=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=cc.Component),u.prototype.onLoad=function(){p.default.getInstance().addFinger(this),this.finger.active=!1},u.prototype.showFinger=function(t,e,o){var n=this;void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===o&&(o=null),this.node.active=!0,this.show(),this.unscheduleAllCallbacks(),e&&this.scheduleOnce(function(){n.hide(),o&&o()},2)},u.prototype.isCurTouchTaskFinger=function(t,e){return p.default.getInstance().touchTaskID==t&&!!this.task_uids&&this.isFinger(t,e)},u.prototype.isFinger=function(t,e){if(this.task_uids)for(var o=0,n=this.task_uids;o<n.length;o++){var i=n[o].split("-");if(t==Number(i[0])&&e==Number(i[1]))return!0}return!1},u.prototype.show=function(t){void 0===t&&(t=!0),this.finger&&(this.finger.active=t)},u.prototype.hide=function(){this.finger&&(this.finger.active=!1)},s([a(cc.Node)],u.prototype,"finger",void 0),s([a({type:[cc.String]})],u.prototype,"task_uids",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],FloorLamp:[function(t,e,o){"use strict";cc._RF.push(e,"06cd1xQZudPLY//BKKQMHCo","FloorLamp");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject");function p(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.GameObject),p.prototype.onEnable=function(){},p.prototype.playRocking=function(){},p.prototype.stopAni=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],FlyCoin:[function(t,e,o){"use strict";cc._RF.push(e,"5a54488madNKI9W3oYVkVkb","FlyCoin");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("NodePoolItem"),u=i("CommonUtils"),d=i("Const");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_count=null,t.nod_star=null,t.cb=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=p.NodePoolItem),h.prototype.start=function(){},h.prototype.onEnable=function(){},h.prototype.setType=function(t){this.node.children[t]?this.node.children[t].active=!0:this.node.getChildByName(t+"")&&(this.node.getChildByName(t+"").active=!0)},h.prototype.setIcon=function(t){t.file==d.ThingType.mapObject?this.nod_star.active=!0:this.nod_star.active=!1,u.default.setUIByGainThing(t,this.spr_icon,null)},h.prototype.playAni=function(t){this.cb=t=void 0===t?null:t,this.getComponent(cc.Animation).play(),this.getComponent(cc.Animation).off("stop",this.onStop,this),this.getComponent(cc.Animation).on("stop",this.onStop,this)},h.prototype.setCount=function(t){this.lbl_count.string="x"+t},h.prototype.onStop=function(){this.cb&&this.cb()},s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),s([a(cc.Label)],h.prototype,"lbl_count",void 0),s([a(cc.Node)],h.prototype,"nod_star",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],FlyHeartMgr:[function(t,e,o){"use strict";cc._RF.push(e,"321f9jJqDlMwpCNwEHBXT/B","FlyHeartMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("Const"),l=i("FlyCoin"),p=i("GameMgr");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t._flyIconNode=null,t}a(u,c=i("Singleton").default),u.prototype.setFlyIconParent=function(t){this._flyIconNode=t},u.prototype.flyIconByPos=function(t,e,o,n,i){var a=this;this._flyIconNode&&p.gm.pool.async_get(s.BundleName.COMMON,"prefabs/fly_icon",l.default,function(r){a._flyIconNode.addChild(r.node),r.node.setPosition(t),Math.random(),Math.random(),cc.tween(r.node).call(function(){r.setIcon(n)}).by(.5*o,{x:0,y:0},{easing:"sineOut"}).delay(.2*o).to(+o,{position:cc.v3(e.x,e.y,0)},{easing:"sineIn"}).call(function(){p.gm.pool.put(r.node),i&&i()}).start()})},u.prototype.flyIconByNode=function(t,e,o,n){this.flyIconByNode&&(t=t.convertToWorldSpaceAR(cc.v2(0,0)),t=this._flyIconNode.convertToNodeSpaceAR(t),e=e.convertToWorldSpaceAR(cc.v2(0,0)),e=this._flyIconNode.convertToNodeSpaceAR(e),this.flyIconByPos(t,e,o,{file:s.ThingType.normal,id:s.CommonPropID.heart,num:1},n))},a=u,r.default=a,cc._RF.pop()},{}],FlyHp:[function(t,e,o){"use strict";cc._RF.push(e,"398d7pzrHBM2rE0rpiS0Fi5","FlyHp");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("GameMgr"),d=i("NodePoolItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl1=null,t.lbl2=null,t.fuhao=null,t._off_sex=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.NodePoolItem),h.prototype.set_hp_node=function(t,e,o){10<=Math.abs(o)?this.lbl1.node.active=!0:this.lbl1.node.active=!1,o<0?(p.default.setNumSprite("texture/gnum/jia",this.fuhao),p.default.setNumSprite("texture/gnum/"+Math.floor(Math.abs(o)/10),this.lbl1),p.default.setNumSprite("texture/gnum/"+Math.floor(Math.abs(o)%10),this.lbl2)):(p.default.setNumSprite("texture/num/jian",this.fuhao),p.default.setNumSprite("texture/num/"+Math.floor(o/10),this.lbl1),p.default.setNumSprite("texture/num/"+Math.floor(o%10),this.lbl2)),this._off_sex=e,this.node.opacity=255,this.node.y=200+e,this.node.x=0},h.prototype.onEnable=function(){var t=this;this.node.runAction(cc.spawn(cc.fadeTo(2,0),cc.moveBy(2,0,50))),this.scheduleOnce(function(){u.gm.pool.put(t.node)},2),this.node.opacity=255,this.node.y=250+this._off_sex,this.node.x=0},h.prototype.onDisable=function(){this.node.stopAllActions(),this.unscheduleAllCallbacks()},s([a(cc.Sprite)],h.prototype,"lbl1",void 0),s([a(cc.Sprite)],h.prototype,"lbl2",void 0),s([a(cc.Sprite)],h.prototype,"fuhao",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],FlyIconCreator:[function(t,e,o){"use strict";cc._RF.push(e,"e6fd1mdZ9hCcrk8VPD3zeHM","FlyIconCreator");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=i("Const"),p=i("FlyCoin"),u=i("GameMgr"),d=(h=cc._decorator).ccclass,h=(i=h.menu,h.property);function _(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_from=null,t._flyIconNode=null,t}r(_,s=cc.Component),_.prototype.setFlyIconParent=function(t){this._flyIconNode=t},_.prototype.flyIconByNode_2=function(t,e,o,n,i,a){t=t.convertToWorldSpaceAR(cc.v2(0,0)),t=this._flyIconNode.convertToNodeSpaceAR(t),e=e.convertToWorldSpaceAR(cc.v2(0,0)),e=this._flyIconNode.convertToNodeSpaceAR(e),this.flyIconByPos_2(t,e,o,n,i,a)},_.prototype.flyIconByPos_2=function(t,e,o,n,i,a){for(var r=this,c=this,s=0;s<n;s++)!function(s){c.scheduleOnce(function(){u.gm.pool.async_get(l.BundleName.COMMON,"prefabs/fly_icon",p.default,function(c){r._flyIconNode.addChild(c.node),c.node.setPosition(t),c.node.scale=1.5;var l=t.x+100*Math.random();c.setIcon(i),cc.tween(c.node).to(.15,{x:l+2,y:t.y+30}).to(.15,{x:l+5,y:t.y+0}).to(.15,{x:l+10,y:t.y+15}).to(.15,{x:l+13,y:t.y+0}).delay(.15).to(+o,{position:cc.v3(e.x,e.y,0),scale:1},{easing:"sineIn"}).call(function(){u.gm.pool.put(c.node),s==n-1&&a&&a()}).start()})},.05*s)}(s)},c([h(cc.Node)],_.prototype,"nod_from",void 0),i=c([d,i("\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7ec4\u4ef6/FlyIconCreator")],_),a.default=i,cc._RF.pop()},{}],FoodAwardItem:[function(t,e,o){"use strict";cc._RF.push(e,"432289vDcZENJunId6tMcRG","FoodAwardItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Bridge"),u=i("CommonItem_4"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("ListItem"),y=i("EventManager");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_front=null,t.nod_back=null,t.nod_back_ad=null,t.item=null,t.canTouch=!0,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.touch,this)},m.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.touch,this),y.default.off(h.GameEvent.adDone,this.onAdEnd,this)},m.prototype.setData=function(t){this.data=t,this.canTouch=!0,this.updateUI()},m.prototype.updateUI=function(){this.data.isOpen||(this.nod_back.scale=1,this.nod_front.scaleX=0,this.nod_back_ad.active=!1,this.data.isVideo&&(this.nod_back_ad.active=!0)),this.item.setIconByPropID(this.data.item.id),this.item.setName(f.default.getConfigByPropID(this.data.item.id).name+"x"+this.data.item.num)},m.prototype.touch=function(){var t=this;if(!this.data.isOpen)return!!this.canTouch&&void(this.data.isVideo?d.default.showVideo(function(){t.open()},40000013):this.open())},m.prototype.onAdEnd=function(t){t==p.AdCodeTable.eat_food_video&&this.open()},m.prototype.open=function(){var t=this;this.data.isOpen||this.canTouch&&(this.canTouch=!1,cc.tween(this.nod_back).to(.1,{scaleX:0}).call(function(){t.nod_front.active=!0,t.nod_front.scaleX=0,cc.tween(t.nod_front).to(.1,{scaleX:1.1,scaleY:1}).call(function(){t.data.isOpen=!0,_.gm.ui.get_module(_.gm.const.FoodAwardUI).updateBtn()}).to(.15,{scaleX:.95,scaleY:1.02}).to(.17,{scaleX:1.05,scaleY:1}).to(.17,{scaleX:1,scaleY:1}).start()}).start())},s([a(cc.Node)],m.prototype,"nod_front",void 0),s([a(cc.Node)],m.prototype,"nod_back",void 0),s([a(cc.Node)],m.prototype,"nod_back_ad",void 0),s([a(u.default)],m.prototype,"item",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],FoodAwardUI:[function(t,e,o){"use strict";cc._RF.push(e,"710ednt8gVMWp8QNkmCw4fY","FoodAwardUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.FoodAwardItemData=void 0;var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("GameMgr"),h=i("PropMgr"),_=i("List"),f=i("GameModule"),g=i("FoodAwardItem"),y=i("MathUtils"),m=i("ConfigUtils"),v=i("GetAwardUI"),b=i("AniUtils"),I=i("Formula");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_cook_value=null,t.lbl_coin=null,t.list=null,t.lbl_confirm=null,t.nod_double=null,t.nod_video=null,t.isBack=!0,t.normalAwards=[],t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=f.default),D.prototype.setData=function(t){var e=this;this.data=t,this.nod_double.active=!1,I.Formula.main_house_food_double_rate()&&(h.default.setItemsRate(this.data.award,2),h.default.setItemsRate([this.data.cookValue],2),h.default.setItemsRate([this.data.coin],2),this.double(),this.nod_double.active=!0),this.isBack=!0,this.normalAwards=[];for(var o=0,n=this.data.award;o<n.length;o++){var i=n[o],a=new C;a.isOpen=!1,a.isVideo=!1,a.item=i,this.normalAwards.push(a)}this.nod_video.active=!0,this.updateUI(),p.default.award(),this.onBtnConfirm(),b.default.playAni(this.getComponent(cc.Animation),"food_award_ui_top_01",function(){b.default.playAni(e.getComponent(cc.Animation),"food_award_ui_top_02",function(){})})},D.prototype.updateUI=function(){this.lbl_coin.string="X"+this.data.coin.num,this.lbl_cook_value.string="X"+this.data.cookValue.num,this.list.numItems=this.normalAwards.length,this.updateBtn()},D.prototype.updateBtn=function(){this.isBack=!1,this.lbl_confirm.string="\u786e\u8ba4";for(var t=0,e=this.normalAwards;t<e.length;t++){var o=e[t];o.isVideo||o.isOpen||(this.isBack=!0,this.lbl_confirm.string="\u5168\u90e8\u6253\u5f00")}},D.prototype.onRenderList=function(t,e){t.getComponent(g.default).setData(this.normalAwards[e])},D.prototype.onBtnConfirm=function(){if(this.isBack){this.isBack=!1;for(var t=0,e=this.list.getComponent(cc.ScrollView).content.children;t<e.length;t++){var o=e[t].getComponent(g.default);o.data.isVideo||o.data.isOpen||!o.canTouch||o.open()}}else{var n,i=this.getNormalOpenItems();h.default.addGainThing(i,!1),h.default.addGainThing([this.data.cookValue],!1),h.default.addGainThing([this.data.coin],!1),u.default.fly(this.node,i),u.default.fly(this.node,[this.data.coin,this.data.cookValue]),this.closeMe(),y.default.weightBingo(1e3*d.gm.config.data.Setting[0].InitialSpecialRate,1e3)&&(n=m.PropRandomPool.getItemsByPoolID(d.gm.config.data.Setting[0].InitialSpecialPool,1),d.gm.ui.showModule(d.gm.const.SurpriseUI,function(t){t.setData(n,v.GetAwardType.button)}))}},D.prototype.onBtnDouble=function(){var t=this;u.default.showVideo(function(){var e=t.getNormalOpenItems();h.default.setItemsRate(e,2),h.default.setItemsRate([t.data.cookValue],2),h.default.setItemsRate([t.data.coin],2),t.updateUI(),t.nod_video.active=!1},40000013)},D.prototype.double=function(){h.default.setItemsRate(this.data.award,2),h.default.setItemsRate([this.data.cookValue],2),h.default.setItemsRate([this.data.coin],2)},D.prototype.getNormalOpenItems=function(){for(var t=[],e=0,o=this.normalAwards;e<o.length;e++){var n=o[e];n.isOpen&&t.push(n.item)}return t},s([a(cc.Label)],D.prototype,"lbl_cook_value",void 0),s([a(cc.Label)],D.prototype,"lbl_coin",void 0),s([a(_.default)],D.prototype,"list",void 0),s([a(cc.Label)],D.prototype,"lbl_confirm",void 0),s([a(cc.Node)],D.prototype,"nod_double",void 0),s([a(cc.Node)],D.prototype,"nod_video",void 0),i=s([i],D),r.default=i;var C=function(){this.isOpen=!1,this.isVideo=!1,this.item=null};r.FoodAwardItemData=C,cc._RF.pop()},{}],FoodBubble:[function(t,e,o){"use strict";cc._RF.push(e,"ed3846zXRpK44egb+nYFc6i","FoodBubble");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("IconUtils");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.progress=null,t.spr_icon=null,t.nod_food=null,t.foods=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=cc.Component),d.prototype.onLoad=function(){},d.prototype.show=function(t){this.nod_food.active=t=void 0===t||t},d.prototype._setIconByMenuID=function(t){u.IconUtils.setMenuIcon(t,this.spr_icon)},d.prototype.setFoodIds=function(t){var e;this.foods=[],(e=this.foods).push.apply(e,t)},d.prototype.setFoodIcon=function(t){this._setIconByMenuID(p.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(t))},d.prototype.setProgress=function(t){this.progress.progress=t},d.prototype.playProgress=function(t){this.progress.progress=1,cc.tween(this.progress).to(t,{progress:0}).start()},d.prototype.play=function(t){var e=this,o=this.foods.shift();o?(this.setFoodIcon(o.id),this.progress.progress=1,cc.tween(this.progress).to(2,{progress:0}).call(function(){e.play(t)}).start()):t&&t()},s([a(cc.ProgressBar)],d.prototype,"progress",void 0),s([a(cc.Sprite)],d.prototype,"spr_icon",void 0),s([a(cc.Node)],d.prototype,"nod_food",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],FoodFactory:[function(t,e,o){"use strict";cc._RF.push(e,"9ef36HzPCBB7omrU6HzEY7O","FoodFactory");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("BuildInsideUnlockUtils"),h=i("Const"),_=i("GameMgr"),f=i("JumpMgr"),g=i("PropMgr"),y=i("IconUtils"),m=i("EventManager"),v=i("NodeUtils"),b=i("TMXUtils"),I=i("Finger"),D=i("HouseKeeperMgr"),C=i("MainRoleMgr"),O=i("ObjectMgrHelper"),w=i("MapObject");function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_slots=[],t.spine=[],t.nod_stands=[],t.nod_fingers=[],t.nod_house=null,t.mapObject=null,t.objectData=null,t.canHarvest=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(M,l=cc.Component),M.prototype.onLoad=function(){this.mapObject=this.getComponent(w.default),this.objectData=this.mapObject.data;for(var t=0;t<this.objectData.slots.length;t++){this.nod_slots[t].name=t+"";var e,o=this.nod_slots[t].getChildByName("spr_icon").getComponent(cc.Sprite);o.node.name="icon_"+t,o.node.on(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),o.node.active=!1,this.objectData.slots[t].checkHasProduce()&&(e=this.objectData.slots[t].getCurProduce().getHarvests())&&0<e.length&&(o.node.active=!0,y.IconUtils.setPropSprite(e[0].id,o)),(o=this.nod_slots[t].getChildByName("nod_touch"))&&(o.name="touch_"+t,o.on(cc.Node.EventType.TOUCH_END,this.onTouchSlot,this)),(o=this.nod_slots[t].getChildByName("spine"))&&o.getComponent(sp.Skeleton)&&(this.spine[t]=o.getComponent(sp.Skeleton))}},M.prototype.onEnable=function(){m.default.on(h.GameEvent.update_slot_ui,this.updateUI,this),this.nod_house&&this.nod_house.on(cc.Node.EventType.TOUCH_END,this.onTouchHouse,this),this.updateUI()},M.prototype.onDisable=function(){m.default.off(h.GameEvent.update_slot_ui,this.updateUI,this),this.nod_house&&this.nod_house.off(cc.Node.EventType.TOUCH_END,this.onTouchHouse,this)},M.prototype.updateUI=function(){var t=this.getComponent(w.default);if(t)for(var e=0;e<t.data.slots.length;e++){var o,n=t.data.slots[e];this.nod_slots[e]&&(v.default.setGrayByColor(this.nod_slots[e],n.isLock),this.spine[e]&&this.spine[e].node&&v.default.setGrayByColor(this.spine[e].node,n.isLock),(n=this.nod_slots[e].getChildByName("icon_"+e).getComponent(cc.Sprite)).node.active=!1,t.data.slots[e].checkHasProduce()&&(o=t.data.slots[e].getCurProduce().getHarvests())&&0<o.length&&(n.node.active=!0,y.IconUtils.setPropSprite(o[0].id,n)))}},M.prototype.start=function(){},M.prototype.onTouchIcon=function(t){t.stopPropagation();var e=t.target,o=Number(e.name.split("_")[1]);(t=this.getSlotData(o)).checkHasProduce()&&t.getCurProduce().canHarvest()&&0<(o=this.mapObject.data.harvest(o)).length&&(o=g.default.propItemToGainThing(o),u.default.fly(e,o),this.updateUI())},M.prototype.onTouchSlot=function(t){var e,o,n,i,a,r,c,s=this;_.gm.mainUI.canTouchDistrict(t.getLocation())?this.objectData.isLock()||(t.stopPropagation(),e=t.target,o=Number(e.name.split("_")[1]),n=this.getSlotData(o),this.flyToStandPos(o),n.isLock?this.objectData.getFirstLockSlot().index==n.index?(a=d.default.getBuildInsideLockConfig((i=this).objectData.objectID,n.index),_.gm.ui.showModule(_.gm.const.UnlockUI,function(t){t.setNeedProp(a.need_prop),t.setDesc(""),t.setTitle(s.objectData.getConfig().name),t.setIconByStr(a.icon),t.callback=function(){i.objectData.unlockSlot(n.index),_.gm.ui.showTopBlock(),p.default.unlock(),C.default.getInstance().playAniByType(h.EnumRoleAniType.make,1,function(){_.gm.ui.showTopBlock(!1),C.default.getInstance().setStandByAni(),s.updateUI(),m.default.emit(h.GameEvent.update_slot_ui)})}})):_.gm.ui.showNotice("\u8bf7\u5148\u89e3\u9501\u524d\u9762\u4f4d\u7f6e"):n.checkHasProduce()?n.getCurProduce().canHarvest()?0<(r=this.objectData.harvest(n.index)).length&&(r=g.default.propItemToGainThing(r),u.default.fly(e,r),this.updateUI(),this.openUI(o),f.default.getInstance().jumpToPos(e,cc.v2(0,-e.height/2)),D.default.getInstance().onHarvest()):(c=this.nod_slots[o].getChildByName("touch_"+o).convertToWorldSpaceAR(cc.v2(0,0)),_.gm.ui.showModule(_.gm.const.LandTip,function(t){t.updatePos(c),t.setData(n.getCurProduce()),t.setNewData(s.objectData,n.index)})):(f.default.getInstance().jumpToPos(e,cc.v2(0,-e.height/2)),this.openUI(o))):t.stopPropagation()},M.prototype.getSlotData=function(t){return this.mapObject.data.slots[t]},M.prototype.openUI=function(t){var e=this;void 0===t&&(t=-1),_.gm.ui.showModule(_.gm.const.CommonFactory,function(o){o.setData(e.objectData,t)})},M.prototype.setAni=function(t,e,o){void 0===o&&(o=!0),this.spine[t]&&this.spine[t].animation!=e&&(this.spine[t].setAnimation(0,e,o),cc.log("set ani",e,this.spine[t].animation),m.default.emit(h.GameEvent.update_slot_ui))},M.prototype.updateSpine=function(t){this.spine[t]&&(this.getSlotData(t).getCurProduce().canHarvest()?(this.spine[t].timeScale=1,this.setAni(t,"off1")):this.setAni(t,"on2",!0))},M.prototype.update=function(){for(var t=0;t<3;t++){var e=this.getSlotData(t);e&&e.checkHasProduce()&&this.mapObject.mode==h.MapObjectMode.normal&&(this.mapObject.mode==h.MapObjectMode.normal&&this.updateSpine(t),e.getCurProduce().canHarvest()?0==this.canHarvest&&(this.canHarvest=!0,m.default.emit(h.GameEvent.update_slot_ui)):this.canHarvest=!1)}},M.prototype.getNodeIndex=function(t){return Number(t.name.split("_")[1])},M.prototype.flyToStandPos=function(t){this.nod_stands[t]&&(t=this.nod_stands[t].convertToWorldSpaceAR(cc.v2(0,0)),t=_.gm.mainUI.tileMap_bg.node.convertToNodeSpaceAR(t),t=b.default.touchToTile(t,_.gm.mapData.mapSize,_.gm.const.GridSize),C.default.getInstance().setBackScale(!1,1),C.default.getInstance().flyTo(t),_.gm.mapData.resetCurTouchObject(),C.default.getInstance().setStandByAni())},M.prototype.getFinger=function(t){return this.nod_fingers[t=void 0===t?0:t]},M.prototype.onTouchHouse=function(t){var e,o=this;!this.mapObject.data.isLock()&&_.gm.mainUI.canTouchDistrict(t.getLocation())&&(t.stopPropagation(),e=O.default.getInstance().getConfigByObjectData(this.mapObject.data),_.gm.ui.showModule(_.gm.const.ObjectMgrUI,function(t){t.setData(o.mapObject,e)}))},s([a({type:[cc.Node]})],M.prototype,"nod_slots",void 0),s([a({type:[sp.Skeleton]})],M.prototype,"spine",void 0),s([a({type:[cc.Node]})],M.prototype,"nod_stands",void 0),s([a({type:[I.default]})],M.prototype,"nod_fingers",void 0),s([a(cc.Node)],M.prototype,"nod_house",void 0),i=s([i],M),r.default=i,cc._RF.pop()},{}],FoodOrderMgr:[function(t,e,o){"use strict";cc._RF.push(e,"442dbyK5odDOKwnwLf55hPS","FoodOrderMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.FoodOrder=a.FoodOrderState=void 0;var c,s,l=i("CommonData"),p=i("ConfigUtils"),u=i("Const"),d=i("Formula"),h=i("GameMgr"),_=i("LvMgr"),f=i("MapDataHelper"),g=i("PropMgr"),y=i("Singleton"),m=i("EventManager"),v=i("MathUtils"),b=i("ObjectUtils"),I=i("TimeUtils"),D=i("NetUtils"),C=i("MainRoleMgr"),O=i("Object_10604"),w=i("NpcAni"),M=i("NpcMgr"),P=i("VillagerHelper"),S=i("TaskRecordData"),T=i("CookMgr"),j=(r(k,s=y.default),k.prototype.init=function(){for(var t=0,e=h.gm.config.data.VillagerData;t<e.length;t++){var o=e[t];this.npc_configs_pool[o.npc_id]=o}},k.prototype.loadData=function(){this.checkNewOrder()},k.prototype.getCurOrders=function(){return l.default.getInstance().food_orders},k.prototype.getOrderByTableUID=function(t){return this.getCurOrders()[t]},k.prototype.checkNewOrder=function(){var t=f.default.getDataByID(u.SpecialObjectID.light_plate);if(t&&!t.isLock()){for(var e=this.getFreeDesk();e;){var o=new A;o&&((this.getCurOrders()[e.getUID()]=o).beginTime=I.default.getTime(),o.setTableUID(e.getUID()),o.onNewOrder(),l.default.getInstance().addFoodOrderTime(e.getUID()),e=this.getFreeDesk())}m.default.emit(u.GameEvent.updateFoodUI)}},k.prototype.addNewOrderByDesk=function(t){var e=this.getCurOrders()[t.getUID()];e&&this.deleteOrder(e),(e=new A)&&((this.getCurOrders()[t.getUID()]=e).beginTime=I.default.getTime(),e.setTableUID(t.getUID()),e.onNewOrder(),m.default.emit(u.GameEvent.updateFoodUI))},k.prototype.getFreeDesk=function(){var t,e=h.gm.mapData.getAllObjectDatas();for(t in e){var o=e[t];if(o.objectID==u.SpecialObjectID.food_table&&!o.isLock()&&d.Formula.getFoodOrderLimit(o)>l.default.getInstance().getFoodOrderTimes(o.getUID())&&!this.getWorkTableUID().includes(o.getUID()))return o}return null},k.prototype.getWorkTableUID=function(){var t,e=[];for(t in this.getCurOrders()){var o=this.getCurOrders()[t].getTableUID();o&&e.push(o)}return e},k.prototype.serve=function(t){var e=this;cc.log("\u5f00\u59cb\u4e0a\u83dc",t);var o=t.getNpc(),n=h.gm.mapData.getObjectData(t.tableUID);n?(t.put_food_time=I.default.getTime(),t.save(),D.ReportData.instance.report_point(100005,41000010),n.loadObject(function(n){var i=n.getComponent(O.default);if(i){i.setOrderData(t);var a=0,r=!1;h.gm.ui.showTopBlock(!0,0),C.default.getInstance().putFood(i.getPutFoodGrid(),function(){h.gm.ui.showTopBlock(!1),C.default.getInstance().setStandByAni(),t.changeState(c.put_food),i.setOrderData(t),r=!0,a==o.length&&r&&e.setEating(t),setTimeout(function(){t&&t.state>=c.put_food&&t.state<=c.eating&&(cc.warn("\u89e6\u53d1\u5403\u996d\u8ba2\u5355\u8d85\u65f6\u4fdd\u62a4"),t.changeState(c.eating_end))},2e3*(t.foods.length+1))});for(var s=0;s<o.length;s++)!function(n){var c=o[n];setTimeout(function(){M.default.getInstance().moveToEatPoint(c,function(c){c.sitDownOnFoodChair(i,n,function(){++a==o.length&&r&&e.setEating(t)})})},0)}(s)}})):cc.error("cannot get table")},k.prototype.setEating=function(t){for(var e=t.getNpc(),o=0;o<e.length;o++)!function(){var n=e[o];t.changeState(c.eating),M.default.getInstance().tryToGetView(n,function(e){e.foodBubble.play(function(){t.changeState(c.eating_end),M.default.getInstance().moveOnEatingEnd(n)}),e.getComponent(w.default).playAniByType(u.EnumRoleAniType.sitdown_eat,100)})}()},k.prototype.setOrderAward=function(t){S.default.getInstance().addFoodOrderCount();var e=t.getTableUID();t.awardTime=I.default.getTime(),t.changeState(c.award);for(var o=t.getNpc(),n=0,i=o;n<i.length;n++){var a=i[n];M.default.getInstance().setFoodData(a,t)}if(e){if(h.gm.mapData.mapObject[e]&&(e=h.gm.mapData.mapObject[e].getComponent(O.default))){e.npcLeave();for(var r=0;r<o.length;r++){var s=o[r];M.default.getInstance().tryToGetView(s,function(t){t.node.active=!0})}}m.default.emit(u.GameEvent.updateFoodUI)}else cc.error("not uid",t)},k.prototype.resetOrder=function(t){this.deleteOrder(t),this.checkNewOrder(),m.default.emit(u.GameEvent.updateFoodUI)},k.prototype.deleteOrder=function(t){for(var e=0,o=t.npc_id;e<o.length;e++){var n=o[e];b.default.moveTo(this.cur_configs,this.npc_configs_pool,n)}delete this.getCurOrders()[t.getTableUID()],l.default.getInstance().save()},k.prototype.getAwardByLike=function(){return p.PropRandomPool.getItemsByPoolID(h.gm.config.data.Setting[0].InitialSatisfactionPool)[0]},k.prototype.getOrderCD=function(){return this.order_cd_dirty&&(this._orderCD=d.Formula.main_house_food_order_time(),this.order_cd_dirty=!1),this._orderCD},k);function k(){var t=null!==s&&s.apply(this,arguments)||this;return t.npc_configs_pool={},t.cur_configs={},t._orderCD=0,t.order_cd_dirty=!0,t}a.default=j,(r=c=a.FoodOrderState||(a.FoodOrderState={}))[r.not_done=0]="not_done",r[r.put_food=1]="put_food",r[r.eating=2]="eating",r[r.eating_end=3]="eating_end",r[r.award=4]="award";var A=(R.prototype.onLoadEnd=function(){if(this.state>=c.put_food&&this.state<=c.eating&&(this.state=c.eating_end),this.state!=c.award)for(var t=0,e=this.npc_id;t<e.length;t++){var o=e[t];M.default.getInstance().foodRandomCommand(o),M.default.getInstance().setFoodData(o,this)}for(var n=0,i=this.npc_id;n<i.length;n++)o=i[n],b.default.moveTo(j.getInstance().npc_configs_pool,j.getInstance().cur_configs,o);this.save()},R.prototype.changeState=function(t,e){(e=void 0!==e&&e)?this.state=t:this.state<t&&(this.state=t,m.default.emit(u.GameEvent.changeFoodOrderState,this.state)),this.save()},R.prototype.setTableUID=function(t){this.tableUID=t},R.prototype.getTableUID=function(){return this.tableUID},R.prototype.getFoods=function(){if(0==this.foods.length)for(var t=0,e=this.getNpc();t<e.length;t++){var o=e[t],n=P.default.getConfigs(o).rewards_prop;(o=this.foods).push.apply(o,n)}return this.foods},R.prototype.getAward=function(){for(var t=this.getFoods(),e=p.PropRandomPool.getItemsByPoolID(300001,t.length),o=d.Formula.calEatLike(this.put_food_time,this.beginTime),n=0,i=0,a=t;i<a.length;i++){var r=a[i],c=p.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(r.id),s=(c=(s=T.default.getInstance().getMenuData(c)).getCurStarLvConfig().star_xishu,s.menuConfig.menu_coin);n+=d.Formula.calEatFoodCoin(s,c)*r.num}return n=Math.round(n),t={file:u.ThingType.normal,id:u.CommonPropID.coin,num:n},{award:e,cookValue:{file:u.ThingType.normal,id:u.CommonPropID.cook_like,num:o},coin:t}},R.prototype.getMergeItems=function(){var t=this.getFoods();return g.default.mergeItems(t)},R.prototype.setFoods=function(t){this.foods=t},R.prototype.getNpc=function(){if(0==this.npc_id.length){var t,e,o=[],n=_.default.getInstance().getLv();for(t in j.getInstance().npc_configs_pool)p.NPCDataUtils.getConfigByID(Number(t)).unlock_level<=n&&o.push(Number(t));e=7<=n&&n<9?v.default.randomNum(1,2):9<=n&&n<10?v.default.randomNum(1,3):v.default.randomNum(1,4),this.npc_id=v.default.randomArr(o,e);for(var i=0,a=this.npc_id;i<a.length;i++){var r=a[i];b.default.moveTo(j.getInstance().npc_configs_pool,j.getInstance().cur_configs,r)}}return this.npc_id},R.prototype.save=function(){l.default.getInstance().save()},R.prototype.onNewOrder=function(){var t=this.getNpc();this.getFoods(),this.save();for(var e=0,o=t;e<o.length;e++){var n=o[e];M.default.getInstance().setFoodData(n,this),M.default.getInstance().moveOnNewFoodOrder(n)}},R);function R(){this.foods=[],this.state=c.not_done,this.awardTime=0,this.tableUID="",this.beginTime=0,this.put_food_time=0,this.npc_id=[]}a.FoodOrder=A,cc._RF.pop()},{}],FoodOrderNew:[function(t,e,o){"use strict";cc._RF.push(e,"29628mxVDdFiq8O9kVpfzwN","FoodOrderNew");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("FoodOrderMgr");i.default=function(){this.state=a.FoodOrderState.not_done},cc._RF.pop()},{}],FoodTargetItem:[function(t,e,o){"use strict";cc._RF.push(e,"93cebrNChJBJZjnzPmIDxtQ","FoodTargetItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("CommonUtils"),d=i("ConfigUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("CookMgr");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_check=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=cc.Component),y.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},y.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},y.prototype.setData=function(t){this.data=t,this.updateUI()},y.prototype.updateUI=function(){this.getComponent(p.default).setIconByMenuID(d.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(this.data.id));var t=f.default.getPropCount(this.data.id);this.getComponent(p.default).setRichByNum(t,this.data.num)},y.prototype.onTouch=function(){var t,e,o=this;u.default.isInMainScene()?(t=d.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(this.data.id),(e=g.default.getInstance().getMenuData(t)).getState()==h.MenuState.learned?_.gm.ui.showModule(_.gm.const.CookUI,function(t){var e=g.MenuData.create(d.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(o.data.id));t.setData(e)}):_.gm.ui.showModule(_.gm.const.CookStudy,function(t){t.setData(e)})):_.gm.ui.showNotice("\u8bf7\u56de\u5230\u5bb6\u64cd\u4f5c")},s([a(cc.Node)],y.prototype,"nod_check",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],FootPos:[function(t,e,o){"use strict";cc._RF.push(e,"30056POf9pJeoDKFAN2r0bP","FootPos");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=(p=cc._decorator).ccclass,p=(i=p.property,p.menu);function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_foot=null,t}r(u,s=cc.Component),u.prototype.start=function(){},u.prototype.getFootPos=function(){return this.nod_foot.convertToWorldSpaceAR(cc.v2(0,0))},c([i(cc.Node)],u.prototype,"nod_foot",void 0),p=c([l,p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/FootPos")],u),a.default=p,cc._RF.pop()},{}],Formula:[function(t,e,o){"use strict";cc._RF.push(e,"fa1dei89qlAZpvjZegqmqmx","Formula");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.FormulaBase=i.Formula=void 0;var a=n("EventManager"),r=n("MathUtils"),c=n("AttrHelper"),s=n("CompletionHelper"),l=n("CookMgr"),p=n("DecorationMgr"),u=n("HeartMgr"),d=n("ObjectMgrHelper"),h=n("StaffData"),_=n("StaffHelper"),f=n("StaffViewMgr"),g=n("CommonData"),y=n("ConfigUtils"),m=n("Const"),v=n("GameMgr"),b=n("LvMgr"),I=n("MapDataHelper"),D=n("PropMgr"),C=(O.getObjectFuncWork=function(t,e,o){void 0===o&&(o=!1);var n=0;if(t.isLock())return n;var i=p.default.getConfig(t.objectID,t.lv);if(i&&i.attr)for(var a=0,r=i.attr;a<r.length;a++){var s=r[a];s.attr_type==e&&(n+=c.default.getInstance().getAttrNum(s))}return o&&(n+=w.getObjectStaffFuncWork(t,e)),n},O.calCookExp=function(t,e,o){return o=t*(1+e+o+w.getAllObjectFuncWork(m.E_AttrType.add_food_exp)+this._calFunCookAddition()),Math.round(o)},O._calFunCookAddition=function(){return d.default.getInstance().getRangeValue(1)/100},O.calCookCoin=function(t,e){return e=t*(1+e),Math.round(e)},O.calEatFoodCoin=function(t,e){return t*=1+e,e=w.getAllObjectFuncWork(m.E_AttrType.food_coin),Math.round(t*(1+e))},O.calEatLike=function(t,e){return e=((t-=e)<=60?r.default.randomNum(9,10):t<=120?r.default.randomNum(7,8):r.default.randomNum(0,6))+l.default.getInstance().getCookTitleConfig().title_addition,t=w.getAllObjectFuncWork(m.E_AttrType.food_satisfaction),Math.round(e*(1+t))},O.getCountByGainthing=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=m.ToolClass.liandao);for(var n=[],i=0,a=t;i<a.length;i++){var r,c=a[i],s=c.num||0;c.num_count_class&&(1==c.num_count_class?s=b.default.getInstance().getConfigByExp().video_coin.num*c.num:2==c.num_count_class?s=this.adHeartCount()*c.num:3==c.num_count_class&&c.id==m.CommonPropID.coin||4==c.num_count_class&&c.id==m.CommonPropID.heart?s=1<=(r=(v.gm.localData.tools[o].repair_time||0)+1)&&r<=10?300*r:11<=r&&r<=20?500*r:1e4:5==c.num_count_class&&(s=b.default.getInstance().getLv()*c.num)),s={file:c.file,id:c.id,num:Math.round(s*e)},n.push(s)}return n},O.adHeartCount=function(){return u.default.getInstance().getProduce()*v.gm.config.data.Setting[0].InitialVideoHeart},O.shelfPayCount=function(t){return t*(1+w.getAllObjectFuncWork(m.E_AttrType.shelf_add_coin,!0))},O._calFuncShelfCoinAddition=function(){return d.default.getInstance().getRangeValue(2)/100},O.getBBQTime=function(t,e){return e=t*(1-((e=w.getStaffFuncWork(e,m.E_AttrType.bbq_efficiency))+w.getAllObjectFuncWork(m.E_AttrType.bbq_efficiency))),Math.max(e,2)},O.getBBQLike=function(t){var e=w.getAllObjectFuncWork(m.E_AttrType.bbq_man_yi_du,!0);return Math.floor(t*(1+e))},O.getBBQCoin=function(t){var e=w.getAllObjectFuncWork(m.E_AttrType.bbq_coin_add,!0);return Math.floor(t*(1+e))},O.getBBQStar=function(t){var e=w.getAllObjectFuncWork(m.E_AttrType.bba_star_addition,!0);return Math.floor(t*(1+e+this._calFunBBQStarAddition()))},O._calFunBBQStarAddition=function(){return d.default.getInstance().getRangeValue(3)/100},O.farmConsumeTime=function(t){return t*=1-w.getAllObjectFuncWork(m.E_AttrType.reduce_time),t=Math.ceil(t),Math.max(t,1)},O.stallWarehouseAdd=function(t){return this.getObjectFuncWork(t,m.E_AttrType.add_shelf_max)},O.bbq_ice_box_max=function(){return w.getAllObjectFuncWork(m.E_AttrType.bbq_ice_box_add)},O.main_house_food_order_time=function(){return w.getAllObjectFuncWork(m.E_AttrType.main_house_food_order_period)||1},O.main_house_food_double_rate=function(){var t=w.getAllObjectFuncWork(m.E_AttrType.main_house_food_reward_double_rate);return r.default.weightBingo(100*t,100)},O.getTruckValue=function(t){var e=w.getAllObjectFuncWork(m.E_AttrType.truck_coin_addition);return Math.floor(t*(1+e))},O.getShelfCDTime=function(t){return t=this.getObjectFuncWork(t,m.E_AttrType.reduce_npc_cd),r.default.randomNum(15,30)*(1-t)},O.getBBQNpcCDTime=function(t){var e=this.getObjectFuncWork(t,m.E_AttrType.reduce_npc_cd);return t=r.default.randomNum(20,40),t*=1-e,Math.max(t,5)},O.getStaffCashierTime=function(t,e){return t=e*(1-this.getObjectFuncWork(t,m.E_AttrType.serve_efficiency,!0)),Math.max(t,.5)},O.getBBQWaiterSpeed=function(t,e){return e*(1+w.getStaffFuncWork(t,m.E_AttrType.bbq_serve_efficiency))},O.getFoodOrderLimit=function(t){return O.getObjectFuncWork(t,m.E_AttrType.food_order_limit)},O.getHeartAddition=function(){for(var t=0,e=0,o=v.gm.config.data.DecorationCompletion;e<o.length;e++){var n=o[e];n=s.default.getInstance().getHeartObjectCompletion(n.object_id,n.range),t+=Math.floor(n/25)}return t/100},O.factoryPeriodTime=function(t,e){var o=d.default.getInstance().getConfigByObjectData(e),n=0;return t*=1-(n=o&&20206==o.attr.attr_type?d.default.getInstance().getValueByConfig(o)/100:n)-w.getObjectStaffFuncWork(e,m.E_AttrType.staff_factory_eff),t=Math.max(1,t),Math.round(t)},O.getStaffPlant=function(){for(var t=0,e=[10003,10004,10005,10006];t<e.length;t++){var o=e[t],n=I.default.getDataByID(o);if(!n.isLock()){var i=y.ProduceUtils.getConfigArrByBuildID(n.getConfig().association||o,b.default.getInstance().getLv());if(0<i.length){var c=w.getObjectStaffFuncWork(n,m.E_AttrType.staff_plant_eff);if(0<c){for(var s=[],l=0,p=r.default.randomArr(i,1)[0].productions;l<p.length;l++){var u={id:p[l].id,num:c};s.push(u)}cc.log(s),i=g.default.getInstance().landAwards[o],s.push.apply(s,i),g.default.getInstance().landAwards[o]=D.default.mergeItems(s),a.default.emit(m.GameEvent.updateLandAward,o)}}}}},O.getStaffAnimal=function(){for(var t=0,e=[10025,10026,10027,10028];t<e.length;t++){var o=e[t],n=I.default.getDataByID(o);if(n){if(!n.isLock()){var i=y.ProduceUtils.getConfigArrByBuildID(n.getConfig().association||o,b.default.getInstance().getLv());if(0<i.length){var c=w.getObjectStaffFuncWork(n,m.E_AttrType.staff_animal_eff);if(0<c){for(var s=[],l=0,p=r.default.randomArr(i,1)[0].productions;l<p.length;l++){var u={id:p[l].id,num:c};s.push(u)}cc.log(s),i=g.default.getInstance().landAwards[o],s.push.apply(s,i),g.default.getInstance().landAwards[o]=D.default.mergeItems(s),a.default.emit(m.GameEvent.updateLandAward,o)}}}}else cc.error("not found data",o)}},O.getStaffCollect=function(){for(var t=0,e=[39994,39995,39996,39997,39998,39999];t<e.length;t++){var o,n,i=e[t],c=I.default.getDataByID(i);c.isLock()||0<(o=y.ConfigUtils.CollectionsUtils.getAutoCollect()).length&&0<(n=w.getObjectStaffFuncWork(c,m.E_AttrType.staff_collect_eff))&&((c=r.default.randomArr(o,1)[0]).need_prop[0]?(o=[{id:c.need_prop[0].id,num:n}],cc.log(o),n=g.default.getInstance().landAwards[i],o.push.apply(o,n),g.default.getInstance().landAwards[i]=D.default.mergeItems(o),a.default.emit(m.GameEvent.updateLandAward,i)):cc.error("not need prop",c))}},O);function O(){}i.Formula=C;var w=(M._getDataIDByAttrType=function(t){for(var e=[],o=0,n=v.gm.config.data.Decorations;o<n.length;o++){var i=n[o];if(i.attr)for(var a=0,r=i.attr;a<r.length;a++)if(r[a].attr_type==t&&!e.includes(i.id)){e.push(i.id);break}}return e},M.getAllObjectFuncWork=function(t,e){void 0===e&&(e=!1);for(var o=this._getDataIDByAttrType(t),n=0,i=0,a=I.default.getUnlockDatas(o);i<a.length;i++){var r=a[i];n+=C.getObjectFuncWork(r,t,e)}return n},M.getObjectStaffFuncWork=function(t,e){for(var o=0,n=0,i=h.default.getInstance().getStffIDByObjectData(t);n<i.length;n++){var a=i[n];o+=this.getStaffFuncWork(a,e)}return o},M.getStaffFuncWork=function(t,e){if(f.StaffViewMgr.getInstance().isStop)return 0;if(!(t=_.default.getInstance().getStaffUpgradeConfig(t,h.default.getInstance().staffs[t].lv)))return 0;for(var o=0,n=0,i=t.attr;n<i.length;n++){var a=i[n];a.attr_type==e&&(o+=c.default.getInstance().getAttrNum(a))}return o},M);function M(){}i.FormulaBase=w,cc._RF.pop()},{}],GMMod:[function(t,e,o){"use strict";cc._RF.push(e,"55117To1jBM8IhfcyBbqv16","GMMod");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameModule");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.SaveEditBox=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.default),u.prototype.OnOutPutBtnClick=function(){},u.prototype.OnLoadBtnClick=function(){},u.prototype.openLocalFile=function(){},u.prototype.readLocalFile=function(){},s([a(cc.EditBox)],u.prototype,"SaveEditBox",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],GameMgr:[function(t,e,o){(function(n){"use strict";cc._RF.push(e,"e63f2EDJchAR7I7u5VJp3Y6","GameMgr");var i=t,a=o;(function(t){function e(){null!=r.Const&&(this.const=r.Const.getInstance(),this.ui=s.default.getInstance(),this.localData=c.default.getInstance(),this.data=p.DataManager.instance,this.config=n.default.getInstance(),this.pool=o.NodePoolManager.instance,this.channel=l.ChannelManager.instance)}Object.defineProperty(a,"__esModule",{value:!0}),a.gm=a.GameMgr=void 0;var o=i("NodePoolManager"),n=i("ConfigProxy"),r=i("Const"),c=(i("Dev"),i("LocalData")),s=i("MyUIMgr"),l=i("ChannelManager"),p=i("DataManager");a.GameMgr=e,t="undefined"==typeof window?t:window,a.gm=t.gm=t.gm||new e}).call(void 0,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],GameModule:[function(t,e,o){"use strict";cc._RF.push(e,"7c14dyCok5N3p3+wjWkup5Z","GameModule");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("AudioUtils"),p=a("GameMgr"),u=a("content-adapter"),d=a("GameObject"),h=a("DebugUtil");function _(){var t=null!==s&&s.apply(this,arguments)||this;return t._moduleConfig=null,t._nod_bgMask=null,t._tip=null,t._blockNode=null,t}a=(n=cc._decorator).ccclass,n.property,c(_,s=d.GameObject),_.prototype.onLoad=function(){this._moduleConfig||h.default.getNodeParentTree(this.node),this._moduleConfig.not_block||this.node.addComponent(cc.BlockInputEvents),this._moduleConfig.isFullScreen&&this.node.addComponent(u.default),this._moduleConfig.isBg&&(this._addBg(),this._moduleConfig.touchEmpty&&(this.addBlockNode(),this._addTip()))},_.prototype._addBg=function(){if(!this._nod_bgMask){this._nod_bgMask=new cc.Node,this.node.addChild(this._nod_bgMask),this._nod_bgMask.zIndex=cc.macro.MIN_ZINDEX,this._nod_bgMask.addComponent(cc.BlockInputEvents);for(var t=cc.view.getDesignResolutionSize().width,e=cc.view.getDesignResolutionSize().height,o=t*e*4,n=new Uint8Array(o),i=0;i<o;i+=4)n[i]=0,n[i+1]=0,n[i+2]=0,n[i+3]=100;var a=new cc.Texture2D;a.initWithData(n,cc.Texture2D.PixelFormat.RGBA8888,t,e),(e=this._nod_bgMask.addComponent(cc.Sprite)).spriteFrame=new cc.SpriteFrame,e.spriteFrame.setTexture(a),this._nod_bgMask.addComponent(u.default),this._nod_bgMask.scale=10}},_.prototype._addTip=function(){var t,e;this._tip||(this._tip=new cc.Node,t=this._tip.addComponent(cc.Widget),(e=this._tip.addComponent(cc.Label)).fontSize=26,e.string="\u70b9\u51fb\u7a7a\u767d\u5904\u5173\u95ed",(e=this._tip.addComponent(cc.LabelOutline)).color=(new cc.Color).fromHEX("#8B612F"),e.width=3,this.node.addChild(this._tip),this._tip.anchorY=0,t.isAlignBottom=!0,t.bottom=-this._tip.height-10,t.horizontalCenter=0,this._nod_bgMask.on(cc.Node.EventType.TOUCH_START,this.onTouchBgMask,this))},_.prototype.addBlockNode=function(){this._blockNode||(this._blockNode=new cc.Node,this._blockNode.addComponent(cc.BlockInputEvents),this._blockNode.anchorY=this.node.anchorY,this._blockNode.anchorX=this.node.anchorX,this._blockNode.width=this.node.width,this._blockNode.height=this.node.height,this.node.addChild(this._blockNode),this._blockNode.zIndex=cc.macro.MIN_ZINDEX)},_.prototype.updateTipPos=function(){var t;!this._tip||(t=this._tip.getComponent(cc.Widget))&&t.updateAlignment()},_.prototype.onTouchBgMask=function(){cc.log("onTouchBgMask"),this._tip.active&&this.closeMe()},_.prototype.closeMe=function(){this.node.active&&(this.callback=null,p.gm.ui.closeModule(this._moduleConfig))},_.prototype.hideCloseTip=function(){this._tip&&cc.isValid(this._tip)&&(this._tip.active=!1)},_.prototype.showCloseTip=function(){this._tip.active=!0},_.prototype.setModuleConfig=function(t){this._moduleConfig=t},_.prototype.getConfig=function(){return this._moduleConfig},_.prototype.updateUI=function(){},_.prototype.onShowActionEnd=function(){},_.prototype.hide=function(){this.node.active=!1},_.prototype.show=function(){},_.prototype.onBtnClose=function(){l.default.click(),this.closeMe()},_.prototype.setCold=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],_),r.default=a,cc._RF.pop()},{}],GameObjectManager:[function(t,e,o){"use strict";cc._RF.push(e,"31b39eYJo1LGLtE2+6nLIvB","GameObjectManager");var n=o;function i(){this._object_list={}}Object.defineProperty(n,"__esModule",{value:!0}),n.GameObjectManager=void 0,Object.defineProperty(i,"instance",{get:function(){return this._instance||(this._instance=new i),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(i,"unique_id",{get:function(){return this._unique_id++},enumerable:!1,configurable:!0}),i.prototype.add=function(t){var e,o;null!=t&&(e=cc.js.getClassName(t),(o=this._object_list[e])||(this._object_list[e]=o={map:{},count:0}),o.map[t.__unique_id],o.map[t.__unique_id]=t,o.count++)},i.prototype.remove=function(t){var e,o;null!=t&&(o=cc.js.getClassName(t),(o=(e=this._object_list[o]).map[t.__unique_id])&&(o.__destroy_time=Date.now(),delete e.map[t.__unique_id],e.count--))},i.prototype.count=function(t){return null==t?0:(t=cc.js.getClassName(t),(t=this._object_list[t])?t.count:0)},i.prototype.info=function(){var t,e=0,o="%c\n============== Game Object Info ==================";for(t in this._object_list){var n=this._object_list[t];e+=n.count,o+="\n"+t+" count is "+n.count}o+="Total count is "+e,o+="============== Game Object Info ==================",console.log(o,"font-weight:bold;")},i._instance=null,i._unique_id=0,n.GameObjectManager=i,cc._RF.pop()},{}],GameObject:[function(t,e,o){"use strict";cc._RF.push(e,"39eb2zCbgZHC4/U8jy0hMUg","GameObject");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.GameObject=void 0;var s,l=a("GameObjectManager");function p(){var t=s.call(this)||this;return t.__unique_id=l.GameObjectManager.unique_id,t.__create_time=Date.now(),l.GameObjectManager.instance.add(t),t}a=(n=cc._decorator).ccclass,n.property,c(p,s=cc.Component),p.prototype.onDestroy=function(){this.__destroy_time=Date.now(),this.__destroy_time,this.__create_time,l.GameObjectManager.instance.remove(this)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.GameObject=a,cc._RF.pop()},{}],GetAwardUINew:[function(t,e,o){"use strict";cc._RF.push(e,"5dedajm6j1D3oBuyOYvt79g","GetAwardUINew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("Const"),h=i("PropMgr"),_=i("IconUtils"),f=i("GameModule"),g=i("NetUtils"),y=i("GetAwardUI");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_title=null,t.btn_video=null,t.getAwardType=y.GetAwardType.button,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=f.default),m.prototype.onEnable=function(){p.default.award()},m.prototype.setData=function(t,e){void 0===e&&(e=y.GetAwardType.button),this.getAwardType=e,this.bigItem=t,this.updateUI()},m.prototype.updateUI=function(){var t=this;_.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"texture/strength/prop_"+this.bigItem.id+"_strength",this.spr_icon,function(){_.IconUtils.setPropSprite(t.bigItem.id,t.spr_icon)}),this.lbl_title.string=h.default.getConfigByPropID(this.bigItem.id).name+"*"+this.bigItem.num},m.prototype.onBtnGet=function(){p.default.click(),this.getAwardType==y.GetAwardType.button&&h.default.addGainThing([this.bigItem],!1),u.default.fly(this.node,[this.bigItem]),g.ReportData.instance.report_point(100005,41000016),this.closeMe()},m.prototype.onBtnDouble=function(){var t=this;p.default.click(),this.getAwardType==y.GetAwardType.button?u.default.showVideo(function(){h.default.setItemsRate([t.bigItem],3),t.setVideo(!1),t.setData(t.bigItem,t.getAwardType)},40000030):u.default.showVideo(function(){t.setVideo(!1),t.setData(t.bigItem,t.getAwardType),h.default.addGainThing([t.bigItem],!1)},40000030)},m.prototype.setVideo=function(t){this.btn_video.node.active=t=void 0===t||t},s([a(cc.Sprite)],m.prototype,"spr_icon",void 0),s([a(cc.Label)],m.prototype,"lbl_title",void 0),s([a(cc.Button)],m.prototype,"btn_video",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],GetAwardUI:[function(t,e,o){"use strict";cc._RF.push(e,"57840mSqtlOtY1OGV+yzHcc","GetAwardUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.GetAwardType=void 0;var l,p,u,d=i("AudioUtils"),h=i("AwardItem"),_=i("CommonUtils"),f=i("Const"),g=i("GameMgr"),y=i("PropMgr"),m=i("GameModule"),v=i("Vec2Utils");function b(){var t=null!==p&&p.apply(this,arguments)||this;return t.nod_content=null,t.nod_tip=null,t.btn_video=null,t.nod_basket=null,t.nod_touch=null,t.nod_get=null,t.bigItems=[],t.callback=null,t.getAwardType=l.button,t.tmpItem=null,t.loading=!1,t.flyEndCb=null,t}(a=l=r.GetAwardType||(r.GetAwardType={}))[a.button=0]="button",a[a.open=1]="open",a=(i=cc._decorator).ccclass,i=i.property,c(b,p=m.default),(u=b).prototype.onEnable=function(){d.default.award()},b.prototype.setData=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=l.button),this.getAwardType=e,this.bigItems=t,this.updateUI()},b.prototype.updateUI=function(){var t=this;this.tmpItem?this.onLoadEnd():this.loading||(this.loading=!0,g.gm.ui.createPrefab(f.Contents.AwardItem,function(e){t.tmpItem=cc.instantiate(e),t.onLoadEnd()}))},b.prototype.onLoadEnd=function(){for(var t=this,e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;var n=this.bigItems.length;n=140*(n=Math.min(n,3))+(n-1)*this.nod_content.getComponent(cc.Layout).spacingX,this.nod_content.width=n,this.scheduleOnce(function(){for(var e=0;e<t.bigItems.length;e++)!function(e){var o=null;t.nod_content.children[e]?(o=t.nod_content.children[e]).active=!0:(o=cc.instantiate(t.tmpItem),t.nod_content.addChild(o),o.active=!0),o.opacity=0,o.getComponent(h.default).setData(t.bigItems[e]),cc.tween(o).delay(.1*e).call(function(){t.fly(o,e,function(){t.flyEnd(e)})}).start()}(e)})},b.prototype.flyEnd=function(t){t==this.bigItems.length-1&&this.flyEndCb&&(this.flyEndCb(),this.flyEndCb=null)},b.prototype.onBtnGet=function(){d.default.click(),this.getAwardType==l.button&&y.default.addGainThing(this.bigItems,!1),this.callback?this.callback():this.closeMe()},b.prototype.onBtnDouble=function(){var t=this;d.default.click(),this.getAwardType==l.button?_.default.showVideo(function(){for(var e=[],o=0,n=t.bigItems;o<n.length;o++){var i={file:(i=n[o]).file,id:i.id,num:2*i.num};e.push(i)}t.setVideo(!1),t.setData(e,t.getAwardType)},u.videoPoint):_.default.showVideo(function(){for(var e=[],o=0,n=t.bigItems;o<n.length;o++){var i={file:(i=n[o]).file,id:i.id,num:2*i.num};e.push(i)}y.default.addGainThing(t.bigItems,!1),t.setVideo(!1),t.setData(e,t.getAwardType)},u.videoPoint)},b.prototype.setVideo=function(t){this.btn_video.node.active=t=void 0===t||t},b.prototype.fly=function(t,e,o){var n=cc.instantiate(t);n.opacity=255,n.parent=this.nod_basket,n.x=0,n.y=0;var i=t.convertToWorldSpaceAR(cc.v2(0,0)),a=this.nod_basket.convertToNodeSpaceAR(i);i=v.default.getDistance(cc.v2(0,0),a)/800,cc.tween(n).to(i,{x:a.x,y:a.y}).call(function(){o(),t.opacity=255,n.destroy()}).start()},b.videoPoint=0,s([i(cc.Node)],b.prototype,"nod_content",void 0),s([i(cc.Node)],b.prototype,"nod_tip",void 0),s([i(cc.Button)],b.prototype,"btn_video",void 0),s([i(cc.Node)],b.prototype,"nod_basket",void 0),s([i(cc.Node)],b.prototype,"nod_touch",void 0),s([i(cc.Node)],b.prototype,"nod_get",void 0),a=u=s([a],b),r.default=a,cc._RF.pop()},{}],GetStrengthUI:[function(t,e,o){"use strict";cc._RF.push(e,"63b9ap/eAJGfaTIKzjCVU5b","GetStrengthUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonData"),d=i("CommonItem_4"),h=i("CommonUtils"),_=i("Const"),f=i("Formula"),g=i("GameMgr"),y=i("LvMgr"),m=i("PropMgr"),v=i("ReplacementModel"),b=i("IconUtils"),I=i("EventManager"),D=i("GameModule");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_title=null,t.spr_icon=null,t.item=null,t.lbl_desc=null,t.sp_role=null,t.lvConfig=null,t.cur_gain_thing=null,t.ui_type=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=D.default),C.prototype.setData=function(t){this.ui_type=t,this.updateUI()},C.prototype.updateUI=function(){var t=this;h.default.loadMainRoleSpine(this.sp_role,function(){v.default.createBySpine(t.sp_role,u.default.getInstance().dressing),t.sp_role.setAnimation(0,"standby",!0)});var e,o=O[this.ui_type];o&&(b.IconUtils.setSpriteFrame(_.BundleName.MAIN_UI,"texture/strength/"+o.title,this.spr_title),b.IconUtils.setSpriteFrame(_.BundleName.MAIN_UI,"texture/strength/"+o.icon,this.spr_icon),this.lvConfig=y.default.getInstance().getConfigByExp(),1==this.ui_type?(this.item.setIconByPropID(o.id),e=Math.max(y.default.getInstance().getStrengthMax(),1),this.cur_gain_thing={file:_.ThingType.normal,id:_.CommonPropID.strength,num:e},this.item.setCountStr("+"+this.cur_gain_thing.num),this.lbl_desc.string="\u83b7\u53d6\u4f53\u529b"):2==this.ui_type?(this.item.setIconByPropID(o.id),this.cur_gain_thing=this.lvConfig.video_coin,this.item.setCountStr("+"+this.cur_gain_thing.num),this.lbl_desc.string="\u83b7\u53d6\u91d1\u5e01"):3==this.ui_type?(this.item.setIconByPropID(o.id),this.cur_gain_thing=this.lvConfig.video_diamond,this.item.setCountStr("+"+this.cur_gain_thing.num),this.lbl_desc.string="\u83b7\u53d6\u94bb\u77f3"):4==this.ui_type?(this.item.setIconByPropID(o.id),this.cur_gain_thing={file:_.ThingType.normal,id:_.CommonPropID.heart,num:f.Formula.adHeartCount()},this.item.setCountStr("+"+this.cur_gain_thing.num),this.lbl_desc.string="\u83b7\u53d6\u7231\u5fc3\u503c"):5==this.ui_type&&(this.item.setIconByPropID(o.id),this.cur_gain_thing=this.lvConfig.video_bbq_star,this.item.setCountStr("+"+this.cur_gain_thing.num),this.lbl_desc.string="\u83b7\u53d6\u661f\u5e01"))},C.prototype.onBtnVideo=function(){var t=this,e=0;1==this.ui_type?e=40000020:2==this.ui_type?e=40000017:3==this.ui_type?e=40000018:4==this.ui_type&&(e=40000019),h.default.showVideo(function(){m.default.addGainThing([t.cur_gain_thing]),I.default.emit(_.GameEvent.updateBase),t.closeMe()},e)},C.prototype.onBtnWelfare=function(){p.default.click(),g.gm.ui.showModule(g.gm.const.WelfareUI),this.closeMe()},s([a(cc.Sprite)],C.prototype,"spr_title",void 0),s([a(cc.Sprite)],C.prototype,"spr_icon",void 0),s([a(d.default)],C.prototype,"item",void 0),s([a(cc.Label)],C.prototype,"lbl_desc",void 0),s([a(sp.Skeleton)],C.prototype,"sp_role",void 0),i=s([i],C),r.default=i;var O={1:{id:_.CommonPropID.strength,title:"title_strength",icon:"prop_"+_.CommonPropID.strength+"_strength"},2:{id:_.CommonPropID.coin,title:"title_coin",icon:"prop_"+_.CommonPropID.coin+"_strength"},3:{id:_.CommonPropID.diamond,title:"title_diamond",icon:"prop_"+_.CommonPropID.diamond+"_strength"},4:{id:_.CommonPropID.heart,title:"title_heart",icon:"prop_"+_.CommonPropID.heart+"_strength"},5:{id:_.CommonPropID.bbq_star,title:"title_bbq_star",icon:"prop_"+_.CommonPropID.bbq_star+"_strength"}};cc._RF.pop()},{}],GetToolsUI:[function(t,e,o){"use strict";cc._RF.push(e,"468a2qtgqVBBq+9a+s1FcL9","GetToolsUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("Const"),h=i("NodStars"),_=i("PropMgr"),f=i("IconUtils"),g=i("GameModule"),y=i("GetAwardUI"),m=i("ToolMgr");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.lbl_effect_name=null,t.lbl_effect=null,t.lbl_name=null,t.spr_tool=null,t.nod_stars=null,t.btn_video=null,t.drop_node=null,t.get_node=null,t.weapon_desc=null,t.getAwardType=y.GetAwardType.button,t.upgradeEff=!1,t.is_weapon=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=g.default),v.prototype.onEnable=function(){},v.prototype.onDisable=function(){},v.prototype.setData=function(t,e,o,n){void 0===e&&(e=y.GetAwardType.button),void 0===n&&(n=!1),this.upgradeEff=o=void 0!==o&&o,p.default.award(),this.getAwardType=e,this.bigItem=t,this.is_weapon=n,this.updateUI()},v.prototype.updateUI=function(){var t=this,e=m.default.getInstance().getConfigByID(this.bigItem.id);e&&(this.upgradeEff?(cc.tween(this.lbl_name.node).to(.3,{scale:1.2,opacity:150}).call(function(){t.lbl_name.string=e.prop_name}).to(.3,{scale:1,opacity:255}).start(),cc.tween(this.lbl_lv.node).to(.3,{scale:1.2,opacity:150}).call(function(){t.lbl_lv.string=e.lv+"\u7ea7"}).to(.3,{scale:1,opacity:255}).start(),cc.tween(this.lbl_effect.node).to(.3,{scale:1.2,opacity:150}).call(function(){t.lbl_effect.string=e.tool_atk+""}).to(.3,{scale:1,opacity:255}).start(),cc.tween(this.nod_stars.node).to(.3,{scale:1.2,opacity:150}).call(function(){t.nod_stars.setStarByCommon(e.lv)}).to(.3,{scale:1,opacity:255}).start()):(this.lbl_name.string=e.prop_name,this.lbl_lv.string=e.lv+"\u7ea7",this.lbl_effect.string=e.tool_atk+"",this.lbl_effect_name.string="\u91c7\u96c6\u6548\u7387:",e.tool_class==d.ToolClass.gongnu&&(this.lbl_effect_name.string="\u653b\u51fb\u529b:"),this.nod_stars.setStarByCommon(e.lv)),f.IconUtils.setPropSprite(this.bigItem.id,this.spr_tool),this.drop_node.node.active=this.is_weapon,this.get_node.node.active=!this.is_weapon,this.weapon_desc.active=this.is_weapon)},v.prototype.onBtnGet=function(){this.getAwardType==y.GetAwardType.button&&1==this.bigItem.file&&_.default.addProps([{id:this.bigItem.id,num:this.bigItem.num}],!1),this.callback?this.callback():this.closeMe()},v.prototype.onBtnDrop=function(){this.closeMe()},v.prototype.onBtnUpgrade=function(){var t,e,o=this;this.getAwardType==y.GetAwardType.button&&1==this.bigItem.file&&(t=0,(e=m.default.getInstance().getConfigByID(this.bigItem.id)).tool_class==d.ToolClass.liandao?t=40000001:e.tool_class==d.ToolClass.futou?t=40000002:e.tool_class==d.ToolClass.gaozi?t=40000003:e.tool_class==d.ToolClass.chanzi?t=40000004:e.tool_class==d.ToolClass.chutou?t=40000005:e.tool_class==d.ToolClass.gongnu&&(t=40000006),u.default.showVideo(function(){o.onAdEnd()},t))},v.prototype.setVideo=function(t){this.btn_video.node.active=t=void 0===t||t},v.prototype.onAdEnd=function(){var t=this.is_weapon?m.default.getInstance().getConfigByID(this.bigItem.id):m.default.getInstance().getNextLvTool(this.bigItem.id);t?(this.setVideo(!1),_.default.addProps([{id:t.prop_id,num:1}],!1),this.setData({file:d.ThingType.normal,id:t.prop_id,num:1},y.GetAwardType.open,!0)):(this.setVideo(!1),_.default.addProps([{id:this.bigItem.id,num:1}],!1),this.setData({file:d.ThingType.normal,id:this.bigItem.id,num:1},y.GetAwardType.open,!0))},s([a(cc.Label)],v.prototype,"lbl_lv",void 0),s([a(cc.Label)],v.prototype,"lbl_effect_name",void 0),s([a(cc.Label)],v.prototype,"lbl_effect",void 0),s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.Sprite)],v.prototype,"spr_tool",void 0),s([a(h.default)],v.prototype,"nod_stars",void 0),s([a(cc.Button)],v.prototype,"btn_video",void 0),s([a(cc.Button)],v.prototype,"drop_node",void 0),s([a(cc.Button)],v.prototype,"get_node",void 0),s([a(cc.Node)],v.prototype,"weapon_desc",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],GiftItem:[function(t,e,o){"use strict";cc._RF.push(e,"1cf71YmKaZG0ryJQJgnTOCb","GiftItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("Const"),d=i("PropMgr"),h=i("ListItem"),_=i("ButtonUtils"),f=i("NetUtils"),g=i("WelfareData");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.item=null,t.lbl_old_price=null,t.lbl_new_price=null,t.spr_icon=null,t.btn_buy=null,t.final_price=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=h.default),y.prototype.setData=function(t){t?(this.data=t,this.updateUI()):cc.error(this.listId,t)},y.prototype.updateUI=function(){g.default.getInstance().have_buy_gift_index.includes(this.listId)?_.default.setInteractAble(this.btn_buy,!1):_.default.setInteractAble(this.btn_buy,!0);var t=d.default.getConfigByPropID(this.data.id);this.item.setCommonUI(this.data),this.item.setName(t.name+"x"+this.data.num),t=d.default.getConfigByPropID(this.data.id).diamond_translate*this.data.num,this.final_price=Math.floor(t*this.data.price_discount),this.lbl_old_price.string=t+"",this.lbl_new_price.string=this.final_price+""},y.prototype.onBtnBuy=function(){d.default.tryConsume([{id:u.CommonPropID.diamond,num:this.final_price}])&&(d.default.addGainThing([this.data]),g.default.getInstance().addBuyRecord(this.listId),this.updateUI(),f.ReportData.instance.report_point(100006,this.listId+1))},s([a(p.default)],y.prototype,"item",void 0),s([a(cc.Label)],y.prototype,"lbl_old_price",void 0),s([a(cc.Label)],y.prototype,"lbl_new_price",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(cc.Button)],y.prototype,"btn_buy",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],GuideMgr:[function(t,e,o){"use strict";cc._RF.push(e,"839b4YryAlBII8nEbEfQkrI","GuideMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("AccessMgr"),l=i("CommonUtils"),p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("JumpMgr"),_=i("MapDataHelper"),f=i("Singleton"),g=i("EventManager"),y=i("Vec2Utils"),m=i("GetAwardUI"),v=i("MainRoleMgr"),b=i("MainHouse"),I=i("Object_10335"),D=i("Object_10604"),C=i("RockingChair"),O=i("NpcAni"),w=i("NpcMgr"),M=i("FoodFactory"),P=i("BusinessmanMgr"),S=i("DistrictMgr"),T=i("ToolMgr"),j=i("FoodOrderMgr"),k=i("TruckMgr"),A=i("StaffHelper"),R=i("ObjectPlant"),N=cc.v2(123,128),E=cc.v2(123,143),B=cc.v2(123,134);function U(){var t=c.call(this)||this;return t.curGuideConfig=[],t.lastGuideIndex=-1,t.touchTaskID=0,t.touchConditionID=0,t.fingers=[],t.touchCondition={mission:0,id:0,num:0},g.default.on(u.GameEvent.end_task,t.onEndTask,t),t}r(U,c=f.default),U.prototype.resetTouchCondition=function(){this.touchCondition={mission:0,id:0,num:0}},U.prototype.onTouchTask=function(t,e){var o=this;void 0===e&&(e=0);var n=t.taskID;this.touchTaskID=n;var i=t.config.condition[e].mission,a=t.config.condition[e];this.touchCondition=JSON.parse(JSON.stringify(a)),this.touchConditionID=a.id;var r,c,f,g,y,m,v,I,D,C,O,N,E,B,U,G,x,L,F,H,V,W=T.default.getInstance().getConfigByID(a.id);i!=u.ConditionType.have_prop||10245==n||W?i!=u.ConditionType.open_box_buy_key?i!=u.ConditionType.kill_monster?i==u.ConditionType.buy_prop&&10102==a.id||i==u.ConditionType.buy_prop&&110101==a.id?l.default.goToExploreByID(11001):i!=u.ConditionType.new_prop?l.default.isInMainScene()?i==u.ConditionType.new_prop?s.default.getInstance().dealByItemID(a.id):i==u.ConditionType.clean||i==u.ConditionType.collect?h.default.getInstance().jumpToObjectAndShowFinger(a.id,!1):i==u.ConditionType.unlock_map_object?(H=_.default.findlockDataByObjectID(a.id))&&(h.default.getInstance().jumpToGrid(H.getCenterPos()),H.loadObject(function(t){t.showFinger(),(t=t.data.getParentData())&&t.objectID==u.SpecialObjectID.mainHouse&&t.loadObject(function(t){t.getComponent(b.default).open()})})):i==u.ConditionType.have_prop?10245==n?(c=_.default.getMapObjectByID(u.SpecialObjectID.cooking_bench))&&(h.default.getInstance().jumpToGrid(c.worldGrid),c.showFinger(),W=c.data.getParentData(),l.default.tryToOpenHouse(W)):T.default.getInstance().getConfigByID(a.id)?(r=_.default.findDataByObjectID(u.SpecialObjectID.ToolRoom))&&r.loadObject(function(t){h.default.getInstance().jumpToGrid(r.getWorldGrid()),t.showFinger()}):s.default.getInstance().dealByItemID(a.id):i==u.ConditionType.put_decoration?(h.default.getInstance().jumpToGrid(cc.v2(123,120)),l.default.showFingerGuide(function(t){t.showFingerByNode(l.default.getBaseUI().nod_decorate)})):i==u.ConditionType.trade?(c=_.default.getDataByID(u.SpecialObjectID.stall))&&c.loadObject(function(t){var e=P.BusinessmanMgr.getInstance().findDeskMan();e?(h.default.getInstance().jumpToPos(e.node,cc.v2(0,0)),e.showFinger()):(d.gm.ui.showNotice("\u6ca1\u6709\u5ba2\u4eba\u5728\u6392\u961f"),h.default.getInstance().jumpToGrid(t.data.getCenterPos()))}):i==u.ConditionType.unlockSlot?(c=t.config.condition[e],(f=_.default.findDataByObjectID(c.id))&&f.loadObject(function(t){var e,i,a,r;f.isBuilding&&f.type.sub_type==u.BuildingType.Machining?(a=f.getFirstLockSlot())?(i=t.getComponent(M.default).nod_slots[a.index])&&(e=i.getChildByName("touch_"+a.index),h.default.getInstance().jumpToPos(e,cc.v2(0,0)),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(e)})):(i=o.showTaskFinger(n,0))?h.default.getInstance().jumpToFinger(i):(h.default.getInstance().jumpToGrid(f.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0)):t.getComponent(R.default)?!(a=f.getFirstLockSlot())||(r=t.getComponent(R.default).getNodeByIndex(a.index))&&(h.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(r)})):(h.default.getInstance().jumpToGrid(f.getWorldGrid()),f.loadObject(function(){o.showTaskFinger(o.touchTaskID,0)}))})):i==u.ConditionType.produce?(y=p.ProduceUtils.getConfigByProduceID(a.id).build_id,(g=_.default.findDataByObjectID(y,!1))&&g.loadObject(function(t){var e,i;g.objectID==u.SpecialObjectID.food_factory&&g.type.sub_type==u.BuildingType.Machining?g.loadObject(function(t){var e,i=g.slots[0];i?(e=t.getComponent(M.default).nod_slots[i.index])&&(h.default.getInstance().jumpToPos(e,cc.v2(0,0)),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(e)})):(i=o.showTaskFinger(n,0))?h.default.getInstance().jumpToFinger(i):(h.default.getInstance().jumpToGrid(g.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0))}):t.getComponent(M.default)?g.loadObject(function(t){var e,i=g.slots[0];i?(e=t.getComponent(M.default).nod_slots[i.index])&&(h.default.getInstance().jumpToPos(e,cc.v2(0,0)),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(e)})):(i=o.showTaskFinger(n,0))?h.default.getInstance().jumpToFinger(i):(h.default.getInstance().jumpToGrid(g.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0))}):t.getComponent(R.default)?!(e=g.slots[0])||(i=t.getComponent(R.default).getNodeByIndex(e.index))&&(h.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(i)})):(h.default.getInstance().jumpToGrid(g.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0)||t.showFinger())})):i==u.ConditionType.harvest_count?(y=p.ProduceUtils.getConifgByProductionID(a.id).build_id,(m=_.default.findDataByObjectID(y))&&(m.type.sub_type==u.BuildingType.Machining&&[u.SpecialObjectID.fruit_factory,u.SpecialObjectID.food_factory].includes(m.objectID)?m.loadObject(function(t){var e,i=m.slots[0];i?(e=t.getComponent(M.default).nod_slots[i.index])&&(h.default.getInstance().jumpToPos(e,cc.v2(0,0)),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(e)})):(i=o.showTaskFinger(n,0))?h.default.getInstance().jumpToFinger(i):(h.default.getInstance().jumpToGrid(m.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0))}):m.objectID==u.SpecialObjectID.food_factory?m.loadObject(function(t){var e=t.getComponent(M.default).getFinger(0);h.default.getInstance().jumpToFinger(e,function(){e.showFinger(!0,!0)})}):(h.default.getInstance().jumpToGrid(m.getCenterPos()),m.loadObject(function(t){var e,n;t.getComponent(R.default)?!(e=m.slots[0])||(n=t.getComponent(R.default).getNodeByIndex(e.index))&&(h.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(n)})):o.showTaskFinger(o.touchTaskID,0)||t.showFinger()})))):i==u.ConditionType.buy_10?d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(l.default.getBaseUI().nod_shop)}):i==u.ConditionType.interact_heart?(H=_.default.findDataByObjectID(t.config.condition[e].id,!1)).loadObject(function(t){o.showTaskFinger(o.touchTaskID,0)?h.default.getInstance().jumpToGrid(t.worldGrid):h.default.getInstance().jumpToObjectAndShowFinger(t.objectID,!1)}):i==u.ConditionType.NPC?w.default.getInstance().tryToGetView(t.config.condition[e].id,function(t){t.show(!0),h.default.getInstance().jumpToGrid(t.getGrid()),t.showFinger(),t.posSys.parentUID&&(t=d.gm.mapData.getObjectData(t.posSys.parentUID),l.default.tryToOpenHouse(t))}):i==u.ConditionType.give_npc?s.default.getInstance().dealByItemID(a.id):i==u.ConditionType.unlock_district?(v=S.default.getInstance().district[a.id])?(h.default.getInstance().jumpToPos(v.districLock.node,cc.v2(0,0)),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(v.districLock.node,!0,cc.v2(0,70),!1)})):(cc.warn("====================show district finger "),e=this.showFinger(a.id,0),h.default.getInstance().jumpToFinger(e)):i==u.ConditionType.food_order?0<Object.values(j.default.getInstance().getCurOrders()).length&&d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(l.default.getBaseUI().nod_food.children[0])}):i==u.ConditionType.buy_animal?(I=_.default.findDataByObjectID(a.id))&&I.loadObject(function(){h.default.getInstance().jumpToGrid(I.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0)}):i==u.ConditionType.feed_animal?(D=_.default.findDataByObjectID(a.id))&&D.loadObject(function(){h.default.getInstance().jumpToGrid(D.getWorldGrid()),o.showTaskFinger(o.touchTaskID,0)}):i==u.ConditionType.produce_rate_unlock?(y=p.ProduceUtils.getConfigByProduceID(a.id).build_id,(C=_.default.findDataByObjectID(y))&&C.loadObject(function(t){var e,o,n=t.getComponent(M.default);n?(e=n.getFinger(0))?h.default.getInstance().jumpToFinger(e,function(){e.showFinger(!0,!0)}):(h.default.getInstance().jumpToGrid(C.getWorldGrid()),t.showFinger()):t.getComponent(R.default)?!(n=C.slots[0])||(o=t.getComponent(R.default).getNodeByIndex(n.index))&&(h.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(o)})):(h.default.getInstance().jumpToGrid(C.getWorldGrid()),t.showFinger())})):i==u.ConditionType.broadcast?(O=l.default.getBaseUI().nod_right.getChildByName("btn_broadcast"),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(O)})):i==u.ConditionType.truck_order?k.default.getInstance().truckView&&k.default.getInstance().truckView.data.state==u.TraderActionState.wait_for_trading?(h.default.getInstance().jumpToGrid(k.default.getInstance().truckView.getGrid()),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(k.default.getInstance().truckView.node)})):d.gm.ui.showNotice("\u8bf7\u7b49\u5f85\u5361\u8f66\u5230\u6765"):i==u.ConditionType.consume_prop?a.id==u.CommonPropID.sandglass&&((N=_.default.getProduceObjectData())?(h.default.getInstance().jumpToGrid(N.getWorldGrid()),N.loadObject(function(t){var e,o;t.getComponent(R.default)?!(e=N.slots[0])||(o=t.getComponent(R.default).getNodeByIndex(e.index))&&(h.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(o)})):t.showFinger()})):h.default.getInstance().jumpToGrid(cc.v2(99,119))):i==u.ConditionType.recruit_staff?0<(F=A.default.getInstance().getStaffCanWorkIn(a.id)).length&&(E=_.default.findData(F[0],function(){return!0}))&&E.loadObject(function(t){h.default.getInstance().jumpToGrid(E.getWorldGrid()),t.showFinger()}):i==u.ConditionType.appoint_staff?(B=_.default.findDataByObjectID(a.id)).loadObject(function(t){t||cc.error("not object",t),h.default.getInstance().jumpToGrid(B.getWorldGrid()),t.showFinger()}):i==u.ConditionType.buy_prop?a.id==u.CommonPropID.bbq_sauce&&(U=_.default.getUnlockDatas([u.SpecialObjectID.bbq_ice_box_1])[0]).loadObject(function(t){t||cc.error("not object",t),h.default.getInstance().jumpToGrid(U.getWorldGrid()),t.showFinger()}):i==u.ConditionType.bbq_learn_menu?(G=_.default.getDataByID(u.SpecialObjectID.bbq_board_1))&&G.loadObject(function(t){h.default.getInstance().jumpToGrid(G.getWorldGrid()),t.showFinger()}):i==u.ConditionType.replenish_goods?(x=_.default.findDataByObjectID(a.id)).loadObject(function(t){t||cc.error("not object",t),h.default.getInstance().jumpToGrid(x.getWorldGrid()),t.showFinger()}):i==u.ConditionType.object_upgrade?(L=_.default.findDataByObjectID(a.id)).loadObject(function(t){t||cc.error("not object",t),h.default.getInstance().jumpToGrid(L.getWorldGrid()),t.showFinger()}):i==u.ConditionType.staff_upgrade?0<(F=A.default.getInstance().getStaffCanWorkIn(a.id)).length&&(H=_.default.findData(F[0],function(){return!0}))&&(h.default.getInstance().jumpToGrid(H.getWorldGrid()),H.loadObject(function(t){t.showFinger()})):i==u.ConditionType.unlock_module?6==a.id&&(V=l.default.getBaseUI().nod_left_buttom.getChildByName("btn_house_keeper"),d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(V)})):i==u.ConditionType.main_house_menu_upgrade?d.gm.ui.showModule(d.gm.const.MenuUI):i==u.ConditionType.bbq_menu_upgrade&&d.gm.ui.showModule(d.gm.const.BarbecueMenuNew,function(t){t.setData()}):l.default.tipToGohome():s.default.getInstance().dealByItemID(a.id):l.default.goToExploreByID(a.id):10701==a.id&&l.default.goToExploreByID(a.id):s.default.getInstance().dealByItemID(a.id)},U.prototype.showTaskFinger=function(t,e){if(t==this.touchTaskID){this.hideAllFinger();var o=this._findCurFinger(t,e);if(o&&0<o.length)for(var n=0,i=o;n<i.length;n++)!function(o){cc.log("showTaskFinger ",t,e),o.showFinger(),o.scheduleOnce(function(){o.hide()},3)}(i[n]);else cc.error("not found finger",t,e);return o[0]}},U.prototype.showFinger=function(t,e,o){void 0===o&&(o=!0);var n=this._findFinger(t,e);if(n)return n.showFinger(),o&&n.scheduleOnce(function(){n.hide()},3),n;cc.error("not found finger",t,e)},U.prototype.hideFinger=function(t,e){var o=this._findFinger(t,e);if(o)return o.hide(),o;cc.error("not found finger",t,e)},U.prototype._findCurFinger=function(t,e){for(var o=[],n=0,i=this.fingers;n<i.length;n++){var a=i[n];a.isCurTouchTaskFinger(t,e)&&o.push(a)}return o},U.prototype._findFinger=function(t,e){for(var o=0,n=this.fingers;o<n.length;o++){var i=n[o];if(i.isFinger(t,e))return i}},U.prototype.addFinger=function(t){this.fingers.push(t)},U.prototype.hideAllFinger=function(){for(var t=0,e=this.fingers;t<e.length;t++)e[t].hide()},U.prototype.endGuide=function(t){this.touchTaskID==t&&(this.touchTaskID=0,this.hideAllFinger())},U.prototype.onEndTask=function(t,e){10252==t&&l.default.isInExplore()&&l.default.showFingerGuide(function(t){t.showFingerByNode(l.default.getBaseUI().nod_home_btn,!0,cc.v2(0,65),!1)}),e&&e!=d.gm.localData.lastGuide.id&&(this.lastGuideIndex=-1,d.gm.localData.setLastGuide(e,this.lastGuideIndex),l.default.isInMainScene()&&this.checkGuide())},U.prototype.checkGuide=function(){var t;d.gm.localData.lastGuide&&d.gm.localData.lastGuide.id&&(this.lastGuideIndex=d.gm.localData.lastGuide.index,t=d.gm.localData.lastGuide.id,this.curGuideConfig=p.ConfigUtils.GuideDatasUtils.getGuideConfig(t),this.dealGuide(t))},U.prototype.dealGuide=function(t){var e=this.lastGuideIndex+1;this.curGuideConfig.length>e?(cc.log("guide index ",t,e),this.checkCommon(t,e)||d.gm.ui.showTopBlock(),this.checkSpecical(t,e)):(100020==t&&w.default.getInstance().tryToGetView(u.ENpcID.WangShen,function(t){t=t.getGrid(),w.default.getInstance().setTo(u.ENpcID.Goudan,cc.v2(t.x+1,t.y))}),cc.log("end guide",t),this.addLastGuiding(t),d.gm.ui.showTopBlock(!1),d.gm.localData.clearLastGuide(),g.default.emit(u.GameEvent.updateBase))},U.prototype.nextStep=function(t,e){this.lastGuideIndex=e,d.gm.localData.setLastGuide(t,e),this.dealGuide(t)},U.prototype.checkCommon=function(t,e){var o=this,n=this.curGuideConfig[e],i=0,a=0,r=!1;return n.words_id&&(i+=1,d.gm.ui.showTopBlock(!(r=!0)),d.gm.ui.showModule(d.gm.const.DialogUI,function(r){r.setData(n.words_id,function(){(a+=1)==i&&o.nextStep(t,e)},!n.closeCircle)})),n.rewards_tool_prop&&0<n.rewards_tool_prop.length&&(r=!0,i+=1,d.gm.ui.showModule(d.gm.const.GetToolsUI,function(r){d.gm.ui.showTopBlock(!1),r.setVideo(n.view_allow||!1),r.setData(n.rewards_tool_prop[0]),r.callback=function(){a+=1,r.closeMe(),a==i&&o.nextStep(t,e)}})),n.rewards_prop&&0<n.rewards_prop.length&&(r=!0,i+=1,d.gm.ui.showModule(d.gm.const.GetAwardUI,function(r){d.gm.ui.showTopBlock(!1),m.default.videoPoint=t,r.setVideo(n.view_allow||!1),r.setData(n.rewards_prop),r.callback=function(){a+=1,r.closeMe(),a==i&&o.nextStep(t,e)}})),r},U.prototype.checkSpecical=function(t,e){var o,n,i,a,r,c,s,p,f=this;100001==t?1==e?(d.gm.ui.showTopBlock(!1),l.default.pointToTask(function(){f.nextStep(t,e)})):2==e?(this.hideFinger(t,1),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[u.GuidePoint.MainHouseDoor_Grandma_]),v.default.getInstance().roleMove(l.default.converToNewGrid(cc.v2(989,969))),h.default.getInstance().moveToGrid(l.default.converToNewGrid(cc.v2(989,969)),function(){})):3==e&&h.default.getInstance().moveToGrid(l.default.converToNewGrid(cc.v2(976,967)),function(){var o=S.default.getInstance().district[2];o&&d.gm.ui.showModule(d.gm.const.FingerGuide,function(t){t.showFingerByNode(o.districLock.node,!1,cc.v2(0,70))}),f.nextStep(t,e)},1500):100002==t?0==e?w.default.getInstance().tryToGetView(u.ENpcID.WangShen,function(o){o.getComponent(O.default).setWalkType(u.EnumRoleAniType.walk_basket),w.default.getInstance().moveByLine(u.ENpcID.WangShen,[u.GuidePoint.YardDoor],function(o){o.getComponent(O.default).setStandByAni(u.EnumRoleAniType.standby_basket),h.default.getInstance().moveToGrid(u.GuidePoint.YardDoor,function(){f.nextStep(t,e)},1500)})}):1==e&&(h.default.getInstance().jumpToGrid(u.GuidePoint.YardDoor),w.default.getInstance().tryToGetView(u.ENpcID.WangShen,function(o){var n=o.nod_touch;d.gm.ui.showModule(d.gm.const.BlockGuide,function(i){d.gm.ui.showTopBlock(!1),i.setTargetNode(n),i.setTouchCb(function(){f.nextStep(t,e),o.onTouchView(),d.gm.ui.closeModule(d.gm.const.BlockGuide)})})})):100003==t?1==e?(w.default.getInstance().moveToPath(u.ENpcID.WangShen,[u.GuidePoint.MainHouseDoor_Wangshen_],function(o){o.getComponent(O.default).setStandByAni(u.EnumRoleAniType.standby_basket),f.nextStep(t,e)}),v.default.getInstance().roleMove(l.default.converToNewGrid(cc.v2(990,967)),function(){}),h.default.getInstance().moveToGrid(y.default.getCenterPoint([u.GuidePoint.MainHouseDoor_Wangshen_,l.default.converToNewGrid(cc.v2(990,967)),u.GuidePoint.MainHouseDoor_Grandma_]),function(){},850)):6==e?(d.gm.ui.showTopBlock(!1),w.default.getInstance().moveToPath(u.ENpcID.WangShen,[u.GuidePoint.WangShenMainHouse_],function(o){o.getComponent(O.default).setWalkType(u.EnumRoleAniType.walk),f.nextStep(t,e)}),w.default.getInstance().moveToPath(u.ENpcID.Grandma,[u.GuidePoint.GrandmaMainHouse_])):7==e&&((p=_.default.findDataByObjectID(10501,!1)).loadObject(function(t){t.showFinger()}),this.nextStep(t,e)):100030==t?(d.gm.ui.showTopBlock(!1),w.default.getInstance().moveByLine(u.ENpcID.WangShen,[u.GuidePoint.MainHouseDoor_Wangshen_],function(){f.nextStep(t,e)}),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[l.default.converToNewGrid(cc.v2(990,923)),u.GuidePoint.MainHouseDoor_Grandma_])):100004==t?1==e?(w.default.getInstance().moveTo(u.ENpcID.WangShen,u.GuidePoint.ToolRoom_Wangshen_,function(t){t.getComponent(O.default).playMake(function(){})}),v.default.getInstance().roleMove(u.GuidePoint.ToolRoom_MainRole_,function(){v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni(),f.nextStep(t,e)}),w.default.getInstance().moveTo(u.ENpcID.Grandma,u.GuidePoint.ToolRoom_Grandma_,function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_down)}),h.default.getInstance().moveToGrid(u.GuidePoint.ToolRoom_MainRole_,function(){},900)):4==e?(w.default.getInstance().moveByLine(u.ENpcID.WangShen,[u.GuidePoint.MainHouseDoor_Wangshen_],function(){w.default.getInstance().updateDirection(u.ENpcID.WangShen,u.RoleDirection.left_up)}),w.default.getInstance().moveToPath(u.ENpcID.Grandma,[u.GuidePoint.MainHouseDoor_Grandma_],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_down)}),v.default.getInstance().roleMove(u.GuidePoint.MainHouseDoor_MainRole_),h.default.getInstance().moveToGrid(l.default.getCenterPoint([u.GuidePoint.MainHouseDoor_Wangshen_,u.GuidePoint.MainHouseDoor_Grandma_,u.GuidePoint.MainHouseDoor_MainRole_]),null,800)):5==e?(w.default.getInstance().moveByLine(u.ENpcID.WangShen,[N,B,E],function(){w.default.getInstance().hide(u.ENpcID.WangShen)}),this.nextStep(t,e)):7==e&&(w.default.getInstance().moveTo(u.ENpcID.Grandma,cc.v2(124,114)),this.nextStep(t,e)):100005==t?2==e&&this.nextStep(t,e):100006==t?1==e?(o=_.default.findDataByObjectID(u.SpecialObjectID.sofa))&&o.loadObject(function(n){var i=n.getComponent(I.default);n=o.getRightPos(),w.default.getInstance().moveTo(u.ENpcID.Grandma,cc.v2(n.x+1,n.y),function(o){o.sitdownOnChair(i),f.nextStep(t,e)})}):3==e&&l.default.pointToTask(function(){f.nextStep(t,e)}):100007==t?(w.default.getInstance().setTo(u.ENpcID.XiaoQiang,u.CreatePoint[u.ENpcID.XiaoQiang],function(){w.default.getInstance().updateDirection(u.ENpcID.XiaoQiang,u.RoleDirection.right_up)}),2==e&&this.nextStep(t,e)):100008==t?2==e?(w.default.getInstance().moveToPath(u.ENpcID.XiaoQiang,[u.GuidePoint.YardDoor,u.GuidePoint.ToolRoom_Wangshen_],function(){w.default.getInstance().updateDirection(u.ENpcID.XiaoQiang,u.RoleDirection.left_down)}),this.nextStep(t,e)):3==e&&this.nextStep(t,e):100009==t?1==e?w.default.getInstance().tryToGetView(u.ENpcID.XiaoQiang,function(o){o.getComponent(O.default).playMake(function(){f.nextStep(t,e)})}):5==e?(d.gm.ui.showTopBlock(!1),w.default.getInstance().moveToPath(u.ENpcID.XiaoQiang,[N,u.CreatePoint[u.ENpcID.XiaoQiang]],function(){w.default.getInstance().hide(u.ENpcID.XiaoQiang)}),this.nextStep(t,e)):6==e&&this.nextStep(t,e):100010==t?0==e?(p=_.default.findDataByObjectID(u.SpecialObjectID.ToolRoom)).loadObject(function(o){h.default.getInstance().jumpToGrid(o.worldGrid),d.gm.ui.showTopBlock(!1),d.gm.ui.showModule(d.gm.const.BlockGuide,function(n){n.setTargetNode(o.nod_object.getChildByName("nod_anchor").getChildByName("spr_facade")),n.setTouchCb(function(){d.gm.ui.showModule(d.gm.const.ToolRoomUI,function(o){o.setData(),d.gm.ui.closeModule(d.gm.const.BlockGuide),f.nextStep(t,e)})})})}):2==e&&(w.default.getInstance().moveByLine(u.ENpcID.Grandma,[cc.v2(124,108)],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.right_down)}),d.gm.ui.showModule(d.gm.const.BlockGuide,function(o){d.gm.ui.showTopBlock(!1);var n=d.gm.ui.get_module(d.gm.const.ToolRoomUI);n?(o.setTargetNode(n.nod_close),o.setTouchCb(function(){n.closeMe(),o.closeMe(),f.nextStep(t,e)})):(o.closeMe(),f.nextStep(t,e))})):100011==t?w.default.getInstance().setTo(u.ENpcID.Kuanggong,u.CreatePoint[u.ENpcID.Kuanggong],function(){w.default.getInstance().updateDirection(u.ENpcID.Kuanggong,u.RoleDirection.right_up),1==e&&(f.showFinger(t,e),f.nextStep(t,e))}):100012==t?2==e&&(w.default.getInstance().moveToPath(u.ENpcID.Kuanggong,[l.default.converToNewGrid(cc.v2(992,1042)),l.default.converToNewGrid(cc.v2(1035,1038)),l.default.converToNewGrid(cc.v2(992,1042)),u.CreatePoint[u.ENpcID.Kuanggong]],function(){w.default.getInstance().updateDirection(u.ENpcID.Kuanggong,u.RoleDirection.right_up)}),this.nextStep(t,e)):100023==t?0==e&&(d.gm.ui.showTopBlock(!1),this.nextStep(t,e)):100014==t?1==e?(w.default.getInstance().hide(u.ENpcID.Kuanggong),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[cc.v2(126,108),cc.v2(124,108),cc.v2(126,108),cc.v2(124,108)],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.right_down),v.default.getInstance().updateDirectionByType(u.RoleDirection.left_up),v.default.getInstance().setStandByAni(),f.nextStep(t,e)})):3==e&&this.nextStep(t,e):100015==t?3==e&&l.default.pointToTask(function(){f.nextStep(t,e)}):100024==t?((a=_.default.getUnlockFoodTable())[0].loadObject(function(t){n=t.getComponent(D.default)}),a[1].loadObject(function(t){i=t.getComponent(D.default)}),1==e?(v.default.getInstance().roleMove(cc.v2(122,119),function(){v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni(),v.default.getInstance().shoutAction(function(){f.nextStep(t,e)})}),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[cc.v2(124,119)],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_up)}),h.default.getInstance().moveToGrid(cc.v2(122,119),function(){})):2==e?(w.default.getInstance().show(u.ENpcID.Npc_10004,!0,function(){w.default.getInstance().moveToPath(u.ENpcID.Npc_10004,[u.GuidePoint.YardDoor,u.GuidePoint.YarDoor_Inside,cc.v2(122,120)],function(){w.default.getInstance().updateDirection(u.ENpcID.Npc_10004,u.RoleDirection.right_down)})}),w.default.getInstance().show(u.ENpcID.XiaoQiang,!0,function(){w.default.getInstance().moveToPath(u.ENpcID.XiaoQiang,[u.GuidePoint.YardDoor,cc.v2(123,121)],function(){f.nextStep(t,e)})}),w.default.getInstance().show(u.ENpcID.Kuanggong,!0,function(){w.default.getInstance().moveToPath(u.ENpcID.Kuanggong,[u.GuidePoint.YardDoor,cc.v2(124,121)],function(){})}),w.default.getInstance().show(u.ENpcID.WangShen,!0,function(){w.default.getInstance().setTo(u.ENpcID.WangShen,u.GuidePoint.YardDoor),w.default.getInstance().moveToPath(u.ENpcID.WangShen,[u.GuidePoint.YarDoor_Inside,u.GuidePoint.MainHouseDoor_Wangshen_2],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_down),v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni()})}),w.default.getInstance().show(u.ENpcID.Goudan,!0,function(){w.default.getInstance().setTo(u.ENpcID.Goudan,u.GuidePoint.YardDoor),w.default.getInstance().moveToPath(u.ENpcID.Goudan,[u.GuidePoint.YarDoor_Inside,u.GuidePoint.MainHouseDoor_Goudan],function(){})})):3==e||(4==e?(w.default.getInstance().moveByLine(u.ENpcID.Kuanggong,[cc.v2(123,112),cc.v2(126,112)],function(t){n&&t.sitDownOnFoodChair(n,0)}),w.default.getInstance().moveByLine(u.ENpcID.XiaoQiang,[cc.v2(123,112),cc.v2(126,112)],function(t){n&&t.sitDownOnFoodChair(n,1)}),w.default.getInstance().moveByLine(u.ENpcID.WangShen,[cc.v2(123,112),cc.v2(126,112)],function(t){n&&t.sitDownOnFoodChair(n,2)}),w.default.getInstance().moveByLine(u.ENpcID.Goudan,[cc.v2(123,112),cc.v2(126,112)],function(t){n&&t.sitDownOnFoodChair(n,3)}),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[cc.v2(123,112),cc.v2(126,112)],function(t){i&&t.sitDownOnFoodChair(i,0)}),w.default.getInstance().moveByLine(u.ENpcID.Npc_10004,[cc.v2(123,112),cc.v2(126,112)],function(t){i&&t.sitDownOnFoodChair(i,1)}),v.default.getInstance().roleMove(cc.v2(121,113),function(){v.default.getInstance().putFood(cc.v2(126,112),function(){n.showFood(0,31001),n.showFood(1,31002),n.showFood(2,31003),n.showFood(3,31004),i.showFood(0,31005),i.showFood(1,31006),i.showFood(2,31001),i.mainRoleSitdown(2,function(){h.default.getInstance().moveToGrid(cc.v2(127,112)),f.nextStep(t,e)})})})):6==e?(w.default.getInstance().tryToGetView(u.ENpcID.WangShen,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Goudan,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.XiaoQiang,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Kuanggong,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Grandma,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Npc_10004,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),v.default.getInstance().playAniByType(u.EnumRoleAniType.sitdown_eat,1,function(){})):7==e&&(n.npcLeave(),i.npcLeave(),w.default.getInstance().moveByLine(u.ENpcID.WangShen,[cc.v2(123,112),cc.v2(124,122),u.GuidePoint.YardDoor],function(){w.default.getInstance().hide(u.ENpcID.WangShen)}),w.default.getInstance().moveByLine(u.ENpcID.Goudan,[cc.v2(123,112),cc.v2(123,122),cc.v2(u.GuidePoint.YardDoor.x-1,u.GuidePoint.YardDoor.y)],function(){w.default.getInstance().setTo(u.ENpcID.Goudan,cc.v2(256,712)),w.default.getInstance().hide(u.ENpcID.Goudan)}),w.default.getInstance().moveByLine(u.ENpcID.XiaoQiang,[cc.v2(123,112),cc.v2(123,120),cc.v2(u.GuidePoint.YardDoor.x,u.GuidePoint.YardDoor.y),u.CreatePoint[u.ENpcID.XiaoQiang]],function(){w.default.getInstance().hide(u.ENpcID.XiaoQiang)}),w.default.getInstance().moveByLine(u.ENpcID.Kuanggong,[cc.v2(123,112),cc.v2(124,120),cc.v2(u.GuidePoint.YardDoor.x+1,u.GuidePoint.YardDoor.y),u.CreatePoint[u.ENpcID.Kuanggong]],function(){w.default.getInstance().hide(u.ENpcID.Kuanggong)}),w.default.getInstance().moveToPath(u.ENpcID.Grandma,[u.GuidePoint.GrandmaSofa_],function(t){_.default.findDataByObjectID(u.SpecialObjectID.sofa).loadObject(function(e){e=e.getComponent(I.default),t.sitdownOnChair(e)})}),w.default.getInstance().moveByLine(u.ENpcID.Npc_10004,[u.GuidePoint.MainHouseDoor_Grandma_],function(){}),v.default.getInstance().reset(),v.default.getInstance().flyTo(cc.v2(126,112)),h.default.getInstance().moveToGrid(u.GuidePoint.MainHouseDoor_MainRole_,function(){}),v.default.getInstance().roleMove(u.GuidePoint.MainHouseDoor_MainRole_,function(){f.nextStep(t,e)})))):100025==t?(d.gm.ui.showTopBlock(!1),1==e?(w.default.getInstance().moveByLine(u.ENpcID.XiaoQiang,[u.GuidePoint.YardDoor,u.GuidePoint.MainHouseDoor_Grandma_,l.default.converToNewGrid(cc.v2(1013,905))],function(t){_.default.getUnlockFoodTable()[0].loadObject(function(e){(e=e.getComponent(D.default))&&t.sitDownOnFoodChair(e,0)})}),this.nextStep(t,e)):2==e&&this.nextStep(t,e)):100026==t?1==e?(d.gm.ui.showTopBlock(!1),w.default.getInstance().moveByLine(u.ENpcID.Kuanggong,[u.GuidePoint.RoadMiddle_,u.GuidePoint.YardDoor,u.GuidePoint.MainHouseDoor_Grandma_,l.default.converToNewGrid(cc.v2(1012,903))],function(t){_.default.getUnlockFoodTable()[0].loadObject(function(e){(e=e.getComponent(D.default))&&t.sitDownOnFoodChair(e,1)})}),this.nextStep(t,e)):2==e?(d.gm.ui.showTopBlock(!1),w.default.getInstance().show(u.ENpcID.Npc_10004,!0,function(){w.default.getInstance().moveByLine(u.ENpcID.Npc_10004,[l.default.converToNewGrid(cc.v2(994,1038))],function(){f.nextStep(t,e)})})):3==e&&(d.gm.ui.showTopBlock(!1),this.nextStep(t,e)):100027==t?((a=_.default.getUnlockFoodTable())[0].loadObject(function(t){r=t.getComponent(D.default)}),a[1].loadObject(function(t){c=t.getComponent(D.default)}),1==e?(w.default.getInstance().moveByLine(u.ENpcID.Npc_10004,[u.GuidePoint.YarDoor_Inside,l.default.converToNewGrid(cc.v2(981,968))],function(){w.default.getInstance().updateDirection(u.ENpcID.Npc_10004,u.RoleDirection.right_down)}),v.default.getInstance().roleMove(l.default.converToNewGrid(cc.v2(981,955)),function(){v.default.getInstance().updateDirectionByType(u.RoleDirection.right_down),v.default.getInstance().setStandByAni()}),w.default.getInstance().moveByLine(u.ENpcID.Grandma,[l.default.converToNewGrid(cc.v2(997,955))],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_up)}),h.default.getInstance().moveToGrid(l.default.converToNewGrid(cc.v2(981,955)),function(){f.nextStep(t,e)})):2==e?this.nextStep(t,e):4==e?(v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni(),v.default.getInstance().shoutAction(function(){f.nextStep(t,e)})):5==e?(w.default.getInstance().show(u.ENpcID.WangShen,!0,function(){w.default.getInstance().setTo(u.ENpcID.WangShen,u.GuidePoint.YardDoor),w.default.getInstance().moveToPath(u.ENpcID.WangShen,[u.GuidePoint.YarDoor_Inside,u.GuidePoint.MainHouseDoor_Wangshen_2],function(){w.default.getInstance().updateDirection(u.ENpcID.Grandma,u.RoleDirection.left_down),v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni(),f.nextStep(t,e)})}),w.default.getInstance().show(u.ENpcID.Goudan,!0,function(){w.default.getInstance().setTo(u.ENpcID.Goudan,u.GuidePoint.YardDoor),w.default.getInstance().moveToPath(u.ENpcID.Goudan,[u.GuidePoint.YarDoor_Inside,u.GuidePoint.MainHouseDoor_Goudan],function(){})})):7==e?(w.default.getInstance().moveToPath(u.ENpcID.WangShen,[cc.v2(123,112),cc.v2(126,112)],function(t){r&&t.sitDownOnFoodChair(r,2)}),w.default.getInstance().moveToPath(u.ENpcID.Goudan,[cc.v2(123,112),cc.v2(126,112)],function(t){r&&t.sitDownOnFoodChair(r,3)}),w.default.getInstance().moveToPath(u.ENpcID.Grandma,[cc.v2(123,112),cc.v2(126,112)],function(t){c&&t.sitDownOnFoodChair(c,0)}),w.default.getInstance().moveToPath(u.ENpcID.Npc_10004,[cc.v2(123,112),cc.v2(126,112)],function(t){c&&t.sitDownOnFoodChair(c,1)}),v.default.getInstance().roleMove(cc.v2(121,113),function(){v.default.getInstance().putFood(cc.v2(126,112),function(){r.showFood(0,31001),r.showFood(1,31002),r.showFood(2,31003),r.showFood(3,31004),c.showFood(0,31005),c.showFood(1,31006),c.showFood(2,31001),c.mainRoleSitdown(2,function(){h.default.getInstance().moveToGrid(cc.v2(127,112)),f.nextStep(t,e)})})})):9==e?(w.default.getInstance().tryToGetView(u.ENpcID.WangShen,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Goudan,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.XiaoQiang,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Kuanggong,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Grandma,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),w.default.getInstance().tryToGetView(u.ENpcID.Npc_10004,function(t){t.getComponent(O.default).playAniByType(u.EnumRoleAniType.sitdown_eat,1)}),v.default.getInstance().playAniByType(u.EnumRoleAniType.sitdown_eat,1,function(){})):10==e&&(r.npcLeave(),c.npcLeave(),w.default.getInstance().moveToPath(u.ENpcID.WangShen,[cc.v2(123,112),cc.v2(123,120),u.GuidePoint.YardDoor],function(){w.default.getInstance().hide(u.ENpcID.WangShen)}),w.default.getInstance().moveToPath(u.ENpcID.Goudan,[cc.v2(123,112),cc.v2(123,120),u.GuidePoint.YardDoor],function(){w.default.getInstance().hide(u.ENpcID.Goudan)}),w.default.getInstance().moveToPath(u.ENpcID.XiaoQiang,[cc.v2(123,112),cc.v2(123,120),u.GuidePoint.YardDoor],function(){w.default.getInstance().hide(u.ENpcID.XiaoQiang)}),w.default.getInstance().moveToPath(u.ENpcID.Kuanggong,[cc.v2(123,112),cc.v2(123,120),u.GuidePoint.YardDoor],function(){w.default.getInstance().hide(u.ENpcID.Kuanggong)}),w.default.getInstance().moveToPath(u.ENpcID.Grandma,[u.GuidePoint.GrandmaSofa_],function(t){_.default.findDataByObjectID(u.SpecialObjectID.sofa).loadObject(function(e){e=e.getComponent(I.default),t.sitdownOnChair(e)})}),w.default.getInstance().moveToPath(u.ENpcID.Npc_10004,[u.GuidePoint.MainHouseDoor_Grandma_],function(){}),v.default.getInstance().reset(),v.default.getInstance().flyTo(l.default.converToNewGrid(cc.v2(1012,906))),h.default.getInstance().moveToGrid(u.GuidePoint.MainHouseDoor_MainRole_,function(){}),v.default.getInstance().roleMove(u.GuidePoint.MainHouseDoor_MainRole_,function(){f.nextStep(t,e)}))):100028==t?1==e?(h.default.getInstance().moveToGrid(u.GuidePoint.ToolRoom_Wangshen_),w.default.getInstance().moveTo(u.ENpcID.Npc_10004,u.GuidePoint.ToolRoom_Wangshen_,function(t){w.default.getInstance().updateDirection(u.ENpcID.Npc_10004,u.RoleDirection.left_down),t.getComponent(O.default).playMake(function(){})}),v.default.getInstance().roleMove(u.GuidePoint.ToolRoom_MainRole_,function(){v.default.getInstance().updateDirectionByType(u.RoleDirection.left_down),v.default.getInstance().setStandByAni(),f.nextStep(t,e)})):5==e&&(d.gm.ui.showTopBlock(!1),w.default.getInstance().moveToPath(u.ENpcID.Npc_10004,[u.GuidePoint.YardDoor,u.GuidePoint.RoadMiddle_],function(){w.default.getInstance().hide(u.ENpcID.Npc_10004)}),this.nextStep(t,e)):100018==t?0==e&&w.default.getInstance().setTo(u.ENpcID.Goudan,l.default.converToNewGrid(cc.v2(256,712))):100020==t?0!=e&&2!=e||this.nextStep(t,e):100021==t?1==e&&(w.default.getInstance().hide(u.ENpcID.Goudan),w.default.getInstance().hide(u.ENpcID.WangShen)):100016==t?0!=e&&2!=e||this.nextStep(t,e):100031==t?0==e&&w.default.getInstance().show(u.ENpcID.Grandma,!0,function(){w.default.getInstance().moveToPath(u.ENpcID.Grandma,[cc.v2(124,109)],function(){f.nextStep(t,e)})}):100017==t?0==e?(s=_.default.findDataByObjectID(u.SpecialObjectID.rocking_chair)).loadObject(function(){var o=_.default.getOutsideEmptyGrid(s.getWorldGrid(),2);o[0]&&(w.default.getInstance().setTo(u.ENpcID.Grandma,o[0]),w.default.getInstance().moveTo(u.ENpcID.Grandma,s.getOutsideGrid()[0],function(){f.nextStep(t,e)}))}):2==e&&(v.default.getInstance().mainRole.inChair&&v.default.getInstance().mainRole.goOutChair(),(p=_.default.findDataByObjectID(u.SpecialObjectID.rocking_chair)).loadObject(function(o){w.default.getInstance().tryToGetView(u.ENpcID.Grandma,function(n){n.sitdownOnRockingChair(o.getComponent(C.default)),f.nextStep(t,e)})})):100032==t&&0==e&&((p=_.default.findDataByObjectID(u.SpecialObjectID.rocking_chair))?p.loadObject(function(o){w.default.getInstance().tryToGetView(u.ENpcID.Grandma,function(n){n.goOutRockingChair(o.getComponent(C.default)),n=n.getGrid(),w.default.getInstance().setTo(u.ENpcID.WangShen,cc.v2(n.x+1,n.y)),f.nextStep(t,e)})}):(cc.error("not found chair"),this.nextStep(t,e)))},U.prototype.addLastGuiding=function(t){d.gm.localData.endGuidings.includes(t)||(d.gm.localData.endGuidings.push(t),d.gm.localData.saveByKey("endGuidings"))},r=U,a.default=r,cc._RF.pop()},{}],Guide_1002:[function(t,e,o){"use strict";cc._RF.push(e,"39a68f184VMCLWL6+swCS70","Guide_1002");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameMgr"),p=a("MapDataHelper"),u=a("MapHelper"),d=a("GameModule");function h(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_mask=null,t.finger=null,t}a=(n=cc._decorator).ccclass,n.property,c(h,s=d.default),h.prototype.onEnable=function(){this.nod_mask=this.node.getChildByName("nod_mask"),this.nod_mask.setContentSize(cc.size(0,0)),this.finger=this.node.getChildByName("finger"),this.finger.active=!1,this.startGuide()},h.prototype.onDisable=function(){u.default.setMapMove()},h.prototype.startGuide=function(){l.gm.mapData.guidingID=1002,u.default.setMapNoMove(),this.step_1()},h.prototype.step_1=function(){},h.prototype.onTouchNodTask=function(){},h.prototype.onMoveEnd=function(){var t,e=p.default.getMapObjectByID(10208);e&&(e=(t=e.node.getChildByName("nod_guide")).convertToWorldSpaceAR(cc.v2(0,0)),t=t.getContentSize(),e=this.node.convertToNodeSpaceAR(e),this.nod_mask.x=e.x,this.nod_mask.y=e.y,this.nod_mask.setContentSize(t),this.finger.x=e.x,this.finger.y=e.y,this.finger.active=!0)},h.prototype.onTouchDecoration_1=function(){var t=(e=p.default.getMapObjectByID(10209).node.getChildByName("nod_guide")).convertToWorldSpaceAR(cc.v2(0,0)),e=e.getContentSize();t=this.node.convertToNodeSpaceAR(t),this.nod_mask.x=t.x,this.nod_mask.y=t.y,this.nod_mask.setContentSize(e),this.finger.x=t.x,this.finger.y=t.y,this.finger.active=!0},h.prototype.onTouchDecoration_2=function(){this.onGuideEnd()},h.prototype.onGuideEnd=function(){u.default.setMapMove(),l.gm.mapData.guidingID=0,this.closeMe()},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],h),r.default=a,cc._RF.pop()},{}],Guide:[function(t,e,o){"use strict";cc._RF.push(e,"d9fc9zSiJ5O04/sMLb9Pu4F","Guide");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("JumpMgr"),_=i("MapHelper"),f=i("HollowOut"),g=i("GameModule"),y=i("NetUtils"),m=i("GetAwardUI"),v=i("MainRoleMgr"),b=i("MainHouse"),I=i("NpcAni"),D=i("NpcMgr");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.hollowOut=null,t.nod_mask=null,t.finger=null,t.nod_mask_bg=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=g.default),C.prototype.onEnable=function(){var t,e;0==Object.values(d.gm.localData.collect_decoration_datas).length&&(t={x:0,y:0,objectID:u.SpecialObjectID.trunk},e=p.default.createNewUID(),d.gm.localData.collect_decoration_datas[e]=t,d.gm.localData.saveByKey("collect_decoration_datas")),this.nod_mask=this.node.getChildByName("nod_mask"),this.nod_mask.setContentSize(cc.size(0,0)),this.hollowOut.setNodeSize(),this.nod_mask_bg=this.nod_mask.getChildByName("nod_mask_bg"),this.finger=this.node.getChildByName("finger"),this.finger.active=!1,v.default.getInstance().updateDirectionByType(u.RoleDirection.right_up),v.default.getInstance().setStandByAni(u.EnumRoleAniType.standby_box),v.default.getInstance().setWalkType(u.EnumRoleAniType.walk_box),this.startGuide()},C.prototype.onDisable=function(){_.default.setMapMove()},C.prototype.startGuide=function(){var t=this;d.gm.mapData.guidingID=1001,_.default.setMapNoMove(),D.default.getInstance().tryToGetView(u.ENpcID.Grandma,function(e){e.show(!0),t.onCreated()})},C.prototype.onCreated=function(){var t=this;this.nod_mask_bg.opacity=0,this.nod_mask.active=!1,d.gm.ui.showModule(d.gm.const.DialogUI,function(e){e.setData(125,function(){t.nod_mask.active=!0;var e=cc.v2(1003,925);v.default.getInstance().roleMove(p.default.converToNewGrid(e),t.onMoveEnd.bind(t)),h.default.getInstance().jumpToGrid(p.default.converToNewGrid(e)),d.gm.mapData.mainHouse.getComponent(b.default).open(),D.default.getInstance().moveByLine(u.ENpcID.Grandma,[p.default.converToNewGrid(cc.v2(990,912))],function(t){t.getComponent(I.default).updateDirectionByType(u.RoleDirection.right_down),t.getComponent(I.default).setStandByAni()},!1)})})},C.prototype.onMoveEnd=function(){var t=this;this.nod_mask_bg.opacity=100;var e=[{file:u.ThingType.mapObject,id:u.SpecialObjectID.trunk,num:1}];d.gm.ui.showModule(d.gm.const.GetAwardUI,function(o){o.setVideo(!1),o.setData(e,m.GetAwardType.open),o.flyEndCb=function(){d.gm.ui.showModule(d.gm.const.BlockGuide,function(n){n.setTargetNode(o.nod_get),n.setTouchCb(function(){y.ReportData.instance.report_point(100005,41000025),t.showDecorateHole(),p.default.fly(o.node,e),o.closeMe(),n.closeMe()})})}})},C.prototype.showDecorateHole=function(){var t=p.default.getBaseUI().nod_decorate;this.setHole(t)},C.prototype.onTouchDecoration=function(){var t=this;this.scheduleOnce(function(){var e=d.gm.ui.get_module(d.gm.const.DecorateUI).scr.content.children[0];t.setHole(e)},0)},C.prototype.onTouchItem=function(){var t=this;this.scheduleOnce(function(){var e=d.gm.ui.get_module(d.gm.const.DecoratePut).nod_confirm;t.setHole(e)},0)},C.prototype.onGuideEnd=function(){_.default.setMapMove(),d.gm.mapData.guidingID=0,v.default.getInstance().setWalkType(u.EnumRoleAniType.walk),d.gm.localData.setLastGuide(1,1),d.gm.localData.guide=!0,d.gm.localData.saveByKey("guide"),d.gm.localData.saveNpcData(),v.default.getInstance().roleMove(p.default.converToNewGrid(cc.v2(1003,912)),function(){h.default.getInstance().moveToMainRole(),v.default.getInstance().updateDirectionByType(u.RoleDirection.left_up),v.default.getInstance().setStandByAni()}),this.closeMe()},C.prototype.setHole=function(t){this.nod_mask.active=!0;var e=t.convertToWorldSpaceAR(cc.v2(0,0));t=t.getContentSize(),e=this.node.convertToNodeSpaceAR(e),this.nod_mask.x=e.x,this.nod_mask.y=e.y,this.nod_mask.setContentSize(t),t=Math.max(t.height,t.width)/1.5,this.hollowOut.setNodeSize(),this.hollowOut.circleTo(.5,e,t,t/3),this.finger.x=e.x,this.finger.y=e.y,this.finger.active=!0},s([a(f.default)],C.prototype,"hollowOut",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],HWGame:[function(t,e,o){"use strict";cc._RF.push(e,"dc936Ak6Q5PqIkWpK3ZjDHl","HWGame");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.HWGame=void 0;var r,c=i("GameMgr"),s=i("ChannelManager"),l=i("Utils"),p=i("NetUtils"),u=i("Const");function d(){this._videoAd=null,this.rewardVideoStat=!1,this._SHOW_SHARE_TITLE=["\u95ef\u8fc710\u5173\u5c31\u662f\u5929\u624d\uff0c\u95ef\u8fc720\u5173\u5c31\u662f\u795e\u7ecf\u75c5","\u8fd9\u624d\u662f\u771f\u6b63\u7684\u6700\u5f3a\u5927\u8111\uff0c\u8bb0\u5fc6\u529b\u8d85\u5f3a"],this._share_config_url="https://leduo.zqygame.com/res/leduo/panda_hw/share.json",this._chmhtxd_share_config_url="https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/06_hw/share.json",this._videoid=["h5jmznqmkr"],this._bannerCustomId=["d27q1xcgc0"],this._insterCustomId=["v3zw1svf2i"],this.interstitialAd_is_show=1,this._bannerCustomAd=null,this._insertCustomAd=null,this.task_cp=0,this.map_cp=3e3,this.bannerCustomShowState=!1,this.insterCustomShowState=!1,this.bannerCustomLoadState=!0,this.insterCustomLoadState=!0,this.qq_number=0,this.is_weak_guide=0,this.is_bdd=0,this.edtion="",this.data_code_is_show=!1,this.qq_code_copy=!0,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.is_show_active_btn=!0,this._interid=[],this._interstitialAd=null,this.videoAdPlayIsError=!1,this._bannerAd=null,this._bannerid=["j1pcnpx5tu"],this._is_show_banner_ad=!1,this.adItemData={},this.adItemData1={}}i=(n=cc._decorator).ccclass,n.property,r=d,Object.defineProperty(d,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),d.prototype.load_sub_packages_env=function(t){return t(),!0},d.prototype.load_channel_env=function(t){var e=this;return function o(){qg.gameLoginWithReal({forceLogin:1,appid:"105946019",success:function(o){console.log("game login: success:",JSON.stringify(o)),e.load_share_config(),e.create_video_ad(),e.initAd_banner(),e.initAd_Inster(),t(o.playerId)},fail:function(t,e){console.log("on gameLogin fail: "+t+","+e),qg.showModal({title:"\u767b\u5f55",content:"\u8bf7\u5148\u767b\u5f55\u534e\u4e3a\u5e10\u53f7\uff01",showCancel:!0,cancelText:"\u9000\u51fa",confirmText:"\u767b\u5f55",success:function(t){t.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u767b\u5f55"),o()):t.cancel&&(console.log("\u7528\u6237\u70b9\u51fb\u9000\u51fa"),qg.exitApplication({}))}})},complete:function(){console.log("on gameLogin: complete")}})}(),!0},d.prototype.userlogin=function(t){qg.gameLoginWithReal({forceLogin:1,appid:"105946019",success:function(e){console.log("game login: success:",JSON.stringify(e)),t(e.data.token)},fail:function(t,e){console.log("on gameLogin fail: "+t+","+e)},complete:function(){console.log("on gameLogin: complete")}}),this.create_video_ad()},d.prototype.get_app_name=function(){return window.hbs&&window.hbs.getSystemInfoSync?window.hbs.getSystemInfoSync().platform:s.ChannelManager.UNKNOWN},d.prototype.load_share_config=function(){var t=this,e=(c.gm.const.IS_GAME_XMCT?t._share_config_url:t._chmhtxd_share_config_url)+"?"+Date.now();console.log("_share_config_url:",e),l.Utils.server_http_request(function(e){e&&("qq_number"in e&&(t.qq_number=e.qq_number,console.log("qq_number"+t.qq_number)),"is_weak_guide"in e&&(t.is_weak_guide=e.is_weak_guide,console.log("is_weak_guide"+t.is_weak_guide)),"is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp),"qq_code_copy"in e&&(t.qq_code_copy=e.qq_code_copy),"prase_percent_and"in e&&(t.prase_percent_and=e.prase_percent_and),"prase_percent_ios"in e&&(t.prase_percent_ios=e.prase_percent_ios),"is_show_nick_name"in e&&(t.is_show_nick_name=e.is_show_nick_name),"is_show_set_ui_update"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update),"is_show_active_btn"in e&&(t.is_show_active_btn=e.is_show_active_btn),"data_code_is_show"in e&&(t.data_code_is_show=e.data_code_is_show),"interstitialAd_is_show"in e&&(t.interstitialAd_is_show=e.interstitialAd_is_show,console.log("self.interstitialAd_is_show:",t.interstitialAd_is_show)),console.log("map_cp:  "+t.map_cp),"edtion"in e&&(t.edtion=e.edtion,t.edtion==c.gm.const.VERSION_NUMBER?("is_bdd1"in e&&(t.is_bdd=e.is_bdd1),"task_cp1"in e&&(t.task_cp=e.task_cp1),"map_cp1"in e&&(t.map_cp=e.map_cp1),"is_show_active_btn1"in e&&(t.is_show_active_btn=e.is_show_active_btn1),"qq_code_copy1"in e&&(t.qq_code_copy=e.qq_code_copy1),"is_show_nick_name1"in e&&(t.is_show_nick_name=e.is_show_nick_name1),"is_show_set_ui_update1"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update)):("is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp))))},this,e)},d.prototype.get_qq_number=function(){return this.qq_number},d.prototype.get_is_weak_guide=function(){return this.is_weak_guide},d.prototype.get_is_bdd=function(){return!0},d.prototype.get_url=function(){return c.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},d.prototype.get_task_cp=function(){return this.task_cp},d.prototype.get_map_cp=function(){return this.map_cp},d.prototype.get_edtion=function(){return this.edtion},d.prototype.get_data_code_is_show=function(){return this.data_code_is_show},d.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},d.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},d.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},d.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},d.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},d.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},d.prototype.vibrate_short=function(){qg.vibrateShort&&qg.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},d.prototype.vibrate_long=function(){qg.vibrateLong&&qg.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},Object.defineProperty(d.prototype,"is_support_more_game",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_support_interstitial_ad",{get:function(){return qg.createInterstitialAd?(console.log("is_support_interstitial_ad  createInterstitialAd: true"),!0):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_share",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.createInterstitialAd=function(){if(0!=this.interstitialAd_is_show)if(console.log("createInterstitialAd"),""!=this._interid[0]){if(qg.createInterstitialAd&&(this._interstitialAd=qg.createInterstitialAd({adUnitId:this._interid[0]})),!this._interstitialAd)return!1;this._interstitialAd.onError(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u9519\u8bef\uff1a",t)})}else console.log("this._interid is null")},d.prototype.show_interstitial_ad=function(){return null!=qg.createInterstitialAd&&!!this._interstitialAd&&(this._interstitialAd.show(),!0)},d.prototype.create_video_ad=function(){if(console.log("HuaWei- createVideoAD!...."),!(qg.getSystemInfoSync().platformVersion<"1078")){var t=this;if(this._videoAd=qg.createRewardedVideoAd({adUnitId:t._videoid[0]}),!this._videoAd)return!1;this._videoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),t.rewardVideoStat=!0,t.videoAdPlayIsError&&(t.videoAdPlayIsError=!1,t.rewardVideoStat=!1,t._videoAd.show())}),this._videoAd.onError(function(e){1004==e.code||qg.showToast({title:"\u5e7f\u544a\u64ad\u653e\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5!"}),console.log("\u89c6\u9891\u5e7f\u544a\u9519\u8bef\uff1a",JSON.stringify(e)),t.videoOpenisFail()}),this._videoAd.load(),this._videoAd.onClose(function(e){e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1"),GameSdk.BI.evtAppointDataReport(3002),t.videoPlayisSucc(),t._videoCb.apply(t._videoCbTarget)):(console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u53d6\u6d88\u5173\u95ed\uff0c\u4e0d\u53d1\u653e\u5956\u52b1"),t.videoPlayisFail()),t.rewardVideoStat=!1,t._videoAd.load()})}},d.prototype.show_video_ad=function(t,e){GameSdk.BI.evtAppointDataReport(3001),c.gm.data.video_state=1,this._music_mute=c.gm.audio.music_mute,this._effect_mute=c.gm.audio.effect_mute,this._videoCb=t,this._videoCbTarget=e,c.gm.audio.set_music(!0),c.gm.audio.set_effect_mute(!0),c.gm.data.start_data.today_video_laqi_count++,c.gm.data.start_data.total_video_laqi_count++,console.log("\u663e\u793a\u89c6\u9891\u5e7f\u544a\uff01\u3002\u3002\u3002"),this._videoCb=t,this._videoCbTarget=e,this._videoAd?this.rewardVideoStat?(this._videoAd.show(),this.rewardVideoStat=!1):(this.videoAdPlayIsError=!0,this._videoAd.load()):(this.create_video_ad(),console.log("\u89c6\u9891\u5e7f\u544a\u4e0d\u5b58\u5728\uff01\u3002\u3002\u3002"))},d.prototype.videoPlayisSucc=function(){console.log("show video on_video_ad_handler  successCb onClose"),TaskManager.instance.checkTask(u.TaskConditionTypeEnum.TASK_CONDITION_TYPE_VIDEO,[0],1),c.gm.data.start_data.today_video_count++,c.gm.data.start_data.total_video_count++;for(var t=0;t<c.gm.const.VIDEO_REPORT_COUNT_PER_DAY.length;++t)if(c.gm.data.start_data.today_video_count==c.gm.const.VIDEO_REPORT_COUNT_PER_DAY[t]){p.ReportData.instance.ui_report(u.VideoReportTypeEnum.VIDEO_REPORT_TYPE_VIDEO+t,c.gm.data.start_data.today_video_count);break}c.gm.data.start_data.async_write_data(),p.ReportData.instance.report_point(19),c.gm.data.video_state=0,c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute)},d.prototype.videoPlayisFail=function(){console.log("show video on_video_ad_handler  failCb onClose"),c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute),c.gm.data.video_state=0,c.gm.ui.emit("cancel_watch_ad")},d.prototype.videoOpenisFail=function(){console.log("show video on_video_ad_handler  errorCb onClose"),c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute),c.gm.data.video_state=0,p.ReportData.instance.report_point(u.VideoReportTypeEnum.VIDEO_REPORT_TYPE_FAIL_VIDEO),c.gm.ui.emit("cancel_watch_ad")},d.prototype.create_banner_ad=function(){var t,e,o;console.log("createBannerAd"),""!=this._bannerid[0]?(t=qg.getSystemInfoSync(),console.log("on getSystemInfoSync: success ="+JSON.stringify(t)),t=t.safeArea.height,e=this,(o=qg.createBannerAd({adUnitId:"j1pcnpx5tu",style:{top:t-57,left:0,height:57,width:360},adIntervals:32})).onError(function(t){console.log("banner err:"),console.log(JSON.stringify(t))}),o.onLoad(function(){cc.log("_bannerAd onLoad"),console.log("banner ad id:"+e._bannerid[0]+" onLoad")}),setTimeout(function(){o.show()},1e3),this._bannerAd=o):console.log("this._bannerid is null")},d.prototype.clipBoard=function(t,e){qg.setClipboardData({data:t,success:function(){e()}})},d.prototype.analyzeUrlPram=function(){return!0},d.prototype.loginVerify=function(){return!0},d.prototype.getIsShare=function(){return!1},d.prototype.shareReq=function(){return!0},d.prototype.loginReport=function(){},d.prototype.getChannelName=function(){return"haiwei"},d.prototype.captureScreenshot=function(){},d.prototype.initAd_banner=function(){console.log("initAd_banner bool:");var t=this;l.Utils.async_get_bundle(u.BundleName.COMMON,function(e){e.load("prefabs/sdk_prefabs/nativeBanner/nativeBanner",cc.Prefab,function(){},function(e,o){var n=cc.instantiate(o);r.AD_Nodebanner=new cc.Node("AD_Nodebanner"),r.AD_Nodebanner.addChild(n),r.AD_Nodebanner.zIndex=19999,r.AD_Nodebanner.setParent(c.gm.ui.get_layer_node(LayerType.TOP)),(o=r.AD_Nodebanner.addComponent(cc.Widget)).alignMode=cc.Widget.AlignMode.ALWAYS,o.isAlignBottom=!0,o.bottom=n.height/2,o.isAlignLeft=!0,o.isAlignRight=!0,o.left=0,o.right=0,o.updateAlignment(),r.AD_Nodebanner.active=!1,t.createBannerCustom()})})},d.prototype.show_banner_ad=function(){this._bannerCustomAd?console.log("show_banner_ad _bannerCustomAd"):(console.log("show_banner_ad !   _bannerCustomAd"),this.createBannerCustom()),this.showBannerCustom()},d.prototype.hide_banner_ad=function(){console.log("hide_banner_ad"),this.hideBannerCustom()},d.prototype.createBannerCustom=function(){var t=this;console.log("createBannerCustom");var e=this;this._bannerCustomAd=qg.createNativeAd({adUnitId:e._bannerCustomId[0],success:function(){console.log("loadNativeAd bannerNative : success")},fail:function(t,e){console.log("loadNativeAd bannerNative fail: "+t+","+e)},complete:function(){console.log("loadNativeAd bannerNative : complete")}}),this._bannerCustomAd.onLoad(function(o){t.bannerCustomLoadState=!1,console.info("ad data loaded: "+JSON.stringify(o)),e.adItemData=o.adList[0],r.AD_Nodebanner.getChildByName("nativeBanner").getComponent("NativeBannerBind").setMyAppAdData(e.adItemData),r.AD_Nodebanner.getChildByName("nativeBanner").getComponent("NativeBannerBind").isLoadAd()&&t.bannerCustomShowState&&(r.AD_Nodebanner.active=!0,console.log("bannerNative customAd\u5e7f\u544a\u663e\u793a1111111"),e.bannerNativeShow())}),this._bannerCustomAd.onError(function(t){console.error("load ad error:"+JSON.stringify(t)),t.errCode,t.errMsg})},d.prototype.bannerNativeShow=function(){console.log("bannerNative customAd\u5e7f\u544a\u663e\u793a"),this._bannerCustomAd.reportAdShow({adId:this.adItemData.adId}),this.bannerCustomLoadState=!0,r.AD_Nodebanner.getChildByName("nativeBanner").getComponent("NativeBannerBind").setIsLoadAdFalse()},d.prototype.bannerNativeClick=function(){this._bannerCustomAd.reportAdClick({adId:this.adItemData.adId})},d.prototype.bannerDownBtnClick=function(){var t;2==this.adItemData.interactionType&&(t=this._bannerCustomAd.startDownload({adId:this.adItemData.adId}),console.log("startDownloadresultCode = "+["\u7531\u4e8e\u65e0\u4e0b\u8f7d\u6743\u9650\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u5931\u8d25\u3002","\u7531\u4e8e\u53c2\u6570\u9519\u8bef\u5bfc\u81f4\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u5931\u8d25\uff0c\u5982\u7d20\u6750\u4e3a\u975e\u5e94\u7528\u4e0b\u8f7d\u7c7b\u5e7f\u544a\u3002","\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u65b9\u6cd5\u6210\u529f\u3002"][t+2])),this.bannerNativeClick()},d.prototype.showBannerCustom=function(){console.log("show showBannerCustom"),this.bannerCustomShowState=!0,r.AD_Nodebanner.getChildByName("nativeBanner").getComponent("NativeBannerBind").isLoadAd()?(r.AD_Nodebanner.active=!0,this.bannerNativeShow()):this.bannerCustomLoadState&&this._bannerCustomAd.load()},d.prototype.hideBannerCustom=function(){this.bannerCustomShowState=!1,r.AD_Nodebanner.active&&(r.AD_Nodebanner.active=!1)},d.prototype.initAd_Inster=function(){var t;console.log("initAd_Inster init!"),0!=this.interstitialAd_is_show&&(t=this,l.Utils.async_get_bundle(u.BundleName.COMMON,function(e){e.load("prefabs/sdk_prefabs/nativeInsertAd/nativeInsertAd",cc.Prefab,function(){},function(e,o){o=cc.instantiate(o),r.AD_NodeInsert=new cc.Node("AD_NodeInsert"),r.AD_NodeInsert.addChild(o),r.AD_NodeInsert.zIndex=19999,r.AD_NodeInsert.setParent(c.gm.ui.get_layer_node(LayerType.TOP)),r.AD_NodeInsert.active=!1,t.createInsertCustom()})}))},d.prototype.createInsertCustom=function(){var t,e=this;console.log("createInsertCustom"),0!=this.interstitialAd_is_show&&((t=this)._insertCustomAd=qg.createNativeAd({adUnitId:t._insterCustomId[0],success:function(){console.log("loadNativeAd InsertCustom : success")},fail:function(t,e){console.log("loadNativeAd InsertCustom fail: "+t+","+e)},complete:function(){console.log("loadNativeAd InsertCustom : complete")}}),this._insertCustomAd.onLoad(function(o){console.info("createInsertCustom data loaded: "+JSON.stringify(o)),e.insterCustomLoadState=!1,t.adItemData1=o.adList[0],r.AD_NodeInsert.getChildByName("nativeInsertAd").getComponent("NativeInsertAdBind").setMyAppAdData(t.adItemData1),r.AD_NodeInsert.getChildByName("nativeInsertAd").getComponent("NativeInsertAdBind").isLoadAd()&&e.insterCustomShowState&&(r.AD_NodeInsert.active=!0,t.insertNativeShow())}),this._insertCustomAd.onError(function(t){console.error("createInsertCustom load ad error:"+JSON.stringify(t)),t.errCode,t.errMsg}))},d.prototype.insertNativeShow=function(){console.log("InsertCustom\u5e7f\u544a\u663e\u793a"),this._insertCustomAd.reportAdShow({adId:this.adItemData1.adId}),this.insterCustomLoadState=!0,r.AD_NodeInsert.getChildByName("nativeInsertAd").getComponent("NativeInsertAdBind").setIsLoadAdFalse()},d.prototype.insertNativeClick=function(){this._insertCustomAd.reportAdClick({adId:this.adItemData1.adId})},d.prototype.insertDownBtnClick=function(){var t;2==this.adItemData1.interactionType&&(t=this._insertCustomAd.startDownload({adId:this.adItemData1.adId}),console.log("startDownloadresultCode = "+["\u7531\u4e8e\u65e0\u4e0b\u8f7d\u6743\u9650\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u5931\u8d25\u3002","\u7531\u4e8e\u53c2\u6570\u9519\u8bef\u5bfc\u81f4\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u5931\u8d25\uff0c\u5982\u7d20\u6750\u4e3a\u975e\u5e94\u7528\u4e0b\u8f7d\u7c7b\u5e7f\u544a\u3002","\u8c03\u7528\u5e94\u7528\u5f00\u59cb\u4e0b\u8f7d\u6216\u91cd\u542f\u4e0b\u8f7d\u65b9\u6cd5\u6210\u529f\u3002"][t+2])),this.insertNativeClick()},d.prototype.showInsertCustom=function(){console.log("show InsertCustom"),this.insterCustomShowState=!0,0!=this.interstitialAd_is_show&&(r.AD_NodeInsert.getChildByName("nativeInsertAd").getComponent("NativeInsertAdBind").isLoadAd()?(r.AD_NodeInsert.active=!0,this.insertNativeShow()):this.insterCustomLoadState&&this._insertCustomAd.load())},d.prototype.hideInsertCustom=function(){this.insterCustomShowState=!1,r.AD_NodeInsert.active&&(console.log("hide InsertCustom"),r.AD_NodeInsert.active=!1)},d._instance=null,d.ad_enable=!0,i=r=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],d),a.HWGame=i,cc._RF.pop()},{}],HeadUI:[function(t,e,o){"use strict";cc._RF.push(e,"2a06ea8X9hOYKtdRfk7Cluw","HeadUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.HeadUI=void 0;var l,p=i("AudioUtils"),u=i("CommonData"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("ReplacementModel"),g=i("Utils"),y=i("EventManager"),m=i("GameModule"),v=i("SpineUtils"),b=i("NetUtils"),I=i("PlaceMgr");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.name_lbl=null,t.role_spine=null,t.node_1=null,t.name_input_code=null,t.input_free_code=null,t.input_diamond_code=null,t.input_edit=null,t.change_cost_lbl=null,t.CHANGE_NAME_COST=10,t.SEND_BLESS_COST=10,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=m.default),D.prototype.onEnable=function(){this.name_input_code.active=!1,this.name_lbl.string=h.gm.localData.nick_name,this.node_1.active=!0,this.changeDressing(),y.default.on(d.GameEvent.replace_clothes,this.changeDressing,this)},D.prototype.onDisable=function(){y.default.off(d.GameEvent.replace_clothes,this.changeDressing,this)},D.prototype.changeDressing=function(){var t=this,e=0==h.gm.localData.sex_id?h.gm.const.SEX_GIRL_NAME:h.gm.const.SEX_BOY_NAME;v.default.async_set_spine(this.role_spine,d.BundleName.MAIN_UI,"ani/main_role_spine/"+e,function(){t.role_spine.setAnimation(0,"standby",!0),f.default.createBySpine(t.role_spine,u.default.getInstance().dressing)},this)},D.prototype.RandomName=function(){var t=h.gm.config.getRandomNameConfigAry(),e=g.Utils.math_random(!0,0,t.length);h.gm.localData.nick_name=t[e].name,h.gm.localData.saveByKey("nick_name"),this.name_lbl.string=t[e].name},D.prototype.OnclickRandomName=function(){this.RandomName()},D.prototype.onClickOpenChangeName=function(){this.name_input_code.active=!0,h.gm.localData.name_change_count<=0?(this.input_free_code.active=!0,this.input_diamond_code.active=!1):(this.input_free_code.active=!1,this.input_diamond_code.active=!0),this.change_cost_lbl.string=""+this.CHANGE_NAME_COST,this.node_1.active=!1},D.prototype.onClickCloseChangeName=function(){this.name_input_code.active=!1,this.node_1.active=!0},D.prototype.onClickChangeName=function(){var t=this;h.gm.channel.check_is_dirty_word(this.input_edit.string,function(e){e&&0!=e.ResultCode?h.gm.ui.showNotice("\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u5408\u89c4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):(e=0)<(e=0<h.gm.localData.name_change_count?t.CHANGE_NAME_COST:e)&&!_.default.tryConsume([{id:d.CommonPropID.diamond,num:e}],!0)||(h.gm.localData.name_change_count++,h.gm.localData.saveByKey("name_change_count"),h.gm.localData.nick_name=t.input_edit.string,h.gm.localData.saveByKey("nick_name"),t.name_lbl.string=t.input_edit.string,t.name_input_code.active=!1,t.node_1.active=!0,y.default.emit(d.GameEvent.updateBase))})},D.prototype.onClickSetting=function(){I.default.getInstance().isBuildingMode()||(p.default.click(),b.ReportData.instance.report_point(100005,41000034),h.gm.ui.showModule(h.gm.const.Setting))},D.prototype.onBtnBless=function(){p.default.click(),b.ReportData.instance.report_point(100005,41000030),h.gm.ui.showModule(h.gm.const.BlessUI,function(){})},D.prototype.onClickReplace=function(){p.default.click(),b.ReportData.instance.report_point(100005,41000031),h.gm.ui.showModule(h.gm.const.ReplacementUI)},s([a(cc.Label)],D.prototype,"name_lbl",void 0),s([a(sp.Skeleton)],D.prototype,"role_spine",void 0),s([a(cc.Node)],D.prototype,"node_1",void 0),s([a(cc.Node)],D.prototype,"name_input_code",void 0),s([a(cc.Node)],D.prototype,"input_free_code",void 0),s([a(cc.Node)],D.prototype,"input_diamond_code",void 0),s([a(cc.EditBox)],D.prototype,"input_edit",void 0),s([a(cc.Label)],D.prototype,"change_cost_lbl",void 0),i=s([i],D),r.HeadUI=i,cc._RF.pop()},{}],HeartMgr:[function(t,e,o){"use strict";cc._RF.push(e,"bf53fpSJ15KvLWhsljyNrZM","HeartMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonUtils"),l=i("Const"),p=i("Formula"),u=i("GameMgr"),d=i("PropMgr"),h=i("Singleton"),_=i("EventManager"),f=i("UIMgr"),g=i("TimeUtils"),y=i("DecorationMgr"),m=i("FlyHeartMgr");function v(){var t=null!==c&&c.apply(this,arguments)||this;return t.Duration=u.gm.config.data.Setting[0].InitialHeartTime||60,t._heartProduce=0,t._dirty=!0,t.curProgress=0,t}r(v,c=h.default),v.prototype.checkCanCollect=function(){var t=this;setTimeout(function(){var e,o=g.default.getTime();u.gm.localData.last_create_heart_time?(e=o-u.gm.localData.last_create_heart_time,(e=Math.min(u.gm.config.data.Setting[0].InitialHeartLeaveTime,e))>t.Duration&&(e=Math.floor(e/t.Duration)*t.getProduce(),t.addHeart(e),t.saveLastTime(o),t.flyHeart())):t.saveLastTime(o)},0)},v.prototype.getProduce=function(){return this._dirty&&(this._heartProduce=this._calHeartProduce(),this._dirty=!1),this._heartProduce},v.prototype._calHeartProduce=function(){var t,e=0,o=u.gm.mapData.getAllObjectDatas();for(t in o){var n=o[t];n.isDecoration()&&!n.isLock()&&((i=y.default.getConfig(n.objectID,n.lv))?2==i.type&&i.love_produce&&(e+=i.love_produce):cc.warn("not found in \u88c5\u9970\u8868",n.getConfig().name,n.objectID,n.lv))}for(var i,a,r=p.Formula.getHeartAddition(),c=(e=Math.floor(e*(1+r)),0);c<u.gm.localData.explore_data.pet_decorate_data.length;++c)0<u.gm.localData.explore_data.pet_decorate_data[c].decorate_id&&(a=u.gm.localData.explore_data.getPetDecorateLv(u.gm.localData.explore_data.pet_decorate_data[c].decorate_id),(i=y.default.getConfig(u.gm.localData.explore_data.pet_decorate_data[c].decorate_id,a))&&2==i.type&&i.love_produce&&(e+=i.love_produce));return e},v.prototype.saveLastTime=function(t){u.gm.localData.last_create_heart_time=t,u.gm.localData.saveByKey("last_create_heart_time")},v.prototype.addHeart=function(t){return 0==t||(t<0?(cc.error("\u4e0d\u80fd\u5728\u8fd9\u91cc\u6263\u9664\u7231\u5fc3"),!1):(d.default.addProps([{id:l.CommonPropID.heart,num:t}],!1),!0))},v.prototype.flyHeart=function(){var t,e=u.gm.ui.get_layer_node(f.LayerType.TOP);for(t in m.default.getInstance().setFlyIconParent(e),u.gm.mapData.mapObject){var o,n=u.gm.mapData.mapObject[t],i=n.data;i.isDecoration()&&!i.isLock()&&((o=y.default.getConfig(i.objectID,i.lv))?2==o.type&&m.default.getInstance().flyIconByNode(n.node,s.default.getBaseUI().pro_heart.node,1):cc.error("not found in \u88c5\u9970\u8868",i.getConfig().name,i.objectID,i.lv))}},v.prototype.setDirty=function(t){(this._dirty=t)&&_.default.emit(l.GameEvent.updateBase)},v.prototype.onAdd=function(t,e){var o;void 0===e&&(e=!0),this.setDirty(!0),t.isDecoration()&&!t.isLock()&&((o=y.default.getConfig(t.objectID,t.lv))?2==o.type&&o.love_produce&&u.gm.ui.showHeart((e=e?1:-1)*o.love_produce):cc.warn("not found in \u88c5\u9970\u8868",t.getConfig().name,t.objectID,t.lv))},r=v,a.default=r,cc._RF.pop()},{}],HollowOut:[function(t,e,o){"use strict";cc._RF.push(e,"1e930qbpvNGgJkHwI288zG7","HollowOut");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r},s=function(t,e,o,n){return new(o=o||Promise)(function(i,a){function r(t){try{s(n.next(t))}catch(t){a(t)}}function c(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?i(t.value):((e=t.value)instanceof o?e:new o(function(t){t(e)})).then(r,c)}s((n=n.apply(t,e||[])).next())})},l=function(t,e){var o,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},r={next:c(0),throw:c(1),return:c(2)};return"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,(r=i?[2&r[0],i.value]:r)[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(a,"__esModule",{value:!0}),a.HollowOutShape=void 0,i("EditorAsset");var p,u,d=cc._decorator,h=d.ccclass,_=d.property,f=d.requireComponent,g=d.executeInEditMode,y=d.disallowMultiple;function m(){var t=null!==u&&u.apply(this,arguments)||this;return t._effect=null,t._shape=p.Rect,t._center=cc.v2(),t._width=300,t._height=300,t._round=1,t._radius=200,t._feather=.5,t.sprite=null,t.material=null,t.tweenRes=null,t}i=d.executionOrder,(d=p=a.HollowOutShape||(a.HollowOutShape={}))[d.Rect=1]="Rect",d[d.Circle=2]="Circle",r(m,u=cc.Component),Object.defineProperty(m.prototype,"effect",{get:function(){return this._effect},set:function(t){this._effect=t,this.init()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"center",{get:function(){return this._center},set:function(t){this._center=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"round",{get:function(){return this._round},set:function(t){this._round=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.updateProperties()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"feather",{get:function(){return this._feather},set:function(t){this._feather=t,this.updateProperties()},enumerable:!1,configurable:!0}),m.prototype.onLoad=function(){this.init()},m.prototype.resetInEditor=function(){this.init()},m.prototype.init=function(){return s(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return[3,2];case 1:e.sent(),e.label=2;case 2:return this._effect&&((t=this.sprite=this.node.getComponent(cc.Sprite)).spriteFrame&&(t.spriteFrame.getTexture().packable=!1),this.material=cc.Material.create(this._effect),t.setMaterial(0,this.material),this.updateProperties()),[2]}})})},m.prototype.updateProperties=function(){switch(this._shape){case p.Rect:this.rect(this._center,this._width,this._height,this._round,this._feather);break;case p.Circle:this.circle(this._center,this._radius,this._feather)}},m.prototype.rect=function(t,e,o,n,i){this._shape=p.Rect,null!=t&&(this._center=t),null!=e&&(this._width=e),null!=o&&(this._height=o),null!=n&&(this._round=0<=n?n:0,n=Math.min(this._width/2,this._height/2),this._round=this._round<=n?this._round:n),null!=i&&(this._feather=0<=i?i:0,this._feather=this._feather<=this._round?this._feather:this._round),(i=this.material).setProperty("size",this.getNodeSize()),i.setProperty("center",this.getCenter(this._center)),i.setProperty("width",this.getWidth(this._width)),i.setProperty("height",this.getHeight(this._height)),i.setProperty("round",this.getRound(this._round)),i.setProperty("feather",this.getFeather(this._feather))},m.prototype.circle=function(t,e,o){this._shape=p.Circle,null!=t&&(this._center=t),null!=e&&(this._radius=e),null!=o&&(this._feather=0<=o?o:0),(o=this.material).setProperty("size",this.getNodeSize()),o.setProperty("center",this.getCenter(this._center)),o.setProperty("width",this.getWidth(2*this._radius)),o.setProperty("height",this.getHeight(2*this._radius)),o.setProperty("round",this.getRound(this._radius)),o.setProperty("feather",this.getFeather(this._feather))},m.prototype.rectTo=function(t,e,o,n,i,a){var r=this;return void 0===i&&(i=0),void 0===a&&(a=0),new Promise(function(c){r._shape=p.Rect,cc.Tween.stopAllByTarget(r),r.unscheduleAllCallbacks(),r.tweenRes&&r.tweenRes(),r.tweenRes=c,i=Math.min(i,o/2,n/2),a=Math.min(a,i),cc.tween(r).to(t,{center:e,width:o,height:n,round:i,feather:a}).call(function(){r.scheduleOnce(function(){r.tweenRes&&(r.tweenRes(),r.tweenRes=null)})}).start()})},m.prototype.circleTo=function(t,e,o,n){var i=this;return void 0===n&&(n=0),new Promise(function(a){i._shape=p.Circle,cc.Tween.stopAllByTarget(i),i.unscheduleAllCallbacks(),i.tweenRes&&i.tweenRes(),i.tweenRes=a,cc.tween(i).to(t,{center:e,radius:o,feather:n}).call(function(){i.scheduleOnce(function(){i.tweenRes&&(i.tweenRes(),i.tweenRes=null)})}).start()})},m.prototype.reset=function(){this.rect(cc.v2(),0,0,0,0)},m.prototype.setNodeSize=function(){var t=this.node,e=t.width,o=t.height;this._radius=Math.sqrt(Math.pow(e,2)+Math.pow(o,2))/2,this.rect(t.getPosition(),e,o,0,0)},m.prototype.getCenter=function(t){var e=(o=this.node).width,o=o.height;return e=(t.x+e/2)/e,o=(-t.y+o/2)/o,cc.v2(e,o)},m.prototype.getNodeSize=function(){return cc.v2(this.node.width,this.node.height)},m.prototype.getWidth=function(t){return t/this.node.width},m.prototype.getHeight=function(t){return t/this.node.width},m.prototype.getRound=function(t){return t/this.node.width},m.prototype.getFeather=function(t){return t/this.node.width},c([_],m.prototype,"_effect",void 0),c([_({type:cc.EffectAsset,readonly:!0})],m.prototype,"effect",null),c([_],m.prototype,"_shape",void 0),c([_({type:cc.Enum(p)})],m.prototype,"shape",null),c([_],m.prototype,"_center",void 0),c([_({})],m.prototype,"center",null),c([_],m.prototype,"_width",void 0),c([_({visible:function(){return this._shape===p.Rect}})],m.prototype,"width",null),c([_],m.prototype,"_height",void 0),c([_({visible:function(){return this._shape===p.Rect}})],m.prototype,"height",null),c([_],m.prototype,"_round",void 0),c([_({visible:function(){return this._shape===p.Rect}})],m.prototype,"round",null),c([_],m.prototype,"_radius",void 0),c([_({visible:function(){return this._shape===p.Circle}})],m.prototype,"radius",null),c([_],m.prototype,"_feather",void 0),c([_({visible:function(){return this._shape===p.Circle||0<this.round}})],m.prototype,"feather",null),i=c([h,f(cc.Sprite),g,y,i(-10)],m),a.default=i,cc._RF.pop()},{}],HouseKeeperItem:[function(t,e,o){"use strict";cc._RF.push(e,"b8b9bOeZ1RIwZHnIxQcKfPp","HouseKeeperItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("JumpMgr"),_=i("MapDataHelper"),f=i("IconUtils"),g=i("ListItem"),y=i("EventManager");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.red_dot_comp=null,t.id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},m.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},m.prototype.setData=function(t){this.id=t,this.updateUI()},m.prototype.updateUI=function(){var t=this;f.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"texture/house_keeper/"+this.id,this.spr_icon),this.red_dot_comp?this.red_dot_comp.dotName="nod_"+this.id:p.default.createRedDot(this.node,"nod_"+this.id,50,50,function(e){t.red_dot_comp=e})},m.prototype.onTouchItem=function(){var t=_.default.findData(this.id,function(t){return!t.isLock()});t?(p.default.isInExplore()&&y.default.emit(u.GameEvent.explore_go_home),h.default.getInstance().jumpToGrid(t.getCenterPos()),d.gm.ui.closeModule(d.gm.const.HouseKeeperUI)):d.gm.ui.showNotice("\u672a\u89e3\u9501")},s([a(cc.Sprite)],m.prototype,"spr_icon",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],HouseKeeperMgr:[function(t,e,o){"use strict";cc._RF.push(e,"be3fehwrxZLArJZt8y+2ttc","HouseKeeperMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonData"),l=i("CommonUtils"),p=i("Const"),u=i("GameMgr"),d=i("JumpMgr"),h=i("MapDataHelper"),_=i("PropMgr"),f=i("Singleton"),g=i("EventManager"),y=i("RedDotMgr"),m=i("TimeUtils"),v=i("BarbecueMenuData"),b=i("BarbecueMenuHelper"),I=i("BreedMgr"),D=i("DailyTaskData"),C=i("DailyTaskHelper"),O=i("ShelfMgr");function w(){return null!==c&&c.apply(this,arguments)||this}r(w,c=f.default),w.prototype.checkVegetable=function(){for(var t=0,e=[p.SpecialObjectID.land_dry,p.SpecialObjectID.land_gua,p.SpecialObjectID.land_vegetable,p.SpecialObjectID.land_wet];t<e.length;t++){var o=h.default.findDataByObjectID(e[t],!1);if(o=o&&h.default.checkObjectSlot(o))return o}return null},w.prototype.checkTopFactory=function(){for(var t=0,e=[p.SpecialObjectID.factory_grass,p.SpecialObjectID.factory_wood,p.SpecialObjectID.factory_stone];t<e.length;t++){var o=h.default.findData(o=e[t],function(t){return!t.isLock()});if(o=o&&h.default.checkObjectSlot(o))return o}return null},w.prototype.checkNormalFactory=function(t){return(t=h.default.findData(t,function(t){return!t.isLock()}))&&h.default.checkObjectSlot(t)||null},w.prototype.checkStall=function(){for(var t,e=0,o=0,n=[10417,10418,10419,10420,10421,10422];o<n.length;o++)if(t=h.default.findData(t=n[o],function(t){return!t.isLock()})){e++;for(var i=0,a=O.default.getInstance().getListByData(t);i<a.length;i++)if(0<a[i].cur_count)return!1}return!!e},w.prototype.checkMainHouse=function(){return 100<=_.default.getPropCount(p.CommonPropID.cook_like)},w.prototype.checkBBQ=function(){if(!h.default.findData(p.SpecialObjectID.barbecue,function(t){return!t.isLock()}))return!1;if(_.default.getPropCount(p.CommonPropID.bbq_sauce)<=0)return!0;for(var t=0,e=b.default.getInstance().getAllLearnMenuMaterial();t<e.length;t++){var o=e[t];if(o&&v.default.getInstance().stall_goods[o.prop_id])return!1}return!0},w.prototype.checkAnimal=function(t){var e=h.default.findData(t,function(t){return!t.isLock()});if(!e)return null;if(I.default.getInstance().getConfig(e.objectID,e.lv)&&e.breedData){if((t=e.breedData.animals).length<I.default.getInstance().getAnimalMax(e))return e;for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i.canHarvest()&&!i.isCatch)return e}if(e.getCurEnergy()<=0)return e}return null},w.prototype.checkDailyTask=function(){for(var t=0,e=u.gm.config.data.DailyTasks;t<e.length;t++){var o=e[t];if(!D.DailyTaskData.getInstance().gotTaskItems.includes(o.task_id)&&C.default.checkByCondition(o.mission_condition)>=o.mission_condition.num)return!0}return!1},w.prototype.checkSignIn=function(){if(!(s.default.getInstance().sign_in_time.length<7))return!1;for(var t=0,e=s.default.getInstance().sign_in_time;t<e.length;t++){var o=e[t];if(m.default.getDay()==new Date(1e3*o).toDateString())return!1}return!0},w.prototype.checkOnlineRed=function(){var t=u.gm.config.getOnlineConfig(s.default.getInstance().online_stage+1);return!!(t&&t.time<=s.default.getInstance().online_time)},w.prototype.onProduce=function(){y.default.getInstance().reCalculate("nod_keeper")},w.prototype.onHarvest=function(){y.default.getInstance().reCalculate("nod_keeper")},w.prototype.firstCheck=function(){setTimeout(function(){y.default.getInstance().reCalculate("nod_keeper")},0)},w.prototype.onUnlockDistrict=function(){y.default.getInstance().reCalculate("nod_top_vegetable")},w.prototype.reCalculateAnimal=function(t){[p.SpecialObjectID.Chicken,p.SpecialObjectID.Pig,p.SpecialObjectID.Milk_Cow,p.SpecialObjectID.Ox].includes(t)&&y.default.getInstance().reCalculate("nod_"+t)},w.prototype.onObjectUnlock=function(t){var e=[p.SpecialObjectID.Chicken,p.SpecialObjectID.Pig,p.SpecialObjectID.Milk_Cow,p.SpecialObjectID.Ox],o=[p.SpecialObjectID.food_factory,p.SpecialObjectID.fruit_factory,p.SpecialObjectID.meat_factory,p.SpecialObjectID.feed_factory,p.SpecialObjectID.drink_factory],n=[p.SpecialObjectID.bbq_ice_box_1,p.SpecialObjectID.bbq_ice_box_2,p.SpecialObjectID.bbq_ice_box_3],i=[p.SpecialObjectID.cutter,p.SpecialObjectID.loom,p.SpecialObjectID.sawmill];[10417,10418,10419,10420,10421,10422].includes(t)?y.default.getInstance().reCalculate("nod_10071"):e.includes(t)||o.includes(t)?y.default.getInstance().reCalculate("nod_"+t):i.includes(t)?y.default.getInstance().reCalculate("nod_top_factory"):n.includes(t)&&y.default.getInstance().reCalculate("nod_10072")},w.prototype.onPropChange=function(t){t==p.CommonPropID.bbq_like||t==p.CommonPropID.cook_like&&y.default.getInstance().reCalculate("nod_10415")},w.prototype.onStallShelfAdd=function(){y.default.getInstance().reCalculate("nod_10071")},w.prototype.findVegetableUnlock=function(){for(var t,e=0,o=[p.SpecialObjectID.land_dry,p.SpecialObjectID.land_gua,p.SpecialObjectID.land_vegetable,p.SpecialObjectID.land_wet];e<o.length;e++)if(t=h.default.findData(t=o[e],function(t){return!t.isLock()}))return t;return null},w.prototype.onBtnVegetable=function(){var t,e=w.getInstance().findVegetableUnlock();e?(t=w.getInstance().checkVegetable())?(l.default.isInExplore()&&g.default.emit(p.GameEvent.explore_go_home),u.gm.ui.closeAllWindows(),t.loadObject(function(t){d.default.getInstance().jumpToPos(t.node,cc.v2(348,440),!0),t.showFinger()})):(l.default.isInExplore()&&g.default.emit(p.GameEvent.explore_go_home),u.gm.ui.closeAllWindows(),d.default.getInstance().jumpToGrid(e.getCenterPos())):u.gm.ui.showNotice("\u672a\u89e3\u9501")},r=w,a.default=r,cc._RF.pop()},{}],HouseKeeperUI:[function(t,e,o){"use strict";cc._RF.push(e,"825a9RnHWBDMb1R7FH7pNtb","HouseKeeperUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("JumpMgr"),_=i("MapDataHelper"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("HouseKeeperItem"),v=i("HouseKeeperMgr");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.toggle=null,t.list_bottom=null,t.nod_top_vegetable=null,t.nod_top_factory=null,t.curIndex=0,t.bottom_item_types=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=y.default),b.prototype.start=function(){p.default.createRedDot(this.nod_top_vegetable,"nod_top_vegetable",76,56),p.default.createRedDot(this.nod_top_factory,"nod_top_factory",76,56),p.default.createRedDot(this.toggle.node.children[0],"nod_feed",30,0),p.default.createRedDot(this.toggle.node.children[1],"nod_factory",30,0),p.default.createRedDot(this.toggle.node.children[2],"nod_shop",30,0)},b.prototype.onEnable=function(){this.updateUI()},b.prototype.updateUI=function(){this.toggle.toggleItems[this.curIndex].check(),this.bottom_item_types=I[this.curIndex],this.list_bottom.numItems=this.bottom_item_types.length},b.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.updateUI()},b.prototype.onRender=function(t,e){t.getComponent(m.default).setData(this.bottom_item_types[e])},b.prototype.onBtnVegetable=function(){v.default.getInstance().onBtnVegetable()},b.prototype.onBtnTopFactory=function(){var t,e=this.findTopFactoryUnlock();e?(t=v.default.getInstance().checkTopFactory())?(p.default.isInExplore()&&g.default.emit(u.GameEvent.explore_go_home),d.gm.ui.closeAllWindows(),h.default.getInstance().jumpToGrid(t.getCenterPos()),t.loadObject(function(t){t.showFinger()})):(p.default.isInExplore()&&g.default.emit(u.GameEvent.explore_go_home),d.gm.ui.closeAllWindows(),h.default.getInstance().jumpToGrid(e.getCenterPos())):d.gm.ui.showNotice("\u672a\u89e3\u9501")},b.prototype.findTopFactoryUnlock=function(){for(var t,e=0,o=[u.SpecialObjectID.factory_grass,u.SpecialObjectID.factory_wood,u.SpecialObjectID.factory_stone];e<o.length;e++)if(t=_.default.findData(t=o[e],function(t){return!t.isLock()}))return t;return null},s([a(cc.ToggleContainer)],b.prototype,"toggle",void 0),s([a(f.default)],b.prototype,"list_bottom",void 0),s([a(cc.Node)],b.prototype,"nod_top_vegetable",void 0),s([a(cc.Node)],b.prototype,"nod_top_factory",void 0),i=s([i],b),r.default=i;var I=[[10021,10022,10023,10024],[10041,10042,10043,10044],[10415,10071,10072]];cc._RF.pop()},{}],HttpHelper:[function(t,e,o){"use strict";cc._RF.push(e,"b8185zKGF5ExLTxyVKa2r33","HttpHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("GameMgr"),p=i("Utils");function u(){return null!==c&&c.apply(this,arguments)||this}r(u,c=s.default),u.prototype.exchange=function(t,e,o){p.Utils.server_http_request(e,o,l.gm.channel.getServerUrl()+"user/get_gift_code?uid="+l.gm.data.uid+"&token="+l.gm.data.token+"&gift_code="+t)},r=u,a.default=r,cc._RF.pop()},{}],IMapPosCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"e6f5dDqq4JP5oFEn99/TAgT","IMapPosCtrl");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.point_to=[],t._parent_point=[],t._in_degree=0,t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("GameObject").GameObject),s.prototype.setPointTo=function(t){this.point_to.push(t),t._in_degree+=1,t._parent_point.push(this)},s.prototype.getInDegree=function(){return this._in_degree},s.prototype.getTop=function(){return this.getPosSys().worldGrid.y-this.getGridHeight()+1},s.prototype.getBottom=function(){return this.getPosSys().worldGrid.y},s.prototype.getLeft=function(){return this.getPosSys().worldGrid.x-this.getGridWidth()+1},s.prototype.getRight=function(){return this.getPosSys().worldGrid.x},s.prototype.breakPoint=function(){for(var t=0,e=this.point_to;t<e.length;t++){var o=e[t];--o._in_degree,o.removeParent(this)}this.point_to=[]},s.prototype.resetIndegree=function(){this.point_to=[],this._in_degree=0,this._parent_point=[]},s.prototype.getUID=function(){return"npc"},s.prototype.getOjectName=function(){return"npc_name"},s.prototype.removeParent=function(t){for(var e=0;e<this._parent_point.length;e++)t==this._parent_point[e]&&this._parent_point.splice(e,1)},s.prototype.getBoundingBoxNode=function(){return this.node},r=s,c.default=r,cc._RF.pop()},{}],IconUtils:[function(t,e,o){"use strict";cc._RF.push(e,"5703aa/TidCF6irR6s69DEa","IconUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.IconUtils=void 0;var a=n("AssetMgr"),r=n("NpcMgr"),c=n("ConfigUtils"),s=n("Const"),l=n("GameMgr"),p=n("PropMgr");function u(){}u.setNotFoundIcon=function(t){a.default.getInstance().getResAsyn(s.BundleName.COMMON,"texture/prop_90_90/prop_100102",cc.SpriteFrame,function(e){t.spriteFrame=e})},u.setSpriteFrame=function(t,e,o,n){void 0===n&&(n=null),o&&a.default.getInstance().getResAsyn(t,e,cc.SpriteFrame,function(t){o.spriteFrame=t},function(){n?n():(cc.warn("\u56fe\u7247\u672a\u627e\u5230:"+e+"\uff0c\u6b63\u5728\u4f7f\u7528\u9ed8\u8ba4\u56fe\u7247"),u.setNotFoundIcon(o))})},u.setPropSprite=function(t,e){if("number"!=typeof t)return cc.error(t),void p.default.getConfigByPropID(t);e.spriteFrame=null,t=(t=p.default.getConfigByPropID(t)).icon?u.getIconFullPathByName(t.icon):"texture/prop_90_90/prop_"+t.id,this.setSpriteFrame(s.BundleName.COMMON,t,e)},u.getIconFullPathByName=function(t){var e=t,o=e.split("_")[0];return t="",o&&("object"==o?t="texture/object_icon_150_150/"+e:"prop"==o?t="texture/prop_90_90/"+e:"task"==o?t="texture/task_icon/"+e:"npc"==o?t="texture/npc_head_square/npc_head_square_"+e.split("_")[2]:"bubble"==o?t="texture/bubble/"+e:"monster"==o&&(t="texture/monster_icon/"+e)),t},u.setObjectSprite=function(t,e){e.spriteFrame=null;var o=c.BigMapConfigUtils.getConfig(t);t=o&&o.icon?o.icon:"object_icon_"+t,this.setSpriteFrame(s.BundleName.COMMON,"texture/object_icon_150_150/"+t,e)},u.setNpcHead=function(t,e){e.spriteFrame=null,this.setSpriteFrame(s.BundleName.COMMON,"texture/npc_head_square/"+r.default.getInstance().getSquareHeadByNpcID(t),e)},u.setMenuIcon=function(t,e){e.spriteFrame=null,u.setPropSprite(l.gm.config.menuConfig[t].cook_food.id,e)},u.setBarbecueMenuIcon=function(t,e){e.spriteFrame=null,u.setPropSprite(l.gm.config.barbecueMenu[t].cook_food.id,e)},u.setFaceIcon=function(t,e){this.setSpriteFrame(s.BundleName.COMMON,"texture/bubble/"+t,e)},u.setDrawIcon=function(t,e){this.setSpriteFrame(s.BundleName.COMMON,"texture/icon_wearing/icon_wearing_"+t,e)},u.setQuality=function(t,e){1<=t&&t<=4?this.setSpriteFrame(s.BundleName.COMMON,"texture/quality/quality_"+t,e):cc.error("set quality error",t)},n=u,i.IconUtils=n,cc._RF.pop()},{}],ItemBubble:[function(t,e,o){"use strict";cc._RF.push(e,"59ca0PvRNJFNr2Dv5Nc7d4G","ItemBubble");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("IconUtils");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.progress=null,t.spr_icon=null,t.nod_bubble=null,t.items=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=cc.Component),u.prototype.onLoad=function(){},u.prototype.show=function(t){this.nod_bubble.active=t=void 0===t||t},u.prototype.setItems=function(t){var e;this.items=[],(e=this.items).push.apply(e,t),0<this.items.length&&p.IconUtils.setPropSprite(this.items[0].id,this.spr_icon)},u.prototype.setProgress=function(t){this.progress.progress=t},u.prototype.playProgress=function(t,e){void 0===e&&(e=null),this.progress.progress=1,cc.tween(this.progress).to(t,{progress:0}).call(function(){e&&e()}).start()},s([a(cc.ProgressBar)],u.prototype,"progress",void 0),s([a(cc.Sprite)],u.prototype,"spr_icon",void 0),s([a(cc.Node)],u.prototype,"nod_bubble",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],JumpMgr:[function(t,e,o){"use strict";cc._RF.push(e,"27d07w1OO1BRqJA4t021y8y","JumpMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("TMXUtils"),p=i("MainRoleMgr"),u=i("NpcMgr"),d=i("CommonUtils"),h=i("GameMgr"),_=i("MapDataHelper");function f(){return null!==c&&c.apply(this,arguments)||this}r(f,c=s.default),f.prototype.jumpToObjectAndShowFinger=function(t,e){return!!(e=_.default.findDataByObjectID(t,e=void 0===e||e))&&(h.gm.ui.closeAllWindows(),this.jumpToGrid(e.getWorldGrid()),e.loadObject(function(t){t&&t.showFinger()}),e=e.getParentData(),d.default.tryToOpenHouse(e),!0)},f.prototype.jumpToFinger=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=!1),t&&(t=t.node.convertToWorldSpaceAR(cc.v2(0,0)),t=h.gm.mainUI.getContentNode().convertToNodeSpaceAR(t),h.gm.mainUI.jumpByPos(t,null,o),e&&e())},f.prototype.jumpToPos=function(t,e,o){void 0===e&&(e=cc.v2(0,0)),void 0===o&&(o=!1),t&&(e=t.convertToWorldSpaceAR(e),e=h.gm.mainUI.getContentNode().convertToNodeSpaceAR(e),h.gm.mainUI.jumpByPos(e,null,o))},f.prototype.moveToFinger=function(t,e){void 0===e&&(e=null),t&&(t=t.node.convertToWorldSpaceAR(cc.v2(0,0)),t=h.gm.mainUI.getContentNode().convertToNodeSpaceAR(t),h.gm.mainUI.moveToPos(t,e))},f.prototype.moveToGrid=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=1e3),t=l.default.tileToCocos(t,h.gm.mapData.mapSize,h.gm.const.GridSize),h.gm.mainUI.moveToPos(t,e,o)},f.prototype.moveToMainRole=function(t){void 0===t&&(t=null);var e=p.default.getInstance().getRoleGrid();e=l.default.tileToCocos(e,h.gm.mapData.mapSize,h.gm.const.GridSize),h.gm.mainUI.moveToPos(e,t)},f.prototype.moveToNpc=function(t,e){void 0===e&&(e=null),u.default.getInstance().tryToGetView(t,function(t){t=t.targetGrid||t.getGrid(),t=l.default.tileToCocos(t,h.gm.mapData.mapSize,h.gm.const.GridSize),h.gm.mainUI.moveToPos(t,e)})},f.prototype.jumpToGrid=function(t,e){void 0===e&&(e=!1),t=l.default.tileToCocos(t,h.gm.mapData.mapSize,h.gm.const.GridSize),h.gm.mainUI.jumpByPos(t,null,e)},r=f,a.default=r,cc._RF.pop()},{}],LandAward:[function(t,e,o){"use strict";cc._RF.push(e,"51247ES/elPiZeLdu1xNKhE","LandAward");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonItem"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("List"),y=i("EventManager"),m=i("TimeUtils"),v=i("MapObject");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_items=null,t.nod_tip=null,t.mapObject=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=cc.Component),b.prototype.onEnable=function(){this.updateUI(),y.default.on(h.GameEvent.updateLandAward,this.onUpdateLandAward,this),this.list_items.node.on(cc.Node.EventType.TOUCH_END,this.onTouchList,this)},b.prototype.onDisable=function(){y.default.off(h.GameEvent.updateLandAward,this.onUpdateLandAward,this)},b.prototype.onUpdateLandAward=function(){this.updateUI()},b.prototype.updateUI=function(){this.list_items.numItems=p.default.getInstance().getLandAward(this.mapObject.objectID).length,this.nod_tip.active=Boolean(p.default.getInstance().getLandAward(this.mapObject.objectID).length)},b.prototype.onTouch=function(){},b.prototype.onTouchList=function(t){t.stopPropagation();for(var e=0,o=t=p.default.getInstance().getLandAward(this.mapObject.objectID);e<o.length;e++)if(o[e].num<=0)return void _.gm.ui.showNotice("\u5347\u7ea7\u7269\u4ef6\u53ef\u83b7\u5f97\u7269\u54c1");f.default.addProps(t),d.default.fly(this.node,t),p.default.getInstance().landAwards[this.mapObject.objectID]=[],p.default.getInstance().landAwardCollectTime[this.mapObject.objectID]=m.default.getTime(),this.updateUI()},b.prototype.onRender=function(t,e){t.getComponent(u.default).setData(p.default.getInstance().getLandAward(this.mapObject.objectID)[e]),t.getComponent(u.default).canTouch=!1},s([a(g.default)],b.prototype,"list_items",void 0),s([a(cc.Node)],b.prototype,"nod_tip",void 0),s([a(v.default)],b.prototype,"mapObject",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],LandEgg:[function(t,e,o){"use strict";cc._RF.push(e,"55554NbDr5MVJIxbJOIK2MB","LandEgg");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("NodePoolItem"),d=i("MathUtils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_egg=null,t.data=null,t.posNodes=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.NodePoolItem),h.prototype.setData=function(t,e,o){this.data=t,this.objectData=o,this.posNodes=e.children,e=this.posNodes[d.default.randomNum(0,this.posNodes.length-1)],this.node.position=e.position,this.updateUI()},h.prototype.updateUI=function(){this.nod_egg.active=!1},h.prototype.update=function(){this.data.isCatch?p.gm.pool.put(this.node):this.data.canHarvest()?this.nod_egg.active=!0:this.nod_egg.active=!1},s([a(cc.Node)],h.prototype,"nod_egg",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],LandTipNew:[function(t,e,o){"use strict";cc._RF.push(e,"690801WIvJD5J1eNBvI2BiB","LandTipNew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameModule"),u=i("CommonUtils"),d=i("Const"),h=i("EventManager"),_=i("PropMgr"),f=i("IconUtils");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_time=null,t.spr_icon=null,t.nod_tip=null,t.lbl_sandglass_count=null,t.pro_energy=null,t.lbl_energy=null,t.lbl_video_desc=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=p.default),g.prototype.start=function(){},g.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.closeView,this),h.default.on(d.GameEvent.updateBase,this.updateUI,this)},g.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.closeView,this),h.default.off(d.GameEvent.updateBase,this.updateUI,this)},g.prototype.closeView=function(){this.closeMe()},g.prototype.updatePos=function(t){t=this.node.convertToNodeSpaceAR(t),this.nod_tip.x=t.x,this.nod_tip.y=t.y},g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){f.IconUtils.setPropSprite(this.data.id,this.spr_icon)},g.prototype.update=function(){var t;this.data&&(this.lbl_time.string=this.data.getLeftTimeCountDownStr(),this.pro_energy.progress=this.data.cur_energy/this.data.animal_grow_cost,this.lbl_energy.string=this.data.cur_energy+"/"+this.data.animal_grow_cost,(t=Math.floor(this.data.getLeftTime()))<=1800?(this.lbl_video_desc.string="\u7acb\u5373\u5b8c\u6210",this.lbl_video_desc.fontSize=20):(this.lbl_video_desc.string="\u52a0\u901f30\u5206\u949f",this.lbl_video_desc.fontSize=18),t<=0&&this.closeView())},g.prototype.onBtnCompleteNow=function(){var t=this;u.default.showVideo(function(){t.data.addEnergy(1800),t.closeMe()},40000015)},g.prototype.onBtnSandglass=function(){_.default.tryConsume([{id:d.CommonPropID.sandglass,num:1}],!0)&&this.data.addEnergy(150)},s([a(cc.Label)],g.prototype,"lbl_time",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),s([a(cc.Node)],g.prototype,"nod_tip",void 0),s([a(cc.Label)],g.prototype,"lbl_sandglass_count",void 0),s([a(cc.ProgressBar)],g.prototype,"pro_energy",void 0),s([a(cc.Label)],g.prototype,"lbl_energy",void 0),s([a(cc.Label)],g.prototype,"lbl_video_desc",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],LandTip:[function(t,e,o){"use strict";cc._RF.push(e,"f45faM9f8RCyrjmzdI3ndNH","LandTip");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameModule"),u=i("CommonUtils"),d=i("Const"),h=i("EventManager"),_=i("MainRoleMgr"),f=i("PropMgr"),g=i("GuideMgr"),y=i("GameMgr"),m=i("Finger"),v=i("ConfigUtils"),b=i("IconUtils");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_time=null,t.spr_icon=null,t.nod_tip=null,t.lbl_sandglass_count=null,t.lbl_need_count=null,t.lbl_video_desc=null,t.finger=null,t.nod_vedio=null,t.produceData=null,t.need_count=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=p.default),I.prototype.start=function(){},I.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.closeView,this),h.default.on(d.GameEvent.updateBase,this.updateUI,this)},I.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.closeView,this),h.default.off(d.GameEvent.updateBase,this.updateUI,this)},I.prototype.closeView=function(){g.default.getInstance().resetTouchCondition(),this.closeMe()},I.prototype.updatePos=function(t){t=this.node.convertToNodeSpaceAR(t),this.nod_tip.x=t.x,this.nod_tip.y=t.y},I.prototype.setData=function(t){this.produceData=t,this.updateUI(),this.nod_vedio.active=!0,g.default.getInstance().touchCondition.mission==d.ConditionType.harvest_count?v.ProduceUtils.getConifgByProductionID(g.default.getInstance().touchCondition.id).produce_id==this.produceData.produceID&&this.finger.showFinger(!0,!0):g.default.getInstance().touchCondition.mission==d.ConditionType.consume_prop&&g.default.getInstance().touchCondition.id==d.CommonPropID.sandglass&&(this.finger.showFinger(!0,!0),this.nod_vedio.active=!1)},I.prototype.setNewData=function(t,e){this.mapObjetData=t,this.index=e,this.updateUI()},I.prototype.updateUI=function(){this.lbl_sandglass_count.string=""+f.default.getPropCount(d.CommonPropID.sandglass),b.IconUtils.setPropSprite(this.produceData.produceConfig.getProduction()[0].id,this.spr_icon)},I.prototype.update=function(){var t;this.produceData.produceID&&(this.lbl_time.string=this.produceData.getLeftTimeCountDownStr(),t=Math.floor(this.produceData.getLeftTime()),this.need_count=Math.ceil(t/(y.gm.config.data.Setting[0].InitalHourglassPassTime||120)),this.lbl_need_count.string=this.need_count+"",t<=1800?(this.lbl_video_desc.string="\u7acb\u5373\u5b8c\u6210",this.lbl_video_desc.fontSize=26):(this.lbl_video_desc.string="\u52a0\u901f30\u5206\u949f",this.lbl_video_desc.fontSize=18),t<=0&&this.closeView())},I.prototype.onBtnCompleteNow=function(){var t=this,e=this.mapObjetData.type==d.BuildingType.Machining?40000016:40000014;u.default.showVideo(function(){t.mapObjetData&&(t.mapObjetData.type.sub_type==d.BuildingType.plant?(y.gm.ui.showTopBlock(),_.default.getInstance().playAniByType(d.EnumRoleAniType.sow2,1,function(){t.mapObjetData.reduceEndTime(t.index,1800),h.default.emit(d.GameEvent.update_slot_ui),_.default.getInstance().setStandByAni(),y.gm.ui.showTopBlock(!1)},2)):(t.mapObjetData.reduceEndTime(t.index,1800),h.default.emit(d.GameEvent.update_slot_ui)),t.closeMe())},e)},I.prototype.onBtnSandglass=function(){var t=this;this.need_count<=0||this.mapObjetData&&f.default.tryConsume([{id:d.CommonPropID.sandglass,num:this.need_count}],!0)&&(this.mapObjetData.type.sub_type==d.BuildingType.plant?(y.gm.ui.showTopBlock(),_.default.getInstance().playAniByType(d.EnumRoleAniType.sow2,1,function(){_.default.getInstance().setStandByAni(),y.gm.ui.showTopBlock(!1),t.mapObjetData.completeNow(t.index),h.default.emit(d.GameEvent.update_slot_ui)},2)):(this.mapObjetData.completeNow(this.index),h.default.emit(d.GameEvent.update_slot_ui)),this.closeMe())},s([a(cc.Label)],I.prototype,"lbl_time",void 0),s([a(cc.Sprite)],I.prototype,"spr_icon",void 0),s([a(cc.Node)],I.prototype,"nod_tip",void 0),s([a(cc.Label)],I.prototype,"lbl_sandglass_count",void 0),s([a(cc.Label)],I.prototype,"lbl_need_count",void 0),s([a(cc.Label)],I.prototype,"lbl_video_desc",void 0),s([a(m.default)],I.prototype,"finger",void 0),s([a(cc.Node)],I.prototype,"nod_vedio",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],LandTouchLimit:[function(t,e,o){"use strict";cc._RF.push(e,"cae579I4RNLA4dS7gVGhkDk","LandTouchLimit");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=i("ConfigUtils"),p=i("Const"),u=(d=cc._decorator).ccclass,d=(i=d.property,d.menu);function h(){var t=null!==s&&s.apply(this,arguments)||this;return t.cb=[],t}r(h,s=cc.Component),h.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),this.node._touchListener.setSwallowTouches(!1)},h.prototype.onEnable=function(){},h.prototype.start=function(){},h.prototype.onTouch=function(t){var e,o;l.BuildBuildingUtils.status==p.EnumBuildStatus.None&&(cc.log("touch TouchLimit",t),e=(o=t.target).convertToNodeSpaceAR(t.getLocation()),o=o.getComponent(cc.PolygonCollider),cc.Intersection.pointInPolygon(e,o.points)&&(cc.log("touch land"),t.stopPropagation(),0<this.cb.length&&cc.Component.EventHandler.emitEvents(this.cb,t)))},c([i(cc.Component.EventHandler)],h.prototype,"cb",void 0),d=c([u,d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/LandTouchLimit")],h),a.default=d,cc._RF.pop()},{}],LandUI_10013:[function(t,e,o){"use strict";cc._RF.push(e,"ab489t5hXpHXbhKzxa3fKbL","LandUI_10013");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("LandUI_Common"),d=i("IconUtils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_jiazi=null,t.nod_jiazi_2=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.default),h.prototype._updateFacade=function(){this.nod_lock.active=!1,this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.slotData.index&&(this.nod_lock.active=!0),this.slotData.isLock?(d.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/land/weikaifa_di_01",this.spr_facade),this.nod_jiazi.active=!1,this.nod_jiazi_2.active=!1):(d.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/land/gua_peng/guoyuan_di_01",this.spr_facade),this.nod_jiazi.active=!0,this.nod_jiazi_2.active=!0)},s([a(cc.Node)],h.prototype,"nod_jiazi",void 0),s([a(cc.Node)],h.prototype,"nod_jiazi_2",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],LandUI_Cattle:[function(t,e,o){"use strict";cc._RF.push(e,"512d61iKMRM9JgMHT9p1HVN","LandUI_Cattle");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("BuildInsideUnlockUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("JumpMgr"),f=i("IconUtils"),g=i("EventManager"),y=i("ChooseProductHelper"),m=i("LandUI");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.nod_touch=null,t.nod_tip_pos=null,t.nod_unlock=null,t.mapObject=null,t.data=null,t.index=0,t.prop=null,t.produceConfig=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=cc.Component),v.prototype.onEnable=function(){this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.on(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.on(d.GameEvent.updateLand,this.onUpdateLand,this),this.mapObject=this.getComponent(m.default).mapObject,this.index=this.getComponent(m.default).index,this.mapObject.mode==d.MapObjectMode.normal&&(this.objectData=this.mapObject.data,this.data=this.objectData.slots[this.index],this.updateUI())},v.prototype.onDisable=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.off(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.off(d.GameEvent.updateLand,this.onUpdateLand,this)},v.prototype.updateUI=function(){this._updateFacade(),this.data.checkHasProduce()?(this.produceConfig=u.ProduceUtils.getConfigByProduceID(this.data.getCurProduce().produceID),this.prop=u.PropUtils.getConfigByPropID(this.produceConfig.productions[0].id),f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/cowshed/np_shicao01",this.spr_facade)):f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/cowshed/np_shicao02",this.spr_facade),this.data.isLock?this.spr_facade.node.opacity=125:this.spr_facade.node.opacity=255,this.nod_unlock.active=!1,this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.data.index&&(this.nod_unlock.active=!0,this.spr_facade.node.opacity=255)},v.prototype._updateFacade=function(){},v.prototype.onChangeStatus=function(){u.BuildBuildingUtils.status!=d.EnumBuildStatus.None?this.nod_touch&&this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this):this.nod_touch&&this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this)},v.prototype.onTouchLand=function(t){var e,o,n=this;cc.log(" on touch land"),this.objectData.isLock()||u.BuildBuildingUtils.status!=d.EnumBuildStatus.None||(t.stopPropagation(),this.data.isLock?this.objectData.getFirstLockSlot().index==this.data.index&&(e=p.default.getBuildInsideLockConfig(this.objectData.objectID,this.data.index),h.gm.ui.showModule(h.gm.const.UnlockUI,function(t){t.spr_icon.spriteFrame=null,t.setNeedProp(e.need_prop),t.setDesc(""),t.setIconByStr(e.icon),t.callback=function(){n.objectData.unlockSlot(n.index),n.updateUI(),g.default.emit(d.GameEvent.updateLand,n.objectData.getUID())}})):this.data.checkHasProduce()?this.data.getCurProduce().canHarvest()||(o=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.nod_tip_pos&&(o=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),h.gm.ui.showModule(h.gm.const.LandTip,function(t){t.updatePos(o),t.setData(n.data.getCurProduce()),t.setNewData(n.objectData,n.index)})):(_.default.getInstance().jumpToPos(this.node,cc.v2(0,-this.node.height/2)),h.gm.ui.showModule(h.gm.const.ChooseFeed,function(t){t.setData(n.objectData)}),y.default.curBuildingUID=this.objectData.getUID(),y.default.curLandIndex=this.index))},v.prototype.onUpdateLand=function(t){this.mapObject.data.getUID()==t&&this.updateUI()},s([a(cc.Sprite)],v.prototype,"spr_facade",void 0),s([a(cc.Node)],v.prototype,"nod_touch",void 0),s([a(cc.Node)],v.prototype,"nod_tip_pos",void 0),s([a(cc.Node)],v.prototype,"nod_unlock",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],LandUI_Chicken:[function(t,e,o){"use strict";cc._RF.push(e,"b187faeW21Dk6nyP2Mtias6","LandUI_Chicken");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("BuildInsideUnlockUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("JumpMgr"),f=i("IconUtils"),g=i("EventManager"),y=i("ChooseProductHelper"),m=i("LandUI");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.nod_touch=null,t.nod_tip_pos=null,t.nod_unlock=null,t.mapObject=null,t.data=null,t.index=0,t.prop=null,t.produceConfig=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=cc.Component),v.prototype.onEnable=function(){this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.on(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.on(d.GameEvent.updateLand,this.onUpdateLand,this),this.mapObject=this.getComponent(m.default).mapObject,this.index=this.getComponent(m.default).index,this.mapObject.mode==d.MapObjectMode.normal&&(this.objectData=this.mapObject.data,this.data=this.objectData.slots[this.index],this.updateUI())},v.prototype.onDisable=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.off(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.off(d.GameEvent.updateLand,this.onUpdateLand,this)},v.prototype.updateUI=function(){this._updateFacade(),this.data.checkHasProduce()?(this.produceConfig=u.ProduceUtils.getConfigByProduceID(this.data.getCurProduce().produceID),this.prop=u.PropUtils.getConfigByPropID(this.produceConfig.productions[0].id),f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/chick_home/jp_shicao01",this.spr_facade)):f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/chick_home/jp_shicao02",this.spr_facade),this.data.isLock?this.spr_facade.node.opacity=125:this.spr_facade.node.opacity=255,this.nod_unlock.active=!1,this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.data.index&&(this.nod_unlock.active=!0,this.spr_facade.node.opacity=255)},v.prototype._updateFacade=function(){},v.prototype.onChangeStatus=function(){u.BuildBuildingUtils.status!=d.EnumBuildStatus.None?this.nod_touch&&this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this):this.nod_touch&&this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this)},v.prototype.onTouchLand=function(t){var e,o,n=this;cc.log(" on touch land"),this.objectData.isLock()||u.BuildBuildingUtils.status!=d.EnumBuildStatus.None||(t.stopPropagation(),this.data.isLock?this.objectData.getFirstLockSlot().index==this.data.index&&(e=p.default.getBuildInsideLockConfig(this.objectData.objectID,this.data.index),h.gm.ui.showModule(h.gm.const.UnlockUI,function(t){t.spr_icon.spriteFrame=null,t.setNeedProp(e.need_prop),t.setDesc(""),t.setIconByStr(e.icon),t.callback=function(){n.objectData.unlockSlot(n.index),n.updateUI(),g.default.emit(d.GameEvent.updateLand,n.objectData.getUID())}})):this.data.checkHasProduce()?this.data.getCurProduce().canHarvest()||(o=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.nod_tip_pos&&(o=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),h.gm.ui.showModule(h.gm.const.LandTip,function(t){t.updatePos(o),t.setData(n.data.getCurProduce()),t.setNewData(n.objectData,n.index)})):(_.default.getInstance().jumpToPos(this.node,cc.v2(0,-this.node.height/2)),h.gm.ui.showModule(h.gm.const.ChooseFeed,function(t){t.setData(n.objectData)}),y.default.curBuildingUID=this.objectData.getUID(),y.default.curLandIndex=this.index))},v.prototype.onUpdateLand=function(t){this.mapObject.data.getUID()==t&&this.updateUI()},s([a(cc.Sprite)],v.prototype,"spr_facade",void 0),s([a(cc.Node)],v.prototype,"nod_touch",void 0),s([a(cc.Node)],v.prototype,"nod_tip_pos",void 0),s([a(cc.Node)],v.prototype,"nod_unlock",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],LandUI_Common:[function(t,e,o){"use strict";cc._RF.push(e,"f4bedZpFk1P9LT0dbfT0XBQ","LandUI_Common");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("AssetMgr"),f=i("EventManager"),g=i("ChooseProductHelper"),y=i("LandUI"),m=i("BuildInsideUnlockUtils"),v=i("TMXUtils"),b=i("MainRoleMgr"),I=i("FlyIconCreator"),D=i("SpineUtils"),C=i("PlaceMgr"),O=i("DecorationMgr"),w=i("JumpMgr"),M=i("AniUtils"),P=i("LvMgr"),S=i("IconUtils");function T(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.nod_touch=null,t.spine=null,t.nod_tip_pos=null,t.nod_lock=null,t.nod_stand=null,t.nod_particle=null,t.mapObject=null,t.slotData=null,t.index=0,t.prop=null,t.produceConfig=null,t.curAni="",t}i=(a=cc._decorator).ccclass,a=a.property,c(T,l=cc.Component),T.prototype.onLoad=function(){this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),f.default.on(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),f.default.on(d.GameEvent.updateLand,this.onUpdateLand,this),f.default.on(d.GameEvent.produce,this.onProduce,this),this.spine.skeletonData=null,this.spine.node.active=!1,this.spine.timeScale=0},T.prototype.onEnable=function(){this.mapObject=this.getComponent(y.default).mapObject,this.index=this.getComponent(y.default).index,g.default.lands[this.mapObject.data.getUID()]||(g.default.lands[this.mapObject.data.getUID()]=[]),(g.default.lands[this.mapObject.data.getUID()][this.index]=this).mapObject.mode==d.MapObjectMode.normal?(this.objectData=this.mapObject.data,this.slotData=this.objectData.slots[this.index],this.updateUI()):this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this)},T.prototype.updateUI=function(){var t=this;this._updateFacade(),this.slotData.checkHasProduce()?(this.produceConfig=u.ProduceUtils.getConfigByProduceID(this.slotData.getCurProduce().produceID),this.prop=u.PropUtils.getConfigByPropID(this.produceConfig.productions[0].id),this.spine.skeletonData||_.default.getInstance().getResAsyn(d.BundleName.MAIN_UI,"ani/land_prop/land_ani_"+this.produceConfig.productions[0].id,sp.SkeletonData,function(e){t.spine.skeletonData=e})):this.spine.node.active=!1},T.prototype._updateFacade=function(){var t;this.nod_lock.active=!1,this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.slotData.index&&(this.nod_lock.active=!0),this.slotData.isLock?(t="texture/land/weikaifa_di_02",t=10011==this.objectData.objectID?"texture/land/weikaifa_di_02":"texture/land/weikaifa_di_01"):(t="texture/land/paddy/shuitian_di_01",10011==this.objectData.objectID?t="texture/land/paddy/shuitian_di_01":10012==this.objectData.objectID?t="texture/land/vegetable/nontian_di_gan01":10015==this.objectData.objectID&&(t="texture/land/dry_land/nontian_di_shi01")),S.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,t,this.spr_facade)},T.prototype.onChangeStatus=function(){u.BuildBuildingUtils.status!=d.EnumBuildStatus.None?this.nod_touch&&this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this):this.nod_touch&&this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this)},T.prototype.onTouchLand=function(t){var e,o=this;if(cc.log("onTouchLand"),!b.default.getInstance().mainRole.inChair&&(!C.default.getInstance().isBuildingMode()||h.gm.mapData.districtTouchLimit)&&(cc.log(this.mapObject.objectID,u.BigMapConfigUtils.getConfig(this.mapObject.objectID).name),h.gm.mainUI.canTouchDistrict(t.getLocation())&&(w.default.getInstance().jumpToPos(this.mapObject.node,cc.v2(348,440),!0),u.BuildBuildingUtils.status==d.EnumBuildStatus.None&&O.default.status==d.EnumDecorateStatus.None)))if(t.stopPropagation(),this.slotData.isLock)this.objectData.getFirstLockSlot().index==this.slotData.index?(n=this.objectData.getUnlockSlotCount(),(e=m.default.getBuildInsideLockConfig(this.objectData.objectID,n)).unlock_level&&P.default.getInstance().getLv()<e.unlock_level?h.gm.ui.showNotice(e.unlock_level+"\u7ea7\u89e3\u9501"):(h.gm.ui.showModule(h.gm.const.UnlockUI,function(t){t.spr_icon.spriteFrame=null,t.setNeedProp(e.need_prop),t.setDesc(""),t.setTitle(o.objectData.getConfig().name),t.setIconByStr(e.icon),t.callback=function(){o.objectData.unlockSlot(o.index),o.updateUI(),f.default.emit(d.GameEvent.updateLand,o.objectData.getUID())}}),this.flyToStandPos())):h.gm.ui.showNotice("\u8bf7\u5148\u89e3\u9501\u524d\u9762\u5730\u5757");else if(this.flyToStandPos(),this.slotData.checkHasProduce()){var n=this.slotData.getCurProduce();if(n.canHarvest()){if(0<this.objectData.harvest(this.index).length){this.showParticle(!1),this.spine.skeletonData=null,this.curAni="",this.updateUI();for(var i=this.getComponent(I.default),a=0,r=n.produceConfig.getProduction();a<r.length;a++){var c=r[a];c.id==d.CommonPropID.exp?p.default.flyIconToExp_2(c,i,c.num):p.default.flyIconToWarehouse_2(c,i,c.num)}}}else{var s=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.nod_tip_pos&&(s=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),h.gm.ui.showModule(h.gm.const.LandTip,function(t){t.updatePos(s),t.setData(o.slotData.getCurProduce()),t.setNewData(o.objectData,o.index)})}}else h.gm.ui.showModule(h.gm.const.ChooseProduct,function(t){t.setData(o.objectData)}),g.default.curBuildingUID=this.objectData.getUID(),g.default.curLandIndex=this.index},T.prototype.update=function(){this.slotData&&this.slotData.checkHasProduce()&&this.produceConfig&&this.mapObject.mode==d.MapObjectMode.normal&&this.mapObject.mode==d.MapObjectMode.normal&&this.updateSpine()},T.prototype.onUpdateLand=function(t){t==this.objectData.getUID()&&this.mapObject.mode==d.MapObjectMode.normal&&this.updateUI()},T.prototype.onProduce=function(t,e){var o=this;t==this.objectData.getUID()&&e==this.index&&p.default.getPrefab(d.BundleName.MAIN_UI,"prefabs/buildings/building_unlock_ani",function(t){var e=cc.instantiate(t);e.parent=o.node,M.default.playAni(e.getChildByName("nod_ani").getComponent(cc.Animation),"",function(){e.destroy()})})},T.prototype.onDestroy=function(){f.default.off(d.GameEvent.updateLand,this.onUpdateLand,this)},T.prototype.flyToStandPos=function(){var t;this.nod_stand&&(t=this.nod_stand.convertToWorldSpaceAR(cc.v2(0,0)),t=h.gm.mainUI.tileMap_bg.node.convertToNodeSpaceAR(t),t=v.default.touchToTile(t,h.gm.mapData.mapSize,h.gm.const.GridSize),b.default.getInstance().setBackScale(!1,1),b.default.getInstance().flyTo(t),h.gm.mapData.resetCurTouchObject(),b.default.getInstance().setStandByAni())},T.prototype.setAni=function(t,e){void 0===e&&(e=!0),this.spine.node.active=!0,this.curAni!=t&&(this.spine.setAnimation(0,t,e),this.curAni=t,cc.log("set ani",t,this.spine.animation))},T.prototype.updateSpine=function(){var t=this.slotData.getCurProduce();this.spine.skeletonData&&(t.canHarvest()?(this.spine.timeScale=1,this.setAni("ani_idle"),this.showParticle()):(this.spine.timeScale=0,this.setAni("ani_grow",!1),D.default.updateSpine(this.spine,(t.produceConfig.getPeriodTime()-t.getLeftTime())/t.produceConfig.getPeriodTime()),this.showParticle(!1)))},T.prototype.showParticle=function(t){void 0===t&&(t=!0),this.nod_particle&&(this.nod_particle.active=t)},s([a(cc.Sprite)],T.prototype,"spr_facade",void 0),s([a(cc.Node)],T.prototype,"nod_touch",void 0),s([a(sp.Skeleton)],T.prototype,"spine",void 0),s([a(cc.Node)],T.prototype,"nod_tip_pos",void 0),s([a(cc.Node)],T.prototype,"nod_lock",void 0),s([a(cc.Node)],T.prototype,"nod_stand",void 0),s([a(cc.Node)],T.prototype,"nod_particle",void 0),i=s([i],T),r.default=i,cc._RF.pop()},{}],LandUI_Pig:[function(t,e,o){"use strict";cc._RF.push(e,"459a9dW1UlN6p42FoLwbu9X","LandUI_Pig");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("BuildInsideUnlockUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("JumpMgr"),f=i("IconUtils"),g=i("EventManager"),y=i("ChooseProductHelper"),m=i("LandUI");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.nod_touch=null,t.nod_tip_pos=null,t.nod_unlock=null,t.mapObject=null,t.data=null,t.index=0,t.prop=null,t.produceConfig=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=cc.Component),v.prototype.onEnable=function(){this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.on(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.on(d.GameEvent.updateLand,this.onUpdateLand,this),this.mapObject=this.getComponent(m.default).mapObject,this.index=this.getComponent(m.default).index,this.mapObject.mode==d.MapObjectMode.normal&&(this.objectData=this.mapObject.data,this.data=this.objectData.slots[this.index],this.updateUI())},v.prototype.onDisable=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this),g.default.off(d.GameEvent.changeBuildStatus,this.onChangeStatus,this),g.default.off(d.GameEvent.updateLand,this.onUpdateLand,this)},v.prototype.updateUI=function(){this._updateFacade(),this.data.checkHasProduce()?(this.produceConfig=u.ProduceUtils.getConfigByProduceID(this.data.getCurProduce().produceID),this.prop=u.PropUtils.getConfigByPropID(this.produceConfig.productions[0].id),f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/piggery/zp_shicao01",this.spr_facade)):f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/piggery/zp_shicao02",this.spr_facade),this.data.isLock?this.spr_facade.node.opacity=125:this.spr_facade.node.opacity=255,this.nod_unlock.active=!1,this.objectData.getFirstLockSlot()&&this.objectData.getFirstLockSlot().index==this.data.index&&(this.nod_unlock.active=!0,this.spr_facade.node.opacity=255)},v.prototype._updateFacade=function(){},v.prototype.onChangeStatus=function(){u.BuildBuildingUtils.status!=d.EnumBuildStatus.None?this.nod_touch&&this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchLand,this):this.nod_touch&&this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchLand,this)},v.prototype.onTouchLand=function(t){var e,o,n=this;cc.log(" on touch land"),this.objectData.isLock()||u.BuildBuildingUtils.status!=d.EnumBuildStatus.None||(t.stopPropagation(),this.data.isLock?this.objectData.getFirstLockSlot().index==this.data.index&&(e=p.default.getBuildInsideLockConfig(this.objectData.objectID,this.data.index),h.gm.ui.showModule(h.gm.const.UnlockUI,function(t){t.setNeedProp(e.need_prop),t.setDesc(""),t.setIconByStr(e.icon),t.callback=function(){n.objectData.unlockSlot(n.index),n.updateUI(),g.default.emit(d.GameEvent.updateLand,n.objectData.getUID())}})):this.data.checkHasProduce()?this.data.getCurProduce().canHarvest()||(o=this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.nod_tip_pos&&(o=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),h.gm.ui.showModule(h.gm.const.LandTip,function(t){t.updatePos(o),t.setData(n.data.getCurProduce()),t.setNewData(n.objectData,n.index)})):(_.default.getInstance().jumpToPos(this.node,cc.v2(0,-this.node.height/2)),h.gm.ui.showModule(h.gm.const.ChooseFeed,function(t){t.setData(n.objectData)}),y.default.curBuildingUID=this.objectData.getUID(),y.default.curLandIndex=this.index))},v.prototype.onUpdateLand=function(t){this.mapObject.data.getUID()==t&&this.updateUI()},s([a(cc.Sprite)],v.prototype,"spr_facade",void 0),s([a(cc.Node)],v.prototype,"nod_touch",void 0),s([a(cc.Node)],v.prototype,"nod_tip_pos",void 0),s([a(cc.Node)],v.prototype,"nod_unlock",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],LandUI:[function(t,e,o){"use strict";cc._RF.push(e,"23c1dPcilpDLrNRyO157mXE","LandUI");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){var t=null!==c&&c.apply(this,arguments)||this;return t.mapObject=null,t.index=0,t}i=s.ccclass,s.property,r(l,c=cc.Component),i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],Lands:[function(t,e,o){"use strict";cc._RF.push(e,"70b1c6Jh8VNF7lEDwPhjATv","Lands");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("MapObject"),u=i("LandUI");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.mapObject=null,t.nod_lands_parent=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=cc.Component),d.prototype.onLoad=function(){for(var t=this.nod_lands_parent||this.node,e=t.children.length,o=0;o<e;o++){var n=t.children[o].getComponent(u.default);n?(n.index=o,n.mapObject=this.mapObject):cc.error("not found component")}},d.prototype.start=function(){},s([a(p.default)],d.prototype,"mapObject",void 0),s([a(cc.Node)],d.prototype,"nod_lands_parent",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],Launch:[function(t,e,o){"use strict";cc._RF.push(e,"d8aeb53Y3tO2Ks9sQyWcyfw","Launch");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("Const"),d=i("GameMgr"),h=i("LocalData"),_=i("SDKManager"),f=i("AudioPlayer"),g=i("EventManager"),y=i("StorageUtil"),m=i("TimeUtils"),v=i("NetUtils"),b=i("SaveMgr");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_launch=null,t._wait_time=0,t._is_get_player=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=cc.Component),I.prototype.onLoad=function(){y.default.setKeyPrefix("farm_operation_"),g.default.on(u.GameEvent.login_done,this._onLoginEnd,this),g.default.on(u.GameEvent.get_server_data_done,this._onServerDataEnd,this);var t=y.default.get("GameUUID",!0),e=cc.sys.localStorage.getItem(p.default.AppName+"_GameUUID");t||e||(cc.warn("========================\u4e0a\u62a5\u65b0\u73a9\u5bb6(\u672c\u5730\u6570\u636e\u6ca1\u6709gameUUID\u5219\u4e0a\u62a5)"),v.ReportData.instance.report_point(10010)),d.gm.ui.init(),v.ReportData.instance.report_point(1e4),cc.director.getCollisionManager().enabled=!0,console.log(" ===========before loading"),d.gm.channel.check_is_app()?this.realNameConfirm():this.gameBegin()},I.prototype.realNameConfirm=function(){var t=cc.sys.localStorage.getItem("playAnti"),e=!1;t||(cc.sys.localStorage.setItem("playAnti","0"),t=0),e="0"!=t,"xiaomi"==_.SDKManager.instance.getChannelAdName()&&(e=!1);var o=this;"tap-tap-game"==d.gm.channel.get_channel_name()||"iphone-game"==d.gm.channel.get_channel_name()||"ipad-game"==d.gm.channel.get_channel_name()?e||!d.gm.channel.get_is_real_name()?(console.log("realNameConfirm -gameBegin"),this.userNoticePanel()):(console.log("realNameConfirm -realNameConfirm"),d.gm.data.event_emitter.on("realNameConfirmIsOk",function(){cc.sys.localStorage.setItem("playAnti","1"),o.userNoticePanel()},this),e=Date.now().toString(36)+"_"+Math.random().toString(36).substr(2),_.SDKManager.instance.realNameConfirm(e)):(console.log("realNameConfirm -show_game_main_ui---1"),this.userNoticePanel())},I.prototype.userNoticePanel=function(){var t=this,e=cc.sys.localStorage.getItem("uiState");e||(cc.sys.localStorage.setItem("uiState","0"),e="0"),"0"==e?(d.gm.ui.set_module_args(d.gm.const.UserNoticePanel.key,{gameStart:0}),d.gm.data.event_emitter.on("userNoticePanelIsOk",function(){cc.sys.localStorage.setItem("uiState","1"),d.gm.data.event_emitter.off("userNoticePanelIsOk",t.gameBegin,t),t.gameBegin()},this),d.gm.ui.showModule(d.gm.const.UserNoticePanel)):this.gameBegin()},I.prototype.gameBegin=function(){d.gm.channel.init(function(){}),!d.gm.channel.check_is_app()&&d.gm.channel.get_is_save()||(this._is_get_player=!0,this.loadData()),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onShow,this)},I.prototype.loadData=function(){h.default.getInstance().load();var t=y.default.get("debug_version",!0)||0;p.default.allow_clear_local_data&&p.default.debug_version>t&&(y.default.clear(),h.default.getInstance().load()),b.default.getInstance().readData()},I.prototype._onLoginEnd=function(){var t=this;!d.gm.channel.check_is_app()&&d.gm.channel.get_is_save()?b.default.getInstance().getPlayerDataFromServer(null):d.gm.ui.showModule(d.gm.const.Loading,function(){t.nod_launch&&(t.nod_launch.destroy(),t.nod_launch=null)})},I.prototype._onServerDataEnd=function(){var t=this;this._is_get_player=!0,d.gm.ui.showModule(d.gm.const.Loading,function(){t.nod_launch&&(t.nod_launch.destroy(),t.nod_launch=null)})},I.prototype.start=function(){},I.prototype.onHide=function(){console.log("on hide"),m.default.resetTimeSecond(),g.default.emit(u.GameEvent.OnHide),cc.game.pause()},I.prototype.onShow=function(){console.log("on show"),cc.game.resume(),f.default.resumeAllMusic(),g.default.emit(u.GameEvent.Onshow),m.default.getNetTime()},I.prototype.update=function(){},s([a(cc.Node)],I.prototype,"nod_launch",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],LeftItemCtrl:[function(t,e,o){"use strict";cc._RF.push(e,"4cf9cTOCUZI5J8uBMD5YoIK","LeftItemCtrl");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("NodFoodItem"),u=i("LeftItemStall"),d=i("NodTask"),h=i("LeftItemMgr"),_=i("LvMgr");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_bubble=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=cc.Component),f.prototype.onLoad=function(){h.default.getInstance().leftItems.push(this)},f.prototype.onTouchNode=function(){for(var t=0,e=h.default.getInstance().leftItems;t<e.length;t++){var o=e[t];o.node!=this.node?o.nod_bubble&&(o.nod_bubble.active=!1):o.getComponent(d.default)?o.getComponent(d.default).onTouchNode():o.getComponent(p.default)?o.getComponent(p.default).onTouchNode():o.getComponent(u.default)&&o.getComponent(u.default).onTouch()}},f.prototype.showAndAutoHide=function(){for(var t=0,e=h.default.getInstance().leftItems;t<e.length;t++){var o=e[t];o.nod_bubble&&(o.nod_bubble.active=!1)}this.nod_bubble&&this.getComponent(d.default)&&this.getComponent(d.default).onTouchNode(),this.nod_bubble&&this.nod_bubble.active&&7<=_.default.getInstance().getLv()&&(this.unschedule(this.hide),this.scheduleOnce(this.hide,10))},f.prototype.hide=function(){this.nod_bubble.active=!1},s([a(cc.Node)],f.prototype,"nod_bubble",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],LeftItemMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea1c55SDFJNrI/pK/waRPxU","LeftItemMgr");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.leftItems=[],t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),r=s,c.default=r,cc._RF.pop()},{}],LeftItemStall:[function(t,e,o){"use strict";cc._RF.push(e,"a6604zJdSBLopQ3FGDwChM9","LeftItemStall");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("GameMgr"),d=i("JumpMgr");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=cc.Component),h.prototype.onLoad=function(){},h.prototype.onTouch=function(){p.default.isInMainScene()?d.default.getInstance().jumpToGrid(cc.v2(117,148)):u.gm.ui.showNotice("\u8bf7\u56de\u5230\u5bb6\u64cd\u4f5c")},s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],Line:[function(t,e,o){"use strict";cc._RF.push(e,"6d858Dh8O5HvoPe55hLvyun","Line");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.Point=void 0;var a=n("TMXUtils"),r=n("GameMgr"),c=n("MapInsideMgr");function s(){this.points=[],this.curIndex=0}s.createTruckPath=function(){for(var t=c.default.getInstance().npc_path.nod_truck_path,e=new s,o=0;o<t.length;o++){var n=l.createByPoint(t[o],o);e.points.push(n)}return e},s.createByNums=function(t){for(var e=new s,o=0;o<t.length;o++){var n=this.getPointDataByName(c.default.getInstance().npc_path.nod_npc_path,"n_"+t[o]);n=l.createByPoint(n,o),e.points.push(n)}return e},s.createGridsByNums=function(t){for(var e=[],o=0;o<t.length;o++){var n=this.getPointDataByName(c.default.getInstance().npc_path.nod_npc_path,"n_"+t[o]);n=a.default.touchToTile(cc.v2(n.pos.x,n.pos.y),r.gm.mapData.mapSize,r.gm.const.GridSize),e.push(n)}return e},s.createByGrids=function(t){void 0===t&&(t=[]);for(var e=new s,o=0;o<t.length;o++){var n=l.createByGrid(t[o],o);e.points.push(n)}return e},s.prototype.getGrids=function(){for(var t=[],e=0,o=this.points;e<o.length;e++){var n=o[e];t.push(n.gridPos)}return t},s.prototype.getBegin=function(){return this.points[0]},s.prototype.getCur=function(){return this.points[this.curIndex]},s.prototype.setCurIndex=function(t){this.curIndex=t},s.prototype.onMoveToNextPoint=function(){this.curIndex++},s.prototype.onMoveToPrePoint=function(){this.curIndex--},s.prototype.getNextPoint=function(){var t=this.curIndex+1;return this.points[t]},s.prototype.prePoint=function(){var t=this.curIndex-1;return this.points[t]},s.prototype.getEndingIndex=function(){return this.points.length-1},s.prototype.getLastPoint=function(){return this.points[this.points.length-1]},s.getPointDataByName=function(t,e){for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i.point_name==e)return i}},n=s,i.default=n;var l=(p.createByPoint=function(t,e){var o=new p;return"n_wait"==t.point_name?o.waitPoint=!0:"n_end"==t.point_name&&(o.isEnd=!0),o.index=e,o.normal_pos=cc.v2(t.pos.x,t.pos.y),o.gridPos=a.default.touchToTile(o.normal_pos,r.gm.mapData.mapSize,r.gm.const.GridSize),o},p.createByGrid=function(t,e){var o=new p;return o.index=e,o.gridPos=t,o},p);function p(){this.waitPoint=!1,this.normal_pos=null,this.index=0,this.isEnd=!1,this.gridPos=null}i.Point=l,cc._RF.pop()},{}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"d0605yZyp5KIJSmLcBKqBFH","ListItem");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l,p=cc._decorator,u=p.ccclass,d=p.property,h=p.disallowMultiple,_=p.menu;function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=s.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}i=p.executionOrder,(p=s=s||{})[p.NONE=0]="NONE",p[p.TOGGLE=1]="TOGGLE",p[p.SWITCH=2]="SWITCH",r(f,l=cc.Component),Object.defineProperty(f.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case s.TOGGLE:this.selectedFlag.active=t;break;case s.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!1,configurable:!0}),f.prototype.onLoad=function(){var t;this.selectedMode==s.SWITCH&&(t=this.selectedFlag.getComponent(cc.Sprite),this._unselectedSpriteFrame=t.spriteFrame)},f.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},f.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&0<this.list.selectedMode&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},f.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},f.prototype.createEvt=function(t,e,o){if(void 0===o&&(o=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||t.node,n.component=t.comName,n.handler=e,n}},f.prototype.showAni=function(t,e,o){var n,i=this;switch(t){case 0:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:2*i.node.height});break;case 1:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:2*i.node.width});break;case 2:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{y:-2*i.node.height});break;case 3:n=cc.tween(i.node).to(.2,{scale:.7}).by(.3,{x:-2*i.node.width});break;default:n=cc.tween(i.node).to(.3,{scale:.1})}(e||o)&&n.call(function(){if(o){i.list._delSingleItem(i.node);for(var t=i.list.displayData.length-1;0<=t;t--)if(i.list.displayData[t].id==i.listId){i.list.displayData.splice(t,1);break}}e()}),n.start()},f.prototype.onClickThis=function(){this.list.selectedId=this.listId},c([d({type:cc.Sprite})],f.prototype,"icon",void 0),c([d({type:cc.Node})],f.prototype,"title",void 0),c([d({type:cc.Enum(s)})],f.prototype,"selectedMode",void 0),c([d({type:cc.Node,visible:function(){return this.selectedMode>s.NONE}})],f.prototype,"selectedFlag",void 0),c([d({type:cc.SpriteFrame,visible:function(){return this.selectedMode==s.SWITCH}})],f.prototype,"selectedSpriteFrame",void 0),c([d({})],f.prototype,"adaptiveSize",void 0),i=c([u,h(),_("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),i(-5001)],f),a.default=i,cc._RF.pop()},{}],List:[function(t,e,o){"use strict";cc._RF.push(e,"538d10Dh19ABqZKS7y9n3Oy","List");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p,u,d,h=(y=cc._decorator).ccclass,_=y.property,f=y.disallowMultiple,g=y.menu,y=(a=y.executionOrder,y.requireComponent),m=i("ListItem");function v(){var t=null!==d&&d.apply(this,arguments)||this;return t.templateType=l.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=p.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=u.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}(i=l=l||{})[i.NODE=1]="NODE",i[i.PREFAB=2]="PREFAB",(i=p=p||{})[i.NORMAL=1]="NORMAL",i[i.ADHERING=2]="ADHERING",i[i.PAGE=3]="PAGE",(i=u=u||{})[i.NONE=0]="NONE",i[i.SINGLE=1]="SINGLE",i[i.MULT=2]="MULT",c(v,d=cc.Component),Object.defineProperty(v.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){0<=t&&t<=6&&(this._updateRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e=this;switch(e.selectedMode){case u.SINGLE:if(!e.repeatEventSingle&&t==e._selectedId)return;var o=e.getItemByListId(t),n=void 0;0<=e._selectedId?e._lastSelectedId=e._selectedId:e._lastSelectedId=null,e._selectedId=t,o&&((n=o.getComponent(m.default)).selected=!0),0<=e._lastSelectedId&&e._lastSelectedId!=e._selectedId&&(i=e.getItemByListId(e._lastSelectedId))&&(i.getComponent(m.default).selected=!1),e.selectedEvent&&cc.Component.EventHandler.emitEvents([e.selectedEvent],o,t%this._actualNumItems,null==e._lastSelectedId?null:e._lastSelectedId%this._actualNumItems);break;case u.MULT:if(!(o=e.getItemByListId(t)))return;n=o.getComponent(m.default),0<=e._selectedId&&(e._lastSelectedId=e._selectedId),e._selectedId=t;var i=!n.selected;n.selected=i,n=e.multSelected.indexOf(t),i&&n<0?e.multSelected.push(t):!i&&0<=n&&e.multSelected.splice(n,1),e.selectedEvent&&cc.Component.EventHandler.emitEvents([e.selectedEvent],o,t%this._actualNumItems,null==e._lastSelectedId?null:e._lastSelectedId%this._actualNumItems,i)}},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=p.PAGE||(e.curPageNum=e.nearestListId);else if(e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems),(t=e.content.getComponent(cc.Layout))&&(t.enabled=!0),e._delRedundantItem(),(e.firstListId=0)<e.frameByFrameRenderNum){for(var o=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,n=0;n<o;n++)e._createOrUpdateItem2(n);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(n=0;n<e._numItems;n++)e._createOrUpdateItem2(n);e.displayItemNum=e._numItems}},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),v.prototype.onLoad=function(){this._init()},v.prototype.onDestroy=function(){cc.isValid(this._itemTmp)&&this._itemTmp.destroy(),cc.isValid(this.tmpNode)&&this.tmpNode.destroy(),this._pool&&this._pool.clear()},v.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},v.prototype.onDisable=function(){this._unregisterEvent()},v.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},v.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},v.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==l.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=p.ADHERING&&t._slideMode!=p.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},v.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=+t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);this._scrollView._autoScrollAttenuate&&(e=(o=e-1)*o*o*o*o+1),t=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e));var o=this._scrollView.getScrollEndedEventTiming();o=Math.abs(e-1)<=o,Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),o&&(this._scrollView._autoScrolling=!1),t=t.sub(this._scrollView.getContentPosition()),this._scrollView._moveContent(this._scrollView._clampDelta(t),o),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},v.prototype.setTemplateItem=function(t){if(t){var e,o=this;switch(o._itemTmp=t,o._resizeMode==cc.Layout.ResizeMode.CHILDREN?o._itemSize=o._layout.cellSize:o._itemSize=cc.size(t.width,t.height),t.getComponent(m.default)||(o.selectedMode=u.NONE),(e=t.getComponent(cc.Widget))&&e.enabled&&(o._needUpdateWidget=!0),o.selectedMode==u.MULT&&(o.multSelected=[]),o._align){case cc.Layout.Type.HORIZONTAL:o._colLineNum=1,o._sizeType=!1;break;case cc.Layout.Type.VERTICAL:o._colLineNum=1,o._sizeType=!0;break;case cc.Layout.Type.GRID:switch(o._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=o.content.width-o._leftGap-o._rightGap;o._colLineNum=Math.floor((n+o._columnGap)/(o._itemSize.width+o._columnGap)),o._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:n=o.content.height-o._topGap-o._bottomGap,o._colLineNum=Math.floor((n+o._lineGap)/(o._itemSize.height+o._lineGap)),o._sizeType=!1}}}},v.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},v.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:n=e._customSize?(t=e._getFixedSize(null),e._leftGap+t.val+e._itemSize.width*(e._numItems-t.count)+e._columnGap*(e._numItems-1)+e._rightGap):e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:n=e._customSize?(t=e._getFixedSize(null),e._topGap+t.val+e._itemSize.height*(e._numItems-t.count)+e._lineGap*(e._numItems-1)+e._bottomGap):e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum),n=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:o=Math.ceil(e._numItems/e._colLineNum),n=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var i=e.content.getComponent(cc.Layout);i&&(i.enabled=!1),e._allItemSize=n,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic&&(a=e._sizeType?e.node.height:e.node.width,e._cyclicPos1=0,a-=e._cyclicPos1,e._cyclicNum=Math.ceil(a/e._allItemSizeNoEdge)+1,a=e._sizeType?e._lineGap:e._columnGap,e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+a,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+a*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=a*(e._cyclicNum-1)),e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var a=e._lack&&e.lackCenter||!e.lackSlide?.1:0;(a=e._lack?(e._sizeType?e.node.height:e.node.width)-a:e.cyclic?e._cyclicAllItemSize:e._allItemSize)<0&&(a=0),e._sizeType?e.content.height=a:e.content.width=a},v.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&0<this.frameCount)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition(),o=(e=this._sizeType?e.y:e.x,this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap)),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var i,a,r,c;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,r=this.viewBottom):(a=this.viewRight,c=this.viewLeft),this._virtual){this.displayData=[];var s,l=0,p=this._numItems-1;if(this._customSize)for(var u=!1;l<=p&&!u;l++)switch(s=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:s.right>=c&&s.left<=a?this.displayData.push(s):0!=l&&0<this.displayData.length&&(u=!0);break;case cc.Layout.Type.VERTICAL:s.bottom<=i&&s.top>=r?this.displayData.push(s):0!=l&&0<this.displayData.length&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:s.bottom<=i&&s.top>=r?this.displayData.push(s):0!=l&&0<this.displayData.length&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:s.right>=c&&s.left<=a?this.displayData.push(s):0!=l&&0<this.displayData.length&&(u=!0)}}else{var d=this._itemSize.width+this._columnGap,h=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(c-this._leftGap)/d,p=(a-this._leftGap)/d;break;case 2:l=(-a-this._rightGap)/d,p=(-c-this._rightGap)/d;break;case 3:l=(-i-this._topGap)/h,p=(-r-this._topGap)/h;break;case 4:l=(r-this._bottomGap)/h,p=(i-this._bottomGap)/h}for(l=Math.floor(l)*this._colLineNum,p=Math.ceil(p)*this._colLineNum,l<0&&(l=0),--p>=this._numItems&&(p=this._numItems-1);l<=p;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)this._lastDisplayData=[];else{if(this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length,t=this._lastDisplayData.length,(o=this.displayItemNum!=t)&&(0<this.frameByFrameRenderNum&&this._lastDisplayData.sort(function(t,e){return t-e}),o=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[t-1]),this._forceUpdate||o)if(0<this.frameByFrameRenderNum)0<this._numItems?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var _=0;_<this.displayItemNum;_++)this._createOrUpdateItem(this.displayData[_]);this._forceUpdate=!1}this._calcNearestItem()}}}},v.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=0<t.x?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(0<t.x?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(0<t.y?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=0<t.y?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},v.prototype._calcItemPos=function(t){var e,o,n,i,a,r,c,s;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:return s=this._customSize?(r=this._getFixedSize(t),c=this._leftGap+(this._itemSize.width+this._columnGap)*(t-r.count)+(r.val+this._columnGap*r.count),0<(l=this._customSize[t])?l:this._itemSize.width):(c=this._leftGap+(this._itemSize.width+this._columnGap)*t,this._itemSize.width),this.lackCenter&&(c-=this._leftGap,c+=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,left:c,right:n=c+s,x:c+this._itemTmp.anchorX*s,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return s=this._customSize?(r=this._getFixedSize(t),n=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-r.count)-(r.val+this._columnGap*r.count),0<(l=this._customSize[t])?l:this._itemSize.width):(n=-this._rightGap-(this._itemSize.width+this._columnGap)*t,this._itemSize.width),this.lackCenter&&(n+=this._rightGap,n-=this.content.width/2-this._allItemSizeNoEdge/2),{id:t,right:n,left:c=n-s,x:c+this._itemTmp.anchorX*s,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return p=this._customSize?(r=this._getFixedSize(t),e=-this._topGap-(this._itemSize.height+this._lineGap)*(t-r.count)-(r.val+this._lineGap*r.count),0<(l=this._customSize[t])?l:this._itemSize.height):(e=-this._topGap-(this._itemSize.height+this._lineGap)*t,this._itemSize.height),this.lackCenter&&(e+=this._topGap,e-=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:e,bottom:o=e-p,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*p};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var l,p=this._customSize?(r=this._getFixedSize(t),o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-r.count)+(r.val+this._lineGap*r.count),0<(l=this._customSize[t])?l:this._itemSize.height):(o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,this._itemSize.height);return this.lackCenter&&(o-=this._bottomGap,o+=this.content.height/2-this._allItemSizeNoEdge/2),{id:t,top:e=o+p,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*p}}case cc.Layout.Type.GRID:var u=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:a=(o=(e=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,a=o+this._itemTmp.anchorY*this._itemSize.height}switch(i=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:i+=this._itemTmp.anchorX*this._itemSize.width,i-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:i+=(1-this._itemTmp.anchorX)*this._itemSize.width,i-=(1-this.content.anchorX)*this.content.width,i*=-1}return{id:t,top:e,bottom:o,x:i,y:a};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:n=(c=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,i=c+this._itemTmp.anchorX*this._itemSize.width,i-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:i=(c=(n=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,i+=(1-this.content.anchorX)*this.content.width}switch(a=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:a-=(1-this._itemTmp.anchorY)*this._itemSize.height,a+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:a-=this._itemTmp.anchorY*this._itemSize.height,a+=this.content.anchorY*this.content.height,a*=-1}return{id:t,left:c,right:n,x:i,y:a}}}},v.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);return e?(t={id:t,x:e.x,y:e.y},this._sizeType?(t.top=e.y+e.height*(1-e.anchorY),t.bottom=e.y-e.height*e.anchorY):(t.left=e.x-e.width*e.anchorX,t.right=e.x+e.width*(1-e.anchorX)),t):null},v.prototype.getItemPos=function(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},v.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e,o=0,n=0;for(e in this._customSize)parseInt(e)<t&&(o+=this._customSize[e],n++);return{val:o,count:n}},v.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},v.prototype._onScrollEnded=function(){var t,e=this;e.curScrollIsTouch=!1,null!=e.scrollToListId&&(t=e.getItemByListId(e.scrollToListId),e.scrollToListId=null,t&&cc.tween(t).to(.1,{scale:1.06}).to(.1,{scale:1}).start()),e._onScrolling(),e._slideMode!=p.ADHERING||e.adhering?e._slideMode==p.PAGE&&(null!=e._beganPos&&e.curScrollIsTouch?this._pageAdhere():e.adhere()):e.adhere()},v.prototype._onTouchStart=function(t,e){if(!(this._scrollView.hasNestedViewGroup&&this._scrollView.hasNestedViewGroup(t,e)||(this.curScrollIsTouch=!0,t.eventPhase===cc.Event.AT_TARGET&&t.target===this.node))){for(var o=t.target;null==o._listId&&o.parent;)o=o.parent;this._scrollItem=null!=o._listId?o:t.target}},v.prototype._onTouchUp=function(){this._scrollPos=null,this._slideMode==p.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode==p.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null},v.prototype._onTouchCancelled=function(t,e){var o=this;o._scrollView.hasNestedViewGroup&&o._scrollView.hasNestedViewGroup(t,e)||t.simulate||(o._scrollPos=null,o._slideMode==p.ADHERING?(o.adhering&&(o._adheringBarrier=!0),o.adhere()):o._slideMode==p.PAGE&&(null!=o._beganPos?o._pageAdhere():o.adhere()),this._scrollItem=null)},v.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},v.prototype._onItemAdaptive=function(t){var e;(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height)&&(this._customSize||(this._customSize={}),e=this._sizeType?t.height:t.width,this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3)))))},v.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(0<t.elasticTop||0<t.elasticRight||0<t.elasticBottom||0<t.elasticLeft)){var e=t._sizeType?t.viewTop:t.viewLeft,o=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>o)switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},v.prototype.adhere=function(){var t,e=this;e.checkInited()&&!(0<e.elasticTop||0<e.elasticRight||0<e.elasticBottom||0<e.elasticLeft)&&(e.adhering=!0,e._calcNearestItem(),t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width),e.scrollTo(e.nearestListId,.7,t))},v.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var o=this.displayData[e];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==p.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==p.PAGE&&(this.curPageNum=this.nearestListId)},v.prototype._createOrUpdateItem=function(t){var e,o,n=this.getItemByListId(t.id);n?this._forceUpdate&&this.renderEvent&&(n.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(n),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t.id%this._actualNumItems)):(n=(e=0<this._pool.size())?this._pool.get():cc.instantiate(this._itemTmp),e&&cc.isValid(n)||(n=cc.instantiate(this._itemTmp),e=!1),n._listId!=t.id&&(n._listId=t.id,n.setContentSize(this._itemSize)),n.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(n),this.content.addChild(n),e&&this._needUpdateWidget&&(o=n.getComponent(cc.Widget))&&o.updateAlignment(),n.setSiblingIndex(this.content.childrenCount-1),o=n.getComponent(m.default),(n.listItem=o)&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t.id%this._actualNumItems)),this._resetItemSize(n),this._updateListItem(n.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},v.prototype._createOrUpdateItem2=function(t){var e,o=this.content.children[t];o?this._forceUpdate&&this.renderEvent&&(o._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)):((o=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(o),e=o.getComponent(m.default),(o.listItem=e)&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,t%this._actualNumItems)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},v.prototype._updateListItem=function(t){if(t&&this.selectedMode>u.NONE){var e=t.node;switch(this.selectedMode){case u.SINGLE:t.selected=this.selectedId==e._listId;break;case u.MULT:t.selected=0<=this.multSelected.indexOf(e._listId)}}},v.prototype._resetItemSize=function(){},v.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t);t=this.getItemPos(e._listId),e.setPosition(t.x,t.y)},v.prototype.setMultSelected=function(t,e){if(this.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)this.multSelected=t;else{var o=void 0,n=void 0;if(e)for(var i=t.length-1;0<=i;i--)o=t[i],(n=this.multSelected.indexOf(o))<0&&this.multSelected.push(o);else for(i=t.length-1;0<=i;i--)o=t[i],0<=(n=this.multSelected.indexOf(o))&&this.multSelected.splice(n,1)}this._forceUpdate=!0,this._onScrolling()}},v.prototype.getMultSelected=function(){return this.multSelected},v.prototype.hasMultSelected=function(t){return this.multSelected&&0<=this.multSelected.indexOf(t)},v.prototype.updateItem=function(t){if(this.checkInited())for(var e=0,o=(t=Array.isArray(t)?t:[t]).length;e<o;e++){var n=t[e],i=this.getItemByListId(n);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,n%this._actualNumItems)}},v.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},v.prototype.getItemByListId=function(t){if(this.content)for(var e=this.content.childrenCount-1;0<=e;e--){var o=this.content.children[e];if(o._listId==t)return o}},v.prototype._getOutsideItem=function(){for(var t,e=[],o=this.content.childrenCount-1;0<=o;o--)t=this.content.children[o],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},v.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;0<=e;e--){var o=t[e];if(!this._scrollItem||o._listId!=this._scrollItem._listId){o.isCached=!0,this._pool.put(o);for(var n=this._lastDisplayData.length-1;0<=n;n--)if(this._lastDisplayData[n]==o._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},v.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy()},v.prototype.aniDelItem=function(t,e,o){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(!e)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,a,r,c=n.getItemByListId(t);c?(i=c.getComponent(m.default),n._aniDelRuning=!0,n._aniDelCB=e,n._aniDelItem=c,n._aniDelBeforePos=c.position,n._aniDelBeforeScale=c.scale,a=n.displayData[n.displayData.length-1].id,r=i.selected,i.showAni(o,function(){var o,i,s;if(null!=(o=a<n._numItems-2?a+1:o)?(l=n._calcItemPos(o),n.displayData.push(l),n._virtual?n._createOrUpdateItem(l):n._createOrUpdateItem2(o)):n._numItems--,n.selectedMode==u.SINGLE)r?n._selectedId=-1:0<=n._selectedId-1&&n._selectedId--;else if(n.selectedMode==u.MULT&&n.multSelected.length){var l=n.multSelected.indexOf(t);0<=l&&n.multSelected.splice(l,1);for(var p=n.multSelected.length-1;0<=p;p--)(d=n.multSelected[p])>=t&&n.multSelected[p]--}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var d,h={};for(d in n._customSize){var _=n._customSize[d],f=parseInt(d);h[f-(t<=f?1:0)]=_}n._customSize=h}for(p=null!=o?o:a;t+1<=p;p--)(c=n.getItemByListId(p))&&(s=n._calcItemPos(p-1),s=cc.tween(c).to(.2333,{position:cc.v2(s.x,s.y)}),p<=t+1&&(i=!0,s.call(function(){n._aniDelRuning=!1,e(t),delete n._aniDelCB})),s.start());i||(n._aniDelRuning=!1,e(t),n._aniDelCB=null)},!0)):e(t)},v.prototype.scrollTo=function(t,e,o,n){void 0===e&&(e=.5),void 0===o&&(o=null),void 0===n&&(n=!1);var i=this;if(i.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=i._numItems&&(t=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var a,r,c=i.getItemPos(t);if(!c)return!1;switch(i._alignCalcType){case 1:a=c.left,a-=null!=o?i.node.width*o:i._leftGap,c=cc.v2(a,0);break;case 2:a=c.right-i.node.width,a+=null!=o?i.node.width*o:i._rightGap,c=cc.v2(a+i.content.width,0);break;case 3:r=c.top,r+=null!=o?i.node.height*o:i._topGap,c=cc.v2(0,-r);break;case 4:r=c.bottom+i.node.height,r-=null!=o?i.node.height*o:i._bottomGap,c=cc.v2(0,-r+i.content.height)}var s=i.content.getPosition(),l=(s=Math.abs(i._sizeType?s.y:s.x),i._sizeType?c.y:c.x);.5<Math.abs((null!=i._scrollPos?i._scrollPos:s)-l)&&(i._scrollView.scrollToOffset(c,e),i._scrollToListId=t,i._scrollToEndTime=(new Date).getTime()/1e3+e,i._scrollToSo=i.scheduleOnce(function(){var e;i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n&&(e=i.getItemByListId(t))&&cc.tween(e).to(.1,{scale:1.05}).to(.1,{scale:1}).start()},e+.1),e<=0&&i._onScrolling())}},v.prototype._calcNearestItem=function(){var t,e,o=this;o.nearestListId=null,o._virtual&&o._calcViewPos();for(var n=o.viewTop,i=o.viewRight,a=o.viewBottom,r=o.viewLeft,c=!1,s=0;s<o.content.childrenCount&&!c;s+=o._colLineNum)if(t=o._virtual?o.displayData[s]:o._calcExistItemPos(s))switch(e=o._sizeType?(t.top+t.bottom)/2:(t.left+t.right)/2,o._alignCalcType){case 1:t.right>=r&&(o.nearestListId=t.id,e<r&&(o.nearestListId+=o._colLineNum),c=!0);break;case 2:t.left<=i&&(o.nearestListId=t.id,i<e&&(o.nearestListId+=o._colLineNum),c=!0);break;case 3:t.bottom<=n&&(o.nearestListId=t.id,n<e&&(o.nearestListId+=o._colLineNum),c=!0);break;case 4:t.top>=a&&(o.nearestListId=t.id,e<a&&(o.nearestListId+=o._colLineNum),c=!0)}if((t=o._virtual?o.displayData[o.displayItemNum-1]:o._calcExistItemPos(o._numItems-1))&&t.id==o._numItems-1)switch(e=o._sizeType?(t.top+t.bottom)/2:(t.left+t.right)/2,o._alignCalcType){case 1:e<i&&(o.nearestListId=t.id);break;case 2:r<e&&(o.nearestListId=t.id);break;case 3:a<e&&(o.nearestListId=t.id);break;case 4:e<n&&(o.nearestListId=t.id)}},v.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},v.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},v.prototype.skipPage=function(t,e){if(this.checkInited())return this._slideMode!=p.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=this._numItems||this.curPageNum!=t&&(this.curPageNum=t,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],t),this.scrollTo(t,e)))},v.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var o=cc.instantiate(e._itemTmp);e.content.addChild(o);for(var n=0;n<t;n++)cc.Component.EventHandler.emitEvents([e.renderEvent],o,n),o.height==e._itemSize.height&&o.width==e._itemSize.width||(e._customSize[n]=e._sizeType?o.height:o.width);return Object.keys(e._customSize).length||(e._customSize=null),o.removeFromParent(),o.destroy&&o.destroy(),e._customSize}},s([_({type:cc.Enum(l)})],v.prototype,"templateType",void 0),s([_({type:cc.Node,visible:function(){return this.templateType==l.NODE}})],v.prototype,"tmpNode",void 0),s([_({type:cc.Prefab,visible:function(){return this.templateType==l.PREFAB}})],v.prototype,"tmpPrefab",void 0),s([_()],v.prototype,"_slideMode",void 0),s([_({type:cc.Enum(p)})],v.prototype,"slideMode",null),s([_({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==p.PAGE}})],v.prototype,"pageDistance",void 0),s([_({type:cc.Component.EventHandler,visible:function(){return this._slideMode==p.PAGE}})],v.prototype,"pageChangeEvent",void 0),s([_()],v.prototype,"_virtual",void 0),s([_({type:cc.Boolean})],v.prototype,"virtual",null),s([_({visible:function(){var t=this.slideMode==p.NORMAL;return t||(this.cyclic=!1),t}})],v.prototype,"cyclic",void 0),s([_({visible:function(){return this.virtual}})],v.prototype,"lackCenter",void 0),s([_({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],v.prototype,"lackSlide",void 0),s([_({type:cc.Integer})],v.prototype,"_updateRate",void 0),s([_({type:cc.Integer,range:[0,6,1],slide:!0})],v.prototype,"updateRate",null),s([_({type:cc.Integer,range:[0,12,1],slide:!0})],v.prototype,"frameByFrameRenderNum",void 0),s([_({type:cc.Component.EventHandler})],v.prototype,"renderEvent",void 0),s([_({type:cc.Enum(u)})],v.prototype,"selectedMode",void 0),s([_({visible:function(){return this.selectedMode==u.SINGLE}})],v.prototype,"repeatEventSingle",void 0),s([_({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>u.NONE}})],v.prototype,"selectedEvent",void 0),s([_({serializable:!1})],v.prototype,"_numItems",void 0),a=s([h,f(),g("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),y(cc.ScrollView),a(-5e3)],v),r.default=a,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"bb6c3NaBJpBvLBPQNTSR/Ul","Loading");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("AudioUtils"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("MainCal"),g=i("MapDataMgr"),y=i("MapInsideMgr"),m=i("AssetMgr"),v=i("AudioPlayer"),b=i("GameModule"),I=i("TimeUtils"),D=i("NetUtils");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_desc=null,t.nod_car=null,t.spr_progress=null,t.targetCount=0,t.curCount=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=b.default),C.prototype.onLoad=function(){var t=this;this.lbl_desc.string="\u9a6c\u4e0a\u5230\u5bb6\uff0c\u53ef\u4ee5\u5403\u5230\u5976\u5976\u505a\u7684\u996d\u4e86...",this.spr_progress.fillRange=0,this.nod_car.x=-283.5,D.ReportData.instance.report_point(10020),u.default.playBgHome(),v.default.setMusicVolume(1==_.gm.localData.musicOn?.5:0),v.default.setEffectVolume(1==_.gm.localData.effectOn?.5:0),this.targetCount+=1,I.default.getNetTime(function(e){e&&(0==e.ResultCode?(t.curCount+=1,f.default.getTimeNode().schedule(function(t){I.default.updateTime(t)},0,cc.macro.REPEAT_FOREVER)):cc.error(e))})},C.prototype.start=function(){},C.prototype.onEnable=function(){this._loadConfig()},C.prototype._loadConfig=function(){var t=this;m.default.getInstance().getResAsyn(h.BundleName.COMMON,"json/DBconfig",cc.JsonAsset,function(e){_.gm.config.initConfig(e.json),e.decRef(),t._loadMapInsideData(),t._loadMapJson(),t._loadNpcPathJson(),t._loadMainRole(),t._loadMainUI(),t._loadBaseUI(),t._loadNpc(),t._loadMapObject(),t._loadFirstLogin()})},C.prototype._loadMapInsideData=function(){var t=this;m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"json/map_inside_json",cc.JsonAsset,function(e){t.curCount+=1,y.default.getInstance().setData(e.json),e.decRef(),t.onLoadDataCb()}),this.targetCount+=1},C.prototype._loadMapJson=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"json/tmx_data",cc.JsonAsset,function(e){t.curCount+=1,y.default.getInstance().mapJsonData=e.json,e.decRef(),t.onLoadDataCb()})},C.prototype._loadNpcPathJson=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"json/npc_path",cc.JsonAsset,function(e){t.curCount+=1,y.default.getInstance().npc_path=e.json,e.decRef(),t.onLoadDataCb()})},C.prototype.onLoadDataCb=function(){var t=this;this.lbl_desc.string="\u9a6c\u4e0a\u5230\u5bb6\uff0c\u53ef\u4ee5\u5403\u5230\u5976\u5976\u505a\u7684\u996d\u4e86..."+this.curCount+"/"+this.targetCount,this.targetCount&&this.targetCount==this.curCount&&(_.gm.mapData=new g.default,_.gm.mapData.addOriginalObjectDatas(y.default.getInstance().mapJsonData),_.gm.mapData.initMapObjectData(),_.gm.localData.guide?_.gm.ui.showModule(_.gm.const.MainUI):(_.gm.ui.showTopBlock(!1,0),_.gm.ui.showModule(_.gm.const.RegisterUI,function(){t.closeMe()})))},C.prototype._loadNpc=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"prefabs/npc/npc_plot",cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()})},C.prototype._loadMainUI=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,_.gm.const.MainUI.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()})},C.prototype._loadMainRole=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"prefabs/main_role",cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()})},C.prototype._loadBaseUI=function(){var t=this;this.targetCount+=1,m.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,_.gm.const.BaseUI.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()})},C.prototype._loadMapObject=function(){var t=this;this.targetCount+=p.default.loadMapObjectID.length;for(var e=0,o=p.default.loadMapObjectID;e<o.length;e++){var n=o[e];d.default.loadMapObjectPrefab(n,function(){t.curCount+=1,t.onLoadDataCb()})}},C.prototype._loadFirstLogin=function(){var t=this;_.gm.localData.guide||(this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.Guide.bundleName,_.gm.const.Guide.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}),this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.DialogUI.bundleName,_.gm.const.DialogUI.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}),this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.GetAwardUI.bundleName,_.gm.const.GetAwardUI.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}),this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.DecoratePut.bundleName,_.gm.const.DecoratePut.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}),this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.DecorateUI.bundleName,_.gm.const.DecorateUI.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}),this.targetCount+=1,m.default.getInstance().getResAsyn(_.gm.const.BlockGuide.bundleName,_.gm.const.BlockGuide.loadPath,cc.Prefab,function(){t.curCount+=1,t.onLoadDataCb()}))},C.prototype.onDestroy=function(){},C.prototype.update=function(t){this.nod_car.x+=300*t,this.spr_progress.fillRange+=t*(300/567),283.5<=this.nod_car.x&&(this.nod_car.x=-283.5,this.spr_progress.fillRange=0)},s([a(cc.Label)],C.prototype,"lbl_desc",void 0),s([a(cc.Node)],C.prototype,"nod_car",void 0),s([a(cc.Sprite)],C.prototype,"spr_progress",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],LocalDataBase:[function(t,e,o){"use strict";cc._RF.push(e,"97ceedrn4JFBYycA4jB+pSQ","LocalDataBase");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("StorageUtil");function l(){var t=null!==c&&c.apply(this,arguments)||this;return t._saveKeyCache=[],t._timeoutID=0,t}a(l,c=i("Singleton").default),l.prototype.saveByKey=function(t){this._saveKeyCache.includes(t)||this._saveKeyCache.push(t),this._timeoutID||this._save()},l.prototype.getData=function(t){if(void 0!==this[t])return s.default.get(t,!0);cc.error("local data not found this key:",t)},l.prototype._save=function(){var t=this;this._timeoutID=setTimeout(function(){var e=t._saveKeyCache.shift();e&&s.default.set(e,t[e]),t._saveKeyCache[0]?t._save():t._timeoutID=0},0)},a=l,r.default=a,cc._RF.pop()},{}],LocalData:[function(t,e,o){"use strict";cc._RF.push(e,"17e5dBQh0NEUIlYkHyrXso3","LocalData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.InviteData=a.InviteChildren=a.BlessData=a.BroadBlessData=a.OrderLocalData=a.LotteryData=void 0;var c,s=i("LocalDataBase"),l=i("EventManager"),p=i("UIMgr"),u=i("BlessBroad"),d=i("ExploreData"),h=i("Const"),_=i("GameMgr");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.lastObjectIndex=0,t.curStrength=0,t.curHp=0,t.addHp=0,t.addStrength=0,t.debug_version=0,t.initMapObjects={},t.initInsideObjects={},t.props={},t.mapObjectDatas={},t.collect_decoration_datas={},t.unlockNPC=[],t.tools={},t.guide=!1,t.shopLotteryTimes=0,t.shopLotteryRewardID=[],t.unlockDistrict=[],t.lastGuide={id:0,index:-1},t.npcData={},t.foodMenu={},t.warehouseLv=1,t.lastCreateBusinessTime=0,t.last_create_heart_time=0,t.last_resume_strength_time=0,t.last_resume_hp_time=0,t.endGuidings=[],t.shelf_unlock_slot=[],t.lastCreateShelfNPCTime=0,t.broadcast=null,t.produce_rate_unlock=[],t.truck_order=null,t.explore_data=null,t.onLineSecond=0,t.lastOnlineTime=0,t.getShareAward=[],t.musicOn=1,t.effectOn=1,t.autoCollectTime=0,t.autoCollectTotalTime=0,t.autoCollectState=0,t.broad_bless_data=[],t.bless_data=null,t.nick_name="",t.name_change_count=0,t.player_broad_bless_data=[],t.invite_data=null,t.sex_id=0,t.history_gold=0,t.last_save_time=0,t.petAni={},t.is_bless_broad=!1,t}i("Utils"),r(f,c=s.default),f.prototype.load=function(){var t;cc.log("load local data"),this.curStrength=this.getData("curStrength")||0,this.curHp=this.getData("curHp")||0,this.addHp=this.getData("addHp")||0,this.last_resume_hp_time=this.getData("last_resume_hp_time")||0,this.addStrength=this.getData("addStrength")||0,this.initMapObjects=this.getData("initMapObjects")||{},this.initInsideObjects=this.getData("initInsideObjects")||{},this.sex_id=this.getData("sex_id")||0,this.history_gold=this.getData("history_gold")||1,this.last_save_time=this.getData("last_save_time")||0,this.props=this.getData("props")||{},this.mapObjectDatas=this.getData("mapObjectDatas")||{},this.unlockNPC=this.getData("unlockNPC")||[],this.explore_data=this.getData("explore_data")||{},_.gm.localData.explore_data?(t=new d.ExploreData,Object.assign(t,_.gm.localData.explore_data),_.gm.localData.explore_data=t):(_.gm.localData.explore_data=new d.ExploreData,_.gm.localData.explore_data.init_data()),this.bless_data=this.getData("bless_data")||{},this.nick_name=this.getData("nick_name")||"",this.name_change_count=this.getData("name_change_count")||0,this.invite_data=this.getData("invite_data")||{},this.tools=this.getData("tools")||{},this.guide=this.getData("guide")||!1,this.shopLotteryTimes=this.getData("shopLotteryTimes")||0,this.shopLotteryRewardID=this.getData("shopLotteryRewardID")||[],this.unlockDistrict=this.getData("unlockDistrict")||[],this.lastGuide=this.getData("lastGuide")||{id:0,index:-1},this.npcData=this.getData("npcData")||{},this.foodMenu=this.getData("foodMenu")||{},this.warehouseLv=this.getData("warehouseLv")||1,this.lastCreateBusinessTime=this.getData("lastCreateBusinessTime")||0,this.last_create_heart_time=this.getData("last_create_heart_time")||0,this.endGuidings=this.getData("endGuidings")||[],this.last_resume_strength_time=this.getData("last_resume_strength_time")||0,this.debug_version=this.getData("debug_version")||0,this.lastObjectIndex=this.getData("lastObjectIndex")||0,this.shelf_unlock_slot=this.getData("shelf_unlock_slot")||[],this.lastCreateShelfNPCTime=this.getData("lastCreateShelfNPCTime")||0,this.broadcast=this.getData("broadcast")||{},this.produce_rate_unlock=this.getData("produce_rate_unlock")||[],this.truck_order=this.getData("truck_order")||new g,this.onLineSecond=this.getData("onLineSecond")||0,this.lastOnlineTime=this.getData("lastOnlineTime")||0,this.getShareAward=this.getData("getShareAward")||[],this.musicOn=this.getData("musicOn")||1,this.effectOn=this.getData("effectOn")||1,this.autoCollectTime=this.getData("autoCollectTime")||0,this.autoCollectTotalTime=this.getData("autoCollectTotalTime")||0,this.autoCollectState=this.getData("autoCollectState")||0,this.getData("collect_decoration_datas")&&(this.collect_decoration_datas=this.getData("collect_decoration_datas"))},f.prototype.addProduceRateUnlock=function(t){this.produce_rate_unlock.includes(t)||this.produce_rate_unlock.push(t),this.saveByKey("produce_rate_unlock")},f.prototype.unlockFoodMenu=function(t){this.foodMenu[t]?this.foodMenu[t].state<=h.MenuState.unlock&&(this.foodMenu[t].state=h.MenuState.unlock):this.foodMenu[t]={state:h.MenuState.unlock},this.saveByKey("foodMenu")},f.prototype.learnFoodMenu=function(t){this.foodMenu[t]?this.foodMenu[t].state<=h.MenuState.learned&&(this.foodMenu[t].state=h.MenuState.learned):this.foodMenu[t]={state:h.MenuState.learned},this.saveByKey("foodMenu")},f.prototype.getFoodMenu=function(t){return this.foodMenu[t]||{state:h.MenuState.lock}},f.prototype.saveFoodMenu=function(){this.saveByKey("foodMenu")},f.prototype.getNpcData=function(t){return this.npcData[t]||(this.npcData[t]={}),this.npcData[t]},f.prototype.saveNpcData=function(){this.saveByKey("npcData")},f.prototype.getPropCount=function(t){return this.props[String(t)]||0},f.prototype.unlockUID=function(t){this.mapObjectDatas[t].unlockAction=!0,this.saveByKey("mapObjectDatas")},f.prototype.setSlotData=function(t,e){var o=this.mapObjectDatas[t];if(o){o.slots=[];for(var n=0;n<e.length;n++)o.slots[n]={isLock:e[n].isLock,beginTime:e[n].beginTime,produceID:e[n].produceID,pickID:e[n].pickID,endTime:e[n].endTime,rate:e[n].rate,produce:e[n].changeToProduceLocalData()};this.saveByKey("mapObjectDatas")}},f.prototype.removeMapObjectData=function(t){this.mapObjectDatas[t]&&(this.initMapObjects[t]&&(this.initMapObjects[t]=-1,this.initInsideObjects[t]=-1,this.saveByKey("initMapObjects"),this.saveByKey("initInsideObjects")),delete this.mapObjectDatas[t],this.saveByKey("mapObjectDatas"))},f.prototype.addToCollect=function(t,e){e?(this.collect_decoration_datas[t]=e,this.saveByKey("collect_decoration_datas")):cc.error("not found ",t)},f.prototype.removeCollect=function(t){this.collect_decoration_datas[t]?(delete this.collect_decoration_datas[t],this.saveByKey("collect_decoration_datas")):cc.error("not found ",t)},f.prototype.updateObjectPos=function(t,e){(t=this.mapObjectDatas[t])&&(t.x=e.x,t.y=e.y)},f.prototype.getMapObjectData=function(t){return this.mapObjectDatas[t]||(cc.error("not found",t),null)},f.prototype.addMapObjectData=function(t,e){this.mapObjectDatas[t]?cc.error("\u5df2\u5b58\u5728\u6570\u636e,\u786e\u8ba4\u6e05\u7a7a\u540e\u518d\u6dfb\u52a0",t,this.mapObjectDatas[t]):(this.mapObjectDatas[t]=e,this.saveByKey("mapObjectDatas"))},f.prototype.addUnlockNPC=function(t){var e;(e=this.unlockNPC).push.apply(e,t),this.saveByKey("unlockNPC")},f.prototype.updateExploreData=function(t){this.explore_data||(this.explore_data=new d.ExploreData),this.explore_data=t,this.saveByKey("explore_data")},f.prototype.setUnlockTools=function(t){this.tools[t]?this.tools[t].isStudy=!0:this.tools[t]={isStudy:!0,toolLv:0,durability:0,repair_time:0},this.saveByKey("tools")},f.prototype.setToolsLv=function(t,e,o){void 0===o&&(o=100),this.setUnlockTools(t),this.tools[t].toolLv=e,this.tools[t].durability||(this.tools[t].durability=o),this.tools[t].repair_time||(this.tools[t].repair_time=0),this.saveByKey("tools")},f.prototype.get_bless_broad_data=function(t){if(0==t.ResultCode&&(this.broad_bless_data=[],0<t.data.length)){for(var e=0;e<t.data.length;++e)this.broad_bless_data[e]=new y,this.broad_bless_data[e].nickname=t.data[e].nickname,this.broad_bless_data[e].op_time=t.data[e].op_time,this.broad_bless_data[e].text_string=decodeURIComponent(t.data[e].wish),this.broad_bless_data[e].id=t.data[e].id,this.broad_bless_data[e].type=t.data[e].type;_.gm.ui.get_layer_node(p.LayerType.TOP).getChildByName("bless_broad")||this.send_bless()}},f.prototype.get_bless_data=function(){},f.prototype.send_bless=function(){var t=this;this.is_bless_broad&&0<this.broad_bless_data.length&&(this.bless_data.broad_index=this.broad_bless_data[0].id,_.gm.pool.async_get(h.BundleName.MAIN_UI,"prefabs/bless/bless_broad",u.BlessBroad,function(e){var o;_.gm.ui.get_layer_node(p.LayerType.TOP).getChildByName("bless_broad")||(e.init_data(t.broad_bless_data[0].nickname,t.broad_bless_data[0].text_string,t.broad_bless_data[0].type),_.gm.ui.get_layer_node(p.LayerType.TOP).addChild(e.node),o=_.gm.ui.get_module(_.gm.const.BaseUI),e.node.y=o.node.height/2-200,t.broad_bless_data.splice(0,1))}))},f.prototype.get_player_bless_broad_data=function(t){if(0==t.ResultCode&&(this.player_broad_bless_data=[],0<t.data.length)){for(var e=0;e<t.data.length;++e)this.player_broad_bless_data[e]=new y,this.player_broad_bless_data[e].nickname=t.data[e].nickname,this.player_broad_bless_data[e].op_time=t.data[e].op_time,this.player_broad_bless_data[e].text_string=decodeURIComponent(t.data[e].wish),this.player_broad_bless_data[e].id=t.data[e].id,this.player_broad_bless_data[e].type=t.data[e].type;l.default.emit(h.GameEvent.update_bless)}},f.prototype.addShopLotteryTimes=function(t){this.shopLotteryTimes+=t,this.saveByKey("shopLotteryTimes")},f.prototype.addLotteryProcessIDs=function(t){var e;(e=this.shopLotteryRewardID).push.apply(e,t),this.saveByKey("shopLotteryRewardID")},f.prototype.addUnlockDistrict=function(t){this.unlockDistrict.includes(t)||(this.unlockDistrict.push(t),this.saveByKey("unlockDistrict"))},f.prototype.clearLastGuide=function(){this.lastGuide={id:0,index:-1},this.saveByKey("lastGuide")},f.prototype.setLastGuide=function(t,e){this.lastGuide={id:t,index:e},this.saveByKey("lastGuide")},r=f,a.default=r,a.LotteryData=function(){this.type=0,this.value=0,this.state=0,this.weight=0};var g=function(){this.start_time=0,this.end_time=0,this.items=[],this.price=0,this.lottery_data=[],this.left_count=0,this.turn_count=0};a.OrderLocalData=g;var y=function(){this.id=0,this.nickname="",this.op_time=0,this.text_string="",this.type=0};a.BroadBlessData=y;a.BlessData=function(){this.broad_time=0,this.broad_index=0},a.InviteChildren=function(){this.uid="",this.nick_name="",this.level=0,this.image_id=0,this.reward_index=0},a.InviteData=function(){this.parent_list=[],this.children_list=[],this.now_count=0,this.now_index=0,this.delete_list=[]},cc._RF.pop()},{}],LongTouch:[function(t,e,o){"use strict";cc._RF.push(e,"ee9f0zNkG5DX5e1LRnhKMlh","LongTouch");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.isLongTouch=!1,t.longTouchTime=2e3,t.longTouchEvent=new cc.Component.EventHandler,t.isTouchState=!1,t.touchTime=0,t}r(p,s=cc.Component),p.prototype.onLoad=function(){},p.prototype.start=function(){},p.prototype.update=function(t){if(this.isTouchState&&(this.touchTime=this.touchTime+1e3*t,this.isLongTouch&&this.touchTime>=this.longTouchTime))return this.longTouchEvent&&cc.Component.EventHandler.emitEvents([this.longTouchEvent]),this.touchTime=0,void(this.isTouchState=!1)},c([l({tooltip:"\u662f\u5426\u6253\u5f00\u957f\u6309"})],p.prototype,"isLongTouch",void 0),c([l({tooltip:"\u957f\u6309\u54cd\u5e94\u65f6\u95f4(\u5355\u4f4d:\uff08ms/\u6beb\u79d2\uff09)",visible:function(){return this.isLongTouch}})],p.prototype,"longTouchTime",void 0),c([l({type:cc.Component.EventHandler})],p.prototype,"longTouchEvent",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],LotteryMainUI:[function(t,e,o){"use strict";cc._RF.push(e,"6113dUIr9ZOaKQycS9rkHam","LotteryMainUI");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("GameMgr"),u=a("GameModule"),d=a("GuideMgr");function h(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(h,s=u.default),h.prototype.onBtnDecoration=function(){p.gm.ui.showModule(p.gm.const.ShopDecorationPool,function(t){t.setDataByProp(l.CommonPropID.ticket)})},h.prototype.onBtnHeart=function(){p.gm.ui.showModule(p.gm.const.ShopDecorationPool,function(t){t.setDataByProp(l.CommonPropID.heart)})},h.prototype.onBtnCoin=function(){},h.prototype.onBtnBack=function(){this.closeMe()},h.prototype.show=function(){p.gm.ui.showModule(p.gm.const.ShopTopUI),d.default.getInstance().showTaskFinger(1030,1)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],h),r.default=a,cc._RF.pop()},{}],LotteryMgr:[function(t,e,o){"use strict";cc._RF.push(e,"4e5eamV87JBaJ/Y/sF1JWB7","LotteryMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("Singleton"),u=i("MathUtils");function d(){return null!==c&&c.apply(this,arguments)||this}r(d,c=p.default),d.prototype.getItemsByDiamond=function(t,e){for(var o=[],n=0,i=l.gm.config.data.DiamondLotteryPool;n<i.length;n++)(s=i[n]).shop_pool_id==t&&o.push(s);for(var a=[],r=0,c=u.default.weight(o,e);r<c.length;r++){var s=c[r],p=u.default.randomNum(s.num_min,s.num_max);p={file:s.thing_id.file,id:s.thing_id.id,num:p},a.push(p)}return a},d.prototype.getShowDiamondItems=function(t){void 0===t&&(t=!1);for(var e=[],o=0,n=l.gm.config.data.DiamondLotteryPool;o<n.length;o++){var i=n[o];i.thing_id.num=i.num_min,2==i.thing_id.file&&(!t&&1003==i.shop_pool_id||t&&1003!=i.shop_pool_id||e.push(i.thing_id))}return e},d.prototype.getItemsByHeart=function(t,e){for(var o=[],n=0,i=l.gm.config.data.HeartLotteryPool;n<i.length;n++)(s=i[n]).shop_heart_pool_id==t&&o.push(s);for(var a=[],r=0,c=u.default.weight(o,e);r<c.length;r++){var s=c[r],p=u.default.randomNum(s.num_min,s.num_max);p={file:s.thing_id.file,id:s.thing_id.id,num:p},a.push(p)}return a},d.prototype.getShowHeartItems=function(){for(var t=[],e=0,o=l.gm.config.data.HeartLotteryPool;e<o.length;e++){var n=o[e];n.thing_id.num=n.num_min,2==n.thing_id.file&&t.push(n.thing_id)}return t},d.prototype.getConfigByProp=function(t){for(var e=[],o=0,n=l.gm.config.data.LotteryConfig;o<n.length;o++){var i=n[o];i.one_cost_num.id==t&&e.push(i)}return e},d.prototype.getItems=function(t,e,o){var n=[];return t==s.CommonPropID.ticket?n=d.getInstance().getItemsByDiamond(e,o):t==s.CommonPropID.heart&&(n=d.getInstance().getItemsByHeart(e,o)),n},r=d,a.default=r,cc._RF.pop()},{}],LvMgr:[function(t,e,o){"use strict";cc._RF.push(e,"220868esepJ7pujEQu4oUv5","LvMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("EventManager"),p=i("NetUtils"),u=i("ModuleIconMgr"),d=i("FoodOrderMgr"),h=i("NpcMgr"),_=i("StrengthMgr"),f=i("TruckOrderMgr"),g=i("ConfigUtils"),y=i("Const"),m=i("GameMgr"),v=i("PropMgr"),b=i("Utils");function I(){var t=null!==c&&c.apply(this,arguments)||this;return t._curLv=0,t._strengthMax=0,t._hpMax=0,t}r(I,c=s.default),I.prototype.getConfigByExp=function(){for(var t=m.gm.config.data.Upgrade,e=v.default.getPropCount(y.CommonPropID.exp),o=null,n=0;n<t.length;n++){var i=t[n];if(e-i.ex_prop.num<0){o=i;break}n==t.length-1&&(o=i)}return o||cc.error("config not found",e),this._curLv?o.level>this._curLv&&(this._curLv=o.level,this._strengthMax=o.strength,this._hpMax=o.hp,this.onUpgrade()):(this._curLv=o.level,this._strengthMax=o.strength,this._hpMax=o.hp),o},I.prototype.getLv=function(){if(this._curLv)return this._curLv;var t=this.getConfigByExp();return t?t.level:1},I.prototype.getStrengthMax=function(){return this._strengthMax||this.getConfigByExp(),this._strengthMax+m.gm.localData.addStrength},I.prototype.getHpMax=function(){return this._hpMax||this.getConfigByExp(),this._hpMax+m.gm.localData.addHp},I.prototype.getConfigByLv=function(t){for(var e=0,o=m.gm.config.data.Upgrade;e<o.length;e++){var n=o[e];if(n.level==t)return n}},I.prototype.getLastConfig=function(){return this.getConfigByLv(this._curLv-1)},I.prototype.getLastValue=function(){var t=this.getLastConfig();return t?t.ex_prop.num:0},I.prototype.getProgress=function(){var t=v.default.getPropCount(y.CommonPropID.exp)-this.getLastValue(),e=this.getConfigByExp().ex_prop.num-this.getLastValue();return Number((t/e).toFixed(2))},I.prototype.onUpgrade=function(){var t=this.getConfigByExp();p.ReportData.instance.report_point(100004,this._curLv);var e=this.getLastConfig();_.default.getInstance().addStrength(this._strengthMax-e.strength),_.default.getInstance().addHp(this._hpMax-e.hp),e=g.NPCDataUtils.getNewUnlockNPC(),m.gm.localData.addUnlockNPC(e),l.default.emit(y.GameEvent.updateBase),l.default.emit(y.GameEvent.role_lv_upgrade),d.default.getInstance().checkNewOrder(),f.default.getInstance().tryCreateNewOrder(),0<(e=t.level_up_get_thing||[]).length&&v.default.addGainThing(e),m.gm.ui.showModule(m.gm.const.UpgradeView,function(){(function(){var e=t.level_up_get_thing||[];if(0<e.length){for(var o=[],n=0,i=e;n<i.length;n++){var a=i[n];3==a.file&&o.push(a)}0<o.length&&m.gm.ui.showModule(m.gm.const.MenuGetNew,function(t){t.setData(o)})}})(),t.words_id&&m.gm.ui.showModule(m.gm.const.DialogUI,function(e){e.setData(t.words_id,function(){},!1)})}),m.gm.config.data.Setting[0].upgrade_strength_max&&_.default.getInstance().setStrengthMax(),m.gm.config.data.Setting[0].upgrade_hp_max&&_.default.getInstance().setHpMax(),7<=this._curLv&&h.default.getInstance().hide(y.ENpcID.Kuanggong),u.default.getInstance().checkShow()},I.prototype.onChangeExp=function(){var t=this._curLv,e=this.getConfigByExp();this._curLv=e?e.level:1,this._curLv>t&&b.Utils.broadWorld(y.BroadTypeEnum.BroadLvUpgrade,this._curLv,this._curLv+"")},r=I,a.default=r,cc._RF.pop()},{}],MainBlock:[function(t,e,o){"use strict";cc._RF.push(e,"085dd1ZKQFD2KURp9rRG/FI","MainBlock");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.spr_bg=null,t.lbl_tip=null,t}r(p,s=cc.Component),p.prototype.setOpacity=function(t){this.spr_bg.opacity=t},c([l(cc.Node)],p.prototype,"spr_bg",void 0),c([l(cc.Label)],p.prototype,"lbl_tip",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],MainCal:[function(t,e,o){"use strict";cc._RF.push(e,"998ceiYI5BI1qU7+GC81lga","MainCal");var n=t,i=e,a=o;Object.defineProperty(a,"__esModule",{value:!0}),i=n("Decorators");var r=n("EventManager"),c=n("NodePoolItem"),s=n("PathFinderMgr"),l=n("RedDotMgr"),p=n("MathUtils"),u=n("TimeUtils"),d=n("NetUtils"),h=n("BarbecueNpcMgr"),_=n("BarbecueOrderData"),f=n("BreedMgr"),g=n("BroadcastMgr"),y=n("CookMgr"),m=n("FoodOrderMgr"),v=n("DailyTaskData"),b=n("HeartMgr"),I=n("CashierMgr"),D=n("NpcMgr"),C=n("ObjectMgrHelper"),O=n("ShopData"),w=n("StaffViewMgr"),M=n("ShelfNpcMgr"),P=n("StrengthMgr"),S=n("TaskMgr"),T=n("TruckOrderMgr"),j=n("WelfareData"),k=n("CommonData"),A=n("ConfigUtils"),R=n("Const"),N=n("GameMgr"),E=n("MapDataLoader"),B=n("MapHelper"),U=n("PropMgr");function G(){}G.getTimeNode=function(){return cc.director.getScene().getChildByName("timeNode").getComponent(c.NodePoolItem)},G.checkLand=function(t){var e,o=N.gm.mapData.getAllObjectDatas();for(e in o){var n=o[e];if(n.haveSlot())for(var i=0,a=n.slots;i<a.length;i++){var r=a[i];r.checkHasProduce()&&r.getCurProduce().check(t)}}},G.checkCookTime=function(t){y.default.getInstance().cooking&&(y.default.getInstance().leftTime-=t,y.default.getInstance().leftTime<=0&&(cc.log("emit cook end"),r.default.emit(R.GameEvent.cooking_end),y.default.getInstance().onCookEnd()))},G.checkFoodOrder=function(){var t,e=m.default.getInstance().getCurOrders();for(t in e){var o=e[t];o.state==m.FoodOrderState.award&&u.default.getTime()-o.awardTime>=m.default.getInstance().getOrderCD()&&m.default.getInstance().resetOrder(o)}},G.npcBubbleChat=function(){for(var t=0,e=D.default.getInstance().getAllNpcView();t<e.length;t++){var o,n=e[t];!n.isShow||S.default.getInstance().checkIsTask(n.data.npcID)||D.default.getInstance().isDialog()||n.data.checkIsFoodOrder()||(o=A.NPCBubbleUtil.getConfig(n.data.npcID,3))[0]&&n.bubble.setText(o[0].chat_message,!0,o[0].chat_time)}},G.checkHeart=function(){var t,e=u.default.getTime();N.gm.localData.last_create_heart_time&&((t=e-N.gm.localData.last_create_heart_time)>=b.default.getInstance().Duration&&(e=b.default.getInstance().getProduce(),b.default.getInstance().addHeart(e),b.default.getInstance().saveLastTime(N.gm.localData.last_create_heart_time+b.default.getInstance().Duration),r.default.emit(R.GameEvent.updateBase)),b.default.getInstance().curProgress=Math.min(t,b.default.getInstance().Duration)/b.default.getInstance().Duration)},G.checkStrength=function(){var t=u.default.getTime();N.gm.localData.last_resume_strength_time&&t-N.gm.localData.last_resume_strength_time>=P.default.getInstance().Duration&&(P.default.getInstance().autoAddStrength(P.default.getInstance().PerCount),P.default.getInstance().saveLastTime(N.gm.localData.last_resume_strength_time+P.default.getInstance().Duration),r.default.emit(R.GameEvent.updateBase))},G.checkHp=function(){var t=u.default.getTime();N.gm.localData.last_resume_hp_time&&t-N.gm.localData.last_resume_hp_time>=P.default.getInstance().hpDuration&&(P.default.getInstance().autoAddHp(P.default.getInstance().hpPerCount),P.default.getInstance().saveHpLastTime(N.gm.localData.last_resume_hp_time+P.default.getInstance().hpDuration),r.default.emit(R.GameEvent.updateBase))},G.updateTime=function(t){this.seconds+=t,this.minutes+=t,this.halfOfSecond+=t,1<=this.seconds&&(this.secondUpdate(),--this.seconds),60<=this.minutes&&(this.minutes-=60,this.minutesUpdate()),.5<=this.halfOfSecond&&(this.halfOfSecond-=.5,this.halfOfSecondUpdate(.5)),this.frameUpdate(t)},G.halfOfSecondUpdate=function(t){G.checkLand(t),I.default.getInstance().checkAutoSell(t),G.checkFoodOrder(t),G.checkHeart(t),G.checkStrength(t),G.checkHp(t)},G.frameUpdate=function(t){this.checkCookTime(t),g.default.getInstance().addTime(t),this._sort_frame_cd++,20<=this._sort_frame_cd&&(this._sort_frame_cd=20),this._update_scr_cd++,2<=this._update_scr_cd&&(this._update_scr_cd=2),this._load_object_cd++,1<=this._load_object_cd&&(this._load_object_cd=1),G.runFunc()},G.runFunc=function(){for(var t=0;t<G.func.length;t++){var e=G.func[t];if(e()){G.func.splice(t,1),G.func.push(e);break}}},G.secondUpdate=function(){N.gm.localData.onLineSecond++,N.gm.localData.history_gold++,N.gm.localData.saveByKey("history_gold"),this.updateLandAward(1),k.default.getInstance().online_time++,k.default.getInstance().save(),N.gm.localData.onLineSecond%5==0&&l.default.getInstance().reCalculate("nod_online"),N.gm.localData.onLineSecond%30==0&&(d.ReportData.instance.report_point(100007,N.gm.localData.onLineSecond),l.default.getInstance().reCalculate("nod_10071"),l.default.getInstance().reCalculate("nod_10072")),N.gm.localData.onLineSecond%300==0&&l.default.getInstance().reCalculate("nod_daily_task");var t=u.default.getDay();t!=k.default.getInstance().lastDataStr&&(this.dayReset(),k.default.getInstance().lastDataStr=t);for(var e=0,o=f.default.getInstance().datas;e<o.length;e++)o[e].eatFoodOnce();0<N.gm.localData.autoCollectTime&&0<N.gm.localData.autoCollectState&&(N.gm.localData.autoCollectTime--,N.gm.localData.saveByKey("autoCollectTime"),N.gm.localData.autoCollectTime<=0&&(N.gm.localData.autoCollectState=0,N.gm.localData.autoCollectTotalTime=0,N.gm.localData.saveByKey("autoCollectState"),N.gm.localData.saveByKey("autoCollectTotalTime"))),h.default.getInstance().check(),_.default.getInstance().checkOrder(),j.default.getInstance().reduceCD(1),T.default.getInstance().check(),M.default.getInstance().check(1);for(var n=0,i=w.StaffViewMgr.getInstance().getShelfWaiter();n<i.length;n++)i[n].checkAutoGiveGoods(1);N.gm.localData.lastOnlineTime=u.default.getTime(),N.gm.localData.saveByKey("lastOnlineTime"),N.gm.localData.saveByKey("onLineSecond"),k.default.getInstance().save()},G.minutesUpdate=function(){this.npcBubbleChat()},G.dayReset=function(){N.gm.localData.onLineSecond=0,O.default.getInstance().refreshRecord(),k.default.getInstance().dayReset(),v.DailyTaskData.getInstance().reset(),r.default.emit(R.GameEvent.online)},G.updateLandAward=function(){for(var t in k.default.getInstance().landAwardCollectTime){var e,o,n;0<=k.default.getInstance().landAwardCollectTime[t]&&(n=k.default.getInstance().landAwardCollectTime[t],300<=(e=u.default.getTime())-n&&(o=C.default.getInstance().getLandAwardByID(Number(t)),n=k.default.getInstance().landAwards[t],o.push.apply(o,n),k.default.getInstance().landAwards[t]=U.default.mergeItems(o),k.default.getInstance().landAwardCollectTime[t]=e,r.default.emit(R.GameEvent.updateLandAward,t)))}},G.updateStaffFoodTime=function(){var t,e;0<=k.default.getInstance().lastStaffFoodTime&&(3600<(e=u.default.getTime()-k.default.getInstance().lastStaffFoodTime)?w.StaffViewMgr.getInstance().isStop?e%5!=0||0<(e=w.StaffViewMgr.getInstance().getVisibleView()).length&&e[p.default.randomNum(0,e.length-1)].nod_bubble.setText("\u597d\u997f\u554a\uff01\u5565\u65f6\u5019\u53ef\u4ee5\u5e72\u996d\uff01",!0,2):(w.StaffViewMgr.getInstance().tryToStopAllStaff(),w.StaffViewMgr.getInstance().isStop&&(N.gm.ui.showNotice("\u5458\u5de5\u997f\u4e86\uff01\u8bf7\u7ed9\u5458\u5de5\u8fdb\u9910\uff01"),(t=N.gm.ui.get_module(N.gm.const.BaseUI))&&t.staff_food.show())):(t=N.gm.ui.get_module(N.gm.const.BaseUI))&&t.staff_food.hide())},G.seconds=0,G.minutes=0,G.halfOfSecond=0,G.autoSellCD=3,G._sort_frame_cd=0,G._update_scr_cd=0,G._load_object_cd=0,G.show_grid_cd=0,G.two_frame_count=0,G.func=[function(){return!(!B.default.sort_req||20!=G._sort_frame_cd||(G._sort_frame_cd=0,B.default.sort(),B.default.sort_req=!1))},function(){return!(!B.default.scr_req||2!=G._update_scr_cd||(G._update_scr_cd=0,B.default.updateScr(),B.default.scr_req=!1))},function(){return!(!N.gm.mapData.set_load_object_req||1!=G._load_object_cd||(G._load_object_cd=0,N.gm.mapData.loadObjects(),N.gm.mapData.set_load_object_req=!1))},function(){return s.default.getInstance().checkTask(),!0},function(){return E.default.getInstance().update(),!0}],function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);3<a&&r&&Object.defineProperty(e,o,r)}([i.PrintFuncTime()],G,"runFunc",null),i=G,a.default=i,cc._RF.pop()},{}],MainHouse:[function(t,e,o){"use strict";cc._RF.push(e,"fd8ddE2C+ZHy46fjXpDTLry","MainHouse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("RenovationHelper"),_=i("MapObject");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.map_inside_floor=null,t.nod_outside=null,t.nod_tile_front=null,t.nod_inside=null,t.nod_tile_back=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=d.GameObject),f.prototype.onLoad=function(){this.map_inside_floor.enableCulling(!1),u.default.on(p.GameEvent.change_floor,this.updateFloor,this)},f.prototype.onDestroy=function(){u.default.off(p.GameEvent.change_floor,this.updateFloor,this)},f.prototype.open=function(){this.nod_outside&&cc.isValid(this.nod_outside)&&(this.nod_outside.active=!1,this.nod_outside.destroy(),this.nod_outside=null)},f.prototype.close=function(){},f.prototype.onEnable=function(){this.updateFloor()},f.prototype.updateFloor=function(){var t=this.getComponent(_.default);if(t)for(var e=h.default.getInstance().getFloorID(t.objectID),o=0,n=this.map_inside_floor.getLayers();o<n.length;o++){var i=n[o];i.getLayerName()==String(e)?i.node.active=!0:i.node.active=!1}},s([a(cc.TiledMap)],f.prototype,"map_inside_floor",void 0),s([a(cc.Node)],f.prototype,"nod_outside",void 0),s([a(cc.Node)],f.prototype,"nod_tile_front",void 0),s([a(cc.Node)],f.prototype,"nod_inside",void 0),s([a(cc.Node)],f.prototype,"nod_tile_back",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],MainRoleMgr:[function(t,e,o){"use strict";cc._RF.push(e,"d4025TA/kNFZq0pRkHhvGmJ","MainRoleMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("AppConfig"),l=i("AudioUtils"),p=i("CommonData"),u=i("CommonUtils"),d=i("ConfigUtils"),h=i("Const"),_=i("FlyIconCreator"),f=i("GameMgr"),g=i("JumpMgr"),y=i("MapDataHelper"),m=i("PropMgr"),v=i("ReplacementModel"),b=i("AssetMgr"),I=i("Singleton"),D=i("EventManager"),C=i("SpineUtils"),O=i("Vec2Utils"),w=i("GetAwardUI"),M=i("DailyTaskData"),P=i("GuideMgr"),S=i("MainRole"),T=i("BedRoom"),j=i("CattleHouse"),k=i("ChickenHouse"),A=i("MainHouse"),R=i("PigHouse"),N=i("Shopboard"),E=i("StrengthMgr"),B=i("TaskRecordData"),U=i("ToolMgr");function G(){var t=c.call(this)||this;return t.lastAniName="",t.role_spine=null,t.actionCount=0,t.maxCount=0,t.doneCallback=null,t.mainRole=null,t.isBack=!1,t.spineScale=1,t.leftOrRight=h.EnumLeftOrRight.left,t.downOrTop=h.EnumDownOrUp.down,t.stepLen=130,t.stepTime=.6,t.normalSpeed=t.stepLen/t.stepTime,t.timeScale=1,t.moveCb=null,t.originalParent=null,t.inSwingTree=!1,t.curWalkType=h.EnumRoleAniType.walk,t.attack_end=!1,t.inObjectUID="",t.mainRolePosStatus=h.EnumRolePos.Field,t.model=null,D.default.on(h.GameEvent.change_facade,t.onChangeFacade,t),t}r(G,c=I.default),G.prototype.setWalkType=function(t){t!=h.EnumRoleAniType.walk&&t!=h.EnumRoleAniType.walk_box&&t!=h.EnumRoleAniType.food_walk||(this.curWalkType=t)},G.prototype.setAniWalk=function(t,e){this.cleanAttachment(),e.x>t.x?(this.downOrTop=h.EnumDownOrUp.down,this.leftOrRight=h.EnumLeftOrRight.right,this._updateDirection(),this.playAniByType(this.curWalkType)):e.y>t.y?(this.downOrTop=h.EnumDownOrUp.down,this.leftOrRight=h.EnumLeftOrRight.left,this._updateDirection(),this.playAniByType(this.curWalkType)):e.x<t.x?(this.downOrTop=h.EnumDownOrUp.up,this.leftOrRight=h.EnumLeftOrRight.left,this._updateDirection(),this.playAniByType(this.curWalkType)):e.y<t.y&&(this.downOrTop=h.EnumDownOrUp.up,this.leftOrRight=h.EnumLeftOrRight.right,this._updateDirection(),this.playAniByType(this.curWalkType))},G.prototype.updateDirectionByType=function(t){switch(t){case Number(h.RoleDirection.left_up):this.leftOrRight=h.EnumLeftOrRight.left,this.downOrTop=h.EnumDownOrUp.up;break;case Number(h.RoleDirection.right_up):this.leftOrRight=h.EnumLeftOrRight.right,this.downOrTop=h.EnumDownOrUp.up;break;case Number(h.RoleDirection.right_down):this.leftOrRight=h.EnumLeftOrRight.right,this.downOrTop=h.EnumDownOrUp.down;break;case Number(h.RoleDirection.left_down):this.leftOrRight=h.EnumLeftOrRight.left,this.downOrTop=h.EnumDownOrUp.down}this._updateDirection()},G.prototype.playAniByType=function(t,e,o,n){void 0===e&&(e=1),void 0===o&&(o=null),this.timeScale=n=void 0===n?1:n,this.maxCount=e,this.doneCallback=o,t=this._getAniName(t,this.isBack),this._setRoleAni(t)},G.prototype.updateDirectionByTarget=function(t){this.mainRole.node.x<=t.x?this.leftOrRight=h.EnumLeftOrRight.right:this.leftOrRight=h.EnumLeftOrRight.left,this.mainRole.node.y<=t.y?this.downOrTop=h.EnumDownOrUp.up:this.downOrTop=h.EnumDownOrUp.down,this._updateDirection()},G.prototype.setRoleAniCut=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("sickle_back"),C.default.changePartialCloth(this.role_spine,"b_broom","default","role_tool_60021_2")):(this._setRoleAni("sickle"),C.default.changePartialCloth(this.role_spine,"f_broom","default","role_tool_60021_1"))},G.prototype.setRoleAniAxe=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("axe_back"),C.default.changePartialCloth(this.role_spine,"b_broom","default","role_tool_60031_2")):(this._setRoleAni("axe"),C.default.changePartialCloth(this.role_spine,"f_broom","default","role_tool_60031_1"))},G.prototype.setRoleAniPickaxe=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?(this._setRoleAni("mininghoe_back"),C.default.changePartialCloth(this.role_spine,"b_broom","default","role_tool_60041_2")):(this._setRoleAni("mininghoe"),C.default.changePartialCloth(this.role_spine,"f_broom","default","role_tool_60041_1"))},G.prototype.setRoleAniShovel=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?this._setRoleAni("shovel_back"):this._setRoleAni("shovel")},G.prototype.setRoleAniClean=function(t,e){this.timeScale=1,this.maxCount=100,this.doneCallback=e,this.isBack?this._setRoleAni("plant_back"):this._setRoleAni("plant")},G.prototype.setAniCut=function(t,e){this.maxCount=1,this.doneCallback=e,this.isBack&&this._setRoleAni("cut_back")},G.prototype.setAniCook=function(t){this.maxCount=100,this.doneCallback=t,this.isBack&&this._setRoleAni("cook_back")},G.prototype.setAniCook_2=function(t){this.maxCount=100,this.doneCallback=t,this.isBack&&this._setRoleAni("cook_2_back")},G.prototype.setStandByAni=function(t){void 0===t&&(t=h.EnumRoleAniType.standby),this.timeScale=1,t!=h.EnumRoleAniType.standby&&t!=h.EnumRoleAniType.standby_box||(this.cleanAttachment(),t=this._getAniName(t,this.isBack),this._setRoleAni(t),this.role_spine.node.scaleX=.38*this.spineScale)},G.prototype.resetTimeScale=function(){this.mainRole.spine.timeScale=1},G.prototype.roleMove=function(t,e){void 0===e&&(e=null),cc.log("roleMove",t.x,t.y),this.getRoleGrid().equals(t)?cc.log("\u79fb\u52a8\u4f4d\u7f6e\u4e00\u6837",t.x,t.y):(this.moveCb=e,y.default.checkCanStand(t)?this.canTransport(t)?0<(e=y.default.getOutsideEmptyGrid(t,2)).length?(this.mainRole.setPos(e[0]),this.mainRole.moveStart(t)):cc.error("\u672a\u627e\u5230\u4f20\u9001\u70b9"):this.mainRole.moveStart(t):cc.log("\u4e0d\u80fd\u79fb\u52a8\u5230\u8fd9\u91cc",t.x,t.y))},G.prototype.tryToMove=function(t,e){var o;void 0===e&&(e=null),this.getRoleGrid().equals(t)?cc.log("\u79fb\u52a8\u4f4d\u7f6e\u4e00\u6837"):(this.moveCb=e,y.default.checkCanStand(t)?this.canTransport(t)?0<(o=y.default.getOutsideEmptyGrid(t,2)).length?(this.mainRole.setPos(o[0]),this.mainRole.moveStart(t)):cc.error("\u672a\u627e\u5230\u4f20\u9001\u70b9"):this.mainRole.moveStart(t):this.flyTo(t,e))},G.prototype.onMoveEnd=function(){var t=this;if(f.gm.mapData.curTouchObject){if(!f.gm.mapData.curTouchObject.data)return void cc.error("curTouObject error",f.gm.mapData.curTouchObject);if(f.gm.mapData.curTouchObject.data.isLock())return;if(f.gm.mapData.curTouchObject.data.isDie)return;if(d.ConfigUtils.CollectionsUtils.getConfig(f.gm.mapData.curTouchObject.objectID)){if(f.gm.mapData.curTouchObject.data.isCollection())if(f.gm.mapData.curTouchObject.data.getConfig().tool_need){var e=f.gm.mapData.curTouchObject.data.getConfig().type.sub_type;if(!e)return;var o=d.ConfigUtils.CollectionsUtils.getConfig(f.gm.mapData.curTouchObject.objectID);if(!o)return;if(!U.default.getInstance().hasTool(e))return this.setStandByAni(),f.gm.mapData.resetCurTouchObject(),void(e==h.CollectionSubType.wood?f.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52303\u7ea7\u5e76\u5b8c\u6210\u4f10\u6728\u5de5\u7684\u59d4\u6258\u540e\u53ef\u91c7\u96c6"):e==h.CollectionSubType.stone?f.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52304\u7ea7\u5e76\u5b8c\u6210\u77ff\u5de5\u7684\u59d4\u6258\u540e\u53ef\u91c7\u96c6"):e==h.CollectionSubType.mushroom?f.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52305\u7ea7\u5e76\u5b8c\u6210\u4fee\u7406\u7076\u53f0\u4efb\u52a1\u540e\u53ef\u91c7\u96c6"):f.gm.ui.showNotice("\u6ca1\u6709\u5de5\u5177"));var n=U.default.getInstance().getCurTool(e),i=n.getCurLvConfig();if(!(i.tool_level>=o.collect_level))return this.setStandByAni(),f.gm.mapData.resetCurTouchObject(),void f.gm.ui.showNotice(i.prop_name+"\u7b49\u7ea7\u4e0d\u8db3");if(i.energy_coast>E.default.getInstance().getCurStrength())return void this.onStrengthNotEnough();if(!n.isDruability())return void this.onToolBreakdown(n);f.gm.mapData.curTouchObject.showHP(f.gm.mapData.curTouchObject.data.hp,d.ConfigUtils.CollectionsUtils.getConfig(f.gm.mapData.curTouchObject.objectID).collect_hp),1==e?this.setRoleAniCut(1,function(){f.gm.mapData.curTouchObject?(t.onAniDone(),i.energy_coast>E.default.getInstance().getCurStrength()?t.onStrengthNotEnough():n.isDruability()||t.onToolBreakdown(n)):t.setStandByAni()}):2==e?this.setRoleAniAxe(1,function(){f.gm.mapData.curTouchObject?(t.onAniDone(),i.energy_coast>E.default.getInstance().getCurStrength()?t.onStrengthNotEnough():n.isDruability()||t.onToolBreakdown(n)):t.setStandByAni()}):5==e?this.setRoleAniShovel(1,function(){f.gm.mapData.curTouchObject?(t.onAniDone(),i.energy_coast>E.default.getInstance().getCurStrength()?t.onStrengthNotEnough():n.isDruability()||t.onToolBreakdown(n)):t.setStandByAni()}):this.setRoleAniPickaxe(1,function(){f.gm.mapData.curTouchObject?(t.onAniDone(),i.energy_coast>E.default.getInstance().getCurStrength()?t.onStrengthNotEnough():n.isDruability()||t.onToolBreakdown(n)):t.setStandByAni()})}else f.gm.mapData.curTouchObject.onCollect(),this.setRoleAniClean(1,function(){t.setStandByAni()});else if(f.gm.mapData.curTouchObject.data.isSundries())if(f.gm.mapData.curTouchObject.data.getConfig().tool_need){if(!(0<m.default.getPropCount(h.CommonPropID.broom)))return this.setStandByAni(),void f.gm.ui.showNotice("\u6ca1\u6709\u626b\u628a");f.gm.mapData.curTouchObject.onCollect(),this.playAniByType(h.EnumRoleAniType.broom,1,function(){t.setStandByAni()})}else f.gm.mapData.curTouchObject.onCollect(),this.setRoleAniClean(1,function(){t.setStandByAni()})}else f.gm.mapData.curTouchObject.objectID==h.SpecialObjectID.swing_tree?G.getInstance().mainRole.goInSwingTree():this.setStandByAni()}else this.setStandByAni();this.moveCb&&this.moveCb()},G.prototype.onAniDone=function(){var t=f.gm.mapData.curTouchObject;if(t&&!t.data.isLock()){var e=d.ConfigUtils.CollectionsUtils.getConfig(t.objectID);if(t.data.isCollection())this.onAttact(t);else{if(this.setStandByAni(),e)if(m.default.addProps(e.mastery_produce),e.windows)m.default.addGainThing(e.need_prop,!1),f.gm.ui.showModule(f.gm.const.GetAwardUI,function(t){t.setData(e.need_prop,w.GetAwardType.open),t.callback=function(){t.closeMe()}});else{m.default.addGainThing(e.need_prop,!1);var o=this.mainRole.getComponent(_.default);(o=o||this.mainRole.addComponent(_.default)).nod_from=t.node;for(var n=0,i=e.need_prop;n<i.length;n++){var a=i[n];a.id==h.CommonPropID.exp?u.default.flyIconToExp_2(a,o,a.num):u.default.flyIconToWarehouse_2(a,o,a.num)}}1002==f.gm.mapData.guidingID&&10208==t.objectID?f.gm.ui.get_module(f.gm.const.Guide_1002).onTouchDecoration_1():1002==f.gm.mapData.guidingID&&10209==t.objectID&&f.gm.ui.get_module(f.gm.const.Guide_1002).onTouchDecoration_2(),t.data.isSundries()&&(B.default.getInstance().addCleanObject(t.objectID,1),f.gm.mapData.removeMapObject(t.data.getUID())),f.gm.mapData.resetCurTouchObject(),D.default.emit(h.GameEvent.updateBase)}}},G.prototype.canTransport=function(t){return 13<O.default.getDistance(this.mainRole.getGrid(),t)?(cc.log("\u4f20\u9001=========",!0),!0):(cc.log("\u4f20\u9001=========",!1),!1)},G.prototype.createRole=function(t,e,o){var n=this;void 0===o&&(o=null),b.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"prefabs/main_role",cc.Prefab,function(i){i=cc.instantiate(i),n.originalParent=t,n.mainRole=i.getComponent(S.default),n.mainRole.setGrid(e),n.mainRole.nod_run.opacity=0,n.role_spine=n.mainRole.spine,n.spineScale=-1,n.role_spine.node.scaleX=.38*n.spineScale,n.role_spine.setCompleteListener(n.onSpineComplete.bind(n)),C.default.setEventListener(n.role_spine,n.onSpineEvent.bind(n)),u.default.loadMainRoleSpine(n.role_spine,function(){n.model=v.default.createBySpine(n.role_spine,p.default.getInstance().dressing),n.setStandByAni(),o&&o()})})},G.prototype.getRoleGrid=function(){return this.mainRole.getGrid()},G.prototype.flyTo=function(t,e){this.moveCb=e=void 0===e?null:e,this.setStandByAni(),this.mainRole.setPos(t),f.gm.mapData.checkMoveIntoHouse(),this.onMoveEnd()},G.prototype.setBackScale=function(t,e){this.isBack=t,this.spineScale=e,this.model.updateByDirection(this.isBack)},G.prototype.cleanAttachment=function(){this.role_spine.findSlot("b_broom").setAttachment(null),this.role_spine.findSlot("f_broom").setAttachment(null)},G.prototype.reset=function(){this.mainRole.node.parent=this.originalParent,this.flyTo(this.mainRole.getGrid())},G.prototype.putFood=function(t,e){var o=this;void 0===e&&(e=null),g.default.getInstance().jumpToGrid(cc.v2(124,111)),this.updateDirectionByType(h.RoleDirection.left_up),setTimeout(function(){G.getInstance().flyTo(cc.v2(121,113),function(){G.getInstance().playAniByType(h.EnumRoleAniType.cook_up,1,function(){o.updateDirectionByType(h.RoleDirection.right_down),G.getInstance().setWalkType(h.EnumRoleAniType.food_walk),G.getInstance().tryToMove(t,function(){G.getInstance().setWalkType(h.EnumRoleAniType.walk),o.updateDirectionByType(h.RoleDirection.right_down),G.getInstance().playAniByType(h.EnumRoleAniType.food_up,1,function(){e&&e()})})})})},0)},G.prototype._updateDirection=function(){this.downOrTop==h.EnumDownOrUp.up?this.isBack=!0:this.isBack=!1,this.model.updateByDirection(this.isBack),this.leftOrRight==h.EnumLeftOrRight.left?this.spineScale=1:this.spineScale=-1,this.role_spine.node.scaleX=.38*this.spineScale},G.prototype._getAniName=function(t,e){var o=h.EnumRoleAniType[t];return(e=void 0!==e&&e)&&(o=h.EnumRoleAniType[t]+"_back"),"cook_up"==h.EnumRoleAniType[t]?"cook_up_back":o},G.prototype._setRoleAni=function(t){var e;t==this.lastAniName&&!this.attack_end||(this.actionCount=0,(e=this.mainRole.spine).setAnimation(0,t,!0),this.lastAniName=t,e.timeScale=this.timeScale||1,this.attack_end=!1)},G.prototype.onSpineComplete=function(t){"standby"!=(t=t.animation.name||"")&&"standby_back"!=t&&"standby_box"!=t&&"standby_box_back"!=t&&"walk"!=t&&"walk_back"!=t&&"walk_box"!=t&&"walk_box_back"!=t&&""!=t&&(this.actionCount+=1,this.actionCount<=this.maxCount&&this.doneCallback&&this.doneCallback())},G.prototype.onSpineEvent=function(t,e){var o,n,i=this,a=f.gm.mapData.curTouchObject;!a||(n=a.data.getConfig().type.sub_type)&&(n=(o=U.default.getInstance().getCurTool(n)).getCurLvConfig(),a.data.hp-=n.tool_atk,a.data.save(),E.default.getInstance().reduce(n.energy_coast),o.use(),0<=a.data.hp&&a.showHP(a.data.hp,d.ConfigUtils.CollectionsUtils.getConfig(a.objectID).collect_hp),"axe"==e.data.name?(l.default.collect_wood(),a.shake(function(){i.onAttact(a)})):"mininghoe"==e.data.name?(l.default.collect_stone(),this.onAttact(a)):"sickle"==e.data.name?(l.default.collect_plant(),a.shake(function(){i.onAttact(a)})):"shovel"==e.data.name&&(l.default.collect_mushroom(),a.shake(function(){i.onAttact(a)})),this.attack_end=!0)},G.prototype.onAttact=function(t){if((t=void 0===t?null:t)&&!t.data.isLock()){var e=d.ConfigUtils.CollectionsUtils.getConfig(t.objectID);if(t.data.isCollection()&&t.data.hp<=0){if(this.setStandByAni(),e){m.default.addProps(e.need_prop,!1),m.default.addProps(e.mastery_produce,!1);var o=this.mainRole.getComponent(_.default);(o=o||this.mainRole.addComponent(_.default)).nod_from=t.node;for(var n=0,i=e.need_prop;n<i.length;n++){var a=i[n];a.id==h.CommonPropID.exp?u.default.flyIconToExp_2(a,o,a.num):u.default.flyIconToWarehouse_2(a,o,a.num)}}t.data.isCollection()&&(B.default.getInstance().addCollectionObject(t.objectID,1),M.DailyTaskData.getInstance().collect++,M.DailyTaskData.getInstance().async_write_data(),f.gm.mapData.removeMapObject(t.data.getUID())),f.gm.mapData.resetCurTouchObject(),D.default.emit(h.GameEvent.updateBase)}}},G.prototype.onToolBreakdown=function(t){f.gm.ui.showNotice("\u5de5\u5177\u5df2\u7834\u635f\uff0c\u8bf7\u4fee\u590d"),f.gm.ui.showModule(f.gm.const.ToolRoomUI,function(e){e.setData(t.toolType,1),P.default.getInstance().showFinger(1005,3,!0)}),this.setStandByAni(),f.gm.mapData.resetCurTouchObject()},G.prototype.onStrengthNotEnough=function(){this.setStandByAni(),f.gm.ui.showModule(f.gm.const.GetStrengthUI,function(t){t.setData(1)}),f.gm.mapData.resetCurTouchObject()},G.prototype.checkMove=function(){var t,e=this.inObjectUID,o=!1,n=[h.SpecialObjectID.Chicken,h.SpecialObjectID.Pig,h.SpecialObjectID.Milk_Cow,h.SpecialObjectID.Ox,h.SpecialObjectID.bedroom,h.SpecialObjectID.mainHouse,h.SpecialObjectID.stall,h.SpecialObjectID.left_door,h.SpecialObjectID.barbecue];for(t in f.gm.mapData.mapObject){var i=f.gm.mapData.mapObject[t];if(i.isDisplay()&&n.includes(i.objectID)&&i.data.isGridInside(this.mainRole.getGrid())){o=!0,this.setParentObjectUID(i.data.getUID());break}}o?e!=this.inObjectUID&&(cc.log("\u8fdb\u5165"),this.onIntoObject()):(e&&(cc.log("\u8d70\u51fa"),this.onMoveOutObject()),this.setParentObjectUID(""),this.mainRole.node.parent=f.gm.mainUI.map_object_layer)},G.prototype.onIntoObject=function(){var t=f.gm.mapData.mapObject[this.inObjectUID];t?t.objectID==h.SpecialObjectID.Chicken||t.objectID==h.SpecialObjectID.Pig||t.objectID==h.SpecialObjectID.Milk_Cow||t.objectID==h.SpecialObjectID.Ox?t.data.isLock()||(f.gm.mainUI.setScale(s.default.cookScale),this.mainRole.showNodAction(),setTimeout(function(){P.default.getInstance().showTaskFinger(1043,1),P.default.getInstance().showTaskFinger(1044,1),P.default.getInstance().showTaskFinger(2029,1),P.default.getInstance().showTaskFinger(1070,1)},100),t.objectID==h.SpecialObjectID.Chicken?this.mainRole.node.parent=t.getComponent(k.default).nod_inside:t.objectID==h.SpecialObjectID.Pig?this.mainRole.node.parent=t.getComponent(R.default).nod_inside:t.objectID==h.SpecialObjectID.Milk_Cow||t.objectID==h.SpecialObjectID.Ox?this.mainRole.node.parent=t.getComponent(j.default).nod_inside:this.mainRole.node.parent=f.gm.mainUI.map_object_layer):(t.objectID==h.SpecialObjectID.bedroom?(t.data.isLock()||t.getComponent(T.default).open(),this.setParentNode(t.getComponent(T.default).nod_inside)):t.objectID==h.SpecialObjectID.mainHouse?(this.setParentNode(t.getComponent(A.default).nod_inside),f.gm.mapData.openHouse()):t.objectID==h.SpecialObjectID.stall?(this.setParentNode(t.getComponent(N.default).nod_inside),f.gm.mainUI.setScale(s.default.defaultScale)):t.objectID==h.SpecialObjectID.left_door||(t.objectID=h.SpecialObjectID.barbecue)?this.setParentNode(t.nod_inside):this.setParentNode(f.gm.mainUI.map_object_layer),this.mainRole.showNodAction(!1)):cc.error("not found object",this.inObjectUID)},G.prototype.onMoveOutObject=function(){f.gm.mainUI.setScale(s.default.defaultScale);var t=f.gm.mapData.mapObject[this.inObjectUID];t?t.objectID==h.SpecialObjectID.Chicken||t.objectID==h.SpecialObjectID.Pig||t.objectID==h.SpecialObjectID.Milk_Cow||t.objectID==h.SpecialObjectID.Ox?this.mainRole.showNodAction(!1):t.objectID==h.SpecialObjectID.bedroom&&t.getComponent(T.default).close():cc.error("not found object",this.inObjectUID)},G.prototype.setParentObjectUID=function(t){this.inObjectUID=t,this.mainRole.posSys.parentUID=t},G.prototype.setParentNode=function(t){t&&(this.mainRole.node.parent=t)},G.prototype.shoutAction=function(t){var e=this;this.mainRole.spine_shout&&(this.mainRole.spine_shout.node.active=!0,this.mainRole.spine_shout.skeletonData||b.default.getInstance().getResAsyn(h.BundleName.MAIN_UI,"ani/ui/spine/shout",sp.SkeletonData,function(o){e.mainRole.spine_shout.skeletonData=o,C.default.setListener(e.mainRole.spine_shout,function(){t(),e.mainRole.spine_shout.node.active=!1}),e.mainRole.spine_shout.setSkin("default"),e.mainRole.spine_shout.setAnimation(0,"01",!1)}))},G.prototype.onChangeFacade=function(){this.model.updateUI(this.isBack)},r=G,a.default=r,cc._RF.pop()},{}],MainRole:[function(t,e,o){"use strict";cc._RF.push(e,"edd80+A4VBEjozbfwAziKXG","MainRole");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("CommonDiamondNeed"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("IMapPosCtrl"),g=i("MapDataHelper"),y=i("MapHelper"),m=i("NodBubble"),v=i("PropMgr"),b=i("IconUtils"),I=i("EventManager"),D=i("MathUtils"),C=i("TMXUtils"),O=i("Vec2Utils"),w=i("BreedMgr"),M=i("MainRoleMgr"),P=i("Object_1045"),S=i("RockingChair");function T(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.spine_shout=null,t.bubble=null,t.nod_run=null,t.nod_actions=null,t.nod_buy=null,t.nod_feed=null,t.curPath=[],t.inChair=!1,t.targetPos=null,t.posSys=new h.MapPosSys,t}i=(a=cc._decorator).ccclass,a=a.property,c(T,l=f.default),T.prototype.onLoad=function(){this.showNodAction(!1),I.default.on(h.GameEvent.updateBase,this.updateActionBtn,this)},T.prototype.moveStart=function(t){var e=this;this.targetPos=C.default.tileToCocos(t,_.gm.mapData.mapSize,_.gm.const.GridSize),this.getGrid().equals(t)||(cc.log("\u5f00\u59cb\u884c\u8d70"),this.node.stopAllActions(),this.curPath=[],this.showRun(!1),d.default.getPath_3(this.getGrid(),t,function(o){e.curPath=o,e.curPath.pop(),(o=e.curPath.pop())?e._move(cc.v2(o.x,o.y)):0<(o=g.default.getOutsideEmptyGrid(t,2)).length?(e.setPos(o[0]),e.moveStart(t)):cc.error("\u672a\u627e\u5230\u4f20\u9001\u70b9")}))},T.prototype._move=function(t){var e=this;M.default.getInstance().setAniWalk(this.getGrid(),t);var o=d.default.worldGridToObjectLayerPos(t),n=this.node.parent.convertToNodeSpaceAR(o),i=cc.tween(this.node),a=O.default.getDistance(cc.v2(this.node.x,this.node.y),n);o=_.gm.mainUI.map_object_layer.convertToNodeSpaceAR(o),o=O.default.getDistance(o,this.targetPos),n.x>this.node.x?(this.nod_run.angle=D.default.getAngle(cc.v2(this.node.x,this.node.y),n),this.nod_run.scaleX=-1):(this.nod_run.angle=D.default.getAngle(n,cc.v2(this.node.x,this.node.y)),this.nod_run.scaleX=1),o<=360?(M.default.getInstance().timeScale=2,this.spine.timeScale=M.default.getInstance().timeScale,this.showRun(!1)):(M.default.getInstance().timeScale=4,this.spine.timeScale=3,this.showRun()),a/=M.default.getInstance().normalSpeed*M.default.getInstance().timeScale,i.to(a,{x:n.x,y:n.y}).call(function(){e._onMoveTo(t)}).start()},T.prototype._onMoveTo=function(t){this.setGrid(cc.v2(t.x,t.y)),_.gm.mapData.checkMoveIntoHouse(),0<this.curPath.length?(t=this.curPath.pop(),this._move(cc.v2(t.x,t.y))):this.onMoveEnd()},T.prototype.onMoveEnd=function(){this.curPath=[],this.showRun(!1),M.default.getInstance().onMoveEnd()},T.prototype.updateIndex=function(t){this.node.zIndex=t},T.prototype.setPos=function(t){this.curPath=[],this.setGrid(cc.v2(t.x,t.y)),this.node.stopAllActions(),this.showRun(!1)},T.prototype.setGrid=function(t){this.posSys.worldGrid=t,M.default.getInstance().checkMove(),this.updateLocalPos(),y.default.sortReq()},T.prototype.updateLocalPos=function(){var t=d.default.worldGridToObjectLayerPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(t),this.node.x=t.x,this.node.y=t.y},T.prototype.goInChair=function(){_.gm.mapData.curTouchObject.getComponent(S.default).playRocking();var t=_.gm.mapData.curTouchObject.getComponent(S.default).nod_npc_parent;this.node.parent=t,this.node.x=0,this.node.y=0,M.default.getInstance().updateDirectionByType(h.RoleDirection.left_down),M.default.getInstance().playAniByType(h.EnumRoleAniType.rocking_chair),this.inChair=!0},T.prototype.goOutChair=function(){_.gm.mapData.curTouchObject.getComponent(S.default).stopRocking(),_.gm.mapData.resetCurTouchObject(),M.default.getInstance().reset(),this.inChair=!1},T.prototype.goInSwingTree=function(){var t=_.gm.mapData.curTouchObject.getComponent(P.default).nod_ani;this.node.parent=t,this.node.x=0,this.node.y=0,M.default.getInstance().updateDirectionByType(h.RoleDirection.right_down),M.default.getInstance().playAniByType(h.EnumRoleAniType.swing,1),_.gm.mapData.curTouchObject.getComponent(cc.Animation).play("swing_tree_on"),M.default.getInstance().inSwingTree=!0},T.prototype.goOutSwingTree=function(){_.gm.mapData.curTouchObject.getComponent(cc.Animation).play("swing_tree_off"),_.gm.mapData.resetCurTouchObject(),M.default.getInstance().reset(),M.default.getInstance().inSwingTree=!1},T.prototype.showRun=function(t){this.nod_run.opacity=(t=void 0===t||t)?255:0},T.prototype.showNodAction=function(t){void 0===t&&(t=!0),this.nod_actions.active&&!t&&_.gm.mainUI.setScale(p.default.defaultScale),(this.nod_actions.active=t)&&this.updateActionBtn()},T.prototype.updateActionBtn=function(){var t,e,o,n,i,a;M.default.getInstance().inObjectUID&&(t=_.gm.mapData.getObjectData(M.default.getInstance().inObjectUID),(e=w.default.getInstance().getConfig(t.objectID,t.lv))&&(o=this.nod_actions.getChildByName("icon_buy"),a=this.nod_actions.getChildByName("icon_feed"),n="feed_chicken",i="buy_chicken",t.objectID==h.SpecialObjectID.Chicken?(n="feed_chicken",i="buy_chicken"):t.objectID==h.SpecialObjectID.Pig?(n="feed_pig",i="buy_pig"):t.objectID==h.SpecialObjectID.Milk_Cow?(n="feed_milk_cow",i="buy_milk_cow"):t.objectID==h.SpecialObjectID.Ox&&(n="feed_ox",i="buy_ox"),b.IconUtils.setSpriteFrame(h.BundleName.MAIN_UI,"texture/main_role/"+i,o.getComponent(cc.Sprite)),b.IconUtils.setSpriteFrame(h.BundleName.MAIN_UI,"texture/main_role/"+n,a.getComponent(cc.Sprite)),this.nod_buy.getChildByName("lbl_coin").getComponent(cc.Label).string=e.animal_cost_money+"",b.IconUtils.setPropSprite(e.animal_food_id.id,this.nod_feed.getChildByName("icon").getComponent(cc.Sprite)),this.nod_feed.getChildByName("lbl_count").getComponent(cc.Label).string=v.default.getPropCount(e.animal_food_id.id)+"",(a=this.getComponent(u.default))&&a.setData({id:e.animal_food_id.id,num:1})))},T.prototype.onBtnBuy=function(){I.default.emit(h.GameEvent.main_role_action,h.MainRoleAction.buy)},T.prototype.onBtnHarvest=function(){I.default.emit(h.GameEvent.main_role_action,h.MainRoleAction.harvest)},T.prototype.onBtnReplenish=function(){I.default.emit(h.GameEvent.main_role_action,h.MainRoleAction.replenish)},T.prototype.getGrid=function(){return this.posSys.worldGrid},T.prototype.getPosSys=function(){return this.posSys},T.prototype.getGridWidth=function(){return 1},T.prototype.getGridHeight=function(){return 1},s([a(sp.Skeleton)],T.prototype,"spine",void 0),s([a(sp.Skeleton)],T.prototype,"spine_shout",void 0),s([a(m.default)],T.prototype,"bubble",void 0),s([a(cc.Node)],T.prototype,"nod_run",void 0),s([a(cc.Node)],T.prototype,"nod_actions",void 0),s([a(cc.Node)],T.prototype,"nod_buy",void 0),s([a(cc.Node)],T.prototype,"nod_feed",void 0),i=s([i],T),r.default=i,cc._RF.pop()},{}],MainUI:[function(t,e,o){"use strict";cc._RF.push(e,"21a41CKfHVHKZrLBywjOd69","MainUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("MapHelper"),u=i("GameMgr"),d=i("GameModule"),h=i("MainCal"),_=i("TMXUtils"),f=i("Const"),g=i("EventManager"),y=i("ConfigUtils"),m=i("MainRoleMgr"),v=i("AssetMgr"),b=i("District"),I=i("DistrictMgr"),D=i("GuideMgr"),C=i("FoodOrderMgr"),O=i("DebugUtil"),w=i("CommonUtils"),M=i("HeartMgr"),P=i("StrengthMgr"),S=i("AppConfig"),T=i("Vec2Utils"),j=i("MapDataHelper"),k=i("DecorationMgr"),A=i("NetUtils"),R=i("TruckOrderMgr"),N=i("JumpMgr"),E=i("LvMgr"),B=i("TaskRecordData"),U=i("DailyTaskData"),G=i("StaffData"),x=i("StaffViewMgr"),L=i("MapObjectCommon"),F=i("NpcMgr"),H=i("HouseKeeperMgr"),V=i("ShelfOrderData"),W=i("CommonData"),q=i("NpcPetMgr"),z=i("PreloadHelper"),K=i("TimeUtils");function Z(){var t=null!==l&&l.apply(this,arguments)||this;return t.tileMap_bg=null,t.nod_gird_parent=null,t.map_object_layer=null,t.preview_layer=null,t.scr=null,t.npc_layer=null,t.map_bg_2=null,t.district_lock_layer=null,t.lbl_version=null,t.mapNodes=[],t.mainLoadEnd=!1,t.baseUILoadEnd=!1,t.mainRoleEnd=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(Z,l=d.default),Z.prototype.onLoad=function(){var t=this;l.prototype.onLoad.call(this),(u.gm.mainUI=this).district_lock_layer.active=!0,O.default.setStatsColor(cc.Color.RED),this.loadData(),A.ReportData.instance.report_point(10030),I.default.getInstance().init();for(var e=0,o=this.district_lock_layer.children;e<o.length;e++){var n=o[e].getComponent(b.default);n.view_range&&I.default.getInstance().addDistrct(n)}u.gm.ui.showModule(u.gm.const.BaseUI,function(){t.baseUILoadEnd=!0,t.checkLoadEnd()}),v.default.getInstance().preload(f.BundleName.MAIN_UI,"map/map_grid",function(){v.default.getInstance().getResAsyn(f.BundleName.MAIN_UI,"map/map_grid",cc.TiledMapAsset,function(e){t.nod_gird_parent.getChildByName("map_grid").getComponent(cc.TiledMap).tmxAsset=e,t.mapGridDisplay(!1)})}),z.default.getInstance().preloadRes(),u.gm.ui.showTopBlock(!0,100),g.default.on(f.GameEvent.end_task,this.checkDistrictCanUnlock,this),g.default.on(f.GameEvent.role_lv_upgrade,this.checkDistrictCanUnlock,this),g.default.on(f.GameEvent.on_decorate_status_change,this.mapGridDisplay,this),this.scr.node.on("scrolling",this.onScrolling,this),this.scr.node.on("scroll-ended",this.onScrollEnd,this),this.checkDistrictCanUnlock(),m.default.getInstance().createRole(this.map_object_layer,cc.v2(123,121),function(){t.mainRoleEnd=!0,t.checkLoadEnd()}),this.lbl_version.string=S.default.version,u.gm.localData.autoCollectState=0,u.gm.localData.saveByKey("autoCollectState")},Z.prototype.start=function(){this.scr.node.getChildByName("view").scale=u.gm.mapData.mapScale,this.getContentNode().on(cc.Node.EventType.TOUCH_END,this.onTouchMap,this),this.getContentNode()._touchListener.setSwallowTouches(!1),I.default.getInstance().updateViewRange(),this.mainLoadEnd=!0,N.default.getInstance().jumpToGrid(cc.v2(123,120)),this.checkLoadEnd(),p.default.hideGrid()},Z.prototype.loadData=function(){P.default.getInstance().load(),R.default.getInstance().loadData(),U.DailyTaskData.getInstance().init(),G.default.getInstance().loadDataEnd(),V.default.getInstance().loadDataEnd(),W.default.getInstance().onLoadDataEnd(),C.default.getInstance().loadData(),-1==W.default.getInstance().lastStaffFoodTime&&0<Object.values(G.default.getInstance().staffs).length&&(W.default.getInstance().lastStaffFoodTime=K.default.getTime())},Z.prototype.createStaffView=function(){for(var t in G.default.getInstance().staffs)(t=G.default.getInstance().staffs[t]).work_in_uid&&x.StaffViewMgr.getInstance().create(G.default.getInstance().getStaffByUID(t.work_in_uid,t.slot_id),t.slot_id)},Z.prototype.createNpc=function(){for(var t in u.gm.localData.npcData)u.gm.localData.npcData[t].display&&F.default.getInstance().create(Number(t))},Z.prototype._countTime=function(){h.default.getTimeNode().schedule(function(t){h.default.updateTime(t)},0,cc.macro.REPEAT_FOREVER)},Z.prototype.onTouchMap=function(t){if(u.gm.mapData.districtTouchLimit=this.canTouchDistrict(t.getLocation()),u.gm.mapData.districtTouchLimit){if(u.gm.mapData.curTouchObject&&u.gm.mapData.curTouchObject.hideHp(),L.default.objects&&L.default.hideAllInteract(),u.gm.mapData.curTouchObject){if(m.default.getInstance().mainRole.inChair)return void m.default.getInstance().mainRole.goOutChair();if(m.default.getInstance().inSwingTree)return void m.default.getInstance().mainRole.goOutSwingTree()}var e,o,n,i,a=[];for(e in u.gm.mapData.mapObject){var r,c,s=u.gm.mapData.mapObject[e];s&&s.node.isValid?s.isDisplay()&&s.data.getUID()!=m.default.getInstance().inObjectUID&&(c=(r=s.getComponentInChildren(cc.PolygonCollider)).node.convertToNodeSpaceAR(t.getLocation()),cc.Intersection.pointInPolygon(c,r.points)&&(s.data.getConfig().can_touch?s.data.getParentData()&&s.data.getParentData().isLock()||a.push(s):cc.log("\u70b9\u51fb\u5230\u4e0d\u80fd\u4ea4\u4e92\u7269\u4ef6",s.objectID,s.node.zIndex))):cc.error(e)}if(0<a.length)return a.sort(function(t,e){return t.data.getParentUID()==e.data.getUID()?-1:e.data.getParentUID()==t.data.getUID()?1:e.node.zIndex-t.node.zIndex}),void a[0].onTouchObject(t);y.BuildBuildingUtils.status==f.EnumBuildStatus.None?k.default.status==f.EnumDecorateStatus.None?this._onTouchToMove(t):k.default.status==f.EnumDecorateStatus.Prepare?k.default.closeDecorateUI():u.gm.mapData.tempMapObject?(n=this.preview_layer.convertToNodeSpaceAR(t.getLocation()),i=_.default.touchToTile(n,u.gm.mapData.mapSize,u.gm.const.GridSize),u.gm.mapData.tempMapObject.setGridPosAndShowGrid(i)):j.default.getLiftObject()&&(o=j.default.getLiftObject(),n=this.preview_layer.convertToNodeSpaceAR(t.getLocation()),i=_.default.touchToTile(n,u.gm.mapData.mapSize,u.gm.const.GridSize),o.setGridPosAndShowGrid(i)):y.BuildBuildingUtils.status==f.EnumBuildStatus.Prepare&&y.BuildBuildingUtils.closeBuildUI()}},Z.prototype._onTouchToMove=function(t){cc.log("on touch map====  role move"),u.gm.mapData.resetCurTouchObject(),t=t.getLocation(),t=this.tileMap_bg.node.convertToNodeSpaceAR(t),t=_.default.touchToTile(t,u.gm.mapData.mapSize,u.gm.const.GridSize),m.default.getInstance().roleMove(t)},Z.prototype.onScrolling=function(){I.default.getInstance().isLimit&&this.districtDisplayLimit(),p.default.update_scr_req(),u.gm.mapData.loadObjectReq()},Z.prototype.districtDisplayLimit=function(){var t=I.default.getInstance().getSize(),e=I.default.getInstance().getCenter(),o=Math.max((t.width*u.gm.mapData.mapScale-this.getVisibleWindowSize().width)/2,0)/u.gm.mapData.mapScale,n=-e.x+o,i=-e.x-o;o=Math.max((t.height*u.gm.mapData.mapScale-this.getVisibleWindowSize().height)/2,0)/u.gm.mapData.mapScale,t=-e.y+o,o=-e.y-o,this.getContentNode().x>n?this.getContentNode().x=n:this.getContentNode().x<i&&(this.getContentNode().x=i),this.getContentNode().y=Math.max(Math.min(this.getContentNode().y,t),o)},Z.prototype.onScrollEnd=function(){p.default.sortReq()},Z.prototype.jumpByPos=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=!1),this.getContentNode().x=-t.x,this.getContentNode().y=-t.y,o||(this.getContentNode().y-=.2*this.getVisibleWindowSize().height),p.default.update_scr_req(),p.default.sortReq(),u.gm.mapData.loadObjects(null)},Z.prototype.moveToPos=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=1e3);var n=this.getContentNode().x,i=this.getContentNode().y,a=-t.x;t=-t.y,o=T.default.getDistance(cc.v2(n,i),cc.v2(a,t))/o,cc.tween(this.getContentNode()).to(o,{x:a,y:t}).call(function(){p.default.update_scr_req(),p.default.sortReq(),u.gm.mapData.loadObjects(),e&&e()}).start()},Z.prototype.getCenterPos=function(){return cc.v2(-this.getContentNode().x,-this.getContentNode().y)},Z.prototype.getCenterGrid=function(){var t=this.getCenterPos();return _.default.touchToTile(t,u.gm.mapData.mapSize,u.gm.const.GridSize)},Z.prototype.canTouchDistrict=function(t){var e=!0,o=!1;if(this.district_lock_layer){e=!1;for(var n=0,i=this.district_lock_layer.children;n<i.length;n++){var a=function(n){var i=n.getComponent(b.default),a=i.collider;if(n=a.node.convertToNodeSpaceAR(t),cc.Intersection.pointInPolygon(n,a.points)){if(o=!0,cc.log("\u70b9\u51fb\u5230\u533a\u57df",i.district_id),u.gm.localData.unlockDistrict.includes(i.district_id))return e=!0,"break";var r=y.ConfigUtils.UnlockDistrictUtil.getConfigByID(i.district_id);return r.mission_id||r.cost_prop?r.mission_id&&!B.default.getInstance().doneTaskIDs.includes(r.mission_id)?(u.gm.ui.showNotice("\u533a\u57df\u672a\u89e3\u9501,\u8bf7\u5148\u5b8c\u6210\u4efb\u52a1"),"break"):E.default.getInstance().getLv()<r.unlock_level?(u.gm.ui.showNotice(r.unlock_level+"\u7ea7\u53ef\u89e3\u9501\u8be5\u533a\u57df"),{value:void 0}):void u.gm.ui.showModule(u.gm.const.UnlockDistrictUI,function(t){t.setData(r),t.callback=function(){u.gm.mapData.loadObjects(),u.gm.localData.addUnlockDistrict(r.district_id),I.default.getInstance().updateViewRange()}}):(e=!0,"break")}}(i[n]);if("object"==typeof a)return a.value;if("break"===a)break}}return o?e:(cc.warn("====================\u672a\u70b9\u51fb\u5230\u4efb\u4f55\u533a\u57df"),!0)},Z.prototype.setScale=function(t){u.gm.mapData.mapScale=t,this.scr.node.getChildByName("view").scale=t},Z.prototype.checkLoadEnd=function(){this.mainLoadEnd&&this.baseUILoadEnd&&this.mainRoleEnd&&(u.gm.localData.debug_version=S.default.debug_version,u.gm.localData.saveByKey("debug_version"),u.gm.ui.showTopBlock(!1),M.default.getInstance().checkCanCollect(),this._countTime(),this.createNpc(),u.gm.localData.guide?D.default.getInstance().checkGuide():u.gm.ui.showModule(u.gm.const.Guide),this.scheduleOnce(function(){var t=w.default.getBaseUI().nod_left_buttom.getChildByName("btn_house_keeper");w.default.createRedDot(t,"nod_keeper",35,55),H.default.getInstance().firstCheck()},3),this.createStaffView(),this.createPet(),j.default.checkCanUpgradeDecoration())},Z.prototype.checkDistrictCanUnlock=function(){for(var t=0,e=this.district_lock_layer.children;t<e.length;t++){var o,n=e[t].getComponent(b.default);0==n.district_id||u.gm.localData.unlockDistrict.includes(n.district_id)||(o=y.ConfigUtils.UnlockDistrictUtil.getConfigByID(n.district_id)).unlock_level&&E.default.getInstance().getLv()<o.unlock_level||o.mission_id&&!B.default.getInstance().doneTaskIDs.includes(o.mission_id)||n.showUnlockTip()}},Z.prototype.visiable=function(t){this.node.opacity=(t=void 0===t||t)?255:0},Z.prototype.hide=function(){this.node.opacity=0},Z.prototype.show=function(){this.node.active=!0,this.node.opacity=255,u.gm.ui.showModule(u.gm.const.BaseUI,function(t){t.setModeHide(f.E_BaseUIType.home)}),this.createPet()},Z.prototype.mapGridDisplay=function(t){t?(this.nod_gird_parent.opacity=255,u.gm.mapData.openHouse()):this.nod_gird_parent.opacity=0},Z.prototype.getContentNode=function(){return this.scr.content},Z.prototype.getVisibleWindowSize=function(){return cc.size(this.scr.node.width,this.scr.node.height)},Z.prototype.createPet=function(){if(u.gm.localData.explore_data&&u.gm.localData.explore_data.pet_data_map)for(var t=0,e=u.gm.localData.explore_data.pet_data_map;t<e.length;t++){var o=e[t];q.default.getInstance().createNodeByID(o.pet_id,null)}},Z.prototype.onDestroy=function(){g.default.off(f.GameEvent.end_task,this.checkDistrictCanUnlock,this),g.default.off(f.GameEvent.role_lv_upgrade,this.checkDistrictCanUnlock,this),g.default.off(f.GameEvent.on_decorate_status_change,this.mapGridDisplay,this),F.default.getInstance().reset(),m.default.release(),u.gm.mapData.clear()},s([a(cc.TiledMap)],Z.prototype,"tileMap_bg",void 0),s([a(cc.Node)],Z.prototype,"nod_gird_parent",void 0),s([a(cc.Node)],Z.prototype,"map_object_layer",void 0),s([a(cc.Node)],Z.prototype,"preview_layer",void 0),s([a(cc.ScrollView)],Z.prototype,"scr",void 0),s([a(cc.Node)],Z.prototype,"npc_layer",void 0),s([a(cc.Node)],Z.prototype,"map_bg_2",void 0),s([a(cc.Node)],Z.prototype,"district_lock_layer",void 0),s([a(cc.Label)],Z.prototype,"lbl_version",void 0),i=s([i],Z),r.default=i,cc._RF.pop()},{}],MapBg_2:[function(t,e,o){"use strict";cc._RF.push(e,"2fa94nF0H9Jeql7XQoeo1QX","MapBg_2");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.MapBgGrid=void 0;var l,p=i("Const"),u=i("GameMgr"),d=i("AssetMgr");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_bg=null,t.mapBgGrids=[],t.cache_sf=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=cc.Component),h.prototype.onLoad=function(){var t=this;setTimeout(function(){if(cc.isValid(t.node,!0)&&cc.isValid(u.gm.mainUI,!0)&&cc.isValid(u.gm.mainUI.mapNodes,!0)){for(var e=0;e<=_.left_top.maxH;e++)!function(e){for(var o=0;o<=_.left_top.maxW;o++)!function(o){d.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,_.left_top.path+"/"+e+"_"+o,cc.SpriteFrame,function(n){var i=new cc.Node,a=i.addComponent(cc.Sprite);a.spriteFrame=n,a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1,i.parent=t.nod_bg,t.cache_sf.push(n),i.x=_.left_top.start.x+i.width/2+512*o,i.y=_.left_top.start.y-512*e-i.height/2,i.opacity=0,u.gm.mainUI.mapNodes.push(i)},function(){});var n=new f;n.sprName="/"+e+"_"+o,n.pos.x=_.left_top.start.x+512*o+256,n.pos.y=_.left_top.start.y-512*e-256,t.mapBgGrids.push(n)}(o)}(e);for(e=0;e<=_.left_middle.maxH;e++)!function(e){for(var o=0;o<=_.left_middle.maxW;o++)!function(o){d.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,_.left_middle.path+"/"+e+"_"+o,cc.SpriteFrame,function(n){var i=new cc.Node,a=i.addComponent(cc.Sprite);a.spriteFrame=n,a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1,i.parent=t.nod_bg,t.cache_sf.push(n),i.x=_.left_middle.start.x+i.width/2+512*o,i.y=_.left_middle.start.y-512*e-i.height/2,i.opacity=0,u.gm.mainUI.mapNodes.push(i)},function(){});var n=new f;n.sprName="/"+e+"_"+o,n.pos.x=_.left_middle.start.x+512*o+256,n.pos.y=_.left_middle.start.y-512*e-256,t.mapBgGrids.push(n)}(o)}(e);var o=function(e){for(var o=0;o<=_.left_bottom.maxW;o++)!function(o){d.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,_.left_bottom.path+"/"+e+"_"+o,cc.SpriteFrame,function(n){var i=new cc.Node,a=i.addComponent(cc.Sprite);a.spriteFrame=n,a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1,i.parent=t.nod_bg,t.cache_sf.push(n),i.x=_.left_bottom.start.x+i.width/2+512*o,i.y=_.left_bottom.start.y-512*e-i.height/2,i.opacity=0,u.gm.mainUI.mapNodes.push(i)},function(){});var n=new f;n.sprName="/"+e+"_"+o,n.pos.x=_.left_bottom.start.x+512*o+256,n.pos.y=_.left_bottom.start.y-512*e-256,t.mapBgGrids.push(n)}(o)};for(e=0;e<=_.left_bottom.maxH;e++)o(e);var n=function(e){for(var o=0;o<=_.right_top.maxW;o++)!function(o){d.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,_.right_top.path+"/"+e+"_"+o,cc.SpriteFrame,function(n){var i=new cc.Node,a=i.addComponent(cc.Sprite);a.spriteFrame=n,a.sizeMode=cc.Sprite.SizeMode.RAW,a.trim=!1,i.parent=t.nod_bg,t.cache_sf.push(n),i.x=_.right_top.start.x+i.width/2+512*o,i.y=_.right_top.start.y-512*e-i.height/2,i.opacity=0,u.gm.mainUI.mapNodes.push(i)},function(){});var n=new f;n.sprName="/"+e+"_"+o,n.pos.x=_.right_top.start.x+512*o+256,n.pos.y=_.right_top.start.y-512*e-256,t.mapBgGrids.push(n)}(o)};for(e=0;e<=_.right_top.maxH;e++)n(e)}},1e4)},h.prototype.onDestroy=function(){for(var t=0,e=this.cache_sf;t<e.length;t++)e[t].decRef()},s([a(cc.Node)],h.prototype,"nod_bg",void 0),i=s([i],h),r.default=i;var _={left_top:{start:cc.v2(0,0),path:"texture/map_bg/left_top",maxW:11,maxH:10},left_middle:{start:cc.v2(0,-5319),path:"texture/map_bg/left_middle",maxW:11,maxH:8},left_bottom:{start:cc.v2(0,-9491),path:"texture/map_bg/left_bottom",maxW:7,maxH:5},right_top:{start:cc.v2(6144,0),path:"texture/map_bg/right_top",maxW:9,maxH:2}},f=(g.prototype.getBoundingBoxToWorld=function(){},g);function g(){this.pos=cc.v2(0,0),this.size=cc.size(512,512),this.sprName=""}r.MapBgGrid=f,cc._RF.pop()},{}],MapBg:[function(t,e,o){"use strict";cc._RF.push(e,"ad941ZSIOpMdYZZ7e1rTUdI","MapBg");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.startClickPos=new cc.Vec2(0,0),t._isMove=!1,t.offsetVec2=new cc.Vec2(0,0),t.canDrag=!0,t.XYMoveSpeed=new cc.Vec2(1,1),t.dragNode=null,t.canScale=!0,t.moveNode=null,t.moveXMax=2368,t.moveYMax=1096,t}r(p,s=cc.Component),p.prototype.onEnable=function(){cc.log("mapbg onenable"),this.canDrag&&(this.dragNode.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.dragNode.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.dragNode.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.dragNode.on(cc.Node.EventType.SCALE_CHANGED,this.scaleChange,this))},p.prototype.onDisable=function(){cc.log("mapbg ondisable"),this.canDrag&&(this.dragNode.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.dragNode.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.dragNode.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.dragNode.off(cc.Node.EventType.SCALE_CHANGED,this.scaleChange,this))},p.prototype.scaleChange=function(){this.moveXMax=2368*(this.node.scale+.1),this.moveYMax=1096*(this.node.scale+.1)},p.prototype.touchStart=function(t){this.startClickPos=t.getLocation(),this.offsetVec2.x=0,this.offsetVec2.y=0},p.prototype.touchMove=function(t){var e,o,n,i,a;2<=t.getTouches().length?this.canScale&&(n=(e=t.getTouches())[0],o=e[1],i=n.getDelta(),a=o.getDelta(),e=n.getLocation(),n=o.getLocation(),o=cc.v3(e.add(n).multiplyScalar(.5)),o=this.moveNode.convertToNodeSpaceAR(o),n=e.sub(n),i=i.sub(a),a=Math.abs(n.x)>Math.abs(n.y)?(n.x+i.x)/n.x*this.moveNode.scale:(n.y+i.y)/n.y*this.moveNode.scale,a=Math.max(a,.5),a=Math.min(a,1.5)-this.moveNode.scale,this.moveNode.scale=a+this.moveNode.scale,a=o.multiplyScalar(a),this.moveNode.position=this.moveNode.position.sub(a)):(this.offsetVec2=t.getLocation(),cc.Vec2.distance(this.offsetVec2,this.startClickPos),this.moveNode.x+=t.getDelta().x*this.XYMoveSpeed.x,this.moveNode.y+=t.getDelta().y*this.XYMoveSpeed.y,this.moveNode.x=Math.max(Math.min(this.moveNode.x,this.moveXMax),-this.moveXMax),this.moveNode.y=Math.max(Math.min(this.moveNode.y,this.moveYMax),-this.moveYMax))},p.prototype.touchEnd=function(){},c([l],p.prototype,"canDrag",void 0),c([l],p.prototype,"XYMoveSpeed",void 0),c([l(cc.Node)],p.prototype,"dragNode",void 0),c([l],p.prototype,"canScale",void 0),c([l(cc.Node)],p.prototype,"moveNode",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],MapControl:[function(t,e,o){"use strict";cc._RF.push(e,"2f0d8mE485OVKc5r3ljkPQA","MapControl");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.map=null,t.scaleTime=null,t.defaultScaling=1.1,t.minScale=1,t.maxScale=3,t.moveOffset=2,t.increaseRate=1e4,t.fingerIncreaseRate=1,t.scrollingEvent=new cc.Component.EventHandler,t.scrollEndedEvent=new cc.Component.EventHandler,t.locked=!1,t.singleTouchCb=null,t.isMoving=!1,t.mapTouchList=[],t.isStrict=!1,t}r(p,s=cc.Component),p.prototype.onLoad=function(){},p.prototype.start=function(){this.addEvent(),this.smoothOperate(this.map,cc.Vec2.ZERO,this.defaultScaling)},p.prototype.canStartMove=function(t){var e=t.getStartLocation();return t=t.getLocation(),Math.abs(t.x-e.x)>this.moveOffset||Math.abs(t.y-e.y)>this.moveOffset},p.prototype.addEvent=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var o,n,i,a,r;t.locked||(r=e.getTouches(),t.isStrict&&(r.filter(function(e){var o=cc.v2(e.getStartLocation());return e=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO),cc.rect(e.x-t.node.width/2,e.y-t.node.height/2,t.node.width,t.node.height).contains(o)}).forEach(function(e){0===t.mapTouchList.filter(function(t){return t.id===e.getID()}).length&&(t.mapTouchList[t.mapTouchList.length]={id:e.getID(),touch:e})}),r=t.mapTouchList.map(function(t){return t.touch})),2<=r.length?(t.isMoving=!0,i=r[0],a=r[1],o=cc.v2(i.getDelta()),n=cc.v2(a.getDelta()),e=t.map.convertToNodeSpaceAR(cc.v2(i.getLocation())),i=t.map.convertToNodeSpaceAR(cc.v2(a.getLocation())),a=e.sub(i),e=cc.v2(t.fingerIncreaseRate,t.fingerIncreaseRate),e=o.sub(n).scale(e),e=Math.abs(a.x)>Math.abs(a.y)?(a.x+e.x)/a.x*t.map.scaleX:(a.y+e.y)/a.y*t.map.scaleY,a=i.add(cc.v2(a.x/2,a.y/2)),t.smoothOperate(t.map,a,e)):1===r.length&&(t.isMoving||t.canStartMove(r[0]))&&(t.isMoving=!0,r=cc.v2(r[0].getDelta()),t.dealMove(r,t.map,t.node)))},this,!0),this.node.on(cc.Node.EventType.TOUCH_END,function(e){var o;t.locked||(t.isMoving&&e.stopPropagation(),(t.isStrict?t.mapTouchList:e.getTouches()).length<=1&&(t.isMoving?t.scrollEndedEvent&&cc.Component.EventHandler.emitEvents([t.scrollEndedEvent]):(o=cc.v2(e.getLocation()),o=t.map.convertToNodeSpaceAR(o),t.dealSelect(o)),t.isMoving=!1),t.isStrict&&t.removeTouchFromContent(e,t.mapTouchList))},this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.locked||((t.isStrict?t.mapTouchList:e.getTouches()).length<=1&&(t.isMoving=!1),t.isStrict&&t.removeTouchFromContent(e,t.mapTouchList))},this,!0),this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(e){var o,n;t.locked||(n=cc.v2(e.getLocation()),o=e.getScrollY(),e=t.map.scale+o/t.increaseRate,n=(o=t.map).convertToNodeSpaceAR(n),t.smoothOperate(o,n,e))},this)},p.prototype.removeTouchFromContent=function(t,e){for(var o=t.getTouches().map(function(t){return t.getID()}),n=e.length-1;0<=n;--n)-1<o.indexOf(e[n].id)&&e.splice(n,1)},p.prototype.smoothOperate=function(t,e,o){var n;this.minScale<=o&&o<=this.maxScale?(n=o-t.scaleX,e=e.scale(cc.v2(n,n)),n=cc.v2(t.position.x,t.position.y).sub(e),e=(e=this.fingerIncreaseRate.toString()).split(".")[1]?e.split(".")[1].length:0,e=Math.pow(10,2+e),o=Math.floor(o*e)/e,t.scale=o,this.dealScalePos(n,t)):o=cc.misc.clampf(o,this.minScale,this.maxScale),cc.isValid(this.scaleTime)&&(this.scaleTime.string=Math.floor(100*o)+"%")},p.prototype.dealScalePos=function(t,e){var o;1===e.scale?t=cc.Vec2.ZERO:(o=this.node.convertToWorldSpaceAR(t),o=this.node.convertToNodeSpaceAR(o),0<(o=this.calculateEdge(e,this.node,o)).left&&(t.x-=o.left),0<o.right&&(t.x+=o.right),0<o.top&&(t.y+=o.top),0<o.bottom&&(t.y-=o.bottom)),e.x=t.x,e.y=t.y},p.prototype.dealMove=function(t,e,o){var n=e.convertToWorldSpaceAR(cc.Vec2.ZERO);(n=o.convertToNodeSpaceAR(n)).x+=t.x,n.y+=t.y,(n=this.calculateEdge(e,o,n)).left<=0&&n.right<=0&&(e.x+=t.x),n.top<=0&&n.bottom<=0&&(e.y+=t.y),this.scrollingEvent&&cc.Component.EventHandler.emitEvents([this.scrollingEvent])},p.prototype.dealSelect=function(t){cc.log("click map on ("+t.x+", "+t.y+")"),this.singleTouchCb&&this.singleTouchCb(t)},p.prototype.calculateEdge=function(t,e,o){var n=(e.width-t.width*t.scaleX)/2;return t=(e.height-t.height*t.scaleY)/2,{left:n+o.x,right:n-o.x,top:t-o.y,bottom:t+o.y}},p.prototype.setStrictPattern=function(t){this.isStrict=t},p.prototype.getStrictPattern=function(){return this.isStrict},c([l({type:cc.Node,tooltip:"\u76ee\u6807\u8282\u70b9"})],p.prototype,"map",void 0),c([l(cc.Label)],p.prototype,"scaleTime",void 0),c([l({tooltip:"\u56fe\u7247\u521d\u59cb\u7f29\u653e"})],p.prototype,"defaultScaling",void 0),c([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5c0fscale"})],p.prototype,"minScale",void 0),c([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5927scale"})],p.prototype,"maxScale",void 0),c([l({tooltip:"\u5355\u70b9\u89e6\u6478\u5bb9\u5fcd\u8bef\u5dee"})],p.prototype,"moveOffset",void 0),c([l({tooltip:"\u6eda\u8f6e\u7f29\u653e\u6bd4\u7387"})],p.prototype,"increaseRate",void 0),c([l({displayName:"\u53cc\u6307\u7f29\u653e\u901f\u7387",max:10,min:.001})],p.prototype,"fingerIncreaseRate",void 0),c([l({type:cc.Component.EventHandler})],p.prototype,"scrollingEvent",void 0),c([l({type:cc.Component.EventHandler})],p.prototype,"scrollEndedEvent",void 0),c([l],p.prototype,"isStrict",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],MapDataHelper:[function(t,e,o){"use strict";cc._RF.push(e,"39f91Hi1M5MLoSLBNTmiEVx","MapDataHelper");var n=t,i=e,a=o;Object.defineProperty(a,"__esModule",{value:!0}),i=n("Decorators");var r=n("Vec2Utils"),c=n("DecorationMgr"),s=n("DistrictMgr"),l=n("Const"),p=n("GameMgr"),u=n("PropMgr"),d=n("MapHelper");function h(){}h.findDataByObjectID=function(t,e){void 0===e&&(e=!0);var o,n=p.gm.mapData.getAllObjectDatas(),i=[],a=[];for(o in n)n[o].objectID==t&&(n[o].isInUnlockDistrict()?a.push(n[o]):e&&i.push(n[o]));return a.sort(function(t,e){return t.lv==e.lv?t.isLock()==e.isLock()?t.getDistanceWithRole()-e.getDistanceWithRole():t.isLock()-e.isLock():e.lv-t.lv}),a.push.apply(a,i),a[0]},h.getUnlockFoodTable=function(){var t,e=p.gm.mapData.getAllObjectDatas(),o=[];for(t in e){var n=e[t];n.objectID==l.SpecialObjectID.food_table&&(n.isLock()||o.push(n))}return o},h.getUnlockBBQDesk=function(){var t,e=p.gm.mapData.getAllObjectDatas(),o=[];for(t in e){var n=e[t];n.objectID==l.SpecialObjectID.bbq_desk&&(n.isLock()||o.push(n))}return o},h.getDataByID=function(t){var e,o=p.gm.mapData.getAllObjectDatas();for(e in o){var n=o[e];if(n.objectID==t)return n}cc.error("not found data",t)},h.getDataMaxLv=function(t){var e,o=0,n=p.gm.mapData.getAllObjectDatas();for(e in n){var i=n[e];i.objectID!=t||i.isLock()||(o=Math.max(i.lv,o))}return o},h.getUnlockDatas=function(t){var e,o=[],n=p.gm.mapData.getAllObjectDatas();for(e in n){var i=n[e];!i.isLock()&&t.includes(i.objectID)&&o.push(i)}return o},h.getObjectCount=function(t){var e,o=0;for(e in p.gm.mapData.getAllObjectDatas())p.gm.mapData.getAllObjectDatas()[e].objectID==t&&o++;return o},h.getMapObjectByID=function(t){var e,o=[];for(e in p.gm.mapData.mapObject)if(p.gm.mapData.mapObject[e].objectID==t){var n=cc.v2(p.gm.mapData.mapObject[e].node.x,p.gm.mapData.mapObject[e].node.y);if(n=p.gm.mapData.mapObject[e].node.parent.convertToWorldSpaceAR(n),s.default.getInstance().isInUnlockDistrict(n)){o.unshift(p.gm.mapData.mapObject[e]);break}o.push(p.gm.mapData.mapObject[e])}return o[0]},h.getVisibleObstacles=function(){var t=cc.director.getTotalFrames();if(t==h.last_frame)return h.obstacles;h.last_frame=t,(new Date).getTime();for(var e=[],o=0,n=d.default.display_objects;o<n.length;o++){var i=n[o];i.isDisplay()&&(i=i.data.isLock()?i.data.getSeizePos():i.data.getUnCrossGrid(),e.push.apply(e,i))}return h.obstacles=e},h.checkCanStand=function(t){return!(t.x>=p.gm.mapData.mapSize.width||t.y>=p.gm.mapData.mapSize.height||t.x<0||t.y<0||p.gm.mapData.obstacleData.checkMapObstacles([t]))},h.getFirstCanCross=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];if(!p.gm.mapData.obstacleData.checkMapObstacle(n))return n}return null},h.getOutsideEmptyGrid=function(t,e){for(var o,n=cc.v2(t.x+e,t.y+e),i=[],a=2*e+1,c=2*e+1,s=n.x;s>=n.x-a+1;s--)for(var l=n.y;l>=n.y-c+1;l--)(s>n.x-1||s<=n.x-1-(a-2))&&(o=cc.v2(s,l),p.gm.mapData.obstacleData.checkMapObstacle(o)||r.default.includes(i,[o])||i.push(o)),(l>n.y-1||l<=n.y-1-(c-2))&&(o=cc.v2(s,l),p.gm.mapData.obstacleData.checkMapObstacle(o)||r.default.includes(i,[o])||i.push(o));return i},h.checkMapSeize=function(t){return p.gm.mapData.occupyData.checkMapSeize2(t)},h.checkMapObstacle=function(t){return p.gm.mapData.obstacleData.checkMapObstacle(t)},h.getLiftObject=function(){for(var t in p.gm.mapData.liftMapObject){if((t=p.gm.mapData.liftMapObject[t])&&t.mode==l.MapObjectMode.preview)return t;cc.error("object error ",t)}},h.findlockDataByObjectID=function(t){var e,o=p.gm.mapData.getAllObjectDatas(),n=[],i=[];for(e in o)if(o[e].objectID==t&&o[e].isLock())for(var a=0,r=o[e].getBoundingCocosPos();a<r.length;a++){var c=r[a];if(c=p.gm.mainUI.map_object_layer.convertToWorldSpaceAR(c),s.default.getInstance().isInUnlockDistrict(c)){i.push(o[e]);break}n.push(o[e])}return i.sort(function(t,e){return t.getDistanceWithRole()-e.getDistanceWithRole()}),i.push.apply(i,n),i[0]},h.getProduceObjectData=function(){var t,e=p.gm.mapData.getAllObjectDatas();for(t in e){var o=e[t];if(!o.isLock()&&o.isBuilding()&&o.isInUnlockDistrict())for(var n=0,i=o.slots;n<i.length;n++)if(i[n].checkHasProduce())return o}},h.checkObjectSlot=function(t){for(var e=0,o=t.slots;e<o.length;e++){var n=o[e];if(!n.isLock){if(!n.checkHasProduce())return t;if(n.produceData.canHarvest())return t}}return null},h.findData=function(t,e,o){void 0===o&&(o=!1);var n,i=p.gm.mapData.getAllObjectDatas(),a=[],r=[];for(n in i)i[n].objectID==t&&e(i[n])&&(i[n].isInUnlockDistrict()?r.push(i[n]):o&&a.push(i[n]));return r.sort(function(t,e){return t.lv==e.lv?t.getDistanceWithRole()-e.getDistanceWithRole():e.lv-t.lv}),r.push.apply(r,a),r[0]},h.getSlotIsOpen=function(t,e){var o,n=p.gm.mapData.getAllObjectDatas();for(o in n)if(n[o].objectID==t&&n[o].slots[e]&&0==n[o].slots[e].isLock)return!0;return!1},h.checkCanUpgradeDecoration=function(){var t,e=p.gm.mapData.getAllObjectDatas();for(t in e){var o,n=e[t];!n.isLock()&&n.isDecoration()&&((o=c.default.getDataModel(n.objectID,n.lv))&&o.config.need&&2==o.config.type?(o=u.default.checkBagEnough(o.config.need),n.canUpgrade=!!o):n.canUpgrade=!1)}},h.last_frame=0,h.obstacles=[],function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);3<a&&r&&Object.defineProperty(e,o,r)}([i.PrintFuncTime()],h,"checkCanUpgradeDecoration",null),i=h,a.default=i,cc._RF.pop()},{}],MapDataLoader:[function(t,e,o){"use strict";cc._RF.push(e,"45a32ZkilVEH5VxPzpzuyeB","MapDataLoader");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Singleton"),u=(a=i("Decorators"),i("CommonUtils")),d=i("Const"),h=i("GameMgr"),_=i("MapHelper");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.need_load_datas=[],t}c(f,l=p.default),f.prototype.updateLoadObjects=function(){var t,e=this.getNeedLoadObjectData();(t=this.need_load_datas).push.apply(t,e)},f.prototype.update=function(){if(0<this.need_load_datas.length)for(var t=this,e=1;e<=5;e++)!function(){var e=t.need_load_datas.shift();e&&e.objectState==d.ObjectState.none&&(e.objectState=d.ObjectState.loading,u.default.loadMapObjectPrefab(e.objectID,function(t){e.objectState=d.ObjectState.loaded,setTimeout(function(){h.gm.mapData.addObject(t,e)},0)}))}()},f.prototype.getNeedLoadObjectData=function(){var t,e=[],o=_.default.getSVBox(),n=h.gm.mapData.getAllObjectDatas();for(t in n){var i=n[t];if(i.objectState==d.ObjectState.none)for(var a=0,r=i.getBoundingCocosPos();a<r.length;a++){var c=r[a];if(c=h.gm.mainUI.map_object_layer.convertToWorldSpaceAR(c),o.contains(c)){e.push(i);break}}}return e},s([a.PrintFuncTime()],f.prototype,"update",null),s([a.PrintFuncTime()],f.prototype,"getNeedLoadObjectData",null),a=f,r.default=a,cc._RF.pop()},{}],MapDataMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e53a3quizxCgoNlojf0XRSs","MapDataMgr");var n=t,i=e,a=o;Object.defineProperty(a,"__esModule",{value:!0});var r=n("Const"),c=n("GameMgr"),s=n("MapObjectData"),l=n("Vec2Utils"),p=n("MapHelper"),u=n("CommonUtils"),d=n("MapObject"),h=n("MainHouse"),_=n("OccupyData"),f=n("ObstacleData"),g=n("TMXUtils"),y=n("MainRoleMgr"),m=n("MapInsideMgr"),v=n("GuideMgr"),b=n("NpcMgr"),I=n("PlaceMgr"),D=n("Shopboard"),C=n("BedRoom"),O=n("MapDataLoader"),w=(i=n("Decorators"),n("ChickenHouse")),M=n("PigHouse"),P=n("CattleHouse");function S(){this.mapObject={},this._mapObjectDatas={},this.liftMapObject={},this.liftMapObjectDatas={},this.liftMapObjectGrid=null,this.tempObjectData=null,this.tempMapObject=null,this.occupyData=new _.default,this.obstacleData=new f.default,this.mainHouse=null,this.shopboard=null,this.mainHeroInObjectUID="",this.curTouchObject=null,this.guidingID=0,this.mapScale=.7,this.districtTouchLimit=!0,this.set_load_object_req=!1}S.prototype.clear=function(){this.mapObject={},this._mapObjectDatas={},this.occupyData=new _.default,this.obstacleData=new f.default},S.prototype.addOriginalObjectDatas=function(t){this.mapSize=cc.size(t.width,t.height);for(var e={},o=0,n=t.layers;o<n.length;o++){var i=n[o];if("object_layer"==i.name){e=i.data;break}}t=Object.keys(e).length,cc.log("this.initObjectLayerData len is",t);var a,r=!1;for(a in e){var s=Number(e[a].id);(NaN==s||s<=0)&&cc.error("objectID error",s,e[a]);var l=a.split("-"),p=u.default.createOriginalUID(l[0],l[1],s);c.gm.localData.initMapObjects[p]||(c.gm.localData.initMapObjects[p]=s,r=!0,c.gm.localData.addMapObjectData(p,{x:Number(l[0]),y:Number(l[1]),objectID:s}),this._setInitSetting(p))}r&&(c.gm.localData.saveByKey("initMapObjects"),c.gm.localData.saveByKey("mapObjectDatas"))},S.prototype.initMapObjectData=function(){for(var t in c.gm.localData.mapObjectDatas)(e=c.gm.localData.mapObjectDatas[t]).parentUID||(e?s.default.createByLocalData(e,t):cc.error("not found local data"));for(var t in c.gm.localData.mapObjectDatas){var e;(e=c.gm.localData.mapObjectDatas[t]).parentUID&&(e?s.default.createByLocalData(e,t):cc.error("not found local data"))}for(var o in this._mapObjectDatas)this.initInsideData(this._mapObjectDatas[o])},S.prototype.loadObjectReq=function(){this.set_load_object_req=!0},S.prototype.loadObjects=function(t){void 0===t&&(t=null),O.default.getInstance().updateLoadObjects()},S.prototype.createByLocalData=function(t,e){!t||(e=s.default.createByLocalData(t,e)).objectState==r.ObjectState.none&&(e.objectState=r.ObjectState.loading,e.loadObject())},S.prototype.addObject=function(t,e,o){var n,i=this;this.mapObject[e.getUID()]?o&&o(this.mapObject[e.getUID()]):!(n=e.getParentData())||this.mapObject[n.getUID()]?this._addObject(t,e,o):n.loadObject(function(){i._addObject(t,e,o)})},S.prototype._addObject=function(t,e,o){if(this.mapObject[e.getUID()])cc.error("\u8bf7\u52ff\u91cd\u590d\u6dfb\u52a0\u5bf9\u8c61",e);else{var n=this._getParentNode(e),i=cc.instantiate(t),a=i.getComponent(d.default);if(a.prefab=t,a.objectID=e.objectID,a.data=e,this.mapObject[e.getUID()]=a,i.parent=n,i.active=!0,a.initMapPos(e.posSys),e.objectID==r.SpecialObjectID.mainHouse){this.mainHouse=a;for(var c=0,s=b.default.getInstance().getAllNpcView();c<s.length;c++)s[c].updatePos()}else e.objectID==r.SpecialObjectID.stall&&(this.shopboard=a);o&&o(a)}},S.prototype._addInitInsideObject=function(t){var e,o=m.default.getInstance().getInsideObject(t.objectID,"object_layer"),n=!1;for(e in o){var i=Number(o[e].id),a=e.split("-"),l=u.default.createOriginalUID(Number(a[0]),Number(a[1]),i,t.getUID());c.gm.localData.initInsideObjects[l]||(c.gm.localData.initInsideObjects[l]=i,n=!0,i={x:Number(a[0]),y:Number(a[1]),objectID:i,parentUID:t.getUID()},c.gm.localData.addMapObjectData(l,i),(l=s.default.createByLocalData(i,l)).objectState==r.ObjectState.none&&(l.objectState=r.ObjectState.loading,l.loadObject()))}n&&(c.gm.localData.saveByKey("initInsideObjects"),c.gm.localData.saveByKey("mapObjectDatas"))},S.prototype.initInsideData=function(t){var e,o=m.default.getInstance().getInsideObject(t.objectID,"object_layer"),n=!1;for(e in o){var i=Number(o[e].id),a=e.split("-"),r=u.default.createOriginalUID(Number(a[0]),Number(a[1]),i,t.getUID());c.gm.localData.initInsideObjects[r]||(c.gm.localData.initInsideObjects[r]=i,n=!0,i={x:Number(a[0]),y:Number(a[1]),objectID:i,parentUID:t.getUID()},c.gm.localData.addMapObjectData(r,i),s.default.createByLocalData(i,r))}n&&(c.gm.localData.saveByKey("initInsideObjects"),c.gm.localData.saveByKey("mapObjectDatas"))},S.prototype.createPreviewObject=function(t,e,o,n){var i=this,a=g.default.tileToCocos(o,c.gm.mapData.mapSize,c.gm.const.GridSize);n=n||u.default.createOriginalUID(o.x,o.y,t);var l=s.default.createByID(t,n);c.gm.localData.collect_decoration_datas[n]&&(l.lv=c.gm.localData.collect_decoration_datas[n].lv),l.setWorldGrid(o),u.default.loadMapObjectPrefab(t,function(n){(n=cc.instantiate(n)).x=a.x,n.y=a.y,n.getComponent(d.default).objectID=t,n.getComponent(d.default).data=l,n.getComponent(d.default).mode=r.MapObjectMode.preview,n.parent=e,n.getComponent(d.default).setMode(r.MapObjectMode.preview),i.setTempMapObject(o,n.getComponent(d.default))}),this.setTempObjectData(l)},S.prototype.setTempObjectData=function(t){this.tempObjectData=t},S.prototype.setTempMapObject=function(t,e){(this.tempMapObject=e).setGridPosAndShowGrid(t),e.setMode(r.MapObjectMode.preview)},S.prototype.removeMapObject=function(t){this.obstacleData.removeMapObstacle(this._mapObjectDatas[t].getUnCrossGrid()),this._mapObjectDatas[t]=null,delete this._mapObjectDatas[t],this.mapObject[t].node.destroy(),delete this.mapObject[t],c.gm.localData.removeMapObjectData(t)},S.prototype.cancelPreview=function(){p.default.hideGrid(),this.removeTempObject(),p.default.setMapMove()},S.prototype.onConfirmPreviewByData=function(t){if(I.default.getInstance().checkCanPut(t)){t.updateParent();var e=s.default.toLocalObjectData(t);return e.unlockAction=!0,c.gm.localData.addMapObjectData(t.getUID(),e),this.createByLocalData(e,t.getUID()),this.removeTempObject(),!0}return cc.log("\u8be5\u4f4d\u7f6e\u4e0d\u80fd\u5efa\u9020"),!1},S.prototype.removeTempObject=function(){this.tempMapObject.node.destroy(),this.tempMapObject=null,this.tempObjectData=null},S.prototype.liftObject=function(t){this.obstacleData.removeMapObstacle(t.getUnCrossGrid());var e=t.getUID();this.liftMapObjectDatas[e]=t,this.liftMapObject[e]=this.mapObject[e],this.liftMapObject[e].reqShowGrid(),this.liftMapObjectGrid=cc.v2(this.mapObject[e].worldGrid.x,this.mapObject[e].worldGrid.y),delete this._mapObjectDatas[e],delete this.mapObject[e]},S.prototype.place=function(t){var e=t.getUnCrossGrid();this.obstacleData.addMapObstacles(e)?(e=t.getUID(),t.updateParent(),this._mapObjectDatas[e]=this.liftMapObjectDatas[e],this.mapObject[e]=this.liftMapObject[e],delete this.liftMapObjectDatas[e],delete this.liftMapObject[e],t.save(),this.checkInHouse(t)&&(this.mapObject[e].lockIndex=!0,this.mapObject[e].updateIndex(1))):cc.error(t.objectID)},S.prototype.checkInHouse=function(t){var e=this.mainHouse.data.getSeizePos();return t=t.getSeizePos(),l.default.includes(e,t)},S.prototype.checkMoveIntoHouse=function(){var t=[],e=y.default.getInstance().mainRole.getGrid();t.push(e);var o=this.mainHouse.data.getSeizePos(),n=this.mainHouse.getComponent(h.default);l.default.includes(this.mainHouse.data.getGridByBounding(8),t)?n.open():n.close(),l.default.includes(o,[e])?(y.default.getInstance().mainRolePosStatus=r.EnumRolePos.MianHouse,this.mainHeroInObjectUID=this.mainHouse.data.getUID()):(y.default.getInstance().mainRolePosStatus==r.EnumRolePos.MianHouse&&100001==c.gm.localData.lastGuide.id&&0==v.default.getInstance().lastGuideIndex&&(v.default.getInstance().lastGuideIndex+=1,v.default.getInstance().dealGuide(c.gm.localData.lastGuide.id)),y.default.getInstance().mainRolePosStatus=r.EnumRolePos.Field,this.mainHeroInObjectUID="")},S.prototype.openHouse=function(){var t=this.mainHouse.getComponent(h.default);t&&t.open()},S.prototype.collect=function(t){var e=this.liftMapObjectDatas[t];e&&(c.gm.localData.addToCollect(t,{x:e.getWorldGrid().x,y:e.getWorldGrid().y,objectID:e.objectID,lv:e.lv}),this.liftMapObject[t].node.destroy(),delete this.liftMapObject[t],delete this.liftMapObjectDatas[t],c.gm.localData.removeMapObjectData(t))},S.prototype.getObjectData=function(t){return this._mapObjectDatas[t]},S.prototype.getAllObjectDatas=function(){return this._mapObjectDatas},S.prototype._setInitSetting=function(t){var e=c.gm.localData.getMapObjectData(t),o=e.objectID;if(t=0,10011==o)t=c.gm.config.data.Setting[0].InitialPlant1[1];else if(10015==o)t=c.gm.config.data.Setting[0].InitialPlant2[1];else if(10012==o)t=c.gm.config.data.Setting[0].InitialPlant3[1];else{if(10013!=o)return;t=c.gm.config.data.Setting[0].InitialPlant4[1]}e.slots=[],e.slots.push({isLock:!1,produceID:t,beginTime:1,endTime:1,pickID:0})},S.prototype.resetCurTouchObject=function(){this.curTouchObject&&(this.curTouchObject.hideHp(),this.curTouchObject=null)},S.prototype._getParentNode=function(t){var e=c.gm.mainUI.map_object_layer;return!t.getParentUID()||(t=this.mapObject[t.getParentUID()])&&(t.objectID==r.SpecialObjectID.stall?e=t.getComponent(D.default).nod_inside:t.objectID==r.SpecialObjectID.mainHouse?e=t.getComponent(h.default).nod_inside:t.objectID==r.SpecialObjectID.bedroom?e=t.getComponent(C.default).nod_inside:t.objectID==r.SpecialObjectID.Chicken?e=t.getComponent(w.default).nod_inside:t.objectID==r.SpecialObjectID.Pig?e=t.getComponent(M.default).nod_inside:t.objectID==r.SpecialObjectID.Milk_Cow||t.objectID==r.SpecialObjectID.Ox?e=t.getComponent(P.default).nod_inside:t.nod_inside?e=t.nod_inside:cc.error("not found parent node")),e},S.prototype.updateBreedData=function(){for(var t in this._mapObjectDatas)(t=this._mapObjectDatas[t]).breedData&&t.updateLocalData()},function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);3<a&&r&&Object.defineProperty(e,o,r)}([i.PrintFuncTime()],S.prototype,"addObject",null),i=S,a.default=i,cc._RF.pop()},{}],MapHelper:[function(t,e,o){"use strict";cc._RF.push(e,"092f2tbO+RMELuahTmjrKmi","MapHelper");var n=t,i=e,a=o;Object.defineProperty(a,"__esModule",{value:!0}),i=n("Decorators");var r=n("BarbecueNpcMgr"),c=n("DistrictMgr"),s=n("BusinessmanMgr"),l=n("GameMgr"),p=n("MapSorter");function u(){}u.update_scr_req=function(){this.scr_req=!0},u.updateScr=function(){var t,e=this.getSVBox();for(t in l.gm.mapData.mapObject)l.gm.mapData.mapObject[t]&&l.gm.mapData.mapObject[t].node.isValid?l.gm.mapData.mapObject[t].getBoundingBoxNode().getBoundingBoxToWorld().intersects(e)||l.gm.mapData.mapObject[t].onAni?l.gm.mapData.mapObject[t].display(!0):l.gm.mapData.mapObject[t].display(!1):cc.error(t);this.updateBg(),this.updateBusinessView(),this.updateBBQNpcView()},u.updateBusinessView=function(){for(var t=0,e=s.BusinessmanMgr.getInstance().getView();t<e.length;t++){var o=e[t];o.node&&this.checkNodeIsInWindow(o.getBoundingBoxNode())?o.display():o.display(!1)}},u.updateBBQNpcView=function(){for(var t=0,e=r.default.getInstance().getView();t<e.length;t++){var o=e[t];o.node&&this.checkNodeIsInWindow(o.getBoundingBoxNode())?o.display():o.display(!1)}},u.updateCloud=function(){for(var t in c.default.getInstance().district)if((t=c.default.getInstance().district[t]).nod_cloud&&(t=t.nod_cloud.getChildByName("nod_cloud")))for(var e=0,o=t.children;e<o.length;e++){var n=o[e];this.checkNodeIsInWindow(n)?n.active=!0:n.active=!1}},u.updateBg=function(){for(var t=this.getSVBox(),e=0,o=l.gm.mainUI.mapNodes;e<o.length;e++){var n=o[e];n.getBoundingBoxToWorld().intersects(t)?n.opacity=255:n.opacity=0}},u.setMapNoMove=function(){cc.log("map cannot move"),l.gm.mainUI.scr.enabled=!1},u.setMapMove=function(){cc.log("map can move"),l.gm.mainUI.scr.enabled=!0},u.hideGrid=function(){},u.getSVBox=function(){return cc.rect(0,0,l.gm.mainUI.getVisibleWindowSize().width- -0,l.gm.mainUI.getVisibleWindowSize().height- -0)},u.checkNodeIsInWindow=function(t){if(cc.isValid(t)){var e=this.getSVBox();return!!t.getBoundingBoxToWorld().intersects(e)}return cc.error("not valid"),!1},u.sortReq=function(){this.sort_req=!0},u.sort=function(){p.default.getInstance().sortPrepare()},u.sort_req=!1,u.scr_req=!1,u.display_objects=[],function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);3<a&&r&&Object.defineProperty(e,o,r)}([i.PrintFuncTime()],u,"updateScr",null),i=u,a.default=i,cc._RF.pop()},{}],MapInsideMgr:[function(t,e,o){"use strict";cc._RF.push(e,"43056bmLDZO54Y5TggwtLaB","MapInsideMgr");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.mapJsonData=null,t.insideData={},t.npc_path=null,t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),s.prototype.addData=function(t,e){this.insideData[t]=e},s.prototype.setData=function(t){this.insideData=t},s.prototype.getInsideBlocks=function(t,e){if(this.insideData[t])for(var o=0,n=this.insideData[t].layers;o<n.length;o++){var i=n[o];if(i.name==e)return i.blocks}return[]},s.prototype.getInsideObject=function(t,e){var o={};if(this.insideData[t])for(var n=0,i=this.insideData[t].layers;n<i.length;n++){var a=i[n];if(a.name==e){for(var r in a.data)o[r]=a.data[r];break}}return o},r=s,c.default=r,cc._RF.pop()},{}],MapInsideParse:[function(t,e,o){"use strict";cc._RF.push(e,"6cbaeRUSfdKopLjrZOgzzOb","MapInsideParse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("TileMapUtils"),d=i("AssetMgr"),h=i("BrowserUtils"),_=i("ObjectUtils");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.tileMap=null,t.tempIds=[],t.tempDatas={},t.count=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=cc.Component),f.prototype.start=function(){this.tempIds=_.default.copy([10001,10002,10021,10022,10023,10024,10041,10042,10043,10044,10045,10061,10071,10072,10111,10204]),this.tempDatas={},this.parse()},f.prototype.parse=function(){var t,e=this,o=this.tempIds.shift();o?(t="map_inside_grid_"+o,d.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,"map/tilemap_inside/"+t,cc.TiledMapAsset,function(n){e.tileMap.tmxAsset=n,e.tempDatas[o]=u.default.parseMapInside(e.tileMap,t),e.parse()})):h.default.creatJsonFile(this.tempDatas,"map_inside_json")},s([a(cc.TiledMap)],f.prototype,"tileMap",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],MapObjectCommon:[function(t,e,o){"use strict";cc._RF.push(e,"493a88Gi01HG4H1WgGSGxol","MapObjectCommon");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p,u=i("CommonUtils"),d=i("Const"),h=i("MainRoleMgr"),_=i("TaskMgr"),f=i("TaskRecordData"),g=i("Object_10336"),y=i("Object_10337"),m=i("Object_10605"),v=i("Trunk");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.map_object=null,t.nod_interact=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=cc.Component),(p=b).prototype.onLoad=function(){p.objects.push(this),this.nod_interact.active=!1},b.hideAllInteract=function(){for(var t=0,e=p.objects;t<e.length;t++){var o=e[t];o&&cc.isValid(o.nod_interact)&&(o.nod_interact.active=!1)}},b.prototype.setObject=function(t){this.map_object=t},b.prototype.showInteract=function(t){void 0===t&&(t=!0),this.nod_interact&&(this.nod_interact.active=!this.nod_interact.active)},b.prototype.onBtnDetail=function(){u.default.showDecorationUI(this.map_object),this.showInteract(!1)},b.prototype.onBtnInteract=function(){this.map_object.objectID==d.SpecialObjectID.lamp?this.map_object.getComponent(g.default).turn():this.map_object.objectID==d.SpecialObjectID.fan?this.map_object.getComponent(y.default).turn():this.map_object.objectID==d.SpecialObjectID.light_plate?this.map_object.getComponent(m.default).turn():this.map_object.objectID==d.SpecialObjectID.trunk?this.map_object.getComponent(v.default).turn():this.map_object.objectID==d.SpecialObjectID.rocking_chair&&h.default.getInstance().mainRole.goInChair(),f.default.getInstance().addInteract(this.map_object.objectID),_.default.getInstance().checkAll(),this.showInteract(!1)},b.objects=[],s([a({type:cc.Node})],b.prototype,"nod_interact",void 0),i=p=s([i],b),r.default=i,cc._RF.pop()},{}],MapObjectData:[function(t,e,o){"use strict";cc._RF.push(e,"b12bbab0GBA74Raj4niNbSd","MapObjectData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("EventManager"),r=n("TimeUtils"),c=n("TMXUtils"),s=n("Vec2Utils"),l=n("NetUtils"),p=n("BreedMgr"),u=n("FoodOrderMgr"),d=n("DailyTaskData"),h=n("DistrictMgr"),_=n("HeartMgr"),f=n("MainRoleMgr"),g=n("TaskRecordData"),y=(n("AppConfig"),n("CommonUtils")),m=n("BuildInsideUnlockUtils"),v=n("ConfigUtils"),b=n("Const"),I=n("GameMgr"),D=n("ProduceData"),C=n("PropMgr"),O=n("SlotDataBase"),w=n("BreedData"),M=n("MapDataHelper"),P=n("MapInsideMgr");function S(t,e){if(this.objectID=1,this._uid="",this.type=null,this.rotation=!1,this.slots=[],this.lv=1,this.hp=0,this._parentUID="",this.zone=0,this.objectState=b.ObjectState.none,this.posSys=new b.MapPosSys,this.isDie=!1,this.breedData=null,this._canUpgrade=!1,t&&e)if(this.objectID=Number(t),this._uid=e,I.gm.localData.mapObjectDatas[e]&&(this.lv=I.gm.localData.mapObjectDatas[e].lv||1),this._config=v.BigMapConfigUtils.getConfig(this.objectID),this._config)if(this._config.cover){this.type=this._config.type,this.slots=[];for(var o=m.default.getConfig(this.objectID),n=0;n<o.length;n++){var i=o[n],a=new O.default;a.isLock=Boolean(i.need_prop&&0<i.need_prop.length||i.cost_coin),a.index=i.index,this.slots.push(a)}}else cc.error("\u914d\u7f6e\u8868\u6ca1\u6709\u914d\u7f6e \u5360\u5730\u683c\u5b50",this.objectID);else cc.error("\u914d\u7f6e\u8868\u6ca1\u6709\u627e\u5230\u8be5ID",this.objectID);else cc.error("create object data error",t,e)}S.prototype.isBuilding=function(){return Number(this.type.main_type)==b.EnumObjectType.Building},S.prototype.isDecoration=function(){return Number(this.type.main_type)==b.EnumObjectType.Decoration},S.prototype.isSundries=function(){return Number(this.type.main_type)==b.EnumObjectType.sundries},S.prototype.isCollection=function(){return Number(this.type.main_type)==b.EnumObjectType.collection},S.prototype.loadData=function(){var t=I.gm.localData.getMapObjectData(this.getUID());if(t){t.parentUID&&this._setParentUID(t.parentUID);var e=v.ConfigUtils.CollectionsUtils.getConfig(this.objectID);if(e&&(this.hp=t.hp||e.collect_hp),t.slots)for(var o=0;o<t.slots.length;o++)this._updateSlotData(o,t.slots[o]);this.objectID!=b.SpecialObjectID.Chicken&&this.objectID!=b.SpecialObjectID.Pig&&this.objectID!=b.SpecialObjectID.Milk_Cow&&this.objectID!=b.SpecialObjectID.Ox||(t.breedData||(t.breedData={cur_energy:0,animals:[]}),this.breedData=w.default.create(t.breedData,this),p.default.getInstance().addData(this.breedData))}},S.prototype.getLocalData=function(){return I.gm.localData.getMapObjectData(this.getUID())},S.prototype._setParentUID=function(t){this._parentUID=t,this.posSys.parentUID=t},S.prototype.getParentUID=function(){return this._parentUID},S.prototype._updateSlotData=function(t,e){this.slots[t]&&(this.slots[t].isLock=e.isLock,this.slots[t].beginTime=e.beginTime,this.slots[t].produceID=e.produceID,this.slots[t].pickID=e.pickID,this.slots[t].endTime=e.endTime,this.slots[t].rate=e.rate,e.beginTime&&e.produceID&&this.slots[t].produceBegin(e.produceID,e.beginTime,e.endTime,e.pickID,e.rate))},S.prototype.isLock=function(){return!v.ConfigUtils.BuildingUnlockUtils.getUnlockConfig(this.objectID)||I.gm.localData.mapObjectDatas[this.getUID()]&&I.gm.localData.mapObjectDatas[this.getUID()].unlockAction?0:1},S.prototype.getUnlockLv=function(){var t=v.ConfigUtils.BuildingUnlockUtils.getUnlockConfig(this.objectID);return t?t.lv:0},S.prototype.setWorldGrid=function(t){this._worldGrid=cc.v2(t.x,t.y),this.posSys.worldGrid=this._worldGrid},S.prototype.getWorldGrid=function(){return this.posSys.worldGrid},S.prototype.getUID=function(){return this._uid},S.prototype.getInsideBlock=function(){for(var t=this.getTopPos(),e=[],o=0,n=P.default.getInstance().getInsideBlocks(this.objectID,"block");o<n.length;o++){var i=n[o].split("-");i=cc.v2(Number(i[0]),Number(i[1])).add(t),e.push(i)}return e},S.prototype.getConfig=function(){return this._config},S.prototype.getSeizePos=function(){for(var t=[],e=this.getNetGridSize().width,o=this.getNetGridSize().height,n=this._worldGrid.x;n>=this._worldGrid.x-e+1;n--)for(var i=this._worldGrid.y;i>=this._worldGrid.y-o+1;i--){var a=cc.v2(n,i);t.push(a)}return t},S.prototype.isGridInside=function(t){var e=this.getNetGridSize().width,o=this.getNetGridSize().height;return t.x>=this._worldGrid.x-e+1&&t.x<=this._worldGrid.x&&t.y>=this._worldGrid.y-o+1&&t.y<=this._worldGrid.y},S.prototype.getNetGridSize=function(){if(this.rotation){var t=this._config.cover.split("*"),e=Number(t[0]),o=Number(t[1]);return cc.size(o*I.gm.const.BigGridSize.width,e*I.gm.const.BigGridSize.height)}return t=this._config.cover.split("*"),e=Number(t[0]),o=Number(t[1]),cc.size(e*I.gm.const.BigGridSize.width,o*I.gm.const.BigGridSize.height)},S.prototype.getTopPos=function(){var t=this.getNetGridSize().width,e=this.getNetGridSize().height;return cc.v2(this._worldGrid.x+1-t,this._worldGrid.y+1-e)},S.prototype.getLeftPos=function(){var t=this.getNetGridSize().width;return this.getNetGridSize().height,cc.v2(this._worldGrid.x+1-t,this._worldGrid.y)},S.prototype.getLeftCenterPos=function(){var t=this.getNetGridSize().width,e=Math.floor(this.getNetGridSize().height/2);return cc.v2(this._worldGrid.x+1-t,this._worldGrid.y-e)},S.prototype.getRightPos=function(){this.getNetGridSize().width;var t=this.getNetGridSize().height;return cc.v2(this._worldGrid.x,this._worldGrid.y+1-t)},S.prototype.getCenterPos=function(){var t=Math.floor(this.getNetGridSize().width/2),e=Math.floor(this.getNetGridSize().height/2);return cc.v2(this._worldGrid.x-t,this._worldGrid.y-e)},S.prototype.getWidth=function(){return this.getNetGridSize().width},S.prototype.getHeight=function(){return this.getNetGridSize().height},S.prototype.getBoundingCocosPos=function(){return[c.default.tileToCocos(this.getWorldGrid(),I.gm.mapData.mapSize,I.gm.const.GridSize),c.default.tileToCocos(this.getTopPos(),I.gm.mapData.mapSize,I.gm.const.GridSize),c.default.tileToCocos(this.getLeftPos(),I.gm.mapData.mapSize,I.gm.const.GridSize),c.default.tileToCocos(this.getRightPos(),I.gm.mapData.mapSize,I.gm.const.GridSize)]},S.prototype.isInUnlockDistrict=function(){if(!I.gm.mainUI||!I.gm.mainUI.map_object_layer)return!1;for(var t=0,e=this.getBoundingCocosPos();t<e.length;t++){var o=e[t];if(o=I.gm.mainUI.map_object_layer.convertToWorldSpaceAR(o),h.default.getInstance().isInUnlockDistrict(o))return!0}return!1},S.prototype.isAllInUnlockDistrict=function(){if(!I.gm.mainUI||!I.gm.mainUI.map_object_layer)return!1;for(var t=0,e=this.getBoundingCocosPos();t<e.length;t++){var o=e[t];if(o=I.gm.mainUI.map_object_layer.convertToWorldSpaceAR(o),!h.default.getInstance().isInUnlockDistrict(o))return!1}return!0},S.prototype.getUnCrossGrid=function(){return this._config.can_cross?[]:this._config.can_go_in?this.getInsideBlock():this.getSeizePos()},S.prototype.getOutsideGrid=function(){for(var t=cc.v2(this._worldGrid.x+1,this._worldGrid.y+1),e=[],o=this.getNetGridSize().width+2,n=this.getNetGridSize().height+2,i=t.x;i>=t.x-o+1;i--)for(var a=t.y;a>=t.y-n+1;a--)(i>this._worldGrid.x||i<=this._worldGrid.x-this.getNetGridSize().width)&&e.push(cc.v2(i,a)),(a>this._worldGrid.y||a<=this._worldGrid.y-this.getNetGridSize().height)&&e.push(cc.v2(i,a));return e},S.prototype.getGridByBounding=function(t){for(var e=cc.v2(this._worldGrid.x+t,this._worldGrid.y+t),o=[],n=this.getNetGridSize().width+2*t,i=this.getNetGridSize().height+2*t,a=e.x;a>=e.x-n+1;a--)for(var r=e.y;r>=e.y-i+1;r--)o.push(cc.v2(a,r));return o},S.prototype.getCollectPos=function(){var t,e=f.default.getInstance().leftOrRight==b.EnumLeftOrRight.left?(t=f.default.getInstance().downOrTop==b.EnumDownOrUp.down?this._worldGrid.x:this._worldGrid.x+1,this._worldGrid.y-Math.floor(this.getNetGridSize().height/2)):(f.default.getInstance().downOrTop,b.EnumDownOrUp.down,t=this._worldGrid.x-Math.floor(this.getNetGridSize().width/2),this._worldGrid.y+1);return cc.v2(t,e)},S.prototype.isInSeize=function(t){for(var e=0,o=this.getSeizePos();e<o.length;e++){var n=o[e];if(n.x==t.x&&n.y==t.y)return!0}},S.prototype.haveSlot=function(){return!!(this.isBuilding()&&0<this.slots.length)},S.prototype.upgrade=function(){this.lv+=1,this.save(),a.default.emit(b.GameEvent.object_upgrade,this.objectID),_.default.getInstance().setDirty(!0),u.default.getInstance().order_cd_dirty=!0},S.prototype.save=function(){this.updateLocalData()},S.prototype.updateLocalData=function(){var t=I.gm.localData.mapObjectDatas[this.getUID()];if(t){if(t.parentUID=this.getParentUID(),t.x=this.posSys.localGrid.x,t.y=this.posSys.localGrid.y,t.rotation=this.rotation,t.hp=this.hp,t.lv=this.lv,this.breedData){t.breedData={cur_energy:this.breedData.cur_energy,animals:[]};for(var e=0;e<this.breedData.animals.length;e++)t.breedData.animals[e]={cur_energy:this.breedData.animals[e].cur_energy}}I.gm.localData.saveByKey("mapObjectDatas")}},S.toLocalObjectData=function(t){return{x:t.getLocalGrid().x,y:t.getLocalGrid().y,objectID:t.objectID,rotation:t.rotation,hp:t.hp,parentUID:t.getParentUID(),lv:t.lv}},S.prototype.getLocalGrid=function(){return this.posSys.localGrid},S.prototype.setRotation=function(){this.rotation=!this.rotation},S.prototype.getUnlockSlotCount=function(){for(var t=0,e=0,o=this.slots;e<o.length;e++)o[e].isLock||t++;return t},S.prototype.unlockSlot=function(t){cc.log("unlock "),this.slots[t].isLock=!1,this.setSlotData(),g.default.getInstance().addUnlockSlotRecord(this.objectID,1)},S.prototype.setSlotProduce=function(t,e,o){void 0===o&&(o=1),this.slots[t].produceID=e,this.slots[t].beginTime=r.default.getTime();var n=D.ProduceConfig.create(e,o).getPeriodTime()+this.slots[t].beginTime;this.slots[t].endTime=n,this.slots[t].rate=o,this.slots[t].produceBegin(e,this.slots[t].beginTime,n,this.slots[t].pickID,o),l.ReportData.instance.report_point(100003,e),this.setSlotData(),g.default.getInstance().addProudceRecord(e,1)},S.prototype.harvest=function(t){var e=[];if(C.default.checkWarehouseLimit(this.slots[t].getCurProduce().getHarvests())){e=this.slots[t].getCurProduce().harvest(),C.default.addProps(e,!1),this.slots[t].produceID=0,this.slots[t].beginTime=0,C.default.addProps(this.slots[t].getCurProduce().produceConfig.getMasteryProduce(),!1),this.setSlotData();for(var o=0,n=e;o<n.length;o++){var i=n[o];g.default.getInstance().addHarvestRecord(i.id,1),g.default.getInstance().addHarvestCountRecord(i.id,i.num)}}return e},S.prototype.completeNow=function(t){this.slots[t].completeNow(),this.setSlotData()},S.prototype.reduceEndTime=function(t,e){this.slots[t].reduceEndTime(e),this.setSlotData()},S.prototype.pick=function(t,e){var o=[],n=this.slots[t].getCurProduce().getCanPickProp(e);return C.default.checkWarehouseLimit(n)&&(o=this.slots[t].getCurProduce().pick(e),cc.log(o),C.default.addProps(o),this.slots[t].pickID=e,cc.log(this.slots[t].getCurProduce().canHarvest()),this.slots[t].getCurProduce().canHarvest()||(this.slots[t].produceID=0,this.slots[t].beginTime=0,this.slots[t].pickID=0,C.default.addProps(this.slots[t].getCurProduce().produceConfig.getMasteryProduce())),this.setSlotData()),o},S.prototype.getFirstEmptySlot=function(){for(var t=0,e=this.slots;t<e.length;t++){var o=e[t];if(!o.isLock&&!o.checkHasProduce())return o}},S.prototype.getFirstLockSlot=function(){for(var t=0,e=this.slots;t<e.length;t++){var o=e[t];if(o.isLock)return o}},S.prototype.setSlotData=function(){I.gm.localData.setSlotData(this.getUID(),this.slots)},S.prototype.getParentData=function(){return I.gm.mapData.getAllObjectDatas()[this.getParentUID()]},S.prototype.loadObject=function(t){var e=this;I.gm.mapData.mapObject[this.getUID()]?t&&t(I.gm.mapData.mapObject[this.getUID()]):(y.default.loadMapObjectPrefab(this.objectID,function(o){e.objectState=b.ObjectState.loaded,I.gm.mapData.addObject(o,e,function(e){t&&t(e)})}),this.objectState==b.ObjectState.none&&(this.objectState=b.ObjectState.loading))},S.prototype.calWorldGrid=function(){if(!this._parentUID)return null;var t=this.getParentData();return t?this.posSys.localGrid.add(t.getTopPos()):(cc.error("not found parent data",this._parentUID,this._uid),null)},S.prototype.updateParent=function(){var t=M.default.getDataByID(b.SpecialObjectID.bedroom),e=M.default.getDataByID(b.SpecialObjectID.mainHouse),o=M.default.getDataByID(b.SpecialObjectID.stall);e&&s.default.includes(e.getSeizePos(),[this.getWorldGrid()])?this._setParentUID(e.getUID()):t&&s.default.includes(t.getSeizePos(),[this.getWorldGrid()])?this._setParentUID(t.getUID()):o&&s.default.includes(o.getSeizePos(),[this.getWorldGrid()])?this._setParentUID(o.getUID()):this._setParentUID(""),this._updateLocalGrid()},S.prototype._updateLocalGrid=function(){if(!this._parentUID)return this.posSys.localGrid.x=this.posSys.worldGrid.x,void(this.posSys.localGrid.y=this.posSys.worldGrid.y);var t=this.getParentData();if(!t)return cc.error("not found parent data",this._parentUID,this._uid),null;t=this.posSys.worldGrid.sub(t.getTopPos()),this.posSys.localGrid.x=t.x,this.posSys.localGrid.y=t.y},S.prototype._addToMap=function(t){I.gm.mapData.getAllObjectDatas()[this.getUID()]&&cc.error("\u91cd\u590d\u6dfb\u52a0",this.getUID()),(I.gm.mapData.getAllObjectDatas()[this.getUID()]=this).posSys.localGrid=t,this._parentUID?this.setWorldGrid(this.calWorldGrid()):this.setWorldGrid(t),t=this.getUnCrossGrid(),I.gm.mapData.obstacleData.addMapObstacles(t)||cc.error(this.objectID)},S.prototype.getDistanceWithRole=function(){return s.default.getDistance(this.getWorldGrid(),f.default.getInstance().mainRole.getGrid())},S.prototype.isSlotWorking=function(){for(var t=0,e=this.slots;t<e.length;t++)if(e[t].isWorking())return!0;return!1},S.createByLocalData=function(t,e){if(t&&t.objectID)return(e=new S(t.objectID,e)).rotation=t.rotation,e.loadData(),e._addToMap(cc.v2(t.x,t.y)),e.getParentData()&&e.getParentData().objectID==b.SpecialObjectID.bedroom&&(e.updateParent(),e.updateLocalData()),e;cc.error(t)},S.createByID=function(t,e){return new S(t,e)},S.prototype.getCurEnergy=function(){return this.breedData?this.breedData.cur_energy:0},S.prototype.buyAnimal=function(t){this.breedData?(this.breedData.animals.push(t),g.default.getInstance().addBreedBuyRecord(this.objectID,1),d.DailyTaskData.getInstance().buy_animal++,d.DailyTaskData.getInstance().async_write_data(),a.default.emit(b.GameEvent.updateBase)):cc.error("not breed data")},S.prototype.getShelfDeskLinkPos=function(t){void 0===t&&(t=0),b.SpecialObjectID.stall_desk_1,b.SpecialObjectID.stall_desk_3,b.SpecialObjectID.stall_desk_5,b.SpecialObjectID.stall_desk_2,b.SpecialObjectID.stall_desk_4,b.SpecialObjectID.stall_desk_6;var e,o=0,n=this.objectID==b.SpecialObjectID.stall_desk_1?(o=(e=this.getRightPos()).x+1,e.y+ +t):this.objectID==b.SpecialObjectID.stall_desk_2?(o=(e=this.getTopPos()).x-1,e.y+ +t):(o=(e=this.getLeftPos()).x+1+ +t,e.y+1);return cc.v2(o,n)},S.prototype.getCashierLinkPos=function(t){void 0===t&&(t=0),t=(e=this.getCenterPos()).x+1+ +t;var e=e.y;return cc.v2(t,e)},S.prototype.getBBQCashBoxPos=function(t){void 0===t&&(t=1),t=(e=this.getWorldGrid()).x+1+ +t;var e=e.y;return cc.v2(t,e)},Object.defineProperty(S.prototype,"canUpgrade",{get:function(){return this._canUpgrade},set:function(t){this._canUpgrade=t,a.default.emit(b.GameEvent.decoration_can_upgrade,this._uid)},enumerable:!1,configurable:!0}),n=S,i.default=n,cc._RF.pop()},{}],MapObject:[function(t,e,o){"use strict";cc._RF.push(e,"aeb39m1hVNKb6jaCAF/L8an","MapObject");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonData"),d=i("CommonUtils"),h=i("ConfigUtils"),_=i("Const"),f=i("FlyIconCreator"),g=i("GameMgr"),y=i("IMapPosCtrl"),m=i("LvMgr"),v=i("MapDataHelper"),b=i("MapHelper"),I=i("ObjectHp"),D=i("PropMgr"),C=i("Utils"),O=i("ActionUtils"),w=i("EventManager"),M=i("AniUtils"),P=i("NodeUtils"),S=i("TimeUtils"),T=i("TMXUtils"),j=i("NetUtils"),k=i("GetAwardUI"),A=i("PlaceMgr"),R=i("CompletionHelper"),N=i("FoodOrderMgr"),E=i("DailyTaskData"),B=i("DecorationMgr"),U=i("GuideMgr"),G=i("HeartMgr"),x=i("HouseKeeperMgr"),L=i("MainRoleMgr"),F=i("ObjectMgrHelper"),H=i("ShelfNpcMgr"),V=i("TaskRecordData"),W=i("TruckOrderMgr"),q=i("MapObjectCommon"),z=i("RockingChair");function K(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_object=null,t.nod_preview_touch=null,t.map_grid=null,t.map_inside=null,t.nod_rotation=null,t.nod_finger=null,t.objectHp=null,t.nod_lock=null,t.nod_open_display=null,t.nod_unlock_ani=null,t.nod_inside=null,t.object_common=null,t.nod_boundingBox=null,t.nod_can_upgrade=null,t.nod_top=null,t.worldGrid=null,t.mode=_.MapObjectMode.normal,t.lockIndex=!1,t.onAni=!1,t._calGridShow=!1,t.show_grid_cd=0,t.prefab=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(K,l=y.default),Object.defineProperty(K.prototype,"calGridShow",{get:function(){return this._calGridShow},set:function(t){this._calGridShow=t},enumerable:!1,configurable:!0}),K.prototype.onLoad=function(){w.default.on(_.GameEvent.decoration_can_upgrade,this.receiveCanUpgrade,this),this.map_grid&&(this.map_grid.node.active=!1,this.map_grid.enableCulling(!1)),this.map_inside&&(this.map_inside.node.active=!1,this.map_inside.enableCulling(!1)),this.objectHp&&(this.objectHp.node.active=!1),this.object_common&&this.object_common.setObject(this),this.hideFinger(),this.updateUI(),this.initComponent()},K.prototype.onDestroy=function(){l.prototype.onDestroy.call(this),w.default.off(_.GameEvent.decoration_can_upgrade,this.receiveCanUpgrade,this)},K.prototype.onEnable=function(){},K.prototype.updateUI=function(){this.data?(this.nod_rotation&&(this.nod_rotation.scaleX=this.data.rotation?-1:1),this.data.isLock()?this.setLockView():this.setUnlockView(),this.showCanUpgrade(this.data.canUpgrade),this.updateChildren()):cc.error("not data ",this.data,this.objectID)},K.prototype.setMode=function(t){cc.log("mapobject id",this.objectID),this.getPreviewTouchNode().off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.getPreviewTouchNode().off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.getPreviewTouchNode().off(cc.Node.EventType.TOUCH_END,this.onPreviewTouchEnd,this),this.getPreviewTouchNode().off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.mode=t,this.updateView()},K.prototype.updateView=function(){this.mode==_.MapObjectMode.preview?(this.reqShowGrid(),this.getPreviewTouchNode().on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.getPreviewTouchNode().on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.getPreviewTouchNode().on(cc.Node.EventType.TOUCH_END,this.onPreviewTouchEnd,this),this.getPreviewTouchNode().on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.nod_object&&cc.tween(this.nod_object).repeatForever(cc.tween().by(1,{y:20}).by(1,{y:-20})).start()):(this.nod_object&&(this.nod_object.stopAllActions(),this.nod_object.y=0),this.hideGrid(),b.default.setMapMove())},K.prototype.onTouchStart=function(t){this.mode==_.MapObjectMode.preview&&(b.default.setMapNoMove(),this.startPos=this.node.convertToNodeSpaceAR(t.getLocation()))},K.prototype.onPreviewTouchEnd=function(t){t.stopPropagation(),cc.log("on touch facade"),b.default.setMapMove()},K.prototype.onTouchCancel=function(){b.default.setMapMove()},K.prototype.onTouchMove=function(t){var e;this.mode==_.MapObjectMode.preview&&(e=g.gm.mainUI.preview_layer.convertToNodeSpaceAR(t.getLocation()),t=this.startPos,(t=T.default.touchToTile(cc.v2(e.x-t.x,e.y-t.y),g.gm.mapData.mapSize,g.gm.const.GridSize))&&this.setGridPosAndShowGrid(t))},K.prototype.setPosByGrid=function(t){this.worldGrid=t,this.data.setWorldGrid(t),t=d.default.worldGridToObjectLayerPos(t),t=this.node.parent.convertToNodeSpaceAR(t),this.node.x=t.x,this.node.y=t.y-56+7},K.prototype.initMapPos=function(t){this.worldGrid=t.worldGrid,this.data.setWorldGrid(t.worldGrid),t=d.default.worldGridToObjectLayerPos(t.worldGrid),t=this.node.parent.convertToNodeSpaceAR(t),this.node.x=t.x,this.node.y=t.y-56+7},K.prototype.setGridPosAndShowGrid=function(t){this.setPosByGrid(t),this.reqShowGrid()},K.prototype.updateIndex=function(t){this.node.zIndex=t},K.prototype.onLongTouch=function(){this.mode,_.MapObjectMode.normal},K.prototype.onTouchObject=function(t){if(!this.data.isDie){if(h.BuildBuildingUtils.status==_.EnumBuildStatus.Prepare&&this.data.getConfig().can_move&&this.data.isBuilding()?(h.BuildBuildingUtils.setStatus(_.EnumBuildStatus.Moving),this.setMode(_.MapObjectMode.preview),this.updateIndex(99999),g.gm.mapData.liftObject(this.data),h.BuildBuildingUtils.showMovingUI()):B.default.status==_.EnumDecorateStatus.Prepare&&this.canDecorate()&&(cc.log("\u70b9\u51fb\u81ea\u5df1"),B.default.setStatus(_.EnumDecorateStatus.Moving),this.setMode(_.MapObjectMode.preview),this.updateIndex(99999),g.gm.mapData.liftObject(this.data),B.default.showMovingUI()),B.default.status==_.EnumDecorateStatus.Moving&&this.canDecorate()&&v.default.getLiftObject()&&v.default.getLiftObject().data.getUID()!=this.data.getUID()){cc.log("\u70b9\u51fb\u5176\u4ed6\u88c5\u9970\u7269");var e=v.default.getLiftObject();if(!A.default.getInstance().checkCanPut(e.data))return void g.gm.ui.showNotice("\u5f53\u524d\u4f4d\u7f6e\u4e0d\u80fd\u6446\u653e");e.setMode(_.MapObjectMode.normal),g.gm.mapData.place(e.data),this.setMode(_.MapObjectMode.preview),this.updateIndex(99999),g.gm.mapData.liftObject(this.data)}if(!A.default.getInstance().isBuildingMode()&&this.mode==_.MapObjectMode.normal){if(this.data.isLock())return this.data.isBuilding()?(this.objectID==_.SpecialObjectID.ToolRoom&&O.default.touchScaleTween(this.node),this.objectID==_.SpecialObjectID.warehouse&&O.default.touchScaleTween(this.node)):this.data.isDecoration()&&O.default.touchScaleTween(this.node),void this.onBtnUnlock();var o,n,i,a,r;this.data.isBuilding()?(this.objectID==_.SpecialObjectID.ToolRoom&&(O.default.touchScaleTween(this.node),g.gm.ui.showModule(g.gm.const.ToolRoomUI,function(t){t.setData()})),this.objectID==_.SpecialObjectID.warehouse&&(O.default.touchScaleTween(this.node),g.gm.ui.showModule(g.gm.const.Warehouse))):this.data.isDecoration()&&(O.default.touchScaleTween(this.node),d.default.onTouchDecoration(this)),e=g.gm.mapData.curTouchObject,(g.gm.mapData.curTouchObject=this).data.isBuilding()?this.data.isLock()||!this.data.getConfig().can_cross&&!this.data.getConfig().can_go_in?(r=this.data.getOutsideGrid(),(a=v.default.getFirstCanCross(r))&&L.default.getInstance().flyTo(a)):(o=t.getLocation(),n=g.gm.mainUI.tileMap_bg.node.convertToNodeSpaceAR(o),i=T.default.touchToTile(n,g.gm.mapData.mapSize,g.gm.const.GridSize),v.default.checkCanStand(i)?L.default.getInstance().roleMove(i):(r=this.data.getOutsideGrid(),(a=v.default.getFirstCanCross(r))&&L.default.getInstance().flyTo(a))):this.data.isDecoration()?(r=this.data.getOutsideGrid(),(a=v.default.getFirstCanCross(r))&&L.default.getInstance().flyTo(a)):this.data.isCollection()||this.data.isSundries()?e==g.gm.mapData.curTouchObject?L.default.getInstance().onMoveEnd():(L.default.getInstance().updateDirectionByTarget(cc.v2(this.node.x,this.node.y)),r=this.data.getCollectPos(),L.default.getInstance().flyTo(r)):this.data.getConfig().can_cross?(o=t.getLocation(),n=g.gm.mainUI.tileMap_bg.node.convertToNodeSpaceAR(o),i=T.default.touchToTile(n,g.gm.mapData.mapSize,g.gm.const.GridSize),v.default.checkCanStand(i)&&L.default.getInstance().roleMove(i)):(r=this.data.getOutsideGrid(),(a=v.default.getFirstCanCross(r))?L.default.getInstance().roleMove(a):cc.log("\u65e0\u53ef\u5230\u8fbe\u8def\u7ebf",this.worldGrid))}}},K.prototype.showGrid=function(){if(this.getBgMapGrid()){this.getBgMapGrid().node.active=!0;for(var t=this.getBgMapGrid().getLayer("grid"),e=0,o=this.data.getSeizePos();e<o.length;e++){var n=(r=o[e]).x-this.data.getTopPos().x,i=r.y-this.data.getTopPos().y,a=void 0,r=(a=this.data.rotation?t.getTiledTileAt(i,n,!0):t.getTiledTileAt(n,i,!0),!d.default.checkInMainDistrict(r.x,r.y)||(this.data.isBuilding()?v.default.checkMapSeize(r):g.gm.mapData.obstacleData.checkMapObstacles([r])));a.node.color=r?cc.Color.RED:cc.Color.GREEN}}},K.prototype.reqShowGrid=function(){this.calGridShow=!0},K.prototype.update=function(){this.calGridShow&&(this.show_grid_cd++,5<=this.show_grid_cd&&(this.show_grid_cd=0,this.showGrid(),this.calGridShow=!1))},K.prototype.hideGrid=function(){this.map_grid&&(this.map_grid.node.active=!1)},K.prototype.onBtnUnlock=function(){var t=this;cc.log(this.objectID),this.hideFinger(),U.default.getInstance().hideAllFinger();var e=h.ConfigUtils.BuildingUnlockUtils.getUnlockConfig(this.objectID);if(m.default.getInstance().getLv()<this.data.getUnlockLv())return cc.log(this.data.getUnlockLv()+"\u7ea7\u89e3\u9501"),void g.gm.ui.showNotice(this.data.getUnlockLv()+"\u7ea7\u89e3\u9501");if(e&&e.limit_mission_id&&!V.default.getInstance().doneTaskIDs.includes(e.limit_mission_id))g.gm.ui.showNotice("\u8bf7\u5148\u5b8c\u6210\u4efb\u52a1\uff1a"+g.gm.config.taskConfigs[e.limit_mission_id].name);else if(!e.completion||F.default.getInstance().checkCompletion(e.completion)){if(this.data.isDecoration()){var o=B.default.getConfig(this.objectID,1);if(o&&2==o.type){var n=R.default.getInstance().getObjectRange(this.data);if(n.object_id&&n.range&&!R.default.getInstance().checkCanUnlock(n.object_id,n.range))return}}g.gm.ui.showModule(g.gm.const.UnlockUI,function(o){var n=e.need;o.setNeedProp(n),o.setDesc(e.desc),o.setTitle(t.data.getConfig().name),t.data.getConfig().icon?o.setIconByStr(t.data.getConfig().icon):o.setIconByObjectID(t.objectID),o.callback=function(){V.default.getInstance().unlock(t.objectID),d.default.checkIsStallDesk(t.objectID)&&H.default.getInstance().setShelfNpcCD(t.objectID),g.gm.localData.unlockUID(t.data.getUID()),G.default.getInstance().onAdd(t.data);var o=t.data.getOutsideGrid();o=v.default.getFirstCanCross(o)||o[0],L.default.getInstance().updateDirectionByType(_.RoleDirection.right_up),L.default.getInstance().flyTo(o,function(){g.gm.ui.showTopBlock(),p.default.unlock(),L.default.getInstance().playAniByType(_.EnumRoleAniType.make,1,function(){g.gm.ui.showTopBlock(!1),L.default.getInstance().setStandByAni(),t.updateUI(),t.nod_unlock_ani?t.nod_unlock_ani.getChildByName("nod_ani").getComponent(cc.Animation).play():d.default.getPrefab(_.BundleName.MAIN_UI,"prefabs/buildings/building_unlock_ani",function(e){t.node&&(t.nod_unlock_ani=cc.instantiate(e),t.nod_unlock_ani.getChildByName("nod_ani").getComponent(cc.Animation).play(),t.nod_unlock_ani.parent=t.node,(e=t.node.getChildByName("nod_foot"))&&(t.nod_unlock_ani.y=e.y))}),e.disappear?(V.default.getInstance().addCleanObject(t.objectID,1),g.gm.mapData.resetCurTouchObject(),w.default.emit(_.GameEvent.updateBase),g.gm.mapData.removeMapObject(t.data.getUID())):t.objectID==_.SpecialObjectID.food_table?N.default.getInstance().checkNewOrder():t.objectID==_.SpecialObjectID.light_plate||t.objectID==_.SpecialObjectID.shelf_cash_box?(N.default.getInstance().checkNewOrder(),g.gm.ui.showModule(g.gm.const.OpenRestaurantUI),t.objectID==_.SpecialObjectID.light_plate?C.Utils.broadWorld(_.BroadTypeEnum.OpenStore,0,"\u9910\u5385"):t.objectID==_.SpecialObjectID.shelf_cash_box&&C.Utils.broadWorld(_.BroadTypeEnum.OpenStore,0,"\u8d27\u644a")):t.objectID==_.SpecialObjectID.stall||t.objectID==_.SpecialObjectID.wholesale?W.default.getInstance().tryCreateNewOrder():d.default.checkIsStallDesk(t.objectID)?j.ReportData.instance.report_point(100005,41000022):t.objectID==_.SpecialObjectID.bbq_desk&&j.ReportData.instance.report_point(100005,41000023),w.default.emit(_.GameEvent.update_slot_ui),x.default.getInstance().onObjectUnlock(t.objectID)})}),w.default.emit(_.GameEvent.object_unlock,t.objectID),[10003,10004,10005,10006,10025,10026,10027,10028].includes(t.objectID)&&(u.default.getInstance().landAwardCollectTime[t.objectID]=S.default.getTime())}})}else n=F.default.getInstance().getConfigByID(e.completion.id),g.gm.ui.showNotice(n.name+"\u529f\u80fd\u5b8c\u6210\u5ea6\u4e0d\u8db3"+e.completion.value+"%\uff0c\u8bf7\u5347\u7ea7"+n.name+"\u529f\u80fd\u7269\u4ef6")},K.prototype.showFinger=function(){var t,e=this;this.nod_finger?(t=this.nod_finger.getChildByName("finger"))?(t.active=!0,this.scheduleOnce(function(){t.active=!1},2)):this.nod_finger.active=!0:g.gm.ui.showModule(g.gm.const.FingerGuide,function(t){t.showFingerByObject(e)})},K.prototype.hideFinger=function(){var t;this.nod_finger&&((t=this.nod_finger.getChildByName("finger"))?t.active=!1:this.nod_finger.active=!1)},K.prototype.setLockView=function(){this.nod_lock?(this.nod_lock.active=!0,this.nod_open_display&&(this.nod_open_display.opacity=0)):this.nod_object&&P.default.setGrayByColor(this.nod_object)},K.prototype.setUnlockView=function(){this.nod_lock?(this.nod_lock.active=!1,this.nod_open_display&&(this.nod_open_display.opacity=255)):this.nod_object&&P.default.setGrayByColor(this.nod_object,!1)},K.prototype.showHP=function(t,e){this.objectHp&&(this.objectHp.node.active=!0,this.objectHp.setData(t,e))},K.prototype.hideHp=function(){this.objectHp&&(this.objectHp.node.active=!1)},K.prototype.shake=function(t){void 0===t&&(t=null),this.getComponent(cc.Animation)&&(M.default.playAni(this.getComponent(cc.Animation),"shake",t),(t=this.node.getChildByName("lizi"))&&M.default.playAni(t.getComponent(cc.Animation),"tree_y"))},K.prototype.onCollect=function(){var t=this;this.onAni=!0,this.data.isDie=!0,g.gm.mapData.resetCurTouchObject(),this.data.isCollection()?this.scheduleOnce(function(){t.onCollectAni()},.8):this.data.isSundries()&&(this.data.getConfig().tool_need?this.scheduleOnce(function(){t.onCollectAni()},1.2):this.scheduleOnce(function(){t.onCollectAni()},.8))},K.prototype.onCollectAni=function(){this.onAni=!1;var t=h.ConfigUtils.CollectionsUtils.getConfig(this.objectID);if(t){if(D.default.addProps(t.mastery_produce),D.default.addGainThing(t.need_prop,!1),t.windows)g.gm.ui.showModule(g.gm.const.GetAwardUI,function(e){e.setData(t.need_prop,k.GetAwardType.open),e.callback=function(){e.closeMe()}});else{var e=L.default.getInstance().mainRole.getComponent(f.default);(e=e||L.default.getInstance().mainRole.addComponent(f.default)).nod_from=this.node;for(var o=0,n=t.need_prop;o<n.length;o++){var i=n[o];i.id==_.CommonPropID.exp?d.default.flyIconToExp_2(i,e,i.num):d.default.flyIconToWarehouse_2(i,e,i.num)}}cc.isValid(this.node,!0)&&this.data.isCollection()&&(V.default.getInstance().addCollectionObject(this.objectID,1),E.DailyTaskData.getInstance().collect++,E.DailyTaskData.getInstance().async_write_data(),g.gm.mapData.removeMapObject(this.data.getUID()),w.default.emit(_.GameEvent.updateBase)),cc.isValid(this.node,!0)&&this.data.isSundries()&&(V.default.getInstance().addCleanObject(this.objectID,1),g.gm.mapData.removeMapObject(this.data.getUID()),w.default.emit(_.GameEvent.updateBase))}},K.prototype.getPosSys=function(){return this.data.posSys},K.prototype.getGridWidth=function(){return this.data.getNetGridSize().width},K.prototype.getGridHeight=function(){return this.data.getNetGridSize().height},K.prototype.canDecorate=function(){if(this.data.getConfig().can_move&&this.data.isDecoration()&&!this.data.isLock()){var t=this.getComponent(z.default);return!t||!t.isPlaying}return!1},K.prototype.initComponent=function(){},K.prototype._addCustomComp=function(t){this.getComponent(t)||this.addComponent(t)},K.prototype.updateChildren=function(){for(var t in g.gm.mapData.mapObject){var e=g.gm.mapData.mapObject[t];e&&e.node.isValid?e.data.getParentUID()==this.data.getUID()&&e.updateUI():cc.error(t)}},K.prototype.display=function(t){this.node.opacity=t?this.node.opacity||255:0},K.prototype.isDisplay=function(){return!!this.node&&!!this.node.opacity},K.prototype.getPreviewTouchNode=function(){return this.nod_preview_touch||(cc.warn("not found touch view"),this.getBgMapGrid()?this.getBgMapGrid().node:(cc.error("not found node"),this.node))},K.prototype.getUID=function(){return this.data.getUID()},K.prototype.getOjectName=function(){return this.data.getConfig().name},K.prototype.getBgMapGrid=function(){return this.map_grid},K.prototype.getBoundingBoxNode=function(){if(this.nod_boundingBox)return this.nod_boundingBox;var t=this.getComponentInChildren(cc.PolygonCollider);return t&&t.node?t.node:(cc.error("not found nod_boundingBox",this.data.objectID),this.node)},K.prototype.receiveCanUpgrade=function(t){this.data.getUID()==t&&this.showCanUpgrade(this.data.canUpgrade)},K.prototype.showCanUpgrade=function(t){var e=this;void 0===t&&(t=!0),this.nod_can_upgrade?this.nod_can_upgrade.active=t:d.default.getPrefab(_.BundleName.MAIN_UI,"prefabs/buildings/nod_can_upgrade",function(o){e.nod_can_upgrade||((o=cc.instantiate(o)).x=0,o.y=150,e.nod_can_upgrade=o,e.nod_can_upgrade.active=t,e.nod_can_upgrade.parent=e.node)})},K.prototype.getCenterPos=function(t){void 0===t&&(t=!1);var e,o=cc.v2(0,0),n=cc.v2(0,0),i=this.getBgMapGrid();return n=i?(e=P.default.getCenterPos(i.node),i.node.convertToWorldSpaceAR(e)):(e=this.data.getCenterPos(),d.default.worldGridToObjectLayerPos(e)),o=this.node.convertToNodeSpaceAR(n),t?n:o},K.prototype.getTopPos=function(t){void 0===t&&(t=!1);var e,o=cc.v2(0,0),n=(cc.v2(0,0),this.nod_top?this.nod_top.convertToWorldSpaceAR(cc.v2(0,0)):(e=this.data.getTopPos(),d.default.worldGridToObjectLayerPos(e)));return o=this.node.convertToNodeSpaceAR(n),t?n:o},s([a(cc.Node)],K.prototype,"nod_object",void 0),s([a(cc.Node)],K.prototype,"nod_preview_touch",void 0),s([a(cc.TiledMap)],K.prototype,"map_grid",void 0),s([a(cc.TiledMap)],K.prototype,"map_inside",void 0),s([a(cc.Node)],K.prototype,"nod_rotation",void 0),s([a(cc.Node)],K.prototype,"nod_finger",void 0),s([a(I.default)],K.prototype,"objectHp",void 0),s([a(cc.Node)],K.prototype,"nod_lock",void 0),s([a(cc.Node)],K.prototype,"nod_open_display",void 0),s([a(cc.Node)],K.prototype,"nod_unlock_ani",void 0),s([a({type:cc.Node,tooltip:"\u7269\u4ef6\u5185\u90e8\u8282\u70b9"})],K.prototype,"nod_inside",void 0),s([a(q.default)],K.prototype,"object_common",void 0),s([a(cc.Node)],K.prototype,"nod_boundingBox",void 0),s([a(cc.Node)],K.prototype,"nod_can_upgrade",void 0),s([a(cc.Node)],K.prototype,"nod_top",void 0),i=s([i],K),r.default=i,cc._RF.pop()},{}],MapSorter:[function(t,e,o){"use strict";cc._RF.push(e,"374f3RGjn1FHrOYfpLehRIF","MapSorter");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("BarbecueNpcMgr"),p=i("MainRole"),u=i("MainRoleMgr"),d=i("FoodFactory"),h=i("FootPos"),_=i("BusinessmanMgr"),f=i("NpcMgr"),g=i("StaffViewMgr"),y=i("TruckMgr"),m=i("Const"),v=i("GameMgr");function b(){var t=null!==c&&c.apply(this,arguments)||this;return t.sortMaxNodeCount=100,t.newMapPosMap={},t}r(b,c=s.default),b.prototype.sortPrepare=function(){var t,e=this;for(t in this.newMapPosMap={},v.gm.mapData.mapObject){var o=v.gm.mapData.mapObject[t];o.isDisplay()&&(o.data.isBuilding()&&o.data.type.sub_type==m.BuildingType.Landform?v.gm.mapData.mapObject[t].updateIndex(-1):o.data.getConfig().zindex?o.updateIndex(o.data.getConfig().zindex):this.divide(this.newMapPosMap,[v.gm.mapData.mapObject[t]]))}u.default.getInstance().mainRole&&this.divide(this.newMapPosMap,[u.default.getInstance().mainRole]),y.default.getInstance().truckView&&this.divide(this.newMapPosMap,[y.default.getInstance().truckView]);for(var n=0,i=f.default.getInstance().getAllNpcView();n<i.length;n++){var a=i[n];a.isShow&&this.divide(this.newMapPosMap,[a])}this.divide(this.newMapPosMap,_.BusinessmanMgr.getInstance().getVisibleView()),this.divide(this.newMapPosMap,g.StaffViewMgr.getInstance().getVisibleView()),this.divide(this.newMapPosMap,l.default.getInstance().getVisibleView()),setTimeout(function(){e.sort()},0)},b.prototype.sort=function(){var t,e=this;for(t in(new Date).getTime(),this.newMapPosMap)for(var o=this.newMapPosMap[t],n=0;n<o.length-1;n++)for(var i=n+1;i<o.length;i++){var a=o[n],r=o[i];a.getComponent(p.default)&&r.getComponent(d.default)||a.getComponent(d.default)&&r.getComponent(p.default)?0<r.getComponent(h.default).getFootPos().y-a.getComponent(h.default).getFootPos().y?a.setPointTo(r):r.setPointTo(a):a.getTop()>r.getBottom()&&a.getRight()<r.getLeft()||r.getTop()>a.getBottom()&&r.getRight()<a.getLeft()||(a.getTop()>r.getBottom()||!(a.getBottom()<r.getTop())&&(a.getLeft()>r.getRight()||!(r.getLeft()>a.getRight())&&0<r.getComponent(h.default).getFootPos().y-a.getComponent(h.default).getFootPos().y)?a.setPointTo(r):r.setPointTo(a))}setTimeout(function(){e.updateIndex()},0)},b.prototype.updateIndex=function(){function t(t){for(var e=0;e<t.length;e++)if(t[e].getInDegree()<=0)return t[e].breakPoint(),t.splice(e,1)[0]}for(var e in this.newMapPosMap){for(var o=[],n=this.newMapPosMap[e],i=t(n);i;)o.unshift(i),i=t(n);if(0<n.length)for(var a=0,r=n;a<r.length;a++){var c=r[a];cc.log(c.getUID(),c.getInDegree(),c.getOjectName(),c._parent_point)}for(var s=0;s<o.length;s++)o[s].lockIndex||o[s].updateIndex(s)}},b.prototype.divide=function(t,e){for(var o=0,n=e;o<n.length;o++){var i=n[o];i.node.zIndex=0,i.resetIndegree();var a=i.getPosSys().parentUID;a?(t[a]||(t[a]=[]),t[a].push(i)):(t.none||(t.none=[]),t.none.push(i))}},r=b,a.default=r,cc._RF.pop()},{}],MathUtils:[function(t,e,o){"use strict";cc._RF.push(e,"71b4cFS/HhHEpCNMgXVMPG6","MathUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("ObjectUtils");function r(){}r.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(String(Math.random()*t+1),10);case 2:return parseInt(String(Math.random()*(e-t+1)+t),10);default:return 0}},r.weightBingo=function(t,e){return t>=r.randomNum(1,e)},r.weight=function(t,e){void 0===e&&(e=1);for(var o=[],n=0,i=t;n<i.length;n++)(c=i[n]).weight&&o.push(c);if(0==o.length)return cc.error("arr.length == 0"),[];for(var a=[],r=0;r<e&&0<o.length;){for(var c,s=0,l=0,p=o;l<p.length;l++)s+=(c=p[l]).weight||1;for(var u=0;u<o.length;u++){if(this.weightBingo(o[u].weight||1,s)){a.push(o[u]),o.splice(u,1);break}s-=o[u].weight||1}r++}return 0==a.length&&cc.error("weight error",a),a},r.getAngle=function(t,e){var o=e.x-t.x;return t=e.y-t.y,-cc.v2(o,t).signAngle(cc.v2(1,0))/Math.PI*180},r.randomArr=function(t,e){t=a.default.copy(t);for(var o=[];0<e;){e--;var n=this.randomNum(0,t.length-1);n=t.splice(n,1),o.push.apply(o,n)}return o},r.average=function(t){var e=this.getTotal(t);return e?e/t.length:0},r.getTotal=function(t){for(var e=0,o=0,n=t;o<n.length;o++)e+=n[o];return e},n=r,i.default=n,cc._RF.pop()},{}],MenuContent:[function(t,e,o){"use strict";cc._RF.push(e,"2442d71ZdNLzLeCIWY/l3RP","MenuContent");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("ListItem"),h=i("MenuItem"),_=i("CookMgr"),f=i("StringUtil");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.lbl_research=null,t.lbl_exp=null,t.nod_content=null,t.nod_property=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=d.default),g.prototype.setData=function(t){var e=this;this.data=t,this.lbl_title.string=this.data.menuClassName;for(var o=0,n=this.nod_content.children;o<n.length;o++)n[o].active=!1;for(var i=this.data.menuDatas.length,a=this,r=0;r<i;r++)!function(t){var o;a.nod_content.children[t]?(a.nod_content.children[t].active=!0,a.nod_content.children[t].getComponent(h.default).setData(a.data.menuDatas[t])):(o=t,p.default.getPrefab(u.BundleName.MAIN_UI,"prefabs/cook/menu_item",function(t){t=cc.instantiate(t),e.nod_content.addChild(t),t.getComponent(h.default).setData(e.data.menuDatas[o])}))}(r);var c=_.default.getInstance().getAllLearnedFoodByType(this.data.type);t=c.count,this.nod_property.active=Boolean(t),t&&(this.lbl_research.string="\u5df2\u7814\u7a76\u83dc\u54c1\uff1a"+c.configs.length,this.lbl_exp.string="+"+f.default.numToPercentage(t))},s([a(cc.Label)],g.prototype,"lbl_title",void 0),s([a(cc.Label)],g.prototype,"lbl_research",void 0),s([a(cc.Label)],g.prototype,"lbl_exp",void 0),s([a(cc.Node)],g.prototype,"nod_content",void 0),s([a(cc.Node)],g.prototype,"nod_property",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],MenuDetailItem:[function(t,e,o){"use strict";cc._RF.push(e,"169aasT4nRNMIPWo5+eHCgQ","MenuDetailItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("ListItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_bg=null,t.spr_title=null,t.lbl_cook_value=null,t.lbl_like=null,t.nod_next=null,t.curLv=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.default),h.prototype.setData=function(t,e){this.curLv=e=void 0===e?1:e,this.data=t,this.updateUI()},h.prototype.updateUI=function(){u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/cook/menu_ui/ch-00"+this.data.lv,this.spr_title),this.lbl_cook_value.string="\u53a8\u827a\u503c:"+this.data.evaluate.num,this.lbl_like.string="+"+this.data.title_addition,this.nod_next.active=this.curLv+1==this.data.lv,this.nod_bg.color=this.curLv==this.data.lv?cc.color(255,242,158):cc.color(249,242,200)},s([a(cc.Node)],h.prototype,"nod_bg",void 0),s([a(cc.Sprite)],h.prototype,"spr_title",void 0),s([a(cc.Label)],h.prototype,"lbl_cook_value",void 0),s([a(cc.Label)],h.prototype,"lbl_like",void 0),s([a(cc.Node)],h.prototype,"nod_next",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],MenuDetail:[function(t,e,o){"use strict";cc._RF.push(e,"ff0de52/xJO55L7ovzG3MIn","MenuDetail");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("GameMgr"),d=i("List"),h=i("GameModule"),_=i("CookMgr"),f=i("MenuDetailItem");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.curLv=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.default),g.prototype.onEnable=function(){this.list.numItems=u.gm.config.data.CookTitle.length,this.curLv=_.default.getInstance().getCookTitleConfig().lv},g.prototype.onRender=function(t,e){t.getComponent(f.default).setData(u.gm.config.data.CookTitle[e],this.curLv)},g.prototype.onBtnClose=function(){p.default.click(),this.closeMe()},s([a(d.default)],g.prototype,"list",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],MenuGetNew:[function(t,e,o){"use strict";cc._RF.push(e,"0a5fcXU/Q9NJonZuDccr9Yn","MenuGetNew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("IconUtils"),_=i("GameModule"),f=i("AniUtils");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_title=null,t.lbl_desc=null,t.nod_touch=null,t.ani=null,t.nod_title=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=_.default),g.prototype.onEnable=function(){var t=this;this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),this.scheduleOnce(function(){t.onTouch()},3)},g.prototype.onDisable=function(){this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},g.prototype.setData=function(t){var e=this;this.items=t,f.default.playAni(this.ani,"menu_get_new_01",function(){f.default.playAni(e.ani,"menu_get_new_02")}),this.updateUI()},g.prototype.updateUI=function(){var t=this;this.nod_title.opacity=255;var e,o=this.items.shift();o&&3==o.file?(e=d.gm.config.menuConfig[o.id],this.lbl_title.string=e.menu_name,this.lbl_desc.string=e.menu_describe,h.IconUtils.setMenuIcon(o.id,this.spr_icon)):o&&o.file==u.ThingType.normal?(this.nod_title.opacity=0,e=p.PropUtils.getConfigByPropID(o.id),this.lbl_title.string=e.name,this.lbl_desc.string=e.desc,h.IconUtils.setPropSprite(o.id,this.spr_icon)):f.default.playAni(this.ani,"menu_get_new_03",function(){t.closeMe()})},g.prototype.onTouch=function(){this.updateUI()},s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),s([a(cc.Label)],g.prototype,"lbl_title",void 0),s([a(cc.Label)],g.prototype,"lbl_desc",void 0),s([a(cc.Node)],g.prototype,"nod_touch",void 0),s([a(cc.Animation)],g.prototype,"ani",void 0),s([a(cc.Node)],g.prototype,"nod_title",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],MenuItem:[function(t,e,o){"use strict";cc._RF.push(e,"eff54kE82NDEZyo9qz9G7Mj","MenuItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("ListItem"),d=i("GuideMgr"),h=i("Const"),_=i("NodStars"),f=i("PropMgr"),g=i("IconUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.spr_icon=null,t.nod_lock=null,t.nodStars=null,t.lbl_count=null,t.nod_bg_count=null,t.nod_no_study=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=u.default),y.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},y.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},y.prototype.start=function(){},y.prototype.setData=function(t){this.data=t,this.updateUI()},y.prototype.onTouchEnd=function(){var t=this;this.data.menuConfig.cook_food.id!=d.default.getInstance().touchConditionID&&(d.default.getInstance().touchConditionID=0),this.data.getState()==h.MenuState.learned?p.gm.ui.showModule(p.gm.const.CookUI,function(e){e.setData(t.data)}):this.data.getState()==h.MenuState.unlock?p.gm.ui.showModule(p.gm.const.CookStudy,function(e){e.setData(t.data)}):p.gm.ui.showNotice("\u83dc\u8c31\u672a\u89e3\u9501")},y.prototype.updateUI=function(){var t=this;this.data&&(this.nod_bg_count.active=!0,this.nod_no_study.active=!1,this.lbl_title.string=this.data.name,this.data.getState()==h.MenuState.lock?(this.nod_lock.active=!0,this.spr_icon.node.opacity=100,this.nod_bg_count.active=!1):(this.nod_lock.active=!1,this.spr_icon.node.opacity=255,this.data.getState()==h.MenuState.learned||(this.nod_bg_count.active=!1,this.nod_no_study.active=!0)),this.lbl_count.string="x"+f.default.getPropCount(p.gm.config.menuConfig[this.data.menuConfig.menu_id].cook_food.id),this.scheduleOnce(function(){g.IconUtils.setMenuIcon(t.data.menuConfig.menu_id,t.spr_icon)}),this.nodStars.setStar(this.data.getStarLv()),this.data.menuConfig.cook_food.id==d.default.getInstance().touchConditionID?this.scheduleOnce(function(){p.gm.ui.showModule(p.gm.const.FingerGuide,function(e){e.showFingerByNode(t.node)})},.6):d.default.getInstance().touchCondition.mission==h.ConditionType.main_house_menu_upgrade&&d.default.getInstance().touchCondition.id==this.data.menuConfig.menu_id&&this.scheduleOnce(function(){p.gm.ui.showModule(p.gm.const.FingerGuide,function(e){e.showFingerByNode(t.node)})},.6))},s([a(cc.Label)],y.prototype,"lbl_title",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(cc.Node)],y.prototype,"nod_lock",void 0),s([a(_.default)],y.prototype,"nodStars",void 0),s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(cc.Node)],y.prototype,"nod_bg_count",void 0),s([a(cc.Node)],y.prototype,"nod_no_study",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],MenuUI:[function(t,e,o){"use strict";cc._RF.push(e,"d0e72FZq6BADL7FYyAwcBnq","MenuUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("List"),h=i("GameModule"),_=i("MenuContent"),f=i("CookMgr"),g=i("GuideMgr"),y=i("EventManager"),m=i("GameMgr"),v=i("ConfigUtils"),b=i("PropMgr"),I=i("AudioUtils"),D=i("IconUtils"),C=i("CommonData"),O=i("ReplacementModel");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_value=null,t.lbl_title=null,t.pro=null,t.spr_title=null,t.sp_role=null,t.menuTypes=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(w,l=h.default),w.prototype.onEnable=function(){y.default.on(u.GameEvent.menu_update,this.updateUI,this),this.updateUI()},w.prototype.onDisable=function(){y.default.off(u.GameEvent.menu_update,this.updateUI,this),g.default.getInstance().touchConditionID=0,g.default.getInstance().resetTouchCondition()},w.prototype.updateUI=function(){var t=this;p.default.loadMainRoleSpine(this.sp_role,function(){O.default.createBySpine(t.sp_role,C.default.getInstance().dressing),t.sp_role.setAnimation(0,"standby",!0)}),this.menuTypes=f.default.getInstance().typeData,this.list.numItems=this.menuTypes.length;var e=f.default.getInstance().getCookTitleConfig();this.lbl_title.string=e.title_name,D.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"texture/cook/menu_ui/ch-00"+e.lv,this.spr_title);var o,n=b.default.getPropCount(u.CommonPropID.cook_value)-v.ConfigUtils.CookTitleUtils.getLastValue();if(e=e.evaluate.num-v.ConfigUtils.CookTitleUtils.getLastValue(),this.lbl_value.string=n+"/"+e,this.pro.progress=n/e,g.default.getInstance().touchCondition.mission==u.ConditionType.have_prop)if(o=f.default.getInstance().getTypeDataByFoodID(g.default.getInstance().touchCondition.id)){for(var i=0,a=0;a<this.menuTypes.length;a++)if(o.type==this.menuTypes[a].type){i=a;break}this.scheduleOnce(function(){t.list.scrollTo(i,0)},.5)}else this.list.scrollTo(0,0);else if(g.default.getInstance().touchCondition.mission==u.ConditionType.main_house_menu_upgrade){if(o=f.default.getInstance().getMenuData(g.default.getInstance().touchCondition.id)){var r=0;for(a=0;a<this.menuTypes.length;a++)if(o.menuConfig.menu_class==this.menuTypes[a].type){r=a;break}this.scheduleOnce(function(){t.list.scrollTo(r,0)},.5)}}else this.list.scrollTo(0,0)},w.prototype.onRenderList=function(t,e){t.getComponent(_.default).setData(this.menuTypes[e])},w.prototype.onBtnClose=function(){I.default.click(),m.gm.mainUI.visiable(!0),this.closeMe()},w.prototype.onBtnDetail=function(){I.default.click(),m.gm.ui.showModule(m.gm.const.MenuDetail)},s([a(d.default)],w.prototype,"list",void 0),s([a(cc.Label)],w.prototype,"lbl_value",void 0),s([a(cc.Label)],w.prototype,"lbl_title",void 0),s([a(cc.ProgressBar)],w.prototype,"pro",void 0),s([a(cc.Sprite)],w.prototype,"spr_title",void 0),s([a(sp.Skeleton)],w.prototype,"sp_role",void 0),i=s([i],w),r.default=i,cc._RF.pop()},{}],ModuleIconMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8467dPUSs9IvZodIds/8Ryz","ModuleIconMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("GameMgr"),l=i("LvMgr");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.module_icons=[],t}a(p,c=i("Singleton").default),p.prototype.checkHide=function(){for(var t=0,e=s.gm.config.data.ModuleOpen;t<e.length;t++)for(var o=e[t],n=0,i=this.module_icons;n<i.length;n++){var a=i[n];o.icon_limit&&o.module_name==a.module_name&&o.lv>l.default.getInstance().getLv()&&a.hide()}},p.prototype.checkShow=function(){for(var t=0,e=s.gm.config.data.ModuleOpen;t<e.length;t++)for(var o=e[t],n=0,i=this.module_icons;n<i.length;n++){var a=i[n];o.icon_limit&&o.module_name==a.module_name&&o.lv<=l.default.getInstance().getLv()&&a.show()}},a=p,r.default=a,cc._RF.pop()},{}],ModuleIcon:[function(t,e,o){"use strict";cc._RF.push(e,"7e264DvnVhBtq0hO7DzmAdF","ModuleIcon");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("RedDotMgr"),d=i("SpineUtils"),h=i("ModuleIconMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.module_name="",t.spine=null,t.nod_icon=null,t.isShow=!0,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.onLoad=function(){this.module_name&&h.default.getInstance().module_icons.push(this),this.spine&&(this.spine.node.active=!1)},_.prototype.hide=function(){this.node.active=!1,this.isShow=!1},_.prototype.show=function(){var t=this;this.isShow||(this.isShow=!0,this.node.active=!0,this.nod_icon.active=!1,this.spine&&(this.spine.node.active=!0,d.default.setListener(this.spine,function(e){"01"==e.animation.name?d.default.setAnimation(t.spine,"02"):"02"==e.animation.name?d.default.setAnimation(t.spine,"03"):"03"==e.animation.name&&(t.spine.node.active=!1,t.nod_icon.active=!0)}),d.default.setAnimation(this.spine,"01"),this.module_name==p.gm.const.HouseKeeperUI.key?u.default.getInstance().reCalculate("nod_keeper"):this.module_name==p.gm.const.DailyTaskUI.key&&u.default.getInstance().reCalculate("nod_daily_task")))},s([a(cc.String)],_.prototype,"module_name",void 0),s([a(sp.Skeleton)],_.prototype,"spine",void 0),s([a(cc.Node)],_.prototype,"nod_icon",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],MonsterBulet:[function(t,e,o){"use strict";cc._RF.push(e,"dbcb55b9vpAj5uJiHtKyY3c","MonsterBulet");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("GameMgr"),u=a("Utils"),d=a("EventManager"),h=a("StrengthMgr"),_=a("Chara"),f=a("FlyHp");function g(){var t=null!==s&&s.apply(this,arguments)||this;return t._attack=0,t}a=(n=cc._decorator).ccclass,n.property,c(g,s=_.default),g.prototype.onCollisionEnter=function(){var t=this;p.gm.pool.put(this.node),p.gm.localData.curHp<=0||(p.gm.pool.async_get(l.BundleName.MAIN_UI,"prefabs/explore/fly_hp",f.default,function(e){e.set_hp_node(0,0,t._attack);var o=t.pZone.getMainChara();o&&(o.node.addChild(e.node),h.default.getInstance().reduceHp(t._attack),p.gm.localData.curHp<=0&&(d.default.emit(l.GameEvent.die_random_fly),o.setIsDie(!0),o.set_attack_uid(0),o.setIsFightingRes(!1),o.setIsCollectingRes(!1),o.set_attacking_uid(0),o.delete_attack_me_uid(),p.gm.ui.showModule(p.gm.const.Relive)))}),p.gm.pool.put(this.node))},g.prototype.onEnable=function(){d.default.on("remove_bullet",this.remove_bullet,this)},g.prototype.remove_bullet=function(){p.gm.pool.put(this.node)},g.prototype.onDisable=function(){this.node.stopAllActions(),this.unscheduleAllCallbacks(),d.default.off("remove_bullet",this.remove_bullet,this)},g.prototype.onCollisionExit=function(){},g.prototype.setAttack=function(t){this._attack=t},g.prototype.bulletMove=function(t){var e=this;this.node.zIndex=10001;var o,n=this.pZone.getMainChara();null!=n?(n=(o=cc.v2(n.node.x,n.node.y+100)).sub(this.node.getPosition()),n=u.Utils.vec2ToDegrees(cc.v2(0,1),cc.v2(n)),u.Utils.distance(this.node,o),o=u.Utils.degreesToVectors(n),0==t?o=u.Utils.degreesToVectors(n):1==t?o=u.Utils.degreesToVectors(n-30):2==t&&(o=u.Utils.degreesToVectors(n+30)),o=(n=cc.v2(this.node.x-600*o.x,this.node.y+600*o.y)).sub(this.node.getPosition()),10903!=this.iCfgId&&(o=u.Utils.vec2ToDegrees(cc.v2(-.5,-.5),cc.v2(o)),this.node.angle=o),this.node.runAction(cc.moveTo(7.5,n)),this.scheduleOnce(function(){p.gm.pool.put(e.node)},7.5)):p.gm.pool.put(this.node)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],g),r.default=a,cc._RF.pop()},{}],MoveByLine:[function(t,e,o){"use strict";cc._RF.push(e,"c31771uXqRKYY52RYy50a/j","MoveByLine");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Vec2Utils"),p=a("CommonUtils"),u=a("GameMgr");function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.line=null,t._bMoveEnd=!0,t.cur_speed=100,t}a=(n=cc._decorator).ccclass,n.property,c(d,s=cc.Component),d.prototype.goNextPointByData=function(){var t;this.line?(t=this.line.getNextPoint())&&this.moveToPoint(t.gridPos):cc.error("no line data")},d.prototype.goLastPointByData=function(){var t;this.line?(t=this.line.prePoint())&&this.moveToPoint(t.gridPos):cc.error("no line data")},d.prototype.moveToPoint=function(t,e){var o,n,i,a=this;void 0===e&&(e=null),this._bMoveEnd&&(this._bMoveEnd=!1,o=p.default.worldGridToPos(t),n=this.node.parent.convertToNodeSpaceAR(u.gm.mainUI.map_object_layer.convertToWorldSpaceAR(o)),this._beforeMove(o,this.lastPos),i=l.default.getDistance(cc.v2(this.node.x,this.node.y),n)/this.cur_speed,cc.tween(this.node).to(i,{x:n.x,y:n.y}).call(function(){a._bMoveEnd=!0,a.lastPos=o,e?e(t):a._onMoveToPoint(t)}).start())},d.prototype.moveByLine=function(t,e,o,n){this.line=t,e&&(this.beforeMove=e),o&&(this.onMoveToPoint=o),n&&(this.onMoveLineEnd=n)},d.prototype._beforeMove=function(t,e){this.beforeMove(t.clone(),e.clone())},d.prototype.beforeMove=function(){cc.warn("\u8bf7\u8986\u76d6\u8be5\u51fd\u6570 beforeMove")},d.prototype.onMoveToPoint=function(){cc.warn("\u8bf7\u8986\u76d6\u8be5\u51fd\u6570 onMoveToPoint")},d.prototype.onMoveLineEnd=function(){},d.prototype._onMoveToPoint=function(t){t&&t instanceof cc.Vec2?this.onMoveToPoint(t.clone()):cc.error(t)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],d),r.default=a,cc._RF.pop()},{}],MyAStar:[function(t,e,o){"use strict";cc._RF.push(e,"6359bFfV55OSJzQH9+eMAXV","MyAStar");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("AStar"),r=(s.prototype.put=function(t,e){t.priority=e,this.arr.push(t),this.arr.sort(function(t,e){return e.priority-t.priority})},s.prototype.get=function(){return this.arr.pop()},Object.defineProperty(s.prototype,"size",{get:function(){return this.arr.length},enumerable:!1,configurable:!0}),s);function c(){this.mSize=null,this.mStart=null,this.mEnd=null,this.mStartNode=null,this.mEndNode=null,this.obstacles={},this.nodePool={},this.frontier=null,this.cameForm=new Map,this.costSoFar=new Map}function s(){this.arr=[]}c.prototype.init=function(t,e,o,n){var i=this;void 0===n&&(n=[]),this.mSize=t,this.mStart=e,this.mEnd=o,n.forEach(function(t){i.setObstacles(t.x,t.y)}),this.nodePool={},this.mStartNode=this.createNode(this.mStart.x,this.mStart.y),this.mEndNode=this.createNode(this.mEnd.x,this.mEnd.y)},c.prototype.clean=function(){this.mStartNode=null,this.mEndNode=null},c.prototype.setObstacles=function(t,e){this.checkNode(t,e)&&(this.obstacles[t+"_"+e]=!0)},c.prototype.initObstacles=function(t){this.obstacles=t},c.prototype.clearObstacles=function(t,e){delete this.obstacles[t+"_"+e]},c.prototype.clearAllObstacles=function(){this.obstacles={}},c.prototype.checkObstacles=function(t,e){return this.obstacles[t+"_"+e]},c.prototype.checkNode=function(t,e){var o=Math.round(this.mSize.x),n=Math.round(this.mSize.y);return o=t>=this.mStart.x-o&&t<=this.mStart.x+o,n=e>=this.mStart.y-n&&e<=this.mStart.y+n,0<=t&&0<=e&&o&&n},c.prototype.run=function(){var t=this.mStartNode,e=this.mEndNode;for(this.frontier=new r,this.frontier.put(t,0),this.cameForm.set(t,null),this.costSoFar.set(t,0);0<this.frontier.size;){var o=this.frontier.get();if(o===e)break;for(var n=0,i=this.getNeighbors(o);n<i.length;n++){var a,c=i[n],s=this.costSoFar.get(o)+this.getCost(o,c);(!this.costSoFar.has(c)||s<this.costSoFar.get(c))&&(this.costSoFar.set(c,s),a=this.getCost(c,e),this.frontier.put(c,s+a),this.cameForm.set(c,o))}}},c.prototype.getPath=function(){var t=[],e=this.mEndNode;for(t.push(e);this.cameForm.has(e);)(e=this.cameForm.get(e))&&t.push(e);return t},c.prototype.getNeighbors=function(t){var e=[],o=this.getNode(t.x,t.y+1);return o&&e.push(o),(o=this.getNode(t.x,t.y-1))&&e.push(o),(o=this.getNode(t.x-1,t.y))&&e.push(o),(o=this.getNode(t.x+1,t.y))&&e.push(o),(o=this.getNode(t.x-1,t.y+1))&&e.push(o),(o=this.getNode(t.x+1,t.y+1))&&e.push(o),(o=this.getNode(t.x-1,t.y-1))&&e.push(o),(t=this.getNode(t.x+1,t.y-1))&&e.push(t),e},c.prototype.getCost=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},c.prototype.next=function(){},c.prototype.getNode=function(t,e){if(this.checkNode(t,e)&&!this.checkObstacles(t,e)){var o=this.getNodeKey(t,e);return this.nodePool[o]||this.createNode(t,e)}},c.prototype.createNode=function(t,e){var o=this.getNodeKey(t,e);return this.nodePool[o]=new a.AStarNode(t,e),this.nodePool[o]},c.prototype.getNodeKey=function(t,e){return t+"_"+e},n=c,i.default=n,cc._RF.pop()},{}],MySafeArea:[function(t,e,o){"use strict";cc._RF.push(e,"c12b5P9zaVBlLD2bLLOC8aI","MySafeArea");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.start=function(){var t,e,o;cc.sys.isBrowser||(t=Math.min(cc.view.getCanvasSize().width/cc.winSize.width,cc.view.getCanvasSize().height/cc.winSize.height),e=cc.winSize.width*t,t=cc.winSize.height*t,e=cc.winSize.width*(cc.view.getCanvasSize().width/e),t=cc.winSize.height*(cc.view.getCanvasSize().height/t),console.log("width",e),console.log("height",t),e=cc.sys.getSafeAreaRect(),console.log("cc.winSize.height",cc.winSize.height),console.log("safeArea",e.y,e.height),cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS?(o=t-e.height+e.y,this.getComponent(cc.Widget).top=o,this.getComponent(cc.Widget).updateAlignment()):cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID&&(o=t-e.height,this.getComponent(cc.Widget).top=o,this.getComponent(cc.Widget).updateAlignment()),console.log("top",this.getComponent(cc.Widget).top))},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],MyScrollview:[function(t,e,o){"use strict";cc._RF.push(e,"7f02e3rfBdGna4ODwzBTgQN","MyScrollview");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.scrollSpeed=1,t}r(p,s=cc.ScrollView),c([l({type:cc.Float})],p.prototype,"scrollSpeed",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],MyToggle:[function(t,e,o){"use strict";cc._RF.push(e,"e4e9fA1Nc5FzKScZUAdToLE","MyToggle");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_bg=null,t._isHideBg=!0,t}r(p,s=cc.Toggle),Object.defineProperty(p.prototype,"isHideBg",{get:function(){return this._isHideBg},set:function(t){this._isHideBg=t},enumerable:!1,configurable:!0}),p.prototype.check=function(){var t=this;s.prototype.check.call(this);var e=this.toggleGroup||this._getToggleContainer();e&&e.toggleItems.forEach(function(e){t.isHideBg&&t.nod_bg&&(t.nod_bg.active=t!=e)})},p.prototype._getToggleContainer=function(){var t=this.node.parent;return t&&cc.isValid(t)?t.getComponent(cc.ToggleContainer):null},c([l(cc.Node)],p.prototype,"nod_bg",void 0),c([l()],p.prototype,"_isHideBg",void 0),c([l({type:cc.Boolean,tooltip:"\u9009\u4e2d\u65f6\u9690\u85cf\u80cc\u666f\u56fe\u7247"})],p.prototype,"isHideBg",null),i=c([i],p),a.default=i,cc._RF.pop()},{}],MyUIMgr:[function(t,e,o){"use strict";cc._RF.push(e,"249b9P5wpdHiI1/Hm64vQfg","MyUIMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("AssetMgr"),l=i("UIMgr"),p=i("MainBlock"),u=i("TaskRecordData"),d=i("ConfigProxy"),h=i("Const"),_=i("GameMgr"),f=i("LvMgr"),g=i("UILoading"),y=i("EventManager"),m=i("IconUtils"),v=i("PlaceMgr"),b=i("CommonUtils");function I(){return null!==c&&c.apply(this,arguments)||this}r(I,c=l.default),I.prototype.showNotice=function(t,e){this.showModule(_.gm.const.Notice,function(o){o.show_notice(t),e&&e()})},I.prototype.showHeart=function(t){this.showModule(_.gm.const.Notice,function(e){e.showHeartUpgrade(t)})},I.prototype.createPrefab=function(t,e){s.default.getInstance().getResAsyn(t.bundleName,t.loadPath,cc.Prefab,e)},I.prototype.showModule=function(t,e){var o=this;if(!v.default.getInstance().isBuildingMode()||[_.gm.const.DecorateUI.key,_.gm.const.DecorateMove.key,_.gm.const.DecoratePut.key,_.gm.const.Notice.key].includes(t.key))if(b.default.isInMainScene()||![_.gm.const.CookUI.key,_.gm.const.CookingUI.key,_.gm.const.CookStudy.key].includes(t.key)){if(d.default.getInstance().data&&d.default.getInstance().data.ModuleOpen)for(var n=this,i=0,a=d.default.getInstance().data.ModuleOpen;i<a.length;i++){var r=function(e){if(e.module_name==t.key)return f.default.getInstance().getLv()<e.lv?(n.showNotice(e.lv+"\u7ea7\u5f00\u653e"),{value:void 0}):e.unlock_need&&0<e.unlock_need.length&&!u.default.getInstance().unlock_module_id.includes(e.id)?(_.gm.ui.showModule(_.gm.const.UnlockUI,function(t){var o;t.setNeedProp(e.unlock_need),t.setTitle(e.title),t.setDesc(e.desc),o=m.IconUtils.getIconFullPathByName(e.icon),m.IconUtils.setSpriteFrame(h.BundleName.COMMON,o,t.spr_icon),t.callback=function(){u.default.getInstance().addUnlockModuleID(e.id),y.default.emit(h.GameEvent.unlock_module)}}),{value:void 0}):void 0}(a[i]);if("object"==typeof r)return r.value}t.not_show_loading||this.showUILoading(!0,0,"Loading ..."),c.prototype.showModule.call(this,t,e,function(){o.showUILoading(!1)})}else _.gm.ui.showNotice("\u8bf7\u56de\u5230\u5bb6\u64cd\u4f5c")},I.prototype.showTopBlock=function(t,e,o){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===o&&(o="");var n=cc.Canvas.instance.node.getChildByName("nod_block").getComponent(p.default);n.spr_bg.active=t,n.spr_bg.opacity=e,n.lbl_tip.string=o,cc.log("show main block",t)},I.prototype.showUILoading=function(t,e,o){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===o&&(o=""),(o=cc.Canvas.instance.node.getChildByName("ui_loading")).active=t,o.getComponent(g.default).show(t)},r=I,a.default=r,cc._RF.pop()},{}],NetUtils:[function(t,e,o){"use strict";cc._RF.push(e,"64620+Zpn5LZKVhhQ8AuuMz","NetUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.NetUtils=i.ReportData=void 0;var a=n("AppConfig"),r=n("SDKManager");function c(){this.PREFIX=a.default.AppName+"_",this.STORAGE_KEY="ReportData",this.only_once_point_map={},this.total_count_point_map={},this.read_data()}Object.defineProperty(c,"instance",{get:function(){return null==this._instance&&(this._instance=new c),this._instance},enumerable:!1,configurable:!0}),c.prototype.report_once_point=function(t){this.only_once_point_map[t]||(this.only_once_point_map[t]=!0,this.write_data(),s.report_point(t))},c.prototype.report_point=function(t,e){void 0===e&&(e=0),this.total_count_point_map={},s.report_point(t,e)},c.prototype.ui_report=function(t,e){s.ui_report(t,e)},c.prototype.write_data=function(t){t=JSON.stringify(this,t),cc.sys.localStorage.setItem(this.PREFIX+this.STORAGE_KEY,t)},c.prototype.read_data=function(){var t=cc.sys.localStorage.getItem(this.PREFIX+this.STORAGE_KEY);if(t){var e,o=null;try{o=JSON.parse(t)}catch(t){return void console.error("\u73a9\u5bb6\u6570\u636e\u53cd\u5e8f\u5217\u5316\u5931\u8d25")}for(e in o)if(null!=o[e])if(o[e]instanceof Array)for(this[e]=[];0<o[e].length;)this[e].push(o[e].shift());else this[e]=o[e]}},c.prototype.clear_data=function(){cc.sys.localStorage.removeItem(this.PREFIX+this.STORAGE_KEY)},c._instance=null,n=c,i.ReportData=n;var s=(l.http_request=function(t,e,o,n,i){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null);var a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(4==a.readyState&&200<=a.status&&a.status<400){var e=null;try{e=JSON.parse(a.responseText)}catch(t){e=a.responseText}console.log(e),null!=o&&o(e,a)}else 4==a.readyState&&(a.status<100||400<=a.status)&&null!=n&&n(a)},null!=i)for(var r in i)a[r]=i[r];console.log("request: "+t),a.open(e,t,!0),a.send()},l.generate_uuid=function(){return Date.now().toString(36)+"_"+Math.random().toString(36).substr(2)},Object.defineProperty(l,"game_uuid",{get:function(){return window.game_uuid||(window.game_uuid=cc.sys.localStorage.getItem(this.PREFIX+this.STORAGE_KEY),window.game_uuid||(window.game_uuid=this.generate_uuid(),cc.sys.localStorage.setItem(this.PREFIX+this.STORAGE_KEY,window.game_uuid))),window.game_uuid},enumerable:!1,configurable:!0}),Object.defineProperty(l,"channel_name",{get:function(){var t="unknown";return cc.sys.platform==cc.sys.WECHAT_GAME?null!=window.tt?t="tt-game":null!=window.qq?t="qq-game":null!=window.wx&&(t="wechat-game"):t=cc.sys.platform==cc.sys.BYTEDANCE_GAME?"tt-game":cc.sys.platform==cc.sys.HUAWEI_GAME?"hw-game":cc.sys.platform==cc.sys.VIVO_GAME?"vivo-game":cc.sys.platform==cc.sys.OPPO_GAME?"oppo-game":cc.sys.platform==cc.sys.IPHONE?"iphone-game":cc.sys.platform==cc.sys.IPAD?"ipad-game":cc.sys.isNative&&cc.sys.platform==cc.sys.ANDROID?"tap-tap-game":"unknown",t},enumerable:!1,configurable:!0}),Object.defineProperty(l,"game_app_name",{get:function(){var t=this.channel_name;if("tt-game"==t){if(window.tt&&window.tt.getSystemInfoSync)return window.tt.getSystemInfoSync().appName}else{if("qq-game"==t)return"qq";if("wechat-game"==t)return"wechat";if("oppo-game"==t)return"oppo-game";if("vivo-game"==t)return"vivo-game";if("hw-game"==t)return"hw-game";if("iphone-game"==t)return"ios-game";if("ipad-game"==t)return"ios-game";if("tap-tap-game"==t)return r.SDKManager.instance.getChannelAdSdkLoginType()}return"unknown"},enumerable:!1,configurable:!0}),l.report_point=function(t,e,o){void 0===e&&(e=1),void 0===o&&(o=0),this.is_cloud_test()?cc.log("\u5f53\u524d\u4e3a\u4e91\u6d4b\u8bd5\u73af\u5883\uff0c\u4e0d\u4e0a\u62a5\u57cb\u70b9"):(console.log("report_point="+t),e=cc.js.formatStr("https://gameapipy.6hwan.com/log/minigame_report/?gamename="+a.default.AppName+"_%s&uuid=%s&op_type=%s&val=%s",this.game_app_name,this.game_uuid,t.toString(),e.toString()))},l.ui_report=function(){},l.is_cloud_test=function(){return!1},l.HEAD="HEAD",l.GET="GET",l.POST="POST",l.user_uid="",l.user_token="",l.user_open_id="",l.PREFIX=a.default.AppName+"_",l.STORAGE_KEY="GameUUID",l);function l(){}i.NetUtils=s,cc._RF.pop()},{}],NewOpenFactoryUI:[function(t,e,o){"use strict";cc._RF.push(e,"420e7Eh/QxJWJGv3IhAfqNx","NewOpenFactoryUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("List"),f=i("EventManager"),g=i("GameModule"),y=i("StringUtil"),m=i("FactoryNeedItem"),v=i("FactoryProductionItem"),b=i("FeedSlot");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_need=null,t.list_produce=null,t.lbl_name=null,t.lbl_time=null,t.nod_slots=null,t.buildID=0,t.produceConfig=[],t.selectIndex=0,t.curProduction=[],t.uid="",t.mapObjectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=g.default),I.prototype.onEnable=function(){f.default.on(u.GameEvent.factory_ui_select,this.onSelect,this)},I.prototype.onDisable=function(){f.default.off(u.GameEvent.factory_ui_select,this.onSelect,this)},I.prototype.onSelect=function(t){this.selectIndex=t,this.updateUI()},I.prototype.setData=function(t){var e=this;if(this.uid=t,this.mapObjectData=d.gm.mapData.getObjectData(this.uid),this.buildID=this.mapObjectData.objectID,this.selectIndex=0,this.produceConfig=p.ProduceUtils.getConfigArrByBuildID(this.buildID),this.nod_slots.removeAllChildren(),0==this.nod_slots.children.length)for(var o=0;o<this.mapObjectData.slots.length;o++)!function(t){d.gm.ui.createPrefab(d.gm.const.FeedSlot,function(o){o=cc.instantiate(o),e.nod_slots.addChild(o),o.getComponent(b.default).setData(e.mapObjectData.slots[t],d.gm.mapData.getObjectData(e.uid))})}(o);this.updateUI()},I.prototype.updateUI=function(){this.curProduction=this.produceConfig[this.selectIndex].productions,this.list_produce.numItems=this.produceConfig.length,this.list_produce.scrollTo(0),this.list_need.numItems=this.produceConfig[this.selectIndex].need_prop.length,this.list_need.scrollTo(0),this.lbl_name.string=p.PropUtils.getConfigByPropID(this.curProduction[0].id).name,this.lbl_time.string=y.default.countDownFormat(this.produceConfig[this.selectIndex].time)},I.prototype.onRenderProduce=function(t,e){t.getComponent(v.default).setData(this.produceConfig[e],this.selectIndex)},I.prototype.onRenderNeedItem=function(t,e){t.getComponent(m.default).setData(this.produceConfig[this.selectIndex].need_prop[e])},I.prototype.onBtnProduce=function(){var t=this.mapObjectData.getFirstEmptySlot();if(t){if(h.default.tryConsume(this.produceConfig[this.selectIndex].need_prop,!0)){this.mapObjectData.setSlotProduce(t.index,this.produceConfig[this.selectIndex].produce_id);for(var e=0,o=this.nod_slots.children;e<o.length;e++){var n=o[e].getComponent(b.default);n&&n.updateUI()}}}else d.gm.ui.showNotice("\u6ca1\u6709\u7a7a\u4f59\u52a0\u5de5\u53f0")},s([a(_.default)],I.prototype,"list_need",void 0),s([a(_.default)],I.prototype,"list_produce",void 0),s([a(cc.Label)],I.prototype,"lbl_name",void 0),s([a(cc.Label)],I.prototype,"lbl_time",void 0),s([a(cc.Node)],I.prototype,"nod_slots",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],NodAttrItem:[function(t,e,o){"use strict";cc._RF.push(e,"a4d6ceKVtZAaIMuVB3vVsRD","NodAttrItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("ListItem"),d=i("EventManager"),h=i("AniUtils");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_cur=null,t.lbl_next=null,t.nod_next=null,t.ani=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=u.default),_.prototype.onEnable=function(){d.default.on(p.GameEvent.object_upgrade,this.playUpgradeAni,this)},_.prototype.onDisable=function(){d.default.off(p.GameEvent.object_upgrade,this.playUpgradeAni,this)},_.prototype.setData=function(t,e){void 0===e&&(e=""),this.lbl_cur.string=t,this.nod_next&&(this.nod_next.active=Boolean(e)),this.lbl_next&&(this.lbl_next.string=e)},_.prototype.playUpgradeAni=function(){this.ani&&h.default.playAni(this.ani,"eff_gran02")},s([a(cc.Label)],_.prototype,"lbl_cur",void 0),s([a(cc.Label)],_.prototype,"lbl_next",void 0),s([a(cc.Node)],_.prototype,"nod_next",void 0),s([a(cc.Animation)],_.prototype,"ani",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],NodBubble:[function(t,e,o){"use strict";cc._RF.push(e,"1ea50y9fHxFR7w29bZWNC/q","NodBubble");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("IconUtils");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_text_bg=null,t.nod_bubble_bg=null,t.lbl_dialog=null,t.spr_icon=null,t.nod_chating=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=cc.Component),u.prototype.setText=function(t,e,o,n){var i=this;void 0===e&&(e=!1),void 0===o&&(o=.5),void 0===n&&(n=null),this.hideAll(),this.nod_text_bg.active=!0,this.lbl_dialog.string=t,e&&this.scheduleOnce(function(){i.nod_text_bg.active=!1,n&&n()},o)},u.prototype.setIconByName=function(){this.hideAll(),this.nod_bubble_bg.active=!0},u.prototype.hideAll=function(){this.nod_text_bg.active=!1,this.nod_bubble_bg.active=!1,this.nod_chating.active=!1},u.prototype.showFaceByID=function(t,e,o){var n=this;void 0===e&&(e=.5),void 0===o&&(o=null),this.hideAll(),this.nod_bubble_bg.active=!0,p.IconUtils.setFaceIcon("bubble_icon_"+t,this.spr_icon),e&&this.scheduleOnce(function(){n.nod_bubble_bg.active=!1,o&&o()},e)},u.prototype.showChating=function(){this.hideAll(),this.nod_chating.active=!0},s([a(cc.Node)],u.prototype,"nod_text_bg",void 0),s([a(cc.Node)],u.prototype,"nod_bubble_bg",void 0),s([a(cc.Label)],u.prototype,"lbl_dialog",void 0),s([a(cc.Sprite)],u.prototype,"spr_icon",void 0),s([a(cc.Node)],u.prototype,"nod_chating",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],NodDailyTaskItem:[function(t,e,o){"use strict";cc._RF.push(e,"05ca3zOt6xHa6NtYjDxjzA+","NodDailyTaskItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("ListItem"),g=i("RedDotMgr"),y=i("NodeUtils"),m=i("HouseKeeperMgr"),v=i("DailyTaskData");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.lbl_desc=null,t.lbl_progress=null,t.nod_got=null,t.nod_get_award=null,t.lbl_btn_tip=null,t.nod_consume_content=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=f.default),b.prototype.setData=function(t){this.data=t,this.updateUI(),this.updateAwardUI()},b.prototype.updateUI=function(){this.lbl_title.string=this.data.config.task_name,this.lbl_desc.string=this.data.config.task_describe,-1==this.data.status?(this.nod_got.active=!0,this.nod_get_award.active=!1):(this.nod_got.active=!1,this.nod_get_award.active=!0,this.lbl_btn_tip.string="\u9886\u53d6",0==this.data.status?(this.lbl_btn_tip.string="\u672a\u5b8c\u6210",this.lbl_btn_tip.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(new cc.Color,"#676161"),y.default.setGray(this.nod_get_award,!0)):(this.lbl_btn_tip.getComponent(cc.LabelOutline).color=cc.Color.fromHEX(new cc.Color,"#CC6500"),y.default.setGray(this.nod_get_award,!1))),this.lbl_progress.string=this.data.getCurCount()+"/"+this.data.config.mission_condition.num},b.prototype.onBtnGetAward=function(){1==this.data.status&&(v.DailyTaskData.getInstance().setTaskAward(this.data.config.task_id),_.default.addProps(this.data.config.reward_prop,!1),h.gm.ui.get_module(h.gm.const.DailyTaskUI).updateUI(),g.default.getInstance().reCalculate("nod_daily_task"))},b.prototype.updateAwardUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=_.default.propItemToGainThing(this.data.config.reward_prop),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},b.prototype.goTo=function(){this.data.config.mission_condition.mission==d.ConditionType.plant?m.default.getInstance().onBtnVegetable():this.data.config.mission_condition.mission==d.ConditionType.buy_animal||this.data.config.mission_condition.mission==d.ConditionType.factory_food||this.data.config.mission_condition.mission==d.ConditionType.factory_other||(this.data.config.mission_condition.mission==d.ConditionType.cook?u.default.isInMainScene()?h.gm.ui.showModule(h.gm.const.MenuUI):u.default.tipToGohome():this.data.config.mission_condition.mission==d.ConditionType.truck_order||(this.data.config.mission_condition.mission==d.ConditionType.shop_buy||this.data.config.mission_condition.mission==d.ConditionType.shop_draw?h.gm.ui.showModule(h.gm.const.ShopMainUI):this.data.config.mission_condition.mission==d.ConditionType.collect||(this.data.config.mission_condition.mission==d.ConditionType.ad?h.gm.ui.showModule(h.gm.const.GetStrengthUI,function(t){t.setData(3)}):this.data.config.mission_condition.mission==d.ConditionType.share&&h.gm.ui.showModule(h.gm.const.ShareUI,function(t){t.setData()}))))},s([a(cc.Label)],b.prototype,"lbl_title",void 0),s([a(cc.Label)],b.prototype,"lbl_desc",void 0),s([a(cc.Label)],b.prototype,"lbl_progress",void 0),s([a(cc.Node)],b.prototype,"nod_got",void 0),s([a(cc.Node)],b.prototype,"nod_get_award",void 0),s([a(cc.Label)],b.prototype,"lbl_btn_tip",void 0),s([a(cc.Node)],b.prototype,"nod_consume_content",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],NodDailyTaskStage:[function(t,e,o){"use strict";cc._RF.push(e,"7ddf4SPXL9NrIQ0CdIVAeTi","NodDailyTaskStage");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("Const"),d=i("PropMgr"),h=i("ActionUtils"),_=i("IconUtils"),f=i("DailyTaskData");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_done=null,t.item=null,t.lbl_task_point=null,t.nod_box=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=cc.Component),g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){this.lbl_task_point.string=this.data.energ_need+"",this.item.canTouch=!1,this.item.setData(this.data.rewards),_.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"texture/daily_task/box_"+this.data.stage,this.nod_box.getComponent(cc.Sprite)),f.DailyTaskData.getInstance().gotStageItems.includes(this.data.stage)?(this.nod_done.active=!0,this.item.node.active=!1,this.nod_box.angle=0,this.nod_box.stopAllActions()):(this.nod_done.active=!1,this.item.node.active=!0,f.DailyTaskData.getInstance().taskPoint>=this.data.energ_need?h.default.shake(this.nod_box):(this.nod_box.angle=0,this.nod_box.stopAllActions()))},g.prototype.onBtnAward=function(){f.DailyTaskData.getInstance().gotStageItems.includes(this.data.stage)||f.DailyTaskData.getInstance().taskPoint>=this.data.energ_need&&(f.DailyTaskData.getInstance().setGotStage(this.data.stage),d.default.addProps([this.data.rewards],!1),this.updateUI())},s([a(cc.Node)],g.prototype,"nod_done",void 0),s([a(p.default)],g.prototype,"item",void 0),s([a(cc.Label)],g.prototype,"lbl_task_point",void 0),s([a(cc.Node)],g.prototype,"nod_box",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],NodDecorationCommon:[function(t,e,o){"use strict";cc._RF.push(e,"d34a81kr1hLkZYJVS/2F9ek","NodDecorationCommon");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonPropItem"),u=i("GameMgr"),d=i("NodStars"),h=i("PropMgr"),_=i("IconUtils"),f=i("List"),g=i("GameObject"),y=i("DecorationMgr"),m=i("NodAttrItem");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_heart=null,t.spr_icon=null,t.needItem=null,t.lbl_desc=null,t.lbl_name=null,t.stars=null,t.lbl_lv=null,t.list_attr=null,t.nod_right=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=g.GameObject),v.prototype.onBtnUpgrade=function(){this.nextData?h.default.tryConsume(this.curData.config.need,!0)&&(this.objectData.upgrade(),this.updateUI()):u.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},v.prototype.setData=function(t){this.uid=t,this.objectData=u.gm.mapData.getObjectData(this.uid),this.updateUI()},v.prototype.updateUI=function(){this.curData=y.default.getDataModel(this.objectData.objectID,this.objectData.lv),this.nextData=y.default.getDataModel(this.objectData.objectID,this.objectData.lv+1);var t=this.objectData.getConfig().name;this.lbl_name.string=t,this.lbl_desc.string=this.curData.config.desc,this.lbl_lv.string="Lv"+this.objectData.lv,this.stars.setStar(this.objectData.lv),this.curData.config.need&&this.curData.config.need[0]&&this.needItem.setData(this.curData.config.need[0]),_.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon),this.nod_right.active=Boolean(this.nextData),this.list_attr.numItems=1},v.prototype.onRenderAttr=function(t){var e=this.curData.getAttrName()+"\uff1a"+this.curData.getAttrStr(),o="";this.nextData&&(o=this.nextData.getAttrStr()),t.getComponent(m.default).setData(e,o)},s([a(cc.Label)],v.prototype,"lbl_heart",void 0),s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),s([a(p.default)],v.prototype,"needItem",void 0),s([a(cc.Label)],v.prototype,"lbl_desc",void 0),s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(d.default)],v.prototype,"stars",void 0),s([a(cc.Label)],v.prototype,"lbl_lv",void 0),s([a(f.default)],v.prototype,"list_attr",void 0),s([a(cc.Node)],v.prototype,"nod_right",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],NodDecoration:[function(t,e,o){"use strict";cc._RF.push(e,"1cf03C5CcFLTZVg5cvuiI1X","NodDecoration");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonPropItem"),u=i("GameMgr"),d=i("NodStars"),h=i("PropMgr"),_=i("IconUtils"),f=i("GameObject"),g=i("DecorationMgr");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_heart=null,t.spr_icon=null,t.needItem=null,t.lbl_curAttr=null,t.lbl_nextAttr=null,t.lbl_desc=null,t.lbl_name=null,t.lbl_upgrade_desc=null,t.stars=null,t.nod_next=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.GameObject),y.prototype.onBtnUpgrade=function(){g.default.getConfig(this.objectData.objectID,this.objectData.lv+1)?h.default.tryConsume(this.decorationConfig.need,!0)&&(this.objectData.upgrade(),this.updateUI()):u.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},y.prototype.setData=function(t){this.uid=t,this.objectData=u.gm.mapData.getObjectData(this.uid),this.updateUI()},y.prototype.updateUI=function(){var t=this.objectData.getConfig().name;this.lbl_name.string=t,this.lbl_desc.string=this.objectData.getConfig().desc||"",t=g.default.getDataModel(this.objectData.objectID,this.objectData.lv),this.decorationConfig=g.default.getConfig(this.objectData.objectID,this.objectData.lv),this.decorationConfig?(this.stars.setStar(this.objectData.lv),this.lbl_upgrade_desc.string=this.decorationConfig.desc||"",this.lbl_heart.string=this.decorationConfig.love_produce+"/\u5206\u949f",this.lbl_curAttr.string=t.getAttrStr(),this.decorationConfig.need&&this.decorationConfig.need[0]&&this.needItem.setData(this.decorationConfig.need[0])):cc.error("not found conifg",this.objectData),this.lbl_nextAttr.string="",t=g.default.getDataModel(this.objectData.objectID,this.objectData.lv+1),this.nod_next.active=Boolean(t),t&&(this.lbl_nextAttr.string=t.getAttrStr()),_.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon)},s([a(cc.Label)],y.prototype,"lbl_heart",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(p.default)],y.prototype,"needItem",void 0),s([a(cc.Label)],y.prototype,"lbl_curAttr",void 0),s([a(cc.Label)],y.prototype,"lbl_nextAttr",void 0),s([a(cc.Label)],y.prototype,"lbl_desc",void 0),s([a(cc.Label)],y.prototype,"lbl_name",void 0),s([a(cc.Label)],y.prototype,"lbl_upgrade_desc",void 0),s([a(d.default)],y.prototype,"stars",void 0),s([a(cc.Node)],y.prototype,"nod_next",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],NodDistrictLock:[function(t,e,o){"use strict";cc._RF.push(e,"02d2cPByMpJTZ2rJuRVayZa","NodDistrictLock");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_unlock=null,t.show=!1,t}r(p,s=cc.Component),p.prototype.onLoad=function(){var t=this.node.getChildByName("nod_lock");t&&(this.nod_unlock=t),this.nod_unlock?this.nod_unlock.active=!1:cc.error("not found nod_unlock")},p.prototype.onEnable=function(){this.updateUI()},p.prototype.setCanUnlock=function(){this.show=!0,this.updateUI()},p.prototype.updateUI=function(){this.show&&(this.nod_unlock?this.nod_unlock.active=!0:cc.error("not found nod_unlock"))},c([l(cc.Node)],p.prototype,"nod_unlock",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],NodFoodItem:[function(t,e,o){"use strict";cc._RF.push(e,"ac3eds8r0pKkZpdYzjoeG6z","NodFoodItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("JumpMgr"),f=i("PropMgr"),g=i("FoodOrderMgr"),y=i("FoodTargetItem"),m=i("IconUtils");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.nod_bubble=null,t.lbl_desc=null,t.nod_tip=null,t.nod_serve=null,t.nod_box=null,t.spr_tip=null,t.lbl_tip=null,t.targetPrefab=null,t.nod_content=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=cc.Component),v.prototype.onEnable=function(){this.nod_bubble.active=!1,this.nod_tip.active=!1,this.updateUI(),this.nod_bubble.on(cc.Node.EventType.TOUCH_END,this.onTouchBubble,this),this.nod_box.on(cc.Node.EventType.TOUCH_END,this.onTouchBox,this)},v.prototype.onDisable=function(){this.nod_bubble.off(cc.Node.EventType.TOUCH_END,this.onTouchBubble,this)},v.prototype.onTouchNode=function(){u.default.checkBuildMode()||(p.default.click(),this.nod_bubble.active=!this.nod_bubble.active,this.updateUI())},v.prototype.onTouchBubble=function(){},v.prototype.onTouchBox=function(){var t=this.data.getTableUID();h.gm.mapData.getObjectData(t).loadObject(function(t){_.default.getInstance().jumpToGrid(t.data.getCenterPos()),t.showFinger(),t=t.data.getParentData(),u.default.tryToOpenHouse(t)})},v.prototype.updateUI=function(){if(this.data){var t=this.data.getNpc()[0];m.IconUtils.setNpcHead(t,this.spr_icon);var e=this.data.getMergeItems();t=f.default.checkBagEnough(e),this.nod_serve.active=t&&this.data.state==g.FoodOrderState.not_done||this.data.state==g.FoodOrderState.eating_end,this.lbl_desc.node.active=!this.nod_serve.active,this.nod_content.active=this.data.state==g.FoodOrderState.not_done,this.nod_box.active=this.data.state==g.FoodOrderState.eating_end,this.lbl_tip.string="\u70b9\u51fb\u4e0a\u83dc",t="texture/cook/cooking/ling",this.data.state==g.FoodOrderState.eating_end&&(this.lbl_tip.string=" \u6536\u83b7\u793c\u5305",t="texture/cook/cooking/box"),m.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,t,this.spr_tip),(t=e.length)<=3?this.nod_bubble.height=165:t<=6&&(this.nod_bubble.height=265);for(var o=Math.max(this.nod_content.children.length,t),n=0;n<o;n++){var i,a=this.nod_content.children[n];e[n]?((i=a)||(i=cc.instantiate(this.targetPrefab),this.nod_content.addChild(i)),i.active=!0,i.getComponent(y.default).setData(this.data.getMergeItems()[n])):a&&(a.active=!1)}t=76*(t=Math.min(t,3))+(t-1)*this.nod_content.getComponent(cc.Layout).spacingX,this.nod_content.width=t}},v.prototype.onRender=function(t,e){t.getComponent(y.default).setData(this.data.getMergeItems()[e])},v.prototype.setData=function(t){this.data=t,this.updateUI()},v.prototype.onBtnServe=function(){if(u.default.isInMainScene())if(this.nod_bubble.active=!1,this.data.state==g.FoodOrderState.eating_end)this.onBtnBox();else{if(!h.gm.mapData.getObjectData(this.data.tableUID))return cc.error("cannot get empty table"),void h.gm.ui.showNotice("\u6ca1\u6709\u7a7a\u684c\u5b50");f.default.tryConsume(this.data.getMergeItems())&&g.default.getInstance().serve(this.data)}else h.gm.ui.showNotice("\u8bf7\u56de\u5230\u5bb6\u64cd\u4f5c")},v.prototype.onBtnBox=function(){var t;u.default.isInMainScene()?(t=this.data.getAward(),g.default.getInstance().setOrderAward(this.data),h.gm.ui.showModule(h.gm.const.FoodAwardUI,function(e){e.setData(t)})):h.gm.ui.showNotice("\u8bf7\u56de\u5230\u5bb6\u64cd\u4f5c")},s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),s([a(cc.Node)],v.prototype,"nod_bubble",void 0),s([a(cc.Label)],v.prototype,"lbl_desc",void 0),s([a(cc.Node)],v.prototype,"nod_tip",void 0),s([a(cc.Node)],v.prototype,"nod_serve",void 0),s([a(cc.Node)],v.prototype,"nod_box",void 0),s([a(cc.Sprite)],v.prototype,"spr_tip",void 0),s([a(cc.Label)],v.prototype,"lbl_tip",void 0),s([a(cc.Prefab)],v.prototype,"targetPrefab",void 0),s([a(cc.Node)],v.prototype,"nod_content",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],NodPropertyItem:[function(t,e,o){"use strict";cc._RF.push(e,"58489vBzrpK16m7sLonJ/ZJ","NodPropertyItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ListItem"),u=i("ConfigUtils"),d=i("IconUtils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_cur=null,t.lbl_next=null,t.nod_next=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=p.default),h.prototype.setData=function(t,e){d.IconUtils.setPropSprite(t.id,this.spr_icon),this.lbl_cur.string=u.PropUtils.getConfigByPropID(t.id).name+"\uff1a"+t.num,this.nod_next.active=!1,this.lbl_next.string="",e&&(this.nod_next.active=!0,this.lbl_next.string=""+e.num)},s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),s([a(cc.Label)],h.prototype,"lbl_cur",void 0),s([a(cc.Label)],h.prototype,"lbl_next",void 0),s([a(cc.Node)],h.prototype,"nod_next",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],NodRocker:[function(t,e,o){"use strict";cc._RF.push(e,"f96dcOlF5BF84Fc5pyrdS+x","NodRocker");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("DistrictMgr"),u=i("GameMgr"),d=i("JumpMgr");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.bg=null,t.joystick=null,t.parent=null,t.max_R=15,t.is_forbidden=!1,t.nod_left_up=null,t.nod_left_down=null,t.nod_right_up=null,t.nod_right_down=null,t.center_R=8,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=cc.Component),h.prototype.onLoad=function(){this.bg.on(cc.Node.EventType.TOUCH_MOVE,this.move,this),this.bg.on(cc.Node.EventType.TOUCH_END,this.finish,this),this.bg.on(cc.Node.EventType.TOUCH_CANCEL,this.finish,this)},h.prototype.update=function(){this.joystick.position.mag()<=this.center_R?this.show(0):0<this.joystick.x?0<this.joystick.y?this.show(2):this.show(4):0<this.joystick.y?this.show(1):this.show(3)},h.prototype.move=function(t){var e;0==this.is_forbidden&&(e=new cc.Vec2(t.getLocationX(),t.getLocationY()),(t=this.parent.convertToNodeSpaceAR(e)).mag()<this.max_R?(this.joystick.x=t.x,this.joystick.y=t.y):(t=(e=t.normalizeSelf()).x*this.max_R,e=e.y*this.max_R,this.joystick.x=t,this.joystick.y=e))},h.prototype.finish=function(){this.joystick.position.mag()<=this.center_R?(cc.log("center"),this.tryToJump(0)):0<this.joystick.x?0<this.joystick.y?(cc.log("right up"),this.tryToJump(2)):(cc.log("right down"),this.tryToJump(4)):0<this.joystick.y?(cc.log("left up"),this.tryToJump(1)):(cc.log("left down"),this.tryToJump(3)),this.joystick.position=cc.v3(0,0)},h.prototype.show=function(t){this.nod_left_down.active=!1,this.nod_left_up.active=!1,this.nod_right_down.active=!1,this.nod_right_up.active=!1,1==t?this.nod_left_up.active=!0:2==t?this.nod_right_up.active=!0:3==t?this.nod_left_down.active=!0:4==t&&(this.nod_right_down.active=!0)},h.prototype.jump=function(t,e){cc.log("jump",e),this.tryToJump(Number(e))},h.prototype.tryToJump=function(t){t?1==t?p.default.getInstance().district[4].isUnlock?d.default.getInstance().jumpToGrid(cc.v2(798,928)):u.gm.ui.showNotice("\u672a\u89e3\u9501"):2==t?p.default.getInstance().district[6].isUnlock?d.default.getInstance().jumpToGrid(cc.v2(764,692)):u.gm.ui.showNotice("\u672a\u89e3\u9501"):3==t?p.default.getInstance().district[5].isUnlock?d.default.getInstance().jumpToGrid(cc.v2(907,1064)):u.gm.ui.showNotice("\u672a\u89e3\u9501"):4==t&&(p.default.getInstance().district[7].isUnlock?d.default.getInstance().jumpToGrid(cc.v2(1194,953)):u.gm.ui.showNotice("\u672a\u89e3\u9501")):d.default.getInstance().jumpToGrid(cc.v2(991,963))},s([a(cc.Node)],h.prototype,"bg",void 0),s([a(cc.Node)],h.prototype,"joystick",void 0),s([a(cc.Node)],h.prototype,"parent",void 0),s([a],h.prototype,"max_R",void 0),s([a],h.prototype,"is_forbidden",void 0),s([a(cc.Node)],h.prototype,"nod_left_up",void 0),s([a(cc.Node)],h.prototype,"nod_left_down",void 0),s([a(cc.Node)],h.prototype,"nod_right_up",void 0),s([a(cc.Node)],h.prototype,"nod_right_down",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],NodStaff:[function(t,e,o){"use strict";cc._RF.push(e,"06887SkkxNG+YNYTUKGfEHo","NodStaff");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("ListItem"),h=i("Finger"),_=i("GuideMgr"),f=i("NpcMgr"),g=i("StaffData"),y=i("StaffHelper");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_tip=null,t.finger=null,t.spr_icon=null,t.staff=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=d.default),m.prototype.setData=function(t){this.staff=t,this.updateUI()},m.prototype.updateUI=function(){var t=this;this.staff=g.default.getInstance().getStaffByUID(y.default.getInstance().cur_touch_uid,this.listId+1),this.spine&&(this.spine.node.active=Boolean(this.staff)),this.spr_icon&&(this.spr_icon.node.active=Boolean(this.staff)),this.nod_tip.active=Boolean(!this.staff),this.staff&&(this.spine&&f.default.getInstance().loadSpineByNpcID(this.staff,function(e){t.spine.skeletonData=e,t.spine.setSkin("default"),t.spine.setAnimation(0,"standby",!0)}),this.spr_icon&&u.IconUtils.setSpriteFrame(p.BundleName.COMMON,"texture/npc_head_square/"+f.default.getInstance().getSquareHeadByNpcID(this.staff),this.spr_icon)),_.default.getInstance().touchCondition.mission!=p.ConditionType.appoint_staff||this.staff||this.finger&&this.finger.showFinger(!0,!0)},m.prototype.onTouch=function(){y.default.getInstance().cur_touch_slot_id=this.listId+1},s([a(sp.Skeleton)],m.prototype,"spine",void 0),s([a(cc.Node)],m.prototype,"nod_tip",void 0),s([a(h.default)],m.prototype,"finger",void 0),s([a(cc.Sprite)],m.prototype,"spr_icon",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],NodStars:[function(t,e,o){"use strict";cc._RF.push(e,"68ca2TEcXZJGK5l10j9F3r1","NodStars");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("IconUtils");function u(){var t=null!==s&&s.apply(this,arguments)||this;return t.starsCount=1,t.StarsName=["star-1","star-2","star-3","star-4","star-5"],t}a=(n=cc._decorator).ccclass,n.property,c(u,s=cc.Component),u.prototype.setStar=function(t){this.starsCount=this.node.childrenCount;for(var e=0;e<this.node.childrenCount;e++){var o=this.node.children[e].getComponent(cc.Sprite),n=Math.floor(t/this.starsCount);e<t%this.starsCount?p.IconUtils.setSpriteFrame(l.BundleName.COMMON,"texture/stars/"+this.StarsName[n],o):0<=n-1?p.IconUtils.setSpriteFrame(l.BundleName.COMMON,"texture/stars/"+this.StarsName[n-1],o):p.IconUtils.setSpriteFrame(l.BundleName.COMMON,"texture/stars/star-0",o)}},u.prototype.setStarByCommon=function(t){t=t%5||5;for(var e=0;e<this.node.childrenCount;e++)this.node.children[e].active=e<t},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],u),r.default=a,cc._RF.pop()},{}],NodTask:[function(t,e,o){"use strict";cc._RF.push(e,"ead06c27bJHqK8xwSlcCBdn","NodTask");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonUtils"),d=i("BuildInsideUnlockUtils"),h=i("ConfigUtils"),_=i("Const"),f=i("GameMgr"),g=i("IconUtils"),y=i("List"),m=i("EventManager"),v=i("GameObject"),b=i("BarbecueMenuHelper"),I=i("Finger"),D=i("NpcMgr"),C=i("TaskMessageItem"),O=i("TaskTargetItem");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.nod_bubble=null,t.lbl_desc=null,t.list=null,t.nod_tip=null,t.nod_content=null,t.nod_finger=null,t.task=null,t.taskTypeData=null,t.msgPrefab=null,t.targetPrefab=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(w,l=v.GameObject),w.prototype.start=function(){var t=this;u.default.getPrefab(_.BundleName.MAIN_UI,"prefabs/task/task_message_item",function(e){t.msgPrefab=e,t.task&&t.msgPrefab&&t.targetPrefab&&t.updateUI()}),u.default.getPrefab(_.BundleName.MAIN_UI,"prefabs/task/task_target_item",function(e){t.targetPrefab=e,t.task&&t.msgPrefab&&t.targetPrefab&&t.updateUI()})},w.prototype.onEnable=function(){this.nod_bubble.active=!1,this.nod_tip.active=!1,this.updateUI(),m.default.on(_.GameEvent.task_reach,this.updateTask,this)},w.prototype.onDisable=function(){m.default.off(_.GameEvent.task_reach,this.updateTask,this)},w.prototype.onTouchNode=function(){u.default.checkBuildMode()||(p.default.click(),this.nod_bubble.active=!this.nod_bubble.active,this.nod_bubble.active&&this.checkFinger(),1002==f.gm.mapData.guidingID&&f.gm.ui.get_module(f.gm.const.Guide_1002).onTouchNodTask(),cc.log("\u70b9\u51fb\u4efb\u52a1\uff1a",this.task.taskID),m.default.emit(_.GameEvent.touch_task,this.task.taskID))},w.prototype.updateTask=function(t){this.task.taskID==t&&this.updateUI()},w.prototype.updateUI=function(){var t=this;if(this.task&&this.msgPrefab&&this.targetPrefab&&(this.lbl_desc.string=this.task.config.name,this.nod_tip.active=this.task.isReach(),this.scheduleOnce(function(){t.taskTypeData.checkIsDone()}),!this.task.isReach())){this.task.config.icon&&(o=this.task.config.icon,n=g.IconUtils.getIconFullPathByName(o),this.spr_icon.spriteFrame=null,g.IconUtils.setSpriteFrame(_.BundleName.COMMON,n,this.spr_icon)),this.nod_content.removeAllChildren();var e=this.getMessage(),o=e.length+this.task.config.condition.length,n=76*(n=Math.min(o,3))+(n-1)*this.nod_content.getComponent(cc.Layout).spacingX;if(this.nod_content.width=n,o<=3?(this.nod_bubble.height=180,this.nod_content.y=-110):o<=6?(this.nod_bubble.height=283,this.nod_content.y=-161):(this.nod_bubble.height=380,this.nod_content.y=-213),0<e.length)for(var i=0;i<e.length;i++){var a=cc.instantiate(this.msgPrefab);this.nod_content.addChild(a),a.getComponent(C.default).setData(e[i])}for(i=0;i<this.task.config.condition.length;i++)a=cc.instantiate(this.targetPrefab),this.nod_content.addChild(a),a.getComponent(O.default).setTask(this.task,i);this.nod_bubble.active&&this.checkFinger()}},w.prototype.getMessage=function(){for(var t=[],e=0,o=this.task.config.condition;e<o.length;e++){var n,i,a=o[e];a.mission==_.ConditionType.unlock_map_object?(n=h.ConfigUtils.BuildingUnlockUtils.getUnlockConfig(a.id))&&(i=n.need,t.push.apply(t,i)):a.mission==_.ConditionType.unlock_district?(i=h.ConfigUtils.UnlockDistrictUtil.getConfigByID(a.id).cost_prop,t.push(i)):a.mission==_.ConditionType.produce_rate_unlock?(i=h.ProduceUtils.getConfigByProduceID(a.id).unlock_rate_consume,t.push.apply(t,i)):a.mission==_.ConditionType.unlockSlot?(i=d.default.getBuildInsideLockConfig(a.id,a.num-1).need_prop,t.push.apply(t,i)):a.mission==_.ConditionType.bbq_learn_menu&&(i=b.default.getInstance().getConfigByID(a.id).learn_cost,t.push.apply(t,i))}return t},w.prototype.checkFinger=function(){var t=this;this.scheduleOnce(function(){if(t.nod_content.children[0]&&t.task.config.finger_guide_force)for(var e=0;e<t.task.config.condition.length&&"break"!==function(e){if(t.task.itemReach[e]<t.task.config.condition[e].num)return t.nod_bubble.active&&f.gm.ui.showModule(f.gm.const.BlockGuide,function(o){f.gm.ui.showTopBlock(!1),o.setTargetNode(t.nod_content.children[t.getMessage().length+e]),o.setTouchCb(function(){var o=t.nod_content.children[t.getMessage().length+e].getComponent(C.default);(o=o||t.nod_content.children[t.getMessage().length+e].getComponent(O.default))&&o.onTouchItem(),f.gm.ui.closeModule(f.gm.const.BlockGuide)})}),"break"}(e);e++);else if(t.nod_content.children[0]&&t.task.config.finger_guide){for(e=0;e<t.task.config.condition.length;e++)if(t.task.itemReach[e]<t.task.config.condition[e].num){var o=t.nod_content.children[t.getMessage().length+e].convertToWorldSpaceAR(cc.v2(0,0));o=t.nod_bubble.convertToNodeSpaceAR(o),t.nod_finger.node.x=o.x,t.nod_finger.node.y=o.y,t.nod_finger.show();break}}else t.nod_finger.hide()},.2)},w.prototype.setData=function(t){this.taskTypeData=t,this.task=this.taskTypeData.getCurTask(),this.task.check()||((t=this.task.getCondition(_.ConditionType.NPC))&&D.default.getInstance().tryToGetView(t.id,function(t){t.bubble.showFaceByID(_.FaceType.tip,0)}),10074==this.task.taskID?D.default.getInstance().setTo(_.ENpcID.XiaoQiang,_.CreatePoint[_.ENpcID.XiaoQiang],function(){D.default.getInstance().updateDirection(_.ENpcID.XiaoQiang,_.RoleDirection.right_up)}):10033==this.task.taskID&&D.default.getInstance().setTo(_.ENpcID.Kuanggong,_.CreatePoint[_.ENpcID.Kuanggong],function(){D.default.getInstance().updateDirection(_.ENpcID.Kuanggong,_.RoleDirection.right_up)})),this.task&&this.msgPrefab&&this.targetPrefab&&this.updateUI()},s([a(cc.Sprite)],w.prototype,"spr_icon",void 0),s([a(cc.Node)],w.prototype,"nod_bubble",void 0),s([a(cc.Label)],w.prototype,"lbl_desc",void 0),s([a(y.default)],w.prototype,"list",void 0),s([a(cc.Node)],w.prototype,"nod_tip",void 0),s([a(cc.Node)],w.prototype,"nod_content",void 0),s([a(I.default)],w.prototype,"nod_finger",void 0),i=s([i],w),r.default=i,cc._RF.pop()},{}],NodTopBlock:[function(t,e,o){"use strict";cc._RF.push(e,"b95a6VT/eNBm41p1xrjA7H4","NodTopBlock");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameModule");function p(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.default),p.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.log("touche nod top block")})},p.prototype.onEnable=function(){this.node.opacity=0},p.prototype.setOpacity=function(t){this.node.opacity=t},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],NodePoolItem:[function(t,e,o){"use strict";cc._RF.push(e,"17ef7A5tMdAUIyGRCtF+7Dq","NodePoolItem");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.NodePoolItem=void 0;var c,s=i("GameObject"),l=(p=cc._decorator).ccclass,p=(i=p.menu,p.disallowMultiple);function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.__can_reuse=!0,t.is_can_use=!0,t.load_url="",t}r(u,c=s.GameObject),u.prototype.destroy=function(){var t=c.prototype.destroy.call(this);return this.__can_reuse?this.unuse():this.node&&this.node.isValid&&this.node.destroy(),t},u.prototype.reuse=function(){this.node.position=cc.Vec3.ZERO,this.node.scale=1,this.node.angle=0,this.node.opacity=255,this.node.zIndex=0,this.is_can_use=!0},u.prototype.unuse=function(){this.is_can_use=!1},p=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([l,i("\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7ec4\u4ef6/NodePoolItem"),p],u),a.NodePoolItem=p,cc._RF.pop()},{}],NodePoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"94e60ek+8pKGLGDBrc1yHA6","NodePoolManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.NodePoolManager=void 0;var a=n("NodePoolItem"),r=n("AssetMgr");function c(){this._pools={}}Object.defineProperty(c,"instance",{get:function(){return this._instance||(this._instance=new c),this._instance},enumerable:!1,configurable:!0}),c.prototype.init=function(t,e,o,n,i){var a=this;void 0===n&&(n=0),void 0===i&&(i=null);var r=this.get_key(t,e),c=this._pools[r];c||""==r?(cc.log("do not repeat init pool "+e),i&&i()):(c=new cc.NodePool(o),this._pools[r]=c,this.async_get_prefab(t,e,function(){for(var r=0;r<n;r++)c.put(a.get_instance_comp(t,e,o).node);i&&i()}))},c.prototype.is_init=function(t,e){return t=this.get_key(t,e),!(!this._pools[t]&&""!=e)},c.prototype.get_key=function(t,e){return t+"://"+e},c.prototype.async_get_prefab=function(t,e,o){r.default.getInstance().getResAsyn(t,e,cc.Prefab,function(t){o(t)})},c.prototype.get_instance_comp=function(t,e,o){var n=cc.assetManager.getBundle(t);if(n=n&&n.get(e,cc.Prefab)){if(n=cc.instantiate(n).getComponent(o))return n.load_url=e,n.bundle_name=t,n;cc.error("prefab not have "+o)}return cc.error("\u8c03\u7528\u524d\u8981\u4fdd\u8bc1\u8d44\u6e90\u5df2\u7ecf\u88ab\u52a0\u8f7d\u5b8c"),null},c.prototype.get=function(t,e,o){var n=this.get_key(t,e),i=this._pools[n];return i||(i=new cc.NodePool(o),this._pools[n]=i),0<i.size()?i.get().getComponent(o):this.get_instance_comp(t,e,o)},c.prototype.async_get=function(t,e,o,n){var i=this,a=this.get_key(t,e),r=this._pools[a];if(r||(r=new cc.NodePool(o),this._pools[a]=r),0<r.size())return r=r.get(),void n(r.getComponent(o));c.loadCount++,this.async_get_prefab(t,e,function(){n(i.get_instance_comp(t,e,o)),c.loadCount--})},c.prototype.put=function(t){var e;null!=t?(e=t.getComponent(a.NodePoolItem))&&(e=this.get_key(e.bundle_name,e.load_url),(e=this._pools[e])?e.put(t):cc.warn("pool not exist")):cc.warn("\u56de\u6536node\u4e3a\u7a7a")},c.prototype.put_children=function(t){for(var e=t.childrenCount-1;0<=e;e--)this.put(t.children[e])},c.prototype.size=function(t,e){if(e=this.get_key(t,e),e=this._pools[e])return e.size();cc.warn("pool not exist")},c.prototype.clear=function(t,e){e=this.get_key(t,e),(e=this._pools[e])?e.clear():cc.warn("pool not exist")},c._instance=null,c.loadCount=0,n=c,i.NodePoolManager=n,cc._RF.pop()},{}],NodeUtils:[function(t,e,o){"use strict";cc._RF.push(e,"dbf89+BrahKwJBle4ri1UYF","NodeUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.setGray=function(t,e){void 0===e&&(e=!0);var o=cc.Material.getBuiltinMaterial("2d-gray-sprite"),n=cc.Material.getBuiltinMaterial("2d-sprite"),i=t.getComponent(cc.Sprite);i&&(e?i.setMaterial(0,o):i.setMaterial(0,n));for(var a=0,r=t.children;a<r.length;a++){var c=r[a];this.setGray(c,e)}},i.setGrayByColor=function(t,e){void 0===e&&(e=!0);var o=[];this.getAllNodes(t,o);for(var n=0,i=o;n<i.length;n++){var a=i[n];(a.getComponent(cc.Sprite)||a.getComponent(sp.Skeleton))&&(a.color=e?cc.color(129,129,129):cc.color(255,255,255))}},i.setGroup=function(t,e){t.group=e;for(var o=0,n=t.children;o<n.length;o++){var i=n[o];this.setGroup(i,e)}},i.touch=function(t,e,o){void 0===o&&(o=!1),t.on(cc.Node.EventType.TOUCH_END,function(n){var i=t.convertToNodeSpaceAR(n.getLocation());t.getBoundingBox().contains(i)&&e(n),o&&n.stopPropagation()})},i.getMostSmallPoint=function(t){var e=-t.width*t.anchorX;return t=-t.height*t.anchorY,cc.v2(e,t)},i.getMostBigPoint=function(t){var e=t.width*(1-t.anchorX);return t=t.height*(1-t.anchorY),cc.v2(e,t)},i.getChilds=function(t,e){if(0==t.children.length)e.push(t);else for(var o=0,n=t.children;o<n.length;o++){var i=n[o];this.getChilds(i,e)}},i.getAllChilds=function(t,e){if(0<t.children.length)for(var o=0,n=t.children;o<n.length;o++){var i=n[o];e.push(i),this.getAllChilds(i,e)}},i.getAllNodes=function(t,e){if(e.push(t),0<t.children.length)for(var o=0,n=t.children;o<n.length;o++){var i=n[o];this.getAllNodes(i,e)}},i.screenShot=function(t){void 0===t&&(t=null);var e=cc.director.getScene().getComponentInChildren(cc.Camera),o=new cc.RenderTexture;o.initWithSize(cc.winSize.width,cc.winSize.height,cc.game._renderContext.STENCIL_INDEX8);var n,i,a=new cc.SpriteFrame;null==t?a.setTexture(o):(n=cc.winSize.width/2+t.x-t.width/2,i=cc.winSize.height/2+t.y-t.height/2,r=t.width,c=t.height,a.setTexture(o,new cc.Rect(n,i,r,c)));var r=new cc.Node,c=r.addComponent(cc.Sprite);return c.spriteFrame=a,c.node.scaleY=-Math.abs(c.node.scaleY),e.cullingMask=4294967295,e.targetTexture=o,e.render(),e.targetTexture=null,r},i.getCenterPos=function(t){var e=-t.width*t.anchorX+t.width/2;return t=-t.height*t.anchorY+t.height/2,cc.v2(e,t)},n.default=i,cc._RF.pop()},{}],NoticeItem:[function(t,e,o){"use strict";cc._RF.push(e,"0d1e87JzJpKMKu3Evo6ofR2","NoticeItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeItem=void 0;var l,p=i("NodePoolItem"),u=i("GameMgr");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.content_txt=null,t.nod_heart=null,t.lbl_heart=null,t.nod_arrow=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=p.NodePoolItem),Object.defineProperty(d.prototype,"data",{get:function(){return this._data},set:function(t){var e=this;this.nod_heart.active=!1,this._data=t,this.content_txt.string=t,this.scheduleOnce(function(){u.gm.pool.put(e.node)},1.3)},enumerable:!1,configurable:!0}),d.prototype.unuse=function(){l.prototype.unuse.call(this),this._data=void 0,this.content_txt.string=""},d.prototype.showHeart=function(t,e){var o=this;void 0===e&&(e=!0),this.content_txt.string="",this.nod_heart.active=!0,this.lbl_heart.string=t,this.nod_arrow.angle=e?0:180,this.scheduleOnce(function(){u.gm.pool.put(o.node)},1.3)},s([a(cc.RichText)],d.prototype,"content_txt",void 0),s([a(cc.Node)],d.prototype,"nod_heart",void 0),s([a(cc.Label)],d.prototype,"lbl_heart",void 0),s([a(cc.Node)],d.prototype,"nod_arrow",void 0),i=s([i],d),r.NoticeItem=i,cc._RF.pop()},{}],Notice:[function(t,e,o){"use strict";cc._RF.push(e,"8f8b7RxRSBAr4dirbeFPWdN","Notice");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0}),r.Notice=void 0;var l,p=i("GameModule"),u=i("Const"),d=i("GameMgr"),h=i("NoticeItem");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.notice_item_prefab=null,t.window_node=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=p.default),_.prototype.onLoad=function(){d.gm.pool.init(u.Contents.NoticeItem.bundleName,u.Contents.NoticeItem.loadPath,h.NoticeItem)},_.prototype.show_notice=function(t){var e=this;d.gm.pool.async_get(u.Contents.NoticeItem.bundleName,u.Contents.NoticeItem.loadPath,h.NoticeItem,function(o){e.window_node.addChild(o.node),o.data=t})},_.prototype.showHeartUpgrade=function(t){var e=this,o=t<0?t+"/\u5206\u949f":"+"+t+"/\u5206\u949f";d.gm.pool.async_get(u.Contents.NoticeItem.bundleName,u.Contents.NoticeItem.loadPath,h.NoticeItem,function(n){e.window_node.addChild(n.node),n.showHeart(o,0<t)})},s([a(cc.Prefab)],_.prototype,"notice_item_prefab",void 0),s([a(cc.Node)],_.prototype,"window_node",void 0),i=s([i],_),r.Notice=i,cc._RF.pop()},{}],NpcAni:[function(t,e,o){"use strict";cc._RF.push(e,"2e8f6gBBTtBUZwLkaRWxc5W","NpcAni");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_cloud=null,t.ani=null,t.leftOrRight=u.EnumLeftOrRight.left,t.downOrTop=u.EnumDownOrUp.down,t.spineScale=1,t.isBack=!1,t.actionCount=0,t.targetCount=0,t.doneCallback=null,t.curWalkType=u.EnumRoleAniType.walk,t.direction=u.RoleDirection.left_down,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=cc.Component),d.prototype.onLoad=function(){this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.showCloud(!1)},d.prototype.setWalkType=function(t){[u.EnumRoleAniType.walk_basket,u.EnumRoleAniType.walk,u.EnumRoleAniType.food_walk].includes(t)&&(this.curWalkType=t)},d.prototype.setAniWalk=function(t,e){e.x>t.x?(this.downOrTop=u.EnumDownOrUp.down,this.leftOrRight=u.EnumLeftOrRight.right,this.direction=u.RoleDirection.right_down,this._updateDirection(),this.playAniByType(this.curWalkType)):e.y>t.y?(this.downOrTop=u.EnumDownOrUp.down,this.leftOrRight=u.EnumLeftOrRight.left,this.direction=u.RoleDirection.left_down,this._updateDirection(),this.playAniByType(this.curWalkType)):e.x<t.x?(this.downOrTop=u.EnumDownOrUp.up,this.leftOrRight=u.EnumLeftOrRight.left,this.direction=u.RoleDirection.left_up,this._updateDirection(),this.playAniByType(this.curWalkType)):e.y<t.y&&(this.downOrTop=u.EnumDownOrUp.up,this.leftOrRight=u.EnumLeftOrRight.right,this.direction=u.RoleDirection.right_up,this._updateDirection(),this.playAniByType(this.curWalkType))},d.prototype.setAniWalkByPos=function(t,e){this.updateDirectionByPos(t,e),this.playAniByType(this.curWalkType)},d.prototype.updateDirectionByType=function(t){switch(this.direction=t){case Number(u.RoleDirection.left_up):this.leftOrRight=u.EnumLeftOrRight.left,this.downOrTop=u.EnumDownOrUp.up;break;case Number(u.RoleDirection.right_up):this.leftOrRight=u.EnumLeftOrRight.right,this.downOrTop=u.EnumDownOrUp.up;break;case Number(u.RoleDirection.right_down):this.leftOrRight=u.EnumLeftOrRight.right,this.downOrTop=u.EnumDownOrUp.down;break;case Number(u.RoleDirection.left_down):this.leftOrRight=u.EnumLeftOrRight.left,this.downOrTop=u.EnumDownOrUp.down}this._updateDirection()},d.prototype.playAniByType=function(t,e,o){void 0===o&&(o=null),this.targetCount=e=void 0===e?1:e,this.doneCallback=o,t=this._getAniName(t,this.isBack),this.spine.findAnimation(t)?this._setRoleAni(t):(cc.warn("not ani",t),o&&o())},d.prototype.playRockingChair=function(t){void 0===t&&(t=null),this.targetCount=9999,this.doneCallback=t,this._setRoleAni("rocking_chair2")},d.prototype.playBarbecue=function(t){void 0===t&&(t=null),this.targetCount=9999,this.doneCallback=t,this._setRoleAni("barbecue")},d.prototype.setStandByAni=function(t,e){void 0===t&&(t=u.EnumRoleAniType.standby),void 0===e&&(e=!1),t=this._getAniName(t,this.isBack),this._setRoleAni(t,e),this.spine.node.scaleX=.38*this.spineScale},d.prototype.updateDirectionByPos=function(t,e){t.x<=e.x?this.leftOrRight=u.EnumLeftOrRight.right:this.leftOrRight=u.EnumLeftOrRight.left,t.y<=e.y?this.downOrTop=u.EnumDownOrUp.up:this.downOrTop=u.EnumDownOrUp.down,this.direction=this.leftOrRight+this.downOrTop,this._updateDirection()},d.prototype._updateDirection=function(){this.downOrTop==u.EnumDownOrUp.up?this.isBack=!0:this.isBack=!1,this.leftOrRight==u.EnumLeftOrRight.left?this.spineScale=1:this.spineScale=-1,this.spine.node.scaleX=.38*this.spineScale},d.prototype._getAniName=function(t,e){var o=u.EnumRoleAniType[t];return(e=void 0!==e&&e)?u.EnumRoleAniType[t]+"_back":o},d.prototype._setRoleAni=function(t,e){void 0===e&&(e=!1),t==this.spine.animation&&!e||(this.actionCount=0,this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.spine.setAnimation(0,t,!0),this.spine.timeScale=1)},d.prototype.onSpineComplete=function(t){"standby"!=(t=t.animation.name||"")&&"standby_back"!=t&&"walk"!=t&&"walk_back"!=t&&""!=t&&(this.actionCount+=1,this.actionCount>=this.targetCount&&("make"==t&&(this.showCloud(!1),this.isBack=!1,this.setStandByAni(u.EnumRoleAniType.standby,!0),this.playAni(!1)),this.doneCallback&&this.doneCallback()))},d.prototype.getOpposite=function(){switch(this.direction){case Number(u.RoleDirection.left_up):return u.RoleDirection.right_down;case Number(u.RoleDirection.right_up):return u.RoleDirection.left_down;case Number(u.RoleDirection.right_down):return u.RoleDirection.left_up;case Number(u.RoleDirection.left_down):return u.RoleDirection.right_up}},d.prototype.playMake=function(t){void 0===t&&(t=null),this.nod_cloud&&this.ani&&(this.doneCallback=t,this.showCloud(),this.playAni(),this.targetCount=2,this._setRoleAni("make"),p.default.playMakeTool())},d.prototype.showCloud=function(t){void 0===t&&(t=!0),this.nod_cloud&&(this.nod_cloud.active=t)},d.prototype.playAni=function(t){void 0===t&&(t=!0),this.ani&&(t?this.ani.play():this.ani.stop())},s([a(sp.Skeleton)],d.prototype,"spine",void 0),s([a(cc.Node)],d.prototype,"nod_cloud",void 0),s([a(cc.Animation)],d.prototype,"ani",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],NpcData:[function(t,e,o){"use strict";cc._RF.push(e,"1078cle5fNODJY0lcSBYWWD","NpcData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("ConfigUtils"),r=n("FoodOrderMgr");function c(t){this.line=null,this.foodOrderData=null,this.npcID=t,this.config=a.NPCDataUtils.getConfigByID(t)}c.prototype.addLine=function(t){this.line=t},c.prototype.checkIsFoodOrder=function(){return!(!this.foodOrderData||this.foodOrderData.state==r.FoodOrderState.award)},c.prototype.getFoodData=function(){for(var t=0,e=Object.values(r.default.getInstance().getCurOrders());t<e.length;t++){var o=e[t];o.getFoods();for(var n=0,i=o.getNpc();n<i.length;n++)if(i[n]==this.npcID)return this.foodOrderData=o}},n=c,i.default=n,cc._RF.pop()},{}],NpcMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1b58ePpjU5M4qaCk0B5b9Gy","NpcMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.NpcCommandType=a.NpcCommand=void 0;var c,s=i("CommonUtils"),l=i("Const"),p=i("GameMgr"),u=i("Line"),d=i("MapHelper"),h=i("AssetMgr"),_=i("Singleton"),f=i("MathUtils"),g=i("Vec2Utils"),y=i("NpcAni"),m=i("NpcData"),v=i("NpcView");function b(){var t=null!==c&&c.apply(this,arguments)||this;return t._npcView={},t._npcData={},t}r(b,c=_.default),b.prototype.reset=function(){this._npcView={},this._npcData={}},b.prototype.getModelByNpcID=function(t){for(var e=0,o=p.gm.config.data.NPCData;e<o.length;e++){var n=o[e];if(n.npc_id==t&&n.npc_model)return"npc_"+n.npc_model}return"npc_"+t},b.prototype.getSquareHeadByNpcID=function(t){for(var e=0,o=p.gm.config.data.NPCData;e<o.length;e++){var n=o[e];if(n.npc_id==t&&n.npc_model)return"npc_head_square_"+n.npc_model}return"npc_head_square_"+t},b.prototype.getNpcViewByID=function(t){return this._npcView[t]||(cc.error("not found npc view",t,this._npcView),null)},b.prototype.tryToGetView=function(t,e){this._npcView[t]?e(this._npcView[t]):this.create(t,!1,e)},b.prototype.getAllNpcView=function(){return Object.values(this._npcView)},b.prototype.create=function(t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=null),this._npcView[t]?o&&o(this._npcView[t]):this._npcData[t]||(this._npcData[t]=new m.default(t),h.default.getInstance().getResAsyn(l.BundleName.MAIN_UI,"prefabs/npc/npc_plot",cc.Prefab,function(i){var a=cc.instantiate(i);a.active=!1,n._npcView[t]=a.getComponent(v.default);var r=n._npcView[t];r.data=n._npcData[t];var c=p.gm.localData.getNpcData(t);i=c.x&&c.y?cc.v2(c.x,c.y):l.CreatePoint[t]||l.CreatePoint[l.ENpcID.WangShen],a.parent=p.gm.mainUI.map_object_layer,a.getComponent(v.default).originalParent=p.gm.mainUI.map_object_layer,a.getComponent(v.default).setToTargetGridPos(i),Boolean(c.display)||e?n.show(t):n.hide(t),o&&o(r),n.loadSpineByNpcID(t,function(t){r.spine.skeletonData=t,r.spine.setSkin("default"),r.spine.setAnimation(0,"standby",!0)})}))},b.prototype.loadSpineByNpcID=function(t,e){t=b.getInstance().getModelByNpcID(t),h.default.getInstance().getResAsyn(l.BundleName.MAIN_UI,"spine/npc/"+t,sp.SkeletonData,function(t){e(t)})},b.prototype.show=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=null),this._npcView[t]?(this._npcView[t].show(e),o&&o(this._npcView[t])):this.create(t,e,o)},b.prototype.hide=function(t){this._npcView[t]&&this._npcView[t].show(!1)},b.prototype.moveTo=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=!0);var i=b.getInstance()._npcView[t];i&&(i.show(),i.moveTo(e,function(){var a=p.gm.localData.getNpcData(t);a.x=e.x,a.y=e.y,a.display=!0,n&&p.gm.localData.saveNpcData(),o&&o(i)}))},b.prototype.setTo=function(t,e,o){void 0===o&&(o=null),this.show(t,!0,function(n){n.originalParent!=n.node.parent&&n.reset(),n.show(),n.getComponent(y.default).setStandByAni();var i=p.gm.localData.getNpcData(t);i.x=e.x,i.y=e.y,n.setToTargetGridPos(e),p.gm.localData.saveNpcData(),o&&o(n)})},b.prototype.moveToPath=function(t,e,o,n){var i=this;void 0===o&&(o=null),void 0===n&&(n=!0);var a,r=this._npcView[t];r&&(r.originalParent!=r.node.parent&&r.reset(),(a=e.shift())?this.moveTo(t,a,function(){i.moveToPath(t,e,o)},n):o&&o(r))},b.prototype.foodRandomCommand=function(t){b.getInstance()._npcView[t]&&this.setTo(t,l.EatFoodPoint[t])},b.prototype.setFoodData=function(t,e){(t=b.getInstance()._npcView[t])&&t.updateFoodUIByData(e)},b.prototype.moveOnNewFoodOrder=function(t){var e=this;this.setTo(t,l.GuidePoint.YardDoor,function(){e.moveByLine(t,[l.GuidePoint.YarDoor_Inside,cc.v2(123,118)],function(){e._npcView[t].runCommand()})})},b.prototype.flyToEatPoint=function(t){this._npcView[t].commandList.push(new D(I.stop)),this.setTo(t,l.EatFoodPoint[t])},b.prototype.moveToEatPoint=function(t,e){var o=this;void 0===e&&(e=null),this.show(t,!0,function(n){n.unscheduleAllCallbacks(),n.commandList.push(new D(I.stop));var i=l.EatFoodPoint[t]||l.EatFoodPoint[l.ENpcID.WangShen];100<g.default.getDistance(n.getGrid(),i)&&n.setToGrid(cc.v2(123,115)),o.moveToPath(t,[l.EatFoodPoint[t]],e)})},b.prototype.moveOnEatingEnd=function(t){var e=this;this._npcView[t].foodBubble.show(!1),this.moveToPath(t,[cc.v2(123,113),cc.v2(123,117),cc.v2(l.GuidePoint.YardDoor.x+f.default.randomNum(-1,1),l.GuidePoint.YardDoor.y+f.default.randomNum(-1,1))],function(){e.hide(t)})},b.prototype.updateDirection=function(t,e){(t=b.getInstance()._npcView[t])&&(t.getComponent(y.default).updateDirectionByType(e),t.getComponent(y.default).setStandByAni())},b.prototype.isDialog=function(){var t=p.gm.ui.get_module(p.gm.const.DialogUI);return!(!t||!t.node.active)},b.prototype.moveByLine=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=!0);var i,a=u.default.createByGrids(e),r=b.getInstance()._npcView[t];r&&(i=r.getComponent(y.default),r.show(),r.moveByLine.lastPos=s.default.worldGridToPos(r.getGrid()),r.moveByLine.cur_speed=2*r.getNormalSpeed(),r.moveByLine.moveByLine(a,function(t,e){i.updateDirectionByPos(e,t),i.playAniByType(i.curWalkType),t=r.moveByLine.cur_speed/r.getNormalSpeed(),r.spine.timeScale=t},function(e){var o;r.setGrid(e),d.default.checkNodeIsInWindow(r.node)&&d.default.sortReq(),r.data?((o=p.gm.localData.getNpcData(t)).x=e.x,o.y=e.y,o.display=!0,n&&p.gm.localData.saveNpcData(),a.onMoveToNextPoint(),a.curIndex<a.getEndingIndex()?r.moveByLine.goNextPointByData():r.moveByLine.onMoveLineEnd()):cc.error("not found data")},function(){i.setStandByAni(),null==o||o(r)}),r.moveByLine.line.setCurIndex(-1),r.moveByLine.goNextPointByData())},r=b,a.default=r;var I,D=function(t){this.commonType=I.stand,this.commonType=t||f.default.randomNum(0,1),this.commonType==I.move&&(this.grid=s.default.createMainhouseFoodRandomGrid())};a.NpcCommand=D,(a=I=a.NpcCommandType||(a.NpcCommandType={}))[a.stand=0]="stand",a[a.move=1]="move",a[a.talk=2]="talk",a[a.stop=3]="stop",cc._RF.pop()},{}],NpcPath:[function(t,e,o){"use strict";cc._RF.push(e,"67359mdi3tHu4zjPV2H0Gr5","NpcPath");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("BrowserUtils");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_parent=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=cc.Component),u.prototype.start=function(){for(var t={},e=0,o=this.nod_parent.children;e<o.length;e++){for(var n=o[e],i=[],a=0,r=n.children;a<r.length;a++){var c={point_name:(c=r[a]).name,pos:cc.v2(c.x,c.y)};i.push(c)}t[n.name]=i}cc.log(t),p.default.creatJsonFile(t,"npc_path")},s([a(cc.Node)],u.prototype,"nod_parent",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],NpcPetMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b0b05e2R1pAfrMxQgU+ybg+","NpcPetMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonUtils"),l=i("Const"),p=i("GameMgr"),u=i("Line"),d=i("MapHelper"),h=i("AssetMgr"),_=i("Singleton"),f=i("MathUtils"),g=i("SpineUtils"),y=i("NpcAni"),m=i("NpcPetView");function v(){var t=null!==c&&c.apply(this,arguments)||this;return t.view={},t.data={},t}r(v,c=_.default),v.prototype.getVisibleView=function(){var t,e=[];for(t in this.view){var o=this.view[t];o&&o.node&&d.default.checkNodeIsInWindow(o.node)&&e.push(o)}return e},v.prototype.createNodeByID=function(t,e){var o,n=this;this.data[t]||(o=this.getConfigByID(t),(this.data[t]=o)&&h.default.getInstance().getResAsyn(l.BundleName.MAIN_UI,"prefabs/npc/npc_pet",cc.Prefab,function(i){var a=(i=cc.instantiate(i)).getComponent(m.default);a.data=o,i.parent=p.gm.mainUI.map_object_layer,i.active=!0,(n.view[t]=a).setGrid(n.getRandomGrid()),h.default.getInstance().getResAsyn(l.BundleName.MAIN_UI,"ani/pet/"+o.ani_name,sp.SkeletonData,function(o){a.spine.skeletonData=o,a.spine.setSkin("default"),a.spine.setAnimation(0,"standby",!0),n.randomMove(t),e&&e(a)})}))},v.prototype.getConfigByID=function(t){for(var e=0,o=p.gm.config.data.Pet;e<o.length;e++){var n=o[e];if(n.id==t)return n}},v.prototype.move=function(t,e,o){void 0===o&&(o=null);var n=u.default.createByGrids(e),i=this.view[t];i&&(i.moveByLine.lastPos=s.default.worldGridToPos(i.getGrid()),i.moveByLine.cur_speed=i.getNormalSpeed(),i.moveByLine.moveByLine(n,function(t,e){i.getComponent(y.default).updateDirectionByPos(e,t),i.getComponent(y.default).playAniByType(l.EnumRoleAniType.walk),t=i.moveByLine.cur_speed/i.getNormalSpeed(),i.spine.timeScale=t},function(t){i.setGrid(t),d.default.checkNodeIsInWindow(i.node)&&d.default.sortReq(),i.data?(n.onMoveToNextPoint(),n.curIndex<n.getEndingIndex()?i.moveByLine.goNextPointByData():i.moveByLine.onMoveLineEnd()):cc.error("not found data")},o),i.moveByLine.line.setCurIndex(-1),i.moveByLine.goNextPointByData())},v.prototype.getRandomGrid=function(){var t=f.default.randomArr(b,1)[0],e=new cc.Vec2;return Object.assign(e,t),e},v.prototype.randomMove=function(t){var e=this,o=[this.getRandomGrid()];this.move(t,o,function(){e.randomAni(t)})},v.prototype.randomAni=function(t){var e=this,o=this.view[t];o.getComponent(y.default).updateDirectionByType(l.RoleDirection.left_down),g.default.setListener(o.spine,function(){"walk"==o.spine.animation||"walk_back"==o.spine.animation||e.randomMove(t)}),g.default.setAnimation(o.spine,f.default.randomArr(I,1)[0],!1)},r=v,a.default=r;var b=[cc.v2(983,1148),cc.v2(983,1100),cc.v2(983,1037),cc.v2(993,1148),cc.v2(993,1100),cc.v2(993,1037)],I=["standby01","standby02","standby03","standby04","standby_buy","standby_buy02","standby_hungry","eat"];cc._RF.pop()},{}],NpcPetView:[function(t,e,o){"use strict";cc._RF.push(e,"8203dHRcGhPDI0fa8PPq/S/","NpcPetView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("IMapPosCtrl"),_=i("MapDataHelper"),f=i("MapHelper"),g=i("MoveByLine"),y=i("Vec2Utils"),m=i("Shopboard");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_foot=null,t.moveByLine=null,t.stepLen=60,t.stepTime=.6,t.moveToNextPointEnd=!0,t.moveEndCb=null,t.posSys=new u.MapPosSys,t._display=!1,t._show=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=h.default),v.prototype.setGrid=function(t){this.posSys.worldGrid=t,this.lastPos=p.default.worldGridToPos(t),this.updatePos(),this.node.stopAllActions(),f.default.checkNodeIsInWindow(this.node)&&f.default.update_scr_req()},v.prototype.updatePos=function(){var t,e=this;this.posSys.worldGrid&&((t=_.default.getDataByID(u.SpecialObjectID.stall))&&y.default.includes(t.getSeizePos(),[this.posSys.worldGrid])?t.loadObject(function(o){e.node.parent=o.getComponent(m.default).nod_inside,e.posSys.parentUID=t.getUID(),e._updateByParent()}):(this.node.parent=d.gm.mainUI.map_object_layer,this.posSys.parentUID="",this._updateByParent()))},v.prototype._updateByParent=function(){var t=p.default.worldGridToPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(d.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)),this.node.x=t.x,this.node.y=t.y},v.prototype.getGrid=function(){return this.posSys.worldGrid},v.prototype.getPosSys=function(){return this.posSys},v.prototype.updateIndex=function(t){this.node.zIndex=t},v.prototype.getGridWidth=function(){return 1},v.prototype.getGridHeight=function(){return 1},v.prototype._setRoleAni=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),t==this.spine.animation&&!o||this.spine.setAnimation(0,t,e)},v.prototype.getNormalSpeed=function(){return this.stepLen/this.stepTime},s([a(sp.Skeleton)],v.prototype,"spine",void 0),s([a(cc.Node)],v.prototype,"nod_foot",void 0),s([a(g.default)],v.prototype,"moveByLine",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],NpcView:[function(t,e,o){"use strict";cc._RF.push(e,"cdfd7xXn4VPdIHCr0TPHMpC","NpcView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("ConfigUtils"),d=i("Const"),h=i("FoodBubble"),_=i("GameMgr"),f=i("IMapPosCtrl"),g=i("MapDataHelper"),y=i("MapHelper"),m=i("MoveByLine"),v=i("NodBubble"),b=i("TMXUtils"),I=i("Vec2Utils"),D=i("FoodOrderMgr"),C=i("MainRoleMgr"),O=i("MainHouse"),w=i("Shopboard"),M=i("TaskMgr"),P=i("NpcAni"),S=i("NpcMgr");function T(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_touch=null,t.nod_foot=null,t.spine=null,t.bubble=null,t.move_end_cb=[],t.foodBubble=null,t.nod_finger=null,t.moveByLine=null,t.data=null,t.curPath=[],t.targetPos=null,t.targetGrid=null,t.moveEndCb=null,t.commandList=[],t.originalParent=null,t.isShow=!1,t.posSys=new d.MapPosSys,t.move_count_cd=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(T,l=f.default),T.prototype.onEnable=function(){this.hideFinger(),this.foodBubble.show(!1),this.getFoodData()},T.prototype.onDisable=function(){},T.prototype.moveTo=function(t,e){void 0===e&&(e=null),this.show(),this.moveEndCb=e,this.targetGrid=t,this.targetPos=b.default.tileToCocos(t,_.gm.mapData.mapSize,_.gm.const.GridSize),this.getGrid().equals(t)?this.onMoveEnd():this._moveStart(t)},T.prototype._moveStart=function(t){var e=this;this.getComponent(P.default).showCloud(!1),0==this.curPath.length?(cc.warn("npc getPath_3 ==============="),p.default.getPath_3(this.getGrid(),t,function(o){e.curPath=o,e.curPath.pop(),(o=e.curPath.pop())?e._move(cc.v2(o.x,o.y)):(cc.warn("move start ===no path",e.data.npcID,e.data.config.npc_name,t.x,t.y,e.getGrid().x,e.getGrid().y),e.setToTargetGridPos(t),e.onMoveEnd())})):(cc.warn("npc \u884c\u8d70\u4e2d"),this.setToTargetGridPos(t),this.onMoveEnd())},T.prototype._move=function(t){var e=this;this.getComponent(P.default).setAniWalk(this.getGrid(),t);var o=p.default.worldGridToPos(t),n=this.node.parent.convertToNodeSpaceAR(_.gm.mainUI.map_object_layer.convertToWorldSpaceAR(o)),i=cc.tween(this.node);o=I.default.getDistance(cc.v2(this.node.x,this.node.y),n),I.default.getDistance(cc.v2(this.node.x,this.node.y),this.targetPos),this.spine.timeScale=2,i.to(o/(130/.6*2),{x:n.x,y:n.y}).call(function(){e._onMoveTo(t)}).start()},T.prototype._onMoveTo=function(t){this.move_count_cd++,this.setGrid(cc.v2(t.x,t.y)),0<this.curPath.length?(t=this.curPath.pop(),this._move(cc.v2(t.x,t.y))):(this.move_count_cd=6,this.onMoveEnd()),y.default.checkNodeIsInWindow(this.node)&&6<=this.move_count_cd&&(this.move_count_cd=0,y.default.sortReq())},T.prototype.onMoveEnd=function(){var t=this.getComponent(P.default);t&&t.setStandByAni(),0<this.move_end_cb.length&&cc.Component.EventHandler.emitEvents(this.move_end_cb),this.moveEndCb&&this.moveEndCb()},T.prototype.onTouchView=function(t){var e=this;t&&t.stopPropagation(),_.gm.mapData.resetCurTouchObject(),C.default.getInstance().tryToMove(this.getFaceGrid(),function(){C.default.getInstance().updateDirectionByTarget(cc.v2(e.node.x,e.node.y)),C.default.getInstance().setStandByAni();var t,o=0,n=M.default.getInstance().getCurTasks(d.ConditionType.NPC);if(0<n.length)for(var i=0;i<n.length;i++){var a=n[i],r=a.getCondition(d.ConditionType.NPC).id;if(e.data.npcID==r){if(a.isOtherConditionReach(d.ConditionType.NPC)){o=0,M.default.getInstance().interactWithNpc[a.taskID]=e.data.npcID,M.default.getInstance().checkAll();break}o=2}i!=n.length-1||o||(o=1)}else o=1;!o||(t=u.NPCBubbleUtil.getConfig(e.data.npcID,o))[0]&&_.gm.ui.showModule(_.gm.const.DialogUI,function(e){e.setData(t[0].words_id,null,!1)})})},T.prototype.setToTargetGridPos=function(t){this.targetGrid=t,this.setToGrid(t)},T.prototype.setToGrid=function(t){this.curPath=[],this.setGrid(t),this.node.stopAllActions()},T.prototype.runCommand=function(){var t=this,e=this.commandList.shift();e?e.commonType==S.NpcCommandType.stand?(this.getComponent(P.default).setStandByAni(d.EnumRoleAniType.standby,!0),this.scheduleOnce(function(){t.runCommand()},3)):e.commonType==S.NpcCommandType.move?y.default.checkNodeIsInWindow(this.nod_touch)?this.moveTo(e.grid,function(){t.scheduleOnce(function(){t.runCommand()},3)}):this.scheduleOnce(function(){t.runCommand()},3):e.commonType==S.NpcCommandType.talk?this.scheduleOnce(function(){t.runCommand()},.5):cc.log("stop"):((e=new S.NpcCommand).commonType,S.NpcCommandType.move,this.commandList.push(e),this.scheduleOnce(function(){t.runCommand()},.5))},T.prototype.updateIndex=function(t){this.node.zIndex=t},T.prototype.getFoodData=function(){var t=this.data.getFoodData();t&&this.updateFoodUIByData(t)},T.prototype.updateFoodUIByData=function(t){this.data.foodOrderData=t,this.data.foodOrderData.state==D.FoodOrderState.not_done?(this.foodBubble.show(),cc.warn("npc \u5f00\u59cb\u968f\u673a\u884c\u8d70 ",this.data.npcID),this.setToTargetGridPos(p.default.createMainhouseFoodRandomGrid()),this.runCommand()):this.foodBubble.show(!1);var e=this.data.foodOrderData.getNpc(),o=this.data.foodOrderData.getFoods();if(1==e.length)this.foodBubble.setFoodIds(o);else for(var n=0;n<e.length;n++)e[n]==this.data.npcID&&this.foodBubble.setFoodIds([o[n]]);o[t=e.indexOf(this.data.npcID)]&&(t=o[t].id,this.foodBubble.setFoodIcon(t))},T.prototype.reset=function(){this.setToTargetGridPos(this.getGrid()),this.getComponent(P.default).setStandByAni(d.EnumRoleAniType.standby,!0)},T.prototype.sitDownOnFoodChair=function(t,e,o){void 0===o&&(o=null),(t=t.getChairByIndex(e)).removeAllChildren(),this.node.parent=t,this.node.x=0,this.node.y=0,this.show(),1==e||3==e?this.getComponent(P.default).updateDirectionByType(d.RoleDirection.left_up):this.getComponent(P.default).updateDirectionByType(d.RoleDirection.right_down),this.getComponent(P.default).playAniByType(d.EnumRoleAniType.sitdown,1,o)},T.prototype.sitdownOnChair=function(t){this.node.parent=t.nod_ani,this.node.x=0,this.node.y=0,this.show(),this.getComponent(P.default).updateDirectionByType(d.RoleDirection.right_down),this.getComponent(P.default).playAniByType(d.EnumRoleAniType.sitdown)},T.prototype.sitdownOnRockingChair=function(t){this.node.parent=t.nod_npc_parent,this.node.x=0,this.node.y=0,this.show(),this.getComponent(P.default).updateDirectionByType(d.RoleDirection.left_down),this.getComponent(P.default).playRockingChair(),t.playRocking()},T.prototype.goOutRockingChair=function(t){t.stopRocking(),this.reset()},T.prototype.show=function(t){this.isShow=t=void 0===t||t,this.node.active=!0,this.node.opacity=t?255:0,_.gm.localData.getNpcData(this.data.npcID).display=t,_.gm.localData.saveNpcData(),t?this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchView,this):this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchView,this)},T.prototype.getFaceGrid=function(){var t=this.getComponent(P.default).direction,e=this.getGrid(),o=e.x,n=e.y;switch(t){case Number(d.RoleDirection.left_up):--o;break;case Number(d.RoleDirection.right_up):--n;break;case Number(d.RoleDirection.right_down):o+=1;break;case Number(d.RoleDirection.left_down):n+=1}var i=M.default.getInstance().getCurTasks(d.ConditionType.NPC);if(0<i.length)for(var a=0;a<i.length;a++){var r=i[a],c=r.getCondition(d.ConditionType.NPC).id;if(d.ENpcID.Goudan==c&&1039==r.taskID){o=37,n=92;break}}return cc.v2(o,n)},T.prototype.canTransport=function(t){return 100<I.default.getDistance(this.getGrid(),t)?(cc.log("\u4f20\u9001=========",!0),!0):(cc.log("\u4f20\u9001=========",!1),!1)},T.prototype.showFinger=function(){var t;this.nod_finger?(t=this.nod_finger.getChildByName("finger"))?(t.active=!0,this.scheduleOnce(function(){t.active=!1},2)):this.nod_finger.active=!0:cc.warn("not finger",this.data)},T.prototype.hideFinger=function(){var t;this.nod_finger&&((t=this.nod_finger.getChildByName("finger"))?t.active=!1:this.nod_finger.active=!1)},T.prototype.setGrid=function(t){this.posSys.worldGrid=t,this.updatePos()},T.prototype.updatePos=function(){var t,e,o;this.posSys.worldGrid&&(t=g.default.getMapObjectByID(d.SpecialObjectID.mainHouse),e=g.default.getMapObjectByID(d.SpecialObjectID.stall),o=g.default.getMapObjectByID(d.SpecialObjectID.left_door),t&&I.default.includes(t.data.getSeizePos(),[this.posSys.worldGrid])?(this.node.parent=_.gm.mapData.mainHouse.getComponent(O.default).nod_inside,this.posSys.parentUID=_.gm.mapData.mainHouse.data.getUID()):e&&I.default.includes(e.data.getSeizePos(),[this.posSys.worldGrid])?(this.node.parent=e.getComponent(w.default).nod_inside,this.posSys.parentUID=e.data.getUID()):o&&I.default.includes(o.data.getSeizePos(),[this.posSys.worldGrid])?(this.node.parent=o.nod_inside,this.posSys.parentUID=o.data.getUID()):(this.node.parent=_.gm.mainUI.map_object_layer,this.posSys.parentUID=""),this._updateByParent())},T.prototype.getNormalSpeed=function(){return 130/.6},T.prototype._updateByParent=function(){var t=p.default.worldGridToPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(_.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)),this.node.x=t.x,this.node.y=t.y},T.prototype.getGrid=function(){return this.posSys.worldGrid},T.prototype.getPosSys=function(){return this.posSys},T.prototype.getGridWidth=function(){return 1},T.prototype.getGridHeight=function(){return 1},s([a(cc.Node)],T.prototype,"nod_touch",void 0),s([a(cc.Node)],T.prototype,"nod_foot",void 0),s([a(sp.Skeleton)],T.prototype,"spine",void 0),s([a(v.default)],T.prototype,"bubble",void 0),s([a(cc.Component.EventHandler)],T.prototype,"move_end_cb",void 0),s([a(h.default)],T.prototype,"foodBubble",void 0),s([a(cc.Node)],T.prototype,"nod_finger",void 0),s([a(m.default)],T.prototype,"moveByLine",void 0),i=s([i],T),r.default=i,cc._RF.pop()},{}],OPPOMiniGame:[function(t,e,o){"use strict";cc._RF.push(e,"0c360eraJpMv6YAFEP3Fd2D","OPPOMiniGame");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.OPPOMiniGame=void 0;var r,c=i("GameMgr"),s=i("ChannelManager"),l=i("Utils"),p=i("NetUtils"),u=i("Const");function d(){this._targetBannerAdWidth=200,this._videoAd=null,this._bannerAd=null,this._bannerCustomAd=null,this._oppoUid="",this._interstitialAd=null,this._bannerCustomId=["486594"],this._videoid=["486945"],this._interid=[],this._nativeid=["427128"],this._share_config_url="https://leduo.zqygame.com/res/leduo/panda_oppo/share.json",this._chmhtxd_share_config_url="https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/04_oppo/share.json",this.rewardVideoStat=!1,this.is_bdd=0,this.edtion="",this.task_cp=0,this.map_cp=0,this.qq_number=0,this.is_weak_guide=0,this.data_code_is_show=!1,this.qq_code_copy=!0,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.is_show_active_btn=!0}i=(n=cc._decorator).ccclass,n.property,r=d,Object.defineProperty(d,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),d.prototype.load_channel_env=function(t){console.log("oppoMiniGame loadChannelEnv!!!");var e=this;return cc.audioEngine.stopAll(),cc.audioEngine.uncacheAll(),qg.login({success:function(o){console.log(JSON.stringify(o)),e._oppoUid=o.data.uid,console.log("this._oppoUid:",e._oppoUid),t(o.data.token)},fail:function(t){console.log(JSON.stringify(t))}}),qg.setLoadingProgress&&(console.log("qg.setLoadingProgress({ progress: 0 });"),qg.setLoadingProgress({progress:0})),qg.reportMonitor&&qg.reportMonitor("game_scene",0),this.load_share_config(),this.create_video_ad(),this.createBannerCustom(),!0},d.prototype.analyzeUrlPram=function(){return!0},d.prototype.get_qq_number=function(){return this.qq_number},d.prototype.get_is_weak_guide=function(){return this.is_weak_guide},d.prototype.get_is_bdd=function(){return!0},d.prototype.get_task_cp=function(){return this.task_cp},d.prototype.get_map_cp=function(){return this.map_cp},d.prototype.get_url=function(){return c.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},d.prototype.get_data_code_is_show=function(){return this.data_code_is_show},d.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},d.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},d.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},d.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},d.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},d.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},d.prototype.load_share_config=function(){var t=this,e=(c.gm.const.IS_GAME_XMCT?t._share_config_url:t._chmhtxd_share_config_url)+"?"+Date.now();console.log("load_share_config url: "+e),l.Utils.server_http_request(function(e){e&&("qq_number"in e&&(t.qq_number=e.qq_number,console.log("qq_number"+t.qq_number)),"is_weak_guide"in e&&(t.is_weak_guide=e.is_weak_guide,console.log("is_weak_guide"+t.is_weak_guide)),"is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp),"data_code_is_show"in e&&(t.data_code_is_show=e.data_code_is_show),"qq_code_copy"in e&&(t.qq_code_copy=e.qq_code_copy),"prase_percent_ios"in e&&(t.prase_percent_ios=e.prase_percent_ios),"prase_percent_and"in e&&(t.prase_percent_and=e.prase_percent_and),"is_show_nick_name"in e&&(t.is_show_nick_name=e.is_show_nick_name),"is_show_set_ui_update"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update),"is_show_active_btn"in e&&(t.is_show_active_btn=e.is_show_active_btn),console.log("map_cp:  "+t.map_cp),"edtion"in e&&(t.edtion=e.edtion,t.edtion==c.gm.const.VERSION_NUMBER?("is_bdd1"in e&&(t.is_bdd=e.is_bdd1),"task_cp1"in e&&(t.task_cp=e.task_cp1),"map_cp1"in e&&(t.map_cp=e.map_cp1),"qq_code_copy1"in e&&(t.qq_code_copy=e.qq_code_copy1),"is_show_active_btn1"in e&&(t.is_show_active_btn=e.is_show_active_btn1),"is_show_nick_name1"in e&&(t.is_show_nick_name=e.is_show_nick_name1),"is_show_set_ui_update1"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update1)):("is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp))))},this,e)},d.prototype.loginVerify=function(){return!0},d.prototype.load_sub_packages_env=function(t){return t(),!0},d.prototype.shareReq=function(t){return t(),!0},Object.defineProperty(d.prototype,"is_share",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.loginReport=function(){},d.prototype.vibrate_short=function(){qg.vibrateShort&&qg.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},d.prototype.vibrate_long=function(){qg.vibrateLong&&qg.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},Object.defineProperty(d.prototype,"is_support_more_game",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.create_banner_ad=function(){},d.prototype.initAd_banner=function(){console.log("initAd_banner bool:"),l.Utils.async_get_bundle(u.BundleName.COMMON,function(t){t.load("prefabs/sdk_prefabs/nativeBanner/nativeBanner",cc.Prefab,function(){},function(t,e){var o=cc.instantiate(e);r.AD_Nodebanner=new cc.Node("AD_Nodebanner"),r.AD_Nodebanner.addChild(o),r.AD_Nodebanner.zIndex=19999,r.AD_Nodebanner.setParent(c.gm.ui.get_layer_node(LayerType.TOP)),(e=r.AD_Nodebanner.addComponent(cc.Widget)).alignMode=cc.Widget.AlignMode.ALWAYS,e.isAlignBottom=!0,e.bottom=o.height/2,e.updateAlignment()})})},d.prototype.show_banner_ad=function(){},d.prototype.clipBoard=function(t,e){qg.setClipboardData({data:t,success:function(){e()}})},d.prototype.hide_banner_ad=function(){this.hideBannerCustom()},d.prototype.get_edtion=function(){return this.edtion},d.prototype.create_video_ad=function(){if(console.log("Oppo- createVideoAD!...."),!(qg.getSystemInfoSync().platformVersion<"1051")){var t=this;if(this._videoAd=qg.createRewardedVideoAd({adUnitId:t._videoid[0]}),!this._videoAd)return!1;this._videoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),t.rewardVideoStat=!0}),this._videoAd.onError(function(e){1004==e.code||qg.showToast({title:"\u5e7f\u544a\u64ad\u653e\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5!"}),console.log("\u89c6\u9891\u5e7f\u544a\u9519\u8bef\uff1a",JSON.stringify(e)),t.videoOpenisFail(),t._videoAd.load()}),this._videoAd.load(),this._videoAd.onClose(function(e){e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1"),GameSdk.BI.evtAppointDataReport(3002),t.videoPlayisSucc(),t._videoCb.apply(t._videoCbTarget)):(console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u53d6\u6d88\u5173\u95ed\uff0c\u4e0d\u53d1\u653e\u5956\u52b1"),t.videoPlayisFail()),t.rewardVideoStat=!1,t._videoAd.load()})}},d.prototype.show_video_ad=function(t,e){GameSdk.BI.evtAppointDataReport(3001),c.gm.data.video_state=1,this._music_mute=c.gm.audio.music_mute,this._effect_mute=c.gm.audio.effect_mute,this._videoCb=t,this._videoCbTarget=e,c.gm.audio.set_music(!0),c.gm.audio.set_effect_mute(!0),c.gm.data.start_data.today_video_laqi_count++,c.gm.data.start_data.total_video_laqi_count++,console.log("\u663e\u793a\u89c6\u9891\u5e7f\u544a\uff01\u3002\u3002\u3002"),this._videoCb=t,this._videoCbTarget=e,this._videoAd?this.rewardVideoStat?(this._videoAd.show(),this.rewardVideoStat=!1):this._videoAd.load():(this.create_video_ad(),console.log("\u89c6\u9891\u5e7f\u544a\u4e0d\u5b58\u5728\uff01\u3002\u3002\u3002")),this._videoAd.show()},d.prototype.videoPlayisSucc=function(){console.log("show video on_video_ad_handler  successCb onClose"),TaskManager.instance.checkTask(u.TaskConditionTypeEnum.TASK_CONDITION_TYPE_VIDEO,[0],1),c.gm.data.start_data.today_video_count++,c.gm.data.start_data.total_video_count++;for(var t=0;t<c.gm.const.VIDEO_REPORT_COUNT_PER_DAY.length;++t)if(c.gm.data.start_data.today_video_count==c.gm.const.VIDEO_REPORT_COUNT_PER_DAY[t]){p.ReportData.instance.ui_report(u.VideoReportTypeEnum.VIDEO_REPORT_TYPE_VIDEO+t,c.gm.data.start_data.today_video_count);break}c.gm.data.start_data.async_write_data(),p.ReportData.instance.report_point(19),c.gm.data.video_state=0,c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute)},d.prototype.videoPlayisFail=function(){console.log("show video on_video_ad_handler  failCb onClose"),c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute),c.gm.data.video_state=0,c.gm.ui.emit("cancel_watch_ad")},d.prototype.videoOpenisFail=function(){console.log("show video on_video_ad_handler  errorCb onClose"),c.gm.audio.set_music(this._music_mute),c.gm.audio.set_effect_mute(this._effect_mute),c.gm.data.video_state=0,p.ReportData.instance.report_point(u.VideoReportTypeEnum.VIDEO_REPORT_TYPE_FAIL_VIDEO),c.gm.ui.emit("cancel_watch_ad")},d.prototype.createInterstitialAd=function(){if(console.log("createInterstitialAd"),""!=this._interid[0]){if(qg.createInterstitialAd&&(this._interstitialAd=qg.createInterstitialAd({adUnitId:this._interid[0]})),!this._interstitialAd)return!1;this._interstitialAd.onError(function(t){console.log("\u63d2\u5c4f\u5e7f\u544a\u9519\u8bef\uff1a",t)})}else console.log("this._interid is null")},d.prototype.show_interstitial_ad=function(){return null!=qg.createInterstitialAd&&!!this._interstitialAd&&(this._interstitialAd.show(),!0)},d.prototype.set_rank_value=function(){},Object.defineProperty(d.prototype,"is_rank",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.ifCreateShortcut=function(t){qg.hasShortcutInstalled({success:function(e){console.log("qg.hasShortcutInstalled:%s",e),t(e)},fail:function(){t(!0)},complete:function(){}})},d.prototype.createShortcut=function(t){qg.hasShortcutInstalled({success:function(e){0==e&&qg.installShortcut({success:function(){t()},fail:function(){},complete:function(){}})},fail:function(){},complete:function(){}})},d.prototype.showBannerNative=function(){},d.prototype.bannerNativeAdClick=function(){},d.prototype.showBigJpgNative=function(){},d.prototype.BigJpgNativeAdClick=function(){},d.prototype.showIcoNative=function(){},d.prototype.IcoNativeAdClick=function(){},d.prototype.timeNativeAdProcess=function(){setInterval(function(){},2e4)},d.prototype.get_app_name=function(){return window.qg&&window.qg.getSystemInfoSync?window.qg.getSystemInfoSync().platform:s.ChannelManager.UNKNOWN},Object.defineProperty(d.prototype,"is_support_interstitial_ad",{get:function(){return qg.createInterstitialAd?(console.log("is_support_interstitial_ad  createInterstitialAd: true"),!0):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),d.prototype.createBannerCustom=function(){},d.prototype.showBannerCustom=function(){},d.prototype.hideBannerCustom=function(){},d._instance=null,d.ad_enable=!0,i=r=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],d),a.OPPOMiniGame=i,cc._RF.pop()},{}],ObjectCookingBench:[function(t,e,o){"use strict";cc._RF.push(e,"9e08fzV54hKn6RjTBr7qdHH","ObjectCookingBench");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("IconUtils"),u=i("GameObject"),d=i("CookMgr");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.progress=null,t.spr_icon=null,t.nod_food=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.GameObject),h.prototype.setData=function(t){this.data=t,this.nod_food.active=!0,this.setFood(this.data.menuConfig.menu_id)},h.prototype.setFood=function(t){p.IconUtils.setMenuIcon(t,this.spr_icon)},h.prototype.update=function(){d.default.getInstance().cooking?this.progress.progress=1-Math.max(d.default.getInstance().leftTime/d.default.getInstance().initCookTime,0):this.nod_food.active=!1},s([a(cc.ProgressBar)],h.prototype,"progress",void 0),s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),s([a(cc.Node)],h.prototype,"nod_food",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],ObjectHp:[function(t,e,o){"use strict";cc._RF.push(e,"38787t7tJVBjKJ6v4+EGyMU","ObjectHp");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.pro_hp=null,t.lbl_hp=null,t.curHp=0,t.totalHp=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),u.prototype.start=function(){},u.prototype.setData=function(t,e){this.pro_hp.progress=t/e,this.lbl_hp.string=t+""},s([a(cc.ProgressBar)],u.prototype,"pro_hp",void 0),s([a(cc.Label)],u.prototype,"lbl_hp",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],ObjectMgrHelper:[function(t,e,o){"use strict";cc._RF.push(e,"483abBDGP5Hloeqk3vA3f6s","ObjectMgrHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("ConfigUtils"),l=i("GameMgr"),p=i("LvMgr"),u=i("MapDataHelper"),d=i("Singleton"),h=i("CompletionHelper"),_=i("DecorationMgr"),f=i("MathUtils");function g(){var t=null!==c&&c.apply(this,arguments)||this;return t.select_index=0,t}r(g,c=d.default),g.prototype.getDatasByConfig=function(t){var e=[];if(t.parent_id&&0<t.parent_id.length)for(var o=0,n=t.parent_id;o<n.length;o++){var i=n[o],a=u.default.getDataByID(i);a=h.default.getInstance().getDecorationSons(a,1),e.push.apply(e,a)}if(t.others)for(var r=0,c=t.others;r<c.length;r++){i=c[r];var s=u.default.getDataByID(i);e.push(s)}return e},g.prototype.getConfigByID=function(t){for(var e=0,o=l.gm.config.data.FuncCompletion;e<o.length;e++){var n=o[e];if(n.func_range_id==t)return n}},g.prototype.getName=function(t){return(t=t.getParentData())?t.getConfig().name:"\u52a0\u5de5\u5382"},g.prototype.checkCanOpenObjectMgr=function(t){var e=this.getAllParentID();if(t.data.getParentData()&&e.includes(t.data.getParentData().objectID)&&(t=t.data).isDecoration()&&(t=_.default.getConfig(t.objectID,1))&&1==t.type)return!0},g.prototype.getConfigByObjectData=function(t){for(var e=0,o=l.gm.config.data.FuncCompletion;e<o.length;e++){var n=o[e];if(t.getParentData()){if(t.isDecoration()&&n.parent_id.includes(t.getParentData().objectID)){var i=_.default.getConfig(t.objectID,1);if(i&&1==i.type)return n}}else if(n.others.includes(t.objectID))return n}},g.prototype.getAllParentID=function(){for(var t=[],e=0,o=l.gm.config.data.FuncCompletion;e<o.length;e++){var n=o[e];n.parent_id&&0<n.parent_id.length&&t.push.apply(t,n.parent_id)}return t},g.prototype.checkCompletion=function(t){if(t.id){var e=this.getConfigByID(t.id);return e=this.getDatasByConfig(e),h.default.getInstance().getCurCompletion(e)>=t.value}},g.prototype.getRangeValue=function(t){var e=this.getConfigByID(t);return e?this.getValueByConfig(e):(cc.error("range id error",t),0)},g.prototype.getValueByConfig=function(t){return t=g.getInstance().getDatasByConfig(t),t=h.default.getInstance().getCurCompletion(t),Math.floor(t/25)},g.prototype.getLandAwardByID=function(t){var e=u.default.getDataByID(t);if(!e)return[];var o=this.getConfigByObjectData(e);if(!o)return cc.error("not config",t),[];var n=this.getValueByConfig(o);if(0==(t=s.ProduceUtils.getConfigArrByBuildID(e.getConfig().association||t,p.default.getInstance().getLv())).length)return[];for(var i=[],a=0,r=f.default.randomArr(t,1)[0].productions;a<r.length;a++){var c={id:r[a].id,num:n};i.push(c)}return i},r=g,a.default=r,cc._RF.pop()},{}],ObjectMgrItem:[function(t,e,o){"use strict";cc._RF.push(e,"933df3P44BBIai4tWJCDsRH","ObjectMgrItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("ListItem"),h=i("DecorationMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_bg=null,t.spr_icon=null,t.lbl_lv=null,t.lbl_name=null,t.spr_name_bg=null,t.nod_max_lv_tip=null,t.nod_lock=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.default),_.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},_.prototype.setData=function(t){this.data=t,this.updateUI()},_.prototype.updateUI=function(){this.lbl_lv.string="Lv."+this.data.lv,this.lbl_name.string=this.data.getConfig().name,u.IconUtils.setObjectSprite(this.data.objectID,this.spr_icon),this.list.selectedId==this.listId?(this.lbl_lv.node.color=(new cc.Color).fromHEX("#9F301D"),this.lbl_name.node.color=(new cc.Color).fromHEX("#B75022"),u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/object_mgr/name_bg_check",this.spr_name_bg),u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/object_mgr/item_bg_check",this.spr_bg)):(this.lbl_lv.node.color=(new cc.Color).fromHEX("#8C6C5E"),this.lbl_name.node.color=(new cc.Color).fromHEX("#8C6C5E"),u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/object_mgr/name_bg_uncheck",this.spr_name_bg),u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"texture/object_mgr/item_bg_uncheck",this.spr_bg));var t=h.default.getDataModel(this.data.objectID,this.data.lv+1);this.nod_max_lv_tip.active=Boolean(!this.data.isLock())&&!t,t?(this.lbl_lv.string="Lv."+this.data.lv,this.lbl_lv.node.color=(new cc.Color).fromHEX("#9F301D")):(this.lbl_lv.string="\u5df2\u6ee1\u7ea7",this.lbl_lv.node.color=(new cc.Color).fromHEX("#FB7B43")),this.data.isLock()&&(this.lbl_lv.string=""),this.nod_lock.active=Boolean(this.data.isLock())},_.prototype.onTouch=function(){this.onClickThis()},s([a(cc.Sprite)],_.prototype,"spr_bg",void 0),s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),s([a(cc.Label)],_.prototype,"lbl_lv",void 0),s([a(cc.Label)],_.prototype,"lbl_name",void 0),s([a(cc.Sprite)],_.prototype,"spr_name_bg",void 0),s([a(cc.Node)],_.prototype,"nod_max_lv_tip",void 0),s([a(cc.Node)],_.prototype,"nod_lock",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ObjectMgrMenu:[function(t,e,o){"use strict";cc._RF.push(e,"25b4eXxcFNIea6+04BeyvIx","ObjectMgrMenu");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("IconUtils");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_lv=null,t.lbl_name=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=cc.Component),d.prototype.onEnable=function(){},d.prototype.onDisable=function(){},d.prototype.setData=function(t){this.uid=t,this.objectData=p.gm.mapData.getObjectData(this.uid),this.updateUI()},d.prototype.updateUI=function(){this.lbl_lv.string="Lv."+this.objectData.lv,this.lbl_name.string=this.objectData.getConfig().name,u.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon)},d.prototype.onBtnMenu=function(){p.gm.ui.showModule(p.gm.const.BarbecueMenuNew,function(t){t.setData()})},s([a(cc.Sprite)],d.prototype,"spr_icon",void 0),s([a(cc.Label)],d.prototype,"lbl_lv",void 0),s([a(cc.Label)],d.prototype,"lbl_name",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],ObjectMgrReplenish:[function(t,e,o){"use strict";cc._RF.push(e,"d4bfcqJUahA0JrxblAB8TiD","ObjectMgrReplenish");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("IconUtils"),_=i("EventManager"),f=i("BarbecueMenuHelper"),g=i("ShelfMgr"),y=i("ShelfOrderData");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_lv=null,t.lbl_name=null,t.lbl_progress=null,t.progress=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=cc.Component),m.prototype.onEnable=function(){_.default.on(u.GameEvent.replenish_goods,this.updateUI,this)},m.prototype.onDisable=function(){_.default.off(u.GameEvent.replenish_goods,this.updateUI,this)},m.prototype.setData=function(t){this.uid=t,this.objectData=d.gm.mapData.getObjectData(this.uid),this.updateUI()},m.prototype.updateUI=function(){this.lbl_lv.string="Lv."+this.objectData.lv,this.lbl_name.string=this.objectData.getConfig().name,h.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon);var t,e=y.default.getInstance().getStallCurCount(this.objectData.objectID),o=(g.default.getInstance().getMaxCount(this.objectData),this.objectData.getParentData().objectID==u.SpecialObjectID.stall?(e=y.default.getInstance().getStallCurCount(this.objectData.objectID),g.default.getInstance().getMaxCount(this.objectData)):(e=(t=f.default.getInstance().getGoodsByIceBox(this.objectData.objectID)).curCount,t.totalCount));this.lbl_progress.string=e+"/"+o,this.progress.progress=0<o?e/o:0},m.prototype.onBtnReplenish=function(){var t=this;p.default.checkIsStallDesk(this.objectData.objectID)?d.gm.ui.showModule(d.gm.const.ShelfUI,function(e){e.setData(t.objectData.getUID())}):d.gm.ui.showModule(d.gm.const.BarbecueIceBoxUI,function(e){e.setData(t.objectData.getUID())})},s([a(cc.Sprite)],m.prototype,"spr_icon",void 0),s([a(cc.Label)],m.prototype,"lbl_lv",void 0),s([a(cc.Label)],m.prototype,"lbl_name",void 0),s([a(cc.Label)],m.prototype,"lbl_progress",void 0),s([a(cc.ProgressBar)],m.prototype,"progress",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],ObjectMgrStaff:[function(t,e,o){"use strict";cc._RF.push(e,"61b98zmQh5Ofr+gbH6D45Gm","ObjectMgrStaff");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonItem"),d=i("ConfigUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("List"),y=i("EventManager"),m=i("TimeUtils"),v=i("NetUtils"),b=i("AttrHelper"),I=i("NodAttrItem"),D=i("NpcMgr"),C=i("StaffData"),O=i("StaffHelper"),w=i("StaffViewMgr"),M=i("TaskRecordData");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine_staff=null,t.lbl_name=null,t.list_attr=null,t.nod_consume_content=null,t.lbl_btn_tip=null,t.nod_upgrade=null,t.ani=null,t.selectNpcID=0,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(P,l=cc.Component),P.prototype.setData=function(t){this.objectData=_.gm.mapData.getObjectData(t),0!=(t=O.default.getInstance().getStaffIDByObjectID(this.objectData.objectID)).length&&(this.selectNpcID=t[0],this.updateUI())},P.prototype.updateUI=function(){this.updateTop(),this.updateConsumeUI()},P.prototype.updateTop=function(){var t=this;D.default.getInstance().loadSpineByNpcID(this.selectNpcID,function(e){t.spine_staff.skeletonData=e,t.spine_staff.setSkin("default"),t.spine_staff.setAnimation(0,"standby",!0)});var e=d.NPCDataUtils.getConfigByID(this.selectNpcID).npc_name;C.default.getInstance().staffs[this.selectNpcID]?(this.lbl_name.string="Lv."+C.default.getInstance().staffs[this.selectNpcID].lv+" "+e,this.cur_lv_config=O.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,C.default.getInstance().staffs[this.selectNpcID].lv),this.next_lv_config=O.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,C.default.getInstance().staffs[this.selectNpcID].lv+1),this.list_attr.numItems=this.cur_lv_config.attr.length,this.lbl_btn_tip.string="\u5347\u7ea7"):(this.lbl_name.string=e,this.cur_lv_config=O.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,1),this.next_lv_config=null,this.list_attr.numItems=this.cur_lv_config.attr.length,this.lbl_btn_tip.string="\u62db\u52df")},P.prototype.onBtnUpgrade=function(){var t;C.default.getInstance().staffs[this.selectNpcID]?this.next_lv_config&&f.default.tryConsumeThing(this.next_lv_config.need,!0)&&(C.default.getInstance().upgrade(this.selectNpcID),y.default.emit(h.GameEvent.updateBase),this.ani&&(this.ani.node.active=!0,this.ani.play("eff_gran"))):(t=O.default.getInstance().getStaffCfg(this.selectNpcID),f.default.tryConsumeThing(t.unlock_consume)&&(C.default.getInstance().addStaff(this.selectNpcID),M.default.getInstance().addRecruitStaff(this.selectNpcID),y.default.emit(h.GameEvent.on_recruit_staff),v.ReportData.instance.report_point(100005,41000024),C.default.getInstance().selectStaff(this.selectNpcID,this.objectData.getUID(),1),M.default.getInstance().addAppointStaff(this.objectData.objectID),y.default.emit(h.GameEvent.appoint_staff),this.onAppointStaff(),-1==p.default.getInstance().lastStaffFoodTime&&(p.default.getInstance().lastStaffFoodTime=m.default.getTime()))),this.updateUI()},P.prototype.onRenderAttr=function(t,e){var o=b.default.getInstance().getAttrStr(this.cur_lv_config.attr[e]),n="";this.next_lv_config&&(n=b.default.getInstance().getAttrValueStr(this.next_lv_config.attr[e])),t.getComponent(I.default).setData(o,n)},P.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;if(this.nod_upgrade.active=!1,C.default.getInstance().staffs[this.selectNpcID]){if(this.next_lv_config){for(i=f.default.propItemToGainThing(this.next_lv_config.need),a=0;a<i.length;a++)(o=this.nod_consume_content.children[a])||(o=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(o,a)),o.getComponent(u.default).setData(i[a]),o.active=!0;this.nod_upgrade.active=!0}}else{var o,n=O.default.getInstance().getStaffCfg(this.selectNpcID);if(n.unlock_consume)for(var i=f.default.propItemToGainThing(n.unlock_consume),a=0;a<i.length;a++)(o=this.nod_consume_content.children[a])||(o=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(o,a)),o.getComponent(u.default).setData(i[a]),o.active=!0;this.nod_upgrade.active=!0}},P.prototype.onAppointStaff=function(){w.StaffViewMgr.getInstance().create(this.selectNpcID,1)},s([a(sp.Skeleton)],P.prototype,"spine_staff",void 0),s([a(cc.Label)],P.prototype,"lbl_name",void 0),s([a(g.default)],P.prototype,"list_attr",void 0),s([a(cc.Node)],P.prototype,"nod_consume_content",void 0),s([a(cc.Label)],P.prototype,"lbl_btn_tip",void 0),s([a(cc.Node)],P.prototype,"nod_upgrade",void 0),s([a(cc.Animation)],P.prototype,"ani",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],ObjectMgrUI:[function(t,e,o){"use strict";cc._RF.push(e,"cdb55GGJJtOcZ1ry6DLX0cn","ObjectMgrUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("JumpMgr"),h=i("PropMgr"),_=i("List"),f=i("EventManager"),g=i("GameModule"),y=i("CompletionHelper"),m=i("GuideMgr"),v=i("StaffHelper"),b=i("ObjectMgrHelper"),I=i("ObjectMgrItem"),D=i("ObjectMgrMenu"),C=i("ObjectMgrReplenish"),O=i("ObjectMgrStaff"),w=i("ObjectMgrUpgrade"),M=i("AttrHelper");function P(){var t=null!==l&&l.apply(this,arguments)||this;return t.object_list=null,t.lbl_name=null,t.tog=null,t.nod_upgrade=null,t.nod_replenish=null,t.nod_staff=null,t.nod_menu=null,t.nod_completion=null,t.lbl_completion=null,t.nod_prop=null,t.lbl_prop_count=null,t.lbl_attr=null,t.rich_attr=null,t.curObjectData=null,t.datas=[],t.select_id=0,t.tog_func_index=0,t.config=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(P,l=g.default),P.prototype.onEnable=function(){f.default.on(u.GameEvent.object_upgrade,this.updateUI,this),f.default.on(u.GameEvent.updateBase,this.updateUI,this)},P.prototype.onDisable=function(){f.default.off(u.GameEvent.object_upgrade,this.updateUI,this),f.default.off(u.GameEvent.updateBase,this.updateUI,this),m.default.getInstance().resetTouchCondition()},P.prototype.setData=function(t,e){var o=this;this.config=e,this.curObjectData=t.data,this.datas=b.default.getInstance().getDatasByConfig(e),this.datas.sort(function(t,e){return t.objectID-e.objectID});for(var n=0;n<this.datas.length;n++)if(this.datas[n].getUID()==this.curObjectData.getUID()){this.select_id=n;break}this.object_list.numItems=this.datas.length,this.object_list.selectedId=this.select_id,this.tog_func_index=0,this.updateUI(),m.default.getInstance().touchCondition.mission==u.ConditionType.replenish_goods&&m.default.getInstance().touchCondition.id==this.curObjectData.objectID?(this.tog_func_index=2,this.updateUI(),p.default.showFingerGuide(function(t){t.showFingerByNode(o.nod_replenish.node.getChildByName("btn_replenish"))})):m.default.getInstance().touchCondition.mission==u.ConditionType.recruit_staff?(this.tog_func_index=1,this.updateUI(),p.default.showFingerGuide(function(t){t.showFingerByNode(o.nod_staff.node.getChildByName("btn_upgrade"))})):m.default.getInstance().touchCondition.mission==u.ConditionType.staff_upgrade?(this.tog_func_index=1,this.updateUI(),p.default.showFingerGuide(function(t){t.showFingerByNode(o.nod_staff.node.getChildByName("btn_upgrade"))})):m.default.getInstance().touchCondition.mission==u.ConditionType.bbq_learn_menu?(this.tog_func_index=3,this.updateUI(),p.default.showFingerGuide(function(t){t.showFingerByNode(o.nod_menu.node.getChildByName("btn_upgrade"))})):m.default.getInstance().touchCondition.mission==u.ConditionType.buy_prop&&m.default.getInstance().touchCondition.id==u.CommonPropID.bbq_sauce&&(this.tog_func_index=2,this.updateUI(),p.default.showFingerGuide(function(t){t.showFingerByNode(o.nod_replenish.node.getChildByName("btn_replenish"))}))},P.prototype.updateUI=function(){this.object_list.numItems=this.datas.length,this.lbl_name.string=this.config.name,this.tog.toggleItems[this.tog_func_index].check(),this.nod_prop.active=Boolean(3==this.config.func_range_id),this.nod_prop.active&&(this.lbl_prop_count.string=h.default.getPropCount(10019)+"");var t=v.default.getInstance().getStaffIDByObjectID(this.curObjectData.objectID);this.tog.toggleItems[1].node.active=0<t.length&&!this.curObjectData.isLock(),this.tog.toggleItems[2].node.active=(p.default.checkIsBBQIceBox(this.curObjectData.objectID)||p.default.checkIsStallDesk(this.curObjectData.objectID))&&!this.curObjectData.isLock(),this.tog.toggleItems[3].node.active=p.default.checkIsBBQBoard(this.curObjectData.objectID)&&!this.curObjectData.isLock(),this.nod_upgrade.node.opacity=0,this.nod_upgrade.node.scale=0,this.nod_replenish.node.opacity=0,this.nod_replenish.node.scale=0,this.nod_staff.node.opacity=0,this.nod_staff.node.scale=0,this.nod_menu.node.opacity=0,(this.nod_menu.node.scale=0)==this.tog_func_index?(this.nod_upgrade.node.scale=1,this.nod_upgrade.node.active=!0,this.nod_upgrade.node.opacity=255,this.nod_upgrade.setData(this.curObjectData.getUID())):1==this.tog_func_index?(this.nod_staff.node.scale=1,this.nod_staff.node.active=!0,this.nod_staff.node.opacity=255,this.nod_staff.setData(this.curObjectData.getUID())):2==this.tog_func_index?(this.nod_replenish.node.scale=1,this.nod_replenish.node.active=!0,this.nod_replenish.node.opacity=255,this.nod_replenish.setData(this.curObjectData.getUID())):3==this.tog_func_index&&(this.nod_menu.node.scale=1,this.nod_menu.node.active=!0,this.nod_menu.node.opacity=255,this.nod_menu.setData(this.curObjectData.getUID())),t=y.default.getInstance().getCurCompletion(this.datas),this.nod_completion.getComponent(cc.ProgressBar).progress=t/100,this.lbl_completion.string=t+"%",this.config.attr&&this.config.attr.attr_type?(t={attr_type:this.config.attr.attr_type,attr_num:b.default.getInstance().getRangeValue(this.config.func_range_id)},this.rich_attr.string="<b><color=#686867>"+M.default.getInstance().getAttrName(t)+":</color><color=#5bb000>"+M.default.getInstance().getAttrValueStr(t)+"</color></b>"):this.rich_attr.string=""},P.prototype.onRenderList=function(t,e){t.getComponent(I.default).setData(this.datas[e])},P.prototype.onSelect=function(t,e){this.select_id=e,this.curObjectData=this.datas[e],d.default.getInstance().jumpToGrid(this.curObjectData.getWorldGrid()),this.tog_func_index=0,this.updateUI()},P.prototype.onFuncToggle=function(t,e){this.tog_func_index=Number(e),this.updateUI()},s([a(_.default)],P.prototype,"object_list",void 0),s([a(cc.Label)],P.prototype,"lbl_name",void 0),s([a(cc.ToggleContainer)],P.prototype,"tog",void 0),s([a(w.default)],P.prototype,"nod_upgrade",void 0),s([a(C.default)],P.prototype,"nod_replenish",void 0),s([a(O.default)],P.prototype,"nod_staff",void 0),s([a(D.default)],P.prototype,"nod_menu",void 0),s([a(cc.Node)],P.prototype,"nod_completion",void 0),s([a(cc.Label)],P.prototype,"lbl_completion",void 0),s([a(cc.Node)],P.prototype,"nod_prop",void 0),s([a(cc.Label)],P.prototype,"lbl_prop_count",void 0),s([a(cc.Label)],P.prototype,"lbl_attr",void 0),s([a(cc.RichText)],P.prototype,"rich_attr",void 0),i=s([i],P),r.default=i,cc._RF.pop()},{}],ObjectMgrUpgrade:[function(t,e,o){"use strict";cc._RF.push(e,"4e7b7wtCJxIRKbKUh8NzJfo","ObjectMgrUpgrade");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("GameMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("List"),f=i("DecorationMgr"),g=i("NodAttrItem");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.list_attr=null,t.nod_consume_content=null,t.lbl_lv=null,t.lbl_name=null,t.ani=null,t.lbl_upgrade_tip=null,t.uid="",t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=cc.Component),y.prototype.onBtnUpgrade=function(){if(this.objectData.isLock())return u.gm.ui.closeModule(u.gm.const.ObjectMgrUI),void this.objectData.loadObject(function(t){t.showFinger()});this.nextData?d.default.tryConsume(this.curData.config.need,!0)&&(this.objectData.upgrade(),this.updateUI(),this.ani&&(this.ani.node.active=!0,this.ani.play("eff_gran"))):u.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},y.prototype.setData=function(t){this.uid=t,this.objectData=u.gm.mapData.getObjectData(this.uid),this.updateUI()},y.prototype.updateUI=function(){this.lbl_lv.string="Lv."+this.objectData.lv,this.lbl_name.string=this.objectData.getConfig().name,h.IconUtils.setObjectSprite(this.objectData.objectID,this.spr_icon),this.curData=f.default.getDataModel(this.objectData.objectID,this.objectData.lv),this.curData||cc.error("updateUI",this.objectData),this.nextData=f.default.getDataModel(this.objectData.objectID,this.objectData.lv+1),this.curData&&this.curData.config.attr&&this.curData.config.attr.length?this.list_attr.numItems=this.curData.config.attr.length:this.curData&&this.curData.config.love_produce?this.list_attr.numItems=1:this.list_attr.numItems=0,this.updateConsumeUI(),this.lbl_upgrade_tip.string=this.nextData?"\u5347\u7ea7":"\u5df2\u6ee1\u7ea7",this.nod_consume_content.active=!0,this.objectData.isLock()&&(this.lbl_lv.string="",this.list_attr.numItems=0,this.nod_consume_content.active=!1,this.lbl_upgrade_tip.string="\u53bb\u89e3\u9501")},y.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;if(this.curData.config.need)for(var o=d.default.propItemToGainThing(this.curData.config.need),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},y.prototype.onRenderAttr=function(t,e){var o=this.curData.getAttrName(e)+"\uff1a"+this.curData.getAttrStr(e),n="";this.nextData&&(n=this.nextData.getAttrStr(e)),t.getComponent(g.default).setData(o,n)},s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(_.default)],y.prototype,"list_attr",void 0),s([a(cc.Node)],y.prototype,"nod_consume_content",void 0),s([a(cc.Label)],y.prototype,"lbl_lv",void 0),s([a(cc.Label)],y.prototype,"lbl_name",void 0),s([a(cc.Animation)],y.prototype,"ani",void 0),s([a(cc.Label)],y.prototype,"lbl_upgrade_tip",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ObjectPlant:[function(t,e,o){"use strict";cc._RF.push(e,"8ac2ci3nghB0LIL7mfbxyHP","ObjectPlant");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_lands_parent=null,t}r(p,s=cc.Component),p.prototype.getNodeByIndex=function(t){return this.nod_lands_parent.children[t]},c([l(cc.Node)],p.prototype,"nod_lands_parent",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],ObjectUtils:[function(t,e,o){"use strict";cc._RF.push(e,"ecc10R9qAdAzK5H7mbqqMEh","ObjectUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.copy=function(t){return JSON.parse(JSON.stringify(t))},i.moveTo=function(t,e,o){if(t[o]){var n=t[o];return delete t[o],e[o]=n}return cc.warn("not found key",o,t),null},n.default=i,cc._RF.pop()},{}],Object_10041:[function(t,e,o){"use strict";cc._RF.push(e,"2da591ZaRpKnbQReWFJhCYT","Object_10041");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?this.spine.setAnimation(0,"on2",!0):this.spine.setAnimation(0,"off1",!0)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10042:[function(t,e,o){"use strict";cc._RF.push(e,"e012aH1LGhK0Y2D/FGCRUdQ","Object_10042");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?this.spine.setAnimation(0,"on2",!0):this.spine.setAnimation(0,"off1",!0)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10043:[function(t,e,o){"use strict";cc._RF.push(e,"b1f37uQbuxC2LU2VckDZyQL","Object_10043");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t;this.spine&&((t=this.getComponent(h.default))&&!t.data.isLock()&&t.data.isSlotWorking()?this.spine.setAnimation(0,"on2",!0):this.spine.setAnimation(0,"off1",!0))},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10044:[function(t,e,o){"use strict";cc._RF.push(e,"0e64aP6ixJCIoxtRE7H7cuj","Object_10044");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_eff=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?(this.spine.setAnimation(0,"on2",!0),this.nod_eff.active=!0):(this.spine.setAnimation(0,"off1",!0),this.nod_eff.active=!1)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),s([a(cc.Node)],_.prototype,"nod_eff",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10324:[function(t,e,o){"use strict";cc._RF.push(e,"ce57dEXH2hCAqzB/gXecg7Z","Object_10324");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_ani=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),s([a(cc.Node)],u.prototype,"nod_ani",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],Object_10326:[function(t,e,o){"use strict";cc._RF.push(e,"eb53bcfGyJLKYa4ScMNIZmn","Object_10326");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),s([a(sp.Skeleton)],u.prototype,"spine",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],Object_10335:[function(t,e,o){"use strict";cc._RF.push(e,"7724aFOFSFIPJxNAzIUiXK0","Object_10335");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_ani=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),s([a(cc.Node)],u.prototype,"nod_ani",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],Object_10336:[function(t,e,o){"use strict";cc._RF.push(e,"bb5b3niBD1MirB7cWFocERf","Object_10336");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject");function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.ani=null,t.isOn=!1,t}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.GameObject),p.prototype.turn=function(){this.ani=this.getComponent(cc.Animation),this.isOn?(this.ani.play("build_10336_off"),this.isOn=!1):(this.ani.play("build_10336_on"),this.isOn=!0)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],Object_10337:[function(t,e,o){"use strict";cc._RF.push(e,"71127FJ/0BM04t7NwIKOUZv","Object_10337");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject");function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.ani=null,t.isOn=!1,t}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.GameObject),p.prototype.turn=function(){this.ani=this.getComponent(cc.Animation),this.isOn?(this.ani.play("build_10337_off"),this.isOn=!1):(this.ani.play("build_10337_on"),this.isOn=!0)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],Object_10407:[function(t,e,o){"use strict";cc._RF.push(e,"508b389uBRK47WUOEBM6zwc","Object_10407");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("ShelfOrderData"),f=i("MapObject");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.GameObject),g.prototype.onEnable=function(){this.objectData=this.getComponent(f.default).data,this.updateUI(),d.default.on(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.onDisable=function(){d.default.off(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.updateUI=function(){var t=_.default.getInstance().getStallGoodsData(this.objectData);(t=t.havaCount/t.allCount)<=0?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10407",this.spr_facade):t<=.25?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10407_1",this.spr_facade):t<=.75?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10407_2",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10407_3",this.spr_facade)},s([a(cc.Sprite)],g.prototype,"spr_facade",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],Object_10408:[function(t,e,o){"use strict";cc._RF.push(e,"3219frIpstGgYbRYp/P6ZNG","Object_10408");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("ShelfOrderData"),f=i("MapObject");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.GameObject),g.prototype.onEnable=function(){this.objectData=this.getComponent(f.default).data,this.updateUI(),d.default.on(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.onDisable=function(){d.default.off(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.updateUI=function(){var t=_.default.getInstance().getStallGoodsData(this.objectData);(t=t.havaCount/t.allCount)<=0?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10408",this.spr_facade):t<=.25?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10408_1",this.spr_facade):t<=.75?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10408_2",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10408_3",this.spr_facade)},s([a(cc.Sprite)],g.prototype,"spr_facade",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],Object_10409:[function(t,e,o){"use strict";cc._RF.push(e,"6f701YeJ3BCdIob09OYX+VK","Object_10409");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("ShelfOrderData"),f=i("MapObject");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.GameObject),g.prototype.onEnable=function(){this.objectData=this.getComponent(f.default).data,this.updateUI(),d.default.on(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.onDisable=function(){d.default.off(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.updateUI=function(){var t=_.default.getInstance().getStallGoodsData(this.objectData);(t=t.havaCount/t.allCount)<=0?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10409",this.spr_facade):t<=.25?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10409_1",this.spr_facade):t<=.75?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10409_2",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10409_3",this.spr_facade)},s([a(cc.Sprite)],g.prototype,"spr_facade",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],Object_10411:[function(t,e,o){"use strict";cc._RF.push(e,"55fcfOWAxlBSK5m3r3Rk5gE","Object_10411");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?this.setAni("on2",!0):this.setAni("off1",!0)},_.prototype.setAni=function(t,e){void 0===e&&(e=!0),this.spine&&this.spine.animation!=t&&this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10412:[function(t,e,o){"use strict";cc._RF.push(e,"960b66nutZBj64fNBLkXeIG","Object_10412");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?this.setAni("on2",!0):this.setAni("off1",!0)},_.prototype.setAni=function(t,e){void 0===e&&(e=!0),this.spine&&this.spine.animation!=t&&this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10413:[function(t,e,o){"use strict";cc._RF.push(e,"08a496PQOFL7rqkS4UieCc+","Object_10413");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("EventManager"),d=i("GameObject"),h=i("MapObject");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.GameObject),_.prototype.onEnable=function(){u.default.on(p.GameEvent.update_slot_ui,this.updateUI,this),this.updateUI()},_.prototype.onDisable=function(){u.default.off(p.GameEvent.update_slot_ui,this.updateUI,this)},_.prototype.updateUI=function(){var t=this.getComponent(h.default);t&&!t.data.isLock()&&t.data.isSlotWorking()?this.setAni("on2",!0):this.setAni("off1",!0)},_.prototype.setAni=function(t,e){void 0===e&&(e=!0),this.spine&&this.spine.animation!=t&&this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],_.prototype,"spine",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],Object_10415:[function(t,e,o){"use strict";cc._RF.push(e,"b1ea9uiGVlLW717vMRp7QEa","Object_10415");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("EventManager"),_=i("GameObject");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.progress=null,t.lbl_count=null,t.nod_eff=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=_.GameObject),f.prototype.onEnable=function(){this.updateCount(),h.default.on(p.GameEvent.updateBase,this.updateCount,this)},f.prototype.onDisable=function(){h.default.off(p.GameEvent.updateBase,this.updateCount,this)},f.prototype.updateProgress=function(){},f.prototype.updateCount=function(){this.lbl_count.string=""+d.default.getPropCount(p.CommonPropID.cook_like),u.gm.config.data.Setting[0].InitialSatisfactionNum<=d.default.getPropCount(p.CommonPropID.cook_like)?this.nod_eff.active=!0:this.nod_eff.active=!1},s([a(cc.ProgressBar)],f.prototype,"progress",void 0),s([a(cc.Label)],f.prototype,"lbl_count",void 0),s([a(cc.Node)],f.prototype,"nod_eff",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],Object_1045:[function(t,e,o){"use strict";cc._RF.push(e,"20b665vbelO07V0+F0xNsXI","Object_1045");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_ani=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),s([a(cc.Node)],u.prototype,"nod_ani",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],Object_10604:[function(t,e,o){"use strict";cc._RF.push(e,"a9ec9dWoFFBM5zhhHqiI67o","Object_10604");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("Const"),d=i("Formula"),h=i("GameMgr"),_=i("MapDataHelper"),f=i("PropMgr"),g=i("IconUtils"),y=i("EventManager"),m=i("GameObject"),v=i("StringUtil"),b=i("TimeUtils"),I=i("FoodOrderMgr"),D=i("MainRoleMgr"),C=i("MapObject");function O(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_pos_0=null,t.nod_pos_1=null,t.nod_pos_2=null,t.nod_pos_3=null,t.nod_gift=null,t.nod_food=null,t.nod_food_tip=null,t.nod_limit=null,t.nod_unlimit=null,t.lbl_time=null,t.order=null,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(O,l=m.GameObject),O.prototype.onLoad=function(){this.hideAllFood(),y.default.on(u.GameEvent.changeFoodOrderState,this.onChangeState,this),y.default.on(u.GameEvent.updateFoodUI,this.onChangeState,this)},O.prototype.onDestroy=function(){y.default.off(u.GameEvent.changeFoodOrderState,this.onChangeState,this),y.default.off(u.GameEvent.updateFoodUI,this.onChangeState,this)},O.prototype.onEnable=function(){this.nod_gift.on(cc.Node.EventType.TOUCH_END,this.onTouchGift,this),this.objectData=this.getComponent(C.default).data;var t=this.objectData.getUID();t&&((t=I.default.getInstance().getOrderByTableUID(t))&&(this.order=t,this.updateUI()),this.updateNodFoodTip())},O.prototype.onDisable=function(){},O.prototype.setOrderData=function(t){this.order=t,this.updateUI()},O.prototype.onTouchGift=function(t){var e;this.order&&(t.stopPropagation(),this.order.state==I.FoodOrderState.eating_end)&&(e=this.order.getAward(),I.default.getInstance().setOrderAward(this.order),h.gm.ui.showModule(h.gm.const.FoodAwardUI,function(t){t.setData(e)}))},O.prototype.onChangeState=function(){this.updateUI(),this.updateNodFoodTip()},O.prototype.updateUI=function(){if(this.order)if(this.order.state==I.FoodOrderState.put_food)for(var t=this.order.getNpc(),e=0;e<t.length;e++)cc.log("show food",this.order.foods[e]),this.showFood(e,this.order.foods[e].id);else this.order.state==I.FoodOrderState.eating_end?(this.nod_gift.active=!0,this.hideAllFood()):this.order.state==I.FoodOrderState.award&&(this.nod_gift.active=!1)},O.prototype.getChairByIndex=function(t){return this["nod_pos_"+t]},O.prototype.mainRoleSitdown=function(t,e){void 0===e&&(e=null),t=this["nod_pos_"+t],D.default.getInstance().mainRole.node.parent=t,D.default.getInstance().mainRole.node.x=0,D.default.getInstance().mainRole.node.y=0,D.default.getInstance().updateDirectionByType(u.RoleDirection.right_down),D.default.getInstance().playAniByType(u.EnumRoleAniType.sitdown,1,e)},O.prototype.npcLeave=function(){this.hideAllFood()},O.prototype.showFood=function(t,e){this.nod_food.getChildByName("spr_food_"+t).active=!0,t=this.nod_food.getChildByName("spr_food_"+t).getComponent(cc.Sprite),g.IconUtils.setPropSprite(e,t)},O.prototype.hideAllFood=function(){for(var t=0;t<4;t++)this.nod_food.getChildByName("spr_food_"+t).active=!1},O.prototype.getPutFoodGrid=function(){var t=this.getComponent(C.default).data.getLeftPos();return cc.v2(t.x-1,t.y)},O.prototype.updateNodFoodTip=function(){this.nod_food_tip.active=this.checkShowTip(),this.nod_food_tip.active&&(d.Formula.getFoodOrderLimit(this.objectData)>p.default.getInstance().getFoodOrderTimes(this.objectData.getUID())?(this.nod_unlimit.active=!0,this.nod_limit.active=!1):(this.nod_unlimit.active=!1,this.nod_limit.active=!0))},O.prototype.onBtnSpeaker=function(){f.default.tryConsume([{id:u.CommonPropID.speaker,num:1}],!0)&&I.default.getInstance().addNewOrderByDesk(this.objectData)},O.prototype.update=function(){var t,e;this.nod_unlimit&&this.objectData&&(t=I.default.getInstance().getOrderByTableUID(this.objectData.getUID()))&&t.state==I.FoodOrderState.award&&(e=b.default.getTime(),0<=(e=I.default.getInstance().getOrderCD()+t.awardTime-e)&&(this.lbl_time.string=v.default.countDownFormat_2(e)))},O.prototype.checkShowTip=function(){var t=_.default.getDataByID(u.SpecialObjectID.light_plate),e=this.objectData.getUID();if(e&&!this.objectData.isLock()&&!t.isLock()){if(!(e=I.default.getInstance().getOrderByTableUID(e)))return!0;if(e.state==I.FoodOrderState.award)return!0}return!1},s([a(cc.Node)],O.prototype,"nod_pos_0",void 0),s([a(cc.Node)],O.prototype,"nod_pos_1",void 0),s([a(cc.Node)],O.prototype,"nod_pos_2",void 0),s([a(cc.Node)],O.prototype,"nod_pos_3",void 0),s([a(cc.Node)],O.prototype,"nod_gift",void 0),s([a(cc.Node)],O.prototype,"nod_food",void 0),s([a(cc.Node)],O.prototype,"nod_food_tip",void 0),s([a(cc.Node)],O.prototype,"nod_limit",void 0),s([a(cc.Node)],O.prototype,"nod_unlimit",void 0),s([a(cc.Label)],O.prototype,"lbl_time",void 0),i=s([i],O),r.default=i,cc._RF.pop()},{}],Object_10605:[function(t,e,o){"use strict";cc._RF.push(e,"f703bcpHT1JJK5idHSi12MH","Object_10605");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject");function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.ani=null,t.isOn=!1,t}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.GameObject),p.prototype.turn=function(){this.ani=this.getComponent(cc.Animation),this.isOn?(this.ani.play("build_10605_off"),this.isOn=!1):(this.ani.play("build_10605_on"),this.isOn=!0)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],Object_25008:[function(t,e,o){"use strict";cc._RF.push(e,"953658opnpFCqQAU+e2fyEH","Object_25008");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("BarbecueOrderData");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_food_parent=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=h.GameObject),f.prototype.onEnable=function(){d.default.on(p.GameEvent.updateFoodDesk,this.updateUI,this),this.updateUI()},f.prototype.updateUI=function(){for(var t=0,e=this.nod_food_parent.children;t<e.length;t++)e[t].active=!1;for(var o=_.default.getInstance().cook_end_order.concat([]).reverse(),n=0;n<o.length;n++){var i=this.nod_food_parent.children[n];i&&(i.active=!0,u.IconUtils.setPropSprite(o[n].item.id,i.getComponent(cc.Sprite)))}},s([a(cc.Node)],f.prototype,"nod_food_parent",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],Object_25009:[function(t,e,o){"use strict";cc._RF.push(e,"e721dSQ6mRGz6ElNz8reVzR","Object_25009");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("IconUtils"),h=i("GameObject"),_=i("AniUtils"),f=i("TMXUtils"),g=i("FoodOrderMgr"),y=i("MapObject");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_pos_0=null,t.nod_pos_1=null,t.nod_pos_2=null,t.nod_pos_3=null,t.nod_gift=null,t.nod_food=null,t.nod_stand_pos=[],t.ani_clean=null,t.data=null,t.standGrids={},t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=h.GameObject),m.prototype.onLoad=function(){this.hideAllFood()},m.prototype.onEnable=function(){},m.prototype.onDisable=function(){},m.prototype.updateUI=function(){if(this.data)if(this.data.state==g.FoodOrderState.put_food)for(var t=this.data.getNpc(),e=0;e<t.length;e++)cc.log("show food",this.data.foods[e]),this.showFood(e,this.data.foods[e].id);else this.data.state==g.FoodOrderState.eating_end?(this.nod_gift.active=!0,this.hideAllFood()):this.data.state==g.FoodOrderState.award&&(this.nod_gift.active=!1)},m.prototype.getChairByIndex=function(t){return this["nod_pos_"+t]},m.prototype.getStandGrid=function(t){return t=this.nod_stand_pos[t].convertToWorldSpaceAR(cc.v2(0,0)),t=u.gm.mainUI.map_object_layer.convertToNodeSpaceAR(t),f.default.touchToTile(t,u.gm.mapData.mapSize,u.gm.const.GridSize)},m.prototype.showFood=function(t,e){this.nod_food.getChildByName("spr_food_"+t).active=!0,t=this.nod_food.getChildByName("spr_food_"+t).getComponent(cc.Sprite),d.IconUtils.setPropSprite(e,t)},m.prototype.showGarbage=function(t){this.nod_food.getChildByName("spr_food_"+t).active=!0,t=this.nod_food.getChildByName("spr_food_"+t).getComponent(cc.Sprite),d.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/building/barbecue/garbage",t)},m.prototype.hideFood=function(t){this.nod_food.getChildByName("spr_food_"+t).active=!1},m.prototype.hideAllFood=function(){for(var t=0;t<4;t++)this.nod_food.getChildByName("spr_food_"+t).active=!1},m.prototype.getPutFoodGrid=function(){var t=this.getComponent(y.default).data.getLeftPos();return cc.v2(t.x-1,t.y+1)},m.prototype.getFoodNode=function(t){return this.nod_food.getChildByName("spr_food_"+t)},m.prototype.playClean=function(t){_.default.playAni(this.ani_clean,"cook_eff_smoke",t=void 0===t?null:t)},s([a(cc.Node)],m.prototype,"nod_pos_0",void 0),s([a(cc.Node)],m.prototype,"nod_pos_1",void 0),s([a(cc.Node)],m.prototype,"nod_pos_2",void 0),s([a(cc.Node)],m.prototype,"nod_pos_3",void 0),s([a(cc.Node)],m.prototype,"nod_gift",void 0),s([a(cc.Node)],m.prototype,"nod_food",void 0),s([a({type:[cc.Node],tooltip:"\u89d2\u8272\u7ad9\u7acb\u4f4d\u7f6e"})],m.prototype,"nod_stand_pos",void 0),s([a(cc.Animation)],m.prototype,"ani_clean",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],Object_25010:[function(t,e,o){"use strict";cc._RF.push(e,"f6334lqUsJMJqT6BXfghFN4","Object_25010");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("EventManager"),_=i("GameObject");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.progress=null,t.lbl_count=null,t.nod_eff=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=_.GameObject),f.prototype.onEnable=function(){this.updateCount(),h.default.on(p.GameEvent.updateBase,this.updateCount,this)},f.prototype.onDisable=function(){h.default.off(p.GameEvent.updateBase,this.updateCount,this)},f.prototype.updateProgress=function(){},f.prototype.updateCount=function(){this.lbl_count.string=""+d.default.getPropCount(p.CommonPropID.bbq_like),u.gm.config.data.Setting[0].InitialSatisfactionNum<=d.default.getPropCount(p.CommonPropID.bbq_like)?this.nod_eff.active=!0:this.nod_eff.active=!1},s([a(cc.ProgressBar)],f.prototype,"progress",void 0),s([a(cc.Label)],f.prototype,"lbl_count",void 0),s([a(cc.Node)],f.prototype,"nod_eff",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],Object_Cashier:[function(t,e,o){"use strict";cc._RF.push(e,"a5b07un6sFA7o1VHyOyBm4n","Object_Cashier");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject"),p=a("MapObject");function u(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(u,s=l.GameObject),u.prototype.getLinkPos=function(t){void 0===t&&(t=0);var e=0,o=0,n=this.getComponent(p.default);return n&&(e=(n=n.data.getCenterPos()).x,o=n.y+10+4*t),cc.v2(e,o)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],u),r.default=a,cc._RF.pop()},{}],Object_Feed:[function(t,e,o){"use strict";cc._RF.push(e,"dba47ACItVL1p4UAL/aQs0j","Object_Feed");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("BreedMgr"),f=i("MapObject");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_energy=null,t.spr_shi_cao=null,t.pro_energy=null,t.parentData=null,t.foodMax=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.GameObject),g.prototype.onEnable=function(){this.updateUI(),d.default.on(p.GameEvent.object_upgrade,this.updateUI,this),d.default.on(p.GameEvent.object_unlock,this.updateUI,this)},g.prototype.onDisable=function(){d.default.off(p.GameEvent.object_upgrade,this.updateUI,this),d.default.off(p.GameEvent.object_unlock,this.updateUI,this)},g.prototype.updateUI=function(){var t,e,o=this.getComponent(f.default).data.getParentData();o&&(this.parentData=o),this.parentData&&(this.foodMax=_.default.getInstance().getFoodMax(this.parentData),e=this.parentData.getCurEnergy()/this.foodMax,this.pro_energy.progress=e,this.lbl_energy.string=this.parentData.getCurEnergy()+"/"+this.foodMax,t=e<=.3?1:e<=.6?2:3,e="texture/chicken_house/cao_"+(o=Math.min(this.parentData.lv,4))+"_"+t,this.parentData.objectID==p.SpecialObjectID.Pig?e="texture/pig_house/cao_"+o+"_"+t:[p.SpecialObjectID.Milk_Cow,p.SpecialObjectID.Ox].includes(this.parentData.objectID)&&(e="texture/cattle_house/cao_"+o+"_"+t),u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,e,this.spr_shi_cao),this.parentData.breedData.updateEatFood())},g.prototype.update=function(){var t;this.parentData&&(t=this.parentData.getCurEnergy()/this.foodMax,this.pro_energy.progress=t,this.lbl_energy.string=this.parentData.getCurEnergy()+"/"+this.foodMax)},s([a(cc.Label)],g.prototype,"lbl_energy",void 0),s([a(cc.Sprite)],g.prototype,"spr_shi_cao",void 0),s([a(cc.ProgressBar)],g.prototype,"pro_energy",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],Object_Shelf_Desk:[function(t,e,o){"use strict";cc._RF.push(e,"642450qgqBCupEbYJ5mHKbP","Object_Shelf_Desk");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("IconUtils"),d=i("EventManager"),h=i("GameObject"),_=i("ShelfOrderData"),f=i("MapObject");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_facade=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.GameObject),g.prototype.onEnable=function(){d.default.on(p.GameEvent.updateBase,this.updateUI,this),this.updateUI()},g.prototype.onDisable=function(){d.default.off(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.updateUI=function(){var t=[p.SpecialObjectID.stall_desk_1],e=[p.SpecialObjectID.stall_desk_2],o=[p.SpecialObjectID.stall_desk_3,p.SpecialObjectID.stall_desk_4,p.SpecialObjectID.stall_desk_5],n=this.getComponent(f.default);n&&(t.includes(n.objectID)?_.default.getInstance().getStallCurCount(n.objectID)?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10417_3",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10417",this.spr_facade):e.includes(n.objectID)?_.default.getInstance().getStallCurCount(n.objectID)?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10418_3",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10418",this.spr_facade):o.includes(n.objectID)&&(_.default.getInstance().getStallCurCount(n.objectID)?u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10417_3",this.spr_facade):u.IconUtils.setSpriteFrame(p.BundleName.MAIN_UI,"map/texture/shopboard/10417",this.spr_facade),this.spr_facade.node.scaleX=-1))},s([a(cc.Sprite)],g.prototype,"spr_facade",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],ObstacleData:[function(t,e,o){"use strict";cc._RF.push(e,"f519cYsyE9Hf7gAyyUvtQHl","ObstacleData");var n=o;function i(){this._mapObstacle={}}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.addMapObstacles=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];if(this.checkMapObstacle(n))return cc.error("\u6709\u91cd\u53e0\u7269\u54c1\u4f4d\u7f6e"+n.x+", "+n.y),!1;this._mapObstacle[n.x+"_"+n.y]=!0}return!0},i.prototype.removeMapObstacle=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];this._mapObstacle[n.x+"_"+n.y]&&delete this._mapObstacle[n.x+"_"+n.y]}},i.prototype.checkMapObstacle=function(t){return Boolean(this._mapObstacle[t.x+"_"+t.y])},i.prototype.checkMapObstacles=function(t){for(var e=0,o=t=void 0===t?[]:t;e<o.length;e++){var n=o[e];if(this.checkMapObstacle(n))return!0}return!1},i.prototype.resetMapObstacle=function(t){for(var e=0,o=t;e<o.length;e++){var n=o[e];delete this._mapObstacle[n.x+"_"+n.y]}},i.prototype.getMapObstacle=function(){return this._mapObstacle},n.default=i,cc._RF.pop()},{}],OccupyData:[function(t,e,o){"use strict";cc._RF.push(e,"6042d5vNQFD750ZuRW0Xj3E","OccupyData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("GameMgr");function r(){}r.prototype.checkMapSeize2=function(t){for(var e in cc.log("\u83b7\u53d6\u5360\u5730===="),a.gm.mapData.mapObject)for(var o=(e=a.gm.mapData.mapObject[e]).data.getWorldGrid(),n=(e=e.data.getNetGridSize()).width,i=e.height,r=o.x;r>=o.x-n+1;r--)for(var c=o.y;c>=o.y-i+1;c--)if(t.x==r&&t.y==c)return!0;return!1},n=r,i.default=n,cc._RF.pop()},{}],Online:[function(t,e,o){"use strict";cc._RF.push(e,"06145ZJDfpJHa99D7c0n2pc","Online");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ChannelManager"),u=i("CommonData"),d=i("CommonUtils"),h=i("GameMgr"),_=i("PropMgr"),f=i("GameModule"),g=i("DailyTaskData"),y=i("StringUtil"),m=i("EventManager"),v=i("Const"),b=i("Formula"),I=i("RedDotMgr");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.icon_sprite=null,t.lbl_count=null,t.lbl_time=null,t.share_node=null,t.video_node=null,t.finish_node=null,t.unfinish_node=null,t._config=null,t._second=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=f.default),D.prototype.onEnable=function(){this.updateUI()},D.prototype.updateUI=function(){var t;this._config=h.gm.config.getOnlineConfig(u.default.getInstance().online_stage+1),this._config?(t=b.Formula.getCountByGainthing([this._config.prop],1),this.unfinish_node.active=!0,this.finish_node.active=!1,d.default.setUIByGainThing(this._config.prop,this.icon_sprite,this.lbl_count),this.lbl_count.string=this.lbl_count.string+"x"+t[0].num,t=this._config.time>=u.default.getInstance().online_time?this._config.time-u.default.getInstance().online_time:0,this.lbl_time.string=0<t?y.default.countDownFormat_2(t):"\u5956\u52b1\u53ef\u9886\u53d6",this.share_node.active=1==this._config.is_share,this.video_node.active=2==this._config.is_share):(this.unfinish_node.active=!1,this.finish_node.active=!0,m.default.emit(v.GameEvent.online),this.closeMe())},D.prototype.update=function(t){this._config?(this._second+=t,1<=this._second&&(--this._second,t=this._config.time>=u.default.getInstance().online_time?this._config.time-u.default.getInstance().online_time:0,this.lbl_time.string=0<t?y.default.countDownFormat_2(t):"\u5956\u52b1\u53ef\u9886\u53d6")):this.lbl_time.string="\u5956\u52b1\u53ef\u9886\u53d6"},D.prototype.getReward=function(t){t=b.Formula.getCountByGainthing([this._config.prop],t),_.default.addGainThing(t,!0),u.default.getInstance().online_stage++,u.default.getInstance().online_time=0,u.default.getInstance().save(),this.updateUI(),I.default.getInstance().reCalculate("nod_online")},D.prototype.checkIsCanGet=function(){return this._config?!(this._config.time>u.default.getInstance().online_time&&(h.gm.ui.showNotice("\u5728\u7ebf\u65f6\u957f\u4e0d\u8db3\u8fd8\u4e0d\u53ef\u4ee5\u9886\u53d6\u5956\u52b1"),1)):(h.gm.ui.showNotice("\u5956\u52b1\u5df2\u7ecf\u9886\u53d6\u5b8c"),!1)},D.prototype.onClickGet=function(){this.checkIsCanGet()&&this.getReward(1)},D.prototype.onClickShare=function(){var t=this;this.checkIsCanGet()&&(g.DailyTaskData.getInstance().share+=1,p.ChannelManager.instance.share_req(function(){t.getReward(3)},this))},D.prototype.onClickVideo=function(){var t=this;this.checkIsCanGet()&&d.default.showVideo(function(){t.getReward(3)},40000036)},s([a(cc.Sprite)],D.prototype,"icon_sprite",void 0),s([a(cc.Label)],D.prototype,"lbl_count",void 0),s([a(cc.Label)],D.prototype,"lbl_time",void 0),s([a(cc.Node)],D.prototype,"share_node",void 0),s([a(cc.Node)],D.prototype,"video_node",void 0),s([a(cc.Node)],D.prototype,"finish_node",void 0),s([a(cc.Node)],D.prototype,"unfinish_node",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],OpenRestaurantUI:[function(t,e,o){"use strict";cc._RF.push(e,"eb8413q3/xPlqixHC+enRPn","OpenRestaurantUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("GameModule"),d=i("SpineUtils");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.sp=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.default),h.prototype.onEnable=function(){var t=this;p.default.start_business(),this.sp.setAnimation(0,"on",!1),d.default.setListener(this.sp,function(){t.closeMe()})},s([a(sp.Skeleton)],h.prototype,"sp",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],OrderMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fadbbW07jVKsKUSHnTEOjbI","OrderMgr");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),r=s,c.default=r,cc._RF.pop()},{}],OrderNeedItem:[function(t,e,o){"use strict";cc._RF.push(e,"55b76evlK1HtYJHnF7AYr4F","OrderNeedItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonDiamondNeed"),d=i("CommonUtils"),h=i("ConfigUtils"),_=i("Const"),f=i("PropMgr"),g=i("IconUtils"),y=i("ListItem"),m=i("EventManager");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.rich_count=null,t.spr_icon=null,t.item_sub_percent=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=y.default),v.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},v.prototype.onEnable=function(){m.default.on(_.GameEvent.updateBase,this.updateUI,this),m.default.on(_.GameEvent.truck_lottery_item,this.updateItemSubPercent,this)},v.prototype.onDisable=function(){m.default.off(_.GameEvent.updateBase,this.updateUI,this),m.default.off(_.GameEvent.truck_lottery_item,this.updateItemSubPercent,this)},v.prototype.setData=function(t,e){void 0===e&&(e=0),this.data=t,this.item_sub_percent=e,this.updateUI()},v.prototype.updateItemSubPercent=function(t){this.item_sub_percent=t,this.updateUI()},v.prototype.updateUI=function(){var t,e;this.data?(e=h.PropUtils.getConfigByPropID(this.data.id),this.lbl_name.string=e.name,g.IconUtils.setPropSprite(this.data.id,this.spr_icon),t=(t=this.data.num*(100-this.item_sub_percent)/100)>Math.floor(t)?Math.floor(t)+1:Math.floor(t),this.rich_count.string=d.default.propNeedStr2(f.default.getPropCount(this.data.id),t),(e=this.getComponent(u.default))&&e.setData({id:this.data.id,num:t},!0)):cc.error("not data")},v.prototype.onTouch=function(){p.default.getInstance().dealByItemID(this.data.id)},s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.RichText)],v.prototype,"rich_count",void 0),s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],OrderUI:[function(t,e,o){"use strict";cc._RF.push(e,"542bfihsTFM3YnDPq2S8VJw","OrderUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("List"),h=i("EventManager"),_=i("GameModule"),f=i("NetUtils"),g=i("GuideMgr"),y=i("BusinessmanMgr"),m=i("ShelfMgr");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_name=null,t.lbl_coin=null,t.spr_head=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=_.default),v.prototype.setData=function(t){this.npcID=t,g.default.getInstance().showTaskFinger(1015,1),this.updateUI()},v.prototype.onEnable=function(){h.default.on(p.GameEvent.updateBase,this.updateUI,this)},v.prototype.onDisable=function(){h.default.off(p.GameEvent.updateBase,this.updateUI,this)},v.prototype.updateUI=function(){},v.prototype.onRender=function(){y.BusinessmanMgr.getInstance().businessmanData[this.npcID].order},v.prototype.onBtnSale=function(){var t=y.BusinessmanMgr.getInstance().businessmanData[this.npcID].order;if(!t)return u.gm.ui.showNotice("\u8ba2\u5355\u5df2\u8d85\u65f6"),void this.closeMe();m.default.getInstance().manualSellToBusinessman(t.items)?(g.default.getInstance().endGuide(1015),f.ReportData.instance.report_point(100005,41000011),this.closeMe()):u.gm.ui.showNotice("\u7269\u54c1\u4e0d\u8db3")},s([a(d.default)],v.prototype,"list",void 0),s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.Label)],v.prototype,"lbl_coin",void 0),s([a(cc.Sprite)],v.prototype,"spr_head",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],PathFinderMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0440cYriO1Bgq9aVybxk/u1","PathFinderMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("MyAStar"),p=i("TestAStar");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t._finding=!1,t._find_open=!1,t._astar=new p.default,t.task=[],t.is_dealing_task=!1,t.aStar=new l.default,t}r(u,c=s.default),u.prototype.setData=function(t,e,o,n,i){void 0===n&&(n=[]),this._cb=i=void 0===i?null:i,this._find_open=!1,this._astar.init(t,e,o,n),this._astar.run(),this._find_open=!0},u.prototype.update=function(){this._find_open&&this._astar.doFind(2e3)&&(this._find_open=!1,this._cb&&this._cb(this._astar.getPath()))},u.prototype.addTask=function(t){this.task.push(t)},u.prototype.checkTask=function(){var t;0<this.task.length&&(t=this.task.shift())&&this.dealingTask(t)},u.prototype.dealingTask=function(t){(new Date).getTime(),this.aStar.init(t.size,t.start,t.end,t.obstacles),this.aStar.initObstacles(t.obstacle_data),this.aStar.run();var e=this.aStar.getPath();t.cb(e)},r=u,a.default=r,cc._RF.pop()},{}],PetDecorateUI:[function(t,e,o){"use strict";cc._RF.push(e,"5a79cF4vlJLxaiF+MykfvaB","PetDecorateUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("List"),d=i("GameModule"),h=i("PetDecorationItem");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.datas=[],t._type_id=0,t._index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.default),_.prototype.onEnable=function(){},_.prototype.onBtnClose=function(){this.closeMe()},_.prototype.setData=function(t,e){this._type_id=t,this._index=e,this.updateUI()},_.prototype.updateUI=function(){for(var t=p.gm.config.getPetRoomConfig(this._type_id),e=[],o=0;o<t.decorate_id.length;++o)p.gm.localData.explore_data.pet_props[t.decorate_id[o]]&&0<p.gm.localData.explore_data.pet_props[t.decorate_id[o]].count&&e.push(t.decorate_id[o]);this.datas=e,this.list.numItems=e.length},_.prototype.onRenderItem=function(t,e){t.getComponent(h.default).setData(this._type_id,this.datas[e],this._index)},s([a(u.default)],_.prototype,"list",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],PetDecorationItem:[function(t,e,o){"use strict";cc._RF.push(e,"81bc8cxqw5PZ6uvMYC9mQDJ","PetDecorationItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("ListItem"),g=i("EventManager");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_icon=null,t._index=0,t._decorate_id=0,t._type_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.default),y.prototype.start=function(){},y.prototype.setData=function(t,e,o){this._type_id=t,this._decorate_id=e,this._index=o,this.updateUI(t)},y.prototype.onEnable=function(){},y.prototype.updateUI=function(t){var e=p.BigMapConfigUtils.getConfig(t);this.lbl_name.string=e.name,_.IconUtils.setObjectSprite(t,this.spr_icon)},y.prototype.onClick=function(){d.gm.localData.explore_data.deletePetProp(this._decorate_id)&&(h.default.updatePetDecorate(this._type_id,this._decorate_id,this._index),g.default.emit(u.GameEvent.change_pet_decorate,this._type_id),d.gm.ui.closeModule(d.gm.const.PetDecorateUI))},s([a(cc.Label)],y.prototype,"lbl_name",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],PetDecorationUI:[function(t,e,o){"use strict";cc._RF.push(e,"45870YiqKhLaKaBJQ4ipU5i","PetDecorationUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("CommonPropItem"),d=i("ConfigUtils"),h=i("GameMgr"),_=i("NodStars"),f=i("PropMgr"),g=i("IconUtils"),y=i("List"),m=i("GameModule"),v=i("DecorationMgr"),b=i("NodAttrItem");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.needItem=null,t.lbl_desc=null,t.lbl_name=null,t.stars=null,t.lbl_lv=null,t.list_attr=null,t.nod_right=null,t.nod_consume_content=null,t.ani=null,t.spr_prop_bg=null,t._decorate_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=m.default),I.prototype.onBtnUpgrade=function(){this.nextData?f.default.tryConsume(this.curData.config.need,!0)&&(f.default.upgradePetDecorate(this._decorate_id),this.updateUI(),this.ani&&(this.ani.node.active=!0,this.ani.play("eff_gran"))):h.gm.ui.showNotice("\u5df2\u6ee1\u7ea7")},I.prototype.setData=function(t){this._decorate_id=t,this.updateUI()},I.prototype.updateUI=function(){var t=h.gm.localData.explore_data.getPetDecorateLv(this._decorate_id);this.curData=v.default.getDataModel(this._decorate_id,t),this.nextData=v.default.getDataModel(this._decorate_id,t+1);var e=d.BigMapConfigUtils.getConfig(this._decorate_id).name;this.lbl_name.string=e,this.lbl_desc.string=this.curData.config.desc,this.lbl_lv.string="Lv"+t,this.stars.setStar(t),this.curData.config.need&&this.curData.config.need[0]&&this.needItem.setData(this.curData.config.need[0]),g.IconUtils.setObjectSprite(this._decorate_id,this.spr_icon),g.IconUtils.setQuality(this.curData.config.color,this.spr_prop_bg),this.list_attr.numItems=this.curData.config.attr&&this.curData.config.attr.length||1,this.updateConsumeUI()},I.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;if(this.curData.config.need)for(var o=f.default.propItemToGainThing(this.curData.config.need),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(p.default).setData(o[n]),i.active=!0}},I.prototype.onRenderAttr=function(t,e){var o=this.curData.getAttrName(e)+"\uff1a"+this.curData.getAttrStr(e),n="";this.nextData&&(n=this.nextData.getAttrStr(e)),t.getComponent(b.default).setData(o,n)},s([a(cc.Sprite)],I.prototype,"spr_icon",void 0),s([a(u.default)],I.prototype,"needItem",void 0),s([a(cc.Label)],I.prototype,"lbl_desc",void 0),s([a(cc.Label)],I.prototype,"lbl_name",void 0),s([a(_.default)],I.prototype,"stars",void 0),s([a(cc.Label)],I.prototype,"lbl_lv",void 0),s([a(y.default)],I.prototype,"list_attr",void 0),s([a(cc.Node)],I.prototype,"nod_right",void 0),s([a(cc.Node)],I.prototype,"nod_consume_content",void 0),s([a(cc.Animation)],I.prototype,"ani",void 0),s([a(cc.Sprite)],I.prototype,"spr_prop_bg",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],PetMap:[function(t,e,o){"use strict";cc._RF.push(e,"0abdeuKJ7hElrckLCE7ejvB","PetMap");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("GameModule");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.scr=null,t.map_object_layer=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.onEnable=function(){d.gm.ui.closeModule(d.gm.const.ExploreLoading),d.gm.ui.closeModule(d.gm.const.MainUI),d.gm.ui.tryRelease(d.gm.const.MainUI)},_.prototype.getContentNode=function(){return this.scr.content},_.prototype.show=function(){l.prototype.show.call(this),d.gm.ui.showModule(d.gm.const.BaseUI,function(t){t.setModeHide(u.E_BaseUIType.petMap)})},_.prototype.hide=function(){l.prototype.hide.call(this),p.default.getBaseUI().showUI()},s([a(cc.ScrollView)],_.prototype,"scr",void 0),s([a(cc.Node)],_.prototype,"map_object_layer",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],PetRoomLogic:[function(t,e,o){"use strict";cc._RF.push(e,"0ac63NKAq9ALZw+4ffDMTqs","PetRoomLogic");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var r=i("Const"),c=i("GameMgr"),s=i("Utils"),l=i("AssetMgr"),p=i("EventManager"),u=i("ExploreData"),d=i("GuideMgr"),h=i("RoomPet");function _(){this.pView=null,this.iCurZoneId=1,this.tZoneResMap=null,this._is_load=!1,this._is_load_all=!1,this._event_list=[],this.is_can_move=!0}i=(n=cc._decorator).ccclass,n.property,_.prototype.setView=function(t){this.pView=t},Object.defineProperty(_.prototype,"curZoneId",{get:function(){return this.iCurZoneId},enumerable:!1,configurable:!0}),_.prototype.onLoad=function(){},_.prototype.onDisable=function(){this.tZoneResMap=null,this.pView.unscheduleAllCallbacks(),this.pView.node_map.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancle,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),p.default.off(r.GameEvent.explore_go_home,this.onClickGoHome,this),p.default.off(r.GameEvent.delete_explore_pet,this.deleteChara,this),p.default.off(r.GameEvent.change_facade,this.change_facade,this)},_.prototype.onEnable=function(){this.pView.unscheduleAllCallbacks(),cc.director.getCollisionManager().enabled=!0,this._is_load=!1,this._is_load_all=!1,this.initZone(),p.default.on(r.GameEvent.explore_go_home,this.onClickGoHome,this),p.default.on(r.GameEvent.delete_explore_pet,this.deleteChara,this),p.default.on(r.GameEvent.change_facade,this.change_facade,this),this._event_list=[],this.is_can_move=!0,this.pView.node_map.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancle,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},_.prototype.change_facade=function(){this.pMainChara.model.updateUI(this.pMainChara.isBack)},_.prototype.show_pet=function(t){var e=this;l.default.getInstance().getResAsyn(r.BundleName.MAIN_UI,"prefabs/pet_map/pet/pet_"+t,cc.Prefab,function(o){var n=cc.instantiate(o).getComponent(h.default);n.init(),n.setPetId(t),(o=c.gm.localData.explore_data.getRoomPetPos(t))?(n.node.x=o.x,n.node.y=o.y):(n.node.x=e.pMainChara.node.x,n.node.y=e.pMainChara.node.y),(o=cc.v2(0,0)).x=n.node.x,o.y=n.node.y,e.pZone.addChara(n,null,null,260,o),e.pView.set_new_pet(n)})},_.prototype.calc_map_scale=function(){},_.prototype.touchStart=function(t){if(this.pView.getZone()){p.default.emit(r.GameEvent.pet_room_item_tips),this.pView.getZone().setNeedCameraFollow(!1);for(var e=t.getTouches(),o=0;o<e.length;++o){for(var n=!1,i=0;i<this._event_list.length;++i)if(e[o].getID()==this._event_list[i].getID()){n=!0;break}n||this._event_list.push(e[o])}this.pZone.is_moving=!0}else console.log("touchStart !zone")},_.prototype.touchMove=function(t){var e;0<this.pMainChara.attacking_uid?console.log("touchMove,uid="+this.pMainChara.attacking_uid):this.pView.getZone()?(t.getTouches(),(e=this.pView.getZone().node)?(e.x+=2.5*t.getDelta().x*this.pView.node_map.scaleX,e.y+=2.5*t.getDelta().y*this.pView.node_map.scaleY,t=this.pView.check_zone_pos(e.getPosition(),this.pView.node_map.scale),e.x=t.x,e.y=t.y):console.log("touchMove !zone_node")):console.log("touchMove !zone")},_.prototype.set_can_move=function(t){this.is_can_move=t},Object.defineProperty(_.prototype,"get_is_can_move",{get:function(){return this.is_can_move},enumerable:!1,configurable:!0}),_.prototype.touchEnd=function(t){var e,o=this;this.is_can_move&&this.pView.getZone()&&(this.clear_touch(t),this.pZone)&&(this.pZone.is_moving=!1,p.default.emit(r.GameEvent.explore_item),10<=s.Utils.distance(t.getStartLocation(),t.getLocation())?this.pZone.check_screen_map(!1):this.pView.getZone().node&&this.pMainChara&&((e=cc.v2(0,0)).x=-this.pMainChara.node.x,e.y=-this.pMainChara.node.y,this.pZone.setNeedCameraFollow(!0),t=this.pZone.getTouchPos(t),this.pMainChara.setStandByAni(),this.pMainChara.playAniByType(r.EnumRoleAniType.walk),this.pMainChara.walkTo(t,function(){o.pMainChara.setStandByAni(),c.gm.localData.saveByKey("explore_data")})?c.gm.localData.explore_data.target_pos=t:(this.pMainChara.setStandByAni(),c.gm.ui.showNotice("\u4eb2\u7231\u7684\u5c0f\u4e3b\uff0c\u76ee\u7684\u5730\u5728\u969c\u788d\u4e2d\u662f\u65e0\u6cd5\u884c\u8d70\u8fc7\u53bb\u7684\u54e6"))))},_.prototype.clear_touch=function(t){for(var e=t.getTouches(),o=0;o<this._event_list.length;++o)for(var n=0;n<e.length&&this._event_list[o];++n)e[n].getID()==this._event_list[o].getID()&&this._event_list.splice(o,1);this.calc_map_scale()},_.prototype.touchCancle=function(t){this.clear_touch(t),this.pZone.is_moving=!1},_.prototype.initZone=function(){var t;c.gm.localData.explore_data?(t=new u.ExploreData,Object.assign(t,c.gm.localData.explore_data),c.gm.localData.explore_data=t):(c.gm.localData.explore_data=new u.ExploreData,c.gm.localData.explore_data.init_data()),this.pView.loadZone(this.iCurZoneId,null)},_.prototype.getZoneResMap=function(){return this.tZoneResMap},_.prototype.onCharaEvent=function(t,e){switch(t){case r.CharaEventTypeEnum.CLICK:this.onCharaEventClick(e);break;case r.CharaEventTypeEnum.DISAPPEAR:this.onCharaEventDisappear(e)}},_.prototype.onCharaEventDisappear=function(t){t&&this.tZoneResMap[t.getUid()]},_.prototype.onSpineEvent=function(){},_.prototype.onCharaEventClick=function(t){if(t)return this.tZoneResMap[t.getUid()]?void 0:(console.log("deleteChara uid1="+t.getUid()),this.deleteChara(t.getUid()),void c.gm.pool.put(t.node));console.log("deleteChara uid2")},_.prototype.deleteChara=function(t){delete this.tZoneResMap[t],this.pView.deleteChara(t)},_.prototype.onTouchEnd=function(){},_.prototype.onClickGoHome=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=null),p.default.emit(r.GameEvent.room_pet_pos),this.pView.recyleZone(),c.gm.ui.showModule(c.gm.const.MainUI,function(){d.default.getInstance().checkGuide()}),c.gm.ui.showModule(c.gm.const.BaseUI,function(t){t.setModeHide(r.E_BaseUIType.home)}),c.gm.ui.closeModule(c.gm.const.PetRoom)},_.prototype.onBtnClick=function(t,e){"btn_gohome"===(void 0===e&&(e=null),t)&&this.onClickGoHome()},Object.defineProperty(_.prototype,"pMainChara",{get:function(){return this.pView.getMainChara()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"pZone",{get:function(){return this.pView.getZone()},enumerable:!1,configurable:!0}),i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],_),a.default=i,cc._RF.pop()},{}],PetRoomOutside:[function(t,e,o){"use strict";cc._RF.push(e,"a0e34gh0MpM/Z85UwL0ufwe","PetRoomOutside");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.onEnable=function(){this.node.active=!0},l.prototype.onCollisionEnter=function(){this.node.active=!1},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],PetRoomView:[function(t,e,o){"use strict";cc._RF.push(e,"f8754ptKKBA7qIQAnZlWazo","PetRoomView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("Const"),d=i("GameMgr"),h=i("ReplacementModel"),_=i("Utils"),f=i("AssetMgr"),g=i("EventManager"),y=i("GameModule"),m=i("SpineUtils"),v=i("Chara"),b=i("Zone"),I=i("PetRoomLogic"),D=i("RoomItem"),C=i("RoomPet");function O(){var t=l.call(this)||this;return t.node_map=null,t.pZone=null,t.baseUI=null,t.pLogic=new I.default,t.pMainChara=null,t.tZoneCharas=null,t.tZoneCharaLoading=null,t.pPetChara=[],_.Utils.sceneBindLogic(t,t.pLogic),t}i=(a=cc._decorator).ccclass,a=a.property,c(O,l=y.default),O.prototype.onLoad=function(){},O.prototype.setPmainCharta=function(t){this.pMainChara=t},O.prototype.getMainChara=function(){return this.pMainChara},O.prototype.getPetCharaList=function(){return this.pPetChara},O.prototype.getZone=function(){return this.pZone},O.prototype.getpLogic=function(){return this.pLogic},O.prototype.set_new_pet=function(t){this.pPetChara.push(t)},O.prototype.reset_chara=function(){for(var t in this.tZoneCharas)(t=this.tZoneCharas[t])&&t.node&&(this.pZone.removeChara(t),d.gm.pool.put(t.node))},O.prototype.recyleZone=function(){this.reset_chara(),this.pZone.removeMainChara(),g.default.emit("remove_bullet");for(var t=0;t<this.pPetChara.length;++t)this.pZone&&this.pZone.removeChara(this.pPetChara[t]);for(t=0;t<this.pPetChara.length;++t)d.gm.pool.put(this.pPetChara[t].node);this.pZone&&d.gm.pool.put(this.pZone.node),this.pZone=null,this.pMainChara=null,this.pPetChara=[],d.gm.localData.petAni={}},O.prototype.loadZone=function(t,e){var o=this;this.tZoneCharas={},this.tZoneCharaLoading={};var n=0,i=2+d.gm.localData.explore_data.pet_data_map.length;function a(){if(++n==i&&o.pMainChara){o.pLogic._is_load=!0,o.pMainChara.node.x=755,o.pMainChara.node.y=-726,o.pZone&&o.pZone.addMainChara(o.pMainChara),o.pMainChara.resetWalk(),o.pMainChara.setCfgId(88888),o.pMainChara.updateDir(1,1),o.pMainChara.setStandByAni(),o.refreshZoneCharas(function(){o.pLogic._is_load_all=!0,e&&e(),o.pZone&&o.pZone.check_screen_map(!1),d.gm.ui.closeModule(d.gm.const.ExploreLoading)});for(var t=0;t<o.pPetChara.length;++t){cc.v2(0,0);var a="pos_"+(101+_.Utils.math_random(!0,1,7));a=o.pZone.node.getChildByName("pet_pos").getChildByName(a).getPosition(),o.pZone&&o.pZone.addChara(o.pPetChara[t],null,null,150,a)}d.gm.ui.showModule(d.gm.const.BaseUI,function(t){t.setModeHide(u.E_BaseUIType.petMap),o.baseUI=t}),o.pMainChara.model=h.default.createBySpine(o.pMainChara.chara_spine,p.default.getInstance().dressing,!0),o.pMainChara.model.updateByDirection(o.pMainChara.isBack)}}d.gm.localData.petAni={},this.node_map.removeAllChildren();var r=u.BundleName.MAIN_UI;d.gm.pool.async_get(r,"prefabs/pet_map/pet_map_1",b.default,function(t){o.pZone=t,o.pZone.node.x=-755,o.pZone.node.y=726;var e=d.gm.const.exploreMapInitScale;e=o.check_zone_pos(t.node.getPosition(),e),t.node.y=e.y,t.node.x=e.x,o.pZone&&o.pZone.setCfgId(88888),o.pZone&&o.pZone.addCharaEventCb(o.onCharaEvent,o),o.node_map.addChild(t.node),o.pZone.setNeedCameraFollow(!0),o.pZone.outside_node.active=!0,a()}),this.pMainChara=null,f.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"prefabs/explore/main_role_"+d.gm.localData.sex_id,cc.Prefab,function(t){t=cc.instantiate(t),o.pMainChara=t.getComponent(v.default),o.pMainChara.init(),o.pMainChara.chara_spine.setCompleteListener(o.pMainChara.onSpineComplete.bind(o.pMainChara)),m.default.setEventListener(o.pMainChara.chara_spine,o.pLogic.onSpineEvent.bind(o.pLogic)),a()}),this.pPetChara=[];for(var c=0;c<d.gm.localData.explore_data.pet_data_map.length;++c)!function(t){f.default.getInstance().getResAsyn(u.BundleName.MAIN_UI,"prefabs/pet_map/pet/pet_"+d.gm.localData.explore_data.pet_data_map[t].pet_id,cc.Prefab,function(e){(e=cc.instantiate(e).getComponent(C.default)).init(),e.setPetId(d.gm.localData.explore_data.pet_data_map[t].pet_id),e.setWalkSpeed(150),e.set_is_update(!0),o.pPetChara.push(e),a()})}(c)},O.prototype.check_zone_pos=function(t,e){return cc.view.getDesignResolutionSize(),t.x<=(this.node.width/2-d.gm.const.roomPetMapX*e/2)/e&&(t.x=(this.node.width/2-d.gm.const.roomPetMapX*e/2)/e),t.x>=(d.gm.const.roomPetMapX*e/2-this.node.width/2)/e&&(t.x=(d.gm.const.roomPetMapX*e/2-this.node.width/2)/e),t.y<=(this.node.height/2-d.gm.const.roomPetMapY*e/2)/e&&(t.y=(this.node.height/2-d.gm.const.roomPetMapY*e/2)/e),t.y>=(d.gm.const.roomPetMapY*e/2-this.node.height/2)/e&&(t.y=(d.gm.const.roomPetMapY*e/2-this.node.height/2)/e),t},O.prototype.update=function(){this.pLogic._is_load_all},O.prototype.onCharaEvent=function(t,e){this.pLogic.onCharaEvent(t,e)},O.prototype.check_screen=function(t,e,o){return o=Math.abs(t.x+this.pZone.node.x)*this.node_map.scale-o/2,e=Math.abs(t.y+this.pZone.node.y)*this.node_map.scale-e/2,o<this.node.width/2&&e<this.node.height/2},O.prototype.refreshZoneCharas=function(t){var e=this;void 0===t&&(t=null);for(var o=d.gm.config.getPetRoomConfigAry(),n=0;n<o.length;++n)!function(n){for(var i=0;i<o[n].num;++i)!function(i){d.gm.pool.async_get(u.BundleName.MAIN_UI,"prefabs/pet_map/chara/build_"+o[n].res_id,D.default,function(a){var r=_.Utils.get_next_uid();a.setUid(r),a.setCfgId(n),a.setData(o[n].res_id,i),e.tZoneCharas[r]=a,e.pZone.addChara(a,o[n].pos_list[i],null,0,null),a.init(),n==o.length-1&&i==o[n].num-1&&t&&t()})}(i)}(n)},O.prototype.deleteChara=function(t){var e=this.tZoneCharas[t];if(!e){var o=this.pZone.getChara(t);return o?(console.log("deleteChara uid="+t),this.pZone.removeChara(o),void d.gm.pool.put(o.node)):void 0}this.pZone.removeChara(e),d.gm.pool.put(e.node),delete this.tZoneCharas[t]},O.prototype.getPchara=function(t){return this.tZoneCharas[t]},O.prototype.checkResInScreen=function(t){var e=(n=this.pZone.getPos(t)).x+this.pZone.node.x,o=n.y+this.pZone.node.y,n=(t=.5*cc.winSize.width/d.gm.localData.explore_data.explore_scale,.5*cc.winSize.height/d.gm.localData.explore_data.explore_scale);return n+=n,-1*(t+=t)<=e&&e<=t&&-1*n<=o&&o<=n},O.prototype.checkIsMainRoleInScreeen=function(){var t=(n=this.pMainChara.node.getPosition()).x+this.pZone.node.x,e=n.y+this.pZone.node.y,o=.5*cc.winSize.width/d.gm.localData.explore_data.explore_scale,n=.5*cc.winSize.height/d.gm.localData.explore_data.explore_scale;return-1*o<=t&&t<=o&&-1*n<=e&&e<=n},O.prototype.onEnable=function(){},O.prototype.onDisable=function(){this.unscheduleAllCallbacks()},O.prototype.editor_on_button_click_handler=function(t,e){this.pLogic.onBtnClick(t.target.name,e=void 0===e?null:e)},s([a(cc.Node)],O.prototype,"node_map",void 0),i=s([i],O),r.default=i,cc._RF.pop()},{}],PigHouse:[function(t,e,o){"use strict";cc._RF.push(e,"d0a17gXgqdKFIo54kQYD1JM","PigHouse");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("AccessMgr"),p=a("Const"),u=a("GameMgr"),d=a("BreedData"),h=a("PropMgr"),_=a("NetUtils"),f=a("BreedMgr"),g=a("CommonAnimalHouse"),y=a("MapObject"),m=a("Pig");function v(){var t=null!==s&&s.apply(this,arguments)||this;return t.foodMax=1,t}a=(n=cc._decorator).ccclass,n.property,c(v,s=g.default),v.prototype.start=function(){u.gm.pool.init(u.gm.const.Pig.bundleName,u.gm.const.Pig.loadPath,m.default),this.mapObject=this.getComponent(y.default);for(var t=0,e=this.mapObject.data.breedData.animals;t<e.length;t++){var o=e[t];this.createAnimal(o)}},v.prototype.updateUI=function(){this.config=f.default.getInstance().getConfig(this.mapObject.objectID,this.mapObject.data.lv),this.config?(this.foodMax=f.default.getInstance().getFoodMax(this.mapObject.data),this.mapObject.data.breedData.updateEatFood()):cc.error("not found config",this.mapObject.objectID,this.mapObject.data)},v.prototype.createAnimal=function(t){var e=this;u.gm.pool.async_get(u.gm.const.Pig.bundleName,u.gm.const.Pig.loadPath,m.default,function(o){e.nod_ani_layer.addChild(o.node),o.setData(t,e.nod_pos_layer,e.getComponent(y.default).data)})},v.prototype.onBtnBuy=function(){var t;this.mapObject.data.breedData.animals.length<f.default.getInstance().getAnimalMax(this.mapObject.data)?h.default.tryConsume([{id:p.CommonPropID.coin,num:this.config.animal_cost_money}])&&(u.gm.ui.showNotice("\u8d2d\u4e70\u6210\u529f"),(t=d.BreedAnimalData.create(this.config)).cur_energy=0,this.mapObject.data.buyAnimal(t),this.createAnimal(t),_.ReportData.instance.report_point(100005,41000003)):u.gm.ui.showNotice("\u6570\u91cf\u5df2\u8fbe\u4e0a\u9650\uff0c\u65e0\u6cd5\u8d2d\u4e70\uff0c\u8bf7\u5347\u7ea7\u5efa\u7b51")},v.prototype.onBtnReplenish=function(){this.mapObject.data.getCurEnergy(),this.foodMax;var t=this.foodMax-this.mapObject.data.getCurEnergy(),e=(t=Math.max(t,0),h.default.getConfigByPropID(this.config.animal_food_id.id));if(!e.energy)return u.gm.ui.showNotice("\u914d\u7f6e\u51fa\u9519\uff0c\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a"),void cc.error("\u9972\u6599\u80fd\u91cf\u4e3a\u7a7a");var o=Math.ceil(t/e.energy);if(o<=0)return u.gm.ui.showNotice("\u4e0d\u9700\u8981\u8865\u5145\u9972\u6599"),void l.default.getInstance().dealByItemID(this.config.animal_food_id.id);(t=h.default.getPropCount(this.config.animal_food_id.id))<=0?l.default.getInstance().dealByItemID(this.config.animal_food_id.id):(o=Math.min(t,o),h.default.tryConsumeThing([{file:p.ThingType.normal,id:this.config.animal_food_id.id,num:o}])&&(this.mapObject.data.breedData.addEnergy(e.energy*o),_.ReportData.instance.report_point(100005,41000004)))},v.prototype.update=function(){},v.prototype.getAnimal=function(t){for(var e=0,o=this.nod_ani_layer.children;e<o.length;e++){var n=o[e].getComponent(m.default);if(n&&n.data.index==t)return n}},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],v),r.default=a,cc._RF.pop()},{}],Pig:[function(t,e,o){"use strict";cc._RF.push(e,"cd8bcyUg/JLq7TDkBCeUt1H","Pig");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("GameMgr"),d=i("PropMgr"),h=i("NodePoolItem"),_=i("MathUtils"),f=i("Vec2Utils"),g=i("TaskRecordData");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_tip_pos=null,t.data=null,t.initScale=.6,t.maxScale=1,t.lastScale=0,t.playingAni=!1,t.smallActions=["small_standby","small_walk","small_sleep","small_eat"],t.bigActions=["standby","walk","sleep","eat"],t.posNodes=[],t.isSmall=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=h.NodePoolItem),y.prototype.onEnable=function(){this.spine.setCompleteListener(this.onSpineComplet.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},y.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchChicken,this)},y.prototype.setData=function(t,e,o){this.data=t,this.objectData=o,this.posNodes=e.children,e=this.getRandomPosNode(),this.node.position=e.position,this.updateUI()},y.prototype.updateUI=function(){},y.prototype.update=function(){this.data&&this._updateAni()},y.prototype._updateAni=function(){var t=(this.data.getPeriodTime()-this.data.getLeftTime())/this.data.getPeriodTime();this.lastScale=this.node.scale,this.node.scale=this.initScale+(this.maxScale-this.initScale)*t,this.node.scale<.8?this.playingAni||this.playNormalAni():1==t?this.spine.setAnimation(0,"brood",!0):this.lastScale<.8?this.playAni("standby",!1):this.playingAni||(this.isSmall=!1,this.playNormalAni())},y.prototype.playNormalAni=function(){this.playingAni=!0,this.playNextAni()},y.prototype.onSpineComplet=function(t){t.animation.name,this.playingAni=!1,this.playNormalAni()},y.prototype.playNextAni=function(){var t,e=this,o="";this.isSmall||(t=_.default.randomNum(0,this.bigActions.length-1),o=this.bigActions[t]),"small_walk"==o||"walk"==o?(this.playAni(o,!0),this.scheduleOnce(function(){e.playNextAni()},3)):this.playAni(o,!1)},y.prototype.walk=function(t){var e=this,o=this.getRandomPosNode(),n=f.default.getDistance(cc.v2(this.node.x,this.node.y),cc.v2(o.x,o.y));o.x>this.node.x?this.spine.node.scaleX=-1*Math.abs(this.spine.node.scaleX):this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),cc.tween(this.node).to(n/t,{x:o.x,y:o.y}).call(function(){e.playNextAni()}).start()},y.prototype.getRandomPosNode=function(){return this.posNodes[_.default.randomNum(0,this.posNodes.length-1)]},y.prototype.onTouchChicken=function(){var t=this;if(this.data.canHarvest())if(this.data.isCatch)cc.warn("isCatch",this.data.isCatch);else{var e=this.objectData.breedData.catch(this.data.index);if(e){p.default.fly(this.node,d.default.propItemToGainThing(e.productions)),u.gm.pool.put(this.node);for(var o=0,n=e.productions;o<n.length;o++){var i=n[o];g.default.getInstance().addHarvestRecord(i.id,1),g.default.getInstance().addHarvestCountRecord(i.id,i.num)}}}else{var a=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.nod_tip_pos&&(a=this.nod_tip_pos.convertToWorldSpaceAR(cc.v2(0,0))),u.gm.ui.showModule(u.gm.const.LandTipNew,function(e){e.setData(t.data),e.updatePos(a)})}},y.prototype.playAni=function(t,e){this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],y.prototype,"spine",void 0),s([a(cc.Node)],y.prototype,"nod_tip_pos",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],PlaceMgr:[function(t,e,o){"use strict";cc._RF.push(e,"fbac7P6ofhDe40DsKuHJ6Jr","PlaceMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonUtils"),l=i("ConfigUtils"),p=i("Const"),u=i("GameMgr"),d=i("MapDataHelper"),h=i("Singleton"),_=i("DecorationMgr");function f(){return null!==c&&c.apply(this,arguments)||this}r(f,c=h.default),f.prototype.isBuildingMode=function(){return l.BuildBuildingUtils.status!=p.EnumBuildStatus.None||_.default.status!=p.EnumDecorateStatus.None},f.prototype.removeCollect=function(t){u.gm.localData.removeCollect(t)},f.prototype.checkCanPut=function(t){var e=t.getSeizePos();if(t.isAllInUnlockDistrict()){if(s.default.checkGridsInMainDistrict(e)){if(t.isBuilding())for(var o=0,n=e;o<n.length;o++){var i=n[o];if(d.default.checkMapSeize(i))return!1}else if(u.gm.mapData.obstacleData.checkMapObstacles(e))return!1;return!0}return!1}u.gm.ui.showNotice("\u4e0d\u80fd\u653e\u7f6e\u5728\u672a\u89e3\u9501\u533a\u57df")},r=f,a.default=r,cc._RF.pop()},{}],PlayerBullet:[function(t,e,o){"use strict";cc._RF.push(e,"e6af2WpuyNI4JmjqvXUHJ34","PlayerBullet");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("Utils"),_=i("EventManager"),f=i("Chara");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.icon=null,t._attack=0,t._pChara=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.onCollisionEnter=function(){d.gm.pool.put(this.node),_.default.emit(u.GameEvent.explore_monster_hp,this._attack,this._pChara.getUid())},g.prototype.onEnable=function(){_.default.on("remove_bullet",this.remove_bullet,this)},g.prototype.onDisable=function(){this.unscheduleAllCallbacks(),this.node.stopAllActions(),_.default.off("remove_bullet",this.remove_bullet,this)},g.prototype.remove_bullet=function(){d.gm.pool.put(this.node)},g.prototype.onCollisionExit=function(){},g.prototype.setAttack=function(t,e){this._attack=t,p.default.setBulletSprite(e,this.icon)},g.prototype.bulletMove=function(t){var e=this;this._pChara=t;var o=h.Utils.convertPosAR(t.attack_node,this.pZone.node),n=h.Utils.distance(this.node,o),i=o.sub(this.node.getPosition()),a=h.Utils.vec2ToDegrees(cc.v2(-.5,-.5),cc.v2(i));t=0,(i=this.pZone.getMainChara()).downOrTop==u.EnumDownOrUp.up&&i.leftOrRight==u.EnumLeftOrRight.right?t=155:i.downOrTop==u.EnumDownOrUp.up&&i.leftOrRight==u.EnumLeftOrRight.left?t=300:i.downOrTop==u.EnumDownOrUp.down&&i.leftOrRight==u.EnumLeftOrRight.right?t=120:i.downOrTop==u.EnumDownOrUp.down&&i.leftOrRight==u.EnumLeftOrRight.left&&(t=335),a=180<=(a=t-a)?a-360:a,this.node.angle=t,n/=300,this.node.runAction(cc.spawn(cc.moveTo(n,o),cc.rotateBy(n/3,a))),this.scheduleOnce(function(){d.gm.pool.put(e.node)},n)},s([a(cc.Sprite)],g.prototype,"icon",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],PrayData:[function(t,e,o){"use strict";cc._RF.push(e,"2cc16FLZdFFJ6NGoen6RWeR","PrayData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.PrayStageData=void 0;var a=n("ConfigUtils"),r=n("Formula"),c=n("GameMgr"),s=n("LvMgr"),l=n("MathUtils");function p(){this.curRefreshCount=0,this.gotAwardStage=[],this.items={},this.done={}}p.prototype.isStageDone=function(t){return this.done[t]||(this.done[t]=[]),3<=this.done[t].length},p.prototype.getCurStage=function(){for(var t=0;t<3;t++)if(!this.done[t]||this.done[t].length<3)return t;return-1},p.prototype.isCommit=function(t,e){return this.done[t]||(this.done[t]=[]),this.done[t].includes(e)},p.prototype._getTotalValue=function(){var t=s.default.getInstance().getConfigByExp();return t?t.video_coin.num:0},p.prototype.getStageValue=function(t){var e=l.default.getTotal(c.gm.config.data.Pray[0].stage_rate);return e=this._getTotalValue()*c.gm.config.data.Pray[0].stage_rate[t]/e,Math.round(e)},p.prototype.getItemsByValue=function(t,e){for(var o=t/(e=void 0===e?1:e),n=(o=Math.round(o),[]),i=0,r=c.gm.config.data.PrayNeed;i<r.length;i++){var p=r[i];s.default.getInstance().getLv()>=p.lv&&n.push(p)}for(var u=l.default.randomArr(n,e),d=[],h=0;h<u.length;h++){var _=u[h].id,f=Math.round(o/a.PropUtils.getConfigByPropID(_).shop_price)||1;0<f&&d.push({id:_,num:f})}return d},p.prototype.refreshNewItem=function(t){var e=this.getCurStage(),o=this.getStageValue(e);o=this.getItemsByValue(o,1),this.items[e][t]=o[0]},p.prototype.commit=function(t){var e=this.getCurStage();this.done[e]||(this.done[e]=[]),this.done[e].push(t)},p.prototype.initItems=function(){for(var t=0;t<c.gm.config.data.Pray[0].stage_rate.length;t++){var e=this.getStageValue(t);e=this.getItemsByValue(e,3),this.items[t]=e,this.done[t]=[]}this.gotAwardStage=[],cc.log(this.items)},p.prototype.createRewards=function(t){for(var e=l.default.weight(c.gm.config.data.PrayReward,3),o=[],n=0;n<e.length;n++){var i=e[n],a=l.default.randomNum(i["num_min_"+(t+1)],i["num_max_"+(t+1)]);a=r.Formula.getCountByGainthing([i.item],a),o.push.apply(o,a)}return cc.log(o),o},p.prototype.refresh=function(){this.initItems(),this.curRefreshCount+=1},p.prototype.resetData=function(){this.items={},this.curRefreshCount=0,this.done={},this.gotAwardStage=[],c.gm.ui.closeModule(c.gm.const.PrayUI)},n=p,i.default=n,i.PrayStageData=function(){this.stage_index=0,this.items=[],this.commit_index=[],this.isAward=!1},cc._RF.pop()},{}],PrayHelper:[function(t,e,o){"use strict";cc._RF.push(e,"fd66ak1B5pJxIcGK1rUTQZV","PrayHelper");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("Singleton").default),r=s,c.default=r,cc._RF.pop()},{}],PrayItem:[function(t,e,o){"use strict";cc._RF.push(e,"9f730d02UZFOr8mdEnrrWab","PrayItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonData"),d=i("CommonDiamondNeed"),h=i("CommonUtils"),_=i("ConfigUtils"),f=i("GameMgr"),g=i("PropMgr"),y=i("IconUtils"),m=i("ListItem");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.rich_count=null,t.spr_icon=null,t.nod_done=null,t.nod_buy=null,t.nod_commit=null,t.nod_refresh=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=m.default),v.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},v.prototype.start=function(){},v.prototype.setData=function(t){this.data=t;var e=_.PropUtils.getConfigByPropID(t.id);this.lbl_name.string=e.name,this.rich_count.string=h.default.propNeedStr(t),y.IconUtils.setPropSprite(t.id,this.spr_icon),(e=this.getComponent(d.default))&&e.setData(t),this.nod_done.active=!1,this.nod_commit.active=!1,this.nod_buy.active=!1,this.nod_refresh.active=!1,e=u.default.getInstance().prayData.getCurStage(),u.default.getInstance().prayData.isCommit(e,this.listId)?this.nod_done.active=!0:(this.nod_refresh.active=!0,g.default.getPropCount(t.id)>=t.num?this.nod_commit.active=!0:this.nod_buy.active=!0)},v.prototype.onTouch=function(){cc.log(this.data.id),p.default.getInstance().dealByItemID(this.data.id)},v.prototype.onBtnRefrsh=function(){var t=this;h.default.showVideo(function(){u.default.getInstance().prayData.refreshNewItem(t.listId),f.gm.ui.get_module(f.gm.const.PrayUI).updateUI()})},v.prototype.onBtnCommit=function(){g.default.tryConsume([this.data])&&(u.default.getInstance().prayData.commit(this.listId),f.gm.ui.get_module(f.gm.const.PrayUI).updateUI())},s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.RichText)],v.prototype,"rich_count",void 0),s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),s([a(cc.Node)],v.prototype,"nod_done",void 0),s([a(cc.Node)],v.prototype,"nod_buy",void 0),s([a(cc.Node)],v.prototype,"nod_commit",void 0),s([a(cc.Node)],v.prototype,"nod_refresh",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],PrayStageItem:[function(t,e,o){"use strict";cc._RF.push(e,"59235RxsQRINYKEIg+HFj5n","PrayStageItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonData"),d=i("GameMgr"),h=i("ActionUtils"),_=i("ListItem");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_index_content=null,t.spr_gift=null,t.data=null,t.stage=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=_.default),f.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},f.prototype.start=function(){},f.prototype.setData=function(t){this.stage=t,this.updateUI()},f.prototype.updateUI=function(){for(var t=0;t<3;t++){var e=this.nod_index_content.children[t];e.getChildByName("lbl_index").getComponent(cc.Label).string=t+1+"",(e=e.getChildByName("done")).active=!1,u.default.getInstance().prayData.done[this.stage]||(u.default.getInstance().prayData.done[this.stage]=[]),u.default.getInstance().prayData.done[this.stage].includes(t)&&(e.active=!0)}this.spr_gift.node.active=!0,u.default.getInstance().prayData.isStageDone(this.stage)?u.default.getInstance().prayData.gotAwardStage.includes(this.stage)?(this.spr_gift.node.stopAllActions(),this.spr_gift.node.active=!1):h.default.shake(this.spr_gift.node):this.spr_gift.node.stopAllActions()},f.prototype.onClickGift=function(){var t;u.default.getInstance().prayData.isStageDone(this.stage)&&(u.default.getInstance().prayData.gotAwardStage.includes(this.stage)||(t=u.default.getInstance().prayData.createRewards(this.stage),d.gm.ui.showModule(d.gm.const.GetAwardUI,function(e){e.setVideo(!1),e.setData(t)}),u.default.getInstance().prayData.gotAwardStage.push(this.stage),d.gm.ui.get_module(d.gm.const.PrayUI).updateUI()))},f.prototype.onTouch=function(){cc.log(this.data.id),p.default.getInstance().dealByItemID(this.data.id)},s([a(cc.Node)],f.prototype,"nod_index_content",void 0),s([a(cc.Sprite)],f.prototype,"spr_gift",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],PrayUI:[function(t,e,o){"use strict";cc._RF.push(e,"0fc7cxdtVBBI6EAJjVsHoyV","PrayUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonData"),d=i("CommonItem"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("List"),y=i("EventManager"),m=i("GameModule"),v=i("PrayItem"),b=i("PrayStageItem");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_need_prop=null,t.list_stage=null,t.lbl_refresh_tip=null,t.nod_refresh=null,t.nod_consume_content=null,t.curStage=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=m.default),I.prototype.onEnable=function(){y.default.on(h.GameEvent.updateBase,this.updateUI,this),this.updateUI()},I.prototype.onDisable=function(){y.default.off(h.GameEvent.updateBase,this.updateUI,this)},I.prototype.updateUI=function(){0==Object.values(u.default.getInstance().prayData.items).length&&u.default.getInstance().prayData.initItems(),cc.log(u.default.getInstance().prayData),this.curStage=u.default.getInstance().prayData.getCurStage(),this.list_stage.numItems=3,0<=this.curStage?this.list_need_prop.numItems=u.default.getInstance().prayData.items[this.curStage].length:this.list_need_prop.numItems=0,this.nod_refresh.active=Boolean(this.curStage<0)&&Boolean(_.gm.config.data.Pray[0].refresh[u.default.getInstance().prayData.curRefreshCount]),this.nod_refresh.active&&(this.lbl_refresh_tip.string="\u5269\u4f59\u5237\u65b0\u6b21\u6570\uff1a"+(3-u.default.getInstance().prayData.curRefreshCount),_.gm.config.data.Pray[0].refresh[u.default.getInstance().prayData.curRefreshCount]?this.updateConsumeUI():this.nod_refresh.active=!1)},I.prototype.onRender=function(t,e){t.getComponent(v.default).setData(u.default.getInstance().prayData.items[this.curStage][e])},I.prototype.onRenderStage=function(t,e){t.getComponent(b.default).setData(e)},I.prototype.onBtnRefresh=function(){p.default.click(),_.gm.config.data.Pray[0].refresh[u.default.getInstance().prayData.curRefreshCount]&&(u.default.getInstance().prayData.gotAwardStage.length<3?_.gm.ui.showNotice("\u8bf7\u5148\u9886\u53d6\u5956\u52b1"):f.default.tryConsume([_.gm.config.data.Pray[0].refresh[u.default.getInstance().prayData.curRefreshCount]],!0)&&(u.default.getInstance().prayData.refresh(),this.updateUI()))},I.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;for(var o=f.default.propItemToGainThing([_.gm.config.data.Pray[0].refresh[u.default.getInstance().prayData.curRefreshCount]]),n=0;n<o.length;n++){var i=this.nod_consume_content.children[n];i||(i=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(i,n)),i.getComponent(d.default).canTouch=!1,i.getComponent(d.default).setData(o[n]),i.active=!0}},s([a(g.default)],I.prototype,"list_need_prop",void 0),s([a(g.default)],I.prototype,"list_stage",void 0),s([a(cc.Label)],I.prototype,"lbl_refresh_tip",void 0),s([a(cc.Node)],I.prototype,"nod_refresh",void 0),s([a(cc.Node)],I.prototype,"nod_consume_content",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],PreloadHelper:[function(t,e,o){"use strict";cc._RF.push(e,"5591f80XgBNqIKFoESIJmbx","PreloadHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("AssetMgr"),l=i("Singleton"),p=i("Const"),u=i("GameMgr");function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.load=[u.gm.const.ObjectMgrUI,u.gm.const.UnlockUI,u.gm.const.UnlockDistrictUI,u.gm.const.ChooseProduct,u.gm.const.ChooseFeed,u.gm.const.CompletionUI,u.gm.const.Warehouse,u.gm.const.ToolRoomUI,u.gm.const.MainUI,u.gm.const.MenuUI,u.gm.const.CookUI,u.gm.const.Warehouse,u.gm.const.SignInUI,u.gm.const.Online,u.gm.const.GetToolsUI,u.gm.const.UpgradeView,u.gm.const.MenuGetNew,u.gm.const.DailyTaskUI],t}r(d,c=l.default),d.prototype.preloadOnCartoom=function(){},d.prototype.preloadRes=function(){for(var t=this,e=0,o=0,n=this.load;o<n.length;o++){var i=n[o];s.default.getInstance().preload(i.bundleName,i.loadPath,function(){++e==t.load.length&&cc.log("===================\u9884\u52a0\u8f7d\u5b8c\u6210====================1")})}},d.prototype.preloadPrefabs=function(){s.default.getInstance().preloadBundleDir(p.BundleName.MAIN_UI,"prefabs/buildings",function(){})},r=d,a.default=r,cc._RF.pop()},{}],ProduceData:[function(t,e,o){"use strict";cc._RF.push(e,"a7bfbBFqoVDooONG9+64pCr","ProduceData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.ProduceConfig=void 0;var a=n("StringUtil"),r=n("TimeUtils"),c=n("HouseKeeperMgr"),s=n("ConfigUtils"),l=n("Formula"),p=n("MapDataHelper");function u(){this.beginTime=0,this._tempWarehouse=[],this._leftTime=0,this._isRunning=!1,this.endTime=0,this.pickIDs=[],this.produceConfig=null,this.rate=1}u.prototype.begin=function(t,e,o,n,i){void 0===n&&(n=0),void 0===i&&(i=1),o||cc.error("no produce id",o),this.rate=i,this.beginTime=t,this.produceConfig=d.create(o,i),this.pickIDs=[],this.endTime=e,n&&this.pickIDs.push(n),this.produceID=o,this._isRunning=!0,o=r.default.getTime(),0<this.endTime-o?this._leftTime=this.endTime-o:this._onComplete(),c.default.getInstance().onProduce()},u.prototype.changeEndTime=function(t){this.endTime=t,this._isRunning&&(t=r.default.getTime(),0<this.endTime-t?this._leftTime=this.endTime-t:this._onComplete())},u.prototype.check=function(t){this._isRunning&&(0<this._leftTime?(this._leftTime-=t,this._leftTime=Math.max(this._leftTime,0)):this._onComplete())},u.prototype.getHarvests=function(){return this._tempWarehouse},u.prototype.harvest=function(){for(var t=[],e=0,o=this._tempWarehouse;e<o.length;e++){var n={id:(n=o[e]).id,num:n.num};t.push(n)}return this._tempWarehouse=[],t},u.prototype.pick=function(t){var e=[];if(t)for(var o=0,n=this.produceConfig.getProduction();o<n.length;o++){var i=n[o];i.id==t&&e.push({id:i.id,num:i.num})}return this.pickIDs.push(t),this._updateTempWarehouse(),cc.log(this),e},u.prototype.getCanPickProp=function(t){var e=[];if(t)for(var o=0,n=this.produceConfig.getProduction();o<n.length;o++){var i=n[o];i.id==t&&e.push({id:i.id,num:i.num})}return e},u.prototype._onComplete=function(){this._leftTime=0,this._updateTempWarehouse(),this._isRunning=!1,c.default.getInstance().onProduce()},u.prototype.canHarvest=function(){return 0<this._tempWarehouse.length},u.prototype._updateTempWarehouse=function(){if(0<this.pickIDs.length){this._tempWarehouse=[];for(var t=0,e=this.produceConfig.getProduction();t<e.length;t++){var o=e[t];this.pickIDs.includes(o.id)||this._tempWarehouse.push(o)}}else this._tempWarehouse=this.produceConfig.getProduction()},u.prototype.checkHaveProp=function(t){for(var e=0,o=this._tempWarehouse;e<o.length;e++)if(o[e].id==t)return!0;return!1},u.prototype.getLeftTime=function(){return this._leftTime},u.prototype.getLeftTimeCountDownStr=function(){return a.default.countDownFormat_2(Math.floor(this.getLeftTime()))},n=u,i.default=n;var d=(h.create=function(t,e){void 0===e&&(e=1);var o=new h;return o.produceID=t,o._rate=e,o._config=s.ProduceUtils.getConfigByProduceID(t),o._config||cc.error("not found config",t),o},h.prototype.getID=function(){return this.produceID},h.prototype._getBaseTime=function(){var t=p.default.getDataByID(this._config.build_id),e=this._config.time;return t.isBuilding()&&1==t.type.sub_type&&(e=l.Formula.farmConsumeTime(e)),l.Formula.factoryPeriodTime(e,t)},h.prototype.getProduction=function(){if(0==this._productions.length)for(var t=0,e=this._config.productions;t<e.length;t++){var o={id:(o=e[t]).id,num:o.num*this._rate};this._productions.push(o)}return this._productions},h.prototype.getPeriodTime=function(){return this._init_period||(this._init_period=this._getBaseTime()*this._rate),this._init_period},h.prototype.getMasteryProduce=function(){return this._config.mastery_produce},h);function h(){this._productions=[],this._init_period=0,this._config=null,this._rate=1}i.ProduceConfig=d,cc._RF.pop()},{}],ProductChooseItem:[function(t,e,o){"use strict";cc._RF.push(e,"90b88aypN9DC5Ror1aeYYPM","ProductChooseItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("LvMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("EventManager"),g=i("NodeUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_check=null,t.spr_facade=null,t.lbl_lv=null,t.nod_lock=null,t.lbl_count=null,t.nod_rate=null,t.lbl_rate=null,t.lock=!0,t.selectIndex=0,t.produce_rate=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},y.prototype.onTouch=function(){this.lock||(f.default.emit(p.GameEvent.factory_ui_select,this.listId),this.updateUI())},y.prototype.onDisable=function(){f.default.off(p.GameEvent.updateBase,this.updateUI,this)},y.prototype.setData=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=1),this.produceConfig=t,this.selectIndex=e,this.produce_rate=o,this.updateUI()},y.prototype.updateUI=function(){this.produceConfig.lv_need>u.default.getInstance().getLv()?(this.lbl_lv.string=this.produceConfig.lv_need+"\u7ea7",this.lock=!0):this.lock=!1,this.nod_check&&(this.nod_check.active=Boolean(this.selectIndex==this.listId)),this.nod_lock.active=this.lock,this.lbl_count.node.active=!this.lock,this.lbl_count.string=d.default.getPropCount(this.produceConfig.productions[0].id)+"",g.default.setGray(this.spr_facade.node,this.lock),h.IconUtils.setPropSprite(this.produceConfig.productions[0].id,this.spr_facade),this.nod_rate.active=Boolean(1<this.produce_rate)&&this.listId==this.selectIndex,this.lbl_rate.string="x"+this.produce_rate},s([a(cc.Node)],y.prototype,"nod_check",void 0),s([a(cc.Sprite)],y.prototype,"spr_facade",void 0),s([a(cc.Label)],y.prototype,"lbl_lv",void 0),s([a(cc.Node)],y.prototype,"nod_lock",void 0),s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(cc.Node)],y.prototype,"nod_rate",void 0),s([a(cc.Label)],y.prototype,"lbl_rate",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],PropMgr:[function(t,e,o){"use strict";cc._RF.push(e,"edc4eqp4txOx7c4axE4cjFB","PropMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("EventManager"),p=i("CookMgr"),u=i("DailyTaskData"),d=i("ExploreData"),h=i("FlyHp"),_=i("HeartMgr"),f=i("HouseKeeperMgr"),g=i("ReplacementHelper"),y=i("StrengthMgr"),m=i("TaskRecordData"),v=i("ToolMgr"),b=(i("AppConfig"),i("CommonData")),I=i("CommonUtils"),D=i("ConfigUtils"),C=i("Const"),O=i("GameMgr"),w=i("LvMgr"),M=i("MapDataHelper"),P=i("Utils");function S(){return null!==c&&c.apply(this,arguments)||this}r(S,c=s.default),S.getPropCount=function(t){return O.gm.localData.props[t]||0},S.addProps=function(t,e){if(void 0===e&&(e=!0),t){for(var o=0,n=t;o<n.length;o++){var i=n[o];i.num<0&&O.gm.localData.props[i.id]<Math.abs(i.num)?cc.error("prop not enough",i.id,i.num):(this._addPropByID(i.id,i.num),e&&O.gm.ui.showNotice("\u83b7\u53d6"+D.PropUtils.getConfigByPropID(i.id).name+" x"+i.num))}l.default.emit(C.GameEvent.updateBase)}},S.getConfigByPropID=function(t){var e=O.gm.config.getPropMap();return e[t]||(cc.error("\u9053\u5177\u8868\u6ca1\u6709\u627e\u5230\u8be5id:",t,e),null)},S.getMyPropByType=function(t){var e,o,n=[];for(e in O.gm.localData.props)0<this.getPropCount(Number(e))&&(!t||(o=this.getConfigByPropID(Number(e)))&&t.includes(o.prop_type))&&(o={id:Number(e),num:this.getPropCount(Number(e))},n.push(o));return n},S.checkBagEnough=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=1),!t)return!0;for(var n=0,i=t;n<i.length;n++){var a=i[n];if((a.num*o>Math.floor(a.num*o)?Math.floor(a.num*o)+1:Math.floor(a.num*o))>S.getPropCount(a.id))return e&&O.gm.ui.showNotice(S.getConfigByPropID(a.id).name+"\u4e0d\u8db3"),!1}return!0},S.getWarehouseCount=function(){var t,e=0;for(t in O.gm.localData.props)1==S.getConfigByPropID(Number(t)).prop_type&&(e+=S.getPropCount(Number(t)));return e},S.getWarehouseLimit=function(){return D.ConfigUtils.WarehouseDataUtils.getConfig(O.gm.localData.warehouseLv).warehouse_number},S.checkWarehouseLimit=function(){return!0},S.getNotEnougthItem=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=1),!t)return null;for(var n=0,i=t;n<i.length;n++){var a=i[n];if((a.num*o>Math.floor(a.num*o)?Math.floor(a.num*o)+1:Math.floor(a.num*o))>S.getPropCount(a.id))return e&&O.gm.ui.showNotice(S.getConfigByPropID(a.id).name+"\u4e0d\u8db3"),a}return null},S.tryConsume=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=1),!t)return!0;for(var n=0,i=t;n<i.length;n++)if((p=(s=i[n]).num*o>Math.floor(s.num*o)?Math.floor(s.num*o)+1:Math.floor(s.num*o))>S.getPropCount(s.id))return s.id==C.CommonPropID.diamond?O.gm.ui.showModule(O.gm.const.GetStrengthUI,function(t){t.setData(3)}):s.id==C.CommonPropID.heart?O.gm.ui.showModule(O.gm.const.GetStrengthUI,function(t){t.setData(4)}):s.id==C.CommonPropID.coin?O.gm.ui.showModule(O.gm.const.GetStrengthUI,function(t){t.setData(2)}):s.id==C.CommonPropID.bbq_star?O.gm.ui.showModule(O.gm.const.GetStrengthUI,function(t){t.setData(5)}):s.id==C.CommonPropID.ticket?O.gm.ui.showModule(O.gm.const.ShopBuyTicket,function(t){t.setData([1,5,10])}):e&&O.gm.ui.showNotice(S.getConfigByPropID(s.id).name+"\u4e0d\u8db3"),l.default.emit(C.GameEvent.prop_not_enougth,s.id),!1;for(var a=[],r=0,c=t;r<c.length;r++){var s,p=(s=c[r]).num*o>Math.floor(s.num*o)?Math.floor(s.num*o)+1:Math.floor(s.num*o),u={id:s.id,num:-p};a.push(u)}return S.addProps(a,!1),!0},S.tryConsumeThing=function(t,e){if(void 0===e&&(e=!1),!t)return!0;for(var o=0,n=t;o<n.length;o++){var i=n[o];if(1!=i.file)return cc.error("consume error",i),!1}return this.tryConsume(t,e)},S._addPropByID=function(t,e){if(Number.isInteger(e))if(0!=e){var o=this.getConfigByPropID(t);if(o){if(t==C.CommonPropID.strength)return y.default.getInstance().addStrength(e),void l.default.emit(C.GameEvent.updateBase);t!=C.CommonPropID.daily_task_energy?(t==C.CommonPropID.auto_collect&&(O.gm.localData.autoCollectTime+=e,O.gm.localData.autoCollectTotalTime+=e,O.gm.localData.autoCollectState=I.default.isInExplore()?1:0,O.gm.localData.saveByKey("autoCollectTotalTime")),this.checkFindProp(t)||31!=o.prop_type||O.gm.ui.showModule(O.gm.const.MenuGetNew,function(e){e.setData([{file:C.ThingType.normal,id:t}])}),O.gm.localData.props[String(t)]?O.gm.localData.props[String(t)]+=e:O.gm.localData.props[String(t)]=e,f.default.getInstance().onPropChange(t),t==C.CommonPropID.exp?w.default.getInstance().onChangeExp():t==C.CommonPropID.cook_value?p.default.getInstance().addCookValue(e):t==C.CommonPropID.sandglass&&e<0&&(m.default.getInstance().addConsumeRecord(t,Math.abs(e)),l.default.emit(C.GameEvent.updateBase)),2==o.prop_type&&setTimeout(function(){M.default.checkCanUpgradeDecoration()},100),(o=v.default.getInstance().getConfigByID(t))&&O.gm.localData.setToolsLv(o.tool_class,o.lv,o.tool_use_time),0<e&&m.default.getInstance().addNewProp(t,e),l.default.emit(C.GameEvent.updateFloatUI,t,e),O.gm.localData.saveByKey("props")):u.DailyTaskData.getInstance().addPoint(e)}else cc.error("config not found",t)}else cc.warn("add prop count = 0",t,e);else cc.warn("count \u4e0d\u662f\u6574\u6570",e)},S.mergeItems=function(t){for(var e={},o=0,n=t;o<n.length;o++){var i=n[o];e[i.id]?e[i.id]+=i.num:e[i.id]=i.num}var a,r=[];for(a in e)r.push({id:Number(a),num:e[a]});return r},S.countItemsPrice=function(t,e){void 0===e&&(e=C.SellType.normal);for(var o=0,n=0,i=t;n<i.length;n++){var a=i[n],r=S.getConfigByPropID(a.id);e==C.SellType.normal?o+=r.simple_price*a.num:e==C.SellType.shop?o+=r.shop_price*a.num:cc.error("sell; to do")}return o},S.sellByBag=function(t,e,o,n){void 0===e&&(e=C.SellType.normal),void 0===o&&(o=0);var i=S.tryConsume(t,!1,n=void 0===n?1:n);return i&&((n={}).id=C.CommonPropID.coin,n.num=0<o?o:S.countItemsPrice(t,e),S.addProps([n])),i},S.useByBag=function(t){for(var e=0,o=t;e<o.length;e++){var n=function(t){var e=S.getConfigByPropID(t.id);if(e.prop_type==C.CommonPropID.max_hp){if(y.default.getInstance().getCurHp()+e.energy*t.num>w.default.getInstance().getHpMax())return O.gm.ui.showNotice("\u8840\u91cf\u8d85\u51fa\u4e0a\u9650"),{value:void 0};O.gm.pool.async_get(C.BundleName.MAIN_UI,"prefabs/explore/fly_hp",h.default,function(o){o.set_hp_node(0,0,-e.energy*t.num);var n=O.gm.ui.get_module(O.gm.const.Explore);n&&n.node.active&&(n.getMainChara().node.addChild(o.node),n.getMainChara().animation.play())})}}(c=o[e]);if("object"==typeof n)return n.value}var i=S.tryConsume(t);if(i){for(var a=0,r=t;a<r.length;a++){var c=r[a],s=S.getConfigByPropID(c.id);s.id==C.CommonPropID.max_power?(O.gm.localData.addStrength+=s.energy*c.num,y.default.getInstance().autoAddStrength(s.energy*c.num),y.default.getInstance().saveStrengthAdd()):s.id==C.CommonPropID.max_hp?(O.gm.localData.addHp+=s.energy*c.num,y.default.getInstance().autoAddHp(s.energy*c.num),y.default.getInstance().saveHpAdd()):s.id==C.CommonPropID.add_hp&&y.default.getInstance().autoAddHp(s.energy*c.num)}l.default.emit(C.GameEvent.updateBase)}return i},S.propItemToGainThing=function(t){for(var e=[],o=0,n=t;o<n.length;o++){var i={file:1,id:(i=n[o]).id,num:i.num};e.push(i)}return e},S.setItemsRate=function(t,e){void 0===e&&(e=1);for(var o=0,n=t;o<n.length;o++)n[o].num*=e},S.addGainThing=function(t,e){void 0===e&&(e=!0);for(var o=0,n=t;o<n.length;o++){var i,a=n[o];if(a.file!=C.ThingType.normal&&a.file)if(a.file==C.ThingType.mapObject)for(var r=0;r<a.num;r++){var c=D.BigMapConfigUtils.getConfig(a.id);c&&Number(c.type.main_type)==C.EnumObjectType.petRoomItem?O.gm.localData.explore_data.addPetProp(a.id):I.default.addDecoration(a.id,e)}else a.file==C.ThingType.menu?(i=D.ConfigUtils.FoodMenuUtils.getConfigByID(a.id))&&(i.learn_cost?O.gm.localData.unlockFoodMenu(a.id):O.gm.localData.learnFoodMenu(a.id)):a.file!=C.ThingType.replacement||b.default.getInstance().my_dress.includes(String(a.id))||(b.default.getInstance().my_dress.push(String(a.id)),i=g.default.getInstance().getConfigById(String(a.id)),e&&O.gm.ui.showNotice("\u83b7\u5f97"+i.name),P.Utils.broadWorld(C.BroadTypeEnum.BroadCloth,0,i.name));else S.addProps([{id:a.id,num:a.num}],e)}},S.tryToBuy=function(t,e,o){if(void 0===o&&(o=!1),e.file!=C.ThingType.mapObject&&e.file!=C.ThingType.menu){var n=this.tryConsume([e],o);return n&&(m.default.getInstance().addBuyProp(t.id,t.num),this.addGainThing([t],o)),n}O.gm.ui.showNotice("\u4e0d\u652f\u6301\u4ee5\u8be5\u7269\u4ef6\u7f6e\u6362\u7269\u54c1"+e.file)},S.checkFindProp=function(t){for(var e in O.gm.localData.props)if(Number(e)==t)return!0;return!1},S.updatePetDecorate=function(t,e,o){for(var n,i=!1,a=0;a<O.gm.localData.explore_data.pet_decorate_data.length;++a)O.gm.localData.explore_data.pet_decorate_data[a].type_id==t&&O.gm.localData.explore_data.pet_decorate_data[a].index==o&&(i=!0,O.gm.localData.explore_data.pet_decorate_data[a].decorate_id=e,l.default.emit(C.GameEvent.change_pet_decorate,t));i||((n=new d.PetRoomDecorateData).decorate_id=e,n.type_id=t,n.index=o,O.gm.localData.explore_data.pet_decorate_data.push(n)),O.gm.localData.saveByKey("explore_data"),_.default.getInstance().setDirty(!0)},S.upgradePetDecorate=function(t){O.gm.localData.explore_data.pet_props[t]&&(O.gm.localData.explore_data.pet_props[t].level++,_.default.getInstance().setDirty(!0),O.gm.localData.saveByKey("explore_data"))},r=S,a.default=r,cc._RF.pop()},{}],QQMiniGame:[function(t,e,o){"use strict";cc._RF.push(e,"982felGWbBMtq5VhAiiMxWI","QQMiniGame");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.QQMiniGame=void 0;var a=n("GameMgr"),r=n("ChannelManager"),c=n("Utils"),s=n("NetUtils");function l(){this._min_banner_ad_width=300,this._banner_ad_id_array=[],this._create_banner_count=0,this._video_ad_id="",this._interstitial_ad_id="",this._app_box_ad_id="",this._banner_ad=null,this._is_show_banner_ad=!1,this._video_ad=null,this._video_cb=null,this._video_cb_target=null,this._interstitial_ad=null,this._interstitial_ad_loaded=!1,this._app_box=null,this._app_box_loaded=!1,this._share_config_url="https://leduo.zqygame.com/res/leduo/panda_qq/share.json",this._chmhtxd_share_config_url="https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/03_qq/share.json",this._share_array=[],this._default_share={title:"\u68ee\u6797\u63a2\u9669\uff0c\u5236\u4f5c\u7f8e\u98df\uff0c\u62db\u5ba2\u63fd\u5ba2~",url:"https://leduo.zqygame.com/res/leduo/panda/share/11.jpg"},this._chmhtxd_default_share={title:"\u68ee\u6797\u63a2\u9669\uff0c\u5236\u4f5c\u7f8e\u98df\uff0c\u62db\u5ba2\u63fd\u5ba2~",url:"https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/03_qq/share/11.jpg"},this.qq_number=0,this.is_bdd=0,this.edtion="",this.data_code_is_show=!1,this.qq_code_copy=!0,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_set_ui_update=!0,this.is_show_nick_name=!0,this.is_show_active_btn=!0}Object.defineProperty(l,"instance",{get:function(){return this._instance||(this._instance=new l),this._instance},enumerable:!1,configurable:!0}),l.prototype.load_channel_env=function(t){return window.qq.onHide(function(){}),window.qq.onShow(function(){}),this._banner_ad_id_array=["22c69a3741ae70d4d67d72d57ad61bb3"],this._video_ad_id="a6272452a14efff959f6789e5aeb666d",this._interstitial_ad_id="",this._app_box_ad_id="",console.log("qq:"+JSON.stringify(window.qq)),window.qq.login({success:function(e){e.code?(console.log("\u767b\u5f55\u6210\u529f\uff01"+e.code),t(e.code)):console.log("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg)}}),this._share_array=r.ChannelManager.SHARE_CONFIG.share_array,this.load_share_config(),this.show_share_menu(),this.create_video_ad(),!0},Object.defineProperty(l.prototype,"is_rank",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_share",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.get_data_code_is_show=function(){return this.data_code_is_show},l.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},l.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},l.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},l.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},l.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},l.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},l.prototype.get_edtion=function(){return this.edtion},l.prototype.load_share_config=function(){var t=this;qq.request({url:(a.gm.const.IS_GAME_XMCT?t._share_config_url:t._chmhtxd_share_config_url)+"?"+Date.now(),method:"GET",header:{"content-type":"application/json"},success:function(e){console.log("game.login requestSuc para2:",e),"data"in e&&("qq_number"in e.data&&(t.qq_number=e.data.qq_number),"is_bdd"in e.data&&(t.is_bdd=e.data.is_bdd),"data_code_is_show"in e.data&&(t.data_code_is_show=e.data.data_code_is_show),"qq_code_copy"in e.data&&(t.qq_code_copy=e.data.qq_code_copy),"prase_percent_and"in e.data&&(t.prase_percent_and=e.data.prase_percent_and),"prase_percent_ios"in e.data&&(t.prase_percent_ios=e.data.prase_percent_ios),"is_show_nick_name"in e.data&&(t.is_show_nick_name=e.data.is_show_nick_name),"is_show_set_ui_update"in e.data&&(t.is_show_set_ui_update=e.data.is_show_set_ui_update),"is_show_active_btn"in e.data&&(t.is_show_active_btn=e.data.is_show_active_btn),"edtion"in e.data&&(t.edtion=e.data.edtion,t.edtion==a.gm.const.VERSION_NUMBER?("is_bdd1"in e.data&&(t.is_bdd=e.data.is_bdd1),"qq_code_copy1"in e.data&&(t.qq_code_copy=e.data.qq_code_copy1),"is_show_active_btn1"in e.data&&(t.is_show_active_btn=e.data.is_show_active_btn1),"is_show_nick_name1"in e.data&&(t.is_show_nick_name=e.data.is_show_nick_name1),"is_show_set_ui_update1"in e.data&&(t.is_show_set_ui_update=e.data.is_show_set_ui_update)):"is_bdd"in e.data&&(t.is_bdd=e.data.is_bdd)),console.log("this._share_title_array:%s,this._follow_name:%s,this._douYinFollowBtnStat:%s",t._share_title_array,t._follow_name,t._douYinFollowBtnStat),console.log("this.tuoTiaoFollowX:%s,this.tuoTiaoFollowY:%s",t.tuoTiaoFollowX,t.tuoTiaoFollowY))},fail:function(t){console.log("tt.login requestFail para1:",t)}})},l.prototype.show_share_menu=function(){window.qq.showShareMenu({});var t=this;return window.qq.onShareAppMessage(function(){var e;return{title:(e=0==t._share_array.length?a.gm.const.IS_GAME_XMCT?t._default_share:t._chmhtxd_default_share:(e=c.Utils.math_random(!0,0,t._share_array.length),t._share_array[e])).title,imageUrl:e.url,query:"key1=val1&key2=val2"}}),!0},l.prototype.load_sub_packages_env=function(t){return t(),!0},l.prototype.analyzeUrlPram=function(){return!0},l.prototype.get_app_name=function(){return r.ChannelManager.APP_QQ},l.prototype.get_url=function(){return a.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},l.prototype.vibrate_short=function(){qq.vibrateShort&&qq.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},l.prototype.vibrate_long=function(){qq.vibrateLong&&qq.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},Object.defineProperty(l.prototype,"is_support_more_game",{get:function(){return"ios"!=window.qq.getSystemInfoSync().platform&&!!(window.qq.navigateToMiniProgram&&window.qq.onNavigateToMiniProgram&&window.qq.showMoreGamesModal)},enumerable:!1,configurable:!0}),l.prototype.show_more_game=function(t,e){this.is_support_more_game&&(window.qq.onMoreGamesModalClose(function(t){console.log("modal closed",t)}),window.qq.onNavigateToMiniProgram(function(t){console.log(t.errCode),console.log(t.errMsg)}),window.qq.showMoreGamesModal({appLaunchOptions:[],success:function(o){console.log("success",o.errMsg),t&&e&&t.call(e,0)},fail:function(o){console.log("fail",o.errMsg),t&&e&&t.call(e,1)}}))},l.prototype.share_req=function(t,e){var o=0==this._share_array.length?a.gm.const.IS_GAME_XMCT?this._default_share:this._chmhtxd_default_share:(o=c.Utils.math_random(!0,0,this._share_array.length),this._share_array[o]);return window.qq.shareAppMessage&&o&&window.qq.shareAppMessage({title:o.title,imageUrl:o.url,success:function(o){console.log("\u8f6c\u53d1\u5230\u7fa4\u7684\u7ed3\u679c"),console.log(o),t.call(e)},fail:function(t){console.log(t)}}),!0},l.prototype.loginReport=function(){},l.prototype.create_banner_ad=function(){var t,e,o,n,i,a=this;window.qq&&(t=window.qq.getSystemInfoSync(),e=t.windowWidth,o=t.windowHeight,n=this._create_banner_count%this._banner_ad_id_array.length,i=window.qq.createBannerAd({adUnitId:this._banner_ad_id_array[n],adIntervals:40,style:{width:this._min_banner_ad_width,top:o,left:(e-this._min_banner_ad_width)/2}}),this._banner_ad&&this._banner_ad.destroy(),(this._banner_ad=i).onLoad(function(){console.log("banner ad id:"+a._banner_ad_id_array[n]+" onLoad"),a._is_show_banner_ad&&i&&i.show().then(function(){a._is_show_banner_ad?console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f"):(i.destroy(),console.log("\u5e7f\u544a\u663e\u793a\u6162\u4e86\uff0c\u4e0d\u9700\u8981\u663e\u793a\u4e86"))}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)})}),i.onResize(function(t){i.style.left=(e-t.width)/2,i.style.top=o-t.height,console.log("banner_ad.onResize:",t.width,t.height);var n=cc.view.getDevicePixelRatio(),a=cc.view.getScaleX();console.log("banner need design size:",t.width*n/a,t.height*n/a)}),this._create_banner_count++)},l.prototype.show_banner_ad=function(){this._is_show_banner_ad=!0,this.create_banner_ad()},l.prototype.hide_banner_ad=function(){this._is_show_banner_ad=!1;var t=this._banner_ad;t&&t.destroy()},l.prototype.clipBoard=function(t,e){qq.setClipboardData({data:t,success:function(){e()}})},l.prototype.create_video_ad=function(){var t;null!=window.qq.createRewardedVideoAd&&(this._video_ad=window.qq.createRewardedVideoAd({adUnitId:this._video_ad_id}),(t=this)._video_ad.onClose(function(e){if(e.isEnded){console.log("\u89c6\u9891\u5e7f\u544a\u89c2\u770b\u5b8c\u6210"),TaskManager.instance.checkTask(TaskConditionTypeEnum.TASK_CONDITION_TYPE_VIDEO,[0],1),a.gm.data.start_data.today_video_count++,a.gm.data.start_data.total_video_count++;for(var o=0;o<a.gm.const.VIDEO_REPORT_COUNT_PER_DAY.length;++o)if(a.gm.data.start_data.today_video_count==a.gm.const.VIDEO_REPORT_COUNT_PER_DAY[o]){s.ReportData.instance.ui_report(VideoReportTypeEnum.VIDEO_REPORT_TYPE_VIDEO+o,a.gm.data.start_data.today_video_count);break}a.gm.data.start_data.async_write_data(),s.ReportData.instance.report_point(19),cc.game.resume(),a.gm.data.video_state=0,a.gm.audio.resume_current_music(),t._video_cb.apply(t._video_cb_target)}else console.log("\u89c6\u9891\u5e7f\u544a\u89c2\u770b\u4e2d\u65ad"),a.gm.ui.show_notice(c.Utils.language_string_change(LanguageTypeEnum.TEXT_8)),cc.game.resume(),a.gm.data.video_state=0,a.gm.audio.resume_current_music(),a.gm.ui.emit("cancel_watch_ad")}))},l.prototype.show_video_ad=function(t,e){var o=this,n=a.gm.audio.music_mute,i=a.gm.audio.effect_mute;if(a.gm.audio.set_music(!0),a.gm.audio.set_effect_mute(!0),this._video_cb=t,this._video_cb_target=e,a.gm.data.start_data.today_video_laqi_count++,a.gm.data.start_data.total_video_laqi_count++,!this._video_ad)return a.gm.ui.show_notice(c.Utils.language_string_change(LanguageTypeEnum.TEXT_9)),void cc.game.resume();this._video_ad.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),o._video_ad.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){a.gm.audio.set_music(n),a.gm.audio.set_effect_mute(i),a.gm.data.video_state=0,s.ReportData.instance.report_point(VideoReportTypeEnum.VIDEO_REPORT_TYPE_FAIL_VIDEO),a.gm.ui.emit("cancel_watch_ad"),console.log("\u91cd\u8bd5\uff0c\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),a.gm.ui.set_module_args(a.gm.const.VIDEO_NOTICE.key,{data:1}),a.gm.ui.show_panel(a.gm.const.VIDEO_NOTICE)})}).catch(function(){a.gm.audio.set_music(n),a.gm.audio.set_effect_mute(i),a.gm.data.video_state=0,s.ReportData.instance.report_point(VideoReportTypeEnum.VIDEO_REPORT_TYPE_FAIL_VIDEO),a.gm.ui.emit("cancel_watch_ad"),console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),a.gm.ui.set_module_args(a.gm.const.VIDEO_NOTICE.key,{data:1}),a.gm.ui.show_panel(a.gm.const.VIDEO_NOTICE)})},l.prototype.create_app_box_ad=function(){var t=this;qq.createAppBox?(this._app_box=qq.createAppBox({adUnitId:this._app_box_ad_id}),this._app_box.load().then(function(){t._app_box_loaded=!0}).catch(function(t){console.error(t)})):console.log("\u4e0d\u652f\u6301\u5e7f\u544a\u76d2\u5b50\uff0c\u8bf7\u5347\u7ea7QQ")},Object.defineProperty(l.prototype,"is_support_app_box",{get:function(){return!!qq.createAppBox},enumerable:!1,configurable:!0}),l.prototype.show_app_box_ad=function(){var t=this;qq.createAppBox?this._app_box_loaded&&this._app_box?this._app_box.show().then(function(){t._app_box_loaded=!0,console.log("\u663e\u793a\u5e7f\u544a\u76d2\u5b50")}).catch(function(t){console.error(t)}):(this.create_app_box_ad(),console.log("_app_box_loaded:"+this._app_box_loaded)):console.log("\u4e0d\u652f\u6301\u5e7f\u544a\u76d2\u5b50\uff0c\u8bf7\u5347\u7ea7QQ")},l.prototype.create_interstitial_ad=function(){var t=this;qq.createInterstitialAd&&(this._interstitial_ad=window.qq.createInterstitialAd({adUnitId:this._interstitial_ad_id}),this._interstitial_ad.load().catch(function(t){console.error("load",t)}),this._interstitial_ad.onLoad(function(){t._interstitial_ad_loaded=!0}),this._interstitial_ad.onClose(function(){console.log("close event emit")}),this._interstitial_ad.onError(function(t){console.log("error",t)}))},Object.defineProperty(l.prototype,"is_support_interstitial_ad",{get:function(){return qq.createInterstitialAd?(console.log("is_support_interstitial_ad: true"),!0):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),l.prototype.show_interstitial_ad=function(t,e){this._interstitial_ad&&this._interstitial_ad_loaded&&this._interstitial_ad.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u6210\u529f"),t&&e&&t.call(e,0)}).catch(function(o){console.error("show",o),t&&e&&t.call(e,1)})},l.prototype.set_rank_value=function(){var t={qqgame:{score:0,update_time:Math.floor((new Date).getTime()/1e3)},cost_time:0};window.qq.setUserCloudStorage({KVDataList:[{key:"level",value:JSON.stringify(t)}]}),cc.log("\u4e0a\u62a5\u6392\u884c\u6570\u636e")},l.prototype.get_rank_data=function(){return window.qq.getOpenDataContext().postMessage({message:1}),!0},l.prototype.set_rank_close=function(){window.qq.getOpenDataContext().postMessage({message:99})},l.prototype.on_rank_pre_page_click=function(){window.qq.getOpenDataContext().postMessage({message:100})},l.prototype.on_rank_next_page_click=function(){window.qq.getOpenDataContext().postMessage({message:101})},l.prototype.get_self_rank_data=function(){return window.qq&&window.qq.getOpenDataContext().postMessage({message:300}),!0},l.prototype.set_self_rank_close=function(){window.qq&&window.qq.getOpenDataContext().postMessage({message:301})},l.prototype.clear_cache=function(){window.wxDownloader&&(window.wxDownloader.cleanAllAssets(),console.log("delete cache success"))},l._instance=null,l.ad_enable=!0,n=l,i.QQMiniGame=n,cc._RF.pop()},{}],RedDotComponent:[function(t,e,o){"use strict";cc._RF.push(e,"b5116DOXPlCIqhK02+NhhMn","RedDotComponent");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("RedDotMgr"),u=i("RedDotStaticConfig");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t._dotName="",t.numLabel=null,t.sprite=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=cc.Component),Object.defineProperty(d.prototype,"dotName",{get:function(){return this._dotName},set:function(t){this._dotName=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"offsetX",{get:function(){return this.node.x},set:function(t){this.node.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"offsetY",{get:function(){return this.node.y},set:function(t){this.node.y=t},enumerable:!1,configurable:!0}),d.prototype.onLoad=function(){cc.director.on(u.EVENT_RED_DOT_REFRESH,this.doAction.bind(this),this)},d.prototype.onDestroy=function(){cc.director.off(u.EVENT_RED_DOT_REFRESH,this.doAction.bind(this),this)},d.prototype.refresh=function(){var t=p.default.getInstance().getNodeByName(this.dotName),e=!1,o=0;t&&(e=(t=t.getResult())[0],o=t[1]),this.numLabel&&(this.numLabel.string=o.toString()),this.node.active=e},d.prototype.doAction=function(){var t=this,e=p.default.getInstance().getNodeByName(this.dotName),o=0;e&&((e=e.getResult())[0],o=e[1]),o=o.toString(),this.numLabel&&o!=this.numLabel.string?(this.node.scale=1,cc.tween(this.node).to(.2,{scaleX:0}).call(function(){t.refresh()}).to(.2,{scaleX:1}).start()):this.refresh()},s([a({type:cc.Label})],d.prototype,"numLabel",void 0),s([a({type:cc.Sprite})],d.prototype,"sprite",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],RedDotMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5cb764Fv1NKUq7tm4p8ycJ0","RedDotMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("RedDotNode"),p=i("RedDotStaticConfig");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.nodeRoot=new l.default("nodeRoot"),t.nodeMap=null,t}r(u,c=s.default),u.prototype.init=function(){null==this.nodeMap&&(this.nodeMap=this._createWithConfig(p.default),this.nodeMap[this.nodeRoot.name]=this.nodeRoot)},u.prototype._createWithConfig=function(t){var e,o={};for(e in t){var n=t[e],i=new l.default(e);n.func&&(i.setCalculateFunc(n.func),n.param&&i.setCalculateParam(n.param)),o[e]=i}for(e in o){var a=t[e],r=null;(r=a&&"string"==typeof a.parent&&0<a.parent.length?o[a.parent]:this.nodeRoot)&&r.addChild(o[e])}return o},u.prototype.createWithConfig=function(t){for(var e in this.init(),t)if(null!=this.nodeMap[e])throw"\u91cd\u590d";var o=this._createWithConfig(t);for(e in o)this.nodeMap[e]=o[e]},u.prototype.getNodeByName=function(t){return this.nodeMap[t]},u.prototype.reCalculate=function(t){(t=this.getNodeByName(t))&&(t.clearResult_Children(),t.clearResult_Parent(),this.nodeRoot.getResult(),cc.director.emit(p.EVENT_RED_DOT_REFRESH))},r=u,(a.default=r).getInstance().init(),cc._RF.pop()},{}],RedDotNode:[function(t,e,o){"use strict";cc._RF.push(e,"a6d6ffj7jhLWL4JI0xhcUec","RedDotNode");var n=o;function i(t){this.name=null,this.parent=null,this.children=new Map,this.showRedPoint=null,this.redPointCount=null,this.calculateFunc=null,this.calculateParam=null,this.name=t}Object.defineProperty(n,"__esModule",{value:!0}),i.prototype.getDepth=function(){return this.parent?this.parent.getDepth()+1:0},i.prototype.setParent=function(t){var e=this.parent;e&&e.removeChild(this),this.parent=t},i.prototype.addChild=function(t){t&&(this.children.has(t.name)||(t.setParent(this),this.children.set(t.name,t)))},i.prototype.removeChild=function(t){t&&this.children.has(t.name)&&this.children.delete(t.name)},i.prototype.setCalculateFunc=function(t){"function"==typeof t&&(this.calculateFunc=t)},i.prototype.setCalculateParam=function(t){void 0!==t&&null!=t&&(this.calculateParam=t)},i.prototype.clearResult=function(){this.showRedPoint=null,this.redPointCount=null},i.prototype.clearResult_Children=function(){this.clearResult(),this.children.forEach(function(t){t.clearResult_Children()})},i.prototype.clearResult_Parent=function(){this.clearResult();var t=this.parent;t&&t.clearResult_Parent()},i.prototype.getResult=function(){var t,e;return null!=this.showRedPoint&&null!=this.redPointCount||("function"==typeof this.calculateFunc?(t=this.calculateFunc(this.calculateParam),this.showRedPoint=t[0],this.redPointCount=t[1]):(e=0,this.children.forEach(function(t){t=(o=t.getResult())[0];var o=o[1];t&&(e+=o)}),this.showRedPoint=0<e,this.redPointCount=e)),[this.showRedPoint,this.redPointCount]},n.default=i,cc._RF.pop()},{}],RedDotStaticConfig:[function(t,e,o){"use strict";cc._RF.push(e,"47279xQgAFN/I2JU/0fIRhn","RedDotStaticConfig");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.EVENT_RED_DOT_REFRESH=void 0;var a=n("HouseKeeperMgr");n={nod_root:{parent:null},nod_daily_task:{parent:"nod_root",func:function(){return a.default.getInstance().checkDailyTask()?[!0,1]:[!1,0]}},nod_sign_in:{parent:"nod_root",func:function(){return a.default.getInstance().checkSignIn()?[!0,1]:[!1,0]}},nod_keeper:{parent:"nod_root"},nod_feed:{parent:"nod_keeper"},nod_10021:{parent:"nod_feed",func:function(){return a.default.getInstance().checkAnimal(10021)?[!0,1]:[!1,0]}},nod_10022:{parent:"nod_feed",func:function(){return a.default.getInstance().checkAnimal(10022)?[!0,1]:[!1,0]}},nod_10023:{parent:"nod_feed",func:function(){return a.default.getInstance().checkAnimal(10023)?[!0,1]:[!1,0]}},nod_10024:{parent:"nod_feed",func:function(){return a.default.getInstance().checkAnimal(10024)?[!0,1]:[!1,0]}},nod_factory:{parent:"nod_keeper"},nod_10041:{parent:"nod_factory",func:function(){return a.default.getInstance().checkNormalFactory(10041)?[!0,1]:[!1,0]}},nod_10042:{parent:"nod_factory",func:function(){return a.default.getInstance().checkNormalFactory(10042)?[!0,1]:[!1,0]}},nod_10043:{parent:"nod_factory",func:function(){return a.default.getInstance().checkNormalFactory(10043)?[!0,1]:[!1,0]}},nod_10044:{parent:"nod_factory",func:function(){return a.default.getInstance().checkNormalFactory(10044)?[!0,1]:[!1,0]}},nod_shop:{parent:"nod_keeper"},nod_10415:{parent:"nod_shop",func:function(){return a.default.getInstance().checkMainHouse()?[!0,1]:[!1,0]}},nod_10071:{parent:"nod_shop",func:function(){return a.default.getInstance().checkStall()?[!0,1]:[!1,0]}},nod_10072:{parent:"nod_shop",func:function(){return a.default.getInstance().checkBBQ()?[!0,1]:[!1,0]}},nod_top_vegetable:{parent:"nod_keeper",func:function(){return a.default.getInstance().checkVegetable()?[!0,1]:[!1,0]}},nod_top_factory:{parent:"nod_keeper",func:function(){return a.default.getInstance().checkTopFactory()?[!0,1]:[!1,0]}},nod_online:{parent:"nod_root",func:function(){return a.default.getInstance().checkOnlineRed()?[!0,1]:[!1,0]}}},i.EVENT_RED_DOT_REFRESH="event_red_dot_refresh",i.default=n,cc._RF.pop()},{}],RegisterUI:[function(t,e,o){"use strict";cc._RF.push(e,"f7c7fpUJTtD/5D4xmOC1xEj","RegisterUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("ReplacementModel"),f=i("Utils"),g=i("GameModule"),y=i("NetUtils");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.name_input_code=null,t.input_edit=null,t.name_lbl=null,t.girl_spine=null,t.boy_spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.onLoad=function(){l.prototype.onLoad.call(this),y.ReportData.instance.report_point(10022)},m.prototype.onEnable=function(){var t=this;this.name_input_code.active=!1,this.RandomName(),_.default.createBySpine(this.girl_spine,p.default.boyInitDress[0]),_.default.createBySpine(this.boy_spine,p.default.boyInitDress[1]),this.boy_spine.node.color=(new cc.Color).fromHEX("#B8B8B8"),this.girl_spine.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.girl_spine.setAnimation(0,"dialogue_01",!1),this.scheduleOnce(function(){t.girl_spine.setAnimation(0,"standby",!0)},1)},m.prototype.onDisable=function(){},m.prototype.RandomName=function(){var t=d.gm.config.getRandomNameConfigAry(),e=f.Utils.math_random(!0,0,t.length);d.gm.localData.nick_name=t[e].name,d.gm.localData.saveByKey("nick_name"),this.name_lbl.string=t[e].name},m.prototype.onClickOpenChangeName=function(){this.name_input_code.active=!0},m.prototype.onClickCloseChangeName=function(){this.name_input_code.active=!1},m.prototype.onClickChangeName=function(){var t=this;d.gm.channel.check_is_dirty_word(this.input_edit.string,function(e){e&&0!=e.ResultCode?d.gm.ui.showNotice("\u8f93\u5165\u7684\u6587\u5b57\u4e0d\u5408\u89c4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):(d.gm.localData.nick_name=t.input_edit.string,d.gm.localData.saveByKey("nick_name"),t.name_lbl.string=t.input_edit.string,t.name_input_code.active=!1)})},m.prototype.OnclickRandomName=function(){this.RandomName()},m.prototype.onClickBoy=function(){var t=this;d.gm.localData.sex_id=1,d.gm.localData.saveByKey("sex_id"),this.boy_spine.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.girl_spine.node.color=(new cc.Color).fromHEX("#B8B8B8"),this.boy_spine.setAnimation(0,"dialogue_01",!1),this.scheduleOnce(function(){t.boy_spine.setAnimation(0,"standby",!0)},1),this.girl_spine.setAnimation(0,"standby",!0)},m.prototype.onClickGirl=function(){var t=this;d.gm.localData.sex_id=0,d.gm.localData.saveByKey("sex_id"),this.boy_spine.node.color=(new cc.Color).fromHEX("#B8B8B8"),this.girl_spine.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.girl_spine.setAnimation(0,"dialogue_01",!1),this.scheduleOnce(function(){t.girl_spine.setAnimation(0,"standby",!0)},1),this.boy_spine.setAnimation(0,"standby",!0)},m.prototype.onClickIntoGame=function(){""!=d.gm.localData.nick_name?(h.default.addProps([{id:u.CommonPropID.broom,num:1}],!1),this.closeMe(),d.gm.ui.showModule(d.gm.const.MainUI)):d.gm.ui.showNotice("\u8bf7\u5148\u8f93\u5165\u60a8\u559c\u6b22\u7684\u6635\u79f0\u54e6")},s([a(cc.Node)],m.prototype,"name_input_code",void 0),s([a(cc.EditBox)],m.prototype,"input_edit",void 0),s([a(cc.Label)],m.prototype,"name_lbl",void 0),s([a(sp.Skeleton)],m.prototype,"girl_spine",void 0),s([a(sp.Skeleton)],m.prototype,"boy_spine",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],Relive:[function(t,e,o){"use strict";cc._RF.push(e,"4af4dzAHrhK4K0+RDZtSsmr","Relive");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("LvMgr"),f=i("ReplacementModel"),g=i("EventManager"),y=i("GameModule"),m=i("SpineUtils"),v=i("GetAwardUI"),b=i("StrengthMgr"),I=i("ToolMgr");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.role_spine=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=y.default),D.prototype.onEnable=function(){var t=this,e=0==h.gm.localData.sex_id?h.gm.const.SEX_GIRL_NAME:h.gm.const.SEX_BOY_NAME;m.default.async_set_spine(this.role_spine,d.BundleName.MAIN_UI,"ani/main_role_spine/"+e,function(){t.role_spine.setAnimation(0,"standby",!0),f.default.createBySpine(t.role_spine,p.default.getInstance().dressing)},this)},D.prototype.onDisable=function(){},D.prototype.onClickRelive=function(){u.default.showVideo(function(){b.default.getInstance().autoAddHp(_.default.getInstance().getHpMax()),g.default.emit(d.GameEvent.explore_relive),h.gm.ui.closeModule(h.gm.const.Relive)},40000033)},D.prototype.onClickHome=function(){g.default.emit(d.GameEvent.explore_relive),g.default.emit(d.GameEvent.explore_go_home),b.default.getInstance().autoAddHp(1),h.gm.ui.closeModule(h.gm.const.Relive);var t=I.default.getInstance().getCurTool(d.ToolClass.gongnu),e=0;(e=t?t.getCurLvConfig().lv:e)<=1&&h.gm.ui.showModule(h.gm.const.GetToolsUI,function(t){h.gm.ui.showTopBlock(!1),t.setVideo(!0),t.setData({file:d.ThingType.normal,id:60082,num:1},v.GetAwardType.button,!1,!0)})},s([a(sp.Skeleton)],D.prototype,"role_spine",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],RenovationHelper:[function(t,e,o){"use strict";cc._RF.push(e,"59b8bQRlRlMJLyp8yP86XeU","RenovationHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonData"),l=i("Const"),p=i("GameMgr"),u=i("Singleton"),d=i("EventManager");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.cur_renovation={},t}r(h,c=u.default),h.prototype.getArrByDistrict=function(t){for(var e=[],o=0,n=p.gm.config.data.Renovation;o<n.length;o++){var i=n[o];t.includes(i.district)&&e.push(i)}return e},h.prototype.getUnlockArr=function(){},h.prototype.getConfigByID=function(t){for(var e=0,o=p.gm.config.data.Renovation;e<o.length;e++){var n=o[e];if(n.id==t)return n}},h.prototype.preview=function(t){var e=this.getConfigByID(t);this.cur_renovation[e.district+"_"+e.draw_type]=t,d.default.emit(l.GameEvent.change_floor)},h.prototype.change=function(t){var e=this.getConfigByID(t);this.cur_renovation[e.district+"_"+e.draw_type]=t,s.default.getInstance().used_renovation[e.district+"_"+e.draw_type]=t,s.default.getInstance().async_write_data(),d.default.emit(l.GameEvent.change_floor)},h.prototype.onClose=function(){Object.assign(this.cur_renovation,s.default.getInstance().used_renovation),d.default.emit(l.GameEvent.change_floor)},h.prototype.getFloorID=function(t){return 0==Object.values(this.cur_renovation).length&&Object.assign(this.cur_renovation,s.default.getInstance().used_renovation),t==l.SpecialObjectID.mainHouse?this.cur_renovation[l.SpecialObjectID.mainHouse+"_1"]||101001:t==l.SpecialObjectID.bedroom?this.cur_renovation[l.SpecialObjectID.bedroom+"_1"]||201001:void 0},h.prototype.checkIsUsed=function(t){for(var e in s.default.getInstance().used_renovation)if(t==s.default.getInstance().used_renovation[e])return!0;return!1},r=h,a.default=r,cc._RF.pop()},{}],RenovationItem:[function(t,e,o){"use strict";cc._RF.push(e,"f7efdtj4wRHDoCV/b5qOX1G","RenovationItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("Const"),d=i("GameMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("RenovationHelper");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_icon=null,t.nod_not_have=null,t.nod_select=null,t.nod_unselect=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=_.default),g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){this.data.floor_id&&(h.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"map/texture/grids/main_home/"+this.data.floor_id,this.spr_icon),this.lbl_name.string=this.data.name),this.nod_select.active=!1,this.nod_unselect.active=!1,this.nod_not_have.active=!1,p.default.getInstance().owned_renovation.includes(this.data.id)?f.default.getInstance().checkIsUsed(this.data.id)?this.nod_select.active=!0:this.nod_unselect.active=!0:this.nod_not_have.active=!0},g.prototype.onBtnChange=function(){f.default.getInstance().change(this.data.id),d.gm.ui.get_module(d.gm.const.RenovationUI).updateUI()},g.prototype.onBtnGoto=function(){d.gm.ui.showModule(d.gm.const.RenovationUnlock),d.gm.ui.closeModule(d.gm.const.RenovationUI)},g.prototype.onTouch=function(){f.default.getInstance().preview(this.data.id)},s([a(cc.Label)],g.prototype,"lbl_name",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),s([a(cc.Node)],g.prototype,"nod_not_have",void 0),s([a(cc.Node)],g.prototype,"nod_select",void 0),s([a(cc.Node)],g.prototype,"nod_unselect",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],RenovationUI:[function(t,e,o){"use strict";cc._RF.push(e,"342ddCaDBNEVpkYylWvUw/O","RenovationUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const"),d=i("GameMgr"),h=i("JumpMgr"),_=i("MapDataHelper"),f=i("List"),g=i("GameModule"),y=i("MainHouse"),m=i("RenovationHelper"),v=i("RenovationItem");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.tog_container=null,t.curIndex=0,t.curDistrict=[],t.curDatas=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=g.default),b.prototype.onEnable=function(){d.gm.ui.closeModule(d.gm.const.BaseUI),this.updateUI()},b.prototype.onBtnClose=function(){p.default.click(),this.closeMe(),m.default.getInstance().onClose(),d.gm.ui.showModule(d.gm.const.BaseUI)},b.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.updateUI()},b.prototype.updateUI=function(){var t;this.tog_container.toggleItems[this.curIndex].check(),this.curDistrict=I[this.curIndex],this.curDatas=m.default.getInstance().getArrByDistrict(this.curDistrict),this.list.numItems=this.curDatas.length,this.curDistrict.includes(u.SpecialObjectID.mainHouse)?((t=_.default.getDataByID(u.SpecialObjectID.mainHouse))&&t.loadObject(function(t){t.getComponent(y.default).open()}),h.default.getInstance().jumpToGrid(t.getWorldGrid())):h.default.getInstance().jumpToGrid(_.default.getDataByID(u.SpecialObjectID.bedroom).getWorldGrid())},b.prototype.onRenderItem=function(t,e){t.getComponent(v.default).setData(this.curDatas[e])},s([a(f.default)],b.prototype,"list",void 0),s([a(cc.ToggleContainer)],b.prototype,"tog_container",void 0),i=s([i],b),r.default=i;var I=[[u.SpecialObjectID.mainHouse],[u.SpecialObjectID.bedroom]];cc._RF.pop()},{}],RenovationUnlockListItem:[function(t,e,o){"use strict";cc._RF.push(e,"c8a86EqM81OGJmsYbUIVBa3","RenovationUnlockListItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonItem"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("IconUtils"),g=i("ListItem"),y=i("RenovationHelper");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_heart=null,t.spr_other_icon=null,t.lbl_other_name=null,t.nod_go=null,t.nod_unlock=null,t.common_item=null,t.nod_line=null,t.lbl_stage=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.setData=function(t){this.data=t,this.updateUI()},m.prototype.updateUI=function(){this.lbl_heart.string="\u7231\u5fc3+"+100*this.data.heart_addition+"%";var t=y.default.getInstance().getConfigByID(this.data.id);t&&(f.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"map/texture/grids/main_home/"+t.floor_id,this.spr_other_icon),this.lbl_other_name.string=t.name),p.default.getInstance().owned_renovation.includes(this.data.id)?this.nod_go.active=!0:(this.nod_unlock.active=!0,this.common_item.setData(this.data.prop)),this.lbl_stage.string=this.data.stage,this.nod_line.active=Boolean(this.listId!=h.gm.config.data.RenovationUnlock.length-1)},m.prototype.onBtnGo=function(){h.gm.ui.closeModule(h.gm.const.RenovationUnlock),h.gm.ui.showModule(h.gm.const.RenovationUI)},m.prototype.onBtnUnlock=function(){_.default.tryConsume([this.data.prop],!0)&&(p.default.getInstance().addRenovation(this.data.id),h.gm.ui.get_module(h.gm.const.RenovationUnlock).updateUI())},s([a(cc.Label)],m.prototype,"lbl_heart",void 0),s([a(cc.Sprite)],m.prototype,"spr_other_icon",void 0),s([a(cc.Label)],m.prototype,"lbl_other_name",void 0),s([a(cc.Node)],m.prototype,"nod_go",void 0),s([a(cc.Node)],m.prototype,"nod_unlock",void 0),s([a(u.default)],m.prototype,"common_item",void 0),s([a(cc.Node)],m.prototype,"nod_line",void 0),s([a(cc.Label)],m.prototype,"lbl_stage",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],RenovationUnlock:[function(t,e,o){"use strict";cc._RF.push(e,"ea56art5a5CgLw3pydANlFy","RenovationUnlock");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("List"),f=i("GameModule"),g=i("StringUtil"),y=i("RenovationUnlockListItem");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_total_addition=null,t.lbl_have=null,t.curDatas=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=f.default),m.prototype.onEnable=function(){this.updateUI()},m.prototype.onBtnClose=function(){p.default.click(),d.gm.ui.showModule(d.gm.const.RenovationUI),this.closeMe()},m.prototype.updateUI=function(){this.lbl_have.string=g.default.n2k(h.default.getPropCount(u.CommonPropID.flower)),this.list.numItems=d.gm.config.data.RenovationUnlock.length;for(var t=0,e=0,o=d.gm.config.data.RenovationUnlock;e<o.length;e++)t+=o[e].heart_addition;this.lbl_total_addition.string="+"+100*t+"%"},m.prototype.onRenderItem=function(t,e){t.getComponent(y.default).setData(d.gm.config.data.RenovationUnlock[e])},s([a(_.default)],m.prototype,"list",void 0),s([a(cc.Label)],m.prototype,"lbl_total_addition",void 0),s([a(cc.Label)],m.prototype,"lbl_have",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],ReplacementData:[function(t,e,o){"use strict";cc._RF.push(e,"3cbbaKaF6VBpJvl4OC5exaR","ReplacementData");var n,i,a=t,r=e,c=o;function s(){return null!==i&&i.apply(this,arguments)||this}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("StorageBase").StorageBase),r=s,c.default=r,cc._RF.pop()},{}],ReplacementHelper:[function(t,e,o){"use strict";cc._RF.push(e,"dea7dzTR7VHp5SQ9rAiLxze","ReplacementHelper");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("CommonData"),l=i("GameMgr");function p(){return null!==c&&c.apply(this,arguments)||this}a(p,c=i("Singleton").default),p.prototype.getConfigsByType=function(t){for(var e=[],o=0,n=l.gm.config.data.ReplacementData;o<n.length;o++){var i=n[o];!t.includes(i.draw_type)||l.gm.localData.sex_id!=i.gender&&2!=i.gender||e.push(i)}return e},p.prototype.getLocalByType=function(t){for(var e=[],o=0,n=l.gm.config.data.ReplacementData;o<n.length;o++){var i=n[o];t.includes(i.draw_type)&&s.default.getInstance().my_dress.includes(i.id)&&e.push(i)}return e},p.prototype.getConfigById=function(t){for(var e=0,o=l.gm.config.data.ReplacementData;e<o.length;e++){var n=o[e];if(n.id==t)return n}},a=p,r.default=a,cc._RF.pop()},{}],ReplacementItem:[function(t,e,o){"use strict";cc._RF.push(e,"4f467rToYxCY4KbZi6gmmzy","ReplacementItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("ListItem"),g=i("NetUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_check=null,t.spr_icon=null,t.nod_none=null,t.nod_buy=null,t.spr_consume_icon=null,t.lbl_consume_num=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=f.default),y.prototype.setData=function(t){this.data=t,this.updateUI()},y.prototype.updateUI=function(){_.IconUtils.setDrawIcon(this.data.id,this.spr_icon),this.nod_check.active=Boolean(p.default.getInstance().dressing[this.data.draw_type]==this.data.id),this.nod_none.active=Boolean(!p.default.getInstance().my_dress.includes(this.data.id)),this.nod_buy.active=!1,d.gm.ui.get_module(d.gm.const.ReplacementUI).cur_touch_id==this.data.id&&(this.nod_buy.active=this.nod_none.active,_.IconUtils.setPropSprite(this.data.prop.id,this.spr_consume_icon),this.lbl_consume_num.string=this.data.prop.num+"")},y.prototype.onTouch=function(){cc.log("touch",this.data.name,this.data.id),d.gm.ui.get_module(d.gm.const.ReplacementUI).cur_touch_id=this.data.id,d.gm.ui.get_module(d.gm.const.ReplacementUI).changeFacade(this.data.draw_type,this.data.id)},y.prototype.onBtnBuy=function(){h.default.tryToBuy({file:u.ThingType.replacement,id:Number(this.data.id),num:1},{file:u.ThingType.normal,id:this.data.prop.id,num:this.data.prop.num})&&(g.ReportData.instance.report_point(200003,Number(this.data.id)),d.gm.ui.get_module(d.gm.const.ReplacementUI).changeFacade(this.data.draw_type,this.data.id))},s([a(cc.Node)],y.prototype,"nod_check",void 0),s([a(cc.Sprite)],y.prototype,"spr_icon",void 0),s([a(cc.Node)],y.prototype,"nod_none",void 0),s([a(cc.Node)],y.prototype,"nod_buy",void 0),s([a(cc.Sprite)],y.prototype,"spr_consume_icon",void 0),s([a(cc.Label)],y.prototype,"lbl_consume_num",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ReplacementMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b1d1cl9oS9FZKnSjzLho1Kd","ReplacementMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("SpineUtils");function p(){return null!==c&&c.apply(this,arguments)||this}r(p,c=s.default),p.prototype.changeHair=function(t,e,o){var n=(o=void 0!==o&&o)?"b":"f",i=n+"_hair_a";o=i+"_"+e,e=(n+="_hair_b")+"_"+e,l.default.clearAttachment(t,"f_hair_a"),l.default.clearAttachment(t,"f_hair_b"),l.default.clearAttachment(t,"b_hair_a"),l.default.clearAttachment(t,"b_hair_b"),l.default.changePartialCloth(t,i,"default",o),l.default.changePartialCloth(t,n,"default",e)},p.prototype.changeEye=function(t,e){var o="f_eye_"+e;l.default.clearAttachment(t,"f_eye"),l.default.changePartialCloth(t,"f_eye","default",o),this.changeMouth(t,e)},p.prototype.changeMouth=function(t,e){e="f_mouth_"+e,l.default.clearAttachment(t,"f_mouth"),l.default.changePartialCloth(t,"f_mouth","default",e)},p.prototype.changeFace=function(t,e){e="f_face_"+e,l.default.clearAttachment(t,"f_face"),l.default.changePartialCloth(t,"f_face","default",e)},p.prototype.changeShoe=function(t,e,o){(function(t,e,n){void 0===o&&(n=!1),l.default.clearAttachment(t,"f_shoe_a_l"),l.default.clearAttachment(t,"f_shoe_a_r"),l.default.clearAttachment(t,"b_shoe_a_l"),l.default.clearAttachment(t,"b_shoe_a_r");var i=n?"b":"f",a=i+"_shoe_a_l";n=a+"_"+e,l.default.changePartialCloth(t,a,"default",n),l.default.changePartialCloth(t,i+="_shoe_a_r","default",i+"_"+e)})(t,e,o=void 0!==o&&o),function(t,e,n){void 0===o&&(n=!1),l.default.clearAttachment(t,"f_shoe_b_l"),l.default.clearAttachment(t,"f_shoe_b_r"),l.default.clearAttachment(t,"b_shoe_b_l"),l.default.clearAttachment(t,"b_shoe_b_r");var i=n?"b":"f",a=i+"_shoe_b_l";n=a+"_"+e,l.default.changePartialCloth(t,a,"default",n),l.default.changePartialCloth(t,i+="_shoe_b_r","default",i+"_"+e)}(t,e,o)},p.prototype.changeHat=function(t,e,o){void 0===o&&(o=!1),l.default.clearAttachment(t,"b_hat"),l.default.clearAttachment(t,"f_hat");var n=(o?"b":"f")+"_hat";o=n+"_"+e,e&&l.default.changePartialCloth(t,n,"default",o)},p.prototype.changeGlasses=function(t,e,o){void 0===o&&(o=!1),l.default.clearAttachment(t,"b_glasses"),l.default.clearAttachment(t,"f_glasses");var n=(o?"b":"f")+"_glasses";o=n+"_"+e,l.default.clearAttachment(t,n),e&&l.default.changePartialCloth(t,n,"default",o)},p.prototype.changeEarrings=function(t,e,o){void 0===o&&(o=!1),l.default.clearAttachment(t,"f_earrings"),l.default.clearAttachment(t,"b_earrings");var n=(o?"b":"f")+"_earrings";o="f_earrings_"+e,e&&l.default.changePartialCloth(t,n,"default",o)},p.prototype.changeClothing=function(t,e){t.setSkin("skin_"+e)},p.prototype.changeNecklace=function(t,e){l.default.clearAttachment(t,"f_necklace"),e&&l.default.changePartialCloth(t,"f_necklace","default",e="f_necklace_"+e)},r=p,a.default=r,cc._RF.pop()},{}],ReplacementModel:[function(t,e,o){"use strict";cc._RF.push(e,"8f86dt5DlBIq4wRxP3xYc47","ReplacementModel");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("SpineUtils"),r=n("Const"),c=n("ReplacementMgr");function s(){this.role=null,this.draw={},this.last_flag=0}s.createBySpine=function(t,e,o){void 0===e&&(e=null),void 0===o&&(o=!1);var n=new s;return n.role=t,e&&0<Object.values(e).length&&(n.draw=e),n.updateUI(o),n},s.prototype.setDraw=function(t,e,o){void 0===o&&(o=!1),this.draw[t]=e,this.updateUI(o)},s.prototype.updateUI=function(t){void 0===t&&(t=!1),this.draw[r.E_ReplacementType.clothing]&&c.default.getInstance().changeClothing(this.role,this.draw[r.E_ReplacementType.clothing]),this.updateByDirection(t)},s.prototype.updateByDirection=function(t){void 0===t&&(t=!1),c.default.getInstance().changeNecklace(this.role,this.draw[r.E_ReplacementType.necklace]),c.default.getInstance().changeFace(this.role,this.draw[r.E_ReplacementType.face]),c.default.getInstance().changeEye(this.role,this.draw[r.E_ReplacementType.eye]),c.default.getInstance().changeEarrings(this.role,this.draw[r.E_ReplacementType.earing],t),c.default.getInstance().changeShoe(this.role,this.draw[r.E_ReplacementType.shoe],t),c.default.getInstance().changeGlasses(this.role,this.draw[r.E_ReplacementType.glasses],t),c.default.getInstance().changeHat(this.role,this.draw[r.E_ReplacementType.hat],t),c.default.getInstance().changeHair(this.role,this.draw[r.E_ReplacementType.hair],t),t&&(a.default.clearAttachment(this.role,"f_necklace"),a.default.clearAttachment(this.role,"f_eye"),a.default.clearAttachment(this.role,"f_mouth"),a.default.clearAttachment(this.role,"f_face"))},n=s,i.default=n,cc._RF.pop()},{}],ReplacementUI:[function(t,e,o){"use strict";cc._RF.push(e,"9f8b1cjZhFKApJeDVOYSBh6","ReplacementUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonData"),d=i("CommonUtils"),h=i("Const"),_=i("ReplacementModel"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("ReplacementHelper"),v=i("ReplacementItem");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.list=null,t.toggle=null,t.curIndex=0,t.bottom_item_types=[],t.curList=[],t.model=null,t.temp_draw={},t.cur_touch_id="",t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=y.default),b.prototype.onLoad=function(){l.prototype.onLoad.call(this)},b.prototype.onEnable=function(){var t,e=this;for(t in u.default.getInstance().dressing)this.temp_draw[t]=u.default.getInstance().dressing[t];d.default.loadMainRoleSpine(this.spine,function(){e.model=_.default.createBySpine(e.spine,e.temp_draw),e.spine.setAnimation(0,"standby",!0),e.updateUI()})},b.prototype.updateUI=function(){this.toggle.toggleItems[this.curIndex].check(),this.bottom_item_types=I[this.curIndex],this.curList=m.default.getInstance().getConfigsByType(this.bottom_item_types),this.list.numItems=this.curList.length},b.prototype.onBtnRestore=function(){},b.prototype.onBtnSave=function(){},b.prototype.onRender=function(t,e){t.getComponent(v.default).setData(this.curList[e])},b.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.cur_touch_id="",this.updateUI()},b.prototype.changeFacade=function(t,e){this.model.setDraw(t,e),u.default.getInstance().my_dress.includes(String(e))&&(u.default.getInstance().dressing[t]=e,u.default.getInstance().save()),this.updateUI(),g.default.emit(h.GameEvent.replace_clothes)},b.prototype.onBtnClose=function(){g.default.emit(h.GameEvent.change_facade),p.default.click(),this.closeMe()},b.prototype.onBtnShop=function(){p.default.click(),g.default.emit(h.GameEvent.change_facade),d.default.goToExploreByID(11001),this.closeMe()},s([a(sp.Skeleton)],b.prototype,"spine",void 0),s([a(f.default)],b.prototype,"list",void 0),s([a(cc.ToggleContainer)],b.prototype,"toggle",void 0),i=s([i],b),r.default=i;var I=[[h.E_ReplacementType.clothing],[h.E_ReplacementType.face,h.E_ReplacementType.eye],[h.E_ReplacementType.hair],[h.E_ReplacementType.shoe],[h.E_ReplacementType.hat,h.E_ReplacementType.glasses,h.E_ReplacementType.earing,h.E_ReplacementType.necklace]];cc._RF.pop()},{}],Reservoir:[function(t,e,o){"use strict";cc._RF.push(e,"80f80TYHoRC0Kh9pz/PQPbx","Reservoir");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.ReservoirConfig=void 0;var a=n("FWEvent"),r=n("EventManager"),c=n("TimeUtils");function s(){this.config=null,this.intervalID=-1,this.timeOut=0}s.create=function(t){var e=new s;return e.config=t,e._init(),e},s.prototype._init=function(){r.default.on(a.FWEvent.Onshow,this.onShow,this)},s.prototype.onShow=function(){var t=this;setTimeout(function(){t.checkCD()},1)},s.prototype.checkCD=function(){var t,e,o=this;this.config.curCount!=this.config.maxCount&&(clearInterval(this.intervalID),t=c.default.getTime()-this.config.lastTime,(t=Math.max(0,t))<(e=this.config.useTime)?0<(e-=t)&&(this.timeOut=e,this.intervalID=setInterval(function(){o.timeCountdown()},1e3)):(e=this.config.lastTime+e,this.recover(e)))},s.prototype.updateLastTime=function(t){this.config.lastTime=t,this.checkCD()},s.prototype.timeCountdown=function(){this.timeOut=this.timeOut-1,this.timeOut<0&&(clearInterval(this.intervalID),this.timeOut=0,this.recover(c.default.getTime())),this.config.countDownCB&&this.config.countDownCB()},s.prototype.recover=function(t){this.config.curCount<this.config.maxCount&&(this.config.curCount+=1,this.config.lastTime=t,this.config.curCount<this.config.maxCount&&this.checkCD(),this.config.fillEndCB&&(this.timeOut=0,this.config.fillEndCB()))},n=s,i.default=n,i.ReservoirConfig=function(){this.curCount=0,this.maxCount=0,this.useTime=0,this.lastTime=0,this.fillEndCB=null,this.countDownCB=null},cc._RF.pop()},{}],RockingChair:[function(t,e,o){"use strict";cc._RF.push(e,"c98bbKxXjpIGIhbxIV1rcLy","RockingChair");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.sp_chair_down=null,t.sp_chair_up=null,t.nod_npc_parent=null,t.isPlaying=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),u.prototype.onEnable=function(){},u.prototype.playRocking=function(){this.isPlaying=!0,this.sp_chair_down.setAnimation(0,"walk",!0),this.sp_chair_up.setAnimation(0,"walk",!0)},u.prototype.stopRocking=function(){this.isPlaying=!1,this.sp_chair_down.setAnimation(0,"standby",!1),this.sp_chair_up.setAnimation(0,"standby",!1)},s([a(sp.Skeleton)],u.prototype,"sp_chair_down",void 0),s([a(sp.Skeleton)],u.prototype,"sp_chair_up",void 0),s([a(cc.Node)],u.prototype,"nod_npc_parent",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],RoomItem:[function(t,e,o){"use strict";cc._RF.push(e,"b665bznHIJAJK2qxpH6glF5","RoomItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("EventManager"),g=i("DecorationMgr"),y=i("Chara");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.bIsHide=!1,t.touch_node_ary=[],t.lock_node=null,t.unlock_node=null,t.decorate_node=null,t.icon_sprite=null,t.fangzhi_node=null,t._decorate_id=0,t._index=0,t._type_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=y.default),m.prototype.init=function(){l.prototype.init.call(this)},m.prototype.play=function(t,e){return(e=void 0===e?null:e)&&e(),!0},m.prototype.editor_on_button_click_handler=function(t,e){var o=this;void 0===e&&(e=null),d.gm.config.getPetRoomConfig(this._type_id).weight<=0&&(e=g.default.getConfig(this._type_id,1),0<this._decorate_id&&(1==e.type?d.gm.ui.showModule(d.gm.const.PetDecorationUI,function(t){t.setData(o._decorate_id)}):2==e.type&&(this.fangzhi_node.active=!0)))},m.prototype.onClickDecorate=function(){var t=this;d.gm.ui.showModule(d.gm.const.PetDecorateUI,function(e){e.setData(t._type_id,t._index)})},m.prototype.onClickReward=function(){var t=this,e=g.default.getConfig(this._type_id,1);1==e.type?d.gm.ui.showModule(d.gm.const.UnlockUI,function(o){var n=p.ConfigUtils.BuildingUnlockUtils.getUnlockConfig(t._type_id).need;o.setNeedProp(n),o.setDesc(e.desc),n=p.BigMapConfigUtils.getConfig(t._type_id),o.setTitle(n.name),o.setIconByObjectID(t._type_id),o.callback=function(){d.gm.localData.explore_data.addPetProp(t._type_id,!1),h.default.updatePetDecorate(t._type_id,t._type_id,t._index),t.change_pet_decorate(t._type_id)}}):2==e.type&&(d.gm.ui.showModule(d.gm.const.ShopDecorationPool,function(t){t.setDataByProp(u.CommonPropID.ticket,!0)}),d.gm.ui.showModule(d.gm.const.ShopTopUI),d.gm.ui.closeModule(d.gm.const.BaseUI))},m.prototype.onClickDetail=function(){var t=this;d.gm.ui.showModule(d.gm.const.PetDecorationUI,function(e){e.setData(t._decorate_id)}),this.fangzhi_node.active=!1},m.prototype.onClickFangzhi=function(){var t=this;d.gm.ui.showModule(d.gm.const.PetDecorateUI,function(e){e.setData(t._type_id,t._index)}),this.fangzhi_node.active=!1},m.prototype.reset=function(){cc.Tween.stopAllByTarget(this.node),this.node.opacity=255,this.bIsHide=!1,l.prototype.reset.call(this)},m.prototype.setData=function(t,e){this.fangzhi_node.active=!1,this._index=e,this._type_id=t;var o=d.gm.config.getPetRoomConfig(t);if(0<o.weight)this.lock_node.active=!1,this.unlock_node.active=!0,_.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"map/texture/building/pet_room/"+t,this.icon_sprite);else{e=d.gm.localData.explore_data.getPetDecorateId(t,e),this._decorate_id=e,this.lock_node.active=e<=0,this.unlock_node.active=0<e,this.decorate_node.active=!1;for(var n=0;n<o.decorate_id.length;++n)this.decorate_node.active||(this.decorate_node.active=d.gm.localData.explore_data.pet_props[o.decorate_id[n]]&&0<d.gm.localData.explore_data.pet_props[o.decorate_id[n]].count);this.decorate_node.active,0<e&&_.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"map/texture/building/pet_room/"+e,this.icon_sprite)}},m.prototype.change_pet_decorate=function(t){t==this._type_id&&this.setData(t,this._index)},m.prototype.change_pet_decorate_byid=function(t){for(var e=d.gm.config.getPetRoomConfig(this._type_id),o=0;o<e.decorate_id.length;++o)t==e.decorate_id[o]&&this.setData(e.res_id,this._index)},m.prototype.updateLogic=function(){var t,e,o,n,i,a;this.pZone&&((a=d.gm.ui.get_module(d.gm.const.PetRoom))&&a.node.active&&(a.check_screen(this.node,this.node.width,this.node.height)?this.node.opacity=255:this.node.opacity=0),null!=(t=this.pZone.getMainChara())&&(e=this.node.x-this.node.width*this.node.anchorX,o=this.node.x+this.node.width*(1-this.node.anchorX),n=this.node.y+this.node.height*(1-this.node.anchorY),i=this.node.y-this.node.height*this.node.anchorY,a=!1,e<t.node.x&&t.node.x<o&&i<t.node.y&&t.node.y+t.node.height<n&&(a=!0),(1e4<this.iCfgId||t.node.height>this.node.height)&&(a=!1),this.bIsHide!=a&&(this.bIsHide=a,cc.Tween.stopAllByTarget(this.node),a=a?100:255,cc.tween(this.node).to(.1,{opacity:a}).start())))},m.prototype.onCollisionEnter=function(){},m.prototype.pet_room_item_tips=function(){this.fangzhi_node.active=!1},m.prototype.onEnable=function(){for(var t=0;t<this.touch_node_ary.length;++t)this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_START,this.touchStoreStart,this),this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_START,this.touchStoreMove,this),this.touch_node_ary[t].on(cc.Node.EventType.TOUCH_END,this.touchStoreEnd,this);this.node.scale=1,f.default.on(u.GameEvent.change_pet_decorate,this.change_pet_decorate,this),f.default.on(u.GameEvent.pet_room_item_tips,this.pet_room_item_tips,this),f.default.on(u.GameEvent.change_pet_decorate_byid,this.change_pet_decorate_byid,this)},m.prototype.onDisable=function(){var t=this.node.getComponent(cc.Animation);if(t){t.currentClip&&(t.play(t.currentClip.name,0),t.stop());for(var e=0;e<this.touch_node_ary.length;++e)this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_START,this.touchStoreStart,this),this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_START,this.touchStoreMove,this),this.touch_node_ary[e].off(cc.Node.EventType.TOUCH_END,this.touchStoreEnd,this);this.unscheduleAllCallbacks(),this.node.stopAllActions(),f.default.off(u.GameEvent.change_pet_decorate,this.change_pet_decorate,this),f.default.off(u.GameEvent.pet_room_item_tips,this.pet_room_item_tips,this),f.default.off(u.GameEvent.change_pet_decorate_byid,this.change_pet_decorate_byid,this)}},m.prototype.touchStoreStart=function(){},m.prototype.touchStoreMove=function(t){var e=d.gm.ui.get_module(d.gm.const.PetRoom);e&&e.getpLogic().touchMove(t)},m.prototype.touchStoreEnd=function(t){var e=d.gm.ui.get_module(d.gm.const.PetRoom);e&&(e.getpLogic().set_can_move(!1),this.scheduleOnce(function(){e.getpLogic().set_can_move(!0)},.1),this.editor_on_button_click_handler(t))},m.prototype.stop_animation=function(){var t=this.node.getComponent(cc.Animation);t&&t.stop()},m.prototype.onCollisionExit=function(){},s([a([cc.Node])],m.prototype,"touch_node_ary",void 0),s([a(cc.Node)],m.prototype,"lock_node",void 0),s([a(cc.Node)],m.prototype,"unlock_node",void 0),s([a(cc.Node)],m.prototype,"decorate_node",void 0),s([a(cc.Sprite)],m.prototype,"icon_sprite",void 0),s([a(cc.Node)],m.prototype,"fangzhi_node",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],RoomPet:[function(t,e,o){"use strict";cc._RF.push(e,"dc7b51MAB5MRZeBlG/vjHeV","RoomPet");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l,p=a("Const"),u=a("GameMgr"),d=a("Utils"),h=a("AssetMgr"),_=a("SpineUtils"),f=a("Chara");function g(){var t=null!==s&&s.apply(this,arguments)||this;return t._pet_data=null,t._random_ani=["standby01","standby02","standby03","standby04","standby05"],t._long_ani=["sit","sleep","play"],t._is_update=!0,t._walk_time=0,t._waittime=0,t._wholewaittime=0,t._is_playing=!1,t._last_pos=cc.v2(0,0),t}a=(n=cc._decorator).ccclass,n.property,c(g,s=f.default),(l=g).prototype.onEnable=function(){var t=this;this._wholewaittime=0,this._walk_time=0,this._waittime=0,this._is_playing=!1,_.default.setListener(this.chara_spine,function(){t.actionCount++,t.actionCount>=t.maxCount&&t.doneCallback&&t.doneCallback()})},g.prototype.onDisable=function(){},g.prototype.playPos4Ani=function(t,e){var o,n=this;"jump"==t.pos_4_ani[e]&&(o=this.pZone.node.getChildByName("pet_pos").getChildByName(t.pos_5).getPosition(),this.node.runAction(cc.moveTo(.6,o)),this.updateDir(o.x-this.node.x,o.y-this.node.y,!1)),this.playAniByName(t.pos_4_ani[e],this._long_ani.includes(t.pos_4_ani[e])?d.Utils.math_random(!0,4,10):1,function(){e<t.pos_4_ani.length-1?n.playPos4Ani(t,e+1):(n.playAniByName(n._random_ani[d.Utils.math_random(!0,0,n._random_ani.length)]),n._is_playing=!1,u.gm.localData.petAni[n.iPetId]=0)})},g.prototype.playPos3Ani=function(t,e){var o,n=this;"jump"==t.pos_3_ani[e]&&(o=this.pZone.node.getChildByName("pet_pos").getChildByName(t.pos_4).getPosition(),this.node.runAction(cc.moveTo(.6,o)),this.updateDir(o.x-this.node.x,o.y-this.node.y,!1)),this.playAniByName(t.pos_3_ani[e],this._long_ani.includes(t.pos_3_ani[e])?d.Utils.math_random(!0,4,10):1,function(){e<t.pos_3_ani.length-1?n.playPos3Ani(t,e+1):t.pos_4&&0<t.pos_4_ani.length?n.playPos4Ani(t,0):(n.playAniByName(n._random_ani[d.Utils.math_random(!0,0,n._random_ani.length)]),n._is_playing=!1,u.gm.localData.petAni[n.iPetId]=0)})},g.prototype.playPos2Ani=function(t,e){var o,n=this;"jump"==t.pos_2_ani[e]&&(o=this.pZone.node.getChildByName("pet_pos").getChildByName(t.pos_3).getPosition(),this.node.runAction(cc.moveTo(.6,o)),this.updateDir(o.x-this.node.x,o.y-this.node.y,!1)),this.playAniByName(t.pos_2_ani[e],this._long_ani.includes(t.pos_2_ani[e])?d.Utils.math_random(!0,4,10):1,function(){e<t.pos_2_ani.length-1?n.playPos2Ani(t,e+1):t.pos_3&&0<t.pos_3_ani.length?n.playPos3Ani(t,0):(n.playAniByName(n._random_ani[d.Utils.math_random(!0,0,n._random_ani.length)]),n._is_playing=!1,u.gm.localData.petAni[n.iPetId]=0)})},g.prototype.playPos1Ani=function(t,e){var o,n=this;"jump"==t.pos_1_ani[e]&&(o=this.pZone.node.getChildByName("pet_pos").getChildByName(t.pos_2).getPosition(),this.node.runAction(cc.moveTo(.6,o)),this.updateDir(o.x-this.node.x,o.y-this.node.y,!1)),this.playAniByName(t.pos_1_ani[e],this._long_ani.includes(t.pos_1_ani[e])?d.Utils.math_random(!0,4,10):1,function(){e<t.pos_1_ani.length-1?n.playPos1Ani(t,e+1):t.pos_2&&0<t.pos_2_ani.length?n.playPos2Ani(t,0):(n.playAniByName(n._random_ani[d.Utils.math_random(!0,0,n._random_ani.length)]),n._is_playing=!1,u.gm.localData.petAni[n.iPetId]=0)})},g.prototype.doPos1Ani=function(t){var e=this,o=this.pZone.node.getChildByName("pet_pos").getChildByName(t.pos_1).getPosition();this.updateDir(o.x-this.node.x,o.y-this.node.y,!1),this.playAniByType(p.EnumRoleAniType.walk),this._last_pos.x=this.node.x,this._last_pos.y=this.node.y,this.set_is_zindex(!0),this.walkTo(o,function(){e.node&&(e.set_is_zindex(!1),e.node.zIndex=1e4,22==t.id?e.dealHuahuati():e.playPos1Ani(t,0))},this,!0)},g.prototype.doByConfig=function(t){t.pos_1&&(this.doPos1Ani(t),this._is_playing=!0,u.gm.localData.petAni[this.iPetId]=t.id)},g.prototype.set_is_update=function(t){this._is_update=t},g.prototype.dealHuahuati=function(){var t=this;this.node.active=!1,h.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,"prefabs/pet_map/pet/pet_"+this.iPetId,cc.Prefab,function(e){var o=cc.instantiate(e).getComponent(l);o.set_is_update(!1),o.init(),o.setPetId(t.iPetId),o.setWalkSpeed(200),t.pZone.huahuati_node.addChild(o.node);var n=t.pZone.huahuati_node.getComponent(cc.Animation);n.play(),o.playAniByName("slideDown",1,function(){o.playAniByName("slide"),n.on("finished",function(){o.playAniByName("slideUp",1,function(){t.playAniByName(t._random_ani[d.Utils.math_random(!0,0,t._random_ani.length)]),t._is_playing=!1,u.gm.localData.petAni[t.iPetId]=0,t.pZone.huahuati_node.removeAllChildren(),t.node.active=!0;var e=t.pZone.node.getChildByName("pet_pos").getChildByName("pos_108").getPosition();t.node.x=e.x,t.node.y=e.y})})})})},g.prototype.goNext=function(){var t,e,o=[],n=u.gm.config.getPetAniConfigAry();for(t in n){var i=n[t];if(!(i.res_id&&u.gm.localData.explore_data.getPetDecorateId(i.res_id,0)<=0)){var a,r=!1;for(a in u.gm.localData.petAni)if(u.gm.localData.petAni[a]==i.id){r=!0;break}r||o.push(i)}}0<o.length&&(e=d.Utils.math_random(!0,0,o.length),this.doByConfig(o[e]))},g.prototype.update=function(t){this._is_update&&(this._walk_time+=t,this._is_playing||(this._waittime+=t),this.isWalking()&&(this._last_pos.x!=this.node.x&&this._last_pos.y!=this.node.y&&this.updateDir(this.node.x-this._last_pos.x,this.node.y-this._last_pos.y,!0),this._last_pos.x=this.node.x,this._last_pos.y=this.node.y),this._waittime>=this._wholewaittime&&!this._is_playing&&(this._wholewaittime=d.Utils.math_random(!0,2,5),this.goNext()))},a=l=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],g),r.default=a,cc._RF.pop()},{}],SDKManager:[function(t,e,o){"use strict";cc._RF.push(e,"d8596ZjHXtGW6ofgE37/fO9","SDKManager");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.SDKManager=void 0;var a=n("GameMgr"),r=n("ChuanShanJiaNativeGame"),c=n("Const"),s=n("Utils");function l(){this.isInitSuccess=!1,this._RewardVideoAdLoaded=!1,this._RewardVideoAdCallStat=!1,this._gameHide=!1,this.tmpChannelAdName="",this.queryPurchasesState=!1}Object.defineProperty(l,"instance",{get:function(){return null==this._instance&&(this._instance=new l),this._instance},enumerable:!1,configurable:!0}),l.prototype.showRewardVideoAd=function(t,e,o){console.log("SDKManager:showRewardVideoAd"),this._rewardVideoAdRewardCallback=t,this._rewardVideoAdCloseCallback=o,window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showRewardVideoAd","(Ljava/lang/String;)V",e):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","showRewardVideoAd"))},l.prototype.isRewardVideoAdLoaded=function(){if(console.log("SDKManager:isRewardVideoAdLoaded"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","isRewardVideoAdLoaded","()Z");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","isRewardVideoAdLoaded")}return!1},l.prototype.onRewardVideoShowClose=function(){console.log("SDKManager:onRewardVideoShowClose"),this._rewardVideoAdCloseCallback&&(this._rewardVideoAdCloseCallback(),console.log("run  SDKManager:_rewardVideoAdCloseCallback"))},l.prototype.onRewardVideoShowError=function(){console.log("SDKManager:isRewardVideoShowError"),a.gm.ui.emit("cancel_watch_ad")},l.prototype.onRewardVideoAdRewardCallback=function(){var t=this;setTimeout(function(){console.log("SDKManager:onRewardVideoAdRewardCallback"),t._gameHide&&(t._RewardVideoAdCallStat=!0),t._rewardVideoAdRewardCallback&&(t._rewardVideoAdRewardCallback(),console.log("SDKManager:_rewardVideoAdRewardCallback"))},500)},l.prototype.OnRewardVideoAdLoaded=function(){console.log("SDKManager:OnRewardVideoAdLoaded")},l.prototype.onHide=function(){console.log("SDKManager:onHide"),a.gm.data.video_state=1,a.gm.audio.music_mute=!0,a.gm.audio.effect_mute=!0,this._gameHide=!0},l.prototype.onShow=function(){console.log("SDKManager:onShow"),this._gameHide=!1,a.gm.data.video_state=0,a.gm.data.start_data&&(a.gm.data.start_data.music_mute||(a.gm.data.start_data.music_mute=!1),a.gm.data.start_data.effect_mute||(a.gm.data.start_data.effect_mute=!1),a.gm.audio.music_mute=a.gm.data.start_data.music_mute,a.gm.audio.effect_mute=a.gm.data.start_data.effect_mute),a.gm.channel.get_server_time(),a.gm.channel.check_is_app()&&this.reportVideoLoadNumber()},l.prototype.videoAdLoadBegin=function(){console.log("SDKManager:videoAdLoadBegin")},l.prototype.videoAdLoadOk=function(){console.log("SDKManager:videoAdLoadOk")},l.prototype.videoAdLoadError=function(){console.log("SDKManager:videoAdLoadOk")},l.prototype.showBannerAd=function(){console.log("SDKManager:showBannerAd"),window.jsb&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showBannerAd","()V")},l.prototype.hideBannerAd=function(){console.log("SDKManager:hideBannerAd"),window.jsb&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideBannerAd","()V")},l.prototype.getLanguage=function(){if(console.log("SDKManager:getLanguage"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getLanguage","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getLanguage")}return"zh-CN"},l.prototype.getAppName=function(){if(console.log("SDKManager:getAppName"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getAppName","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getAppName")}return"unknown"},l.prototype.getVersionName=function(){if(console.log("SDKManager:getVersionName"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVersionName","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getVersionName")}return"unknown"},l.prototype.getChannelName=function(){var t="";if(window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return void 0===(t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getChannelName","()Ljava/lang/String;"))?"tap-tap-game":t;if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getChannelName")}return t},l.prototype.getVersionCode=function(){if(console.log("SDKManager:getAppVersionCode"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVersionCode","()I");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getVersionCode")}return 0},l.prototype.getAppSign=function(){if(console.log("SDKManager:getAppSign"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getApkSign","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getApkSign")}return""},l.prototype.getChannelAdName=function(){return console.log("SDKManager:getChannelAdName"),""!=this.tmpChannelAdName||window.jsb&&(cc.sys.platform==cc.sys.ANDROID?this.tmpChannelAdName=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getChannelAdName","()Ljava/lang/String;"):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(this.tmpChannelAdName=jsb.reflection.callStaticMethod("AppActivity","getChannelAdName"))),this.tmpChannelAdName},l.prototype.getJsDeviceId=function(){if(console.log("SDKManager:getJsDeviceId"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getJsDeviceId","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","idfa")}return""},l.prototype.weiXin_Login=function(t){if(l.instance._weiXin_Login_call=t,console.log("SDKManager:weiXin_Login"),window.jsb)if(cc.sys.platform==cc.sys.ANDROID)jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","WxLogin","(Ljava/lang/String;)V","SDKManager");else if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","WxLogin:","SDKManager")},l.prototype.restartApp=function(){console.log("SDKManager:restartApp"),cc.game.restart(),a.gm.ui.showNotice(s.Utils.language_string_change(c.LanguageTypeEnum.TEXT_12)),cc.game.pause()},l.prototype.onRealNameConfirm_callBack=function(t){console.log("SDKManager:onRealNameConfirmSucc: "+t),a.gm.data.event_emitter.emit("realNameConfirmIsOk")},l.prototype.realNameConfirm=function(t){if(console.log("SDKManager:realNameConfirm: "+t),window.jsb)return cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/TapTapUtils","realNameCheck","(Ljava/lang/String;)V",t):cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD?jsb.reflection.callStaticMethod("TapTapUtils","realNameCheck:",t):void 0},l.prototype.weiXin_login_callBack=function(t){console.log("SDKManager:weiXin_login_callBack: "+t),l.instance._weiXin_Login_call(t)},l.prototype.java_call_js=function(t,e){console.log("OPPONativeGame java_call_js  sFuncName:"+t+" sParams:"+e);var o=[];null!=e&&""!=e&&(o=e.split("|")),null!=this[t]?this[t](o):cc.error("NativeGame not found sFuncName:"+t+" sParams:"+e)},l.prototype.onInitCompleteCallback=function(){console.log("SDKManager:Appactivity init is succ!")},l.prototype.setOpenId=function(t){console.log("SDKManager:setOpenId: "+t),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","TDGAReg","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","TDGAReg:",t))},l.prototype.urlTapTapXmct=function(t,e){console.log("SDKManager:urlTapTapXmct :"+t),window.jsb?cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","urlTapTapXmct","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","urlTapTapXmct:",t):(a.gm.ui.show_notice(e),a.gm.channel.exit_game())},l.prototype.getVideoLoadNumber=function(){if(console.log("SDKManager:getVideoLoadNumber"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getVideoLoadNumber","()I");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getVideoLoadNumber")}return 0},l.prototype.reportVideoLoadNumber=function(){console.log("SDKManager:reportVideoLoadNumber");var t=this.getVideoLoadNumber();if(console.log("SDKManager:reportVideoLoadNumber:   ",t),0<t){var e=0;for(e=0;e<t;e++)GameSdk.BI.evtAppointDataReport(3001)}},l.prototype.setPlayVideoNumberReport=function(t){if(console.log("SDKManager:setPlayVideoNumberReport"),0<=t&&window.jsb)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setPlayVideoNumberReport","(I)V",t)},l.prototype.setSdkReportPrice=function(t){if(console.log("SDKManager:setSdkReportPrice"),0<=t&&window.jsb)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setSdkReportPrice","(I)V",t)},l.prototype.reportKeyEvent=function(){},l.prototype.userCodeWrite=function(t,e){console.log("SDKManager:userCodeWrite"),e&&(this._userCodeWrite_CallBack=e),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","userCodeWrite","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","userCodeWrite:",t))},l.prototype.userCodewrite_callBack=function(t){console.log("SDKManager:userCodewrite_callBack: "+t),this._userCodeWrite_CallBack&&this._userCodeWrite_CallBack(t)},l.prototype.userCodeRead=function(t){console.log("SDKManager:userCodeRead"),t&&(this._userCodeRead_CallBack=t),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","userCodeRead","()V"):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","userCodeRead"))},l.prototype.userCodeRead_callBack=function(t){console.log("SDKManager:userCodeRead_callBack: "+t),this._userCodeRead_CallBack&&this._userCodeRead_CallBack(t)},l.prototype.wxInstalled=function(){console.log("SDKManager:wxInstalled");var t=!1;return window.jsb&&(cc.sys.platform==cc.sys.ANDROID?t=!0:cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(t=jsb.reflection.callStaticMethod("AppActivity","wxInstalled"))),t},l.prototype.cleanCacheFile=function(){console.log("SDKManager:cleanCacheFile"),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","cleanCacheFile","()V"):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","cleanCacheFile"))},l.prototype.getJsIdfa=function(){if(console.log("SDKManager:  ios:getJsIdfa||android:getImei"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getTeleOAID","()Ljava/lang/String;");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return jsb.reflection.callStaticMethod("AppActivity","getIdfa")}return""},l.prototype.adIsErrorReport=function(t){console.log("SDKManager:      adIsErrorReport:  ",t);var e=a.gm.data.open_id,o=a.gm.data.uid;""==a.gm.data.open_id&&(e="noLogin"),""==a.gm.data.uid&&(o="noLogin"),t=t.substr(0,Math.max(Math.min(10240-t.length,t.length),0)),e={uid:o,data:encodeURIComponent(t),gamename:"xmct",op_type:"1002",openid:e},console.log("errorHandler  "+JSON.stringify(e)),s.Utils.http_request(function(){console.log("error report is ok!")},this,"https://gameapipy.6hwan.com/log/minigame_error_report",e)},l.prototype.getRequest_R_W=function(){if(console.log("SDKManager:getRequest_R_W"),window.jsb){if(cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","request_R_W","()I");if(cc.sys.platform==cc.sys.IPHONE||cc.sys.platform==cc.sys.IPAD)return 1}return 0},l.prototype.exitGame=function(){console.log("SDKManager:exitGame"),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitGame","()V"):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||cc.game.end)},l.prototype.showPrivacyPage=function(){console.log("SDKManager:showPrivacyPage"),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showPrivacyPage","()V"):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(a.gm.ui.set_module_args(a.gm.const.UserNoticePanel.key,{gameStart:1}),a.gm.ui.showModule(a.gm.const.UserNoticePanel)))},l.prototype.getAndroidUserId=function(){if(console.log("SDKManager:getAndroidUserId"),window.jsb&&cc.sys.platform==cc.sys.ANDROID)return jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getUserId","()Ljava/lang/String;")},l.prototype.getChannelAdSdkGameId=function(){return console.log("SDKManager:getChannelAdSdkGameId"),window.jsb&&cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getChannelAdSdkGameId","()Ljava/lang/String;"):""},l.prototype.getChannelAdSdkLoginType=function(){return console.log("SDKManager:getChannelAdSdkType"),window.jsb&&cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getChannelAdSdkLoginType","()Ljava/lang/String;"):""},l.prototype.more_game=function(){console.log("SDKManager:more_game"),window.jsb&&cc.sys.platform==cc.sys.ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","more_game","()V")},l.prototype.onExitGame=function(){cc.game.end()},l.prototype.set_pravicy_is_ok=function(){console.log("SDKManager:set_pravicy_is_ok"),window.jsb&&cc.sys.platform==cc.sys.ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","set_pravicy_is_ok","()V")},l.prototype.get_ad_ecpm=function(){console.log("SDKManager:get_ad_ecpm");var t="0";return window.jsb&&"juliang"==this.getChannelAdName()&&(cc.sys.platform==cc.sys.ANDROID?t="0":cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(t=jsb.reflection.callStaticMethod("AppActivity","get_ad_ecpm"))),""==t&&(t="0"),Number(t)},l.prototype.recharge=function(t){console.log("SDKManager:GooglePlay recharge: "+t),this.set_queryPurchasesState(!1),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","recharge","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","recharge:",t))},l.prototype.consume=function(t){console.log("SDKManager:GooglePlay  consume: "+t),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","consume","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","consume:",t))},l.prototype.onConsumeSucCallBack=function(t){r.ChuanShanJiaNativeGame.instance.onConsumeSucCallBack(t)},l.prototype.onSendRechargeSucToAndiordServer=function(t){r.ChuanShanJiaNativeGame.instance.sendRechargeSucToAndiordServer(t)},l.prototype.get_qureryPurchasesState=function(){return this.queryPurchasesState},l.prototype.set_queryPurchasesState=function(t){this.queryPurchasesState=t},l.prototype.queryPurchases=function(t){console.log("SDKManager:GooglePlay  queryPurchases: "+t),this.set_queryPurchasesState(!0),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","queryPurchases","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","queryPurchases:",t))},l.prototype.setGameSdkUid=function(t){console.log("SDKManager:GooglePlay  setGameSdkUid: "+t),""!=t?window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","setGameSdkUid","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","setGameSdkUid:",t)):console.log("setGameSdkUid  jsonParams\u4e3a\u7a7a")},l.prototype.AppsFlyerLogReport=function(t){console.log("SDKManager:logEventReport: "+t),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","AppsFlyerLogReport","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","AppsFlyerLogReport:",t))},l.prototype.queryProductInfo=function(t,e){console.log("SDKManager:queryProductInfo: "+t),this._queryProductInfoCallback=e,window.jsb&&(cc.sys.platform==cc.sys.ANDROID?"google"==this.getChannelAdName()&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","queryProductInfo","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","queryProductInfo:",t))},l.prototype.onQueryProductInfo=function(t){console.log("SDKManager:onQueryProductInfo: "+t),this._queryProductInfoCallback(t)},l.prototype.openUrl=function(t){console.log("SDKManager:openUrl"),window.jsb&&(cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","openUrl","(Ljava/lang/String;)V",t):cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppActivity","openUrl:",t))},l._instance=null,n=l,i.SDKManager=n,window.SDKManager=n.instance,cc._RF.pop()},{}],SaveMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6a33akOZMdNLryyk3Yx5dps","SaveMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.PlayerData=void 0;var c,s=i("AppConfig"),l=i("CommonData"),p=i("Const"),u=i("GameMgr"),d=i("LocalData"),h=i("PropMgr"),_=i("Utils"),f=i("Singleton"),g=i("EventManager"),y=i("StorageUtil"),m=i("BarbecueMenuData"),v=i("DailyTaskData"),b=i("ShopData"),I=i("StaffData"),D=i("ShelfOrderData"),C=i("TaskRecordData"),O=i("WelfareData");function w(){var t=null!==c&&c.apply(this,arguments)||this;return t._call_back=null,t}r(w,c=f.default),w.prototype.savePlayerData=function(){var t=new M;t.comm_data=l.default.getInstance(),t.task_data=C.default.getInstance(),t.daily_task_old=v.DailyTaskData.getInstance(),t.shelf_order_data=D.default.getInstance(),t.barbucue_data=m.default.getInstance(),t.staff_data=I.default.getInstance(),t.shop_data=b.default.getInstance(),t.welfare_data=O.default.getInstance(),t.lastObjectIndex=u.gm.localData.lastObjectIndex,t.curStrength=u.gm.localData.curStrength,t.curHp=u.gm.localData.curHp,t.addHp=u.gm.localData.addHp,t.addStrength=u.gm.localData.addStrength,t.debug_version=u.gm.localData.debug_version,t.initMapObjects=u.gm.localData.initMapObjects,t.initInsideObjects=u.gm.localData.initInsideObjects,t.props=u.gm.localData.props,t.mapObjectDatas=u.gm.localData.mapObjectDatas,t.collect_decoration_datas=u.gm.localData.collect_decoration_datas,t.unlockNPC=u.gm.localData.unlockNPC,t.tools=u.gm.localData.tools,t.guide=u.gm.localData.guide,t.shopLotteryTimes=u.gm.localData.shopLotteryTimes,t.shopLotteryRewardID=u.gm.localData.shopLotteryRewardID,t.unlockDistrict=u.gm.localData.unlockDistrict,t.lastGuide=u.gm.localData.lastGuide,t.npcData=u.gm.localData.npcData,t.foodMenu=u.gm.localData.foodMenu,t.warehouseLv=u.gm.localData.warehouseLv,t.lastCreateBusinessTime=u.gm.localData.lastCreateBusinessTime,t.last_create_heart_time=u.gm.localData.last_create_heart_time,t.last_resume_strength_time=u.gm.localData.last_resume_strength_time,t.last_resume_hp_time=u.gm.localData.last_resume_hp_time,t.endGuidings=u.gm.localData.endGuidings,t.shelf_unlock_slot=u.gm.localData.shelf_unlock_slot,t.lastCreateShelfNPCTime=u.gm.localData.lastCreateShelfNPCTime,t.broadcast=u.gm.localData.broadcast,t.produce_rate_unlock=u.gm.localData.produce_rate_unlock,t.truck_order=u.gm.localData.truck_order,t.explore_data=u.gm.localData.explore_data,t.onLineSecond=u.gm.localData.onLineSecond,t.lastOnlineTime=u.gm.localData.lastOnlineTime,t.getShareAward=u.gm.localData.getShareAward,t.musicOn=u.gm.localData.musicOn,t.effectOn=u.gm.localData.effectOn,t.autoCollectTime=u.gm.localData.autoCollectTime,t.autoCollectTotalTime=u.gm.localData.autoCollectTotalTime,t.autoCollectState=u.gm.localData.autoCollectState,t.broad_bless_data=u.gm.localData.broad_bless_data,t.bless_data=u.gm.localData.bless_data,t.nick_name=u.gm.localData.nick_name,t.name_change_count=u.gm.localData.name_change_count,t.invite_data=u.gm.localData.invite_data,t.sex_id=u.gm.localData.sex_id,t.history_gold=u.gm.localData.history_gold,t.last_save_time=u.gm.localData.last_save_time;var e=h.default.getPropCount(p.CommonPropID.exp);t.decorate_level=e,t=JSON.stringify(t),t=encodeURIComponent(t),t=_.Utils.lzstring.compressToBase64(t),t={uid:u.gm.data.uid,token:u.gm.data.token,coins:u.gm.localData.history_gold,build_percent:u.gm.localData.history_gold,decorate_level:u.gm.localData.history_gold,diamond:h.default.getPropCount(p.CommonPropID.diamond),client_uid:u.gm.data.uid,op_type:"player_data",data:t},_.Utils.http_request(this.savePlayerDataCb,this,u.gm.channel.getServerUrl()+"user/update_player_data",t)},w.prototype.savePlayerDataCb=function(){},w.prototype.setDataFromoCache=function(t,e){if(null!=t&&!(t.length<=0)){var o=null;try{o=JSON.parse(t)}catch(t){return void cc.error("\u73a9\u5bb6\u6570\u636e\u53cd\u5e8f\u5217\u5316\u5931\u8d25")}if(null!=o)if(e instanceof Array)for(;0<o.length;)e.push(o.shift());else for(var n in e)if(null!=o[n])if(e[n]instanceof Array)for(e[n]=[];0<o[n].length;)e[n].push(o[n].shift());else e[n]=o[n]}},w.prototype.get_player_data_on_rsp=function(t){var e;0==t.ResultCode&&null!=t.data&&(e=new M,t=_.Utils.lzstring.decompressFromBase64(t.data.player_data),t=decodeURIComponent(t),this.setDataFromoCache(t,e),h.default.getPropCount(p.CommonPropID.exp),e.history_gold>u.gm.localData.history_gold&&(Object.assign(l.default.getInstance(),e.comm_data),l.default.getInstance().async_write_data(),Object.assign(C.default.getInstance(),e.task_data),C.default.getInstance().async_write_data(),Object.assign(v.DailyTaskData.getInstance(),e.daily_task_old),v.DailyTaskData.getInstance().async_write_data(),Object.assign(D.default.getInstance(),e.shelf_order_data),D.default.getInstance().async_write_data(),Object.assign(m.default.getInstance(),e.barbucue_data),m.default.getInstance().async_write_data(),Object.assign(I.default.getInstance(),e.staff_data),I.default.getInstance().async_write_data(),Object.assign(b.default.getInstance(),e.shop_data),b.default.getInstance().async_write_data(),Object.assign(O.default.getInstance(),e.welfare_data),O.default.getInstance().async_write_data(),u.gm.localData.lastObjectIndex=e.lastObjectIndex,u.gm.localData.saveByKey("lastObjectIndex"),u.gm.localData.curStrength=e.curStrength,u.gm.localData.saveByKey("curStrength"),u.gm.localData.curHp=e.curHp,u.gm.localData.saveByKey("curHp"),u.gm.localData.addHp=e.addHp,u.gm.localData.saveByKey("addHp"),u.gm.localData.addStrength=e.addStrength,u.gm.localData.saveByKey("addStrength"),u.gm.localData.debug_version=e.debug_version,u.gm.localData.saveByKey("debug_version"),u.gm.localData.initMapObjects=e.initMapObjects,u.gm.localData.saveByKey("initMapObjects"),u.gm.localData.initInsideObjects=e.initInsideObjects,u.gm.localData.saveByKey("initInsideObjects"),u.gm.localData.props=e.props,u.gm.localData.saveByKey("props"),Object.assign(u.gm.localData.mapObjectDatas,e.mapObjectDatas),u.gm.localData.saveByKey("mapObjectDatas"),Object.assign(u.gm.localData.collect_decoration_datas,e.collect_decoration_datas),u.gm.localData.saveByKey("collect_decoration_datas"),u.gm.localData.unlockNPC=e.unlockNPC,u.gm.localData.saveByKey("unlockNPC"),Object.assign(u.gm.localData.tools,e.tools),u.gm.localData.saveByKey("tools"),u.gm.localData.guide=e.guide,u.gm.localData.saveByKey("guide"),u.gm.localData.shopLotteryTimes=e.shopLotteryTimes,u.gm.localData.saveByKey("shopLotteryTimes"),u.gm.localData.shopLotteryRewardID=e.shopLotteryRewardID,u.gm.localData.saveByKey("shopLotteryRewardID"),u.gm.localData.unlockDistrict=e.unlockDistrict,u.gm.localData.saveByKey("unlockDistrict"),u.gm.localData.lastGuide=e.lastGuide,u.gm.localData.saveByKey("lastGuide"),u.gm.localData.npcData=e.npcData,u.gm.localData.saveByKey("npcData"),Object.assign(u.gm.localData.foodMenu,e.foodMenu),u.gm.localData.saveByKey("foodMenu"),u.gm.localData.warehouseLv=e.warehouseLv,u.gm.localData.saveByKey("warehouseLv"),u.gm.localData.lastCreateBusinessTime=e.lastCreateBusinessTime,u.gm.localData.saveByKey("lastCreateBusinessTime"),u.gm.localData.last_create_heart_time=e.last_create_heart_time,u.gm.localData.saveByKey("last_create_heart_time"),u.gm.localData.last_resume_strength_time=e.last_resume_strength_time,u.gm.localData.saveByKey("last_resume_strength_time"),u.gm.localData.last_resume_hp_time=e.last_resume_hp_time,u.gm.localData.saveByKey("last_resume_hp_time"),u.gm.localData.endGuidings=e.endGuidings,u.gm.localData.saveByKey("endGuidings"),u.gm.localData.shelf_unlock_slot=e.shelf_unlock_slot,u.gm.localData.saveByKey("shelf_unlock_slot"),u.gm.localData.lastCreateShelfNPCTime=e.lastCreateShelfNPCTime,u.gm.localData.saveByKey("lastCreateShelfNPCTime"),Object.assign(u.gm.localData.broadcast,e.broadcast),u.gm.localData.saveByKey("broadcast"),u.gm.localData.produce_rate_unlock=e.produce_rate_unlock,u.gm.localData.saveByKey("produce_rate_unlock"),Object.assign(u.gm.localData.truck_order,e.truck_order),u.gm.localData.saveByKey("truck_order"),Object.assign(u.gm.localData.explore_data,e.explore_data),u.gm.localData.saveByKey("explore_data"),u.gm.localData.onLineSecond=e.onLineSecond,u.gm.localData.saveByKey("onLineSecond"),u.gm.localData.lastOnlineTime=e.lastOnlineTime,u.gm.localData.saveByKey("lastOnlineTime"),u.gm.localData.getShareAward=e.getShareAward,u.gm.localData.saveByKey("getShareAward"),u.gm.localData.musicOn=e.musicOn,u.gm.localData.saveByKey("musicOn"),u.gm.localData.effectOn=e.effectOn,u.gm.localData.saveByKey("effectOn"),u.gm.localData.autoCollectTime=e.autoCollectTime,u.gm.localData.saveByKey("autoCollectTime"),u.gm.localData.autoCollectTotalTime=e.autoCollectTotalTime,u.gm.localData.saveByKey("autoCollectTotalTime"),u.gm.localData.autoCollectState=e.autoCollectState,u.gm.localData.saveByKey("autoCollectState"),Object.assign(u.gm.localData.broad_bless_data,e.broad_bless_data),u.gm.localData.saveByKey("broad_bless_data"),Object.assign(u.gm.localData.bless_data,e.bless_data),u.gm.localData.saveByKey("bless_data"),u.gm.localData.nick_name=e.nick_name,u.gm.localData.saveByKey("nick_name"),u.gm.localData.name_change_count=e.name_change_count,u.gm.localData.saveByKey("name_change_count"),Object.assign(u.gm.localData.invite_data,e.invite_data),u.gm.localData.saveByKey("invite_data"),u.gm.localData.sex_id=e.sex_id,u.gm.localData.saveByKey("sex_id"),u.gm.localData.history_gold=e.history_gold,u.gm.localData.saveByKey("history_gold"),u.gm.localData.last_save_time=e.last_save_time,u.gm.localData.saveByKey("last_save_time"))),this._call_back&&this._call_back(),g.default.emit(p.GameEvent.get_server_data_done)},w.prototype.getPlayerDataFromServer=function(t){if(this._call_back=t,d.default.getInstance().load(),t=y.default.get("debug_version",!0)||0,s.default.allow_clear_local_data&&s.default.debug_version>t)return y.default.clear(),d.default.getInstance().load(),this.readData(),this._call_back&&this._call_back(),g.default.emit(p.GameEvent.get_server_data_done),void this.savePlayerData();this.readData(),t={uid:u.gm.data.uid,token:u.gm.data.token,op_type:"player_data",open_id:u.gm.data.open_id},_.Utils.http_request(this.get_player_data_on_rsp,this,u.gm.channel.getServerUrl()+"user/get_player_data",t)},w.prototype.readData=function(){l.default.getInstance().async_read_data(),C.default.getInstance().async_read_data(function(){}),v.DailyTaskData.getInstance().async_read_data(function(){}),D.default.getInstance().async_read_data(function(){}),m.default.getInstance().async_read_data(),I.default.getInstance().async_read_data(function(){}),b.default.getInstance().async_read_data(),O.default.getInstance().async_read_data()},r=w,a.default=r;var M=function(){this.comm_data=null,this.task_data=null,this.daily_task_old=null,this.shelf_order_data=null,this.barbucue_data=null,this.staff_data=null,this.shop_data=null,this.welfare_data=null,this.lastObjectIndex=0,this.curStrength=0,this.curHp=0,this.addHp=0,this.addStrength=0,this.debug_version=0,this.initMapObjects={},this.initInsideObjects={},this.props={},this.mapObjectDatas={},this.collect_decoration_datas={},this.unlockNPC=[],this.tools={},this.guide=!1,this.shopLotteryTimes=0,this.shopLotteryRewardID=[],this.unlockDistrict=[],this.lastGuide={id:0,index:-1},this.npcData={},this.foodMenu={},this.warehouseLv=1,this.lastCreateBusinessTime=0,this.last_create_heart_time=0,this.last_resume_strength_time=0,this.last_resume_hp_time=0,this.endGuidings=[],this.shelf_unlock_slot=[],this.lastCreateShelfNPCTime=0,this.broadcast=null,this.produce_rate_unlock=[],this.truck_order=null,this.explore_data=null,this.onLineSecond=0,this.lastOnlineTime=0,this.getShareAward=[],this.musicOn=1,this.effectOn=1,this.autoCollectTime=0,this.autoCollectTotalTime=0,this.autoCollectState=0,this.broad_bless_data=[],this.bless_data=null,this.nick_name="",this.name_change_count=0,this.invite_data=null,this.sex_id=0,this.history_gold=0,this.last_save_time=0,this.decorate_level=0};a.PlayerData=M,cc._RF.pop()},{}],SceneExploreLogic:[function(t,e,o){"use strict";cc._RF.push(e,"c12c1BJUBBAS7gHSX3X8G14","SceneExploreLogic");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0});var r=i("AudioUtils"),c=i("CommonUtils"),s=i("ConfigUtils"),l=i("Const"),p=i("FlyIconCreator"),u=i("GameMgr"),d=i("PropMgr"),h=i("Utils"),_=i("AssetMgr"),f=i("EventManager"),g=i("GetAwardUI"),y=i("DailyTaskData"),m=i("GuideMgr"),v=i("StrengthMgr"),b=i("TaskRecordData"),I=i("ToolMgr"),D=i("CharaPet"),C=i("ExploreData"),O=i("FlyHp"),w=i("PlayerBullet");function M(){this.pView=null,this.iCurZoneId=1,this.tZoneResMap=null,this.tTempHideCharas=null,this.bIsBattling=!1,this._is_load=!1,this._is_load_all=!1,this._waiting_time=0,this._event_list=[],this.pPetChara=[],this.is_can_move=!0,this._chara_item=null,this._tResVo=null,this._tCfgZoneRes=null,this._attack_time=0}i=(n=cc._decorator).ccclass,n.property,M.prototype.setView=function(t){this.pView=t},Object.defineProperty(M.prototype,"curZoneId",{get:function(){return this.iCurZoneId},enumerable:!1,configurable:!0}),M.prototype.onLoad=function(){},M.prototype.onDisable=function(){this.tZoneResMap=null,this.tTempHideCharas=null,this.pView.unscheduleAllCallbacks(),this.pView.node_map.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancle,this),this.pView.node_map.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),f.default.off(l.GameEvent.explore_show_pet,this.show_pet,this),f.default.off(l.GameEvent.explore_go_home,this.onClickGoHome,this),f.default.off(l.GameEvent.delete_explore_pet,this.deleteChara,this),f.default.off(l.GameEvent.explore_reset_hp,this.reset_hp,this),f.default.off(l.GameEvent.explore_relive,this.relivePlayer,this),f.default.off(l.GameEvent.explore_attack_monster,this.eventClickMonster,this),f.default.off(l.GameEvent.explore_monster_hp,this.explore_monster_hp,this),f.default.off(l.GameEvent.explore_auto_attack_monster,this.eventAutoClickMonster,this),f.default.off(l.GameEvent.explore_follow,this.explore_follow,this),f.default.off(l.GameEvent.change_facade,this.change_facade,this),f.default.off(l.GameEvent.feed_pet,this.feed_pet,this)},M.prototype.onEnable=function(){this.pView.unscheduleAllCallbacks(),cc.director.getCollisionManager().enabled=!0,this._is_load=!1,this._is_load_all=!1,this.initZone(),f.default.on(l.GameEvent.explore_show_pet,this.show_pet,this),f.default.on(l.GameEvent.explore_go_home,this.onClickGoHome,this),f.default.on(l.GameEvent.delete_explore_pet,this.deleteChara,this),f.default.on(l.GameEvent.explore_reset_hp,this.reset_hp,this),f.default.on(l.GameEvent.explore_relive,this.relivePlayer,this),f.default.on(l.GameEvent.explore_attack_monster,this.eventClickMonster,this),f.default.on(l.GameEvent.explore_auto_attack_monster,this.eventAutoClickMonster,this),f.default.on(l.GameEvent.explore_monster_hp,this.explore_monster_hp,this),f.default.on(l.GameEvent.explore_follow,this.explore_follow,this),f.default.on(l.GameEvent.change_facade,this.change_facade,this),f.default.on(l.GameEvent.feed_pet,this.feed_pet,this),this._event_list=[],u.gm.localData.explore_data.explore_scale=u.gm.const.exploreMapInitScale,this.pView.node_map.scale=u.gm.const.exploreMapInitScale,this.is_can_move=!0,this.pView.node_map.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancle,this),this.pView.node_map.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},M.prototype.feed_pet=function(){this.pMainChara.isWalking()&&(this.pMainChara.resetWalk(),this.pMainChara.setStandByAni())},M.prototype.change_facade=function(){this.pMainChara.model.updateUI(this.pMainChara.isBack)},M.prototype.monsterDie=function(t,e){var o=this;if(I.default.getInstance().getCurTool(l.ToolClass.gongnu),this.pMainChara.setIsFightingRes(!1),this.pMainChara.setIsCollectingRes(!1),this.pMainChara.set_attack_uid(0),this.pMainChara.set_attacking_uid(0),this.pMainChara.setCollectId(0),this.pMainChara.setStandByAni(),this.pet_stand(),this.pMainChara.delete_attack_me_uid(e),this.tZoneResMap[e]){var n=s.ConfigUtils.CollectionsUtils.getConfig(this.tZoneResMap[e].iResId);b.default.getInstance().addKillData(this.tZoneResMap[e].iResId,1),u.gm.localData.explore_data.kill_monster_count||(u.gm.localData.explore_data.kill_monster_count=0),u.gm.localData.explore_data.kill_monster_count++,u.gm.localData.saveByKey("explore_data");var i=s.PropRandomPool.getItemsByPoolID(u.gm.localData.explore_data.kill_monster_count<=5?700006:n.random_pool,1);d.default.addProps(i,!1),d.default.addProps(n.mastery_produce,!1),n=this.tZoneResMap[e],e=s.OutSideMapResUtils.getConfig(this.iCurZoneId,n.iResId),e=h.Utils.get_cur_time()+h.Utils.math_random(!0,e.cd_min,e.cd_max+1),u.gm.localData.explore_data.collectZoneRes(this.iCurZoneId,n.iResId,n.iResIndex,e);var a=n.uid;this.pView.scheduleOnce(function(){delete o.tZoneResMap[a],o.pView.deleteChara(a)},.5);var r=this.pMainChara.getComponent(p.default);(r=r||this.pMainChara.addComponent(p.default)).nod_from=t.node;for(var _=0,f=i;_<f.length;_++){var g=f[_];g.id==l.CommonPropID.exp?c.default.flyIconToExp_2(g,r,g.num):c.default.flyIconToWarehouse_2(g,r,g.num)}u.gm.localData.saveByKey("explore_data")}},M.prototype.explore_monster_hp=function(t,e){var o;this.tZoneResMap[e]&&(this.tZoneResMap[e].leftHp-=t,f.default.emit(l.GameEvent.explore_monster_show_hp,this.tZoneResMap[e].leftHp,e),o=this.pZone.getChara(e),u.gm.pool.async_get(l.BundleName.MAIN_UI,"prefabs/explore/fly_hp",O.default,function(e){e.set_hp_node(0,0,t),o.node.addChild(e.node)}),this.tZoneResMap[e].leftHp<=0&&this.monsterDie(o,e))},M.prototype.relivePlayer=function(){this.pView.getMainChara()&&this.pView.getMainChara().setIsDie(!1)},M.prototype.show_pet=function(t){var e=this;_.default.getInstance().getResAsyn(l.BundleName.MAIN_UI,"prefabs/explore/pet/pet_"+t,cc.Prefab,function(o){var n=cc.instantiate(o).getComponent(D.default);n.init(),n.setPetId(t),(o=u.gm.localData.explore_data.getPetPos(t))?(n.node.x=o.x,n.node.y=o.y):(n.node.x=e.pMainChara.node.x,n.node.y=e.pMainChara.node.y),(o=cc.v2(0,0)).x=n.node.x,o.y=n.node.y,e.pPetChara.push(n),e.pZone.addChara(n,null,null,260,o),e.pView.set_new_pet(n)})},M.prototype.calc_map_scale=function(){},M.prototype.touchStart=function(t){if(this.pView.getZone()){this.pView.getZone().setNeedCameraFollow(!1);for(var e=t.getTouches(),o=0;o<e.length;++o){for(var n=!1,i=0;i<this._event_list.length;++i)if(e[o].getID()==this._event_list[i].getID()){n=!0;break}n||this._event_list.push(e[o])}this.pZone.is_moving=!0}else console.log("touchStart !zone")},M.prototype.touchMove=function(t){var e;0<this.pMainChara.attacking_uid?console.log("touchMove,uid="+this.pMainChara.attacking_uid):this.pView.getZone()?((2<=t.getTouches().length||2<=this._event_list.length)&&console.log("touchMove !length"),(e=this.pView.getZone().node)?(e.x+=2.5*t.getDelta().x*this.pView.node_map.scaleX,e.y+=2.5*t.getDelta().y*this.pView.node_map.scaleY,t=this.pView.check_zone_pos(e.getPosition(),this.pView.node_map.scale),e.x=t.x,e.y=t.y):console.log("touchMove !zone_node")):console.log("touchMove !zone")},M.prototype.set_can_move=function(t){this.is_can_move=t},Object.defineProperty(M.prototype,"get_is_can_move",{get:function(){return this.is_can_move},enumerable:!1,configurable:!0}),M.prototype.touchEnd=function(t){var e,o=this;if(this.is_can_move&&this.pView.getZone()&&(this.clear_touch(t),this.pZone)){if(this.pZone.is_moving=!1,f.default.emit(l.GameEvent.explore_item),this.iCurZoneId<100&&10<=h.Utils.distance(t.getStartLocation(),t.getLocation()))return this.pMainChara.attacking_uid<=0&&f.default.emit(l.GameEvent.show_exlore_follow),this.pView.refreshZoneCharas(),void this.pZone.check_screen_map(!1);this.pView.getZone().node&&this.pMainChara&&((e=cc.v2(0,0)).x=-this.pMainChara.node.x,e.y=-this.pMainChara.node.y,this.pView.check_zone_pos(e,this.pView.node_map.scale),u.gm.ui.get_module(u.gm.const.BaseUI).nod_follow.active||this.pZone.setNeedCameraFollow(!0),this.pMainChara.setIsCollectingRes(!1),t=this.pZone.getTouchPos(t),this.pMainChara.setStandByAni(),this.pMainChara.playAniByType(l.EnumRoleAniType.walk),this.pMainChara.walkTo(t,function(){o.pMainChara.setStandByAni(),u.gm.localData.explore_data.last_pos.x=o.pMainChara.node.x,u.gm.localData.explore_data.last_pos.y=o.pMainChara.node.y,u.gm.localData.saveByKey("explore_data")})?(this.pet_walk(t),u.gm.localData.explore_data.target_pos=t):(this.pMainChara.setStandByAni(),u.gm.ui.showNotice("\u4eb2\u7231\u7684\u5c0f\u4e3b\uff0c\u76ee\u7684\u5730\u5728\u969c\u788d\u4e2d\u662f\u65e0\u6cd5\u884c\u8d70\u8fc7\u53bb\u7684\u54e6")),this.pMainChara.set_attack_uid(0),this.pMainChara.setCollectId(0),this.pMainChara.setIsFightingRes(!1),0<this.pMainChara.attacking_uid&&(!(t=this.pZone.getChara(this.pMainChara.attacking_uid))||h.Utils.distance(this.pMainChara.node,t.node)>=u.gm.const.player_attack_len)&&this.pMainChara.set_attacking_uid(0))}},M.prototype.explore_follow=function(){var t,e,o=this,n=this.pView.getZone().node;n&&((e=cc.v2(0,0)).x=-this.pMainChara.node.x,e.y=-this.pMainChara.node.y,t=this.pView.check_zone_pos(e,this.pView.node_map.scale),e=h.Utils.distance(t,n)/4e3,n.runAction(cc.moveTo(e,t)),this.pView.scheduleOnce(function(){o.pZone.setNeedCameraFollow(!0),o.pZone.check_screen_map(!1)},e))},M.prototype.pet_walk=function(){},M.prototype.pet_stand=function(){},M.prototype.clear_touch=function(t){for(var e=t.getTouches(),o=0;o<this._event_list.length;++o)for(var n=0;n<e.length&&this._event_list[o];++n)e[n].getID()==this._event_list[o].getID()&&this._event_list.splice(o,1);this.calc_map_scale()},M.prototype.touchCancle=function(t){this.clear_touch(t),this.pZone.is_moving=!1},M.prototype.appearRes=function(t,e){(e=s.OutSideMapResUtils.getConfig(this.iCurZoneId,e))&&(this.pZone.mask_node.active=!0,h.Utils.derangedArray(e.pos_list))},M.prototype.update_res=function(){var t,e=h.Utils.get_cur_time(),o=u.gm.localData.explore_data.getZoneData(this.iCurZoneId);for(t in o.tResMap){var n=o.tResMap[t];if(!(n.length<=0)&&s.OutSideMapResUtils.getConfig(this.iCurZoneId,n[0].id)){var i=0,a=s.ConfigUtils.CollectionsUtils.getConfig(n[0].id);a&&(i=a.collect_hp);for(var r=0;r<n.length;r++){var c,l=n[r];0<l.iNextGenTime&&l.iNextGenTime<e&&(c=h.Utils.get_next_uid(),this.tZoneResMap[c]={uid:c,iResId:l.id,type:0,sPosName:l.sPosName,sPrefab:"",iResIndex:r,iZIndex:0,pos:cc.v2(0,0),leftHp:i,maxHp:i,leftCount:l.leftCount},c=this.tZoneResMap[c],this.pView.checkResInScreen(c)&&this.checkCanShowCharaInScreen(c.uid)&&this.pView.apppear_chara(c,null),l.iNextGenTime=0,l.is_send=!1,l.uid=c.uid)}}}},M.prototype.set_bIsBattling=function(t){this.bIsBattling=t},M.prototype.initZone=function(){var t;u.gm.localData.explore_data?(t=new C.ExploreData,Object.assign(t,u.gm.localData.explore_data),u.gm.localData.explore_data=t):(u.gm.localData.explore_data=new C.ExploreData,u.gm.localData.explore_data.init_data()),this.iCurZoneId=u.gm.localData.explore_data.chapter_id,this.tZoneResMap={},this.tTempHideCharas={},this.bIsBattling=!1;var e,o=u.gm.localData.explore_data.getZoneData(this.iCurZoneId),n=h.Utils.get_cur_time();for(e in o.tResMap){var i=o.tResMap[e];if(!(i.length<=0)&&s.OutSideMapResUtils.getConfig(this.iCurZoneId,i[0].id)){var a=0,r=s.ConfigUtils.CollectionsUtils.getConfig(i[0].id);r&&(a=r.collect_hp);for(var c=0;c<i.length;c++){var l,p=i[c];p.iNextGenTime<n&&(l=h.Utils.get_next_uid(),p.uid=l,p.iNextGenTime=0,p.iNextDisappearTime=0,this.tZoneResMap[l]={uid:l,iResId:p.id,type:0,sPosName:p.sPosName,sPrefab:"",iResIndex:c,iZIndex:0,pos:cc.v2(0,0),leftHp:a,maxHp:a,leftCount:p.leftCount})}}}this.pView.loadZone(this.iCurZoneId,null)},Object.defineProperty(M.prototype,"arg",{get:function(){return this._args},enumerable:!1,configurable:!0}),M.prototype.getZoneResMap=function(){return this.tZoneResMap},M.prototype.onCharaLeaveScreen=function(t){delete this.tTempHideCharas[t]},M.prototype.checkCanShowCharaInScreen=function(t){return null==this.tTempHideCharas[t]},M.prototype.onCharaEvent=function(t,e){switch(t){case l.CharaEventTypeEnum.CLICK:this.onCharaEventClick(e);break;case l.CharaEventTypeEnum.DISAPPEAR:this.onCharaEventDisappear(e)}},M.prototype.onCharaEventDisappear=function(t){t&&this.tZoneResMap[t.getUid()]},M.prototype.onStrengthNotEnough=function(t){this.pMainChara.setStandByAni(),u.gm.ui.showModule(u.gm.const.GetStrengthUI,function(t){t.setData(1)}),t.resetHp()},M.prototype.onToolBreakdown=function(t,e){u.gm.ui.showNotice("\u5de5\u5177\u5df2\u7834\u635f\uff0c\u8bf7\u4fee\u590d"),u.gm.ui.showModule(u.gm.const.ToolRoomUI,function(e){e.setData(t.toolType,1),m.default.getInstance().showFinger(1005,3,!0)}),this.pMainChara.setStandByAni(),e.resetHp()},M.prototype.onSpineEvent=function(t,e){var o;this.pMainChara.getIsFightingRes()&&0<this.pMainChara.attack_uid?"crossbow"==e.data.name&&(o=this.pZone.getChara(this.pMainChara.attack_uid),this.attackMonster(o)):(o=s.BigMapConfigUtils.getConfig(this._tResVo.iResId).type.sub_type,o=I.default.getInstance().getCurTool(o).getCurLvConfig(),this._tResVo.leftHp-=o.tool_atk,u.gm.localData.saveByKey("explore_data"),v.default.getInstance().reduce(o.energy_coast),0<=this._tResVo.leftHp&&this._chara_item.showHp(this._tResVo.leftHp,s.ConfigUtils.CollectionsUtils.getConfig(this._tResVo.iResId).collect_hp),"axe"==e.data.name?(r.default.collect_wood(),this._chara_item.play_animation(null),this.onAttact(this._tResVo,this._chara_item,this._tCfgZoneRes)):"mininghoe"==e.data.name?(r.default.collect_stone(),this.onAttact(this._tResVo,this._chara_item,this._tCfgZoneRes)):"sickle"==e.data.name?(r.default.collect_plant(),this._chara_item.play_animation(function(){}),this.onAttact(this._tResVo,this._chara_item,this._tCfgZoneRes)):"shovel"==e.data.name?(r.default.collect_mushroom(),this._chara_item.play_animation(function(){}),this.onAttact(this._tResVo,this._chara_item,this._tCfgZoneRes)):"hoe"==e.data.name&&(r.default.collect_wood(),this._chara_item.play_animation(function(){}),this.onAttact(this._tResVo,this._chara_item,this._tCfgZoneRes)),this.pMainChara.attack_end=!0)},M.prototype.onAttact=function(t,e,o){var n=s.ConfigUtils.CollectionsUtils.getConfig(t.iResId);if(this.pMainChara){if(t.leftHp<=0){this.pView.getMainChara().setIsCollectingRes(!1),this.pMainChara.setStandByAni();var i,a=!0;if(n)if(o.res_type==l.OutSideResClass.collection){d.default.addProps(n.need_prop,!1),d.default.addProps(n.mastery_produce,!1);var r=this.pMainChara.getComponent(p.default);(r=r||this.pMainChara.addComponent(p.default)).nod_from=e.node;for(var _=0,m=n.need_prop;_<m.length;_++){var v=m[_];v.id==l.CommonPropID.exp?c.default.flyIconToExp_2(v,r,v.num):c.default.flyIconToWarehouse_2(v,r,v.num)}y.DailyTaskData.getInstance().collect++,y.DailyTaskData.getInstance().async_write_data()}else o.res_type==l.OutSideResClass.box?(i=s.PropRandomPool.getItemsByPoolID(n.random_pool,1),u.gm.ui.showModule(u.gm.const.SurpriseUI,function(t){t.setData(i,g.GetAwardType.button,1)})):o.res_type==l.OutSideResClass.pet&&(a=!1,u.gm.ui.showModule(u.gm.const.ExplorePet,function(o){o.setData(n.need_prop[0].id,1,t.iResId,t.iResIndex,t.uid,e.node.getPosition())}));a&&(a=h.Utils.get_cur_time()+h.Utils.math_random(!0,o.cd_min,o.cd_max+1),u.gm.localData.explore_data.collectZoneRes(this.iCurZoneId,t.iResId,t.iResIndex,a),delete this.tZoneResMap[t.uid],this.pView.deleteChara(t.uid),f.default.emit(l.GameEvent.updateBase))}o.res_type==l.OutSideResClass.collection&&(o=s.BigMapConfigUtils.getConfig(this._tResVo.iResId).type.sub_type,I.default.getInstance().getCurTool(o).use())}},M.prototype.onAniDone=function(t){s.ConfigUtils.CollectionsUtils.getConfig(t.iResId)},M.prototype.collect_res=function(t,e){var o=this;this._chara_item=e,this._tResVo=t;var n,i,a=s.OutSideMapResUtils.getConfig(this.iCurZoneId,t.iResId);if(this._tCfgZoneRes=a)if(a.res_type==l.OutSideResClass.collection)if(a.res_id<1e4)this.stop_auot_collect();else{this.pMainChara.updateDir(e.node.x-this.pMainChara.node.x,e.node.y-this.pMainChara.node.y);var r=s.BigMapConfigUtils.getConfig(t.iResId);if(r.tool_need){var c=r.type.sub_type;if(c){if(r=s.ConfigUtils.CollectionsUtils.getConfig(t.iResId)){if(!I.default.getInstance().hasTool(c))return this.pMainChara.setStandByAni(),e.resetHp(),c==l.CollectionSubType.wood?u.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52303\u7ea7\u5e76\u5b8c\u6210\u4f10\u6728\u5de5\u7684\u59d4\u6258\u540e\u53ef\u91c7\u96c6"):c==l.CollectionSubType.stone?u.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52304\u7ea7\u5e76\u5b8c\u6210\u77ff\u5de5\u7684\u59d4\u6258\u540e\u53ef\u91c7\u96c6"):c==l.CollectionSubType.mushroom?u.gm.ui.showNotice("\u7b49\u7ea7\u8fbe\u52305\u7ea7\u5e76\u5b8c\u6210\u4fee\u7406\u7076\u53f0\u4efb\u52a1\u540e\u53ef\u91c7\u96c6"):u.gm.ui.showNotice("\u6ca1\u6709\u5de5\u5177"),void this.stop_auot_collect();var p=I.default.getInstance().getCurTool(c),d=p.getCurLvConfig();return d.tool_level>=r.collect_level?d.energy_coast>v.default.getInstance().getCurStrength()?(u.gm.localData.autoCollectState=0,this.onStrengthNotEnough(e),void this.stop_auot_collect()):p.isDruability()?(this.pView.getMainChara().setIsCollectingRes(!0),e.showHp(t.leftHp,s.ConfigUtils.CollectionsUtils.getConfig(t.iResId).collect_hp),void(c==l.ToolClass.liandao?this.pMainChara.setRoleAniCut(1,function(){return e?(o.onAniDone(t,e,a),d.energy_coast>v.default.getInstance().getCurStrength()?(o.onStrengthNotEnough(e),void o.stop_auot_collect()):p.isDruability()?void 0:(o.onToolBreakdown(p,e),void o.stop_auot_collect(1))):void o.pMainChara.setStandByAni()}):c==l.ToolClass.futou?this.pMainChara.setRoleAniAxe(1,function(){return e?(o.onAniDone(t,e,a),d.energy_coast>v.default.getInstance().getCurStrength()?(o.onStrengthNotEnough(e),void o.stop_auot_collect()):p.isDruability()?void 0:(o.onToolBreakdown(p,e),void o.stop_auot_collect(1))):void o.pMainChara.setStandByAni()}):c==l.ToolClass.chanzi?this.pMainChara.setRoleAniShovel(1,function(){return e?(o.onAniDone(t,e,a),d.energy_coast>v.default.getInstance().getCurStrength()?(o.onStrengthNotEnough(e),void o.stop_auot_collect()):p.isDruability()?void 0:(o.onToolBreakdown(p,e),void o.stop_auot_collect(1))):void o.pMainChara.setStandByAni()}):c==l.ToolClass.chutou?this.pMainChara.setRoleAniHoe(1,function(){return e?(o.onAniDone(t,e,a),d.energy_coast>v.default.getInstance().getCurStrength()?(o.onStrengthNotEnough(e),void o.stop_auot_collect()):p.isDruability()?void 0:(o.onToolBreakdown(p,e),void o.stop_auot_collect(1))):void o.pMainChara.setStandByAni()}):this.pMainChara.setRoleAniPickaxe(1,function(){return e?(o.onAniDone(t,e,a),d.energy_coast>v.default.getInstance().getCurStrength()?(o.onStrengthNotEnough(e),void o.stop_auot_collect()):p.isDruability()?void 0:(o.onToolBreakdown(p,e),void o.stop_auot_collect(1))):void o.pMainChara.setStandByAni()}))):(this.onToolBreakdown(p,e),void this.stop_auot_collect(1)):(this.pMainChara.setStandByAni(),e.resetHp(),u.gm.ui.showNotice(d.prop_name+"\u7b49\u7ea7\u4e0d\u8db3"),void this.stop_auot_collect())}this.stop_auot_collect()}else this.stop_auot_collect()}else this.pMainChara.setRoleAniClean(1,function(){o.pMainChara.setStandByAni()})}else a.res_type==l.OutSideResClass.pet?(this.pMainChara.setStandByAni(),this.pet_stand(),n=s.ConfigUtils.CollectionsUtils.getConfig(t.iResId),u.gm.ui.showModule(u.gm.const.ExplorePet,function(o){o.setData(n.need_prop[0].id,1,t.iResId,t.iResIndex,t.uid,e.node.getPosition())})):a.res_type==l.OutSideResClass.monster?this.attackMonster(e):a.res_type==l.OutSideResClass.npc?(this.pMainChara.setStandByAni(),this.pet_stand(),u.gm.ui.showModule(u.gm.const.ExploreStore,function(){})):a.res_type==l.OutSideResClass.box&&(this.pMainChara.setStandByAni(),this.pet_stand(),i=s.ConfigUtils.CollectionsUtils.getConfig(t.iResId),u.gm.ui.showModule(u.gm.const.ExploreBox,function(e){e.setData(i.random_pool,o.iCurZoneId,a.res_id,t.iResIndex,t.uid)}))},M.prototype.stop_auot_collect=function(t){void 0===t&&(t=0),u.gm.localData.autoCollectState=0==u.gm.localData.autoCollectState?0:t,u.gm.localData.saveByKey("autoCollectState"),this.pMainChara.setIsCollectingRes(!1),this.pMainChara.setIsFightingRes(!1),this.pMainChara.set_attack_uid(0),this.pMainChara.set_attacking_uid(0),this.pMainChara.setCollectId(0),this.pMainChara.delete_attack_me_uid(),this.pMainChara.setStandByAni()},M.prototype.realAttackMonster=function(t){var e=this,o=I.default.getInstance().getCurTool(l.ToolClass.gongnu);if(!o)return this.pet_stand(),this.pMainChara.set_attack_uid(0),this.pMainChara.set_attacking_uid(0),void this.pMainChara.setStandByAni();var n=o.getCurLvConfig();if(!o.isDruability())return this.onToolBreakdown(o,t),this.pet_stand(),this.pMainChara.set_attack_uid(0),this.pMainChara.set_attacking_uid(0),void this.pMainChara.setStandByAni();if(this.pMainChara.setRoleAniAttack(1,function(){e.attackMonster(t)}),Date.now()-600<=this._attack_time)this.pMainChara.set_attacking_uid(0);else{o.use(),this._attack_time=Date.now();for(var i=0;i<1;++i)!function(o){u.gm.pool.async_get(l.BundleName.MAIN_UI,"prefabs/explore/bullet/player_bullet",w.default,function(i){var a=cc.v2(0,0);a.x=e.pMainChara.node.x,a.y=e.pMainChara.node.y+120,a=e.pMainChara.downOrTop==l.EnumDownOrUp.down&&e.pMainChara.leftOrRight==l.EnumLeftOrRight.left?h.Utils.convertPosAR(e.pMainChara.bullet_node[0],e.pZone.node):e.pMainChara.downOrTop==l.EnumDownOrUp.down&&e.pMainChara.leftOrRight==l.EnumLeftOrRight.right?h.Utils.convertPosAR(e.pMainChara.bullet_node[1],e.pZone.node):e.pMainChara.downOrTop==l.EnumDownOrUp.up&&e.pMainChara.leftOrRight==l.EnumLeftOrRight.left?h.Utils.convertPosAR(e.pMainChara.bullet_node[2],e.pZone.node):h.Utils.convertPosAR(e.pMainChara.bullet_node[3],e.pZone.node),i.node.x=a.x,i.node.y=a.y,i.init(),e.pZone.addChara(i,null,0,0,null),i.setAttack(n.tool_atk,"jian"),i.bulletMove(t,o),i.set_is_bullet(!0)})}(i)}},M.prototype.resetPlayerState=function(){this.pMainChara.setIsFightingRes(!1),this.pMainChara.setIsCollectingRes(!1),this.pMainChara.set_attack_uid(0),this.pMainChara.set_attacking_uid(0),this.pMainChara.setCollectId(0)},M.prototype.attackMonster=function(t){var e,o=this,n=t,i=this.tZoneResMap[t.getUid()];if(i)if(i.leftHp<=0)this.resetPlayerState();else if(this.pMainChara.getIsDie()||u.gm.localData.curHp<=0)this.resetPlayerState();else{if(!(i=I.default.getInstance().getCurTool(l.ToolClass.gongnu)).isDruability())return this.resetPlayerState(),void this.onToolBreakdown(i,t);h.Utils.distance(n.node,this.pMainChara.node)<=u.gm.const.player_attack_len?(this.pMainChara.updateDir(n.node.x-this.pMainChara.node.x,n.node.y-this.pMainChara.node.y),this.pMainChara.set_attack_uid(n.getUid()),this.pMainChara.set_attacking_uid(n.getUid()),console.log("attackMonster,uid="+this.pMainChara.attacking_uid),this.pMainChara.setIsFightingRes(!0),this.pMainChara.resetWalk(),this.pet_stand(),this.pMainChara.setStandByAni(),this.realAttackMonster(t)):this.pMainChara.isWalking()||(this.pMainChara.set_attack_uid(n.getUid()),this.pMainChara.setIsFightingRes(!0),this.pMainChara.playAniByType(l.EnumRoleAniType.walk),(e=this.pMainChara.walkTo(t.node.position,function(){o.pet_stand(),o.pMainChara.setStandByAni(),e&&(o.attackMonster(t),u.gm.localData.explore_data.last_pos.x=o.pMainChara.node.x,u.gm.localData.explore_data.last_pos.y=o.pMainChara.node.y,u.gm.localData.saveByKey("explore_data"))}))?(this.pet_walk(t.node.position),u.gm.localData.explore_data.target_pos=t.node.position):(this.pMainChara.setStandByAni(),u.gm.ui.showNotice("\u4eb2\u7231\u7684\u5c0f\u4e3b\uff0c\u76ee\u7684\u5730\u5728\u969c\u788d\u4e2d\u662f\u65e0\u6cd5\u884c\u8d70\u8fc7\u53bb\u7684\u54e6")))}else this.resetPlayerState()},M.prototype.onCharaEventClick=function(t){var e=this;if(t){var o=this.tZoneResMap[t.getUid()];if(!o)return console.log("deleteChara uid1="+t.getUid()),this.deleteChara(t.getUid()),void u.gm.pool.put(t.node);this.pMainChara.set_attack_uid(0),0<this.pMainChara.attacking_uid&&(!(n=this.pZone.getChara(this.pMainChara.attacking_uid))||h.Utils.distance(this.pMainChara.node,n.node)>=u.gm.const.player_attack_len)&&this.pMainChara.set_attacking_uid(0),this.pMainChara.setCollectId(0),this.pMainChara.setIsFightingRes(!1),this.pMainChara.setIsCollectingRes(!1),f.default.emit(l.GameEvent.explore_item),this.pMainChara.playAniByType(l.EnumRoleAniType.walk);var n=s.OutSideMapResUtils.getConfig(this.iCurZoneId,o.iResId);n.res_type==l.OutSideResClass.monster?(this.pMainChara.setStandByAni(),this.pMainChara.set_attack_uid(t.getUid()),this.collect_res(o,t),t.showHp(o.leftHp,t.getUid())):(n.res_type!=l.OutSideResClass.collection&&n.res_type!=l.OutSideResClass.pet||this.pMainChara.setCollectId(o.uid),n=t.node.position,t.node.x>this.pMainChara.node.x?n.x-=80:n.x+=80,n.y>this.pMainChara.node.y?n.y-=30:n.y+=30,this.pMainChara.setStandByAni(),this.pMainChara.walkTo(n,function(){e.collect_res(o,t),u.gm.localData.explore_data.last_pos.x=e.pMainChara.node.x,u.gm.localData.explore_data.last_pos.y=e.pMainChara.node.y,u.gm.localData.saveByKey("explore_data")})?u.gm.localData.explore_data.target_pos=t.node.getPosition():this.pMainChara.setStandByAni()),this.pet_walk(t.node.position)}else console.log("deleteChara uid2")},M.prototype.eventClickMonster=function(){var t;this.pMainChara.isWalking()&&this.tZoneResMap[this.pMainChara.attack_uid]&&(t=this.pZone.getChara(this.pMainChara.attack_uid))&&this.attackMonster(t)},M.prototype.eventAutoClickMonster=function(){var t,e,o=this;this.pMainChara.isWalking()&&this.tZoneResMap[this.pMainChara.attack_uid]&&(t=this.pZone.getChara(this.pMainChara.attack_uid))&&(e=t,h.Utils.distance(e.node,this.pMainChara.node)<=u.gm.const.player_attack_len?this.pMainChara.isWalking()&&(this.pMainChara.resetWalk(),this.pet_stand(),this.pMainChara.setStandByAni(),this.realAttackMonster(e)):this.pMainChara.isWalking()||(this.pMainChara.setIsFightingRes(!0),this.pMainChara.playAniByType(l.EnumRoleAniType.walk),this.pMainChara.walkTo(t.node.position,function(){u.gm.localData.explore_data.last_pos.x=o.pMainChara.node.x,u.gm.localData.explore_data.last_pos.y=o.pMainChara.node.y,u.gm.localData.saveByKey("explore_data")})?(this.pet_walk(t.node.position),u.gm.localData.explore_data.target_pos=t.node.getPosition()):(this.pMainChara.setStandByAni(),u.gm.ui.showNotice("\u4eb2\u7231\u7684\u5c0f\u4e3b\uff0c\u76ee\u7684\u5730\u5728\u969c\u788d\u4e2d\u662f\u65e0\u6cd5\u884c\u8d70\u8fc7\u53bb\u7684\u54e6"))))},M.prototype.deleteChara=function(t){delete this.tZoneResMap[t],this.pView.deleteChara(t)},M.prototype.reset_hp=function(t){this.tZoneResMap[t].leftHp=this.tZoneResMap[t].maxHp,u.gm.localData.saveByKey("explore_data")},M.prototype.reduse_chara_hp=function(t,e){return this.tZoneResMap[t].leftHp-=e,u.gm.localData.saveByKey("explore_data"),0<=this.tZoneResMap[t].leftHp},M.prototype.onTouchEnd=function(){},M.prototype.onClickGoHome=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=null),u.gm.localData.explore_data.last_pos.x=this.pMainChara.node.x,u.gm.localData.explore_data.last_pos.y=this.pMainChara.node.y,u.gm.localData.saveByKey("explore_data"),f.default.emit(l.GameEvent.pet_pos),this.iCurZoneId<100&&this.pZone&&this.pZone.remove_map(),this.pView.recyleZone(),u.gm.localData.autoCollectState=0,u.gm.localData.saveByKey("autoCollectState"),u.gm.ui.showModule(u.gm.const.MainUI,function(){m.default.getInstance().checkGuide()}),u.gm.ui.showModule(u.gm.const.BaseUI,function(t){t.setModeHide(l.E_BaseUIType.home)}),u.gm.ui.closeModule(u.gm.const.Explore),this.pView.set_task_res_id()},M.prototype.onBtnClick=function(t,e){"btn_gohome"===(void 0===e&&(e=null),t)&&this.onClickGoHome()},Object.defineProperty(M.prototype,"pMainChara",{get:function(){return this.pView.getMainChara()},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"pZone",{get:function(){return this.pView.getZone()},enumerable:!1,configurable:!0}),i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],M),a.default=i,cc._RF.pop()},{}],SceneExploreView:[function(t,e,o){"use strict";cc._RF.push(e,"30276qTqnpJmbKM2n1myKLO","SceneExploreView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("LvMgr"),f=i("PropMgr"),g=i("ReplacementModel"),y=i("Utils"),m=i("AssetMgr"),v=i("EventManager"),b=i("GameModule"),I=i("SpineUtils"),D=i("GetAwardUI"),C=i("StrengthMgr"),O=i("ToolMgr"),w=i("Chara"),M=i("CharaPet"),P=i("SceneExploreLogic"),S=i("Zone");function T(){var t=l.call(this)||this;return t.node_map=null,t.baseUI=null,t.pLogic=new P.default,t.pMainChara=null,t.tZoneCharas=null,t.tZoneCharaLoading=null,t.pZone=null,t.pPetChara=[],t._taskResId=0,t.auto_time=0,t._tool_count=0,y.Utils.sceneBindLogic(t,t.pLogic),t}i=(a=cc._decorator).ccclass,a=a.property,c(T,l=b.default),T.prototype.onLoad=function(){},T.prototype.setPmainCharta=function(t){this.pMainChara=t},T.prototype.getMainChara=function(){return this.pMainChara},T.prototype.getPetCharaList=function(){return this.pPetChara},T.prototype.getZone=function(){return this.pZone},T.prototype.getpLogic=function(){return this.pLogic},T.prototype.set_new_pet=function(t){this.pPetChara.push(t)},T.prototype.reset_chara=function(){for(var t in this.tZoneCharas)(t=this.tZoneCharas[t])&&t.node&&(this.pZone.removeChara(t),h.gm.pool.put(t.node))},T.prototype.recycle_one_player=function(t){this.pZone.removeChara(t)},T.prototype.setData=function(t){this._taskResId=t,this.pLogic._is_load_all&&0<this._taskResId&&(this.WalkToTaskRes(),this._taskResId=0)},T.prototype.goTaskRed=function(t){this._taskResId=t,this.pLogic._is_load&&0<this._taskResId&&(this.WalkToTaskRes(),this._taskResId=0)},T.prototype.recyleZone=function(){this.reset_chara(),this.pZone.removeMainChara(),v.default.emit("remove_bullet");for(var t=0;t<this.pPetChara.length;++t)this.pZone&&this.pZone.removeChara(this.pPetChara[t]);for(t=0;t<this.pPetChara.length;++t)h.gm.pool.put(this.pPetChara[t].node);this.pZone&&h.gm.pool.put(this.pZone.node),this.pZone.removeBullet(),this.pZone=null,this.pMainChara=null,this.pPetChara=[]},T.prototype.set_task_res_id=function(){this._taskResId=0},T.prototype.loadZone=function(t,e){var o=this;this._tool_count=0;var n=u.OutSideMapUtils.getConfig(t);function i(){if(++a==r&&o.pMainChara){o.pLogic._is_load=!0,h.gm.localData.explore_data.explore_state?(o.pMainChara.node.x=h.gm.localData.explore_data.last_pos.x,o.pMainChara.node.y=h.gm.localData.explore_data.last_pos.y):(h.gm.localData.explore_data.explore_state=1,h.gm.localData.saveByKey("explore_data"),o.pMainChara.node.x=-n.player_pos.x,o.pMainChara.node.y=-n.player_pos.y),o.pZone&&o.pZone.addMainChara(o.pMainChara),o.pMainChara.resetWalk(),o.pMainChara.setCfgId(99999),o.pMainChara.setIsDie(!1),o.pMainChara.set_attack_uid(0),o.pMainChara.set_attacking_uid(0),o.pMainChara.setIsFightingRes(!1),o.pMainChara.setIsCollectingRes(!1),o.pMainChara.updateDir(1,1),o.pMainChara.setStandByAni(),h.gm.localData.curHp<=0&&C.default.getInstance().autoAddHp(1),o.refreshZoneCharas(function(){o.pLogic._is_load_all=!0,e&&e(),o.pZone&&o.pZone.check_screen_map(!1),0<o._taskResId&&(o.WalkToTaskRes(),o._taskResId=0),h.gm.ui.closeModule(h.gm.const.ExploreLoading),O.default.getInstance().getCurTool(d.ToolClass.gongnu)||h.gm.ui.showModule(h.gm.const.GetToolsUI,function(t){h.gm.ui.showTopBlock(!1),t.setVideo(!1),t.setData({file:d.ThingType.normal,id:60081,num:1},D.GetAwardType.button)})});for(var t=0;t<o.pPetChara.length;++t){var i=cc.v2(0,0);h.gm.localData.explore_data.explore_state?(i.x=h.gm.localData.explore_data.last_pos.x,i.y=h.gm.localData.explore_data.last_pos.y):(i.x=-n.player_pos.x,i.y=-n.player_pos.y),h.gm.localData.explore_data.pet_data_map[t].pos||(h.gm.localData.explore_data.pet_data_map[t].pos=cc.v2(i.x,i.y)),i.x=h.gm.localData.explore_data.pet_data_map[t].pos.x,i.y=h.gm.localData.explore_data.pet_data_map[t].pos.y,o.pZone&&o.pZone.addChara(o.pPetChara[t],null,null,260,i)}h.gm.ui.showModule(h.gm.const.BaseUI,function(t){t.setModeHide(d.E_BaseUIType.explore),o.baseUI=t}),o.pMainChara.model=g.default.createBySpine(o.pMainChara.chara_spine,p.default.getInstance().dressing,!0),o.pMainChara.model.updateByDirection(o.pMainChara.isBack)}}this.tZoneCharas={},this.tZoneCharaLoading={};var a=0,r=2+h.gm.localData.explore_data.pet_data_map.length;this.node_map.removeAllChildren(),t=d.BundleName.MAIN_UI,h.gm.pool.async_get(t,"prefabs/explore/map/"+n.prefab,S.default,function(t){o.pZone=t,h.gm.localData.explore_data.explore_state?(t.node.x=-h.gm.localData.explore_data.last_pos.x,t.node.y=-h.gm.localData.explore_data.last_pos.y):(t.node.x=n.player_pos.x,t.node.y=n.player_pos.y);var e=h.gm.const.exploreMapInitScale;e=o.check_zone_pos(t.node.getPosition(),e),t.node.y=e.y,t.node.x=e.x,o.pZone&&o.pZone.setCfgId(n.id),o.pZone&&o.pZone.addCharaEventCb(o.onCharaEvent,o),o.node_map.addChild(t.node),o.pZone.setNeedCameraFollow(!0),i()}),this.pMainChara=null,m.default.getInstance().getResAsyn(d.BundleName.MAIN_UI,"prefabs/explore/main_role_"+h.gm.localData.sex_id,cc.Prefab,function(t){t=cc.instantiate(t),o.pMainChara=t.getComponent(w.default),o.pMainChara.init(),o.pMainChara.chara_spine.setCompleteListener(o.pMainChara.onSpineComplete.bind(o.pMainChara)),I.default.setEventListener(o.pMainChara.chara_spine,o.pLogic.onSpineEvent.bind(o.pLogic)),i()}),this.pPetChara=[];for(var c=0;c<h.gm.localData.explore_data.pet_data_map.length;++c)!function(t){m.default.getInstance().getResAsyn(d.BundleName.MAIN_UI,"prefabs/explore/pet/pet_"+h.gm.localData.explore_data.pet_data_map[t].pet_id,cc.Prefab,function(e){(e=cc.instantiate(e).getComponent(M.default)).init(),e.setPetId(h.gm.localData.explore_data.pet_data_map[t].pet_id),e.setWalkSpeed(260),o.pPetChara.push(e),e.chara_spine.setCompleteListener(e.onSpineComplete.bind(e)),i()})}(c)},T.prototype.check_zone_pos=function(t,e){return cc.view.getDesignResolutionSize(),t.x<=(this.node.width/2-h.gm.const.exploreMapX*e/2)/e&&(t.x=(this.node.width/2-h.gm.const.exploreMapX*e/2)/e),t.x>=(h.gm.const.exploreMapX*e/2-this.node.width/2)/e&&(t.x=(h.gm.const.exploreMapX*e/2-this.node.width/2)/e),t.y<=(this.node.height/2-h.gm.const.exploreMapY*e/2)/e&&(t.y=(this.node.height/2-h.gm.const.exploreMapY*e/2)/e),t.y>=(h.gm.const.exploreMapY*e/2-this.node.height/2)/e&&(t.y=(h.gm.const.exploreMapY*e/2-this.node.height/2)/e),t},T.prototype.update=function(){this.pLogic._is_load_all&&(null!=this.pMainChara&&this.pMainChara.isWalking()&&this.pLogic._is_load&&this.refreshZoneCharas(),this.auto_time+=1,this.auto_time%5==0&&this.auto_collect(),this.auto_time%30==0&&this.pLogic.update_res(),1e6<=this.auto_time&&(this.auto_time=0))},T.prototype.WalkToTaskRes=function(){var t=this.pLogic.getZoneResMap(),e=[],o=u.OutSideMapResUtils.getConfig(this.pLogic.curZoneId,this._taskResId);if(o&&1!=o.res_type)for(var n in t)(a=t[n]).iResId==this._taskResId&&e.push(a);else{if(!(o=u.ConfigUtils.CollectionsUtils.getConfig(this._taskResId)))return void console.error("WalkToTaskRes id="+this._taskResId);var i=u.PropUtils.getConfigByPropID(o.need_prop[0].id);for(n in t)for(var a=t[n],r=0;r<i.access.length;++r)i.access[r].id==a.iResId&&e.push(a)}this.GotoResById(e),this._taskResId=0,this.pZone&&this.pZone.setNeedCameraFollow(!0)},T.prototype.GotoResById=function(t){var e=this;if(0<t.length){for(var o,n=12e4,i=-1,a=0;a<t.length;++a){var r=t[a];if(u.OutSideMapResUtils.getConfig(this.pLogic.curZoneId,r.iResId)){var c=u.BigMapConfigUtils.getConfig(r.iResId);if(c&&c.tool_need){if(!(c=c.type.sub_type))continue;if(!(l=u.ConfigUtils.CollectionsUtils.getConfig(r.iResId)))continue;if(!O.default.getInstance().hasTool(c))continue;if(O.default.getInstance().getCurTool(c).getCurLvConfig().tool_level<l.collect_level)continue}for(var s=this.pZone.getPos(t[a].sPosName),l=y.Utils.distance(this.pMainChara.node,s),p=Math.floor(l/50),d=0;d<p&&!this.pZone.checkHitWall(this.pMainChara.node.x+(s.x-this.pMainChara.node.x)/p*d,this.pMainChara.node.y+(s.y-this.pMainChara.node.y)/p*d);++d);l<n&&(i=a,n=l)}}0<=i?(s=this.pZone.getPos(t[i].sPosName),(o=cc.v2(0,0)).x=s.x,o.y=s.y,o.x>this.pMainChara.node.x?o.x-=80:o.x+=80,o.y>this.pMainChara.node.y?o.y-=30:o.y+=30,this.pMainChara.setCollectId(t[i].uid),this.pMainChara.walkTo(o,function(){var o=e.pZone.getChara(t[i].uid);o?e.pLogic.collect_res(t[i],o):e.pMainChara.setStandByAni(),e.pLogic.pet_stand()}),this.pLogic.pet_walk(o)):h.gm.ui.showNotice("\u4efb\u52a1\u76ee\u6807\u672a\u5237\u65b0\uff0c\u53ef\u4ee5\u7a0d\u540e\u518d\u6765\u54e6")}},T.prototype.GotoRes=function(t){if(0<t.length){for(var e=12e4,o=-1,n=0;n<t.length;++n){var i=this.pLogic.getZoneResMap();if(t[n]){var a=i[t[n].getUid()];if(a){if(u.OutSideMapResUtils.getConfig(this.pLogic.curZoneId,a.iResId)&&(i=u.BigMapConfigUtils.getConfig(a.iResId))&&i.tool_need&&(i=i.type.sub_type)&&(a=u.ConfigUtils.CollectionsUtils.getConfig(a.iResId))&&O.default.getInstance().hasTool(i)&&!((i=O.default.getInstance().getCurTool(i)).getCurLvConfig().tool_level<a.collect_level)&&i.isDruability()){i=y.Utils.distance(this.pMainChara.node,t[n].node);for(var r=Math.floor(i/50),c=0;c<r&&!this.pZone.checkHitWall(this.pMainChara.node.x+(t[n].node.x-this.pMainChara.node.x)/r*c,this.pMainChara.node.y+(t[n].node.y-this.pMainChara.node.y)/r*c);++c);i<e&&(o=n,e=i)}}else console.log("resList[i].getUid()="+t[n].getUid())}}0<=o&&this.pZone.onCharaEvent(d.CharaEventTypeEnum.CLICK,t[o])}},T.prototype.checkHp=function(){C.default.getInstance().getCurHp()/_.default.getInstance().getHpMax()<=.7&&0<f.default.getPropCount(110103)&&f.default.useByBag([{id:110103,num:1}])},T.prototype.auto_collect=function(){if(this.checkHp(),!this.pMainChara.isWalking()){for(var t,e=this,o=0;o<this.pMainChara.attack_me_uid_list.length;++o){var n=function(t){if(0<e.pMainChara.attack_me_uid_list[t]&&e.pMainChara.attack_uid<=0){var o=O.default.getInstance().getCurTool(d.ToolClass.gongnu);if(o.isDruability()){var n=e.pZone.getChara(e.pMainChara.attack_me_uid_list[t]);if(n){if(y.Utils.distance(e.pMainChara.node,n.node)<=600)return e.pMainChara.setIsCollectingRes(!1),n?(e.pLogic.attackMonster(n),{value:void 0}):(e.pMainChara.delete_attack_me_uid(),"break")}else e.pMainChara.delete_attack_me_uid()}else e.pMainChara.set_attack_uid(0),e.pMainChara.setIsFightingRes(!1),(n=h.gm.ui.get_module(h.gm.const.ToolRoomUI))&&n.node.active||(e._tool_count++,e._tool_count<=1&&h.gm.ui.showModule(h.gm.const.ToolRoomUI,function(t){t.setData(o.toolType,1)}))}}(o);if("object"==typeof n)return n.value;if("break"===n)break}h.gm.localData.autoCollectTime<=0||h.gm.localData.autoCollectState<=0||this.pMainChara.getIsCollectingRes()||this.pMainChara.getIsFightingRes()||0<this.pMainChara.attack_uid||this.pMainChara.getIsDie()||(t=this.pZone.getCharaListByType(d.OutSideResClass.collection),this.GotoRes(t))}},T.prototype.onCharaEvent=function(t,e){this.pLogic.onCharaEvent(t,e)},T.prototype.apppear_chara=function(t,e){var o=this;if(this.pZone){this.tZoneCharaLoading[t.uid]=1;var n=u.OutSideMapResUtils.getConfig(this.pZone.getCfgId(),t.iResId);if(n){if(n.res_type==d.OutSideResClass.pet){var i=u.ConfigUtils.CollectionsUtils.getConfig(n.res_id);if(h.gm.localData.explore_data.getPetData(i.need_prop[0].id))return}m.default.getInstance().getResAsyn(d.BundleName.MAIN_UI,"prefabs/explore/chara/build_"+t.iResId,cc.Prefab,function(i){var a=cc.instantiate(i).getComponent(w.default);(o.tZoneCharas[t.uid]=a).setUid(t.uid),a.setCfgId(t.iResId),(i=a.node.getChildByName("fly_hp"))&&i.removeFromParent(),o.pZone.addChara(a,t.sPosName,null,260,e),a.init(),n.res_type==d.OutSideResClass.monster&&(a.chara_spine.setCompleteListener(a.onSpineComplete.bind(a)),I.default.setEventListener(a.chara_spine,o.pLogic.onSpineEvent.bind(o.pLogic)))})}}},T.prototype.check_screen=function(t,e,o){return o=Math.abs(t.x+this.pZone.node.x)*this.node_map.scale-o/2,e=Math.abs(t.y+this.pZone.node.y)*this.node_map.scale-e/2,o<this.node.width/2&&e<this.node.height/2},T.prototype.refreshZoneCharas=function(t){var e=this;void 0===t&&(t=null);var o,n=this.pLogic.getZoneResMap(),i=null;for(o in n){var a=n[o],r=u.OutSideMapResUtils.getConfig(this.pZone.getCfgId(),a.iResId);r&&(r.res_type==d.OutSideResClass.pet&&(r=u.ConfigUtils.CollectionsUtils.getConfig(r.res_id),h.gm.localData.explore_data.getPetData(r.need_prop[0].id))||this.checkResInScreen(a)&&null==this.tZoneCharas[a.uid]&&null==this.tZoneCharaLoading[a.uid]&&this.pLogic.checkCanShowCharaInScreen(a.uid)&&(i=null==i?[]:i).push(a))}if(null!=i)for(var c=i.length,s=this,l=0;l<i.length;l++)!function(){var o=i[l];s.tZoneCharaLoading[o.uid]=1;var n=u.OutSideMapResUtils.getConfig(s.pZone.getCfgId(),o.iResId);n&&h.gm.pool.async_get(d.BundleName.MAIN_UI,"prefabs/explore/chara/build_"+o.iResId,w.default,function(i){var a;e.tZoneCharas&&e.pZone&&((e.tZoneCharas[o.uid]=i).setUid(o.uid),i.setCfgId(o.iResId),e.pZone.addChara(i,o.sPosName,null,260,null),n.res_type==d.OutSideResClass.monster&&(i.chara_spine.setCompleteListener(i.onSpineComplete.bind(i)),I.default.setEventListener(i.chara_spine,e.pLogic.onSpineEvent.bind(e.pLogic))),(a=i.node.getChildByName("fly_hp"))&&a.removeFromParent(),i.init(),delete e.tZoneCharaLoading[o.uid],--c<=0&&t&&t())})}();else t&&t()},T.prototype.deleteChara=function(t){var e=this.tZoneCharas[t];if(!e){var o=this.pZone.getChara(t);return o?(console.log("deleteChara uid="+t),this.pZone.removeChara(o),void h.gm.pool.put(o.node)):void 0}this.pZone.removeChara(e),h.gm.pool.put(e.node),delete this.tZoneCharas[t]},T.prototype.getPchara=function(t){return this.tZoneCharas[t]},T.prototype.checkResInScreen=function(t){var e=.2;t.iResId<1e4&&(e=1);var o=null,n=(o=(o=null!=this.tZoneCharas[t.uid]?this.tZoneCharas[t.uid].node:this.pZone.getPos(t.sPosName))?o:t.pos).x+this.pZone.node.x,i=o.y+this.pZone.node.y;return t=.5*cc.winSize.width/h.gm.localData.explore_data.explore_scale,o=.5*cc.winSize.height/h.gm.localData.explore_data.explore_scale,o+=o*e,-1*(t+=t*e)<=n&&n<=t&&-1*o<=i&&i<=o},T.prototype.checkIsMainRoleInScreeen=function(){var t=(n=this.pMainChara.node.getPosition()).x+this.pZone.node.x,e=n.y+this.pZone.node.y,o=.5*cc.winSize.width/h.gm.localData.explore_data.explore_scale,n=.5*cc.winSize.height/h.gm.localData.explore_data.explore_scale;return-1*o<=t&&t<=o&&-1*n<=e&&e<=n},T.prototype.onEnable=function(){},T.prototype.onDisable=function(){this.unscheduleAllCallbacks()},T.prototype.editor_on_button_click_handler=function(t,e){this.pLogic.onBtnClick(t.target.name,e=void 0===e?null:e)},s([a(cc.Node)],T.prototype,"node_map",void 0),i=s([i],T),r.default=i,cc._RF.pop()},{}],Setting:[function(t,e,o){"use strict";cc._RF.push(e,"8a1ed14sMRDwqAyKsDUkKXl","Setting");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("AudioUtils"),d=i("Bridge"),h=i("GameMgr"),_=i("GameModule"),f=i("AudioPlayer"),g=i("ChannelManager");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.tog_music=null,t.tog_effect=null,t.lbl_qq_group=null,t.nod_music=null,t.nod_effect=null,t.lbl_version=null,t.lbl_openid=null,t.nod_qq_content=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.onMusic=function(){h.gm.localData.musicOn*=-1,h.gm.localData.saveByKey("musicOn"),this.updateUI()},y.prototype.onEffect=function(){h.gm.localData.effectOn*=-1,h.gm.localData.saveByKey("effectOn"),this.updateUI()},y.prototype.onEnable=function(){this.updateUI()},y.prototype.updateUI=function(){this.nod_qq_content.active=!(h.gm.channel.get_channel_name()==g.ChannelManager.TT_GAME),this.lbl_qq_group.string="\u7fa4\u53f7:"+p.default.QQ_Group,this.lbl_version.string="V"+p.default.version,1==h.gm.localData.musicOn?(this.tog_music.check(),f.default.setMusicVolume(.5),this.nod_music.x=50):(this.tog_music.uncheck(),f.default.setMusicVolume(0),this.nod_music.x=-50),1==h.gm.localData.effectOn?(this.tog_effect.check(),f.default.setEffectVolume(.5),this.nod_effect.x=50):(this.tog_effect.uncheck(),f.default.setEffectVolume(0),this.nod_effect.x=-50),this.lbl_openid.string="\u8d26\u53f7ID:"+h.gm.data.open_id},y.prototype.onClickCopyOpenId=function(){d.default.webCopyString(h.gm.data.open_id+""),h.gm.ui.showNotice("\u590d\u5236\u6210\u529f")},y.prototype.onBtnClose=function(){u.default.click(),this.closeMe()},y.prototype.onBtnCopy=function(){u.default.click(),d.default.webCopyString(p.default.QQ_Group),h.gm.ui.showNotice("\u590d\u5236\u6210\u529f")},y.prototype.onBtnExchange=function(){h.gm.ui.showModule(h.gm.const.ExchangeUI)},s([a(cc.Toggle)],y.prototype,"tog_music",void 0),s([a(cc.Toggle)],y.prototype,"tog_effect",void 0),s([a(cc.Label)],y.prototype,"lbl_qq_group",void 0),s([a(cc.Node)],y.prototype,"nod_music",void 0),s([a(cc.Node)],y.prototype,"nod_effect",void 0),s([a(cc.Label)],y.prototype,"lbl_version",void 0),s([a(cc.Label)],y.prototype,"lbl_openid",void 0),s([a(cc.Node)],y.prototype,"nod_qq_content",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ShareItem:[function(t,e,o){"use strict";cc._RF.push(e,"6b7b1pBqqVJu4zfx1ZGcbNT","ShareItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("ListItem"),f=i("EventManager"),g=i("ShareMgr");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.image_icon=null,t.name_lbl=null,t.level_lbl=null,t.get_node=null,t.unget_node=null,t.finish_node=null,t.reward_icon=null,t.reward_lbl=null,t._index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=_.default),y.prototype.onEnable=function(){},y.prototype.onDisable=function(){},y.prototype.setData=function(t){this._index=t;for(var e=[],o=0;o<u.gm.localData.invite_data.children_list.length;++o){for(var n=!1,i=0;i<u.gm.localData.invite_data.delete_list.length;++i)if(u.gm.localData.invite_data.children_list[o].uid==u.gm.localData.invite_data.delete_list[i]){n=!0;break}n||e.push(u.gm.localData.invite_data.children_list[o])}var a=e[t];h.IconUtils.setSpriteFrame(p.BundleName.COMMON,"texture/prop_90_90/prop_"+a.image_id,this.image_icon),t=g.default.getInstance().getInviteConfig(a.reward_index+1),this.name_lbl.string=a.nick_name,a.level>=t.level?this.level_lbl.string="<b><color=#39941e >LV."+a.level+"/"+t.level+"</color></b>":this.level_lbl.string="<b><color=#982b27 >LV."+a.level+"/"+t.level+"</color></b>",this.get_node.node.active=a.level>=t.level,this.unget_node.active=a.level<t.level,this.finish_node.active=20<=a.reward_index,h.IconUtils.setPropSprite(t.level_rewards[0].id,this.reward_icon),this.reward_lbl.string=""+t.level_rewards[0].num},y.prototype.onClickGet=function(){for(var t=[],e=0;e<u.gm.localData.invite_data.children_list.length;++e){for(var o=!1,n=0;n<u.gm.localData.invite_data.delete_list.length;++n)if(u.gm.localData.invite_data.children_list[e].uid==u.gm.localData.invite_data.delete_list[n]){o=!0;break}o||t.push(u.gm.localData.invite_data.children_list[e])}var i=t[this._index],a=g.default.getInstance().getInviteConfig(i.reward_index+1);a.level>i.level?u.gm.ui.showNotice("\u60a8\u7684\u597d\u53cb\u7b49\u7ea7\u4e0d\u591f\uff0c\u53ef\u4ee5\u70b9\u51fb\u804a\u5929\u558a\u8bdd\u60a8\u7684\u597d\u53cb\u54e6"):(d.default.addProps(a.level_rewards),i.reward_index++,this.setData(this._index),u.gm.localData.saveByKey("invite_data"))},y.prototype.onClickLaba=function(){u.gm.ui.showModule(u.gm.const.BlessUI)},y.prototype.onClickDelete=function(){for(var t=[],e=0;e<u.gm.localData.invite_data.children_list.length;++e){for(var o=!1,n=0;n<u.gm.localData.invite_data.delete_list.length;++n)if(u.gm.localData.invite_data.children_list[e].uid==u.gm.localData.invite_data.delete_list[n]){o=!0;break}o||t.push(u.gm.localData.invite_data.children_list[e])}u.gm.localData.invite_data.delete_list.push(t[this._index].uid),u.gm.localData.saveByKey("invite_data"),f.default.emit(p.GameEvent.update_share_data)},s([a(cc.Sprite)],y.prototype,"image_icon",void 0),s([a(cc.Label)],y.prototype,"name_lbl",void 0),s([a(cc.RichText)],y.prototype,"level_lbl",void 0),s([a(cc.Button)],y.prototype,"get_node",void 0),s([a(cc.Node)],y.prototype,"unget_node",void 0),s([a(cc.Node)],y.prototype,"finish_node",void 0),s([a(cc.Sprite)],y.prototype,"reward_icon",void 0),s([a(cc.Label)],y.prototype,"reward_lbl",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],ShareMgr:[function(t,e,o){"use strict";cc._RF.push(e,"acc2c+LvFtIBrq3PTFTzrEZ","ShareMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("GameMgr"),l=i("LocalData"),p=i("Utils");function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.success_count=0,t}a(u,c=i("Singleton").default),u.prototype.getConfig=function(t){for(var e=0,o=s.gm.config.data.Share;e<o.length;e++){var n=o[e];if(n.share_time==t)return n}},u.prototype.getInviteConfig=function(t){for(var e=0,o=s.gm.config.data.Invite;e<o.length;e++){var n=o[e];if(n.id==t)return n}},u.prototype.getPropCount=function(t){for(var e=0,o=0,n=s.gm.config.data.Share;o<n.length;o++)for(var i=0,a=n[o].share_rewards;i<a.length;i++){var r=a[i];r.id==t&&(e+=r.num)}return e},u.prototype.GetDataFromServer=function(){p.Utils.server_http_request(this.getDataFromServerCB,this,s.gm.channel.getServerUrl()+"user/upload_player_data_to_share/get?uid=%s&token=%s&open_id=%s&channel_id=%s",s.gm.data.uid,s.gm.data.token,s.gm.data.open_id,s.gm.channel.get_channel_id().toString())},u.prototype.getDataFromServerCB=function(t){if(0==t.ResultCode&&0<t.data.length){for(var e=0;e<t.data.length;++e){for(var o,n=!1,i=0;i<s.gm.localData.invite_data.children_list.length;++i)if(t.data[e].uid==s.gm.localData.invite_data.children_list[i].uid){n=!0,s.gm.localData.invite_data.children_list[i].level=t.data[e].level,s.gm.localData.invite_data.children_list[i].nick_name=t.data[e].nick_name,s.gm.localData.invite_data.children_list[i].image_id=t.data[e].image_id;break}n||((o=new l.InviteChildren).uid=t.data[e].uid,o.level=t.data[e].level,o.nick_name=t.data[e].nick_name,o.image_id=t.data[e].image_id,s.gm.localData.invite_data.children_list.push(o))}s.gm.localData.saveByKey("invite_data")}},a=u,r.default=a,cc._RF.pop()},{}],ShareUI:[function(t,e,o){"use strict";cc._RF.push(e,"756d4MDTChLV6J4Kg41r+0y","ShareUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("ChannelManager"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("IconUtils"),g=i("List"),y=i("EventManager"),m=i("GameModule"),v=i("DailyTaskData"),b=i("ShareItem"),I=i("ShareMgr");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.page_1=null,t.btn_lbl1=null,t.desc_lbl=null,t.count_lbl=null,t.get_node=null,t.reward_spr_list=[],t.reward_lbl_list=[],t.page_2=null,t.btn_lbl2=null,t.list=null,t.invaite_lbl=null,t.unbg_node=null,t.tog_func=null,t.func_index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=m.default),D.prototype.onEnable=function(){this.get_node.active=!1,y.default.on(d.GameEvent.update_share_data,this.updateUI,this)},D.prototype.onDisable=function(){y.default.off(d.GameEvent.update_share_data,this.updateUI,this)},D.prototype.setData=function(){I.default.getInstance().GetDataFromServer(),this.func_index=0,this.updateUI()},D.prototype.onBtnClose=function(){p.default.click(),this.closeMe()},D.prototype.show_page_1=function(){var t=h.gm.localData.invite_data.now_index,e=h.gm.localData.invite_data.now_count,o=I.default.getInstance().getConfig(t+1);this.desc_lbl.string=o.share_time+"",this.count_lbl.string="\u5df2\u6210\u529f\u9080\u8bf7\u65b0\u73a9\u5bb6"+(h.gm.localData.invite_data.children_list.length-e)+"/"+o.share_time,this.get_node.active=h.gm.localData.invite_data.children_list.length-e>=o.share_time;for(var n=0;n<o.share_rewards.length;++n)f.IconUtils.setPropSprite(o.share_rewards[n].id,this.reward_spr_list[n]),this.reward_lbl_list[n].string="x"+o.share_rewards[n].num},D.prototype.show_page_2=function(){for(var t=[],e=0;e<h.gm.localData.invite_data.children_list.length;++e){for(var o=!1,n=0;n<h.gm.localData.invite_data.delete_list.length;++n)if(h.gm.localData.invite_data.children_list[e].uid==h.gm.localData.invite_data.delete_list[n]){o=!0;break}o||t.push(h.gm.localData.invite_data.children_list[e])}this.list.numItems=t.length>=h.gm.const.MAX_INVITE_COUNT?h.gm.const.MAX_INVITE_COUNT:t.length,this.invaite_lbl.string="\u5f53\u524d\u597d\u53cb\u6570\u91cf\uff1a"+t.length+"/"+h.gm.const.MAX_INVITE_COUNT,this.unbg_node.active=t.length<=0},D.prototype.updateUI=function(){this.tog_func.toggleItems[this.func_index].check(),0==this.func_index?(this.page_1.active=!0,this.page_2.active=!1,this.btn_lbl1.color=(new cc.Color).fromHEX("#FDF8A5"),this.btn_lbl2.color=(new cc.Color).fromHEX("#803838"),this.show_page_1()):1==this.func_index&&(this.page_1.active=!1,this.page_2.active=!0,this.btn_lbl2.color=(new cc.Color).fromHEX("#FDF8A5"),this.btn_lbl1.color=(new cc.Color).fromHEX("#803838"),this.show_page_2())},D.prototype.onFuncToggle=function(t,e){this.func_index=Number(e),this.updateUI()},D.prototype.onBtnShare=function(){v.DailyTaskData.getInstance().share+=1,u.ChannelManager.instance.share_req(function(){},this)},D.prototype.onRender=function(t,e){t.getComponent(b.default).setData(e)},D.prototype.onBtnGet=function(){h.gm.localData.invite_data.now_count=h.gm.localData.invite_data.children_list.length;var t=I.default.getInstance().getConfig(h.gm.localData.invite_data.now_index+1);_.default.addProps(t.share_rewards),h.gm.localData.invite_data.now_index++,3<=h.gm.localData.invite_data.now_index&&(h.gm.localData.invite_data.now_index=0),h.gm.localData.saveByKey("invite_data"),this.updateUI()},s([a(cc.Node)],D.prototype,"page_1",void 0),s([a(cc.Node)],D.prototype,"btn_lbl1",void 0),s([a(cc.Label)],D.prototype,"desc_lbl",void 0),s([a(cc.Label)],D.prototype,"count_lbl",void 0),s([a(cc.Node)],D.prototype,"get_node",void 0),s([a([cc.Sprite])],D.prototype,"reward_spr_list",void 0),s([a([cc.Label])],D.prototype,"reward_lbl_list",void 0),s([a(cc.Node)],D.prototype,"page_2",void 0),s([a(cc.Node)],D.prototype,"btn_lbl2",void 0),s([a(g.default)],D.prototype,"list",void 0),s([a(cc.Label)],D.prototype,"invaite_lbl",void 0),s([a(cc.Node)],D.prototype,"unbg_node",void 0),s([a(cc.ToggleContainer)],D.prototype,"tog_func",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],ShareVedio:[function(t,e,o){"use strict";cc._RF.push(e,"dc51b+W1rNK15FoNNcYHoM0","ShareVedio");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameMgr"),p=a("GameModule");function u(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(u,s=p.default),u.prototype.onBtnShare=function(){l.gm.channel.viedo_share(!0,function(t){1==t&&l.gm.ui.showNotice("\u5f55\u5c4f\u65f6\u957f\u5c0f\u4e8e3s\uff0c\u65e0\u6cd5\u5206\u4eab")})},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],u),r.default=a,cc._RF.pop()},{}],ShelfItemNew:[function(t,e,o){"use strict";cc._RF.push(e,"7d939J5fQBLwYRR2qMoY7/I","ShelfItemNew");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("ListItem"),g=i("EventManager"),y=i("HouseKeeperMgr"),m=i("TaskMgr"),v=i("ShelfMgr");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_count=null,t.lbl_name=null,t.spr_progress=null,t.rich_text=null,t.data=null,t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=f.default),b.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},b.prototype.setData=function(t,e){this.data=t,this.objectData=e,this.updateUI()},b.prototype.updateUI=function(){_.IconUtils.setPropSprite(this.data.prop_id,this.spr_icon),this.lbl_name.string=h.default.getConfigByPropID(this.data.prop_id).name,this.lbl_count.string=this.data.cur_count+"/"+this.data.max_number,this.spr_progress.fillRange=this.data.cur_count/this.data.max_number;var t="<color=#da2400>"+this.data.cur_count+"</color><color=#195d19>/"+this.data.max_number+"</color>";this.rich_text.string=t},b.prototype.onBtnAdd=function(){this.replenishGoods()?(m.default.getInstance().checkAll(),d.gm.ui.showNotice("\u8865\u8d27\u5b8c\u6210"),y.default.getInstance().onStallShelfAdd(),g.default.emit(u.GameEvent.replenish_goods),this.updateUI(),d.gm.ui.get_module(d.gm.const.ShelfUI).updateUI()):d.gm.ui.showNotice("\u65e0\u53ef\u8865\u5145\u8d27\u7269")},b.prototype.replenishGoods=function(){var t,e=!1,o=this.data.getLeftCount();return 0<o&&0<(t=h.default.getPropCount(this.data.prop_id))&&(t=Math.min(o,t),v.default.getInstance().addGood(this.objectData.objectID,this.data.prop_id,t),this.data.addCount(t),e=!0),e},b.prototype.onTouch=function(){cc.log(this.data.prop_id),d.gm.mainUI.visiable(!0),p.default.getInstance().dealByItemID(this.data.prop_id)},s([a(cc.Sprite)],b.prototype,"spr_icon",void 0),s([a(cc.Label)],b.prototype,"lbl_count",void 0),s([a(cc.Label)],b.prototype,"lbl_name",void 0),s([a(cc.Sprite)],b.prototype,"spr_progress",void 0),s([a(cc.RichText)],b.prototype,"rich_text",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],ShelfItem:[function(t,e,o){"use strict";cc._RF.push(e,"943a9IINdZO8Y/ZwmhHZhzD","ShelfItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("ListItem");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.progress=null,t.lbl_progress=null,t.nod_add=null,t.nod_unlock=null,t.data=null,t.maxCount=0,t.objectData=null,t.isTouchState=!1,t.touchTime=0,t.longTouchTime=500,t.cd=0,t.clickState=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=u.default),d.prototype.onEnable=function(){this.spr_icon.node.on(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),this.nod_add.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nod_add.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.nod_add.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},d.prototype.onDisable=function(){this.spr_icon.node.off(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),this.nod_add.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.nod_add.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.nod_add.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},d.prototype.setData=function(t,e){this.objectData=e,this.data=t,this.isTouchState=!1,this.touchTime=0,this.updateUI()},d.prototype.updateUI=function(){},d.prototype.onBtnAdd=function(){},d.prototype.onBtnUnlock=function(){},d.prototype.onTouchIcon=function(){cc.log(this.data.prop_id),p.default.getInstance().dealByItemID(this.data.prop_id)},d.prototype.onTouchStart=function(){this.isTouchState=!0,this.touchTime=0,this.clickState=1,cc.tween(this.nod_add).to(.2,{scale:1.1}).start()},d.prototype.onTouchEnd=function(){this.isTouchState=!1,this.clickState=2,cc.tween(this.nod_add).to(.2,{scale:1}).start()},d.prototype.onTouchCancel=function(){this.isTouchState=!1,this.touchTime=0,this.clickState=0,cc.tween(this.nod_add).to(.2,{scale:1}).start()},d.prototype.update=function(t){this.isTouchState?(this.touchTime=this.touchTime+1e3*t,this.touchTime>=this.longTouchTime&&(this.cd+=1e3*t,100<=this.cd&&(this.cd=0,this.addOneCount()))):2==this.clickState&&(this.clickState=0,this.touchTime<this.longTouchTime&&this.addOneCount())},d.prototype.addOneCount=function(){return!1},s([a(cc.Sprite)],d.prototype,"spr_icon",void 0),s([a(cc.ProgressBar)],d.prototype,"progress",void 0),s([a(cc.Label)],d.prototype,"lbl_progress",void 0),s([a(cc.Node)],d.prototype,"nod_add",void 0),s([a(cc.Node)],d.prototype,"nod_unlock",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],ShelfMgr:[function(t,e,o){"use strict";cc._RF.push(e,"2bef6Zhy6JISpNk4PFQc8RX","ShelfMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ShelfItemData=void 0;var c,s=i("Const"),l=i("Formula"),p=i("GameMgr"),u=i("LvMgr"),d=i("PropMgr"),h=i("Singleton"),_=i("ShelfOrderData");function f(){return null!==c&&c.apply(this,arguments)||this}r(f,c=h.default),f.prototype.checkShelfCanSell=function(t){return!(!d.default.checkFindProp(t)||!d.default.getConfigByPropID(t).shop_price)},f.prototype.getListByData=function(t){for(var e=l.Formula.stallWarehouseAdd(t),o=[],n=0,i=p.gm.config.data.ShelfProperty;n<i.length;n++){var a,r=i[n];this.checkShelfCanSell(r.prop_id)&&u.default.getInstance().getLv()>=r.lv_need&&((a=new g).prop_id=r.prop_id,a.max_number=e,a.cur_count=_.default.getInstance().getStallGoodsCount(t.objectID,r.prop_id),o.push(a))}return o},f.prototype.getMaxCount=function(t){for(var e=0,o=0,n=this.getListByData(t);o<n.length;o++)e+=n[o].max_number;return e},f.prototype.getShelfUnlockConifg=function(t){for(var e=0,o=p.gm.config.data.ShelfUnlock;e<o.length;e++){var n=o[e];if(n.object_id==t)return n}},f.prototype.checkItems=function(t,e){for(var o=0,n=e;o<n.length;o++){var i=n[o],a=_.default.getInstance().getStallGoodsCount(t,i.id);if(i.num>a)return!1}return!0},f.prototype.sell=function(t){d.default.addGainThing([this.getCoinByItem(t)],!1)},f.prototype.getCoinByItem=function(t){var e={};e.file=s.ThingType.normal,e.id=s.CommonPropID.coin;for(var o=e.num=0,n=t;o<n.length;o++){var i=n[o],a=d.default.getConfigByPropID(i.id);e.num+=l.Formula.shelfPayCount(a.shop_price)*i.num}return e.num=Math.round(e.num),e},f.prototype.addGood=function(t,e,o){return!!(o=void 0===o?1:o)&&(d.default.getPropCount(e)<o?(p.gm.ui.showNotice("\u4ed3\u5e93\u8d27\u7269\u4e0d\u8db3"),!1):(d.default.tryConsume([{id:e,num:o}])&&_.default.getInstance().addGoods(t,e,o),!0))},f.prototype.manualSellToBusinessman=function(t,e,o){if(void 0===e&&(e=0),d.default.checkBagEnough(t,!1,1-(o=void 0===o?0:o)/100))return d.default.sellByBag(t,s.SellType.shop,e,1-o/100);for(var n=0,i=t;n<i.length;n++){var a=i[n];if(d.default.getPropCount(a.id)<a.num)return!1}for(var r=0,c=t;r<c.length;r++){a=c[r];var l=Math.min(a.num,d.default.getPropCount(a.id));d.default.sellByBag([{id:a.id,num:l}],s.SellType.shop,e,1-o/100)}return!0},r=f,a.default=r;var g=(y.prototype.getLeftCount=function(){return Math.max(this.max_number-this.cur_count,0)},y.prototype.addCount=function(t){this.cur_count+=t},y);function y(){}a.ShelfItemData=g,cc._RF.pop()},{}],ShelfNpcMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ea5d0wTUChEJ5Slbey43kf6","ShelfNpcMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.NpcRoad=void 0;var c,s=i("Const"),l=i("Formula"),p=i("GameMgr"),u=i("MapDataHelper"),d=i("Singleton"),h=i("MathUtils"),_=i("ObjectUtils"),f=i("BusinessmanMgr"),g=i("TaskRecordData");function y(){var t=c.call(this)||this;return t.npc_configs_pool={},t.cur_configs={},t.shelf_npc_cd={},t._init(),t}r(y,c=d.default),y.prototype._init=function(){for(var t=0,e=p.gm.config.data.VillagerData;t<e.length;t++){var o=e[t];this.npc_configs_pool[o.npc_id]=o}for(var n=0,i=[s.SpecialObjectID.stall_desk_1,s.SpecialObjectID.stall_desk_2,s.SpecialObjectID.stall_desk_3,s.SpecialObjectID.stall_desk_4,s.SpecialObjectID.stall_desk_5,s.SpecialObjectID.stall_desk_6];n<i.length;n++){var a;o=i[n],g.default.getInstance().unlockObjectRecord[o]&&(a=l.Formula.getShelfCDTime(u.default.getDataByID(o)),this.setShelfNpcCD(o,a))}},y.prototype.check=function(t){if(this.isOpen())for(var e in this.shelf_npc_cd){var o;"number"==typeof this.shelf_npc_cd[e]&&(this.shelf_npc_cd[e]-=t,this.shelf_npc_cd[e]<=0)&&(this.tryToCreateNpc(),o=l.Formula.getShelfCDTime(u.default.getDataByID(Number(e))),this.setShelfNpcCD(Number(e),o))}},y.prototype.setShelfNpcCD=function(t,e){(e=void 0===e?0:e)||(e=l.Formula.getShelfCDTime(u.default.getDataByID(t))),this.shelf_npc_cd[t]=e},y.prototype.isOpen=function(){return!!(g.default.getInstance().unlockObjectRecord[s.SpecialObjectID.stall]&&g.default.getInstance().unlockObjectRecord[s.SpecialObjectID.stall_desk_1]&&g.default.getInstance().unlockObjectRecord[s.SpecialObjectID.shelf_cash_box])},y.prototype.tryToCreateNpc=function(){var t=this._takeOutNpcConfig();t&&f.BusinessmanMgr.getInstance().createByConfig(t,[35,42,36])},y.prototype._takeOutNpcConfig=function(){var t,e=[];for(t in this.npc_configs_pool){var o=this.npc_configs_pool[t];e.push(o)}if(0<e.length){var n=e[h.default.randomNum(0,e.length-1)];return _.default.moveTo(this.npc_configs_pool,this.cur_configs,n.npc_id),n}return null},y.prototype.removeNpc=function(t){_.default.moveTo(this.cur_configs,this.npc_configs_pool,t)},r=y,a.default=r,a.NpcRoad=function(){this.road=[],this.role_count=0},cc._RF.pop()},{}],ShelfOrderData:[function(t,e,o){"use strict";cc._RF.push(e,"869b3naQvVMG7FJSgLvFucR","ShelfOrderData");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0}),r.ShelfOrder=void 0;var s,l=i("ConfigUtils"),p=i("GameMgr"),u=i("LocalData"),d=i("LvMgr"),h=i("MathUtils"),_=(a=i("StorageBase"),i("ShelfMgr"));function f(){var t=null!==s&&s.apply(this,arguments)||this;return t.STORAGE_KEY="ShelfOrderData",t.shelf_orders={},t.cashier_orders=[],t.stall_goods={},t}c(f,s=a.StorageBase),f.prototype.loadDataEnd=function(){for(var t=0;t<this.cashier_orders.length;t++){var e=new y;Object.assign(e,this.cashier_orders[t]),this.cashier_orders[t]=e,_.default.getInstance().sell(e.items)}this.shelf_orders={},this.cashier_orders=[],this.async_write_data()},f.prototype.createTempOrder=function(){for(var t=[],e=0,o=p.gm.config.data.ShelfProperty;e<o.length;e++){var n=o[e];d.default.getInstance().getLv()>=n.lv_need&&t.push(n)}if(0<t.length){var i=t[h.default.randomNum(0,t.length-1)],a=new y;return a.setItems([{id:i.prop_id,num:1}]),this.async_write_data(),a}},f.prototype.pushToObjectList=function(t,e){this.shelf_orders[e]||(this.shelf_orders[e]=[]),this.shelf_orders[e].push(t),this.async_write_data()},f.prototype.deleteCashOrder=function(t){for(var e=0;e<this.cashier_orders.length;e++)if(this.cashier_orders[e]==t)return this.cashier_orders.splice(e,1),void this.async_write_data();cc.error("\u627e\u4e0d\u5230\u8be5\u8ba2\u5355",t)},f.prototype.checkOrder=function(t){if(this.checkOrderInCashier(t))return!0;for(var e in this.shelf_orders){var o=this.shelf_orders[e];if(0<o.length)for(var n=0;n<o.length;n++)if(t==o[n])return!0}return!1},f.prototype.checkOrderInCashier=function(t){for(var e=0;e<this.cashier_orders.length;e++)if(this.cashier_orders[e]==t)return!0},f.prototype.moveToCashier=function(t){var e,o;for(o in this.shelf_orders)for(var n=this.shelf_orders[o],i=0;i<n.length;i++)if(n[i]==t){var a=n.splice(i,1);return(e=this.cashier_orders).push.apply(e,a),void this.async_write_data()}},f.prototype.removeShelfOrder=function(t){for(var e in this.shelf_orders)for(var o=this.shelf_orders[e],n=0;n<o.length;n++)if(o[n]==t)return o.splice(n,1),void this.async_write_data()},f.prototype.getObjectLineLength=function(t){return(t=f.getInstance().shelf_orders[t])?t.length:0},f.prototype.getOrderIndex=function(t){for(var e in this.shelf_orders)for(var o=this.shelf_orders[e],n=0;n<o.length;n++)if(o[n]==t)return n;for(n=0;n<this.cashier_orders.length;n++)if(this.cashier_orders[n]==t)return n;return 0},f.prototype.addGoods=function(t,e,o){if(this.stall_goods[t]||(this.stall_goods[t]=[]),o<=0&&Math.abs(o)>this.getStallGoodsCount(t,e))cc.error("\u8d27\u7269\u4e0d\u8db3\u4ee5\u6263\u9664");else{for(var n=!1,i=0,a=this.stall_goods[t];i<a.length;i++){var r=a[i];if(r.id==e){r.num+=o,n=!0;break}}n||this.stall_goods[t].push({id:e,num:o}),this.async_write_data()}},f.prototype.getStallGoodsCount=function(t,e){if(!this.stall_goods[t])return 0;for(var o=0,n=this.stall_goods[t];o<n.length;o++){var i=n[o];if(i.id==e)return i.num}return 0},f.prototype.getStallCurCount=function(t){if(!this.stall_goods[t])return this.stall_goods[t]=[],0;for(var e=0,o=0,n=this.stall_goods[t];o<n.length;o++)e+=n[o].num;return e},f.prototype.getStallGoodsData=function(){return{havaCount:0,allCount:0}},f.prototype.tryRemoveFromShelf=function(t,e){for(var o=0,n=e;o<n.length;o++){var i=n[o];if(f.getInstance().getStallGoodsCount(t,i.id)<i.num)return!1}for(var a=0,r=e;a<r.length;a++)i=r[a],f.getInstance().addGoods(t,i.id,-i.num);return!0},a=f,r.default=a;var g,y=(c(m,g=u.OrderLocalData),m.prototype.setItems=function(t){this.items=t},m.prototype.setNpcID=function(t){this.npc_id=t},m.prototype.setObjectID=function(t){this.objectID=t},m.prototype.getObjectID=function(){return this.objectID},m.prototype.getNpcConfig=function(){return l.NPCDataUtils.getConfigByID(this.npc_id)},m.prototype.createItems=function(t,e){void 0===e&&(e=1);for(var o=[],n=0,i=p.gm.config.data.ShelfProperty;n<i.length;n++){var a=i[n];_.default.getInstance().checkShelfCanSell(a.prop_id)&&d.default.getInstance().getLv()>=a.lv_need&&(a={id:a.prop_id,num:e},o.push(a))}return[o[h.default.randomNum(0,o.length-1)]]},m);function m(){var t=g.call(this)||this;return t.dealing=!1,t.objectID=0,t}r.ShelfOrder=y,cc._RF.pop()},{}],ShelfOrderHelper:[function(t,e,o){"use strict";cc._RF.push(e,"ee357sbO05NbLXpHCDMxaeF","ShelfOrderHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("MapDataHelper"),p=i("Singleton"),u=i("MathUtils"),d=i("ShelfMgr"),h=i("ShelfOrderData");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.desk=[s.SpecialObjectID.stall_desk_1,s.SpecialObjectID.stall_desk_2,s.SpecialObjectID.stall_desk_3,s.SpecialObjectID.stall_desk_4,s.SpecialObjectID.stall_desk_5,s.SpecialObjectID.stall_desk_6],t}r(_,c=p.default),_.prototype.tryToCreateNewOrder=function(){return h.default.getInstance().createTempOrder()},_.prototype.getFreeDesk=function(){for(var t=[],e=0,o=this.desk;e<o.length;e++){var n=o[e];(n=l.default.findDataByObjectID(n,!1))&&!n.isLock()&&d.default.getInstance().getShelfUnlockConifg(n.objectID).person_num>h.default.getInstance().getObjectLineLength(n.objectID)&&t.push(n.objectID)}return 0<t.length?t[u.default.randomNum(0,t.length-1)]:0},_.prototype.getFreeDesks=function(){for(var t=[],e=0,o=this.desk;e<o.length;e++){var n=o[e];(n=l.default.findDataByObjectID(n,!1))&&!n.isLock()&&d.default.getInstance().getShelfUnlockConifg(n.objectID).person_num>h.default.getInstance().getObjectLineLength(n.objectID)&&t.push(n.objectID)}return t},_.prototype.checkItems=function(t,e){for(var o=[],n=0,i=t;n<i.length;n++){for(var a=i[n],r=!0,c=0,s=e;c<s.length;c++){var l=s[c],p=h.default.getInstance().getStallGoodsCount(a,l.id);if(l.num>p){r=!1;break}}r&&o.push(a)}return 0<o.length?o[u.default.randomNum(0,o.length-1)]:0},r=_,a.default=r,cc._RF.pop()},{}],ShelfUI:[function(t,e,o){"use strict";cc._RF.push(e,"68a7a22El1JjaKXkXOQ3pVU","ShelfUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("List"),d=i("GameModule"),h=i("TaskMgr"),_=i("GuideMgr"),f=i("ShelfMgr"),g=i("PropMgr"),y=i("TaskRecordData"),m=i("AudioUtils"),v=i("ShelfItemNew"),b=i("Const"),I=i("Finger"),D=i("ShelfOrderData"),C=i("HouseKeeperMgr"),O=i("NetUtils"),w=i("EventManager");function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_max=null,t.finger=null,t.items=[],t.uid="",t.objectData=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(M,l=d.default),M.prototype.updateUI=function(){this.objectData?(this.lbl_max.string="\u5f53\u524d\u5bb9\u91cf "+D.default.getInstance().getStallCurCount(this.objectData.objectID)+"/"+f.default.getInstance().getMaxCount(this.objectData),this.items=f.default.getInstance().getListByData(this.objectData),this.list.numItems=this.items.length):cc.error("not found object",this.uid)},M.prototype.onOneKey=function(){this.replenishGoods()?(y.default.getInstance().setReplenish(this.objectData.objectID),h.default.getInstance().checkAll(),p.gm.ui.showNotice("\u8865\u8d27\u5b8c\u6210"),C.default.getInstance().onStallShelfAdd(),O.ReportData.instance.report_point(100005,41000017),w.default.emit(b.GameEvent.replenish_goods)):p.gm.ui.showNotice("\u65e0\u53ef\u8865\u5145\u8d27\u7269"),this.updateUI()},M.prototype.replenishGoods=function(){for(var t=!1,e=0,o=this.items;e<o.length;e++){var n,i=o[e],a=i.getLeftCount();0<a&&0<(n=g.default.getPropCount(i.prop_id))&&(n=Math.min(a,n),f.default.getInstance().addGood(this.objectData.objectID,i.prop_id,n),i.addCount(n),t=!0)}return t},M.prototype.onRenderList=function(t,e){t.getComponent(v.default).setData(this.items[e],this.objectData)},M.prototype.setData=function(t){this.uid=t,this.objectData=p.gm.mapData.getObjectData(this.uid),this.updateUI(),_.default.getInstance().touchCondition.mission==b.ConditionType.replenish_goods&&_.default.getInstance().touchCondition.id==this.objectData.objectID&&this.finger.showFinger(!0,!0)},M.prototype.onBtnClose=function(){m.default.click(),p.gm.mainUI.visiable(!0),this.closeMe()},M.prototype.onEnable=function(){p.gm.mainUI.visiable(!1)},s([a(u.default)],M.prototype,"list",void 0),s([a(cc.Label)],M.prototype,"lbl_max",void 0),s([a(I.default)],M.prototype,"finger",void 0),i=s([i],M),r.default=i,cc._RF.pop()},{}],ShopBuyTicket:[function(t,e,o){"use strict";cc._RF.push(e,"c6407FzpvtC6KEV6yWoI95c","ShopBuyTicket");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("List"),u=i("GameModule"),d=i("BuyTicketItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.data=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.default),h.prototype.setData=function(t){this.data=t,this.updateUI()},h.prototype.updateUI=function(){this.list.numItems=this.data.length},h.prototype.onRender=function(t,e){t.getComponent(d.default).setData(this.data[e])},h.prototype.onBtnClose=function(){this.closeMe()},s([a(p.default)],h.prototype,"list",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],ShopCoinUI:[function(t,e,o){"use strict";cc._RF.push(e,"144d0WtWo5O2KJMfrktH8hL","ShopCoinUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("List"),_=i("GameModule"),f=i("ShopData"),g=i("ShopDataHelper"),y=i("ShopHeartListItem");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count_down=null,t.list_items=null,t.lbl_diamond=null,t.arr=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=_.default),m.prototype.updateUI=function(){this.arr=g.default.getInstance().getCoinList(),this.list_items.numItems=this.arr.length,this.lbl_diamond.string=u.gm.config.data.Setting[0].shop_coin_refresh_use_diamond+""},m.prototype.onBtnBack=function(){this.closeMe()},m.prototype.onRenderListItem=function(t,e){t.getComponent(y.default).setData(this.arr[e])},m.prototype.show=function(){u.gm.ui.showModule(u.gm.const.ShopTopUI),this.updateUI()},m.prototype.onBtnRefresh=function(){d.default.tryConsume([{id:p.CommonPropID.diamond,num:u.gm.config.data.Setting[0].shop_coin_refresh_use_diamond}])&&(f.default.getInstance().refreshCoinRecord(),this.updateUI())},s([a(cc.Label)],m.prototype,"lbl_count_down",void 0),s([a(h.default)],m.prototype,"list_items",void 0),s([a(cc.Label)],m.prototype,"lbl_diamond",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],ShopDataHelper:[function(t,e,o){"use strict";cc._RF.push(e,"b10b3zu/RpHXowa9gb6DViq","ShopDataHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.ShopListData=void 0;var c,s=i("Const"),l=i("GameMgr"),p=i("Singleton"),u=i("ObjectUtils"),d=i("ShopData");function h(){return null!==c&&c.apply(this,arguments)||this}r(h,c=p.default),h.prototype.getHeartList=function(){for(var t=[],e=0,o=l.gm.config.data.HeartShop;e<o.length;e++){var n=o[e],i=new _;i.id=n.id,i.gotItem=n.thing_id,i.unlock_lv=n.unlock_lv;var a=d.default.getInstance().shop_heart_total_buy_record[n.id]||0,r=n.heart_count*Math.pow(2,a);i.pay_item={file:s.ThingType.normal,id:s.CommonPropID.heart,num:r},i.total_buy_count_limit=n.total_buy_count||0,a>=n.total_buy_count&&(i.isSellout=!0),t.push(i)}return t},h.prototype.getCoinList=function(){for(var t=[],e=0,o=l.gm.config.data.CoinShop;e<o.length;e++){var n=o[e],i=new _;i.id=n.id,i.gotItem=n.thing_id,i.unlock_lv=n.unlock_lv;var a=d.default.getInstance().shop_coin_today_buy_record[n.id]||0;i.pay_item=u.default.copy(n.base_pay_count),n.period_buy_count||(i.pay_item.num=i.pay_item.num*Math.pow(5,a)),n.period_buy_count&&a>=n.period_buy_count&&(i.isSellout=!0),t.push(i)}return t},r=h,a.default=r;var _=function(){this.unlock_lv=1,this.isSellout=!1,this.total_buy_count_limit=0,this.period_buy_count_limit=0};a.ShopListData=_,cc._RF.pop()},{}],ShopData:[function(t,e,o){"use strict";cc._RF.push(e,"f631aPDezVAP7aY1vcLIB71","ShopData");var n,i,a=t,r=e,c=o;function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.STORAGE_KEY="ShopData",t.shop_heart_total_buy_record={},t.shop_coin_today_buy_record={},t.heart_count=0,t}n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},r=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(c,"__esModule",{value:!0}),r(s,i=a("StorageBase").StorageBase),s.prototype.addHeartByRecord=function(t){this.shop_heart_total_buy_record[t]||(this.shop_heart_total_buy_record[t]=0),this.shop_heart_total_buy_record[t]+=1,this.async_write_data()},s.prototype.addCoinByRecord=function(t){this.shop_coin_today_buy_record[t]||(this.shop_coin_today_buy_record[t]=0),this.shop_coin_today_buy_record[t]+=1,this.async_write_data()},s.prototype.refreshCoinRecord=function(){this.shop_coin_today_buy_record={},this.heart_count=0,this.async_write_data()},s.prototype.refreshRecord=function(){this.refreshCoinRecord()},r=s,c.default=r,cc._RF.pop()},{}],ShopDecorationItem:[function(t,e,o){"use strict";cc._RF.push(e,"21adbdmhLlMcqK6fBLkAGA8","ShopDecorationItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("IconUtils"),d=i("ListItem"),h=i("DecorationMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_icon=null,t.spr_bg=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=d.default),_.prototype.updateUI=function(){},_.prototype.setData=function(t){var e;1==(this.bigItem=t).file?(u.IconUtils.setPropSprite(t.id,this.spr_icon),(e=p.PropUtils.getConfigByPropID(t.id))?this.lbl_name.string=e.name:cc.error("not config",t)):(u.IconUtils.setObjectSprite(t.id,this.spr_icon),(e=p.BigMapConfigUtils.getConfig(t.id))?(this.lbl_name.string=e.name,(e=h.default.getConfig(t.id,1))&&2==e.type&&u.IconUtils.setQuality(e.color,this.spr_bg)):cc.error("not config",t)),this.updateUI()},s([a(cc.Label)],_.prototype,"lbl_name",void 0),s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),s([a(cc.Sprite)],_.prototype,"spr_bg",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ShopDecorationPool:[function(t,e,o){"use strict";cc._RF.push(e,"4ca68TbHQlJ+YMuuP6o5JsY","ShopDecorationPool");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem"),u=i("ConfigUtils"),d=i("Const"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("GameModule"),y=i("GetAwardUI"),m=i("DailyTaskData"),v=i("GuideMgr"),b=i("LotteryMgr"),I=i("TaskRecordData"),D=i("ShopData"),C=i("ShopDecorationItem");function O(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.common_one=null,t.common_ten=null,t.ten_node=null,t.tips_node=null,t.data=null,t.showItems=[],t._is_pet=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(O,l=g.default),O.prototype.onEnable=function(){v.default.getInstance().showTaskFinger(1030,2)},O.prototype.onDisable=function(){this._is_pet&&(h.gm.ui.closeModule(h.gm.const.ShopTopUI),h.gm.ui.showModule(h.gm.const.BaseUI))},O.prototype.setDataByProp=function(t,e){void 0===e&&(e=!1),this.data=null,this._is_pet=e,t==d.CommonPropID.ticket?(y.default.videoPoint=40000027,e?this.data=b.default.getInstance().getConfigByProp(d.CommonPropID.ticket)[2]:I.default.getInstance().ten?this.data=b.default.getInstance().getConfigByProp(d.CommonPropID.ticket)[1]:this.data=b.default.getInstance().getConfigByProp(d.CommonPropID.ticket)[0]):t==d.CommonPropID.heart&&(y.default.videoPoint=40000028,this.data=b.default.getInstance().getConfigByProp(d.CommonPropID.heart)[0]),this.setData(this.data,e)},O.prototype.setData=function(t,e){void 0===e&&(e=!1),this.data=t,this.data.one_cost_num.id==d.CommonPropID.ticket?(this.setShowItems(b.default.getInstance().getShowDiamondItems(e)),this.ten_node.active=!0,this.tips_node.active=!1):this.data.one_cost_num.id==d.CommonPropID.heart&&(this.setShowItems(b.default.getInstance().getShowHeartItems()),this.ten_node.active=!1,this.tips_node.active=!0),this.updateUI()},O.prototype.setShowItems=function(t){this.showItems=t,this.list.numItems=this.showItems.length},O.prototype.updateUI=function(){var t;this.data.one_cost_num.id==d.CommonPropID.ticket?(this.common_one.setData(this.data.one_cost_num),this.common_ten.setData(this.data.ten_cost_num)):this.data.one_cost_num.id==d.CommonPropID.heart&&(D.default.getInstance().heart_count||(D.default.getInstance().heart_count=0,D.default.getInstance().async_write_data()),t=D.default.getInstance().heart_count<=0?0:Math.pow(3,D.default.getInstance().heart_count-1),this.common_one.setData(this.data.one_cost_num,t))},O.prototype.onRender=function(t,e){t.getComponent(C.default).setData(this.showItems[e])},O.prototype.onBtnOne=function(){var t=this,e=this.data.one_cost_num.num;this.data.one_cost_num.id==d.CommonPropID.heart&&(D.default.getInstance().heart_count<=0?e=0:e*=Math.pow(3,D.default.getInstance().heart_count-1));var o=b.default.getInstance().getItems(this.data.one_cost_num.id,this.data.pool_id,1);_.default.tryConsumeThing([{file:this.data.one_cost_num.file,id:this.data.one_cost_num.id,num:e}],!0)&&(m.DailyTaskData.getInstance().shop_draw++,m.DailyTaskData.getInstance().async_write_data(),D.default.getInstance().heart_count++,D.default.getInstance().async_write_data(),this.updateUI(),h.gm.ui.showModule(h.gm.const.GetAwardUI,function(e){h.gm.localData.addShopLotteryTimes(1),e.setVideo(t.data.one_cost_num.id!=d.CommonPropID.heart),e.setData(o),e.callback=function(){var t=u.ConfigUtils.ShopRewardProgressUtils.getRewards();if(0<t.length){for(var o=[],n=[],i=0,a=t;i<a.length;i++){var r=a[i];n.push(r.id),o.push(r.thing_id)}h.gm.localData.addLotteryProcessIDs(n),e.setData(o)}else e.closeMe()}}))},O.prototype.onBtnTen=function(){var t,e=this;this.data.one_cost_num.id!=d.CommonPropID.heart&&(t=b.default.getInstance().getItems(this.data.one_cost_num.id,this.data.pool_id,10),_.default.tryConsumeThing([this.data.ten_cost_num],!0)&&(m.DailyTaskData.getInstance().shop_draw++,m.DailyTaskData.getInstance().async_write_data(),I.default.getInstance().addTen(),h.gm.ui.showModule(h.gm.const.GetAwardUI,function(o){h.gm.localData.addShopLotteryTimes(10),o.setVideo(!0),o.setData(t),o.callback=function(){var t=u.ConfigUtils.ShopRewardProgressUtils.getRewards();if(0<t.length){for(var n=[],i=[],a=0,r=t;a<r.length;a++){var c=r[a];i.push(c.id),n.push(c.thing_id)}h.gm.localData.addLotteryProcessIDs(i),o.setData(n)}else o.closeMe(),e.setDataByProp(e.data.one_cost_num.id,e._is_pet)}}),v.default.getInstance().endGuide(1030)))},O.prototype.onBtnBack=function(){this.closeMe()},s([a(f.default)],O.prototype,"list",void 0),s([a(p.default)],O.prototype,"common_one",void 0),s([a(p.default)],O.prototype,"common_ten",void 0),s([a(cc.Node)],O.prototype,"ten_node",void 0),s([a(cc.Node)],O.prototype,"tips_node",void 0),i=s([i],O),r.default=i,cc._RF.pop()},{}],ShopHeartListItem:[function(t,e,o){"use strict";cc._RF.push(e,"fe580S/Av1H6Lr3tiLWDCpH","ShopHeartListItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("LvMgr"),_=i("PropMgr"),f=i("ListItem"),g=i("NodeUtils"),y=i("StringUtil"),m=i("DailyTaskData"),v=i("ShopData");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.spr_icon=null,t.lbl_count=null,t.lbl_pay_count=null,t.lbl_tip=null,t.nod_not_empty=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=f.default),b.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},b.prototype.setData=function(t){this.data=t,this.updateUI()},b.prototype.updateUI=function(){p.default.setUIByGainThing(this.data.gotItem,this.spr_icon,this.lbl_name),this.lbl_count.string=""+this.data.gotItem.num,this.lbl_pay_count.string=""+y.default.n2k(this.data.pay_item.num,1),this.lbl_tip.string="",h.default.getInstance().getLv()<this.data.unlock_lv?(this.lbl_tip.string=this.data.unlock_lv+"\u7ea7\u89e3\u9501",g.default.setGray(this.node,!0)):g.default.setGray(this.node,!1),this.nod_not_empty.active=!this.data.isSellout,this.data.isSellout&&(this.lbl_tip.string="\u5df2\u552e\u7a7a")},b.prototype.onTouchItem=function(){this.data.isSellout?d.gm.ui.showNotice("\u5df2\u552e\u7a7a"):h.default.getInstance().getLv()<this.data.unlock_lv?d.gm.ui.showNotice(this.data.unlock_lv+"\u7ea7\u89e3\u9501"):_.default.tryToBuy(this.data.gotItem,this.data.pay_item,!0)&&(m.DailyTaskData.getInstance().shop_buy++,m.DailyTaskData.getInstance().async_write_data(),this.data.pay_item.id==u.CommonPropID.heart?(v.default.getInstance().addHeartByRecord(this.data.id),d.gm.ui.get_module(d.gm.const.ShopHeartUI).updateUI()):this.data.pay_item.id==u.CommonPropID.coin&&(v.default.getInstance().addCoinByRecord(this.data.id),d.gm.ui.get_module(d.gm.const.ShopCoinUI).updateUI()))},s([a(cc.Label)],b.prototype,"lbl_name",void 0),s([a(cc.Sprite)],b.prototype,"spr_icon",void 0),s([a(cc.Label)],b.prototype,"lbl_count",void 0),s([a(cc.Label)],b.prototype,"lbl_pay_count",void 0),s([a(cc.Label)],b.prototype,"lbl_tip",void 0),s([a(cc.Node)],b.prototype,"nod_not_empty",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],ShopHeartUI:[function(t,e,o){"use strict";cc._RF.push(e,"a6979kIBtVBdqXleJHKikS0","ShopHeartUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("List"),d=i("GameModule"),h=i("ShopDataHelper"),_=i("ShopHeartListItem");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count_down=null,t.list_items=null,t.arr=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=d.default),f.prototype.updateUI=function(){this.arr=h.default.getInstance().getHeartList(),this.list_items.numItems=this.arr.length},f.prototype.onBtnBack=function(){this.closeMe()},f.prototype.onRenderListItem=function(t,e){t.getComponent(_.default).setData(this.arr[e])},f.prototype.show=function(){p.gm.ui.showModule(p.gm.const.ShopTopUI),this.updateUI()},s([a(cc.Label)],f.prototype,"lbl_count_down",void 0),s([a(u.default)],f.prototype,"list_items",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],ShopMainUI:[function(t,e,o){"use strict";cc._RF.push(e,"303f2goJWxCUqpCI9MT4PMP","ShopMainUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Const"),d=i("GameMgr"),h=i("GameModule"),_=i("Finger"),f=i("GuideMgr");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.finger_lottery=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=h.default),g.prototype.onBtnClose=function(){p.default.click(),d.gm.ui.closeModule(d.gm.const.ShopTopUI),this.closeMe()},g.prototype.onBtnHeartShop=function(){d.gm.ui.showModule(d.gm.const.ShopHeartUI)},g.prototype.onBtnDiamondShop=function(){},g.prototype.onBtnCoinShop=function(){d.gm.ui.showModule(d.gm.const.ShopCoinUI)},g.prototype.onBtnDraw=function(){d.gm.ui.showModule(d.gm.const.LotteryMainUI)},g.prototype.onBtnPayShop=function(){},g.prototype.show=function(){d.gm.ui.showModule(d.gm.const.ShopTopUI),f.default.getInstance().touchCondition.mission==u.ConditionType.buy_10&&this.finger_lottery.showFinger(!0,!0)},s([a(_.default)],g.prototype,"finger_lottery",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],ShopTopUI:[function(t,e,o){"use strict";cc._RF.push(e,"f0a24lHJahIc4h8URoHqn03","ShopTopUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("PropMgr"),h=i("EventManager"),_=i("GameModule"),f=i("StringUtil");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_coin=null,t.lbl_diamond=null,t.lbl_heart_count=null,t.lbl_ticket=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=_.default),g.prototype.onEnable=function(){h.default.on(p.GameEvent.updateBase,this.updateUI,this),this.updateUI()},g.prototype.onDisable=function(){h.default.off(p.GameEvent.updateBase,this.updateUI,this)},g.prototype.updateUI=function(){this.lbl_coin.string=""+f.default.n2k(d.default.getPropCount(p.CommonPropID.coin)),this.lbl_ticket.string=""+f.default.n2k(d.default.getPropCount(p.CommonPropID.ticket)),this.lbl_diamond.string=""+f.default.n2k(d.default.getPropCount(p.CommonPropID.diamond)),this.lbl_heart_count.string=""+f.default.n2k(d.default.getPropCount(p.CommonPropID.heart),0)},g.prototype.onBtnTicket=function(){u.gm.ui.showModule(u.gm.const.ShopBuyTicket,function(t){t.setData([1,5,10])})},s([a(cc.Label)],g.prototype,"lbl_coin",void 0),s([a(cc.Label)],g.prototype,"lbl_diamond",void 0),s([a(cc.Label)],g.prototype,"lbl_heart_count",void 0),s([a(cc.Label)],g.prototype,"lbl_ticket",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],ShopUI:[function(t,e,o){"use strict";cc._RF.push(e,"533a8jmL5VICqKy0I+AA4jh","ShopUI");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("GameMgr"),u=a("GameModule"),d=a("GuideMgr");function h(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(h,s=u.default),h.prototype.onBtnDecoration=function(){p.gm.ui.showModule(p.gm.const.ShopDecorationPool,function(t){t.setDataByProp(l.CommonPropID.ticket)})},h.prototype.onBtnHeart=function(){p.gm.ui.showModule(p.gm.const.ShopDecorationPool,function(t){t.setDataByProp(l.CommonPropID.heart)})},h.prototype.onBtnCoin=function(){},h.prototype.onBtnBack=function(){this.closeMe()},h.prototype.onEnable=function(){p.gm.mainUI.visiable(!1),d.default.getInstance().showTaskFinger(1030,1)},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],h),r.default=a,cc._RF.pop()},{}],Shopboard:[function(t,e,o){"use strict";cc._RF.push(e,"e40cf61QgxN26Bq3a1xPAJm","Shopboard");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_outside=null,t.nod_inside=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),u.prototype.onLoad=function(){},u.prototype.close=function(){},s([a(cc.Node)],u.prototype,"nod_outside",void 0),s([a(cc.Node)],u.prototype,"nod_inside",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],SignInItem:[function(t,e,o){"use strict";cc._RF.push(e,"b0439y7KMFNPqqv+hmWrDhD","SignInItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonItem_4"),d=i("ListItem");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_got=null,t.common_item=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=d.default),h.prototype.setData=function(t){this.data=t,this.updateUI()},h.prototype.updateUI=function(){this.common_item.setName("\u7b2c"+(this.listId+1)+"\u5929"),this.common_item.setIconByPropID(this.data.rewards.id),this.common_item.setCountStr("X"+this.data.rewards.num),this.listId<p.default.getInstance().sign_in_time.length?this.nod_got.active=!0:this.nod_got.active=!1},s([a(cc.Node)],h.prototype,"nod_got",void 0),s([a(u.default)],h.prototype,"common_item",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],SignInUI:[function(t,e,o){"use strict";cc._RF.push(e,"08abf1PHLxCXoKRxEOeX49z","SignInUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("GameMgr"),d=i("PropMgr"),h=i("List"),_=i("RedDotMgr"),f=i("GameModule"),g=i("TimeUtils"),y=i("SignInItem");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.item=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=f.default),m.prototype.onEnable=function(){this.updateUI()},m.prototype.updateUI=function(){this.list.numItems=u.gm.config.data.SignInConfig.length-1,this.item.listId=6,this.item.setData(u.gm.config.data.SignInConfig[6])},m.prototype.onRender=function(t,e){t.getComponent(y.default).setData(u.gm.config.data.SignInConfig[e])},m.prototype.onBtnGetAward=function(){if(!(p.default.getInstance().sign_in_time.length<7))return u.gm.ui.showNotice("7\u5929\u7b7e\u5230\u5df2\u5b8c\u6210"),!1;for(var t=0,e=p.default.getInstance().sign_in_time;t<e.length;t++){var o=e[t];if(g.default.getDay()==new Date(1e3*o).toDateString())return u.gm.ui.showNotice("\u4eca\u5929\u5df2\u7b7e\u5230"),!1}var n=p.default.getInstance().sign_in_time.length;d.default.addGainThing([u.gm.config.data.SignInConfig[n].rewards],!0),p.default.getInstance().signIn(g.default.getTime()),this.updateUI(),_.default.getInstance().reCalculate("nod_sign_in")},s([a(h.default)],m.prototype,"list",void 0),s([a(y.default)],m.prototype,"item",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"57e25VeewFHDJ6Sve7pH+ZG","Singleton");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.getInstance=function(){return this.instance||(this.instance=new this),this.instance},i.release=function(){this.instance=null},n.default=i,cc._RF.pop()},{}],SlotDataBase:[function(t,e,o){"use strict";cc._RF.push(e,"7518buhr9lBD6u7ow8omSyl","SlotDataBase");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("TimeUtils"),r=n("ProduceData");function c(){this.isLock=!0,this.index=0,this.produceID=0,this.pickID=0,this.beginTime=0,this.endTime=0,this.rate=1,this.produceData=new r.default,this.produces=[]}c.prototype.produceBegin=function(t,e,o,n,i){void 0===n&&(n=0),void 0===i&&(i=1),t?(this.beginTime=e,this.endTime=o,this.rate=i,this.produceData.begin(e,o,t,n,i)):cc.error("produce id not found")},c.prototype.isWorking=function(){return this.endTime>a.default.getTime()},c.prototype.completeNow=function(){this.getCurProduce().produceID&&(this.endTime=a.default.getTime(),this.getCurProduce().changeEndTime(this.endTime))},c.prototype.reduceEndTime=function(t){this.getCurProduce().produceID&&(this.endTime=this.endTime-t,this.getCurProduce().changeEndTime(this.endTime))},c.prototype.getCurProduce=function(){return this.produceData},c.prototype.changeToProduceLocalData=function(){for(var t=[],e=0,o=this.produces;e<o.length;e++){var n={produceID:(n=o[e]).produceID,beginTime:n.beginTime,endTime:n.endTime,pickID:n.pickIDs[0],rate:n.rate};t.push(n)}return t},c.prototype.checkHasProduce=function(){return Boolean(this.produceID)},n=c,i.default=n,cc._RF.pop()},{}],SpineUtils:[function(t,e,o){"use strict";cc._RF.push(e,"99da4pUM+dCnpSNDViCBo8j","SpineUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.setAnimation=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=!1),e==t.animation&&!n||t.setAnimation(0,e,o)},i.stopAnimation=function(t){(t=t.setAnimation(0,t.animation,!0)).animationStart=t.animationEnd},i.changePartialCloth=function(t,e,o,n){var i,a=t.findSlot(e);a?(o=(i=t.skeletonData.getRuntimeData()).findSkin(o),i=i.findSlotIndex(e),(n=o.getAttachment(i,n))&&(a.setAttachment(n),t.invalidAnimationCache())):cc.error("not found slot:",e)},i.clearAttachment=function(t,e){(e=t.findSlot(e))&&e.setAttachment(null)},i.setEventListener=function(t,e){t.setEventListener(e)},i.setListener=function(t,e){e&&t.setCompleteListener(e)},i.updateSpine=function(t,e){var o;t?(o=t.getCurrent(0))&&(e=o.animationEnd*e,o.animationStart=e):cc.error("not spine",t)},i.async_get_bundle=function(t,e){var o=cc.assetManager.getBundle(t);o?e(o):cc.assetManager.loadBundle(t,function(o,n){console.log("load "+t+" bundle successfully."),e(n)})},i.async_set_spine=function(t,e,o,n,i){var a=this;this.async_get_bundle(e,function(e){var r=e.get(o,sp.SkeletonData);r?(t.skeletonData=r,n&&i&&n.call(i,r)):((r=a.spine_data_map[t.uuid])||(r={sprite_uuid:t.uuid,newest_url:o},a.spine_data_map[t.uuid]=r),r.sprite_uuid=t.uuid,r.newest_url=o,e.load(o,sp.SkeletonData,function(e,r){e?console.error(e.message):(t.skeletonData=r,n&&i&&n.call(i,r),(e=a.spine_data_map[t.uuid])&&o==e.newest_url&&t.isValid&&(t.skeletonData=r,n&&i&&n.call(i,r)))}))})},i.spine_data_map={},n.default=i,cc._RF.pop()},{}],StaffAnimalWorker:[function(t,e,o){"use strict";cc._RF.push(e,"61bf7m3FfpLC6wcgqgnD7qM","StaffAnimalWorker");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("NpcAni"),d=i("StaffData"),h=i("StaffView");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(_,c=p.GameObject),_.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(h.default)),this.view},_.prototype.initByID=function(t){var e=d.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),this.objectData=t,(e=this.getStaffView()).initLine(),t=t.getLeftPos(),e.setGrid(cc.v2(t.x-1,t.y+1)),e.getComponent(u.default).updateDirectionByType(s.RoleDirection.right_down),e.getComponent(u.default).playAniByType(s.EnumRoleAniType.standby),e.show(!0))},r=_,a.default=r,cc._RF.pop()},{}],StaffBBQChef:[function(t,e,o){"use strict";cc._RF.push(e,"d256cSO0OdJxq2yTPpc4m6w","StaffBBQChef");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("Formula"),p=i("GameMgr"),u=i("EventManager"),d=i("GameObject"),h=i("BarbecueOrderData"),_=i("NpcAni"),f=i("StaffData"),g=i("StaffView"),y=i("StaffViewMgr");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.initTime=0,t.left_time=0,t.view=null,t}r(m,c=d.GameObject),m.prototype.onEnable=function(){this.getStaffView().item_bubble.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBubble,this)},m.prototype.initByID=function(t){var e=f.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=p.gm.mapData.getObjectData(e.work_in_uid),(e=this.getStaffView()).initLine(),e.setGrid(cc.v2(t.getLeftCenterPos().x-1,t.getLeftCenterPos().y)),e.getComponent(_.default).updateDirectionByType(s.RoleDirection.right_down),e.show(!0))},m.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(g.default)),this.view},m.prototype.cookBegin=function(t){h.default.getInstance().setOrderDealing(t),this.order=t,this.getStaffView().data.isFree=!1,this.getComponent(_.default).playBarbecue(),this.getStaffView().item_bubble.setItems([t.item]),this.getStaffView().item_bubble.show(),this.initTime=l.Formula.getBBQTime(12,this.getStaffView().data.npcID),this.left_time=this.initTime,this.showSmoke()},m.prototype.showSmoke=function(t){void 0===t&&(t=!0);var e=this.getStaffView().data.staff_data.work_in_uid;(e=p.gm.mapData.getObjectData(e))&&e.loadObject(function(e){e.node.getChildByName("eff").active=t})},m.prototype.update=function(t){this.left_time&&(this.getStaffView().item_bubble.setProgress(this.left_time/this.initTime),this.left_time-=t,this.left_time=Math.max(this.left_time,0),this.left_time||this._onCookEnd())},m.prototype.onTouchBubble=function(t){t.stopPropagation(),cc.log("on touch chef"),this.left_time&&(this.left_time-=p.gm.config.data.Setting[0].bbq_touch_reduce_time,this.left_time=Math.max(this.left_time,.1))},m.prototype._onCookEnd=function(){this.showSmoke(!1),this.getStaffView().stand(),this.getStaffView().item_bubble.show(!1),h.default.getInstance().removeOrder(this.order,h.default.getInstance().cooking_orders),h.default.getInstance().addOrder(this.order,h.default.getInstance().cook_end_order),h.default.getInstance().setOrderDealing(this.order,!1),this.getStaffView().data.isFree=!0,u.default.emit(s.GameEvent.updateFoodDesk),y.StaffViewMgr.getInstance().checkTakeFood(),y.StaffViewMgr.getInstance().checkCook()},r=m,a.default=r,cc._RF.pop()},{}],StaffBBQWaiter:[function(t,e,o){"use strict";cc._RF.push(e,"8bdcfFKkcZLzb0N7IDS/52I","StaffBBQWaiter");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("CommonUtils"),l=i("Const"),p=i("Formula"),u=i("GameMgr"),d=i("Line"),h=i("MapDataHelper"),_=i("MapHelper"),f=i("PropMgr"),g=i("EventManager"),y=i("GameObject"),m=i("ObjectUtils"),v=i("Vec2Utils"),b=i("BarbecueMenuHelper"),I=i("BarbecueNpcMgr"),D=i("BarbecueOrderData"),C=i("Object_25009"),O=i("NpcAni"),w=i("StaffData"),M=i("StaffView"),P=i("StaffViewMgr");function S(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t}r(S,c=y.GameObject),S.prototype.initByID=function(t){var e,o=w.default.getInstance().staffs[t];o&&o.work_in_uid&&(e=u.gm.mapData.getObjectData(o.work_in_uid),t=o.slot_id||1,(o=this.getStaffView()).initLine(),o.setGrid(e.getBBQCashBoxPos(t)),o.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),o.show(!0))},S.prototype.initByBBQDesk=function(t){var e=w.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=u.gm.mapData.getObjectData(e.work_in_uid),e.slot_id,(e=this.getStaffView()).initLine(),e.setGrid(cc.v2(t.getWorldGrid().x,t.getWorldGrid().y+1)),e.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),e.show(!0))},S.prototype.initByGrid=function(t){var e=this.getStaffView();e.initLine(),e.setGrid(t),e.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),e.show(!0)},S.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(M.default)),this.view},S.prototype.gotoWriteOrder=function(t){var e,o=this,n=u.gm.mapData.getObjectData(t.desk_uid);n&&(this.setFree(!1),e=cc.v2(this._getDeskOrderPoint(n).x,this.getStaffView().getGrid().y),n=v.default.createLine(e,this._getDeskOrderPoint(n)),this.move(n,l.EnumRoleAniType.walk,function(){o.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),o.getStaffView().nod_bubble.showFaceByID(l.FaceType.write,.5,function(){D.default.getInstance().transOrderToChef(t),P.StaffViewMgr.getInstance().checkCook(),o.setFree()}),o.getStaffView().stand()}))},S.prototype._getDeskOrderPoint=function(t){return cc.v2(t.getLeftPos().x-1,t.getLeftPos().y+1)},S.prototype.takeFood=function(t){var e=this,o=h.default.getDataByID(l.SpecialObjectID.bbq_food_desk);o&&(this.setFree(!1),o=cc.v2(o.getLeftPos().x+Math.floor(o.getWidth()/2),o.getLeftPos().y+1),o=[cc.v2(this.getStaffView().getGrid().x,P.StaffViewMgr.getInstance().transition_point.y),P.StaffViewMgr.getInstance().transition_point,o],this.move(o,l.EnumRoleAniType.walk,function(){D.default.getInstance().removeOrder(t,D.default.getInstance().cook_end_order),t.dealing=!1,D.default.getInstance().addOrder(t,D.default.getInstance().eating_order),g.default.emit(l.GameEvent.updateFoodDesk),e.gotoPutFood(t)}))},S.prototype.gotoPutFood=function(t){var e,o=this,n=u.gm.mapData.getObjectData(t.desk_uid);n&&(this.setFree(!1),e=cc.v2(this._getDeskOrderPoint(n).x,P.StaffViewMgr.getInstance().transition_point.y),n=[P.StaffViewMgr.getInstance().transition_point].concat(v.default.createLine(e,this._getDeskOrderPoint(n))),this.move(n,l.EnumRoleAniType.food_walk,function(){o.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),o.getComponent(O.default).playAniByType(l.EnumRoleAniType.food_up,1,function(){I.default.getInstance().eatFood(t),o.getStaffView().stand(),o.setFree();var e=u.gm.mapData.getObjectData(t.desk_uid);e&&e.loadObject(function(e){e.getComponent(C.default).showFood(t.chair_index,t.item.id)})})}))},S.prototype.goToClean=function(t){var e=this,o=u.gm.mapData.getObjectData(t.desk_uid);o&&o.loadObject(function(n){e.setFree(!1);var i=cc.v2(e._getDeskOrderPoint(o).x,e.getStaffView().getGrid().y);i=v.default.createLine(i,e._getDeskOrderPoint(o)),e.move(i,l.EnumRoleAniType.walk,function(){e.getComponent(O.default).updateDirectionByType(l.RoleDirection.right_down),e.getComponent(O.default).playAniByType(l.EnumRoleAniType.clean,1,function(){if(n.getComponent(C.default).playClean(),n.getComponent(C.default).hideFood(t.chair_index),D.default.getInstance().removeOrder(t,D.default.getInstance().eating_end_order),I.default.getInstance().checkNpcCanGoIn(),o=b.default.getInstance().getMenuUpgradeConfigByFood(t.item.id)){for(var o,i=0,a=o=m.default.copy(o.evaluable);i<a.length;i++){var r=a[i];r.id==l.CommonPropID.bbq_like?r.num=p.Formula.getBBQLike(r.num):r.id==l.CommonPropID.coin?r.num=p.Formula.getBBQCoin(r.num):r.id==l.CommonPropID.bbq_star&&(r.num=p.Formula.getBBQStar(r.num))}f.default.addGainThing(o,!1),s.default.fly(n.getComponent(C.default).getFoodNode(t.chair_index),o)}e.setFree(),e.getStaffView().stand()})})})},S.prototype.setFree=function(t){(this.isFree=t=void 0===t||t)&&(P.StaffViewMgr.getInstance().checkPlaceOrder(),P.StaffViewMgr.getInstance().checkTakeFood(),P.StaffViewMgr.getInstance().goToClean())},S.prototype.move=function(t,e,o){var n=this;void 0===o&&(o=null);var i=this.getStaffView().data.speed;this.getComponent(O.default).setWalkType(e);var a=d.default.createByGrids(t),r=this.getStaffView();r&&(r.moveByLine.lastPos=s.default.worldGridToPos(r.getGrid()),r.moveByLine.moveByLine(a,function(t,e){n.getComponent(O.default).setAniWalkByPos(e,t),t=p.Formula.getBBQWaiterSpeed(n.getStaffView().data.npcID,i),n.getStaffView().moveByLine.cur_speed=t,t=n.getStaffView().moveByLine.cur_speed/n.getStaffView().getNormalSpeed(),n.getStaffView().spine.timeScale=t},function(t){r.setGrid(t),_.default.checkNodeIsInWindow(r.node)&&_.default.sortReq(),r.data?(a.onMoveToNextPoint(),a.curIndex<a.getEndingIndex()?r.moveByLine.goNextPointByData():r.moveByLine.onMoveLineEnd()):cc.error("not found data")},o),r.moveByLine.line.setCurIndex(-1),r.moveByLine.goNextPointByData())},r=S,a.default=r,cc._RF.pop()},{}],StaffCollectWorker:[function(t,e,o){"use strict";cc._RF.push(e,"71beehy1t1L/LrygCMSMZd6","StaffCollectWorker");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("NpcAni"),d=i("StaffData"),h=i("StaffView");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(_,c=p.GameObject),_.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(h.default)),this.view},_.prototype.initByID=function(t){var e=d.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),this.objectData=t,(e=this.getStaffView()).initLine(),t=t.getLeftPos(),e.setGrid(cc.v2(t.x,t.y+1)),e.getComponent(u.default).updateDirectionByType(s.RoleDirection.right_down),e.getComponent(u.default).playAniByType(s.EnumRoleAniType.standby),e.show(!0))},r=_,a.default=r,cc._RF.pop()},{}],StaffData:[function(t,e,o){"use strict";cc._RF.push(e,"4b5ddyu+D1OLp7c9nYmw+k4","StaffData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.Staff=void 0;var c,s=i("ConfigUtils"),l=i("Const"),p=i("GameMgr"),u=i("Utils"),d=i("StorageBase"),h=i("StaffHelper");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="StaffData",t.staffs={},t}r(_,c=d.StorageBase),_.prototype.loadDataEnd=function(){for(var t in this.staffs){var e,o;this.staffs[t].work_in_uid&&(e=p.gm.mapData.getObjectData(this.staffs[t].work_in_uid))&&(o=h.default.getInstance().getStaffCfg(Number(t)))&&o.object_id.includes(e.objectID)||delete this.staffs[t]}this.async_write_data()},_.prototype.addStaff=function(t){this.staffs[t]||(this.staffs[t]=new f,this.async_write_data())},_.prototype.selectStaff=function(t,e,o){for(var n in this.staffs)if((n=this.staffs[n]).work_in_uid==e&&n.slot_id==o)return void cc.error("\u8be5\u4f4d\u7f6e\u5df2\u7ecf\u6709npc",n,e,o);this.staffs[t]&&(this.staffs[t].work_in_uid=e,this.staffs[t].slot_id=o,this.async_write_data())},_.prototype.unSelectStaff=function(t){this.staffs[t]&&(this.staffs[t].work_in_uid="",this.staffs[t].slot_id=0,this.async_write_data())},_.prototype.getStaffByUID=function(t,e){for(var o in this.staffs)if(this.staffs[o].work_in_uid==t&&this.staffs[o].slot_id==e)return Number(o);return 0},_.prototype.upgrade=function(t){var e,o;this.staffs[t]&&(this.staffs[t].lv++,this.async_write_data(),e=s.NPCDataUtils.getConfigByID(t),o=h.default.getInstance().getStaffCfg(t),u.Utils.broadWorld(l.BroadTypeEnum.BroadEmployerLvUpgrade,this.staffs[t].lv,l.StaffJobChart[o.trade]+e.npc_name+"",this.staffs[t].lv+""))},_.prototype.getWorkingStaffIDs=function(){var t,e=[];for(t in this.staffs)this.staffs[t].work_in_uid&&e.push(Number(t));return e},_.prototype.getStaffLv=function(t){for(var e in this.staffs)if(this.staffs[e]&&t==Number(e))return this.staffs[e].lv||0;return 0},_.prototype.getStffIDByObjectData=function(t){var e,o=[];for(e in this.staffs)this.staffs[e].work_in_uid==t.getUID()&&o.push(Number(e));return o},r=_,a.default=r;var f=function(){this.lv=1,this.work_in_uid="",this.slot_id=0};a.Staff=f,cc._RF.pop()},{}],StaffFactoryWorker:[function(t,e,o){"use strict";cc._RF.push(e,"d4536IkAvpBIJgTOpXgdCl9","StaffFactoryWorker");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("MathUtils"),d=i("NpcAni"),h=i("StaffData"),_=i("StaffView");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(f,c=p.GameObject),f.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(_.default)),this.view},f.prototype.initByID=function(t){var e=h.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),this.objectData=t,(e=this.getStaffView()).initLine(),t=t.getLeftPos(),e.setGrid(cc.v2(t.x,t.y+1)),e.getComponent(d.default).updateDirectionByType(s.RoleDirection.left_down),e.show(!0),this.playRandomAni())},f.prototype.playRandomAni=function(){var t=this,e=[s.EnumRoleAniType.broom,s.EnumRoleAniType.dialogue];this.getStaffView().getComponent(d.default).playAniByType(e[u.default.randomNum(0,e.length-1)],2,function(){t.playRandomAni()})},r=f,a.default=r,cc._RF.pop()},{}],StaffFoodItem:[function(t,e,o){"use strict";cc._RF.push(e,"63455OE3wxCcqqseEac37LO","StaffFoodItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("GameMgr"),d=i("PropMgr"),h=i("IconUtils"),_=i("CookMgr");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_need=null,t.lbl_have=null,t.spr_food=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=cc.Component),f.prototype.onEnable=function(){this.spr_food.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},f.prototype.setData=function(t){this.data=t,this.updateUI()},f.prototype.updateUI=function(){this.spr_food.node.active=!1,this.lbl_have.string="",this.lbl_need.string="",this.data&&(this.spr_food.node.active=!0,h.IconUtils.setPropSprite(this.data.id,this.spr_food),this.lbl_need.string="/"+this.data.num,this.lbl_have.string=d.default.getPropCount(this.data.id)+"",d.default.getPropCount(this.data.id)<this.data.num?this.lbl_have.node.color=(new cc.Color).fromHEX("#FA8630"):this.lbl_have.node.color=(new cc.Color).fromHEX("#5BFF35"))},f.prototype.onTouch=function(){var t=this;this.data&&u.gm.ui.showModule(u.gm.const.CookUI,function(e){u.gm.ui.closeModule(u.gm.const.StaffFoodUI);var o=_.MenuData.create(p.ConfigUtils.FoodMenuUtils.getMenuIDByFoodID(t.data.id));e.setData(o)})},s([a(cc.Label)],f.prototype,"lbl_need",void 0),s([a(cc.Label)],f.prototype,"lbl_have",void 0),s([a(cc.Sprite)],f.prototype,"spr_food",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],StaffFoodUI:[function(t,e,o){"use strict";cc._RF.push(e,"ffcb1r9iU1HFJoV7SbMJu0+","StaffFoodUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("GameMgr"),d=i("PropMgr"),h=i("GameModule"),_=i("MathUtils"),f=i("StaffData"),g=i("StaffFoodItem"),y=i("StaffViewMgr");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_foods=null,t.items=[],t.nodIndex=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=h.default),m.prototype.onEnable=function(){this.updateUI()},m.prototype.updateUI=function(){if(0==this.items.length){var t,e=Object.values(f.default.getInstance().staffs).length,o=[];for(t in u.gm.localData.foodMenu)2==u.gm.localData.foodMenu[t].state&&o.push(Number(t));for(var n=Math.min(e,8,o.length),i=_.default.randomArr(o,n),a=[],r=0;r<e;r++){var c=r%i.length,s=i[c],l=p.ConfigUtils.FoodMenuUtils.getConfigByID(s);l?a.push(l.cook_food):cc.error("not config",s,c)}this.items=d.default.mergeItems(a),this.nodIndex=_.default.randomArr([0,1,2,3,4,5,6,7],this.items.length)}for(r=0;r<this.nod_foods.children.length;r++){var h=this.nodIndex.indexOf(r);0<=h?this.nod_foods.children[r].getComponent(g.default).setData(this.items[h]):this.nod_foods.children[r].getComponent(g.default).setData(null)}},m.prototype.onBtnEatFood=function(){d.default.tryConsume(this.items,!0)&&(y.StaffViewMgr.getInstance().eatFood(),this.items=[],this.closeMe())},s([a(cc.Node)],m.prototype,"nod_foods",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],StaffHelper:[function(t,e,o){"use strict";cc._RF.push(e,"d5e80UNwRhIl7hSrdvJaqIX","StaffHelper");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.StaffDataModel=void 0;var c,s=i("GameMgr"),l=i("LvMgr"),p=i("Singleton"),u=i("DecorationMgr"),d=i("StaffData");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.cur_touch_uid="",t.cur_touch_slot_id=0,t}r(h,c=p.default),h.prototype.getDisplayStaff=function(t){for(var e=[],o=0,n=s.gm.config.data.StaffData;o<n.length;o++){var i=n[o];i.object_id.includes(t)&&e.push(i)}return e},h.prototype.getStaffUpgradeConfig=function(t,e){void 0===e&&(e=1);for(var o=0,n=s.gm.config.data.StaffUpgradeData;o<n.length;o++){var i=n[o];if(t==i.id&&e==i.lv)return i}return cc.warn("not found in \u5458\u5de5\u5347\u7ea7\u8868",t,e),null},h.prototype.getStaffMaxCount=function(t){if(t=s.gm.mapData.getObjectData(t))return u.default.getConfig(t.objectID,t.lv).staff_count||0},h.prototype.getStaffCfgByJob=function(t){for(var e=[],o=0,n=s.gm.config.data.StaffData;o<n.length;o++){var i=n[o];i.trade==t&&e.push(i)}return e},h.prototype.getStaffCfg=function(t){for(var e=0,o=s.gm.config.data.StaffData;e<o.length;e++){var n=o[e];if(n.npc_id==t)return n}},h.prototype.getStaffDataModel=function(t){for(var e=0,o=s.gm.config.data.StaffData;e<o.length;e++){var n=o[e];if(n.npc_id==t){var i=new _;return i.config=n,i}}},h.prototype.getOjectIDByStaff=function(t){for(var e in d.default.getInstance().staffs)if(t==Number(e)&&(e=d.default.getInstance().staffs[e]).work_in_uid)return s.gm.mapData.getObjectData(e.work_in_uid).objectID},h.prototype.getStaffIDByObjectID=function(t){for(var e=[],o=0,n=s.gm.config.data.StaffData;o<n.length;o++){var i=n[o];i.object_id.includes(t)&&e.push(i.npc_id)}return e},h.prototype.getStaffCanWorkIn=function(t){for(var e=0,o=s.gm.config.data.StaffData;e<o.length;e++){var n=o[e];if(n.npc_id==t)return n.object_id}return[]},h.prototype.getOwnStaffs=function(t){var e,o=[];for(e in d.default.getInstance().staffs){var n=this.getStaffCfg(Number(e));n&&Number(n.trade)==t&&o.push(n)}return o},r=h,a.default=r;var _=(f.prototype.getState=function(){return d.default.getInstance().staffs[this.config.npc_id]?1:this.config.unlock_lv>l.default.getInstance().getLv()?-1:-2},f);function f(){}a.StaffDataModel=_,cc._RF.pop()},{}],StaffPlantWorker:[function(t,e,o){"use strict";cc._RF.push(e,"6a69akmJXRE6aEGlRe3xFte","StaffPlantWorker");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("MathUtils"),d=i("NpcAni"),h=i("StaffData"),_=i("StaffView");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(f,c=p.GameObject),f.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(_.default)),this.view},f.prototype.initByID=function(t){var e=h.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),this.objectData=t,(e=this.getStaffView()).initLine(),t=t.getLeftPos(),e.setGrid(cc.v2(t.x-1,t.y)),e.getComponent(d.default).updateDirectionByType(s.RoleDirection.left_down),e.show(!0),this.playRandomAni())},f.prototype.playRandomAni=function(){var t=this,e=[s.EnumRoleAniType.sow,s.EnumRoleAniType.sow2,s.EnumRoleAniType.dialogue];this.getStaffView().getComponent(d.default).playAniByType(e[u.default.randomNum(0,e.length-1)],2,function(){t.playRandomAni()})},r=f,a.default=r,cc._RF.pop()},{}],StaffShelfCashier:[function(t,e,o){"use strict";cc._RF.push(e,"cd5fdtRkx5BUYxzH67ftUts","StaffShelfCashier");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("NpcAni"),d=i("StaffData"),h=i("StaffView");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(_,c=p.GameObject),_.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(h.default)),this.view},_.prototype.initByID=function(t){var e=d.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),(e=this.getStaffView()).initLine(),t=t.getLeftCenterPos(),e.setGrid(cc.v2(t.x-1,t.y)),e.getComponent(u.default).updateDirectionByType(s.RoleDirection.right_down),e.show(!0))},r=_,a.default=r,cc._RF.pop()},{}],StaffShelfWaiter:[function(t,e,o){"use strict";cc._RF.push(e,"aa6c2OdkM5MqbPioxRYZ/Ha","StaffShelfWaiter");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("MathUtils"),d=i("BusinessmanMgr"),h=i("NpcAni"),_=i("ShelfMgr"),f=i("ShelfOrderData"),g=i("StaffData"),y=i("StaffView");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(m,c=p.GameObject),m.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(y.default)),this.view},m.prototype.initByID=function(t){var e,o=g.default.getInstance().staffs[t];o&&o.work_in_uid&&(e=l.gm.mapData.getObjectData(o.work_in_uid),this.objectData=e,(t=this.getStaffView()).initLine(),10419<=e.objectID?(o=e.getLeftPos(),t.setGrid(cc.v2(o.x,o.y+1)),t.getComponent(h.default).updateDirectionByType(s.RoleDirection.right_down)):(e.objectID%2==1?t.setGrid(e.getWorldGrid()):t.setGrid(e.getLeftPos()),t.getComponent(h.default).updateDirectionByType(s.RoleDirection.right_up)),t.getComponent(h.default).playAniByType(s.EnumRoleAniType.standby),t.show(!0))},m.prototype.checkAutoGiveGoods=function(t){var e;this.objectData&&(this.checkDeskTime+=t,this.checkDeskTime>=this.getCheckDeskCD())&&(this.checkDeskTime=0,e=[],(t=f.default.getInstance().shelf_orders[this.objectData.objectID])&&0<t.length&&e.push.apply(e,t),0<e.length&&((t=e[u.default.randomNum(0,e.length-1)])&&t.items?(e=this.getViewByOrder(t))&&e.data.giveGoods():cc.warn("not found items",t)))},m.prototype.getCheckDeskCD=function(){return _.default.getInstance().getShelfUnlockConifg(this.objectData.objectID).auto_function_time||5},m.prototype.getViewByOrder=function(t){return d.BusinessmanMgr.getInstance().businessmanView[t.npc_id]},r=m,a.default=r,cc._RF.pop()},{}],StaffShelfWholesale:[function(t,e,o){"use strict";cc._RF.push(e,"fcf10RU0D9Nhaf19MHkr5H7","StaffShelfWholesale");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("GameObject"),u=i("NpcAni"),d=i("StaffData"),h=i("StaffView");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.view=null,t.isFree=!0,t.checkDeskTime=0,t.checkCashierTime=0,t}r(_,c=p.GameObject),_.prototype.getStaffView=function(){return this.view||(this.view=this.getComponent(h.default)),this.view},_.prototype.initByID=function(t){var e=d.default.getInstance().staffs[t];e&&e.work_in_uid&&(t=l.gm.mapData.getObjectData(e.work_in_uid),this.objectData=t,(e=this.getStaffView()).initLine(),t=t.getLeftPos(),e.setGrid(cc.v2(t.x,t.y+1)),e.getComponent(u.default).updateDirectionByType(s.RoleDirection.left_down),e.getComponent(u.default).playAniByType(s.EnumRoleAniType.standby),e.show(!0))},r=_,a.default=r,cc._RF.pop()},{}],StaffUIListItem:[function(t,e,o){"use strict";cc._RF.push(e,"f7556Gjs4BDApmgfZppZjsC","StaffUIListItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("LvMgr"),_=i("IconUtils"),f=i("ListItem"),g=i("NodeUtils"),y=i("NpcMgr"),m=i("StaffData");function v(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.lbl_name=null,t.spr_icon=null,t.nod_no_get=null,t.nod_no_unlock=null,t.nod_check=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(v,l=f.default),v.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},v.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},v.prototype.setData=function(t){this.data=t,this.nod_check.active=!1,this.updateUI()},v.prototype.updateUI=function(){_.IconUtils.setSpriteFrame(u.BundleName.COMMON,"texture/npc_head_square/"+y.default.getInstance().getSquareHeadByNpcID(this.data.npc_id),this.spr_icon);var t=p.NPCDataUtils.getConfigByID(this.data.npc_id);this.lbl_name.string=t.npc_name,this.lbl_lv.node.active=!1,this.nod_no_get.active=!1,this.nod_no_unlock.active=!1,g.default.setGray(this.spr_icon.node,!1),m.default.getInstance().staffs[this.data.npc_id]?(this.lbl_lv.node.active=!0,this.lbl_lv.string="Lv."+m.default.getInstance().staffs[this.data.npc_id].lv):this.data.unlock_lv>h.default.getInstance().getLv()?(this.nod_no_unlock.active=!0,g.default.setGray(this.spr_icon.node,!0)):this.nod_no_get.active=!0,(t=d.gm.ui.get_module(d.gm.const.StaffUI))&&(this.nod_check.active=Boolean(t.selectNpcID==this.data.npc_id))},v.prototype.onTouchItem=function(){var t;!m.default.getInstance().staffs[this.data.npc_id]&&this.data.unlock_lv>h.default.getInstance().getLv()?d.gm.ui.showNotice(this.data.unlock_lv+"\u7ea7\u89e3\u9501"):(t=d.gm.ui.get_module(d.gm.const.StaffUI))&&t.setData(this.data.npc_id)},s([a(cc.Label)],v.prototype,"lbl_lv",void 0),s([a(cc.Label)],v.prototype,"lbl_name",void 0),s([a(cc.Sprite)],v.prototype,"spr_icon",void 0),s([a(cc.Node)],v.prototype,"nod_no_get",void 0),s([a(cc.Node)],v.prototype,"nod_no_unlock",void 0),s([a(cc.Node)],v.prototype,"nod_check",void 0),i=s([i],v),r.default=i,cc._RF.pop()},{}],StaffUI:[function(t,e,o){"use strict";cc._RF.push(e,"1151bqnrAdI1KtTdVbOlTKs","StaffUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("CommonItem"),d=i("ConfigUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("List"),y=i("EventManager"),m=i("GameModule"),v=i("NetUtils"),b=i("AttrHelper"),I=i("NodAttrItem"),D=i("Finger"),C=i("GuideMgr"),O=i("NpcMgr"),w=i("TaskRecordData"),M=i("StaffData"),P=i("StaffHelper"),S=i("StaffUIListItem");function T(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine_staff=null,t.lbl_name=null,t.lbl_job=null,t.lbl_lv=null,t.list_attr=null,t.list_staff=null,t.toggle=null,t.nod_consume_content=null,t.lbl_btn_tip=null,t.nod_upgrade=null,t.finger_recruit=null,t.staffs=[],t.curIndex=0,t.job_type=h.StaffJob.none,t.selectNpcID=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(T,l=m.default),T.prototype.onDisable=function(){C.default.getInstance().resetTouchCondition()},T.prototype.setData=function(t){var e=this;this.selectNpcID=t=void 0===t?0:t,this.updateUI(),C.default.getInstance().touchCondition.mission==h.ConditionType.recruit_staff?(this.scheduleOnce(function(){_.gm.ui.showModule(_.gm.const.FingerGuide,function(t){t.showFingerByNode(e.nod_upgrade)})},.6),this.selectNpcID=C.default.getInstance().touchCondition.id,this.updateUI()):C.default.getInstance().touchCondition.mission==h.ConditionType.staff_upgrade&&(this.selectNpcID=Number(C.default.getInstance().touchCondition.id),this.updateUI(),this.scheduleOnce(function(){_.gm.ui.showModule(_.gm.const.FingerGuide,function(t){t.showFingerByNode(e.nod_upgrade)})},.6)),C.default.getInstance().resetTouchCondition()},T.prototype.updateUI=function(){if(this.selectNpcID){var t=P.default.getInstance().getStaffCfg(this.selectNpcID);if(t&&t.trade)for(var e=0;e<j.length;e++)if(t.trade==Number(j[e])){this.curIndex=e;break}}else this.job_type=j[this.curIndex],this.staffs=P.default.getInstance().getStaffCfgByJob(this.job_type),this.selectNpcID=this.staffs[0].npc_id;this.toggle.toggleItems[this.curIndex].check(),this.job_type=j[this.curIndex],this.staffs=P.default.getInstance().getStaffCfgByJob(this.job_type),this.list_staff.numItems=this.staffs.length,this.updateTop(),this.updateConsumeUI()},T.prototype.updateTop=function(){var t=this;O.default.getInstance().loadSpineByNpcID(this.selectNpcID,function(e){t.spine_staff.skeletonData=e,t.spine_staff.setSkin("default"),t.spine_staff.setAnimation(0,"standby",!0)}),this.lbl_name.string=d.NPCDataUtils.getConfigByID(this.selectNpcID).npc_name,this.lbl_job.string=h.StaffJobChart[this.job_type],M.default.getInstance().staffs[this.selectNpcID]?(this.lbl_lv.string="Lv."+M.default.getInstance().staffs[this.selectNpcID].lv,this.cur_lv_config=P.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,M.default.getInstance().staffs[this.selectNpcID].lv),this.next_lv_config=P.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,M.default.getInstance().staffs[this.selectNpcID].lv+1),this.list_attr.numItems=this.cur_lv_config.attr.length,this.lbl_btn_tip.string="\u5347\u7ea7"):(this.lbl_lv.string="Lv.1",this.cur_lv_config=P.default.getInstance().getStaffUpgradeConfig(this.selectNpcID,1),this.next_lv_config=null,this.list_attr.numItems=this.cur_lv_config.attr.length,this.lbl_btn_tip.string="\u62db\u52df")},T.prototype.onBtnUpgrade=function(){var t;M.default.getInstance().staffs[this.selectNpcID]?this.next_lv_config&&f.default.tryConsumeThing(this.next_lv_config.need)&&(M.default.getInstance().upgrade(this.selectNpcID),y.default.emit(h.GameEvent.updateBase)):(t=P.default.getInstance().getStaffCfg(this.selectNpcID),f.default.tryConsumeThing(t.unlock_consume)&&(M.default.getInstance().addStaff(this.selectNpcID),w.default.getInstance().addRecruitStaff(this.selectNpcID),y.default.emit(h.GameEvent.on_recruit_staff),v.ReportData.instance.report_point(100005,41000024))),this.updateUI()},T.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.selectNpcID=0,this.updateUI()},T.prototype.onRenderStaffList=function(t,e){t.getComponent(S.default).setData(this.staffs[e])},T.prototype.onRenderAttr=function(t,e){var o=b.default.getInstance().getAttrStr(this.cur_lv_config.attr[e]),n="";this.next_lv_config&&(n=b.default.getInstance().getAttrValueStr(this.next_lv_config.attr[e])),t.getComponent(I.default).setData(o,n)},T.prototype.onBtnClose=function(){_.gm.mainUI.visiable(!0),p.default.click(),this.closeMe()},T.prototype.updateConsumeUI=function(){for(var t=0,e=this.nod_consume_content.children;t<e.length;t++)e[t].active=!1;if(this.nod_upgrade.active=!1,M.default.getInstance().staffs[this.selectNpcID]){if(this.next_lv_config){for(i=f.default.propItemToGainThing(this.next_lv_config.need),a=0;a<i.length;a++)(o=this.nod_consume_content.children[a])||(o=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(o,a)),o.getComponent(u.default).setData(i[a]),o.active=!0;this.nod_upgrade.active=!0}}else{var o,n=P.default.getInstance().getStaffCfg(this.selectNpcID);if(n.unlock_consume)for(var i=f.default.propItemToGainThing(n.unlock_consume),a=0;a<i.length;a++)(o=this.nod_consume_content.children[a])||(o=cc.instantiate(this.nod_consume_content.children[0]),this.nod_consume_content.addChild(o,a)),o.getComponent(u.default).setData(i[a]),o.active=!0;this.nod_upgrade.active=!0}},T.prototype.onEnable=function(){_.gm.mainUI.visiable(!1)},s([a(sp.Skeleton)],T.prototype,"spine_staff",void 0),s([a(cc.Label)],T.prototype,"lbl_name",void 0),s([a(cc.Label)],T.prototype,"lbl_job",void 0),s([a(cc.Label)],T.prototype,"lbl_lv",void 0),s([a(g.default)],T.prototype,"list_attr",void 0),s([a(g.default)],T.prototype,"list_staff",void 0),s([a(cc.ToggleContainer)],T.prototype,"toggle",void 0),s([a(cc.Node)],T.prototype,"nod_consume_content",void 0),s([a(cc.Label)],T.prototype,"lbl_btn_tip",void 0),s([a(cc.Node)],T.prototype,"nod_upgrade",void 0),s([a(D.default)],T.prototype,"finger_recruit",void 0),i=s([i],T),r.default=i;var j=[h.StaffJob.shelf,h.StaffJob.bbq,h.StaffJob.collect,h.StaffJob.feed,h.StaffJob.farm];cc._RF.pop()},{}],StaffViewData:[function(t,e,o){"use strict";cc._RF.push(e,"6be8elkN79BdK/QKS6iT23q","StaffViewData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("NpcData"),l=i("StaffData");function p(t){var e=c.call(this,t)||this;return e.speed=1,e.isFree=!0,e.staff_data=null,e.staff_data=l.default.getInstance().staffs[t],e}r(p,c=s.default),r=p,a.default=r,cc._RF.pop()},{}],StaffViewMgr:[function(t,e,o){"use strict";cc._RF.push(e,"cac13LnM8VG0rhsCCt4eU9u","StaffViewMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.StaffViewMgr=void 0;var c,s=i("Const"),l=i("GameMgr"),p=i("MapHelper"),u=i("AssetMgr"),d=i("Singleton"),h=i("BarbecueOrderData"),_=i("NpcMgr"),f=i("StaffBBQWaiter"),g=i("StaffView"),y=i("StaffViewData"),m=i("StaffBBQChef"),v=i("StaffShelfCashier"),b=i("StaffShelfWaiter"),I=i("CommonUtils"),D=i("StaffShelfWholesale"),C=i("StaffPlantWorker"),O=i("StaffFactoryWorker"),w=i("StaffAnimalWorker"),M=i("StaffData"),P=i("NpcAni"),S=i("Formula"),T=i("StaffCollectWorker"),j=i("CommonData"),k=i("TimeUtils"),A=i("EventManager");function R(){var t=null!==c&&c.apply(this,arguments)||this;return t.staffViewData={},t.staffView={},t.transition_point=cc.v2(133,140),t.prepareToStop=!1,t.isStop=!1,t}r(R,c=d.default),R.prototype.getVisibleView=function(){var t,e=[];for(t in this.staffView){var o=this.staffView[t];o&&o.node&&p.default.checkNodeIsInWindow(o.node)&&e.push(o)}return e},R.prototype.create=function(t,e,o){var n=this;void 0===o&&(o=null);var i=t;this.staffView[i]||(this.staffViewData[i]=new y.default(i),this.staffViewData[i].speed=this.staffViewData[i].config.customer_move_speed,this._createNodeByID(i,this.staffViewData[i],function(t){n.staffView[i]=t,n.staffView[i].slot_id=e,n.initStaffPos(t,i),n.isStop&&n.fly(),o&&o(t)}))},R.prototype.initStaffPos=function(t,e){void 0===e&&(e=0);var o=M.default.getInstance().staffs[e];o&&o.work_in_uid&&(o=l.gm.mapData.getObjectData(o.work_in_uid).objectID,[s.SpecialObjectID.bbq_cash_box].includes(o)?(t.getComponent(f.default)||t.addComponent(f.default),t.getComponent(f.default).initByID(e)):[s.SpecialObjectID.bbq_ice_box_1].includes(o)?(t.getComponent(f.default)||t.addComponent(f.default),t.getComponent(f.default).initByGrid(cc.v2(134,141))):[s.SpecialObjectID.bbq_ice_box_2].includes(o)?(t.getComponent(f.default)||t.addComponent(f.default),t.getComponent(f.default).initByGrid(cc.v2(133,140))):[s.SpecialObjectID.bbq_ice_box_3].includes(o)?(t.getComponent(f.default)||t.addComponent(f.default),t.getComponent(f.default).initByGrid(cc.v2(134,140))):[s.SpecialObjectID.bbq_food_desk].includes(o)?(t.getComponent(f.default)||t.addComponent(f.default),t.getComponent(f.default).initByBBQDesk(e)):I.default.checkIsBBQBoard(o)?(t.getComponent(m.default)||t.addComponent(m.default),t.getComponent(m.default).initByID(e)):[s.SpecialObjectID.shelf_cash_box].includes(o)?(t.getComponent(v.default)||t.addComponent(v.default),t.getComponent(v.default).initByID(e)):I.default.checkIsStallDesk(o)?(t.getComponent(b.default)||t.addComponent(b.default),t.getComponent(b.default).initByID(e)):[s.SpecialObjectID.wholesale].includes(o)?(t.getComponent(D.default)||t.addComponent(D.default),t.getComponent(D.default).initByID(e)):[10003,10004,10005,10006].includes(o)?(t.getComponent(C.default)||t.addComponent(C.default),t.getComponent(C.default).initByID(e)):[10041,10042,10043,10044,10045].includes(o)?(t.getComponent(O.default)||t.addComponent(O.default),t.getComponent(O.default).initByID(e)):[10025,10026,10027,10028].includes(o)?(t.addComponent(w.default)||t.addComponent(w.default),t.getComponent(w.default).initByID(e)):[39994,39995,39996,39997,39998,39999].includes(o)&&(t.addComponent(T.default)||t.addComponent(T.default),t.getComponent(T.default).initByID(e)))},R.prototype._createNodeByID=function(t,e,o){var n=this;u.default.getInstance().getResAsyn(s.BundleName.MAIN_UI,"prefabs/npc/npc_staff",cc.Prefab,function(i){var a=(i=cc.instantiate(i)).getComponent(g.default);a.data=e,i.parent=l.gm.mainUI.map_object_layer,i.active=!0,a.show(!1),n.staffView[t]=a,_.default.getInstance().loadSpineByNpcID(t,function(t){a.spine.skeletonData=t,a.spine.setSkin("default"),a.spine.setAnimation(0,"standby",!0),o&&o(a)})})},R.prototype.getShelfCashier=function(){for(var t in this.staffView)if(t=this.staffView[t].getComponent(v.default))return t},R.prototype.getShelfWaiter=function(){var t,e=[];for(t in this.staffView){var o=this.staffView[t].getComponent(b.default);o&&e.push(o)}return e},R.prototype.getFreeWaiter=function(){for(var t in this.staffView)if((t=this.staffView[t].getComponent(f.default))&&t.isFree)return t},R.prototype.getFreeChef=function(){for(var t in this.staffView){var e=this.staffView[t];if((t=e.getComponent(m.default))&&e.data.isFree)return t}},R.prototype.checkPlaceOrder=function(){var t,e;this.prepareToStop||!(t=this.getFreeWaiter())||(e=h.default.getInstance().waiting_orders.shift())&&(h.default.getInstance().addOrder(e,h.default.getInstance().waiter_orders),t.gotoWriteOrder(e))},R.prototype.checkTakeFood=function(){var t,e;this.prepareToStop||!(t=this.getFreeWaiter())||(e=h.default.getInstance().getDeskOrder())&&t.takeFood(e)},R.prototype.goToClean=function(){var t,e;this.prepareToStop||!(t=this.getFreeWaiter())||(e=h.default.getInstance().getEatingEndOrder())&&t.goToClean(e)},R.prototype.checkCook=function(){var t,e;this.prepareToStop||(t=this.getFreeChef())&&0<h.default.getInstance().chef_orders.length&&((e=h.default.getInstance().takeOutCanCookOrder())?(h.default.getInstance().addOrder(e,h.default.getInstance().cooking_orders),t.cookBegin(e),this.checkCook()):(t.getStaffView().data.isFree=!1,t.getStaffView().nod_bubble.setText("\u6750\u6599\u4e0d\u8db3\uff0c\u8bf7\u5230\u51b0\u7bb1\u8865\u8d27",!0,2,function(){t.getStaffView().data.isFree=!0})))},R.prototype.isAllStaffFree=function(){for(var t in this.staffViewData)if(!this.staffViewData[t].isFree)return!1;return!0},R.prototype.tryToStopAllStaff=function(){this.prepareToStop=!0,this.isAllStaffFree()&&(this.isStop=!0,this.fly(),A.default.emit(s.GameEvent.staff_state_change))},R.prototype.fly=function(){var t,e=0;for(t in this.staffView){var o=this.staffView[t];e++,o.setGrid(cc.v2(146,129-e)),o.getComponent(P.default).setStandByAni()}},R.prototype.eatFood=function(){for(var t in this.isStop=!1,this.prepareToStop=!1,this.staffView)this.initStaffPos(this.staffView[t],Number(t));S.Formula.getStaffPlant(),S.Formula.getStaffAnimal(),S.Formula.getStaffCollect(),R.getInstance().checkCook(),R.getInstance().checkPlaceOrder(),j.default.getInstance().lastStaffFoodTime=k.default.getTime(),A.default.emit(s.GameEvent.staff_state_change),l.gm.ui.showNotice("\u5458\u5de5\u5403\u9971\u559d\u8db3\uff0c\u56de\u53bb\u5de5\u4f5c\u4e86")},r=R,a.StaffViewMgr=r,cc._RF.pop()},{}],StaffView:[function(t,e,o){"use strict";cc._RF.push(e,"f318a4RVgFEDqpiX3e6TIBX","StaffView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("IMapPosCtrl"),_=i("ItemBubble"),f=i("MapDataHelper"),g=i("MapHelper"),y=i("MoveByLine"),m=i("NodBubble"),v=i("Vec2Utils"),b=i("Finger"),I=i("Shopboard"),D=i("NpcAni");function C(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.spine_face=null,t.nod_touch=null,t.nod_foot=null,t.nod_bubble=null,t.spr_icon=null,t.item_bubble=null,t.nod_finger=null,t.moveByLine=null,t.data=null,t.stepLen=60,t.stepTime=.6,t.curPath=[],t.posSys=new u.MapPosSys,t.slot_id=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(C,l=h.default),C.prototype.initLine=function(){var t=this;this.moveByLine.line=this.data.line,this.moveByLine.cur_speed=this.data.speed,this.moveByLine.beforeMove=function(e,o){e.x>o.x?t.spine.node.scaleX=-1*Math.abs(t.spine.node.scaleX):t.spine.node.scaleX=Math.abs(t.spine.node.scaleX),e.y>o.y?t._setRoleAni("walk_back",!0):t._setRoleAni("walk",!0),o=t.moveByLine.cur_speed/t.getNormalSpeed(),t.spine.timeScale=o},this.moveByLine.onMoveToPoint=function(e){t.setGrid(e),g.default.checkNodeIsInWindow(t.node)&&g.default.sortReq(),t.data||cc.error("not found data")}},C.prototype.stand=function(){this.spine.timeScale=1,this.getComponent(D.default).playAniByType(u.EnumRoleAniType.standby)},C.prototype.show=function(t){this.node.opacity=(t=void 0===t||t)?255:0,t&&g.default.sortReq()},C.prototype.updateIndex=function(t){this.node.zIndex=t},C.prototype.getNormalSpeed=function(){return this.stepLen/this.stepTime},C.prototype.setGrid=function(t){this.curPath=[],this.posSys.worldGrid=t,this.moveByLine.lastPos=p.default.worldGridToPos(t),this.updatePos(),this.node.stopAllActions()},C.prototype.updatePos=function(){var t,e,o=this;this.posSys.worldGrid&&(t=f.default.getDataByID(u.SpecialObjectID.stall),e=f.default.getDataByID(u.SpecialObjectID.barbecue),t&&v.default.includes(t.getSeizePos(),[this.posSys.worldGrid])?t.loadObject(function(e){o.node.parent=e.getComponent(I.default).nod_inside,o.posSys.parentUID=t.getUID(),o._updateByParent()}):e&&v.default.includes(e.getSeizePos(),[this.posSys.worldGrid])?e.loadObject(function(t){o.node.parent=t.nod_inside,o.posSys.parentUID=e.getUID(),o._updateByParent()}):(this.node.parent=d.gm.mainUI.map_object_layer,this.posSys.parentUID="",this._updateByParent()))},C.prototype._updateByParent=function(){var t=p.default.worldGridToPos(this.getGrid());t=this.node.parent.convertToNodeSpaceAR(d.gm.mainUI.map_object_layer.convertToWorldSpaceAR(t)),this.node.x=t.x,this.node.y=t.y},C.prototype.getGrid=function(){return this.posSys.worldGrid},C.prototype.getPosSys=function(){return this.posSys},C.prototype.getGridWidth=function(){return 1},C.prototype.getGridHeight=function(){return 1},C.prototype.showFinger=function(){this.nod_finger&&this.nod_finger.showFinger(!0,!0)},C.prototype._setRoleAni=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),t==this.spine.animation&&!o||this.spine.setAnimation(0,t,e)},s([a(sp.Skeleton)],C.prototype,"spine",void 0),s([a(sp.Skeleton)],C.prototype,"spine_face",void 0),s([a(cc.Node)],C.prototype,"nod_touch",void 0),s([a(cc.Node)],C.prototype,"nod_foot",void 0),s([a(m.default)],C.prototype,"nod_bubble",void 0),s([a(cc.Sprite)],C.prototype,"spr_icon",void 0),s([a(_.default)],C.prototype,"item_bubble",void 0),s([a(b.default)],C.prototype,"nod_finger",void 0),s([a(y.default)],C.prototype,"moveByLine",void 0),i=s([i],C),r.default=i,cc._RF.pop()},{}],StorageBase:[function(t,e,o){"use strict";cc._RF.push(e,"37df0u7hTRGs4iIbK+3WGO6","StorageBase");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0}),a.StorageBase=void 0;var c,s=i("Singleton"),l=i("StorageManager");function p(){var t=null!==c&&c.apply(this,arguments)||this;return t.PREFIX="farm_operation_",t.STORAGE_KEY="STORAGE_KEY",t.is_init=!1,t}r(p,c=s.default),p.prototype.async_read_data=function(t){var e=this;l.StorageManager.instance.async_read_data(this.PREFIX+this.STORAGE_KEY,function(o){Object.assign(e,o),t&&t(o)})},p.prototype.async_write_data=function(t){l.StorageManager.instance.async_write_data(this.PREFIX+this.STORAGE_KEY,this,t)},p.prototype.async_delete_data=function(t){l.StorageManager.instance.async_delete_data(this.PREFIX+this.STORAGE_KEY,t)},r=p,a.StorageBase=r,cc._RF.pop()},{}],StorageManager:[function(t,e,o){(function(n){"use strict";cc._RF.push(e,"d14a3OfO7VAC7pBOhTs1mYP","StorageManager");var i=t,a=o;(function(t){function e(){this.cost_time_array=[]}Object.defineProperty(a,"__esModule",{value:!0}),a.StorageManager=void 0;var o=i("encryptjs"),n=(Object.defineProperty(r,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),r.prototype.async_read_data=function(t,n){var i;this._debug&&((a=this._debug_info_map[i="async_read_data "+t])||(this._debug_info_map[i]=a=new e),r=Date.now());var a,r,c="{}";try{this._debug||(t=o.base64Encode(t)),(c=cc.sys.localStorage.getItem(t))&&!this._debug&&(c=o.decrypt(c,this._encrypt_key,256),cc.log("\u89e3\u5bc6\u540e\uff1a"+c))}catch(t){cc.error(t)}t={};try{c&&(t=JSON.parse(c))}catch(t){cc.error(t)}this._debug&&(a=this._debug_info_map[i],r=Date.now()-r,a.cost_time_array.push(r)),n&&n(t)},r.prototype.async_write_data=function(t,n,i){var a;this._debug&&(a="async_write_data "+t,(r=this._debug_info_map[t])||(this._debug_info_map[a]=r=new e),c=Date.now());var r,c,s="{}";try{(s=JSON.stringify(n))&&!this._debug&&(s=o.encrypt(s,this._encrypt_key,256),cc.log("\u52a0\u5bc6\u540e\uff1a"+s))}catch(t){cc.error(t)}if(s.length>this._settings.single_storage_size&&this.string_byte_length(s)>this._settings.single_storage_size)cc.error("\u5355\u4e2a key \u6570\u636e\u957f\u5ea6\u8d85\u8fc7\u5141\u8bb8\u5b58\u50a8\u7684\u6700\u5927\u957f\u5ea6 "+this._settings.single_storage_size+" bytes");else{try{this._debug||(t=o.base64Encode(t)),cc.sys.localStorage.setItem(t,s)}catch(t){cc.error(t)}this._debug&&(r=this._debug_info_map[a],c=Date.now()-c,r.cost_time_array.push(c)),i&&i()}},r.prototype.async_delete_data=function(t,o){var n,i,a;this._debug&&(n="async_delete_data "+t,(i=this._debug_info_map[t])||(this._debug_info_map[n]=i=new e),a=Date.now());try{cc.sys.localStorage.removeItem(t)}catch(t){cc.error(t)}this._debug&&(i=this._debug_info_map[n],a=Date.now()-a,i.cost_time_array.push(a)),o&&o()},r.prototype.async_read_remote_data=function(){cc.error("\u8be5\u65b9\u6cd5\u8fd8\u672a\u5b9e\u73b0")},r.prototype.async_write_remote_data=function(){cc.error("\u8be5\u65b9\u6cd5\u8fd8\u672a\u5b9e\u73b0")},r.prototype.async_delete_remote_data=function(){cc.error("\u8be5\u65b9\u6cd5\u8fd8\u672a\u5b9e\u73b0")},r.prototype.print_debug_info=function(){if(this._debug)for(var t in this._debug_info_map){var e=this._debug_info_map[t];cc.log(t+" execute times:"+e.cost_time_array.length),cc.log(JSON.stringify(e))}},r.prototype.string_byte_length=function(t){var e=0,o=t.length;if(o){for(var n=0;n<o;n++)255<t.charCodeAt(n)?e+=2:e++;return e}return 0},r._instance=null,r);function r(){this._debug=!0,this._debug_info_map={},this._settings={total_storage_size:10485760,single_storage_size:1048576},this._encrypt_key="12df7s0UumMmElJ1jKWaUNpixke52kgw"}a.StorageManager=n,("undefined"==typeof window?t:window).StorageManager=n}).call(void 0,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],StorageUtil:[function(t,e,o){"use strict";cc._RF.push(e,"3c9afthEMhO5IggfesKvP68","StorageUtil");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("encryptjs");function r(){}r.setKeyPrefix=function(t){r._keyPrefix=t},r.setPassword=function(t){r._pw=t},r.set=function(t,e,o){void 0===o&&(o=!1),e="object"==typeof e?JSON.stringify(e):e,e=o?r.encrypt(e):e,cc.sys.localStorage.setItem(r._keyPrefix+t,e)},r.get=function(t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=!1),null===(t=cc.sys.localStorage.getItem(r._keyPrefix+t)))return null;if(t=o?r.decrypt(t):t,e)try{return JSON.parse(t)}catch(e){return t}return t},r.remove=function(t){cc.sys.localStorage.removeItem(r._keyPrefix+t)},r.encrypt=function(t){return a.encrypt(t,r._pw,256)},r.decrypt=function(t){return a.decrypt(t,r._pw,256)},r.clear=function(){cc.sys.localStorage.clear()},r._keyPrefix="",r._pw="default",n=r,i.default=n,cc._RF.pop()},{}],StrengthMgr:[function(t,e,o){"use strict";cc._RF.push(e,"25ac5wxkJtNQZglQqIYrDz2","StrengthMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("LvMgr"),u=i("Singleton"),d=i("EventManager"),h=i("TimeUtils");function _(){var t=null!==c&&c.apply(this,arguments)||this;return t.PerCount=l.gm.config.data.Setting[0].InitialPhysicalStrengthNum,t.Duration=l.gm.config.data.Setting[0].InitialPhysicalStrengthTime,t.hpPerCount=l.gm.config.data.Setting[0].InitialPhysicalHpNum,t.hpDuration=l.gm.config.data.Setting[0].InitialPhysicalHpTime,t}r(_,c=u.default),_.prototype.load=function(){var t,e,o,n=h.default.getTime();l.gm.localData.last_resume_strength_time?(t=n-l.gm.localData.last_resume_strength_time)>this.Duration&&(o=(e=Math.floor(t/this.Duration))*this.PerCount,this.autoAddStrength(o),this.saveLastTime(l.gm.localData.last_resume_strength_time+e*this.Duration)):(l.gm.localData.last_resume_strength_time=n,l.gm.localData.saveByKey("last_resume_strength_time"),l.gm.localData.curStrength=p.default.getInstance().getStrengthMax(),this.saveStrength()),l.gm.localData.last_resume_hp_time?(t=n-l.gm.localData.last_resume_hp_time)>this.hpDuration&&(o=(e=Math.floor(t/this.hpDuration))*this.hpPerCount,this.autoAddHp(o),this.saveHpLastTime(l.gm.localData.last_resume_hp_time+e*this.hpDuration)):(l.gm.localData.last_resume_hp_time=n,l.gm.localData.saveByKey("last_resume_hp_time"),l.gm.localData.curHp=p.default.getInstance().getHpMax(),this.saveHp())},_.prototype.autoAddStrength=function(t){this.getCurStrength()<p.default.getInstance().getStrengthMax()&&(l.gm.localData.curStrength=Math.min(p.default.getInstance().getStrengthMax(),l.gm.localData.curStrength+t),this.saveStrength())},_.prototype.autoAddHp=function(t){this.getCurHp()<p.default.getInstance().getHpMax()&&(l.gm.localData.curHp=Math.min(p.default.getInstance().getHpMax(),l.gm.localData.curHp+t),this.saveHp(),d.default.emit(s.GameEvent.updateBase))},_.prototype.setStrengthMax=function(){l.gm.localData.curStrength=Math.max(p.default.getInstance().getStrengthMax(),l.gm.localData.curStrength),this.saveStrength()},_.prototype.setHpMax=function(){l.gm.localData.curHp=Math.max(p.default.getInstance().getHpMax(),l.gm.localData.curHp),this.saveStrength()},_.prototype.addStrength=function(t){t<=0||(l.gm.localData.curStrength+=t,this.saveStrength())},_.prototype.addHp=function(t){t<=0||(l.gm.localData.curHp+=t,this.saveHp())},_.prototype.getCurStrength=function(){return l.gm.localData.curStrength||0},_.prototype.getCurHp=function(){return l.gm.localData.curHp||0},_.prototype.reduce=function(t){l.gm.localData.curStrength-=t,this.saveStrength(),d.default.emit(s.GameEvent.updateBase)},_.prototype.reduceHp=function(t){l.gm.localData.curHp-=t,l.gm.localData.curHp=l.gm.localData.curHp<=0?0:l.gm.localData.curHp,this.saveHp(),d.default.emit(s.GameEvent.updateBase)},_.prototype.saveStrength=function(){l.gm.localData.saveByKey("curStrength")},_.prototype.saveHp=function(){l.gm.localData.saveByKey("curHp")},_.prototype.saveHpAdd=function(){l.gm.localData.saveByKey("addHp")},_.prototype.saveStrengthAdd=function(){l.gm.localData.saveByKey("addStrength")},_.prototype.saveLastTime=function(t){l.gm.localData.last_resume_strength_time=t,l.gm.localData.saveByKey("last_resume_strength_time")},_.prototype.saveHpLastTime=function(t){l.gm.localData.last_resume_hp_time=t,l.gm.localData.saveByKey("last_resume_hp_time")},r=_,a.default=r,cc._RF.pop()},{}],StringUtil:[function(t,e,o){"use strict";cc._RF.push(e,"d896coa/rZM/4a4gge67QsC","StringUtil");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("TimeUtils");function r(){}r.stringFormat=function(){},r.countDownFormat=function(t){t=Math.round(t);var e=(o=a.default.secondsFormat(t)).hour,o=(t=o.minute,o.second);return this.PrefixInteger(e,2)+":"+this.PrefixInteger(t,2)+":"+this.PrefixInteger(o,2)},r.countDownFormat_2=function(t){t=Math.round(t),t=(e=a.default.secondsFormat(t)).minute+60*e.hour;var e=e.second;return t<10?"0"+t+":"+this.PrefixInteger(e,2):t+":"+this.PrefixInteger(e,2)},r.PrefixInteger=function(t,e){return(Array(e).join("0")+t).slice(-e)},r.n2k=function(t,e){void 0===e&&(e=2);var o=Math.sign(t),n=Math.abs(t);return t="",t=n<1e3?n+"":1e3<=n&&n<1e6?(n/1e3).toFixed(e)+"K":(n/1e6).toFixed(e)+"M",-1==o?"-"+t:t},r.numToPercentage=function(t){return Math.round(100*t)+"%"},r.getTextRich=function(t){for(var e=t.replace(/<.+?\/?>/g,"").split(""),o=[t],n=e.length;1<n;n--){var i=(r=o[e.length-n]).lastIndexOf(e[n-1]),a=r.slice(0,i),r=r.slice(i+1,r.length);o.push(a+r)}return o},n=r,i.default=n,cc._RF.pop()},{}],SurpriseUI:[function(t,e,o){"use strict";cc._RF.push(e,"56310AMrghEZ7yPUMF4pT/u","SurpriseUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("AwardItem"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("GameModule"),y=i("AniUtils"),m=i("Vec2Utils"),v=i("MainRoleMgr"),b=i("GetAwardUI");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_content=null,t.nod_basket=null,t.nod_award=null,t.nod_box=null,t.bigItems=[],t.refuese_node=null,t.get_node=null,t.video_node=null,t.tmpItem=null,t.loading=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=g.default),I.prototype.onEnable=function(){p.default.award()},I.prototype.setData=function(t,e,o){var n=this;void 0===e&&(e=b.GetAwardType.button),void 0===o&&(o=0),this.bigItems=t=void 0===t?[]:t,this.nod_box.active=!0,this.nod_award.active=!1,0==o?(this.video_node.active=!0,this.get_node.active=!1,this.refuese_node.active=!0):(this.video_node.active=!1,this.get_node.active=!0,this.refuese_node.active=!1),y.default.playAni(this.nod_box.getComponent(cc.Animation),"surprise_ui_off",function(){n.open()})},I.prototype.updateUI=function(){},I.prototype.open=function(){this.nod_box.active=!1,this.nod_award.active=!0,this.loadItem()},I.prototype.loadItem=function(){var t=this;this.tmpItem?this.onLoadEnd():this.loading||(this.loading=!0,_.gm.ui.createPrefab(h.Contents.AwardItem,function(e){t.tmpItem=cc.instantiate(e),t.onLoadEnd()}))},I.prototype.onLoadEnd=function(){var t=this;y.default.playAni(this.getComponent(cc.Animation),"get_award_03",function(){y.default.playAni(t.getComponent(cc.Animation),"get_award_04",function(){})});for(var e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;var n=this.bigItems.length;n=140*(n=Math.min(n,3))+(n-1)*this.nod_content.getComponent(cc.Layout).spacingX,this.nod_content.width=n,this.scheduleOnce(function(){for(var e=0;e<t.bigItems.length;e++)!function(e){var o=null;t.nod_content.children[e]?(o=t.nod_content.children[e]).active=!0:(o=cc.instantiate(t.tmpItem),t.nod_content.addChild(o),o.active=!0),o.opacity=0,o.getComponent(u.default).setData(t.bigItems[e]),cc.tween(o).delay(.1*e).call(function(){t.fly(o,e,function(){cc.tween(o).to(.1,{opacity:255}).start()})}).start()}(e)})},I.prototype.fly=function(t){var e=cc.instantiate(t);e.opacity=255,e.parent=this.nod_basket,e.x=0,e.y=0;var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=this.nod_basket.convertToNodeSpaceAR(o);o=m.default.getDistance(cc.v2(0,0),n)/800,cc.tween(e).to(o,{x:n.x,y:n.y}).call(function(){t.opacity=255,e.destroy()}).start()},I.prototype.onBtnReject=function(){p.default.click(),this.closeMe()},I.prototype.onBtnVideo=function(){var t=this;d.default.showVideo(function(){f.default.addGainThing(t.bigItems,!1),d.default.fly(v.default.getInstance().mainRole.node,t.bigItems),t.closeMe()},40000029)},I.videoPoint=0,s([a(cc.Node)],I.prototype,"nod_content",void 0),s([a(cc.Node)],I.prototype,"nod_basket",void 0),s([a(cc.Node)],I.prototype,"nod_award",void 0),s([a(cc.Node)],I.prototype,"nod_box",void 0),s([a(cc.Node)],I.prototype,"refuese_node",void 0),s([a(cc.Node)],I.prototype,"get_node",void 0),s([a(cc.Node)],I.prototype,"video_node",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],TMXUtils:[function(t,e,o){"use strict";cc._RF.push(e,"d2fbb/dZjhOL549ASWHCmu9","TMXUtils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.tileToCocos=function(t,e,o){var n=e.height*o.height;return e=(t.x-t.y)*(o.width/2),o=n/2-(t.x+t.y+1)/2*o.height,cc.v2(e,o)},i.cocosToTile=function(t,e,o){var n=t.x/o.width+e.height/2-t.y/o.height-.5;return o=e.height/2-t.y/o.height-.5-t.x/o.width,cc.v2(n,o)},i.touchToTile=function(t,e,o){var n=t.x,i=t.y,a=o.width/2,r=o.height/2,c=Math.floor(n/a)*a,s=(a=Math.ceil(n/a)*a,[]);s.push(c),s.push(a);var l=[];a=Math.floor(i/r)*r,r=Math.ceil(i/r)*r,l.push(a),l.push(r);for(var p=NaN,u=NaN,d=0;d<=1;d++)for(var h=0;h<=1;h++){var _=this.cocosToTile(cc.v2(s[d],l[h]),e,o);if(Math.round(_.x)===_.x&&Math.round(_.y)==_.y&&this.isTouchPointIn(t,cc.v2(s[d],l[h]),o)){p=s[d],u=l[h];break}}return isNaN(p)||isNaN(u)?(cc.error("touchToTile: not a number"),null):this.cocosToTile(cc.v2(p,u),e,o)},i.isTouchPointIn=function(t,e,o){if(Math.abs(t.x-e.x)>o.width||Math.abs(t.y-e.y)>o.height)return!1;var n=Math.abs(t.x-e.x),i=o.height/o.width;return i=(o.width/2-n)*i,Math.abs(t.y-e.y)<=i},n.default=i,cc._RF.pop()},{}],TTMiniGame:[function(t,e,o){"use strict";cc._RF.push(e,"a5052ayDp9ORZrp65L5krvA","TTMiniGame");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.TTMiniGame=void 0;var a=n("GameMgr"),r=n("ChannelManager"),c=n("Utils"),s=n("NetUtils"),l=n("Const"),p=n("sha1"),u=n("EventManager");function d(){this._videoAdLoad=0,this._min_banner_ad_width=256,this._banner_ad_id_array=[],this._video_ad_id_array=["1f2h4jl85fff4a9gsi"],this._interstitial_ad_id="",this._banner_ad_array=[],this._banner_ad_flag_array=[!1],this._banner_ad_loaded_array=[!1],this._video_ad_array=[],this._video_cb_array=[],this._video_cb_target_array=[],this._video_close_cb_array=[],this._video_close_cb_target_array=[],this._interstitial_ad=null,this._interstitial_ad_loaded=!1,this._share_id_array=["1ntt9bhjpf72db37ji"],this._default_share_id="1ntt9bhjpf72db37ji",this._share_config_url="",this._chmhtxd_share_config_url="",this._record_start_time=0,this._record_end_time=0,this._is_share_record_video=!1,this._is_restart=!1,this._if_need_video_share=!1,this._video_path="",this._follow_name="follow.png",this._follow_btn_stat=!1,this.userOpenId="",this._share_title_array=["\u9047\u89c1\u7ae5\u8bdd"],this._douYinFollowBtnStat="0",this.video_ad_load_stat=!0,this.npc=0,this.share_state=0,this.iPreShowVideoTime=0,this.qq_number=0,this.is_bdd=0,this.edtion="",this.data_code_is_show=!1,this.qq_code_copy=!0,this.tmpObj={},this.juliangParamOptionTag=1,this.playVideoNumberReport=4,this.is_weak_guide=1,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.is_show_active_btn=!0,this._dirty_callback=null,this._share_music_url="https://cdnres.qszhg.6hwan.com/shareMusic.json",this._share_bgm=[],this.eventName={0:"active",1:"active_register",2:"retention_2d",3:"retention_3d",4:"retention_4d",5:"retention_5d",6:"retention_6d",7:"retention_7d",25:"game_addiction"}}Object.defineProperty(d,"instance",{get:function(){return this._instance||(this._instance=new d),this._instance},enumerable:!1,configurable:!0}),d.prototype.load_channel_env=function(t){if(window.tt)return window.tt.onHide(function(){}),window.tt.onShow(function(){}),window.tt.onKeyboardComplete(function(t){console.log("onKeyboardComplete ",t),t&&t.value&&(console.log("\u73a9\u5bb6\u8f93\u5165",t.value),u.default.emit(l.GameEvent.editbox_change,t.value))}),this._banner_ad_id_array[r.BANNER_AD_TYPE.ALL]="",this._interstitial_ad_id="",console.log("tt load_channel_env"+JSON.stringify(window.tt)),window.tt.login({force:!1,success:function(e){e.code?t(e.code):console.log("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg)},fail:function(){console.log("login\u8c03\u7528\u5931\u8d25")}}),this._share_id_array=r.ChannelManager.SHARE_CONFIG.share_id_array,this.loginVerify(),this.getShareBgmUrl(),this.getJuLiangParm(),this.create_video_ad(),!0},d.prototype.load_sub_packages_env=function(t){return t(),!0},d.prototype.get_app_name=function(){return window.tt&&window.tt.getSystemInfoSync?window.tt.getSystemInfoSync().appName:r.ChannelManager.UNKNOWN},Object.defineProperty(d.prototype,"is_rank",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_share",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_video_share",{get:function(){return!0},enumerable:!1,configurable:!0}),d.prototype.get_npc_state=function(){return this.npc},d.prototype.get_edtion=function(){return this.edtion},d.prototype.get_qq_number=function(){return this.qq_number},d.prototype.get_is_weak_guide=function(){return this.is_weak_guide},d.prototype.get_is_bdd=function(){return this.is_bdd},d.prototype.get_data_code_is_show=function(){return this.data_code_is_show},d.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},d.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},d.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},d.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},d.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},d.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},d.prototype.get_share_state=function(){return this.share_state},d.prototype.get_url=function(){return""},d.prototype.afterCheckDirty=function(t){t&&console.log("afterCheckDirty="+t),this._dirty_callback(t)},d.prototype.check_is_dirty_word=function(t,e){this._dirty_callback=e,c.Utils.server_http_request(this.afterCheckDirty,this,a.gm.channel.getServerUrl()+"user/douyin_content_check/msg_sec_check?uid=%s&token=%s&content=%s&open_id=%s",a.gm.data.uid,a.gm.data.token,t,a.gm.data.open_id)},d.prototype.vibrate_short=function(){tt.vibrateShort&&tt.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},d.prototype.vibrate_long=function(){tt.vibrateLong&&tt.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},d.prototype.get_user_info=function(t){var e=this;console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f:getUserInfo() "),window.tt.getSetting({success:function(o){o.authSetting["scope.userInfo"]?(console.log("window.tt.getSetting  res.authSetting is true"),window.tt.getUserInfo({success:function(o){t(1,o.userInfo.nickName),e.user_info_get=!0}})):(console.log("window.tt.getSetting  res.authSetting is false!"),tt.authorize({scope:"scope.userInfo",success:function(o){t(1,o.userInfo.nickName),e.user_info_get=!0},fail:function(){console.log("get_user_info auth fail"),t(0,"")}}))},fail:function(e){console.log("getUserInfo is fail:%s",JSON.stringify(e)),t(0,"")}})},Object.defineProperty(d.prototype,"is_support_more_game",{get:function(){return"ios"!=window.tt.getSystemInfoSync().platform&&!!(window.tt.onMoreGamesModalClose&&window.tt.onNavigateToMiniProgram&&window.tt.showMoreGamesModal)},enumerable:!1,configurable:!0}),d.prototype.show_more_game=function(t,e){this.is_support_more_game&&(window.tt.onMoreGamesModalClose(function(t){console.log("modal closed",t)}),window.tt.onNavigateToMiniProgram(function(t){console.log(t.errCode),console.log(t.errMsg)}),window.tt.showMoreGamesModal({appLaunchOptions:[],success:function(o){console.log("success",o.errMsg),t&&e&&t.call(e,0)},fail:function(o){console.log("fail",o.errMsg),t&&e&&t.call(e,1)}}))},d.prototype.create_interstitial_ad=function(){var t=this;"devtools"!=this.get_app_name()&&this.is_support_interstitial_ad&&(this._interstitial_ad=tt.createInterstitialAd({adUnitId:this._interstitial_ad_id}),this._interstitial_ad.load().then(function(){}).catch(function(t){console.error("load",t)}),this._interstitial_ad.onLoad(function(){t._interstitial_ad_loaded=!0}),this._interstitial_ad.onClose(function(){console.log("close event emit")}),this._interstitial_ad.onError(function(t){console.log("error",t)}))},Object.defineProperty(d.prototype,"is_support_interstitial_ad",{get:function(){return tt.createInterstitialAd?(console.log("is_support_interstitial_ad  createInterstitialAd: true"),"ios"!=tt.getSystemInfoSync().platform||(console.log("is_support_interstitial_ad: false"),!1)):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),d.prototype.show_interstitial_ad=function(t,e){this._interstitial_ad&&this._interstitial_ad_loaded&&this._interstitial_ad.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u6210\u529f"),t&&e&&t.call(e,0)}).catch(function(o){console.error("show",o),t&&e&&t.call(e,1)})},d.prototype.loginVerify=function(){return tt.showShareMenu({withShareTicket:!1}),tt.onShareAppMessage(function(){return{title:"\u68ee\u6797\u63a2\u9669\uff0c\u5236\u4f5c\u7f8e\u98df\uff0c\u62db\u5ba2\u63fd\u5ba2~\uff01",imageUrl:a.gm.const.IS_GAME_XMCT?"https://leduo.zqygame.com/res/leduo/panda/share/11.jpg?v=1":"https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/01_wx/share/11.jpg?v=1",query:"",success:function(t){console.log("\u8f6c\u53d1\u6210\u529f"),console.log(t)},fail:function(t){console.log("fail tt onShareAppMessage"+t)}}}),!0},d.prototype.share_req=function(t,e){var o,n;return window.tt&&(n=0==this._share_id_array.length?this._default_share_id:(o=c.Utils.math_random(!0,0,this._share_id_array.length),this._share_id_array[o]),window.tt.shareAppMessage({templateId:n,query:"shareOpenId="+a.gm.data.uid,success:function(){console.log("\u5206\u4eab\u6210\u529f"),t.call(e)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25")}})),!0},d.prototype.create_banner_ad=function(){var t=this;if(window.tt)for(var e=window.tt.getSystemInfoSync(),o=e.windowWidth,n=e.windowHeight,i=this,a=0;a<this._banner_ad_id_array.length;a++)!function(){var e=a,r=i._banner_ad_id_array[e];if(null!=r&&""!=r){var c=window.tt.createBannerAd({adUnitId:r,adIntervals:30,style:{width:i._min_banner_ad_width,top:n,left:(o-i._min_banner_ad_width)/2}});i._banner_ad_array.push(c),c.onLoad(function(){console.log("banner ad id:"+r+" onLoad"),t._banner_ad_loaded_array[e]=!0}),c.onResize(function(t){c.style.left=(o-t.width)/2,c.style.top=n-t.height,console.log("banner_ad.onResize:",t.width,t.height);var e=cc.view.getDevicePixelRatio(),i=cc.view.getScaleX();console.log("banner need design size:",t.width*e/i,t.height*e/i)})}}()},d.prototype.show_banner_ad=function(t){var e,o=this;this._banner_ad_loaded_array[t]&&(this._banner_ad_flag_array[t]=!0,(e=this._banner_ad_array[t]).show().then(function(){o._banner_ad_flag_array[t]?console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f"):(e.hide(),console.log("\u5e7f\u544a\u663e\u793a\u6162\u4e86\uff0c\u4e0d\u9700\u8981\u663e\u793a\u4e86"))}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)}))},d.prototype.hide_banner_ad=function(t){var e;!this._banner_ad_loaded_array[t]||(e=this._banner_ad_array[t])&&(e.hide(),this._banner_ad_flag_array[t]=!1)},d.prototype.create_video_ad=function(){if(null!=window.tt&&null!=window.tt.createRewardedVideoAd)for(var t=0;t<this._video_ad_id_array.length;t++){var e=t;this._video_ad_array[e]=window.tt.createRewardedVideoAd({adUnitId:this._video_ad_id_array[e]}),this.on_video_ad_handler(e),this._video_ad_array[e].load()}},d.prototype.onTouchEnd=function(){window.tt.onTouchEnd(function(){})},d.prototype.on_video_ad_handler=function(t){var e=this;this._video_ad_array[t].onClose(function(o){o&&o.isEnded||void 0===o?(console.log("\u89c6\u9891\u5e7f\u544a \u6b63\u5e38\u64ad\u653e\u7ed3\u675f"),e._video_cb_array[t].apply(e._video_cb_target_array[t],[r.REWARD_VIDEO_AD_RESULT.REWARD])):(s.ReportData.instance.report_point(20),console.log("\u89c6\u9891\u5e7f\u544a \u64ad\u653e\u4e2d\u9014\u9000\u51fa"),e._video_close_cb_array[t]&&e._video_close_cb_target_array[t]&&e._video_close_cb_array[t].apply(e._video_close_cb_target_array[t])),cc.game.resume()}),this._video_ad_array[t].onLoad(function(){e._videoAdLoad=1,console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._video_ad_array[t].onError(function(t){e.video_ad_load_stat=!1,console.log(t)})},d.prototype.show_video_ad=function(t,e){console.log("TTMiniGame-showVideoAD"),this._video_cb_array[0]=t,this._video_cb_target_array[0]=e;var o=this,n=tt.getSystemInfoSync();if(console.log(n.appName),"DOUYIN"==n.appName.toUpperCase()&&cc.sys.os==cc.sys.OS_IOS)return console.log("Douyin platform!"),void o.share_req(t,e);0==this._videoAdLoad&&(this.create_video_ad(),console.error("this._videoAdLoad == 0")),o._video_ad_array[0].show().then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f"),cc.game.pause()}).catch(function(n){console.log("\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",n),o._video_ad_array[0].load().then(function(){return console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o._video_ad_array[0].show().then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u91cd\u8bd5\u663e\u793a\u6210\u529f"),cc.game.pause(),o._video_ad_array[0].offLoad()}).catch(function(n){console.log("\u89c6\u9891\u5e7f\u544a\u7ec4\u4ef6\u91cd\u8bd5\u51fa\u73b0\u95ee\u9898",n),1004==n.errCode?a.gm.ui.showNotice("\u65e0\u9002\u5408\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5"):1004<n.errCode&&n.errCode<=1008&&a.gm.ui.showNotice("\u5e7f\u544a\u7ec4\u4ef6\u4e0d\u53ef\u7528"),o.share_req(t,e)})}).catch(function(){o.share_req(t,e)})})},d.prototype.set_rank_value=function(){var t;window.tt&&(window.tt.setUserGroup({groupId:"level_group"}),t={ttgame:{score:0,update_time:Math.floor((new Date).getTime()/1e3)},cost_time:0},window.tt.setUserCloudStorage({KVDataList:[{key:"level",value:JSON.stringify(t)}]}),cc.log("\u4e0a\u62a5\u6392\u884c\u6570\u636e"))},d.prototype.get_rank_data=function(){return window.tt&&window.tt.getOpenDataContext().postMessage({message:0}),!0},d.prototype.set_rank_close=function(){window.tt&&window.tt.getOpenDataContext().postMessage({message:99})},d.prototype.get_self_rank_data=function(){return window.tt&&window.tt.getOpenDataContext().postMessage({message:300}),!0},d.prototype.set_self_rank_close=function(){window.tt&&window.tt.getOpenDataContext().postMessage({message:301})},d.prototype.on_rank_pre_page_click=function(){window.tt&&window.tt.getOpenDataContext().postMessage({message:100})},d.prototype.on_rank_next_page_click=function(){window.tt&&window.tt.getOpenDataContext().postMessage({message:101})},d.prototype.checkIfCanRecord=function(){return!0},d.prototype.record_start=function(){var t,e,o=this;window.tt&&window.tt.getGameRecorderManager&&(t=this,(e=window.tt.getGameRecorderManager()).onStart(function(){console.log("\u5f55\u5c4f\u5f00\u59cb"),t._record_start_time=Date.now(),o._is_restart=!1}),this._is_restart=!0,e.start({duration:180}),e.onStop(function(e){console.log("\u5f55\u5c4f\u7ed3\u675f"),t._record_end_time=Date.now(),t._is_share_record_video=!1,console.log(e.videoPath),t._video_path=e.videoPath,t.share_video(!1),t._is_restart&&setTimeout(function(){t.record_start()},.017)}))},d.prototype.record_stop=function(t){window.tt&&window.tt.getGameRecorderManager&&(this._if_need_video_share=t,window.tt.getGameRecorderManager().stop())},d.prototype.share_video=function(t,e){var o,n;(t||this._if_need_video_share)&&(0<(o=this)._record_end_time&&this._record_end_time-this._record_start_time<3017||(n=0==this._share_id_array.length?this._default_share_id:(n=c.Utils.math_random(!0,0,this._share_id_array.length),this._share_id_array[n]),window.tt&&window.tt.shareAppMessage({channel:"video",templateId:n,title:o._share_title_array,imageUrl:"",query:"",extra:{videoPath:o._video_path,videoTopics:o._share_title_array,defaultBgm:o.getBgm},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),o._record_start_time=o._record_end_time=0,o._is_share_record_video=!0,e&&e(0)},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",t),e&&e(1)}})))},d.prototype.viedo_share=function(t,e){var o,n=this;0<this._record_end_time&&this._record_end_time-this._record_start_time<3017?a.gm.ui.showNotice("\u5f55\u5c4f\u65f6\u957f\u5c0f\u4e8e3s\uff0c\u65e0\u6cd5\u5206\u4eab"):(o=0==this._share_id_array.length?this._default_share_id:(o=c.Utils.math_random(!0,0,this._share_id_array.length),this._share_id_array[o]),window.tt&&window.tt.shareAppMessage({channel:"video",templateId:o,title:n._share_title_array,imageUrl:"",query:"",extra:{videoPath:n._video_path,videoTopics:n._share_title_array},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),n._record_start_time=n._record_end_time=0,n._is_share_record_video=!0,e&&e(0)},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),e&&e(1)}}))},d.prototype.clear_cache=function(){window.wxDownloader&&(window.wxDownloader.cleanAllAssets(),console.log("delete cache success"))},d.prototype.follow=function(t,e){if(tt.checkFollowState){var o,n,i=tt.getSystemInfoSync();return console.log("follow:tt.getSystemInfoSync.appName:",i.appName),"Toutiao"==i.appName&&(console.log("\u518d\u68c0\u6d4b\u6709\u6ca1\u6709\u5173\u6ce8\u63a5\u53e3\uff01follow tt.checkFollowState"),o=this,(n={windowWidth:0,windowHeight:0}).windowWidth=i.windowWidth,n.windowHeight=i.windowHeight,console.log("sysinfo:",n),tt.checkFollowState({success:function(i){console.log("\u8be5\u7528\u6237\u5df2\u7ecf\u5173\u6ce8\u4e86\u516c\u4f17\u53f7\uff01\uff01\uff01",i.result),i.result||tt.downloadFile({url:"https://cdnres.qszhg.6hwan.com//littleMaster/"+o._follow_name,success:function(i){if(200===i.statusCode){console.log("\u521b\u5efaimages\u5173\u6ce8\u6309\u94ae"),console.log(""+i.tempFilePath);var r=0,c="follow.png"==o._follow_name?(r=n.windowWidth/a.gm.data.design_resolution.x*145,n.windowHeight/a.gm.data.design_resolution.y*101):(r=n.windowWidth/a.gm.data.design_resolution.x*600,n.windowHeight/a.gm.data.design_resolution.y*800),s=n.windowWidth-r,l=n.windowHeight*(391.484-c/2)/a.gm.data.design_resolution.y;if(console.log("MainVO.designResolution.x:%s,MainVO.designResolution.y:%s.",a.gm.data.design_resolution.x,a.gm.data.design_resolution.y),o.followBtn=tt.createFollowButton({type:"image",image:i.tempFilePath,style:{left:s,top:l,width:r,height:c,lineHeight:40,backgroundColor:"#ff0000",textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,borderWidth:0,borderColor:"#ff0000"}}),o.followBtn)return o.followBtn.onTap(function(o){console.log("follow_callback(res):",JSON.stringify(o)),0==o.errCode&&t.call(e)}),o.followBtn.show(),o._follow_btn_stat=!0}},fail:function(t){console.log("downloadFile\u8c03\u7528\u5931\u8d25\uff1a",t)}})},fail:function(t){console.log("createFollowBtn is fail!",t)}})),!1}},d.prototype.follow_btn_stat=function(){return this._follow_btn_stat},d.prototype.hide_follow_btn=function(){return!!this.followBtn&&(this.followBtn.hide(),!0)},d.prototype.show_follow_btn=function(){return!!this.followBtn&&(this.followBtn.show(),!0)},d.prototype.user_subscribe_message=function(t,e){var o,n;void 0===e&&(e=[]),tt.requestSubscribeMessage&&(o=this,n=0==e.length?["MSG1158625aae6f860a892f55d4f4daee35c9b8c5c13730"]:e,tt.requestSubscribeMessage({tmplIds:n,success:function(t){console.log("userSubscribeMessage:",t),t="https://gameapipy.6hwan.com/user/minigame/toutiao_app/subscribe/?appid=ttae7dd8c03146ae1b&openid="+o.userOpenId+"&template_id="+JSON.stringify(n),console.log("userSubscribeMessage tmpUrl:",t),tt.request({url:t,success:function(t){console.log("userSubscribeMessage requestSuc para1:",JSON.stringify(t))},fail:function(t){console.log("userSubscribeMessage requestFail para1:",t)}}),a.gm.data.start_data.user_subscribe_message_stat=1,a.gm.data.start_data.async_write_data()},fail:function(t){console.log(t)}}))},d.prototype.DouYinFollowBS=function(){return"DOUYIN"==tt.getSystemInfoSync().appName.toUpperCase()?this._douYinFollowBtnStat:"0"},d.prototype.douYinFollow=function(t,e){tt.openAwemeUserProfile&&(tt.openAwemeUserProfile(),t.call(e))},d.prototype.load_share_config=function(){},d.prototype.canvasResize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas),e=n=n||t.designResolution,o=(i=cc.view.getFrameSize()).width,n=o,i=t=i.height;t/o>e.height/e.width?i=t/o*(n=e.width):n=(i=e.height)*o/t,i=cc.v2(n,i),a.gm.data.design_resolution=i,cc.log("MainVO.designResolution.x:,MainVO.designResolution.y:%s.",JSON.stringify(i))},d.prototype.getShareBgmUrl=function(){var t=this,e=c.Utils.get_cur_time();tt.request({url:t._share_music_url+"?iRandom="+e,method:"GET",header:{"content-type":"application/json"},success:function(e){console.log("game.login requestSuc para2:",e),"data"in e?("_share_bgm"in e.data&&(t._share_bgm=e.data.defaultBgm),console.log("this._share_bgm:%s",t._share_bgm)):t._share_bgm=["https://v.douyin.com/e3VWRF6/","https://v.douyin.com/e3qYGF4/","https://v.douyin.com/e3VrGmY/","https://v.douyin.com/e3VQmpj/","https://v.douyin.com/e3qJuC9/","https://v.douyin.com/e3V7MV9/","https://v.douyin.com/e3VbSYg/","https://v.douyin.com/e3V7JkL/","https://v.douyin.com/e3VfP12/","https://v.douyin.com/e3VWVsA/"]},fail:function(e){console.log(" _share_bgm requestFail para1:",e),t._share_bgm=["https://v.douyin.com/e3VWRF6/","https://v.douyin.com/e3qYGF4/","https://v.douyin.com/e3VrGmY/","https://v.douyin.com/e3VQmpj/","https://v.douyin.com/e3qJuC9/","https://v.douyin.com/e3V7MV9/","https://v.douyin.com/e3VbSYg/","https://v.douyin.com/e3V7JkL/","https://v.douyin.com/e3VfP12/","https://v.douyin.com/e3VWVsA/"]}})},Object.defineProperty(d.prototype,"getBgm",{get:function(){if(this._share_bgm.length<=0)return"https://v.douyin.com/e3VWRF6/";var t=Math.floor(Math.random()*this._share_bgm.length);return this._share_bgm[t]},enumerable:!1,configurable:!0}),d.prototype.clipBoard=function(t,e){tt.setClipboardData({data:t,success:function(){e()}})},d.prototype.juLiangSign=function(t,e,o){(o=[t,e,o]).sort();var n="";return o.forEach(function(t){n+=t}),p.default(n)},d.prototype.getJuLiangParm=function(){var t=tt.getLaunchOptionsSync();console.log("getJuLiangParm  obj:",JSON.stringify(t)),"clickid"in t.query&&(this.tmpObj.clickid=this.paramOption(t.query.clickid)),"adid"in t.query&&(this.tmpObj.adid=this.paramOption(t.query.adid)),"creativeid"in t.query&&(this.tmpObj.creativeid=this.paramOption(t.query.creativeid))},d.prototype.paramOption=function(t){return 1==this.juliangParamOptionTag?t.replace("\n","").trim():t},d.prototype.getReportUrl=function(){return"https://analytics.oceanengine.com/api/v2/conversion"},d.prototype.getJuLiangBody=function(t){console.log("getJuLiangParm  tmpObj:",JSON.stringify(this.tmpObj));var e={},o={},n={};return o.callback=this.tmpObj.clickid,n.ad=o,e.context=n,e.event_type=t,e},d.prototype.juLiangEventReport=function(t){null!=this.tmpObj.clickid?(t=this.getJuLiangBody(this.eventName[t]),c.Utils.http_request(function(t){console.log("res.code:  "+t.code+"res.message:  "+t.message),console.warn("END----------------    juLiangEventReport(event)   ------------------END")},this,this.getReportUrl(),t)):console.log("this.tmmObj.clue_token is undefined!")},d._instance=null,d.ad_enable=!0,n=d,i.TTMiniGame=n,cc._RF.pop()},{}],TaskItemData:[function(t,e,o){"use strict";cc._RF.push(e,"15cf1ernEVIcacXkungR6PT","TaskItemData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.TaskStatus=void 0;var a,r=n("Const"),c=n("GameMgr"),s=n("MapDataHelper"),l=n("PropMgr"),p=n("EventManager"),u=n("BarbecueMenuData"),d=n("GuideMgr"),h=n("StaffData"),_=n("TaskMgr"),f=n("TaskRecordData");function g(t){this.taskID=0,this.config=null,this.status=a.not_reach,this.itemReach=[],this.isNew=!0,this.taskID=t,this.config=c.gm.config.taskConfigs[this.taskID];for(var e=0;e<this.config.condition.length;e++)this.itemReach.push(0)}(n=a=i.TaskStatus||(i.TaskStatus={}))[n.not_reach=0]="not_reach",n[n.reach=1]="reach",n[n.done=2]="done",g.prototype.isReach=function(){return this.status==a.reach},g.prototype.check=function(){for(var t=this.config.condition,e=!0,o=0;o<t.length;o++){var n=t[o];this.itemReach[o]=this.checkByCondition(n),this.itemReach[o]<n.num&&e&&(e=!1)}return e&&(this.status=a.reach,d.default.getInstance().endGuide(this.taskID),p.default.emit(r.GameEvent.task_reach,this.taskID)),e},g.prototype.checkByCondition=function(t){if(t.mission==r.ConditionType.new_prop)return f.default.getInstance().new_prop[t.id]||0;if(t.mission==r.ConditionType.clean)return f.default.getInstance().cleanObjects[t.id]||0;if(t.mission==r.ConditionType.unlock_map_object)return f.default.getInstance().unlockObjectRecord[t.id]||0;if(t.mission==r.ConditionType.have_prop)return l.default.getPropCount(t.id);if(t.mission==r.ConditionType.harvest_count)return f.default.getInstance().harvest_count_record[t.id]||0;if(t.mission==r.ConditionType.put_decoration)return s.default.getObjectCount(t.id);if(t.mission==r.ConditionType.collect)return f.default.getInstance().collectionRecord[t.id]||0;if(t.mission==r.ConditionType.trade){if(t.id)return f.default.getInstance().businessManDatas[t.id]&&f.default.getInstance().businessManDatas[t.id].tradeCound||0;var e,o=0;for(e in f.default.getInstance().businessManDatas){var n=f.default.getInstance().businessManDatas[e];o+=n&&n.tradeCound||0}return o}if(t.mission==r.ConditionType.build)return f.default.getInstance().buildRecord[t.id]||0;if(t.mission==r.ConditionType.unlockSlot)return s.default.getSlotIsOpen(t.id,t.num-1)?t.num:0;if(t.mission==r.ConditionType.produce)return f.default.getInstance().produceRecord[t.id]||0;if(t.mission==r.ConditionType.harvest_times)return f.default.getInstance().harvestRecord[t.id]||0;if(t.mission==r.ConditionType.buy_10)return f.default.getInstance().ten||0;if(t.mission==r.ConditionType.interact_heart)return f.default.getInstance().decoration_interact[t.id]?f.default.getInstance().decoration_interact[t.id]:0;if(t.mission!=r.ConditionType.NPC)return t.mission==r.ConditionType.give_npc?l.default.getPropCount(t.id):t.mission==r.ConditionType.unlock_district?c.gm.localData.unlockDistrict.includes(t.id)?1:0:t.mission==r.ConditionType.food_order?f.default.getInstance().food_order_count:t.mission==r.ConditionType.buy_animal?f.default.getInstance().breed_buy_record[t.id]||0:t.mission==r.ConditionType.feed_animal?f.default.getInstance().breed_feed_record[t.id]||0:t.mission==r.ConditionType.produce_rate_unlock?c.gm.localData.produce_rate_unlock.includes(t.id)?1:0:t.mission==r.ConditionType.broadcast?f.default.getInstance().broadcast_count:t.mission==r.ConditionType.truck_order?f.default.getInstance().trunk_order||0:t.mission==r.ConditionType.consume_prop?f.default.getInstance().consume_prop[t.id]||0:t.mission==r.ConditionType.recruit_staff?f.default.getInstance().recruit_staff.includes(t.id)?1:0:t.mission==r.ConditionType.appoint_staff?f.default.getInstance().appoint_staff[t.id]||0:t.mission==r.ConditionType.buy_prop?f.default.getInstance().buy_prop[t.id]||0:t.mission==r.ConditionType.bbq_learn_menu?f.default.getInstance().bbq_learn_menu.includes(t.id)?1:0:t.mission==r.ConditionType.replenish_goods?f.default.getInstance().replenish[t.id]||0:t.mission==r.ConditionType.object_upgrade?s.default.getDataMaxLv(t.id):t.mission==r.ConditionType.staff_upgrade?h.default.getInstance().getStaffLv(t.id):t.mission==r.ConditionType.unlock_module?f.default.getInstance().unlock_module_id.includes(t.id)?1:0:t.mission==r.ConditionType.kill_monster?f.default.getInstance().kill_monster_record[t.id]||0:t.mission==r.ConditionType.open_box_buy_key?f.default.getInstance().open_box_by_key[t.id]||0:t.mission==r.ConditionType.main_house_menu_upgrade?c.gm.localData.foodMenu[t.id].star||0:t.mission==r.ConditionType.bbq_menu_upgrade?u.default.getInstance().getMenuLv(t.id):0;var i=_.default.getInstance().interactWithNpc[this.taskID]||0;return i&&i==t.id?1:0},g.prototype.getCondition=function(t){for(var e=0,o=this.config.condition;e<o.length;e++){var n=o[e];if(n.mission==t)return n}return null},g.prototype.isOtherConditionReach=function(t){for(var e=this.config.condition,o=0;o<e.length;o++){var n=e[o];if(n.mission!=t&&this.checkByCondition(n)<n.num)return!1}return!0},g.prototype.isEndGuide=function(){return!this.config.g_limit||!!c.gm.localData.endGuidings.includes(this.config.g_limit)},i.default=n=g,cc._RF.pop()},{}],TaskMessageItem:[function(t,e,o){"use strict";cc._RF.push(e,"4cf02g/SMdAiLjX6HH2rfbY","TaskMessageItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonItem_4"),d=i("CommonUtils"),h=i("PropMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count=null,t.nod_check=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},_.prototype.onDisable=function(){},_.prototype.setData=function(t){this.data=t,this.getComponent(u.default).setIconByPropID(t.id),this.getComponent(u.default).rich_count.string=d.default.propNeedStr3(t.id,h.default.getPropCount(t.id),t.num)},_.prototype.setCheck=function(t){this.nod_check.active=t},_.prototype.onTouchItem=function(){cc.log(this.data),p.default.getInstance().dealByItemID(this.data.id)},s([a(cc.Sprite),a(cc.Label)],_.prototype,"lbl_count",void 0),s([a(cc.Node)],_.prototype,"nod_check",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],TaskMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5a4919by7VBApD+pevT010u","TaskMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("Singleton"),u=i("TaskItemData"),d=i("TaskRecordData"),h=i("TaskTypeData");function _(){var t=c.call(this)||this;return t.lastDoneTaskID=0,t.curTaskID=0,t.taskTypeData={},t.interactWithNpc={},t._init(),t}r(_,c=p.default),_.prototype._init=function(){cc.log("init task data");for(var t=0,e=l.gm.config.data.Tasks;t<e.length;t++){var o=e[t];this.taskTypeData[o.type]||(this.taskTypeData[o.type]=new h.default(o.type),this.taskTypeData[o.type].setLastTaskID(d.default.getInstance().getLastTaskID(o.type)));var n=new u.default(o.id);this.taskTypeData[o.type].addItem(n)}},_.prototype.getCurList=function(){var t,e=[];for(t in this.taskTypeData){var o=this.taskTypeData[t];e.length<7&&o.getCurTask()&&e.push(o)}return e},_.prototype.checkAll=function(){for(var t=0,e=this.getCurList();t<e.length;t++)e[t].getCurTask().check()},_.prototype.checkIsCurTaskID=function(t){for(var e=0,o=this.getCurList();e<o.length;e++)if(t==o[e].getCurTask().taskID)return!0;return!1},_.prototype.getCurTasks=function(t){for(var e=[],o=0,n=this.getCurList();o<n.length;o++){var i=n[o].getCurTask();i&&i.getCondition(t)&&e.push(i)}return e},_.prototype.checkIsTask=function(t){for(var e=this.getCurTasks(s.ConditionType.NPC),o=0;o<e.length;o++)if(t==e[o].getCondition(s.ConditionType.NPC).id)return!0;return!1},r=_,a.default=r,cc._RF.pop()},{}],TaskRecordData:[function(t,e,o){"use strict";cc._RF.push(e,"f1b6aavT5BBMJjV1ZoMA1Xi","TaskRecordData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("EventManager"),p=i("StorageBase"),u=i("NetUtils");function d(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="TaskRecordData",t.cleanObjects={},t.collectionRecord={},t.businessManDatas={},t.buildRecord={},t.unlockSlotRecord={},t.produceRecord={},t.harvestRecord={},t.harvest_count_record={},t.replenish={},t.put_staff=!1,t.ten=0,t.decoration_interact={},t.unlockObjectRecord={},t.food_order_count=0,t.breed_buy_record={},t.breed_feed_record={},t.broadcast_count=0,t.lastTaskIDs={},t.curTaskIDs={},t.consume_prop={},t.recruit_staff=[],t.appoint_staff={},t.buy_prop={},t.bbq_learn_menu=[],t.trunk_order=0,t.doneTaskIDs=[],t.unlock_module_id=[],t.open_box_by_key={},t.kill_monster_record={},t.new_prop={},t}r(d,c=p.StorageBase),d.prototype.addNewProp=function(t,e){void 0===e&&(e=1),this.new_prop[t]||(this.new_prop[t]=0),this.new_prop[t]+=e,this.async_write_data()},d.prototype.resetNewProp=function(t){this.new_prop[t]=0,this.async_write_data()},d.prototype.addOpenBoxData=function(t,e){void 0===e&&(e=1),this.open_box_by_key[t]||(this.open_box_by_key[t]=0),this.open_box_by_key[t]+=e,this.async_write_data()},d.prototype.addKillData=function(t,e){void 0===e&&(e=1),this.kill_monster_record[t]||(this.kill_monster_record[t]=0),this.kill_monster_record[t]+=e,this.async_write_data(),u.ReportData.instance.report_point(100005,41000021)},d.prototype.resetKillData=function(t){this.kill_monster_record[t]=0,this.async_write_data()},d.prototype.addUnlockModuleID=function(t){this.unlock_module_id.includes(t)||(this.unlock_module_id.push(t),this.async_write_data())},d.prototype.addBBQLearnMenu=function(t){this.bbq_learn_menu.includes(t)||(this.bbq_learn_menu.push(t),this.async_write_data())},d.prototype.addBuyProp=function(t,e){this.buy_prop[t]||(this.buy_prop[t]=0),this.buy_prop[t]+=e,this.async_write_data()},d.prototype.addRecruitStaff=function(t){this.recruit_staff.includes(t)||(this.recruit_staff.push(t),this.async_write_data())},d.prototype.addAppointStaff=function(t){this.appoint_staff[t]||(this.appoint_staff[t]=0),this.appoint_staff[t]++,this.async_write_data()},d.prototype.addCleanObject=function(t,e){this.cleanObjects[t]?this.cleanObjects[t]+=e:this.cleanObjects[t]=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addCollectionObject=function(t,e){this.collectionRecord[t]?this.collectionRecord[t]+=e:this.collectionRecord[t]=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.resetCollectionRecord=function(t){this.collectionRecord[t]=0,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addNPCTradeCount=function(t,e){this.businessManDatas[t]&&this.businessManDatas[t].tradeCound?this.businessManDatas[t].tradeCound+=e:this.businessManDatas[t]={tradeCound:e},this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addBuildRecord=function(t,e){this.buildRecord[t]||(this.buildRecord[t]=0),this.buildRecord[t]+=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addUnlockSlotRecord=function(t,e){this.unlockSlotRecord[t]||(this.unlockSlotRecord[t]=0),this.unlockSlotRecord[t]+=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addProudceRecord=function(t,e){this.produceRecord[t]?this.produceRecord[t]+=e:this.produceRecord[t]=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addHarvestRecord=function(t,e){this.harvestRecord[t]?this.harvestRecord[t]+=e:this.harvestRecord[t]=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.resetHarvestRecord=function(t){this.harvestRecord[t]=0,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.resetHarvestCountRecord=function(t){this.harvest_count_record[t]=0,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.addHarvestCountRecord=function(t,e){this.harvest_count_record[t]?this.harvest_count_record[t]+=e:this.harvest_count_record[t]=e,this.async_write_data(),l.default.emit(s.GameEvent.updateBase)},d.prototype.setReplenish=function(t){this.replenish[t]||(this.replenish[t]=0),this.replenish[t]+=1,this.async_write_data()},d.prototype.setPutStaff=function(){this.put_staff||(this.put_staff=!0,this.async_write_data())},d.prototype.addTen=function(){this.ten+=1,this.async_write_data()},d.prototype.addInteract=function(t){this.decoration_interact[t]||(this.decoration_interact[t]=0),this.decoration_interact[t]+=1,this.async_write_data()},d.prototype.unlock=function(t){this.unlockObjectRecord[t]||(this.unlockObjectRecord[t]=0),this.unlockObjectRecord[t]+=1,this.async_write_data()},d.prototype.getUnlockObjectCount=function(t){return this.unlockObjectRecord[t]||0},d.prototype.addFoodOrderCount=function(){this.food_order_count+=1,this.async_write_data()},d.prototype.addBreedBuyRecord=function(t,e){this.breed_buy_record[t]||(this.breed_buy_record[t]=0),this.breed_buy_record[t]+=e,this.async_write_data()},d.prototype.addBreedFeedRecord=function(t,e){this.breed_feed_record[t]||(this.breed_feed_record[t]=0),this.breed_feed_record[t]+=e,this.async_write_data()},d.prototype.addBroadcastCount=function(){this.broadcast_count+=1,this.async_write_data()},d.prototype.getLastTaskID=function(t){return this.lastTaskIDs[t]||0},d.prototype.setLastTaskID=function(t,e){this.lastTaskIDs[t]=e,this.doneTaskIDs.includes(e)||(this.doneTaskIDs.push(e),this.async_write_data()),this.async_write_data()},d.prototype.getCurTaskID=function(t){return this.curTaskIDs[t]||0},d.prototype.setCurTaskID=function(t,e){this.curTaskIDs[t]=e,this.async_write_data()},d.prototype.addConsumeRecord=function(t,e){e<0?cc.error("addConsumeRecord count error",e):(this.consume_prop[t]||(this.consume_prop[t]=0),this.consume_prop[t]+=e,this.async_write_data())},d.prototype.resetConsumeRecord=function(t){this.consume_prop[t]=0,this.async_write_data()},r=d,a.default=r,cc._RF.pop()},{}],TaskTargetItem:[function(t,e,o){"use strict";cc._RF.push(e,"5c5eeQyPKNPmqGV2yNgenxK","TaskTargetItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("GameMgr"),d=i("IconUtils"),h=i("GuideMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_icon=null,t.lbl_name=null,t.lbl_count=null,t.nod_check=null,t.task=null,t.index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchItem,this)},_.prototype.onDisable=function(){},_.prototype.setTask=function(t,e){this.task=t,this.index=e,this.setData(this.task.config.icons[e],this.task.itemReach[e],this.task.config.condition[e].num),this.setCheck(this.task.itemReach[e]>=this.task.config.condition[e].num)},_.prototype.setData=function(t,e,o){var n;this.getComponent(p.default).setRichByNum(e,o),t&&(n=d.IconUtils.getIconFullPathByName(t))&&this.getComponent(p.default).setIconByPath(n)},_.prototype.setCheck=function(){},_.prototype.onTouchItem=function(){cc.log("\u4efb\u52a1\u6761\u4ef6",this.task.config.condition[this.index].id),1002==u.gm.mapData.guidingID&&u.gm.ui.get_module(u.gm.const.Guide_1002).onGuideEnd(),h.default.getInstance().onTouchTask(this.task,this.index)},s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),s([a(cc.Label)],_.prototype,"lbl_name",void 0),s([a(cc.Label)],_.prototype,"lbl_count",void 0),s([a(cc.Node)],_.prototype,"nod_check",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],TaskTypeData:[function(t,e,o){"use strict";cc._RF.push(e,"aa0afOkegdHbp+TfYyAyQhh","TaskTypeData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("CommonUtils"),r=n("Const"),c=n("GameMgr"),s=n("LvMgr"),l=n("PropMgr"),p=n("EventManager"),u=n("NetUtils"),d=n("NpcMgr"),h=n("TaskRecordData");function _(t){this._lastTaskID=0,this.type=1,this._items=[],this.type=t}_.prototype.addItem=function(t){this._items.push(t)},_.prototype.setLastTaskID=function(t){this._lastTaskID=t},_.prototype.reset=function(){this._items=[]},_.prototype.getCurTask=function(){for(var t=0;t<this._items.length;t++)if(this._items[t].config.id==this._lastTaskID){this._items.splice(0,t+1);break}return this._items[0]&&s.default.getInstance().getLv()>=this._items[0].config.lv&&this._items[0].isEndGuide()?(h.default.getInstance().getCurTaskID(this.type)!=this._items[0].taskID&&(h.default.getInstance().setCurTaskID(this.type,this._items[0].taskID),this.onGetNewTask(this._items[0])),this._items[0]):null},_.prototype.checkIsDone=function(){this._items[0]&&this._items[0].isReach()&&this.accomplishTask(this._items[0])},_.prototype.accomplishTask=function(t){if(t.isReach()){for(var e=0,o=t.config.condition;e<o.length;e++){var n=o[e];n.mission==r.ConditionType.give_npc?l.default.tryConsume([{id:n.id,num:n.num}]):n.mission==r.ConditionType.collect?h.default.getInstance().resetCollectionRecord(n.id):n.mission==r.ConditionType.harvest_times?h.default.getInstance().resetHarvestRecord(n.id):n.mission==r.ConditionType.consume_prop&&h.default.getInstance().resetConsumeRecord(n.id)}l.default.addGainThing(t.config.rewards,!1);var i=a.default.getBaseUI().getTaskItemByID(t.taskID);i&&a.default.fly(i,t.config.rewards),h.default.getInstance().setLastTaskID(this.type,t.taskID),this.setLastTaskID(t.taskID),(i=t.getCondition(r.ConditionType.NPC))&&d.default.getInstance().tryToGetView(i.id,function(t){t.bubble.hideAll()}),t.config.windows_rewards_prop&&0<t.config.windows_rewards_prop.length&&c.gm.ui.showModule(c.gm.const.GetAwardUI,function(e){e.setVideo(t.config.view_allow),e.setData(t.config.windows_rewards_prop),e.callback=function(){e.closeMe()}}),u.ReportData.instance.report_point(100001,t.taskID),p.default.emit(r.GameEvent.updateBase),p.default.emit(r.GameEvent.end_task,t.taskID,t.config.g_id)}},_.prototype.onGetNewTask=function(t){for(var e=0,o=t.config.condition;e<o.length;e++){var n=o[e];n.mission==r.ConditionType.harvest_count?h.default.getInstance().resetHarvestCountRecord(n.id):n.mission==r.ConditionType.kill_monster?h.default.getInstance().resetKillData(n.id):n.mission==r.ConditionType.new_prop&&h.default.getInstance().resetNewProp(n.id)}},n=_,i.default=n,cc._RF.pop()},{}],Test2:[function(t,e){"use strict";var o;cc._RF.push(e,"d63f5q6boNJ8repSSEgpgTb","Test2"),(o=cc._decorator).ccclass,o.property,cc._RF.pop()},{}],TestAStar:[function(t,e,o){"use strict";cc._RF.push(e,"c2600V3hVFI/4EEEZg1i8h5","TestAStar");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("AStar"),r=(s.prototype.put=function(t,e){t.priority=e,this.arr.push(t),this.arr.sort(function(t,e){return e.priority-t.priority})},s.prototype.get=function(){return this.arr.pop()},Object.defineProperty(s.prototype,"size",{get:function(){return this.arr.length},enumerable:!1,configurable:!0}),s);function c(){this.mSize=null,this.mStart=null,this.mEnd=null,this.mStartNode=null,this.mEndNode=null,this.obstacles={},this.nodePool={},this.frontier=null,this.cameForm=new Map,this.costSoFar=new Map}function s(){this.arr=[]}c.prototype.init=function(t,e,o,n){var i=this;void 0===n&&(n=[]),this.mSize=t,this.mStart=e,this.mEnd=o,n.forEach(function(t){i.setObstacles(t.x,t.y)}),this.nodePool={},this.mStartNode=this.createNode(this.mStart.x,this.mStart.y),this.mEndNode=this.createNode(this.mEnd.x,this.mEnd.y)},c.prototype.clean=function(){this.mStartNode=null,this.mEndNode=null},c.prototype.setObstacles=function(t,e){this.checkNode(t,e)&&(this.obstacles[t+"_"+e]=!0)},c.prototype.clearObstacles=function(t,e){delete this.obstacles[t+"_"+e]},c.prototype.clearAllObstacles=function(){this.obstacles={}},c.prototype.checkObstacles=function(t,e){return this.obstacles[t+"_"+e]},c.prototype.checkNode=function(t,e){var o=Math.round(this.mSize.x),n=Math.round(this.mSize.y);return o=t>=this.mStart.x-o&&t<=this.mStart.x+o,n=e>=this.mStart.y-n&&e<=this.mStart.y+n,0<=t&&0<=e&&o&&n},c.prototype.run=function(){(new Date).getTime();var t=this.mStartNode;this.mEndNode,this.frontier=new r,this.frontier.put(t,0),this.cameForm.set(t,null),this.costSoFar.set(t,0)},c.prototype.doFind=function(t){void 0===t&&(t=1);for(var e=(new Date).getTime(),o=!1,n=0;0<this.frontier.size;){var i=this.frontier.get();if(i===this.mEndNode){o=!0;break}for(var a=0,r=this.getNeighbors(i);a<r.length;a++){var c,s=r[a],l=this.costSoFar.get(i)+this.getCost(i,s);(!this.costSoFar.has(s)||l<this.costSoFar.get(s))&&(this.costSoFar.set(s,l),c=this.getCost(s,this.mEndNode),this.frontier.put(s,l+c),this.cameForm.set(s,i)),n++}if(t<=n)break}var p=(new Date).getTime();return cc.log("count:%s \u7ed3\u675f\uff1b\u8017\u65f6%s",n,p-e),Boolean(0==this.frontier.size)||o},c.prototype.getPath=function(){var t=[],e=this.mEndNode;for(t.push(e);this.cameForm.has(e);)(e=this.cameForm.get(e))&&t.push(e);return t},c.prototype.getNeighbors=function(t){var e=[],o=this.getNode(t.x,t.y+1);return o&&e.push(o),(o=this.getNode(t.x,t.y-1))&&e.push(o),(o=this.getNode(t.x-1,t.y))&&e.push(o),(o=this.getNode(t.x+1,t.y))&&e.push(o),(o=this.getNode(t.x-1,t.y+1))&&e.push(o),(o=this.getNode(t.x+1,t.y+1))&&e.push(o),(o=this.getNode(t.x-1,t.y-1))&&e.push(o),(t=this.getNode(t.x+1,t.y-1))&&e.push(t),e},c.prototype.getCost=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},c.prototype.next=function(){},c.prototype.getNode=function(t,e){if(this.checkNode(t,e)&&!this.checkObstacles(t,e)){var o=this.getNodeKey(t,e);return this.nodePool[o]||this.createNode(t,e)}},c.prototype.createNode=function(t,e){var o=this.getNodeKey(t,e);return this.nodePool[o]=new a.AStarNode(t,e),this.nodePool[o]},c.prototype.getNodeKey=function(t,e){return t+"_"+e},n=c,i.default=n,cc._RF.pop()},{}],Test:[function(t,e,o){"use strict";cc._RF.push(e,"81a5ah35fVEFreDAhhzOkIR","Test");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_A=null,t.nod_B=null,t}r(p,s=cc.Component),p.prototype.start=function(){this.nod_A.on(cc.Node.EventType.TOUCH_END,function(){cc.log("a")})},c([l(cc.Node)],p.prototype,"nod_A",void 0),c([l(cc.Node)],p.prototype,"nod_B",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],TileMapUtils:[function(t,e,o){"use strict";cc._RF.push(e,"c1018uuUjNFhYgG8rgEQLcY","TileMapUtils");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("BrowserUtils");function r(){}r.prototype.getPropertiesForGID=function(t,e){return t.getPropertiesForGID(e)},r.prototype.getTileCenter=function(t){var e=t.getMapSize();return t=Math.floor(e.width/2),e=Math.floor(e.height/2),cc.v2(t,e)},r.parseMap=function(t){t=this._parseObjectLayer(t),a.default.creatJsonFile(t,"tmx_data")},r._parseObjectLayer=function(t){var e=t.getMapSize(),o=t.getLayer("object_layer"),n={width:e.width,height:e.height,layers:[]};if(o){for(var i={},a=0;a<e.height;a++)for(var r=0;r<e.width;r++){var c=o.getTileGIDAt(r,a);if(c){if(!(c=t.getPropertiesForGID(c)))return void cc.error("not found property",r,a);i[r+"-"+a]=c}}n.layers.push({name:"object_layer",data:i})}return n},r.getBlock=function(t,e){for(var o=[],n=0;n<e.width;n++)for(var i=0;i<e.height;i++)t.getTileGIDAt(n,i)&&o.push(cc.v2(n,i));return o},r.parseMapInside=function(t,e){cc.log("name:",e);var o=this._parseObjectLayer(t),n=[],i=t.getLayer("block");return i&&(n=this._getBlockJson(i,t.getMapSize())),o.layers.push(n={name:"block",blocks:n}),cc.log(o,e),o},r._getBlockJson=function(t,e){for(var o=[],n=0;n<e.width;n++)for(var i=0;i<e.height;i++)t.getTileGIDAt(n,i)&&o.push(n+"-"+i);return o},r.smallGridSize=cc.size(22,14),n=r,i.default=n,cc._RF.pop()},{}],TimeUtils:[function(t,e,o){"use strict";cc._RF.push(e,"453846D7TdP9b5c3+l0Crjc","TimeUtils");var n=t,i=o;function a(){}Object.defineProperty(i,"__esModule",{value:!0}),n("GameMgr"),n("Utils"),a.getTimeStr=function(t){return(t=t?new Date(t):new Date).getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},a.getTime=function(){return this.timeSeconds?Math.floor(this.timeSeconds):Math.floor((new Date).getTime()/1e3)},a.secondsFormat=function(t){return{hour:Math.floor(t/3600),minute:Math.floor(t%3600/60),second:t%60}},a.isOneDay=function(t,e){return new Date(t).toDateString()===new Date(e).toDateString()},a.getDay=function(){return new Date(1e3*this.getTime()).toDateString()},a.getNetTime=function(t){this.getTimeStr(Date.now()),t&&t({ResultCode:0,msg:"\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4\u6210\u529f",data:Math.floor(Date.now()/1e3)})},a.updateTime=function(t){this.timeSeconds&&(this.timeSeconds+=t)},a.resetTimeSecond=function(){this.timeSeconds=0},a.timeSeconds=0,n=a,i.default=n,cc._RF.pop()},{}],TmxParse:[function(t,e,o){"use strict";cc._RF.push(e,"d297bSKfLpLRptS9E2rTrD/","TmxParse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("TileMapUtils");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.tileMap=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=cc.Component),u.prototype.start=function(){p.default.parseMap(this.tileMap)},s([a(cc.TiledMap)],u.prototype,"tileMap",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],ToolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"eb796AYHxZPgbfkz7pdG7gP","ToolMgr");var n,i,a=t,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},i=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.Tool=void 0;var c,s=a("GameMgr"),l=(i(p,c=a("Singleton").default),p.prototype.hasTool=function(t){return s.gm.localData.tools[t]&&s.gm.localData.tools[t].isStudy&&s.gm.localData.tools[t].toolLv},p.prototype.getCurTool=function(t){return this.hasTool(t)?(this._tool[t]||(this._tool[t]=new u(t)),this._tool[t]):null},p.prototype.getCurConfig=function(t){return this.getConfigs(t)[s.gm.localData.tools[t].toolLv-1]},p.prototype.getNextLvTool=function(t){var e=this.getConfigByID(t);if(!e)return null;if(0==(t=this.getConfigs(e.tool_class)).length)return null;for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i.lv==e.lv+1)return i}},p.prototype.getConfigs=function(t){for(var e=[],o=0,n=s.gm.config.data.ToolsUpgrade;o<n.length;o++){var i=n[o];i.tool_class==t&&e.push(i)}return e},p.prototype.getConfigByID=function(t){for(var e=0,o=s.gm.config.data.ToolsUpgrade;e<o.length;e++){var n=o[e];if(n.prop_id==t)return n}},p);function p(){var t=null!==c&&c.apply(this,arguments)||this;return t._tool={},t}r.default=l;var u=(d.prototype.getCurLvConfig=function(){return l.getInstance().getCurConfig(this.toolType)},d.prototype.getDruability=function(){return s.gm.localData.tools[this.toolType].durability||(s.gm.localData.tools[this.toolType].durability=0),s.gm.localData.tools[this.toolType].durability},d.prototype.use=function(){this.isDruability()?(s.gm.localData.tools[this.toolType].durability-=this.getCurLvConfig().use_time_coast,s.gm.localData.saveByKey("tools")):cc.error("durability not enough",s.gm.localData.tools[this.toolType])},d.prototype.isDruability=function(){return this.getDruability()>=this.getCurLvConfig().use_time_coast},d.prototype.fix=function(t){void 0===t&&(t=!1),s.gm.localData.tools[this.toolType].durability=this.getCurLvConfig().tool_use_time,s.gm.localData.tools[this.toolType].repair_time=s.gm.localData.tools[this.toolType].repair_time||0,t||(s.gm.localData.tools[this.toolType].repair_time+=1),s.gm.localData.saveByKey("tools")},d);function d(t){this.toolType=t}r.Tool=u,cc._RF.pop()},{}],ToolNeedItem:[function(t,e,o){"use strict";cc._RF.push(e,"a8773D7rgNHbZhGnW56qLE1","ToolNeedItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonDiamondNeed"),d=i("CommonPropItem"),h=i("ListItem");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.item=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},_.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},_.prototype.setData=function(t){this.data=t,this.item.setData(t);var e=this.getComponent(u.default);e&&e.setData(t)},_.prototype.onTouch=function(){cc.log(this.data.id),p.default.getInstance().dealByItemID(this.data.id)},s([a(d.default)],_.prototype,"item",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],ToolRepairLayer:[function(t,e,o){"use strict";cc._RF.push(e,"cad3aiLNb9A0ZF2186bdqFA","ToolRepairLayer");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Bridge"),d=i("Const"),h=i("Formula"),_=i("GameMgr"),f=i("PropMgr"),g=i("ActionUtils"),y=i("IconUtils"),m=i("EventManager"),v=i("SpineUtils"),b=i("ToolMgr"),I=i("ToolNeedItem");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.spr_target=null,t.nod_items_layer=null,t.pro_repair=null,t.btn_repair=null,t.nod_stars=null,t.lbl_pro=null,t.sp_role=null,t.toolClass=d.ToolClass.liandao,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=cc.Component),D.prototype.onEnable=function(){m.default.on(d.GameEvent.adDone,this.onAdEnd,this)},D.prototype.onDisable=function(){m.default.off(d.GameEvent.adDone,this.onAdEnd,this)},D.prototype.setData=function(t){this.config=b.default.getInstance().getCurConfig(t),this.toolClass=t,0==_.gm.localData.tools[this.toolClass].durability&&g.default.btnRepairShake(this.btn_repair),this.updateUI()},D.prototype.updateUI=function(){for(var t=b.default.getInstance().getCurTool(this.toolClass),e=_.gm.localData.tools[this.toolClass].toolLv,o=0;o<this.nod_stars.children.length;o++)this.nod_stars.children[o].active=o+1<=e;var n=this.config;y.IconUtils.setPropSprite(n.prop_id,this.spr_target);var i=this.getNewFixItems(n.fix_need);for(o=0;o<i.length;o++)this.nod_items_layer.children[o].getComponent(I.default).setData(i[o]);this.pro_repair.progress=t.getDruability()/n.tool_use_time,this.lbl_pro.string=t.getDruability()+"/"+n.tool_use_time},D.prototype.onBtnMake=function(){var t,e,o,n=this;0==_.gm.localData.tools[this.toolClass].durability?(e=this.config,t=this.getNewFixItems(e.fix_need),o=b.default.getInstance().getCurTool(this.toolClass),(e=f.default.getNotEnougthItem(e.fix_need))&&32==f.default.getConfigByPropID(Number(e.id)).prop_type?_.gm.ui.showModule(_.gm.const.ToolRoomTipUI,function(t){t.setData(n.toolClass,2)}):f.default.tryConsume(t,!0)&&(o.fix(),this.updateUI(),(o=_.gm.ui.get_module(_.gm.const.ToolRoomUI)).updateUI(),o.ani.node.active=!0,o.ani.play("eff_gran"),this.playAni())):_.gm.ui.showNotice("\u4e0d\u9700\u8981\u7ef4\u4fee")},D.prototype.playAni=function(){var t=this;this.sp_role.setAnimation(0,"make",!1),this.toolClass==d.ToolClass.futou?v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60031_1"):this.toolClass==d.ToolClass.liandao?v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60021_1"):this.toolClass==d.ToolClass.gaozi?v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60041_1"):this.toolClass==d.ToolClass.chanzi?v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60071_1"):this.toolClass==d.ToolClass.chutou?v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60001_1"):this.toolClass==d.ToolClass.gongnu&&v.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60081_1"),this.sp_role.setCompleteListener(function(){t.sp_role.setAnimation(0,"standby",!0)})},D.prototype.onBtnAddRepair=function(){var t=this;p.default.click(),_.gm.localData.tools[this.toolClass].durability!=this.config.tool_use_time?_.gm.ui.showModule(_.gm.const.ToolRoomTipUI,function(e){e.setData(t.toolClass,2)}):_.gm.ui.showNotice("\u8010\u4e45\u5df2\u6ee1\uff0c\u65e0\u6cd5\u6062\u590d\u8010\u4e45\u5ea6")},D.prototype.onAdEnd=function(t){t==u.AdCodeTable.tool_room_repair&&(b.default.getInstance().getCurTool(this.toolClass).fix(!0),this.updateUI(),(t=_.gm.ui.get_module(_.gm.const.ToolRoomUI)).updateUI(),t.ani.node.active=!0,t.ani.play("eff_gran"),this.playAni())},D.prototype.getNewFixItems=function(t){return h.Formula.getCountByGainthing(t,1,this.toolClass)},s([a(cc.Sprite)],D.prototype,"spr_target",void 0),s([a(cc.Node)],D.prototype,"nod_items_layer",void 0),s([a(cc.ProgressBar)],D.prototype,"pro_repair",void 0),s([a(cc.Node)],D.prototype,"btn_repair",void 0),s([a(cc.Node)],D.prototype,"nod_stars",void 0),s([a(cc.Label)],D.prototype,"lbl_pro",void 0),s([a(sp.Skeleton)],D.prototype,"sp_role",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],ToolRoomTipUI:[function(t,e,o){"use strict";cc._RF.push(e,"f387fq/YtZLtZh+35eby9kQ","ToolRoomTipUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Bridge"),u=i("CommonData"),d=i("CommonUtils"),h=i("Const"),_=i("ReplacementModel"),f=i("IconUtils"),g=i("GameModule"),y=i("SpineUtils");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_title=null,t.rich=null,t.lbl_tip=null,t.nod_tip=null,t.lbl_sub_title=null,t.spr_bg=null,t.sp_role=null,t.type=1,t.curToolType=h.ToolClass.futou,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=g.default),m.prototype.setData=function(t,e){this.curToolType=t,this.type=e,this.updateUI()},m.prototype.updateUI=function(){1==this.type?(this.lbl_title.string="\u5de5\u5177\u719f\u7ec3\u5ea6",this.lbl_sub_title.string="\u7cdf\u7cd5\uff0c\u5de5\u5177\u719f\u7ec3\u5ea6\u4e0d\u591f!",this.lbl_tip.string="\u589e\u52a0\u719f\u7ec3\u5ea6",this.nod_tip.active=!0,f.IconUtils.setSpriteFrame(h.BundleName.MAIN_UI,"texture/tool_room/tool_room_tip/bg",this.spr_bg),this.sp_role.node.active=!0,this.rich.node.active=!0,this.updateRole()):(this.lbl_title.string="\u7ef4\u4fee",this.lbl_sub_title.string="\u7cdf\u7cd5\uff0c\u5de5\u5177\u8010\u4e45\u5ea6\u4e0d\u591f!",this.lbl_tip.string="\u8865\u6ee1\u8010\u4e45\u5ea6",this.nod_tip.active=!1,f.IconUtils.setSpriteFrame(h.BundleName.MAIN_UI,"texture/tool_room/tool_room_tip/bg_class_0",this.spr_bg),this.sp_role.node.active=!1,this.rich.node.active=!1)},m.prototype.updateRole=function(){var t=this;d.default.loadMainRoleSpine(this.sp_role,function(){_.default.createBySpine(t.sp_role,u.default.getInstance().dressing)}),this.curToolType==h.ToolClass.futou?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60031_1")):this.curToolType==h.ToolClass.liandao?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60021_1")):this.curToolType==h.ToolClass.gaozi?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60041_1")):this.curToolType==h.ToolClass.chanzi?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60071_1")):this.curToolType==h.ToolClass.chutou?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60001_1")):this.curToolType==h.ToolClass.gongnu?(this.sp_role.setAnimation(0,"standby",!0),y.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60081_1")):this.sp_role.setAnimation(0,"standby",!0)},m.prototype.onBtnConfirm=function(){var t=this,e=1==this.type?40000011:40000012;d.default.showVideo(function(){1==t.type?p.default.playAD(p.AdCodeTable.tool_room_mastery):p.default.playAD(p.AdCodeTable.tool_room_repair)},e),this.closeMe()},s([a(cc.Label)],m.prototype,"lbl_title",void 0),s([a(cc.RichText)],m.prototype,"rich",void 0),s([a(cc.Label)],m.prototype,"lbl_tip",void 0),s([a(cc.Node)],m.prototype,"nod_tip",void 0),s([a(cc.Label)],m.prototype,"lbl_sub_title",void 0),s([a(cc.Sprite)],m.prototype,"spr_bg",void 0),s([a(sp.Skeleton)],m.prototype,"sp_role",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],ToolRoomUI:[function(t,e,o){"use strict";cc._RF.push(e,"b5d28rPdXJOD5jo0lu7ZTYO","ToolRoomUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("NodStars"),f=i("ReplacementModel"),g=i("IconUtils"),y=i("GameModule"),m=i("SpineUtils"),v=i("Finger"),b=i("GuideMgr"),I=i("ToolMgr"),D=i("ToolRepairLayer"),C=i("ToolStudyLayer"),O=i("ToolUpgradeLayer");function w(){var t=null!==l&&l.apply(this,arguments)||this;return t.tog_tools=null,t.tog_func=null,t.nod_study_layer=null,t.nod_upgrade_layer=null,t.nod_repair_layer=null,t.nod_close=null,t.ani=null,t.sp_role=null,t.upgrade_btn_finger=null,t.curToolType=d.ToolClass.liandao,t.func_index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(w,l=y.default),w.prototype.setData=function(t,e){var o=this;void 0===t&&(t=d.ToolClass.liandao),void 0===e&&(e=0),this.curToolType=t,this.func_index=e,this.scheduleOnce(function(){var t;b.default.getInstance().touchCondition.mission==d.ConditionType.have_prop&&(t=I.default.getInstance().getConfigByID(b.default.getInstance().touchCondition.id))?(o.curToolType=t.tool_class,o.func_index=0,o.updateUI(),o.upgrade_btn_finger.showFinger(!0,!0)):o.updateUI()})},w.prototype.onEnable=function(){this.ani.node.active=!1,u.default.getBaseUI().hideRight(),u.default.getBaseUI().hideLeft()},w.prototype.onDisable=function(){},w.prototype.hide=function(){l.prototype.hide.call(this),b.default.getInstance().resetTouchCondition(),u.default.getBaseUI().showUI()},w.prototype.updateUI=function(){for(var t=this,e=0,o=0;o<M.length;o++)if(this.curToolType==M[o].toolType){e=o;break}this.tog_tools.toggleItems[e].check(),this.tog_func.toggleItems[this.func_index].check(),this.nod_upgrade_layer.active=!1,this.nod_study_layer.active=!1,this.nod_repair_layer.active=!1;var n=h.gm.localData.tools[this.curToolType];for(n||(h.gm.localData.tools[this.curToolType]={isStudy:!1,toolLv:0,repair_time:0},n=h.gm.localData.tools[this.curToolType]),0==this.func_index?n.isStudy?(this.nod_upgrade_layer.active=!0,this.nod_study_layer.active=!1,this.nod_upgrade_layer.getComponent(O.default).setData(this.curToolType)):(this.nod_upgrade_layer.active=!1,this.nod_study_layer.active=!0,this.nod_study_layer.getComponent(C.default).setData(this.curToolType,function(){t.updateUI()})):1==this.func_index&&(this.nod_repair_layer.active=!0,this.nod_repair_layer.getComponent(D.default).setData(this.curToolType)),o=0;o<this.tog_tools.toggleItems.length;o++){var i=this.tog_tools.toggleItems[o].node.getChildByName("nod_stars");i.active=!1,i.scale=.6;var a=this.tog_tools.toggleItems[o].node.getChildByName("spr_icon").getComponent(cc.Sprite);this.curToolType==M[o].toolType?(i.scale=.8,g.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"texture/tool_room/tool_"+M[o].toolType+"_check",a)):g.IconUtils.setSpriteFrame(d.BundleName.MAIN_UI,"texture/tool_room/tool_"+M[o].toolType+"_uncheck",a),h.gm.localData.tools[M[o].toolType]&&1<=h.gm.localData.tools[M[o].toolType].toolLv&&(i.active=!0,i.getComponent(_.default).setStarByCommon(h.gm.localData.tools[M[o].toolType].toolLv))}u.default.loadMainRoleSpine(this.sp_role,function(){f.default.createBySpine(t.sp_role,p.default.getInstance().dressing),t.sp_role.setAnimation(0,"standby",!0)}),this.curToolType==d.ToolClass.futou?m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60031_1"):this.curToolType==d.ToolClass.liandao?m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60021_1"):this.curToolType==d.ToolClass.gaozi?m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60041_1"):this.curToolType==d.ToolClass.chanzi?m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60071_1"):this.curToolType==d.ToolClass.chutou?m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60001_1"):this.curToolType==d.ToolClass.gongnu&&m.default.changePartialCloth(this.sp_role,"f_broom","default","role_tool_60081_1")},w.prototype.onToolsToggle=function(t,e){this.curToolType=Number(e),this.func_index=0,this.updateUI()},w.prototype.onFuncToggle=function(t,e){var o=h.gm.localData.tools[this.curToolType];o&&o.isStudy&&o.toolLv?this.func_index=Number(e):this.func_index=0,this.updateUI()},s([a(cc.ToggleContainer)],w.prototype,"tog_tools",void 0),s([a(cc.ToggleContainer)],w.prototype,"tog_func",void 0),s([a(cc.Node)],w.prototype,"nod_study_layer",void 0),s([a(cc.Node)],w.prototype,"nod_upgrade_layer",void 0),s([a(cc.Node)],w.prototype,"nod_repair_layer",void 0),s([a(cc.Node)],w.prototype,"nod_close",void 0),s([a(cc.Animation)],w.prototype,"ani",void 0),s([a(sp.Skeleton)],w.prototype,"sp_role",void 0),s([a(v.default)],w.prototype,"upgrade_btn_finger",void 0),i=s([i],w),r.default=i;var M=[{toolType:d.ToolClass.liandao},{toolType:d.ToolClass.futou},{toolType:d.ToolClass.gaozi},{toolType:d.ToolClass.chanzi},{toolType:d.ToolClass.chutou},{toolType:d.ToolClass.gongnu}];cc._RF.pop()},{}],ToolRoom:[function(t,e,o){"use strict";cc._RF.push(e,"0dfd1kbPDNAypAmv3EddwfY","ToolRoom");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameObject");function p(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(p,s=l.GameObject),a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],p),r.default=a,cc._RF.pop()},{}],ToolStudyLayer:[function(t,e,o){"use strict";cc._RF.push(e,"92865PrayJO+ZdSNxmAyjIM","ToolStudyLayer");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("GameMgr"),d=i("LvMgr"),h=i("PropMgr"),_=i("IconUtils");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_cost=null,t.lbl_desc=null,t.spr_icon=null,t.config=null,t.callback=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=cc.Component),f.prototype.onEnable=function(){},f.prototype.onDisable=function(){},f.prototype.onBtnStudy=function(){d.default.getInstance().getLv()<this.config.level?u.gm.ui.showNotice("\u9700\u8981\u5230\u8fbe Lv."+this.config.level):h.default.tryConsume([this.config.need_prop],!0)&&(u.gm.localData.setUnlockTools(this.config.tool_class),this.callback())},f.prototype.setData=function(t,e){this.callback=e,this.config=p.ToolsUnlock.getConfig(t),this.updateUI()},f.prototype.updateUI=function(){this.lbl_cost.string=this.config.need_prop.num+"",this.lbl_desc.string=this.config.porp_name+"\u5b66\u4e60",_.IconUtils.setPropSprite(this.config.need_prop.id,this.spr_icon)},s([a(cc.Label)],f.prototype,"lbl_cost",void 0),s([a(cc.Label)],f.prototype,"lbl_desc",void 0),s([a(cc.Sprite)],f.prototype,"spr_icon",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],ToolUpgradeLayer:[function(t,e,o){"use strict";cc._RF.push(e,"1f458zqYRhKy6rXjPOgrv7+","ToolUpgradeLayer");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("Bridge"),d=i("CommonUtils"),h=i("Const"),_=i("GameMgr"),f=i("PropMgr"),g=i("IconUtils"),y=i("EventManager"),m=i("GetAwardUI"),v=i("GuideMgr"),b=i("ToolMgr"),I=i("ToolNeedItem");function D(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_desc=null,t.spr_target=null,t.lbl_coin=null,t.nod_items_layer=null,t.lbl_upgrade=null,t.pro_mastery=null,t.lbl_desc=null,t.btn_upgrade=null,t.nod_stars=null,t.nod_icon=null,t.lbl_pro_mastery=null,t.nod_mastery_need=null,t.configs=[],t.toolClass=h.ToolClass.liandao,t.maxLv=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(D,l=cc.Component),D.prototype.onEnable=function(){y.default.on(h.GameEvent.adDone,this.onAdEnd,this)},D.prototype.onDisable=function(){y.default.off(h.GameEvent.adDone,this.onAdEnd,this)},D.prototype.setData=function(t){this.configs=b.default.getInstance().getConfigs(t),this.toolClass=t,this.maxLv=this.configs.length,this.updateUI()},D.prototype.updateUI=function(){var t=_.gm.localData.tools[this.toolClass].toolLv;this.lbl_upgrade.string=0==t?"\u5236\u9020":"\u5347\u7ea7";for(var e=0;e<this.nod_stars.children.length;e++)this.nod_stars.children[e].active=e+1<=t;var o=this.configs[t-1];if(t<this.maxLv){this.nod_items_layer.active=!0,this.nod_desc.active=!0,this.btn_upgrade.active=!0;var n=this.configs[t];for(g.IconUtils.setPropSprite(n.prop_id,this.spr_target),e=0;e<3;e++)this.nod_items_layer.children[e].active=!1,n.need_prop&&n.need_prop[e]&&(this.nod_items_layer.children[e].active=!0,this.nod_items_layer.children[e].getComponent(I.default).setData(n.need_prop[e]));this.nod_icon.active=Boolean(n.cost_coin),this.lbl_coin.node.active=Boolean(n.cost_coin),this.lbl_coin.string=n.cost_coin+"",n.level_up_describe&&""!=n.level_up_describe?this.nod_desc.active=!0:this.nod_desc.active=!1;var i=d.default.getMasteryNeed(n.mastery_nees);this.nod_mastery_need.active=Boolean(n.mastery_nees&&n.mastery_nees.id),n.mastery_nees&&n.mastery_nees.id&&(this.pro_mastery.progress=f.default.getPropCount(n.mastery_nees.id)/i,this.lbl_pro_mastery.string=f.default.getPropCount(n.mastery_nees.id)+"/"+i)}else this.nod_items_layer.active=!1,this.nod_desc.active=!1,this.btn_upgrade.active=!1;o&&(this.lbl_desc.string=o.level_up_describe)},D.prototype.onBtnMake=function(){var t=this;v.default.getInstance().endGuide(1005),v.default.getInstance().endGuide(1008),v.default.getInstance().endGuide(1016),v.default.getInstance().endGuide(1017);var e=_.gm.localData.tools[this.toolClass].toolLv,o=this.configs[e];d.default.checkMastery([o.mastery_nees],!1)?(e=[],o.need_prop&&e.push.apply(e,o.need_prop),o.mastery_nees&&e.push({id:o.mastery_nees.id,num:d.default.getMasteryNeed(o.mastery_nees)}),e.push({id:h.CommonPropID.coin,num:o.cost_coin}),f.default.tryConsume(e,!0)&&(f.default.addProps([{id:o.prop_id,num:1}],!1),_.gm.ui.showModule(_.gm.const.GetToolsUI,function(t){t.setVideo(!1),t.setData({file:h.ThingType.normal,id:o.prop_id,num:1},m.GetAwardType.open)}),this.updateUI(),(e=_.gm.ui.get_module(_.gm.const.ToolRoomUI)).updateUI(),e.ani.node.active=!0,e.ani.play("eff_gran"))):_.gm.ui.showModule(_.gm.const.ToolRoomTipUI,function(e){e.setData(t.toolClass,1)})},D.prototype.onBtnAddMastery=function(){var t=this;p.default.click(),_.gm.ui.showModule(_.gm.const.ToolRoomTipUI,function(e){e.setData(t.toolClass,1)})},D.prototype.onAdEnd=function(t){t==u.AdCodeTable.tool_room_mastery&&(t=_.gm.localData.tools[this.toolClass].toolLv,(t=this.configs[t]).mastery_nees.id,f.default.addProps([{id:t.mastery_nees.id,num:20}],!0),this.updateUI())},s([a(cc.Node)],D.prototype,"nod_desc",void 0),s([a(cc.Sprite)],D.prototype,"spr_target",void 0),s([a(cc.Label)],D.prototype,"lbl_coin",void 0),s([a(cc.Node)],D.prototype,"nod_items_layer",void 0),s([a(cc.Label)],D.prototype,"lbl_upgrade",void 0),s([a(cc.ProgressBar)],D.prototype,"pro_mastery",void 0),s([a(cc.Label)],D.prototype,"lbl_desc",void 0),s([a(cc.Node)],D.prototype,"btn_upgrade",void 0),s([a(cc.Node)],D.prototype,"nod_stars",void 0),s([a(cc.Node)],D.prototype,"nod_icon",void 0),s([a(cc.Label)],D.prototype,"lbl_pro_mastery",void 0),s([a(cc.Node)],D.prototype,"nod_mastery_need",void 0),i=s([i],D),r.default=i,cc._RF.pop()},{}],TouchItem:[function(t,e,o){"use strict";cc._RF.push(e,"23ff8AONSNCOJDuPVppWtdQ","TouchItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("NodePoolItem"),u=i("GameMgr");function d(){var t=null!==l&&l.apply(this,arguments)||this;return t.ani=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(d,l=p.NodePoolItem),d.prototype.play=function(){var t=this;this.ani.play("screen_on"),this.scheduleOnce(function(){u.gm.pool.put(t.node)},.5)},s([a(cc.Animation)],d.prototype,"ani",void 0),i=s([i],d),r.default=i,cc._RF.pop()},{}],TouchUI:[function(t,e,o){"use strict";cc._RF.push(e,"3422c5nA8lMeZnE7oHouPyX","TouchUI");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("Const"),p=a("GameMgr"),u=a("TouchItem");function d(){return null!==s&&s.apply(this,arguments)||this}a=(n=cc._decorator).ccclass,n.property,c(d,s=cc.Component),d.prototype.onLoad=function(){p.gm.pool.init(l.Contents.TouchItem.bundleName,l.Contents.TouchItem.loadPath,u.default),this.node.on(cc.Node.EventType.TOUCH_END,this.show,this),this.node._touchListener.setSwallowTouches(!1)},d.prototype.show=function(t){var e=this,o=(t=t.getLocation(),this.node.convertToNodeSpaceAR(t));p.gm.pool.async_get(l.Contents.TouchItem.bundleName,l.Contents.TouchItem.loadPath,u.default,function(t){e.node.addChild(t.node),t.node.x=o.x,t.node.y=o.y,t.play()})},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],d),r.default=a,cc._RF.pop()},{}],TruckData:[function(t,e,o){"use strict";cc._RF.push(e,"6f8978TYklOKamtk8wpRqzS","TruckData");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("Const"),r=n("EventManager"),c=n("TruckOrderMgr"),s=n("ConfigUtils"),l=n("TimeUtils"),p=n("GameMgr");function u(t){this.state=a.TraderActionState.none,this.order=null,this.line=null,this.foodOrderData=null,this.npcID=t,this.config=s.NPCDataUtils.getConfigByID(t)}u.prototype.addLine=function(t){this.line=t},u.prototype.setOrder=function(t){this.order=t},u.prototype.pay=function(){this._endOrder()},u.prototype._endOrder=function(){p.gm.localData.truck_order.end_time=l.default.getTime(),this.changeState(a.TraderActionState.leave)},u.prototype.changeState=function(t,e){void 0===e&&(e=!1),(t>this.state||e)&&this._setState(t)},u.prototype._setState=function(t){this.state=t,this.state==a.TraderActionState.leave?c.default.getInstance().clearOrder():this.state==a.TraderActionState.wait_for_trading||(this.state,a.TraderActionState.end),r.default.emit(a.GameEvent.change_businessman_state,this.npcID)},n=u,i.default=n,cc._RF.pop()},{}],TruckMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6b3c1v5fuhB57TZxP6pvL+P","TruckMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Singleton"),l=i("TruckData"),p=i("Const"),u=i("GameMgr"),d=i("Line"),h=i("AssetMgr"),_=i("TruckView");function f(){var t=null!==c&&c.apply(this,arguments)||this;return t.truckView=null,t.truckData=null,t}r(f,c=s.default),f.prototype.create=function(t,e){var o=this;this.truckData||(this.truckData=new l.default(40001),this.truckData.setOrder(t),h.default.getInstance().getResAsyn(p.BundleName.MAIN_UI,"prefabs/npc/npc_truck",cc.Prefab,function(t){var n=cc.instantiate(t);(t=n.getComponent(_.default)).data=o.truckData,n.parent=u.gm.mainUI.map_object_layer,n.active=!0,t.show(!1),o.truckData.addLine(d.default.createTruckPath()),n=o.truckData.line.getBegin(),t.setGridPos(n.gridPos),o.truckView=t,e(t)}))},f.prototype.reset=function(){},r=f,a.default=r,cc._RF.pop()},{}],TruckOrderMgr:[function(t,e,o){"use strict";cc._RF.push(e,"aa5c7ho7XlPLZ+p/Mur3Web","TruckOrderMgr");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("LvMgr"),u=i("PropMgr"),d=i("Singleton"),h=i("MathUtils"),_=i("TimeUtils"),f=i("TaskRecordData"),g=i("TruckMgr"),y=i("TruckOrder");function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.NewOrderTime=600,t.RemainOrderTime=1800,t.dealing=!1,t}r(m,c=d.default),m.prototype.loadData=function(){var t;l.gm.localData.truck_order.end_time+this.NewOrderTime<=_.default.getTime()?(l.gm.localData.truck_order.items=[],this.tryCreateNewOrder()):0<l.gm.localData.truck_order.items.length&&(t=y.default.createByItems(l.gm.localData.truck_order.items),g.default.getInstance().create(t,function(e){var o=e.data.line.getNextPoint();e.setGridPos(o.gridPos),e.data.changeState(s.TraderActionState.wait_for_trading),l.gm.localData.truck_order.items=t.items,l.gm.localData.truck_order.lottery_data.length<=0&&y.default.createTruckLottery(),l.gm.localData.truck_order.price||(l.gm.localData.truck_order.price=u.default.countItemsPrice(t.items,s.SellType.shop)),l.gm.localData.truck_order.left_count||(l.gm.localData.truck_order.left_count=0),l.gm.localData.truck_order.turn_count||(l.gm.localData.truck_order.turn_count=0),l.gm.localData.saveByKey("truck_order")}))},m.prototype.clearOrder=function(){l.gm.localData.truck_order.items=[],l.gm.localData.saveByKey("truck_order")},m.prototype.tryCreateNewOrder=function(){var t=this;if(!(0<l.gm.localData.truck_order.items.length)&&f.default.getInstance().unlockObjectRecord[s.SpecialObjectID.stall]&&f.default.getInstance().unlockObjectRecord[s.SpecialObjectID.wholesale]){for(var e,o,n=[],i=0,a=l.gm.config.data.TruckOrders;i<a.length;i++){var r=a[i];p.default.getInstance().getLv()>=r.level&&n.push(r)}0<n.length&&(e=h.default.randomNum(0,n.length-1),o=y.default.createByConfig(n[e]),g.default.getInstance().create(o,function(e){e.data.changeState(s.TraderActionState.goForward),l.gm.localData.truck_order.start_time=_.default.getTime(),l.gm.localData.truck_order.end_time=_.default.getTime()+t.RemainOrderTime,l.gm.localData.truck_order.items=o.items,l.gm.localData.truck_order.price=u.default.countItemsPrice(o.items,s.SellType.shop),y.default.createTruckLottery(),l.gm.localData.truck_order.left_count=0,l.gm.localData.truck_order.turn_count=0,l.gm.localData.saveByKey("truck_order")}))}},m.prototype.check=function(){var t;!this.dealing&&l.gm.localData.truck_order&&l.gm.localData.truck_order.start_time&&l.gm.localData.truck_order.end_time&&(t=_.default.getTime(),g.default.getInstance().truckData?g.default.getInstance().truckView&&g.default.getInstance().truckView.data.state!=s.TraderActionState.leave&&t>=l.gm.localData.truck_order.end_time&&t<l.gm.localData.truck_order.end_time+this.NewOrderTime&&(g.default.getInstance().truckView.data.changeState(s.TraderActionState.leave),g.default.getInstance().truckView.spine.setAnimation(0,"walk_empty",!0)):t>=l.gm.localData.truck_order.end_time+this.NewOrderTime&&this.tryCreateNewOrder())},r=m,a.default=r,cc._RF.pop()},{}],TruckOrderUI:[function(t,e,o){"use strict";cc._RF.push(e,"755d2tZndJDL4tps7uJkz9c","TruckOrderUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ChannelManager"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr"),_=i("Utils"),f=i("List"),g=i("EventManager"),y=i("GameModule"),m=i("StringUtil"),v=i("DailyTaskData"),b=i("OrderNeedItem"),I=i("ShelfMgr"),D=i("TaskRecordData"),C=i("TruckMgr"),O=i("TruckOrder"),w=i("TruckOrderMgr");function M(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.lbl_name=null,t.lbl_coin=null,t.lbl_truck_cd=null,t.percent=null,t.lbl_list=[],t.get_node_list=[],t.free_node=null,t.share_node=null,t.video_node=null,t.left_count=null,t.rotate_node=null,t.items=[],t.last_reward_index=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(M,l=y.default),M.prototype.onEnable=function(){w.default.getInstance().dealing=!0,this.rotate_node.rotation=22.5,this.last_reward_index=0},M.prototype.onDisable=function(){w.default.getInstance().dealing=!1},M.prototype.setItems=function(t){this.items=t,this.updateUI()},M.prototype.updateUI=function(){this.list.numItems=this.items.length,this.lbl_name.string="",this.show_info()},M.prototype.onRender=function(t,e){t.getComponent(b.default).setData(this.items[e],O.default.getCoinAdd(d.TruckLotteryEnum.item_add))},M.prototype.onBtnSale=function(){var t;I.default.getInstance().manualSellToBusinessman(this.items,Math.floor(h.gm.localData.truck_order.price*(O.default.getCoinAdd(d.TruckLotteryEnum.coin_add)+100)/100),O.default.getCoinAdd(d.TruckLotteryEnum.item_add))?(C.default.getInstance().truckView.data.pay(),v.DailyTaskData.getInstance().trunk_order++,v.DailyTaskData.getInstance().async_write_data(),D.default.getInstance().trunk_order++,D.default.getInstance().async_write_data(),t=O.default.getCoinAdd(d.TruckLotteryEnum.truck_cd),h.gm.localData.truck_order.end_time-=w.default.getInstance().NewOrderTime*t/100,h.gm.localData.saveByKey("truck_order"),g.default.emit(d.GameEvent.updateBase),this.closeMe()):h.gm.ui.showNotice("\u7269\u54c1\u4e0d\u8db3")},M.prototype.show_info=function(){var t=O.default.getCoinAdd(d.TruckLotteryEnum.coin_add),e=O.default.getCoinAdd(d.TruckLotteryEnum.truck_cd),o=O.default.getCoinAdd(d.TruckLotteryEnum.item_add);this.lbl_truck_cd.string="\u4e0b\u8d9f\u5361\u8f66\uff1a"+m.default.countDownFormat_2(Math.floor(w.default.getInstance().NewOrderTime*(1-e/100))),this.lbl_coin.string=m.default.n2k(Math.floor(h.gm.localData.truck_order.price*(t+100)/100)),this.percent.string="<b><color=#FFFFFF><outline color=#743315 width=2>(\u91d1\u5e01\u52a0\u6210\uff1a",0<t?this.percent.string+="<color=#79F45C><outline color=#408702 width=2>+"+t+"%</outline></color>":0==t?this.percent.string="":this.percent.string+="<color=#FF5B5B><outline color=#743315 width=2>-"+-t+"%</outline></color>",0<e&&(""==this.percent.string?this.percent.string="<b><color=FFFFFF><outline color=#743315 width=2>(":this.percent.string+=",",this.percent.string+="\u5361\u8f66cd:<color=#79F45C><outline color=#408702 width=2>-"+e+"%</outline></color>"),0<o&&(""==this.percent.string?this.percent.string="<b><color=FFFFFF><outline color=#743315 width=2>(":this.percent.string+=",",this.percent.string+="\u7269\u54c1\u6570\u91cf:<color=#79F45C><outline color=#408702 width=2>-"+o+"%</outline></color>"),""!=this.percent.string&&(this.percent.string+=")</outline></color></b>");for(var n=0;n<this.lbl_list.length&&n<h.gm.localData.truck_order.lottery_data.length;++n)h.gm.localData.truck_order.lottery_data[n].type==d.TruckLotteryEnum.coin_add?0<h.gm.localData.truck_order.lottery_data[n].value?this.lbl_list[n].string="\u94b1\u5e01\u52a0\u6210+"+h.gm.localData.truck_order.lottery_data[n].value+"%":this.lbl_lis[n].string="\u94b1\u5e01\u52a0\u6210"+h.gm.localData.truck_order.lottery_data[n].value+"%":h.gm.localData.truck_order.lottery_data[n].type==d.TruckLotteryEnum.truck_cd?this.lbl_list[n].string="\u5361\u8f66cd-"+h.gm.localData.truck_order.lottery_data[n].value+"%":h.gm.localData.truck_order.lottery_data[n].type==d.TruckLotteryEnum.item_add&&(this.lbl_list[n].string="\u7269\u54c1\u6570\u91cf-"+h.gm.localData.truck_order.lottery_data[n].value+"%"),this.get_node_list[n].active=0<h.gm.localData.truck_order.lottery_data[n].state;this.free_node.active=0==h.gm.localData.truck_order.turn_count,this.share_node.active=1==h.gm.localData.truck_order.turn_count,this.video_node.active=1<h.gm.localData.truck_order.turn_count,this.left_count.string="\u5269\u4f59\u6b21\u6570\uff1a"+(this.free_node.active?1:0)},M.prototype.random_index=function(){for(var t=[],e=[],o=0,n=0,i=0;i<h.gm.localData.truck_order.lottery_data.length;++i)h.gm.localData.truck_order.lottery_data[i].state<=0&&(o+=h.gm.localData.truck_order.lottery_data[i].weight,t[n]=o,e[n]=i,n++);var a=_.Utils.math_random(!0,0,o);for(i=0;i<t.length;++i)if(a<t[i])return e[i];return 0},M.prototype.draw_once=function(){var t=this,e=this.random_index();h.gm.localData.truck_order.lottery_data[e].state=1,h.gm.localData.truck_order.turn_count++,h.gm.localData.saveByKey("truck_order");var o=360-45*this.last_reward_index+1080+45*e;this.rotate_node.rotation=45*this.last_reward_index+22.5,this.rotate_node.runAction(cc.sequence(cc.rotateBy(3.8,o).easing(cc.easeCubicActionOut()),cc.callFunc(function(){t.show_info(),h.gm.localData.truck_order.lottery_data[e].type==d.TruckLotteryEnum.item_add&&g.default.emit(d.GameEvent.truck_lottery_item,O.default.getCoinAdd(d.TruckLotteryEnum.item_add)),g.default.emit(d.GameEvent.set_truck_coin)},this)))},M.prototype.checkClick=function(){return 200<=O.default.getCoinAdd(d.TruckLotteryEnum.coin_add)?(h.gm.ui.showNotice("\u94b1\u5e01\u52a0\u6210\u6700\u591a\u53ea\u80fd\u5230200%\u54e6"),!1):80<=O.default.getCoinAdd(d.TruckLotteryEnum.item_add)?(h.gm.ui.showNotice("\u7269\u54c1\u51cf\u5c11\u6700\u591a\u53ea\u80fd\u523080%\u54e6"),!1):99<=O.default.getCoinAdd(d.TruckLotteryEnum.truck_cd)?(h.gm.ui.showNotice("cd\u51cf\u5c11\u6700\u591a\u53ea\u80fd\u5230100%\u54e6"),!1):!O.default.checkLotteryAll()||(h.gm.ui.showNotice("\u90fd\u5df2\u7ecf\u8f6c\u5b8c\u5566\uff0c\u53ef\u4ee5\u53d1\u8f66\u5566"),!1)},M.prototype.onClickTurn=function(){this.checkClick()&&this.draw_once()},M.prototype.onClickShare=function(){var t=this;this.checkClick()&&(v.DailyTaskData.getInstance().share+=1,p.ChannelManager.instance.share_req(function(){t.draw_once()},this))},M.prototype.onClickVideo=function(){var t=this;this.checkClick()&&u.default.showVideo(function(){t.draw_once()})},s([a(f.default)],M.prototype,"list",void 0),s([a(cc.Label)],M.prototype,"lbl_name",void 0),s([a(cc.Label)],M.prototype,"lbl_coin",void 0),s([a(cc.Label)],M.prototype,"lbl_truck_cd",void 0),s([a(cc.RichText)],M.prototype,"percent",void 0),s([a([cc.Label])],M.prototype,"lbl_list",void 0),s([a([cc.Node])],M.prototype,"get_node_list",void 0),s([a(cc.Node)],M.prototype,"free_node",void 0),s([a(cc.Node)],M.prototype,"share_node",void 0),s([a(cc.Node)],M.prototype,"video_node",void 0),s([a(cc.Label)],M.prototype,"left_count",void 0),s([a(cc.Node)],M.prototype,"rotate_node",void 0),i=s([i],M),r.default=i,cc._RF.pop()},{}],TruckOrder:[function(t,e,o){"use strict";cc._RF.push(e,"aee19WOMh1BbJYgPTvKhZNB","TruckOrder");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("ConfigUtils"),r=n("Const"),c=n("Formula"),s=n("GameMgr"),l=n("LocalData"),p=n("LvMgr"),u=n("MathUtils");function d(){this.items=[]}d.createByConfig=function(t){var e=new d;return e.count(t),e},d.createByItems=function(t){var e=new d;return e.items=t,e},d.createTruckLottery=function(){s.gm.localData.truck_order.lottery_data=[];for(var t=0,e=a.PropRandomPool._getConfigByPoolID(s.gm.const.truck_random_pool_id,8);t<e.length;t++){var o=e[t],n=new l.LotteryData;n.type=o.num_min,n.value=o.num_max,n.state=0,n.weight=o.weight,s.gm.localData.truck_order.lottery_data.push(n)}},d.checkLotteryAll=function(){for(var t=0;t<s.gm.localData.truck_order.lottery_data.length;++t)if(s.gm.localData.truck_order.lottery_data[t].state<=0)return!1;return!0},d.getCoinAdd=function(t){for(var e=0,o=0;o<s.gm.localData.truck_order.lottery_data.length;++o)s.gm.localData.truck_order.lottery_data[o].type==t&&0<s.gm.localData.truck_order.lottery_data[o].state&&(e+=s.gm.localData.truck_order.lottery_data[o].value);return t==r.TruckLotteryEnum.coin_add&&200<=e&&(e=200),t==r.TruckLotteryEnum.item_add&&80<=e&&(e=80),t==r.TruckLotteryEnum.truck_cd&&99<=e?99:e},d.prototype.count=function(t){for(var e=u.default.weight(t.number_rate,1)[0].num,o=(e=Math.floor(t.num_coefficient*p.default.getInstance().getLv())+e,t=t.coin*t.coin_coefficient*p.default.getInstance().getLv()*(p.default.getInstance().getLv()+1),(t=c.Formula.getTruckValue(t))/e),n=(o=Math.floor(o),[]),i=0,r=s.gm.config.data.ShelfProperty;i<r.length;i++){var l=r[i];p.default.getInstance().getLv()>=l.lv_need&&n.push(l)}for(var d=u.default.randomArr(n,e),h=[],_=0;_<d.length;_++){var f=d[_].prop_id,g=Math.floor(o/a.PropUtils.getConfigByPropID(f).shop_price);0<g&&h.push({id:f,num:g})}this.items=h},n=d,i.default=n,cc._RF.pop()},{}],TruckView:[function(t,e,o){"use strict";cc._RF.push(e,"df155Z/YqdFZLBqq1r5V5FI","TruckView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("GameMgr"),d=i("IMapPosCtrl"),h=i("MapHelper"),_=i("EventManager"),f=i("TMXUtils"),g=i("Vec2Utils"),y=i("TruckMgr"),m=i("IconUtils"),v=i("StringUtil"),b=i("TruckOrder");function I(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.nod_touch=null,t.nod_foot=null,t.nod_bubble=null,t.spr_icon=null,t.lbl_coin=null,t.data=null,t.stepLen=60,t.stepTime=.6,t.moveTimes=0,t.moveToNextPointEnd=!0,t.posSys=new p.MapPosSys,t}i=(a=cc._decorator).ccclass,a=a.property,c(I,l=d.default),I.prototype.onLoad=function(){this.lbl_coin.string="",_.default.on(p.GameEvent.change_businessman_state,this.onChangeState,this),_.default.on(p.GameEvent.set_truck_coin,this.setCoin,this),this.spine.setCompleteListener(this.onSpineComplete.bind(this)),this.nod_touch.on(cc.Node.EventType.TOUCH_END,this.onTouchView,this),this.onChangeState(this.data.npcID),this.hideBubble()},I.prototype.onDestroy=function(){_.default.off(p.GameEvent.change_businessman_state,this.onChangeState,this),_.default.off(p.GameEvent.set_truck_coin,this.setCoin,this),this.nod_touch.off(cc.Node.EventType.TOUCH_END,this.onTouchView,this)},I.prototype.setCoin=function(){this.data.order&&(this.lbl_coin.string=v.default.n2k(Math.floor(u.gm.localData.truck_order.price*(b.default.getCoinAdd(p.TruckLotteryEnum.coin_add)+100)/100)))},I.prototype.onTouchView=function(t){var e=this;t.stopPropagation(),cc.log(this.data),this.data.state==p.TraderActionState.wait_for_trading&&this.data.order&&u.gm.ui.showModule(u.gm.const.TruckOrderUI,function(t){t.setItems(e.data.order.items)})},I.prototype.playSellAni=function(){this.spine.node.scaleX=Math.abs(this.spine.node.scaleX),this.spine.setSkin("default"),this.spine.setAnimation(0,"give_gifts",!1)},I.prototype.onSpineComplete=function(t){"give_gifts"==(t.animation.name||"")&&this.spine.setAnimation(0,"standby",!0)},I.prototype.setGridPos=function(t){this.setGrid(t),t=f.default.tileToCocos(this.getGrid(),u.gm.mapData.mapSize,u.gm.const.GridSize),this.node.x=t.x,this.node.y=t.y,this.lastPos=t},I.prototype.goForwardPoint=function(){var t;!this.moveToNextPointEnd||(t=this.data.line.getNextPoint())&&(this.moveToNextPointEnd=!1,this.moveOnLine(t.gridPos))},I.prototype.goBack=function(){var t;!this.moveToNextPointEnd||(t=this.data.line.prePoint())&&(this.moveToNextPointEnd=!1,this.moveOnLine(t.gridPos))},I.prototype.moveOnLine=function(t){var e=this,o=f.default.tileToCocos(t,u.gm.mapData.mapSize,u.gm.const.GridSize),n=200/this.getNormalSpeed(),i=g.default.getDistance(cc.v2(this.node.x,this.node.y),o);this.spine.timeScale=n,i/=200,cc.tween(this.node).to(i,{x:o.x,y:o.y}).call(function(){e.moveToNextPointEnd=!0,e.lastPos=o,e._onMoveToOnLine(t)}).start()},I.prototype._onMoveToOnLine=function(t){h.default.sortReq(),this.setGrid(t),this.data?this.data.state==p.TraderActionState.goForward?(this.data.line.onMoveToNextPoint(),this.data.line.getCur().waitPoint?this.onMoveTargetEnd():this.data.line.curIndex<this.data.line.getEndingIndex()&&this.goForwardPoint()):this.data.state==p.TraderActionState.leave&&(this.data.line.onMoveToNextPoint(),this.data.line.getCur().isEnd?(this.show(!1),y.default.getInstance().truckView=null,y.default.getInstance().truckData=null,this.data.changeState(p.TraderActionState.end),this.data=null,this.node.destroy()):this.goForwardPoint()):cc.error("not found data")},I.prototype.onMoveTargetEnd=function(){this.stand(),this.data.changeState(p.TraderActionState.wait_for_trading)},I.prototype.stand=function(){this.spine.timeScale=1,this.spine.setAnimation(0,"standby",!0)},I.prototype.hideBubble=function(){this.nod_bubble.active=!1},I.prototype.showBubble=function(t,e){var o=this;void 0===e&&(e=!0),this.nod_bubble.active=!0,m.IconUtils.setFaceIcon("bubble_icon_"+t,this.spr_icon),e&&this.scheduleOnce(function(){o.nod_bubble.active=!1},.5)},I.prototype.onNothing=function(t){this.data.npcID==Number(t)&&this.showBubble(5)},I.prototype.onChangeState=function(t){t==this.data.npcID&&(this.data.state==p.TraderActionState.goForward?(this.show(),this.goForwardPoint(),this.hideBubble(),this.spine.setAnimation(0,"walk_empty",!0)):this.data.state==p.TraderActionState.leave?(this.hideBubble(),this.data?this.data.line?(this.goForwardPoint(),this.spine.setAnimation(0,"walk_full",!0)):cc.error("not line"):cc.error("not data")):this.data.state==p.TraderActionState.none?this.show(!1):this.data.state==p.TraderActionState.wait_for_trading&&(this.show(),this.spine.setAnimation(0,"standby_empty",!0),this.setCoin()))},I.prototype.show=function(t){this.node.opacity=(t=void 0===t||t)?255:0},I.prototype.updateIndex=function(t){this.node.zIndex=t},I.prototype.getNormalSpeed=function(){return this.stepLen/this.stepTime},I.prototype.setGrid=function(t){this.posSys.worldGrid=t},I.prototype.getGrid=function(){return this.posSys.worldGrid},I.prototype.getPosSys=function(){return this.posSys},I.prototype.getGridWidth=function(){return 1},I.prototype.getGridHeight=function(){return 1},s([a(sp.Skeleton)],I.prototype,"spine",void 0),s([a(cc.Node)],I.prototype,"nod_touch",void 0),s([a(cc.Node)],I.prototype,"nod_foot",void 0),s([a(cc.Node)],I.prototype,"nod_bubble",void 0),s([a(cc.Sprite)],I.prototype,"spr_icon",void 0),s([a(cc.Label)],I.prototype,"lbl_coin",void 0),i=s([i],I),r.default=i,cc._RF.pop()},{}],Trunk:[function(t,e,o){"use strict";cc._RF.push(e,"8749db4u3dAFa5vpe0IrfZC","Trunk");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameObject");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t.spine=null,t.isOpen=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(u,l=p.GameObject),u.prototype.open=function(){this.spine.setAnimation(0,"open",!1),this.isOpen=!0},u.prototype.close=function(){this.spine.setAnimation(0,"standby_l",!1),this.isOpen=!1},u.prototype.turn=function(){this.isOpen?this.close():this.open()},s([a(sp.Skeleton)],u.prototype,"spine",void 0),i=s([i],u),r.default=i,cc._RF.pop()},{}],UIBinding:[function(t,e,o){"use strict";cc._RF.push(e,"43a1b92X7JAJYClW6mFdSaX","UIBinding");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){var t=null!==c&&c.apply(this,arguments)||this;return t.components={},t}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.onLoad=function(){this.forEachChild(this.node)},l.prototype.forEachChild=function(t){this.pushChildTag(t);for(var e=t.childrenCount,o=0;o<e;o++){var n=t.children[o];this.forEachChild(n)}},l.prototype.pushChildTag=function(t){if(!this.hasComponent(t.name))switch(t.name.substring(0,3)){case"nod":this.components[t.name]=t;break;case"lbl":this.components[t.name]=t.getComponent(cc.Label);break;case"btn":this.components[t.name]=t.getComponent(cc.Button);break;case"spr":this.components[t.name]=t.getComponent(cc.Sprite);break;case"tog":this.components[t.name]=t.getComponent(cc.Toggle);break;case"rht":this.components[t.name]=t.getComponent(cc.RichText);break;case"edt":this.components[t.name]=t.getComponent(cc.EditBox);break;case"scr":this.components[t.name]=t.getComponent(cc.ScrollView);break;case"pro":this.components[t.name]=t.getComponent(cc.ProgressBar)}},l.prototype.hasComponent=function(t){return null!=this.components[t]},l.prototype.get=function(t){return this.hasComponent(t)?this.components[t]:null},l.prototype.getNode=function(t){return this.hasComponent(t)?this.components[t]:null},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],UILoading:[function(t,e,o){"use strict";cc._RF.push(e,"4d0684gThZOu6jJqr2dq+YL","UILoading");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.nod_flower_1=null,t.nod_flower_2=null,t.nod_show=null,t}r(p,s=cc.Component),p.prototype.onLoad=function(){this.nod_show.active=!1},p.prototype.show=function(t){this.nod_show.active=t,this.nod_flower_1.active=!1,this.nod_flower_2.active=!1,this.turn(t)},p.prototype.turn=function(t){this.nod_flower_1.active=t,(this.nod_flower_2.active=t)?(cc.tween(this.nod_flower_1).repeatForever(cc.tween().by(1,{angle:360})).start(),cc.tween(this.nod_flower_2).repeatForever(cc.tween().by(1,{angle:-360})).start()):this.node.stopAllActions()},c([l(cc.Node)],p.prototype,"nod_flower_1",void 0),c([l(cc.Node)],p.prototype,"nod_flower_2",void 0),c([l(cc.Node)],p.prototype,"nod_show",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],UIMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e02a4diJrhFA5qpu+eTwgbu","UIMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0}),r.ModuleType=r.LayerType=void 0;var c,s,l,p=i("AssetMgr");function u(){var t=null!==l&&l.apply(this,arguments)||this;return t._moduleCache={},t._opened=[],t._args_map={},t._wait_for_open_list=[],t.cur_scene_name="",t.last_scene_name="",t}a(u,l=i("Singleton").default),u.prototype.init=function(){var t=cc.Canvas.instance.node;this._scene_node=cc.find("Canvas/scene_node"),this._scene_node||(this._scene_node=new cc.Node("scene_node"),t.addChild(this._scene_node)),this._ui_node=cc.find("Canvas/ui_node"),this._ui_node||(this._ui_node=new cc.Node("ui_node"),t.addChild(this._ui_node)),this._top_node=cc.find("Canvas/top_node"),this._top_node||(this._top_node=new cc.Node("top_node"),t.addChild(this._top_node))},u.prototype.showModule=function(t,e,o){var n=this;(new Date).getTime(),this.async_load_module(t,function(){var i=n._moduleCache[t.key];if(i){if(o&&o(i),t.module_type==s.SCENE){for(var a=n._opened.length-1;0<=a;a--)n._opened[a].not_auto_close||n.closeModule(n._opened[a]);n.last_scene_name=n.cur_scene_name,n.cur_scene_name=t.key}else t.module_type!=s.WINDOW||(r=i.node.parent)&&(i.node.removeFromParent(!1),r.addChild(i.node));var r=n._opened.indexOf(t);-1<r&&n._opened.splice(r,1),t.not_stack||n._opened.push(t),i.node.parent,t.wait_for_open_list?n.pushToWaitingOpenList(t,e):n._show(t,e)}})},u.prototype._show=function(t,e){var o=this._moduleCache[t.key];o?(o.node.active=!0,o.show(),t.open_effect&&(o.node.scale=.1,cc.tween(o.node).to(.17,{scaleX:1.15,scaleY:1.1}).to(.17,{scaleX:.95,scaleY:1}).to(.17,{scaleX:1.02,scaleY:1.02}).to(.17,{scaleX:1,scaleY:1}).call(function(){o.onShowActionEnd()}).start()),e&&e(o)):cc.error(this._moduleCache)},u.prototype.async_load_module=function(t,e){var o=this;this._moduleCache[t.key]?e(!0):p.default.getInstance().getResAsyn(t.bundleName,t.loadPath,cc.Prefab,function(n){o._moduleCache[t.key]||((n=cc.instantiate(n)).active=!1,n.parent=o.get_layer_node(t.parent_node),null==(n=n.getComponent(t.key))&&cc.error(t.key+" module need extend GameModule, \u8bf7\u68c0\u67e5key\u548c\u6587\u4ef6\u540d\u662f\u5426\u4e00\u81f4"),n.setModuleConfig(t),o._moduleCache[t.key]=n),e(!0)})},u.prototype._hideModule=function(t){var e,o=this._moduleCache[t.key];!o||-1<(e=this._opened.indexOf(t))&&(this._opened.splice(e,1),t.wait_for_open_list&&this.removeFromWaitingList(o),t.open_effect?cc.tween(o.node).to(.1,{scale:.1}).call(function(){o.hide()}).start():o.hide())},u.prototype.closeModule=function(t){t.try_release_when_close?this.tryRelease(t):this._hideModule(t)},u.prototype.tryRelease=function(t){var e,o=this._moduleCache[t.key];o&&(t.wait_for_open_list&&this.removeFromWaitingList(o),(e=p.default.getInstance().getRes(t.bundleName,t.loadPath,cc.Prefab))&&e.decRef(),o.node.destroy(),delete this._moduleCache[t.key],-1<(t=this._opened.indexOf(t))&&this._opened.splice(t,1))},u.prototype.closeAllWindows=function(){for(var t in this._moduleCache)(t=this._moduleCache[t])&&t.getConfig().module_type==s.WINDOW&&t.closeMe()},u.prototype.get_layer_node=function(t){return t==c.SCENE?this._scene_node:t==c.TOP?this._top_node:this._ui_node},u.prototype.set_module_args=function(t,e){this._args_map[t]=e},u.prototype.get_module_args=function(t){return this._args_map[t]||cc.warn("nothing found by args",t,this._args_map[t]),this._args_map[t]},u.prototype.get_module=function(t){return this._moduleCache[t.key],this._moduleCache[t.key]},u.prototype.preload_module=function(t){p.default.getInstance().loadBundleByName(t.bundleName,function(e){e.preload(t.loadPath,cc.Prefab)})},u.prototype.getTopModuleConfig=function(){cc.log(this._opened);var t=this._opened[this._opened.length-1];return t||cc.error("not found config",this._opened),t},u.prototype.closeTopWindow=function(){for(var t=this._opened.length-1;0<=t;t--)if(this._opened[t]&&this._opened[t].module_type==s.WINDOW)return void this.closeModule(this._opened[t])},u.prototype.pushToWaitingOpenList=function(t,e){for(var o=0,n=this._wait_for_open_list;o<n.length;o++){var i=n[o];if(i.config.key==t.key)return cc.error("\u5f53\u524d\u5df2\u7f13\u5b58\u540c\u6837\u7684ui",i.config.key),!1}this._moduleCache[t.key].node.active=!1,this._wait_for_open_list.push({config:t,cb:e}),1==this._wait_for_open_list.length&&this.openFirstWaitingList()},u.prototype.openFirstWaitingList=function(){this._wait_for_open_list[0]&&this._show(this._wait_for_open_list[0].config,this._wait_for_open_list[0].cb)},u.prototype.removeFromWaitingList=function(t){for(var e=!1,o=0;o<this._wait_for_open_list.length;o++)this._wait_for_open_list[o].config.key==t.getConfig().key&&(this._wait_for_open_list.splice(o,1),e=!0);e&&this.openFirstWaitingList()},a=u,r.default=a,(a=c=r.LayerType||(r.LayerType={}))[a.SCENE=0]="SCENE",a[a.UI=1]="UI",a[a.TOP=2]="TOP",(r=s=r.ModuleType||(r.ModuleType={}))[r.SCENE=0]="SCENE",r[r.WINDOW=1]="WINDOW",r[r.VIEW=2]="VIEW",cc._RF.pop()},{}],UnchokeInputEvents:[function(t,e,o){"use strict";cc._RF.push(e,"6882egMwnNPe4fh71ZDnMNQ","UnchokeInputEvents");var n,i=o,a=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(i,"__esModule",{value:!0});var r,c=(s=cc._decorator).ccclass,s=s.menu;function l(){var t=null!==r&&r.apply(this,arguments)||this;return t._isSwallow=!1,t}a(l,r=cc.Component),l.prototype.onEnable=function(){this.node._touchListener&&this.node._touchListener.setSwallowTouches(this._isSwallow)},s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([c,s("\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7ec4\u4ef6/UnchokeInputEvents")],l),i.default=s,cc._RF.pop()},{}],UnlockDistrictUI:[function(t,e,o){"use strict";cc._RF.push(e,"8b7b0hjmD9N6ZjeR3hUuuU9","UnlockDistrictUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("PropMgr"),d=i("EventManager"),h=i("GameModule");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_desc=null,t.spr_icon=null,t.lbl_name=null,t.lbl_cost=null,t.needProp=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.onEnable=function(){this.updateUI()},_.prototype.onDisable=function(){},_.prototype.updateUI=function(){},_.prototype.setData=function(t){this.data=t,this.needProp=t.cost_prop,this.lbl_cost.string=t.cost_prop.num+""},_.prototype.onBtnUnlock=function(){u.default.tryConsumeThing([this.needProp],!0)&&(this.callback&&this.callback(),this.closeMe(),d.default.emit(p.GameEvent.updateBase))},s([a(cc.Label)],_.prototype,"lbl_desc",void 0),s([a(cc.Sprite)],_.prototype,"spr_icon",void 0),s([a(cc.Label)],_.prototype,"lbl_name",void 0),s([a(cc.Label)],_.prototype,"lbl_cost",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],UnlockItem:[function(t,e,o){"use strict";cc._RF.push(e,"9621cYaiUBLNYCExhIQWVj9","UnlockItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AccessMgr"),u=i("CommonDiamondNeed"),d=i("CommonUtils"),h=i("ConfigUtils"),_=i("IconUtils"),f=i("ListItem");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.rich_count=null,t.spr_icon=null,t.data=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},g.prototype.start=function(){},g.prototype.setData=function(t){this.data=t;var e=h.PropUtils.getConfigByPropID(t.id);this.lbl_name.string=e.name,this.rich_count.string=d.default.propNeedStr(t),_.IconUtils.setPropSprite(t.id,this.spr_icon),(e=this.getComponent(u.default))&&e.setData(t)},g.prototype.onTouch=function(){cc.log(this.data.id),p.default.getInstance().dealByItemID(this.data.id)},s([a(cc.Label)],g.prototype,"lbl_name",void 0),s([a(cc.RichText)],g.prototype,"rich_count",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],UnlockUI:[function(t,e,o){"use strict";cc._RF.push(e,"9e95bg/pRlA2J7K/wWiu2jv","UnlockUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("PropMgr"),d=i("IconUtils"),h=i("List"),_=i("EventManager"),f=i("GameModule"),g=i("DecorationMgr"),y=i("Finger"),m=i("GuideMgr"),v=i("UnlockItem");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.list_need_prop=null,t.lbl_desc=null,t.spr_icon=null,t.lbl_name=null,t.finger=null,t.nod_bg=null,t.spr_object_bg=null,t.needProp=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=f.default),b.prototype.onEnable=function(){m.default.getInstance().hideAllFinger(),m.default.getInstance().showTaskFinger(2005,2),m.default.getInstance().endGuide(1019),_.default.on(p.GameEvent.updateBase,this.updateUI,this)},b.prototype.onDisable=function(){_.default.off(p.GameEvent.updateBase,this.updateUI,this),this.needProp=[],m.default.getInstance().resetTouchCondition()},b.prototype.updateUI=function(){var t=this;this.list_need_prop.node.height=120*Math.ceil(this.needProp.length/4),this.list_need_prop.node.parent.getComponent(cc.Layout).updateLayout(),this.nod_bg.getComponent(cc.Layout).updateLayout(),this.node.height=this.nod_bg.height,this.scheduleOnce(function(){t.list_need_prop.numItems=t.needProp.length,t.list_need_prop.scrollTo(0)}),this.scheduleOnce(function(){t.updateTipPos()},.2)},b.prototype.onRender=function(t,e){t.getComponent(v.default).setData(this.needProp[e])},b.prototype.setNeedProp=function(t){this.needProp=t||[],this.updateUI(),m.default.getInstance().touchCondition.mission==p.ConditionType.produce_rate_unlock&&this.finger.showFinger(!0,!0)},b.prototype.setDesc=function(t){this.lbl_desc.string=t=void 0===t?"":t},b.prototype.setTitle=function(t){this.lbl_name.string=t},b.prototype.setIconByObjectID=function(t){d.IconUtils.setObjectSprite(t,this.spr_icon),(t=g.default.getDataModel(t,1))&&t.config.color?d.IconUtils.setQuality(t.config.color,this.spr_object_bg):d.IconUtils.setSpriteFrame(p.BundleName.COMMON,"texture/other/bg_unlock",this.spr_object_bg)},b.prototype.setIconByStr=function(t){t&&(t=d.IconUtils.getIconFullPathByName(t),this.spr_icon.spriteFrame=null,t&&d.IconUtils.setSpriteFrame(p.BundleName.COMMON,t,this.spr_icon))},b.prototype.onBtnUnlock=function(){_.default.off(p.GameEvent.updateBase,this.updateUI,this),u.default.tryConsume(this.needProp,!0)?(this.callback&&this.callback(),m.default.getInstance().endGuide(2005),this.closeMe(),_.default.emit(p.GameEvent.updateBase)):_.default.on(p.GameEvent.updateBase,this.updateUI,this)},s([a(h.default)],b.prototype,"list_need_prop",void 0),s([a(cc.Label)],b.prototype,"lbl_desc",void 0),s([a(cc.Sprite)],b.prototype,"spr_icon",void 0),s([a(cc.Label)],b.prototype,"lbl_name",void 0),s([a(y.default)],b.prototype,"finger",void 0),s([a(cc.Node)],b.prototype,"nod_bg",void 0),s([a(cc.Sprite)],b.prototype,"spr_object_bg",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],UpgradeView:[function(t,e,o){"use strict";cc._RF.push(e,"861c0+DGQ5KSKYlKIxkgd2o","UpgradeView");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonData"),u=i("CommonItem_4"),d=i("CommonUtils"),h=i("ConfigProxy"),_=i("ConfigUtils"),f=i("Const"),g=i("GameMgr"),y=i("LvMgr"),m=i("ReplacementModel"),v=i("GameModule");function b(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_lv=null,t.nod_content=null,t.sp_role=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(b,l=v.default),b.prototype.onEnable=function(){var t=this;d.default.loadMainRoleSpine(this.sp_role,function(){m.default.createBySpine(t.sp_role,p.default.getInstance().dressing),t.sp_role.setAnimation(0,"standby",!0)}),this.lbl_lv.string=y.default.getInstance().getLv()+"\u7ea7";for(var e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;var n=y.default.getInstance().getConfigByExp();if(n.function_unlock){var i=n.function_unlock.length;i=104*(i=Math.min(i,3))+(i-1)*this.nod_content.getComponent(cc.Layout).spacingX,this.nod_content.width=i,cc.log(n);for(var a=this,r=0;r<n.function_unlock.length;r++)!function(e){var o=_.ConfigUtils.FuncUnlockUtils.getConfig(n.function_unlock[e]);a.nod_content.children[e]?((e=a.nod_content.children[e]).active=!0,e.getComponent(u.default).setIconByName(o.icon),e.getComponent(u.default).setName(o.name)):g.gm.ui.createPrefab(f.Contents.CommonItem_4,function(e){(e=cc.instantiate(e)).active=!0,t.nod_content&&cc.isValid(t.nod_content)&&(t.nod_content.addChild(e),e.getComponent(u.default).setIconByName(o.icon),e.getComponent(u.default).setName(o.name))})}(r)}},b.prototype.onDisable=function(){for(var t=0,e=h.default.getInstance().data.ModuleOpen;t<e.length;t++){var o=e[t];if(o.module_name==g.gm.const.ShareUI.key&&o.lv==y.default.getInstance().getLv()){g.gm.ui.showModule(g.gm.const.ShareUI);break}}},s([a(cc.Label)],b.prototype,"lbl_lv",void 0),s([a(cc.Node)],b.prototype,"nod_content",void 0),s([a(sp.Skeleton)],b.prototype,"sp_role",void 0),i=s([i],b),r.default=i,cc._RF.pop()},{}],UserNoticePanel:[function(t,e,o){"use strict";cc._RF.push(e,"6183dNy+W1HBIYnRLKUx9tY","UserNoticePanel");var n,i,a=t,r=o,c=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(r,"__esModule",{value:!0});var s,l=a("GameMgr"),p=a("SDKManager"),u=a("GameModule");function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.channelInfo="",t}a=(n=cc._decorator).ccclass,n.property,c(d,s=u.default),d.prototype.onEnable=function(){l.gm.ui.showTopBlock(!1),this._args=l.gm.ui.get_module_args(l.gm.const.UserNoticePanel.key),0==this._args.gameStart||this._args.gameStart,console.log("userNoticePanel onEnable")},d.prototype.onDisable=function(){},d.prototype.showUserPrivateNoticeWebView=function(){p.SDKManager.instance.openUrl("https://res.wqop2018.com/app/web/privacy/v3/privacy.html?company=%E9%95%BF%E6%B2%99%E5%92%AB%E5%B0%BA%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&app_name=%E9%81%87%E8%A7%81%E7%AB%A5%E8%AF%9D&package_name=123&cmpany_name=%E6%9C%AC%E5%85%AC%E5%8F%B8")},d.prototype.showUserAgreementNoticeWebView=function(){p.SDKManager.instance.openUrl("https://res.wqop2018.com/app/web/privacy/v3/privacy.html?company=%E9%95%BF%E6%B2%99%E5%92%AB%E5%B0%BA%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8&app_name=%E9%81%87%E8%A7%81%E7%AB%A5%E8%AF%9D&package_name=123&cmpany_name=%E6%9C%AC%E5%85%AC%E5%8F%B8")},d.prototype.userPrivateYes=function(){l.gm.ui.closeModule(l.gm.const.UserNoticePanel),0==this._args.gameStart&&l.gm.data.event_emitter.emit("userNoticePanelIsOk")},d.prototype.userPrivateNo=function(){0==this._args.gameStart?l.gm.channel.exit_game():1==this._args.gameStart&&l.gm.ui.closeModule(l.gm.const.UserNoticePanel)},d.prototype.start=function(){},a=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([a],d),r.default=a,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"b196dU4akxEU6GewfbSF+pc","Utils");var n=t,i=o,a=function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var a=arguments[e],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.Utils=void 0;var r=n("GameMgr"),c=n("beans"),s=n("lzstring");function l(){}Object.defineProperty(l,"lzstring",{get:function(){return s},enumerable:!1,configurable:!0}),l.get_component_in_self_or_children=function(t,e){return t.getComponent(e)||t.getComponentInChildren(e)},l.get_next_uid=function(){return this.uid++,this.uid},l.get_cur_millisecond=function(){return(new Date).getTime()},l.get_cur_time=function(){return Math.floor(this.get_cur_millisecond()/1e3)},l.derangedArray=function(t,e){var o=(e=void 0===e||e)?[]:t;if(e)for(var n=0;n<t.length;n++)o.push(t[n]);for(var i,a,r=o.length;r;i=Math.floor(Math.random()*r),a=o[--r],o[r]=o[i],o[i]=a);return o},l.strToMap=function(t,e,o){if(void 0===o&&(o=","),null==t||""==t)return null;for(var n={},i=t.split(e=void 0===e?"|":e),a=0;a<i.length;a++){var r=i[a].split(o);n[r[0]]=r[1]}return n},l.strToIntMap=function(t,e,o){if(void 0===o&&(o=","),null==t||""==t)return null;for(var n={},i=t.split(e=void 0===e?"|":e),a=0;a<i.length;a++){var r=i[a].split(o);n[r[0]]=parseInt(r[1])}return n},l.strToIntListList=function(t,e,o){if(void 0===o&&(o=","),null==t||""==t)return null;for(var n=[],i=t.split(e=void 0===e?"|":e),a=0;a<i.length;a++){for(var r=i[a].split(o),c=[],s=0;s<r.length;s++)c.push(parseInt(r[s]));n.push(c)}return n},l.getChildComp=function(t,e,o){return null==(e=this.getChild(t,e))?null:e.getComponent(o)},l.getChild=function(t,e){for(var o=e.split("/"),n=t,i=0;i<o.length;i++)null==n&&cc.error("Utils getChild sNodeName:"+e+" index:"+(i-1)+" name:"+o[i-1]),n=n.getChildByName(o[i]);return null==n?null:n},l.httpRequest=function(t,e,o,n,i){void 0===o&&(o=null),void 0===n&&(n=null),void 0===i&&(i=null);var a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(4==a.readyState&&200<=a.status&&a.status<400){var e=null;try{e=JSON.parse(a.responseText)}catch(t){e=a.responseText}null!=o&&o(e,a)}else 4==a.readyState&&(a.status<100||400<=a.status)&&null!=n&&n(a)},null!=i)for(var r in i)a[r]=i[r];a.open(e,t,!0),a.send()},l.setRichText=function(t){for(var e=/<.+?\/?>/g,o=(t=void 0===t?"":t).match(e),n=t.replace(e,"\u2502").split("\u2502"),i=[],a=0,r=0,c=n;r<c.length;r++)""!==(p=c[r])&&(p="$["+a+"]",a+=1),i.push(p);for(var s=i.join("\u2502"),l=0;l<n.length;l++)""===n[l]&&(n.splice(l,1),--l);for(;-1!==s.search("\u2502");)o[0]?(s=s.replace("\u2502",o[0].toString()),o.splice(0,1)):(s=s.replace("\u2502",""),console.warn("matchArr not enough"));new Array(a).fill("");for(var p,u="",d=0;d<n.length;d++)for(var h=0,_=n[d];h<_.length;h++)u+=p=_[h];return u},l.http_request=function(t,e,o,n){var i=new XMLHttpRequest;i.withCredentials=!1,i.onreadystatechange=function(){var n;4==i.readyState&&200<=i.status&&i.status<400?(console.log(i.responseText),n=JSON.parse(i.responseText),t&&t.apply(e,[n]),console.log(i.responseText)):4==i.readyState&&(i.status<100||400<=i.status)&&(cc.error("\u8bf7\u6c42\u5931\u8d25"+o),r.gm.data.event_emitter.emit("connect_fail"))},console.log("request: "+o),i.open("POST",o,!0),i.setRequestHeader("Content-Type","application/json; charset=UTF-8"),i.send(JSON.stringify(n))},l.server_http_request=function(t,e,o){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200<=r.status&&r.status<400){var n=JSON.parse(r.responseText);return t&&t.apply(e,[n]),void console.log(r.responseText)}4==r.readyState&&(r.status<100||400<=r.status)&&console.error("\u8bf7\u6c42\u5931\u8d25"+o)};var c=(c=cc.js).formatStr.apply(c,a([o],n));console.log("request: "+c),r.open("GET",c,!0),r.send()},l.server_http_request_post=function(t,e,o){for(var n,i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r];var c=new XMLHttpRequest;c.onreadystatechange=function(){try{if(4==c.readyState&&200<=c.status&&c.status<400){var o=JSON.parse(c.responseText);return void(t&&t.apply(e,[!0,o]))}4==c.readyState&&(c.status<100||400<=c.status)&&(cc.error("\u8bf7\u6c42\u5931\u8d25"),t&&t.apply(e,[!1,null]))}catch(o){console.error("Utils server_http_request onreadystatechange error: "+o),t&&t.apply(e,[!1,null])}},o=(n=cc.js).formatStr.apply(n,a([o],i)),c.open("POST",o,!0),c.send()},l.sceneBindLogic=function(t,e){function o(o){var n=t[o];null!=n&&(t[o]=function(i){null!=e[o]&&e[o].apply(e,[i]),n.apply(t,[i])})}e.setView(t),o("onLoad"),o("onEnable"),o("onDisable")},l.updateZIndexWithY=function(t){var e=-1*t.y;isFinite(e)&&(e<cc.macro.MIN_ZINDEX?cc.warn("updateZIndexWithY zIndex < MIN_ZINDEX  izIndexY:"+e+" pNode.y:"+t.y):e>cc.macro.MAX_ZINDEX?cc.warn("updateZIndexWithY zIndex > MAX_ZINDEX  izIndexY:"+e+" pNode.y:"+t.y):t.zIndex=e)},l.distance=function(t,e){if(!t||!e||!t.x&&0!=t.x||!e.x&&0!=e.x)return 0;var o=e.x-t.x;return t=e.y-t.y,Math.floor(Math.sqrt(o*o+t*t))},l.isPosInRect=function(t,e,o){if(0!=o.angle)return n=o.width/2,i=o.height/2,r=o.angle,a=o.position,o=t,t=e,e=-r*(Math.PI/180),r=a.x+(o-a.x)*Math.cos(e)-(t-a.y)*Math.sin(e),e=a.y+(o-a.x)*Math.sin(e)+(t-a.y)*Math.cos(e),r>a.x-n&&r<a.x+n&&e>a.y-i&&e<a.y+i;var n=o.x-.5*o.width,i=o.x+.5*o.width,a=o.y+.5*o.height,r=o.y-.5*o.height;return!!(n<t&&t<i&&r<e&&e<a)},l.math_random=function(t,e,o){return void 0===t&&(t=!1),void 0===o&&(o=1),e=(e=void 0===e?0:e)+Math.random()*(o-e),t?Math.floor(e):e},l.searchPathAStar=function(t,e,o,n,i){var a=this;void 0===n&&(n=null);var r=i=void 0===i?50:i,s=Math.floor(1.414*i),l=[],p={};return e=(i=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=new c.SearchPathPoint;i.x=t.x,i.y=t.y;var l=Math.abs(o.x-i.x)/r*r,p=Math.abs(o.y-i.y)/r*r;return l=Math.floor(l),p=Math.floor(p),i.sKey=l+"_"+p,i.h=l+(p=0<p?p-1:p),i.g=0,null!=e&&(i.tParent=e,i.g=e.g,n==a.SP_DIR_TOP_LEFT||n==a.SP_DIR_TOP_RIGHT||n==a.SP_DIR_DOWN_LEFT||n==a.SP_DIR_DOWN_RIGHT?i.g+=s:i.g+=r),i.f=i.h+i.g,i.bIsEndPos=a.distance(t,o)<r,i.bIsEndPos&&(i.x=o.x,i.y=o.y),i})(e),l.push(e),p[e.sKey]=e,this.iAStarPathCount=0,this.innerSearchPathAStar({_cfgid:t,_iLine:r,_iSlantLine:s,_tOpenList:l,_tCloseMap:{},_createSPPointFunc:i,_pCheckHitFunc:n,_tOpenMap:p})},l.getDirSpeed=function(t,e,o){void 0===o&&(o=1);var n=l.distance(t,e);if(n<1)return this.vDirSpeed.x=0,this.vDirSpeed.y=0,this.vDirSpeed;var i=e.x-t.x;return t=e.y-t.y,this.vDirSpeed.x=i/n*o,this.vDirSpeed.y=t/n*o,this.vDirSpeed},l.innerSearchPathAStar=function(t){var e=t._iLine,o=(t._iSlantLine,t._tOpenList),n=t._tCloseMap,i=t._createSPPointFunc,a=t._tOpenMap;if(o.length<=0)return null;if(3e3<=this.iAStarPathCount)return console.warn("innerSearchPathAStar iAStarPathCount reach: "+this.iAStarPathCount+"cfgid="+t._cfgid),null;this.iAStarPathCount++;var r=o[0];o.splice(0,1),delete a[r.sKey];for(var c=[i({x:(n[r.sKey]=r).x,y:r.y-e},r,this.SP_DIR_TOP),i({x:r.x,y:r.y+e},r,this.SP_DIR_DOWN),i({x:r.x-e,y:r.y},r,this.SP_DIR_LEFT),i({x:r.x+e,y:r.y},r,this.SP_DIR_RIGHT),i({x:r.x-e,y:r.y-e},r,this.SP_DIR_TOP_LEFT),i({x:r.x+e,y:r.y-e},r,this.SP_DIR_TOP_RIGHT),i({x:r.x-e,y:r.y+e},r,this.SP_DIR_DOWN_LEFT),i({x:r.x+e,y:r.y+e},r,this.SP_DIR_DOWN_RIGHT)],s=!1,l=0;l<c.length;l++){var p=c[l];if(null!=a[p.sKey]){var u=a[p.sKey];p.g<u.g&&(u.f=p.f,u.h=p.h,u.g=p.g,u.tParent=p.tParent,s=!0)}else{if(p.bIsEndPos)return this.genAStarPath(p,[]);u=!0,(u=null==n[p.sKey]?null!=t._pCheckHitFunc&&t._pCheckHitFunc(p.x,p.y):u)||(o.push(p),a[p.sKey]=p,s=!0)}}return null==r.tParent||r.tParent.sKey,s&&o.sort(function(t,e){return t.f-e.f}),this.innerSearchPathAStar(t)},l.genAStarPath=function(t,e){return(e=null==(e=void 0===e?null:e)?[]:e).unshift(t),null!=t.tParent?this.genAStarPath(t.tParent,e):e},l.checkHitRect=function(t,e,o){if(null!=o)for(var n=0;n<o.length;n++){var i=(c=o[n]).x-.5*c.width,a=c.x+.5*c.width,r=c.y+.5*c.height,c=c.y-.5*c.height;if(i<t&&t<a&&c<e&&e<r)return!0}return!1},l.vec2ToDegrees=function(t,e){return e=cc.v2(t).signAngle(e),(cc.misc.radiansToDegrees(e)+360)%360},l.degreesToVectors=function(t){return t=cc.misc.degreesToRadians(t),cc.v2(0,1).rotate(-t)},l.convertPosAR=function(t,e,o,n){void 0===n&&(n=null),null==(o=void 0===o?null:o)&&(o=cc.Vec2.ZERO);var i=cc.v2(0,0);return null==n&&(n=i),t&&e&&(t.convertToWorldSpaceAR(o,i),e.convertToNodeSpaceAR(i,n)),n},l.broadWorldCb=function(){r.gm.localData.get_bless_data(!0)},l.broadWorld=function(t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=""),void 0===n&&(n="");for(var i,a=null,c=r.gm.config.data.Broad,s=0;s<c.length;s++){var p=c[s];if(t==p.type&&e==p.condition){a=p;break}}a&&(i=cc.js.formatStr(a.content,r.gm.localData.nick_name,o),""!=n&&(i=cc.js.formatStr(a.content,r.gm.localData.nick_name,o,n)),i=encodeURIComponent(i),l.server_http_request(this.broadWorldCb,this,r.gm.channel.getServerUrl()+"user/upload_player_broadcast_record?token=%s&uid=%s&wish=%s&nickname=%s&type=%s",r.gm.data.token,r.gm.data.uid,i,"\u7cfb\u7edf","1"))},l.random=function(t,e,o){return void 0===t&&(t=!1),void 0===e&&(e=0),void 0===o&&(o=1),this.seed=(9301*this.seed+49297)%233280,e+=this.seed/233280*(o-e),t?Math.floor(e):e},l.seed=1574822809,l.drop_seed=1574822809,l.chinese_num_array=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u767e","\u5343","\u4e07"],l.vDir=cc.v2(0,0),l.vConvertTempPos=cc.v2(0,0),l.vDirSpeed=cc.v2(0,0),l.SP_DIR_TOP=0,l.SP_DIR_DOWN=1,l.SP_DIR_LEFT=2,l.SP_DIR_RIGHT=3,l.SP_DIR_TOP_LEFT=4,l.SP_DIR_TOP_RIGHT=5,l.SP_DIR_DOWN_LEFT=6,l.SP_DIR_DOWN_RIGHT=7,l.iAStarPathCount=0,l.uid=0,l.HEAD="HEAD",l.GET="GET",l.POST="POST",n=l,i.Utils=n,cc._RF.pop()},{}],VIVOMiniGame:[function(t,e,o){"use strict";cc._RF.push(e,"e4ad4nkBR5N9ZH4llzRLt88","VIVOMiniGame");var n,i=t,a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.VIVOMiniGame=void 0;var r,c=i("GameMgr"),s=i("ChannelManager"),l=i("Utils"),p=i("Const"),u=i("NetUtils");function d(){this._bannerAd=null,this._interstitialAd=null,this._bannerid="c54cb32ae39d41b3beb6e9d724eac1d4",this._videoid="5f0538bedcbe490aa7f76464cc66dc40",this._interid="07736bf51d5c4ee7a1dac0fc1162e89f",this._share_config_url="https://leduo.zqygame.com/res/leduo/panda_vivo/share.json",this._chmhtxd_share_config_url="https://leduo.zqygame.com/res/leduo/01_mhtxd/01_xyx/05_vivo/share.json",this.is_bdd=0,this.edtion="",this.task_cp=0,this.map_cp=0,this.qq_number=0,this.is_weak_guide=0,this.data_code_is_show=!1,this.qq_code_copy=!0,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.is_show_active_btn=!0}i=(n=cc._decorator).ccclass,n.property,r=d,Object.defineProperty(d,"instance",{get:function(){return this._instance||(this._instance=new r),this._instance},enumerable:!1,configurable:!0}),d.prototype.load_channel_env=function(t){return console.log("VivoMiniGame loadChannelEnv!!!"),qg.login({success:function(e){console.log("vivo qg.login:"+JSON.stringify(e)),t(e.data.token)},fail:function(t){console.log(JSON.stringify(t))}}),this.load_share_config(),!0},d.prototype.analyzeUrlPram=function(){return!0},d.prototype.get_qq_number=function(){return this.qq_number},d.prototype.get_is_weak_guide=function(){return this.is_weak_guide},d.prototype.get_task_cp=function(){return this.task_cp},d.prototype.get_map_cp=function(){return this.map_cp},d.prototype.get_is_bdd=function(){return!0},d.prototype.get_url=function(){return c.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},d.prototype.get_edtion=function(){return this.edtion},d.prototype.get_data_code_is_show=function(){return this.data_code_is_show},d.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},d.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},d.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},d.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},d.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},d.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},d.prototype.load_share_config=function(){var t=this,e=(c.gm.const.IS_GAME_XMCT?t._share_config_url:t._chmhtxd_share_config_url)+"?"+Date.now();console.log("load_share_config url: "+e),l.Utils.server_http_request(function(e){e&&("qq_number"in e&&(t.qq_number=e.qq_number,console.log("qq_number"+t.qq_number)),"is_weak_guide"in e&&(t.is_weak_guide=e.is_weak_guide,console.log("is_weak_guide"+t.is_weak_guide)),"is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp),"data_code_is_show"in e&&(t.data_code_is_show=e.data_code_is_show),"qq_code_copy"in e&&(t.qq_code_copy=e.qq_code_copy),"prase_percent_and"in e&&(t.prase_percent_and=e.prase_percent_and),"prase_percent_ios"in e&&(t.prase_percent_ios=e.prase_percent_ios),"is_show_nick_name"in e&&(t.is_show_nick_name=e.is_show_nick_name),"is_show_set_ui_update"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update),"is_show_active_btn"in e&&(t.is_show_active_btn=e.is_show_active_btn),console.log("map_cp:  "+t.map_cp),"edtion"in e&&(t.edtion=e.edtion,t.edtion==c.gm.const.VERSION_NUMBER?("is_bdd1"in e&&(t.is_bdd=e.is_bdd1),"task_cp1"in e&&(t.task_cp=e.task_cp1),"map_cp1"in e&&(t.map_cp=e.map_cp1),"qq_code_copy1"in e&&(t.qq_code_copy=e.qq_code_copy1),"is_show_active_btn1"in e&&(t.is_show_active_btn=e.is_show_active_btn1),"is_show_set_ui_update1"in e&&(t.is_show_set_ui_update=e.is_show_set_ui_update1),"is_show_nick_name1"in e&&(t.is_show_nick_name=e.is_show_nick_name1)):("is_bdd"in e&&(t.is_bdd=e.is_bdd),"task_cp"in e&&(t.task_cp=e.task_cp),"map_cp"in e&&(t.map_cp=e.map_cp))))},this,e)},d.prototype.loginVerify=function(){return!0},d.prototype.load_sub_packages_env=function(t){return t(),!0},d.prototype.shareReq=function(t){return t(),!0},Object.defineProperty(d.prototype,"is_share",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.loginReport=function(){},d.prototype.vibrate_short=function(){qg.vibrateShort&&qg.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},d.prototype.vibrate_long=function(){qg.vibrateLong&&qg.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},Object.defineProperty(d.prototype,"is_support_more_game",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.create_banner_ad=function(){var t=this;console.log("createBannerAd"),qg.createCustomAd&&(this._bannerAd=qg.createCustomAd({posId:this._bannerid,style:{}}),this._bannerAd.onError(function(t){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544abanner\u52a0\u8f7d\u5931\u8d25",t)}),this._bannerAd.onLoad(function(){console.log("show_banner_ad"),t._bannerAd.show().then(function(){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544abanner\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544abanner\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}))},d.prototype.show_banner_ad=function(){this.create_banner_ad()},d.prototype.hide_banner_ad=function(){console.log("hide_banner_ad"),this._bannerAd&&this._bannerAd.hide()},d.prototype.create_video_ad=function(){console.log("Oppo- createVideoAD!....")},d.prototype.show_video_ad=function(t,e){GameSdk.BI.evtOvhCustomizeDataReport("3001",null),c.gm.data.video_state=1;var o=c.gm.audio.music_mute,n=c.gm.audio.effect_mute;c.gm.audio.set_music(!0),c.gm.audio.set_effect_mute(!0),c.gm.data.start_data.today_video_laqi_count++,c.gm.data.start_data.total_video_laqi_count++,GameSdk.BI.showVideoAd(function(){console.log("show video on_video_ad_handler  successCb onClose"),TaskManager.instance.checkTask(p.TaskConditionTypeEnum.TASK_CONDITION_TYPE_VIDEO,[0],1),c.gm.data.start_data.today_video_count++,c.gm.data.start_data.total_video_count++;for(var i=0;i<c.gm.const.VIDEO_REPORT_COUNT_PER_DAY.length;++i)if(c.gm.data.start_data.today_video_count==c.gm.const.VIDEO_REPORT_COUNT_PER_DAY[i]){u.ReportData.instance.ui_report(p.VideoReportTypeEnum.VIDEO_REPORT_TYPE_VIDEO+i,c.gm.data.start_data.today_video_count);break}c.gm.data.start_data.async_write_data(),u.ReportData.instance.report_point(19),t.call(e),c.gm.data.video_state=0,c.gm.audio.set_music(o),c.gm.audio.set_effect_mute(n)},function(){console.log("show video on_video_ad_handler  failCb onClose"),c.gm.data.video_state=0,c.gm.audio.set_music(o),c.gm.audio.set_effect_mute(n),c.gm.ui.emit("cancel_watch_ad")},function(){console.log("show video on_video_ad_handler  errorCb onClose"),c.gm.audio.set_music(o),c.gm.audio.set_effect_mute(n),c.gm.data.video_state=0,u.ReportData.instance.report_point(p.VideoReportTypeEnum.VIDEO_REPORT_TYPE_FAIL_VIDEO),c.gm.ui.emit("cancel_watch_ad")})},d.prototype.createInterstitialAd=function(){var t=this;console.log("createInterstitialAd");var e=((e=qg.getSystemInfoSync()).screenWidth,(e.screenHeight-630)/2);qg.createCustomAd&&(this._interstitialAd=qg.createCustomAd({posId:this._interid,style:{top:e}}),this._interstitialAd.onError(function(t){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544ainterstitial\u52a0\u8f7d\u5931\u8d25",t)}),this._interstitialAd.onLoad(function(){console.log("show_interstitial_ad"),t._interstitialAd.show().then(function(){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544ainterstitial\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.log("\u539f\u751f\u6a21\u677f\u5e7f\u544ainterstitial\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})}))},d.prototype.show_interstitial_ad=function(){this.createInterstitialAd()},d.prototype.set_rank_value=function(){},Object.defineProperty(d.prototype,"is_rank",{get:function(){return!1},enumerable:!1,configurable:!0}),d.prototype.ifCreateShortcut=function(t){qg.hasShortcutInstalled({success:function(e){console.log("qg.hasShortcutInstalled:%s",e),t(e)},fail:function(){t(!0)},complete:function(){}})},d.prototype.createShortcut=function(t){qg.hasShortcutInstalled({success:function(e){0==e&&qg.installShortcut({success:function(){t()},fail:function(){},complete:function(){}})},fail:function(){},complete:function(){}})},d.prototype.get_app_name=function(){return window.qg&&window.qg.getSystemInfoSync?window.qg.getSystemInfoSync().platform:s.ChannelManager.VIVO_GAME},Object.defineProperty(d.prototype,"is_support_interstitial_ad",{get:function(){return qg.createInterstitialAd?(console.log("is_support_interstitial_ad  createInterstitialAd: true"),!0):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),d.prototype.clipBoard=function(t,e){qg.setClipboardData({data:t,success:function(){e()}})},d._instance=null,d.ad_enable=!0,i=r=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],d),a.VIVOMiniGame=i,cc._RF.pop()},{}],Vec2Utils:[function(t,e,o){"use strict";cc._RF.push(e,"24c84U1uuBDcK8sqgGn9B7m","Vec2Utils");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.includes=function(t,e){for(var o=0,n=t;o<n.length;o++)for(var i=n[o],a=0,r=e;a<r.length;a++){var c=r[a];if(i.x==c.x&&i.y==c.y)return!0}return!1},i.getDistance=function(t,e){var o=e.x-t.x;return t=e.y-t.y,Math.sqrt(o*o+t*t)},i.getSmallPoint=function(t,e){return t?e?cc.v2(Math.min(t.x,e.x),Math.min(t.y,e.y)):t:e},i.getBigPoint=function(t,e){return t?e?cc.v2(Math.max(t.x,e.x),Math.max(t.y,e.y)):t:e},i.getCenterPoint=function(t){for(var e=0,o=0,n=0,i=t;n<i.length;n++){var a=i[n];e+=a.x,o+=a.y}return e/=t.length,e=Math.floor(e),o/=t.length,o=Math.floor(o),cc.v2(e,o)},i.createLine=function(t,e){var o=[];if(t.x==e.x)if(e.y>=t.y)for(var n=t.y;n<=e.y;n++){var i=cc.v2(t.x,n);o.push(i)}else for(n=t.y;n>=e.y;n--)i=cc.v2(t.x,n),o.push(i);else if(t.y==e.y)if(e.x>=t.x)for(n=t.x;n<=e.x;n++)i=cc.v2(n,t.y),o.push(i);else for(n=t.x;n>=e.x;n--)i=cc.v2(n,t.y),o.push(i);else o.push(t,e);return o},n.default=i,cc._RF.pop()},{}],VillagerHelper:[function(t,e,o){"use strict";cc._RF.push(e,"7a635JFoTpMpZ6RQwIbtjyC","VillagerHelper");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0});var a=n("ConfigUtils"),r=n("GameMgr"),c=n("LvMgr");function s(){}s.getConfigs=function(t){for(var e=0,o=r.gm.config.data.VillagerData;e<o.length;e++){var n=o[e];if(n.npc_id==t)return n}},s.getConfigsByLvLimit=function(){for(var t=[],e=0,o=r.gm.config.data.VillagerData;e<o.length;e++){var n=o[e];a.NPCDataUtils.getConfigByID(n.npc_id).unlock_level<=c.default.getInstance().getLv()&&t.push(n)}return t},n=s,i.default=n,cc._RF.pop()},{}],WXMiniGame:[function(t,e,o){"use strict";cc._RF.push(e,"79011o/mN1KEJJ/GrUuzQtO","WXMiniGame");var n=t,i=o;Object.defineProperty(i,"__esModule",{value:!0}),i.WXMiniGame=void 0;var a=n("GameMgr"),r=n("ChannelManager"),c=n("Utils"),s=n("sha1");function l(){this._min_banner_ad_width=300,this._banner_ad_id_array=[],this._video_ad_id_array=["adunit-83e00526ecf6ceee"],this._interstitial_ad_id="",this._grid_ad_id="",this._banner_ad_array=[],this._banner_ad_flag_array=[!1],this._banner_ad_loaded_array=[!1],this._video_ad_array=[],this._video_cb_array=[],this._video_cb_target_array=[],this._interstitial_ad=null,this._interstitial_ad_loaded=!1,this._app_box=null,this._app_box_loaded=!1,this._share_array=[],this._default_share={title:"\u4e00\u8d77\u56de\u5bb6\u5272\u8349\u3001\u7838\u77f3\u5934",url:"https://cdnres.qszhg.6hwan.com/FarmOperation/1.jpg"},this._share_config_url="https://cdnres.qszhg.6hwan.com/tower/share.json",this._chmhtxd_default_share={title:"\u4e00\u8d77\u56de\u5bb6\u5272\u8349\u3001\u7838\u77f3\u5934",url:"https://cdnres.qszhg.6hwan.com/FarmOperation/1.jpg"},this._chmhtxd_share_config_url="https://cdnres.qszhg.6hwan.com/tower/share.json",this._record_start_time=0,this._record_end_time=0,this._is_share_record_video=!1,this._is_restart=!1,this._ifNeedVideoShare=!1,this._videoPath="",this.qq_number=0,this.tmpObj={},this.tmpPayObj={},this.juliangParamOptionTag=1,this.is_bdd=0,this.playVideoNumberReport=6,this.edtion="",this.is_weak_guide=1,this.data_code_is_show=!1,this.qq_code_copy=!0,this.prase_percent_and=60,this.prase_percent_ios=50,this.is_show_nick_name=!0,this.is_show_set_ui_update=!0,this.is_show_active_btn=!0,this.is_ios_recharge=!0,this.is_show_proposal=!1,this._wx_btn=null,this._dirty_callback=null,this.music_mute=!1,this.effect_mute=!1}Object.defineProperty(l,"instance",{get:function(){return this._instance||(this._instance=new l),this._instance},enumerable:!1,configurable:!0}),l.prototype.load_channel_env=function(t){return window.wx.onHide(function(){}),window.wx.onShow(function(){}),this._interstitial_ad_id="",this._grid_ad_id="",console.log("wx"+JSON.stringify(window.wx)),window.wx.login({success:function(e){e.code?(console.log("\u767b\u5f55\u6210\u529f\uff01"+e.code),t(e.code)):console.log("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg)}}),this._share_array=r.ChannelManager.SHARE_CONFIG.share_array,this.load_share_config(),this.show_share_menu(),this.create_video_ad(),!0},l.prototype.getShoucang=function(){return 1010==wx.getLaunchOptionsSync().scene},l.prototype.get_qq_number=function(){return this.qq_number},l.prototype.get_is_weak_guide=function(){return this.is_weak_guide},l.prototype.get_is_bdd=function(){return!0},l.prototype.get_data_code_is_show=function(){return this.data_code_is_show},l.prototype.get_qq_copy_is_show=function(){return this.qq_code_copy},l.prototype.get_praise_and_pecent=function(){return this.prase_percent_and},l.prototype.get_praise_ios_pecent=function(){return this.prase_percent_ios},l.prototype.get_is_show_nick_name=function(){return this.is_show_nick_name},l.prototype.get_is_show_set_ui_update=function(){return this.is_show_set_ui_update},l.prototype.get_is_show_active_btn=function(){return this.is_show_active_btn},l.prototype.get_is_ios_recharge=function(){return this.is_ios_recharge},l.prototype.get_is_show_proposal=function(){return this.is_show_proposal},l.prototype.load_share_config=function(){var t=this;wx.request({url:t._share_config_url+"?"+Date.now(),method:"GET",header:{"content-type":"application/json"},success:function(e){console.log("game.login requestSuc para2:",e),"data"in e&&("qq_number"in e.data&&(t.qq_number=e.data.qq_number,console.log("qq_number"+t.qq_number)),"is_weak_guide"in e.data&&(t.is_weak_guide=e.data.is_weak_guide),"is_bdd"in e.data&&(t.is_bdd=e.data.is_bdd),"data_code_is_show"in e.data&&(t.data_code_is_show=e.data.data_code_is_show),"juliangParamOptionTag"in e.data&&(t.juliangParamOptionTag=e.data.juliangParamOptionTag),"qq_code_copy"in e.data&&(t.qq_code_copy=e.data.qq_code_copy),"prase_percent_and"in e.data&&(t.prase_percent_and=e.data.prase_percent_and),"prase_percent_ios"in e.data&&(t.prase_percent_ios=e.data.prase_percent_ios),"is_show_nick_name"in e.data&&(t.is_show_nick_name=e.data.is_show_nick_name),"is_show_set_ui_update"in e.data&&(t.is_show_set_ui_update=e.data.is_show_set_ui_update),"is_show_active_btn"in e.data&&(t.is_show_active_btn=e.data.is_show_active_btn),"is_ios_recharge"in e.data&&(t.is_ios_recharge=e.data.is_ios_recharge),"is_show_proposal"in e.data&&(t.is_show_proposal=e.data.is_show_proposal),"edtion"in e.data&&(t.edtion=e.data.edtion,t.edtion==a.gm.const.VERSION_NUMBER?("is_bdd1"in e.data&&(t.is_bdd=e.data.is_bdd1),"is_ios_recharge1"in e.data&&(t.is_ios_recharge=e.data.is_ios_recharge1),"is_show_active_btn1"in e.data&&(t.is_show_active_btn=e.data.is_show_active_btn1),"is_show_proposal1"in e.data&&(t.is_show_proposal=e.data.is_show_proposal1),"is_show_nick_name1"in e.data&&(t.is_show_nick_name=e.data.is_show_nick_name1),"is_show_set_ui_update1"in e.data&&(t.is_show_set_ui_update=e.data.is_show_set_ui_update1),"qq_code_copy1"in e.data&&(t.qq_code_copy=e.data.qq_code_copy1)):"is_bdd"in e.data&&(t.is_bdd=e.data.is_bdd)),"playVideoNumberReport"in e.data&&(t.playVideoNumberReport=e.data.playVideoNumberReport))},fail:function(t){console.log("wx.login requestFail para1:",t)}})},l.prototype.createUserInfoButton=function(t){var e=this;wx.getSetting({success:function(o){var n,i;o.authSetting&&!0===o.authSetting["scope.userInfo"]?e.get_user_info(t):(o=(n=wx.getSystemInfoSync()).screenWidth,o=418*(n.screenHeight,n=o/750),n*=160,(i=wx.createUserInfoButton({type:"text",text:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f",style:{left:0,top:0,width:100*o,height:100*n,backgroundColor:"#00000000"}})).onTap(function(e){e&&e.userInfo?(i.destroy(),t(1,e.userInfo.nickName)):(i.destroy(),t(0,""))}))}})},l.prototype.get_user_info=function(t){wx.getUserInfo({success:function(e){t(1,e.userInfo.nickName)},fail:function(){t(0,"")}})},l.prototype.getShareOpenId=function(){var t=wx.getLaunchOptionsSync();return console.log("getShareOpenId=",JSON),t.query.shareOpenId},l.prototype.recharge=function(t,e){window.wx.requestMidasPayment({mode:"game",env:0,offerId:"1450037598",currencyType:"CNY",platform:"android",buyQuantity:t*a.gm.const.RECHARGE_RATION,success:function(){console.log("\u5145\u503c\u6210\u529f"),e&&e()},fail:function(t){console.log("fail wx recharge"+t),a.gm.ui.show_notice(t.errMsg)}})},l.prototype.create_wx_button=function(){var t=wx.getSystemInfoSync();console.log("sysInfo.window_width="+t.windowWidth),console.log("sysInfo.window_height="+t.windowHeight),console.log("sysInfo.design_resolution_x="+a.gm.data.design_resolution.x),console.log("sysInfo.design_resolution_y="+a.gm.data.design_resolution.y);var e=t.windowWidth/a.gm.data.design_resolution.x*220,o=t.windowHeight/a.gm.data.design_resolution.y*70,n=t.windowWidth/a.gm.data.design_resolution.x*250,i=t.windowHeight/a.gm.data.design_resolution.y*880;t=Math.floor(t.windowHeight/a.gm.data.design_resolution.y*26),this._wx_btn?this._wx_btn.show():this._wx_btn=wx.createFeedbackButton({type:"text",text:"\u6253\u5f00\u610f\u89c1\u53cd\u9988\u9875\u9762",style:{left:n,top:i,width:e,height:o,lineHeight:t,backgroundColor:"#ffcf56",borderColor:"#ffcf56",borderWidth:1,color:"#73472f",textAlign:"center",fontSize:t,borderRadius:4}})},l.prototype.destory_wx_button=function(){this._wx_btn&&this._wx_btn.hide()},l.prototype.getSysTemInfo=function(t){wx.getSystemInfo({success:function(e){console.log("res.platform="+e.platform),t&&t(e.platform)}})},l.prototype.get_app_id=function(){return wx.getAccountInfoSync().miniProgram.appId},l.prototype.getIsRecharge=function(){return!a.gm.const.IS_GAME_XMCT&&("ios"!=window.wx.getSystemInfoSync().platform||this.is_ios_recharge)},l.prototype.show_share_menu=function(){console.log("WXMiniGame.show_share_menu is begin!"),window.wx.showShareMenu({});var t=this;return window.wx.onShareAppMessage(function(){var e;return{title:(e=0==t._share_array.length?t._default_share:(e=c.Utils.math_random(!0,0,t._share_array.length),t._share_array[e])).title,imageUrl:e.url,query:"shareOpenId="+a.gm.data.uid,success:function(t){console.log("\u8f6c\u53d1\u6210\u529f"),console.log(t)},fail:function(t){console.log("fail wx onShareAppMessage"+t)}}}),console.log("WXMiniGame.show_share_menu is end!"),!0},l.prototype.load_sub_packages_env=function(t){return t(),!0},l.prototype.onHide=function(t){wx.onHide(t)},l.prototype.onTouchStart=function(t){wx.onTouchStart(t)},l.prototype.offTouchStart=function(t){wx.offTouchStart(t)},l.prototype.clipBoard=function(t,e){wx.setClipboardData({data:t,success:function(){e()}})},Object.defineProperty(l.prototype,"is_share",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_video_share",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.get_app_name=function(){return r.ChannelManager.APP_WE_CHAT},l.prototype.get_url=function(){return a.gm.const.IS_GAME_XMCT?this._share_config_url:this._chmhtxd_share_config_url},l.prototype.get_edtion=function(){return this.edtion},l.prototype.afterCheckDirty=function(t){t&&console.log("afterCheckDirty="+t),this._dirty_callback(t)},l.prototype.check_is_dirty_word=function(t,e){this._dirty_callback=e,c.Utils.server_http_request(this.afterCheckDirty,this,a.gm.channel.getServerUrl()+"user/wechat_content_check/msg_sec_check?uid=%s&token=%s&content=%s&open_id=%s",a.gm.data.uid,a.gm.data.token,t,a.gm.data.open_id)},l.prototype.vibrate_short=function(){wx.vibrateShort&&wx.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},l.prototype.vibrate_long=function(){wx.vibrateLong&&wx.vibrateLong({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},Object.defineProperty(l.prototype,"is_rank",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"is_support_more_game",{get:function(){return"ios"!=window.wx.getSystemInfoSync().platform&&!!(window.wx.navigateToMiniProgram&&window.wx.onNavigateToMiniProgram&&window.wx.showMoreGamesModal)},enumerable:!1,configurable:!0}),l.prototype.show_more_game=function(t,e){this.is_support_more_game&&(window.wx.onMoreGamesModalClose(function(t){console.log("modal closed",t)}),window.wx.onNavigateToMiniProgram(function(t){console.log(t.errCode),console.log(t.errMsg)}),window.wx.showMoreGamesModal({appLaunchOptions:[],success:function(o){console.log("success",o.errMsg),t&&e&&t.call(e,0)},fail:function(o){console.log("fail",o.errMsg),t&&e&&t.call(e,1)}}))},l.prototype.share_req=function(){var t=0==this._share_array.length?this._default_share:(t=c.Utils.math_random(!0,0,this._share_array.length),this._share_array[t]);return window.wx.shareAppMessage&&t&&window.wx.shareAppMessage({title:t.title,imageUrl:t.url,query:"shareOpenId="+a.gm.data.uid,success:function(t){console.log("\u8f6c\u53d1\u5230\u7fa4\u7684\u7ed3\u679c"),console.log(t)},fail:function(t){console.log(t)}}),!0},l.prototype.loginReport=function(){},l.prototype.create_banner_ad=function(){var t=this;if(window.wx)for(var e=window.wx.getSystemInfoSync(),o=e.windowWidth,n=e.windowHeight,i=this,a=0;a<this._banner_ad_id_array.length;a++)!function(){var e=a,r=i._banner_ad_id_array[e];if(null!=r&&""!=r){var c=wx.createBannerAd({adUnitId:r,adIntervals:30,style:{width:i._min_banner_ad_width,top:n,left:(o-i._min_banner_ad_width)/2}});i._banner_ad_array.push(c),c.onLoad(function(){console.log("banner ad id:"+r+" onLoad"),t._banner_ad_loaded_array[e]=!0}),c.onResize(function(t){c.style.left=(o-t.width)/2,c.style.top=n-t.height,console.log("banner_ad.onResize:",t.width,t.height);var e=cc.view.getDevicePixelRatio(),i=cc.view.getScaleX();console.log("banner need design size:",t.width*e/i,t.height*e/i)}),c.onError(function(t){console.log(t)})}}()},l.prototype.show_banner_ad=function(t){var e,o=this;this._banner_ad_loaded_array[t]&&(this._banner_ad_flag_array[t]=!0,(e=this._banner_ad_array[t]).show().then(function(){o._banner_ad_flag_array[t]?console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f"):(e.hide(),console.log("\u5e7f\u544a\u663e\u793a\u6162\u4e86\uff0c\u4e0d\u9700\u8981\u663e\u793a\u4e86"))}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t)}))},l.prototype.hide_banner_ad=function(t){var e;!this._banner_ad_loaded_array[t]||(e=this._banner_ad_array[t])&&(e.hide(),this._banner_ad_flag_array[t]=!1)},l.prototype.create_video_ad=function(){if(null!=window.wx.createRewardedVideoAd){var t=wx.getSystemInfoSync().SDKVersion;if(0<=a.gm.channel.compare_version(t,"2.8.0")){console.log("\u8be5\u8bbe\u5907\u652f\u6301\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u7684\u591a\u4f8b\u6a21\u5f0f"),console.log("video_ad_id_array="+this._video_ad_id_array[0]);for(var e=0;e<this._video_ad_id_array.length;e++){var o=e;this._video_ad_array[o]=window.wx.createRewardedVideoAd({adUnitId:this._video_ad_id_array[o],multiton:!0}),this.on_video_ad_handler(o)}}else console.log("\u8be5\u8bbe\u5907\u4e0d\u652f\u6301\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u7684\u591a\u4f8b\u6a21\u5f0f"),o=r.REWARD_VIDEO_AD_TYPE.ALL,this._video_ad_array[o]=window.wx.createRewardedVideoAd({adUnitId:this._video_ad_id_array[o]}),this.on_video_ad_handler(o)}},l.prototype.on_video_ad_handler=function(t){var e=this;this._video_ad_array[t].onClose(function(o){cc.game.resume(),o&&o.isEnded||void 0===o?(console.log("\u89c6\u9891\u5e7f\u544a \u6b63\u5e38\u64ad\u653e\u7ed3\u675f"),e._video_cb_array[t].apply(e._video_cb_target_array[t],[r.REWARD_VIDEO_AD_RESULT.REWARD])):console.log("\u89c6\u9891\u5e7f\u544a \u64ad\u653e\u4e2d\u9014\u9000\u51fa")}),this._video_ad_array[t].onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._video_ad_array[t].onError(function(t){console.log(t)})},l.prototype.show_video_ad=function(t,e){var o=this;this._video_cb_array[0]=t,this._video_cb_target_array[0]=e,this._video_ad_array[0]&&this._video_ad_array[0].show().then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f"),o._video_cb_array[0].apply(o._video_cb_target_array[0],[r.REWARD_VIDEO_AD_RESULT.PULL_UP])}).catch(function(){console.log("\u81ea\u52a8\u62c9\u53d6\u5931\u8d25\uff0c\u91cd\u65b0\u62c9\u53d6"),o._video_ad_array[0].load().then(function(){o._video_ad_array[0].show().then(function(){console.log("\u91cd\u65b0\u62c9\u53d6\uff0c\u89c6\u9891\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){console.log("\u91cd\u65b0\u62c9\u53d6\u5931\u8d25",t),t.errCode})})})},l.prototype.create_app_box_ad=function(){wx.createGridAd?(this._app_box=wx.createGridAd({adUnitId:this._grid_ad_id,adIntervals:30,adTheme:"white",gridCount:5,style:{left:0,top:0,width:330,opacity:.8}}),this._app_box.onLoad(function(){console.log("\u683c\u5b50\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._app_box.onError(function(t){console.log(t)})):console.log("\u4e0d\u652f\u6301\u683c\u5b50\u5e7f\u544a\uff0c\u8bf7\u5347\u7ea7\u5fae\u4fe1")},Object.defineProperty(l.prototype,"is_support_app_box",{get:function(){return!!wx.createGridAd},enumerable:!1,configurable:!0}),l.prototype.show_app_box_ad=function(){wx.createGridAd?this._app_box_loaded&&this._app_box?this._app_box.show().catch(function(t){console.error(t)}):(this.create_app_box_ad(),console.log("_app_box_loaded:"+this._app_box_loaded)):console.log("\u4e0d\u652f\u6301\u5e7f\u544a\u76d2\u5b50\uff0c\u8bf7\u5347\u7ea7\u5fae\u4fe1")},l.prototype.create_interstitial_ad=function(){var t=this;wx.createInterstitialAd&&(this._interstitial_ad=wx.createInterstitialAd({adUnitId:this._interstitial_ad_id}),this._interstitial_ad.onError(function(t){console.log(t)}),this._interstitial_ad.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this._interstitial_ad.onLoad(function(){t._interstitial_ad_loaded=!0}),this._interstitial_ad.onClose(function(){console.log("close event emit")}),this._interstitial_ad.onError(function(t){console.log("error",t)}))},Object.defineProperty(l.prototype,"is_support_interstitial_ad",{get:function(){return wx.createInterstitialAd?(console.log("is_support_interstitial_ad: true"),!0):(console.log("is_support_interstitial_ad: false"),!1)},enumerable:!1,configurable:!0}),l.prototype.show_interstitial_ad=function(t,e){this._interstitial_ad&&this._interstitial_ad_loaded&&this._interstitial_ad.show().catch(function(o){console.error("show",o),t&&e&&t.call(e,1)})},l.prototype.set_rank_value=function(){var t={wxgame:{score:0,update_time:Math.floor((new Date).getTime()/1e3)},cost_time:0};console.log("WXMINIgame setRankVal data:",t),window.wx.setUserCloudStorage({KVDataList:[{key:"level",value:JSON.stringify(t)}]}),cc.log("\u4e0a\u62a5\u6392\u884c\u6570\u636e")},l.prototype.get_rank_data=function(){return window.wx.getOpenDataContext().postMessage({message:2}),!0},l.prototype.set_rank_close=function(){window.wx.getOpenDataContext().postMessage({message:99})},l.prototype.on_rank_pre_page_click=function(){window.wx.getOpenDataContext().postMessage({message:100})},l.prototype.on_rank_next_page_click=function(){window.wx.getOpenDataContext().postMessage({message:101})},l.prototype.get_self_rank_data=function(){return window.wx&&window.wx.getOpenDataContext().postMessage({message:300}),!0},l.prototype.set_self_rank_close=function(){window.wx&&window.wx.getOpenDataContext().postMessage({message:301})},l.prototype.clear_cache=function(){window.wxDownloader&&(window.wxDownloader.cleanAllAssets(),console.log("delete cache success"))},l.prototype.juLiangSign=function(t,e,o){(o=[t,e,o]).sort();var n="";return o.forEach(function(t){n+=t}),s.default(n)},l.prototype.getJuLiangParm=function(){var t=wx.getLaunchOptionsSync();console.log("getJuLiangParm  obj:",JSON.stringify(t)),"clue_token"in t.query&&(this.tmpObj.clue_token=this.paramOption(t.query.clue_token)),"ad_id"in t.query&&(this.tmpObj.ad_id=this.paramOption(t.query.ad_id)),"creative_id"in t.query&&(this.tmpObj.creative_id=this.paramOption(t.query.creative_id)),"wxgamecid"in t.query?this.tmpPayObj.wxgamecid=this.paramOption(t.query.wxgamecid):this.tmpPayObj.wxgamecid="","ios"==window.wx.getSystemInfoSync().platform?this.tmpPayObj.platform="ios":this.tmpPayObj.platform="android",a.gm.const.IS_GAME_XMCT?this.tmpPayObj.game_id="1070":this.tmpPayObj.game_id="1317"},l.prototype.paramOption=function(t){return 1==this.juliangParamOptionTag?t.replace("\n","").trim():t},l.prototype.getReportUrl=function(){var t=Math.round((new Date).getTime()/1e3),e=Math.round(1e3*Math.random());return"https://clue.oceanengine.com/outer/wechat/applet/token/1723010536037400?timestamp="+t+"&nonce="+e+"&signature="+this.juLiangSign("DADFDC7E285DBA13237EA8CD522E6593",t,e)},l.prototype.getJuLiangBody=function(t){console.log("getJuLiangParm  tmpObj:",JSON.stringify(this.tmpObj));var e={};switch(e.clue_token=this.tmpObj.clue_token,e.open_id=a.gm.data.open_id,t){case"0":e.event_type="0";break;case"1":e.event_type="1";break;case"2":e.event_type="2",e.props={pay_amount:100};break;case"25":e.event_type="25";break;case"6":e.event_type="6"}return e},l.prototype.juLiangEventReport=function(t){null!=this.tmpObj.clue_token&&(t=this.getJuLiangBody(t),c.Utils.http_request(function(){console.warn("END----------------    juLiangEventReport(event)   ------------------END")},this,this.getReportUrl(),t))},l._instance=null,l.ad_enable=!0,n=l,i.WXMiniGame=n,cc._RF.pop()},{}],WarehouseExpand:[function(t,e,o){"use strict";cc._RF.push(e,"f5fbchkY8FDGaI0fbFsF0a1","WarehouseExpand");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonDiamondNeed"),u=i("CommonPropItem"),d=i("ConfigUtils"),h=i("GameMgr"),_=i("PropMgr"),f=i("List"),g=i("GameModule");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_count=null,t.list=null,t.data=[],t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=g.default),y.prototype.onEnable=function(){this.updateUI()},y.prototype.setData=function(t){this.data=t,this.updateUI()},y.prototype.updateUI=function(){var t=d.ConfigUtils.WarehouseDataUtils.getConfig(h.gm.localData.warehouseLv);this.data=t.level_up_cost,this.list.numItems=this.data.length,t=d.ConfigUtils.WarehouseDataUtils.getConfig(h.gm.localData.warehouseLv+1).warehouse_number-t.warehouse_number,this.lbl_count.string="\u4e0a\u9650+"+t},y.prototype.onRenderList=function(t,e){t.getComponent(u.default).setData(this.data[e]),t.getComponent(p.default).setData(this.data[e])},y.prototype.onBtnConfirm=function(){_.default.tryConsume(this.data,!0)&&(h.gm.localData.warehouseLv+=1,h.gm.localData.saveByKey("warehouseLv"),h.gm.ui.get_module(h.gm.const.Warehouse).updateUI(),this.closeMe())},s([a(cc.Label)],y.prototype,"lbl_count",void 0),s([a(f.default)],y.prototype,"list",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],WarehouseSell:[function(t,e,o){"use strict";cc._RF.push(e,"ea69aupgAlOWLL+INunmWQh","WarehouseSell");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("GameModule");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_price=null,t.lbl_count=null,t.spr_icon=null,t.data=null,t.curCount=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.onEnable=function(){this.curCount=1,this.updateUI()},g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){var t;this.data&&(_.IconUtils.setPropSprite(this.data.id,this.spr_icon),t=p.PropUtils.getConfigByPropID(this.data.id),this.lbl_price.string=t.simple_price+"",this.lbl_count.string=this.curCount+"")},g.prototype.onBtnReduce=function(){1<this.curCount&&(this.curCount--,this.updateUI())},g.prototype.onBtnAdd=function(){this.curCount<this.data.num&&(this.curCount++,this.updateUI())},g.prototype.onBtnConfirm=function(){h.default.sellByBag([{id:this.data.id,num:this.curCount}],u.SellType.normal)&&(d.gm.ui.get_module(d.gm.const.Warehouse).updateUI(),this.closeMe())},s([a(cc.Label)],g.prototype,"lbl_price",void 0),s([a(cc.Label)],g.prototype,"lbl_count",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],WarehouseUse:[function(t,e,o){"use strict";cc._RF.push(e,"a2a67iJhSpHRJayu7zYa59V","WarehouseUse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("IconUtils"),f=i("GameModule");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_price=null,t.lbl_count=null,t.spr_icon=null,t.data=null,t.curCount=1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.default),g.prototype.onEnable=function(){this.curCount=1,this.updateUI()},g.prototype.setData=function(t){this.data=t,this.updateUI()},g.prototype.updateUI=function(){var t;this.data&&(_.IconUtils.setPropSprite(this.data.id,this.spr_icon),(t=p.PropUtils.getConfigByPropID(this.data.id)).id==u.CommonPropID.max_power?this.lbl_price.string="\u4f53\u529b\u4e0a\u9650+"+t.energy:t.id==u.CommonPropID.max_hp?this.lbl_price.string="\u8840\u91cf\u4e0a\u9650+"+t.energy:t.id==u.CommonPropID.add_hp&&(this.lbl_price.string="\u8840\u91cf+"+t.energy),this.lbl_count.string=this.curCount+"")},g.prototype.onBtnReduce=function(){1<this.curCount&&(this.curCount--,this.updateUI())},g.prototype.onBtnAdd=function(){this.curCount<this.data.num&&(this.curCount++,this.updateUI())},g.prototype.onBtnConfirm=function(){h.default.useByBag([{id:this.data.id,num:this.curCount}])&&(d.gm.ui.get_module(d.gm.const.Warehouse).updateUI(),this.closeMe())},s([a(cc.Label)],g.prototype,"lbl_price",void 0),s([a(cc.Label)],g.prototype,"lbl_count",void 0),s([a(cc.Sprite)],g.prototype,"spr_icon",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],Warehouse_Item:[function(t,e,o){"use strict";cc._RF.push(e,"16927Uu9QBHyIuXEzhTL62z","Warehouse_Item");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("IconUtils"),_=i("ListItem");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_name=null,t.lbl_count=null,t.spr_icon=null,t.prop=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=_.default),f.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)},f.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouch,this)},f.prototype.setData=function(t){this.prop=t,this.updateUI()},f.prototype.updateUI=function(){this.lbl_name.string=p.PropUtils.getConfigByPropID(this.prop.id).name,this.lbl_count.string=this.prop.num+"",h.IconUtils.setPropSprite(this.prop.id,this.spr_icon)},f.prototype.onTouch=function(){var t=this,e=p.PropUtils.getConfigByPropID(this.prop.id);e.id==u.CommonPropID.max_power||e.id==u.CommonPropID.max_hp||e.id==u.CommonPropID.add_hp?d.gm.ui.showModule(d.gm.const.WarehouseUse,function(e){e.setData(t.prop)}):e&&e.simple_price&&d.gm.ui.showModule(d.gm.const.WarehouseSell,function(e){e.setData(t.prop)})},s([a(cc.Label)],f.prototype,"lbl_name",void 0),s([a(cc.Label)],f.prototype,"lbl_count",void 0),s([a(cc.Sprite)],f.prototype,"spr_icon",void 0),i=s([i],f),r.default=i,cc._RF.pop()},{}],Warehouse:[function(t,e,o){"use strict";cc._RF.push(e,"0df9bm6E7xNvYx0ETLSkiJ7","Warehouse");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("PropMgr"),d=i("List"),h=i("GameModule"),_=i("Warehouse_Item");function f(){var t=null!==l&&l.apply(this,arguments)||this;return t.list=null,t.toggle=null,t.lbl_volume=null,t.nod_expand=null,t.nod_close=null,t.myProps=[],t.curIndex=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(f,l=h.default),f.prototype.onEnable=function(){this.toggle.toggleItems[this.curIndex].check(),this.updateUI()},f.prototype.updateUI=function(){var t=g[this.curIndex];this.myProps=u.default.getMyPropByType(t),this.list.numItems=this.myProps.length},f.prototype.onToggle=function(t,e){this.curIndex=Number(e),this.updateUI()},f.prototype.onRender=function(t,e){t.getComponent(_.default).setData(this.myProps[e])},f.prototype.onBtnExpand=function(){p.gm.ui.showModule(p.gm.const.WarehouseExpand)},s([a(d.default)],f.prototype,"list",void 0),s([a(cc.ToggleContainer)],f.prototype,"toggle",void 0),s([a(cc.Label)],f.prototype,"lbl_volume",void 0),s([a(cc.Node)],f.prototype,"nod_expand",void 0),s([a(cc.Node)],f.prototype,"nod_close",void 0),i=s([i],f),r.default=i;var g=((i={})[0]=[1],i[1]=[2],i[2]=[31,32,33,34,35,6,7,8,9,36],i);cc._RF.pop()},{}],WelfareData:[function(t,e,o){"use strict";cc._RF.push(e,"258644GzMBILKEOTSRf3l/6","WelfareData");var n,i=t,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=i("Const"),l=i("GameMgr"),p=i("EventManager"),u=i("StorageBase"),d=i("TimeUtils");function h(){var t=null!==c&&c.apply(this,arguments)||this;return t.STORAGE_KEY="WelfareData",t.free_diamond_time_cd=0,t.last_gift_time=0,t.have_buy_gift_index=[],t}r(h,c=u.StorageBase),h.prototype.addBuyRecord=function(t){this.have_buy_gift_index.includes(t)||(this.have_buy_gift_index.push(t),this.async_write_data())},h.prototype.reduceCD=function(){var t=d.default.getTime();t>=this.last_gift_time+l.gm.config.data.Setting[0].welfare_gift_reward_reset_time&&(this.last_gift_time=t,this.have_buy_gift_index=[],p.default.emit(s.GameEvent.welfare_update),this.async_write_data())},h.prototype.setDiamondCD=function(){this.free_diamond_time_cd,this.free_diamond_time_cd=d.default.getTime(),this.async_write_data(),p.default.emit(s.GameEvent.welfare_update)},h.prototype.checkFreeDiamond=function(){return this.getFreeDiamondLeftTime()<=0},h.prototype.getFreeDiamondLeftTime=function(){return this.free_diamond_time_cd+l.gm.config.data.Setting[0].welfare_free_diamond_reset_time-d.default.getTime()},r=h,a.default=r,cc._RF.pop()},{}],WelfareFreeDiamond:[function(t,e,o){"use strict";cc._RF.push(e,"58387DJ5lVEo5Rw1ZG3vCbL","WelfareFreeDiamond");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonUtils"),u=i("Const"),d=i("GameMgr"),h=i("PropMgr"),_=i("EventManager"),f=i("ButtonUtils"),g=i("StringUtil"),y=i("WelfareData");function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_diamond=null,t.btn_get_diamond=null,t.lbl_cd=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(m,l=cc.Component),m.prototype.onEnable=function(){this.updateUI(),_.default.on(u.GameEvent.welfare_update,this.updateUI,this)},m.prototype.onDisable=function(){_.default.off(u.GameEvent.welfare_update,this.updateUI,this)},m.prototype.updateUI=function(){y.default.getInstance().checkFreeDiamond()?f.default.setInteractAble(this.btn_get_diamond,!0):f.default.setInteractAble(this.btn_get_diamond,!1),this.lbl_diamond.string="\u94bb\u77f3:"+d.gm.config.data.Setting[0].welfare_free_diamond},m.prototype.onBtnGetAward=function(){var t=this;p.default.showVideo(function(){var e=[{file:u.ThingType.normal,id:u.CommonPropID.diamond,num:d.gm.config.data.Setting[0].welfare_free_diamond}];h.default.addProps(e,!0),y.default.getInstance().setDiamondCD(),t.updateUI()},40000035)},m.prototype.update=function(){var t=y.default.getInstance().getFreeDiamondLeftTime();0<=t?(this.lbl_cd.node.active=!0,this.lbl_cd.string="\u5237\u65b0:"+g.default.countDownFormat(t)):this.lbl_cd.node.active=!1},s([a(cc.Label)],m.prototype,"lbl_diamond",void 0),s([a(cc.Button)],m.prototype,"btn_get_diamond",void 0),s([a(cc.Label)],m.prototype,"lbl_cd",void 0),i=s([i],m),r.default=i,cc._RF.pop()},{}],WelfareGift:[function(t,e,o){"use strict";cc._RF.push(e,"2cd3dK9vDVKZYcQdRHE+UyG","WelfareGift");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("GameMgr"),u=i("GiftItem"),d=i("WelfareData"),h=i("StringUtil"),_=i("EventManager"),f=i("Const"),g=i("TimeUtils");function y(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_cd=null,t.nod_content=null,t.leftTime=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(y,l=cc.Component),y.prototype.onEnable=function(){this.updateUI(),_.default.on(f.GameEvent.welfare_update,this.updateUI,this)},y.prototype.onDisable=function(){_.default.off(f.GameEvent.welfare_update,this.updateUI,this)},y.prototype.updateUI=function(){var t=g.default.getTime();this.leftTime=d.default.getInstance().last_gift_time+p.gm.config.data.Setting[0].welfare_gift_reward_reset_time-t,this.leftTime=Math.max(this.leftTime,0),this.updateGifts()},y.prototype.onRenderList=function(t,e){var o=p.gm.config.data.Setting[0].welfare_gift_reward[e];o?t.getComponent(u.default).setData(o):cc.error(e)},y.prototype.updateGifts=function(){for(var t=p.gm.config.data.Setting[0].welfare_gift_reward,e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;for(var n=0;n<t.length;n++){var i=this.nod_content.children[n];i||(i=cc.instantiate(this.nod_content.children[0]),this.nod_content.addChild(i,n)),i.getComponent(u.default).listId=n,i.getComponent(u.default).setData(t[n]),i.active=!0}},y.prototype.update=function(t){this.leftTime-=t,this.leftTime=Math.max(this.leftTime,0),this.lbl_cd.string="\u5237\u65b0:"+h.default.countDownFormat(Math.round(this.leftTime))},s([a(cc.Label)],y.prototype,"lbl_cd",void 0),s([a(cc.Node)],y.prototype,"nod_content",void 0),i=s([i],y),r.default=i,cc._RF.pop()},{}],WelfareQQGroup:[function(t,e,o){"use strict";cc._RF.push(e,"1d43cRtg19OYaEADohYTKjJ","WelfareQQGroup");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AppConfig"),u=i("AudioUtils"),d=i("Bridge"),h=i("CommonItem_4"),_=i("GameMgr"),f=i("List");function g(){var t=null!==l&&l.apply(this,arguments)||this;return t.lbl_qq_group=null,t.list=null,t.nod_content=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=cc.Component),g.prototype.onEnable=function(){this.lbl_qq_group.string="\u7fa4\u53f7:"+p.default.QQ_Group,this.updateGifts()},g.prototype.onBtnCopy=function(){u.default.click(),d.default.webCopyString(p.default.QQ_Group),_.gm.ui.showNotice("\u590d\u5236\u6210\u529f")},g.prototype.onRenderList=function(t,e){e=_.gm.config.data.Setting[0].welfare_qq_group_reward[e],t.getComponent(h.default).setCommonUI(e)},g.prototype.updateGifts=function(){for(var t=_.gm.config.data.Setting[0].welfare_qq_group_reward,e=0,o=this.nod_content.children;e<o.length;e++)o[e].active=!1;for(var n=0;n<t.length;n++){var i=this.nod_content.children[n];i||(i=cc.instantiate(this.nod_content.children[0]),this.nod_content.addChild(i,n)),i.getComponent(h.default).setCommonUI(t[n]),i.active=!0}},s([a(cc.Label)],g.prototype,"lbl_qq_group",void 0),s([a(f.default)],g.prototype,"list",void 0),s([a(cc.Node)],g.prototype,"nod_content",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],WelfareUI:[function(t,e,o){"use strict";cc._RF.push(e,"1d958a0VIVPTahF98yGuB7A","WelfareUI");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("AudioUtils"),u=i("ChannelManager"),d=i("GameMgr"),h=i("GameModule");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_qq_content=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=h.default),_.prototype.onEnable=function(){this.nod_qq_content.active=!(d.gm.channel.get_channel_name()==u.ChannelManager.TT_GAME)},_.prototype.onBtnBack=function(){p.default.click(),this.closeMe()},s([a(cc.Node)],_.prototype,"nod_qq_content",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],WelffareBusinessman:[function(t,e,o){"use strict";cc._RF.push(e,"3b398R/kB1Er6z8vXmVjopr","WelffareBusinessman");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("CommonItem_4"),u=i("CommonUtils"),d=i("Const"),h=i("GameMgr");function _(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_parent=null,t}i=(a=cc._decorator).ccclass,a=a.property,c(_,l=cc.Component),_.prototype.onEnable=function(){for(var t=0;t<3;t++){var e=this.nod_parent.children[t],o=h.gm.config.data.OutsideMapStore[t];e.getComponent(p.default).setCommonUI({file:d.ThingType.normal,id:o.target_id,num:o.target_num})}},_.prototype.onBtnGo=function(){u.default.goToExploreByID(11001),h.gm.ui.closeModule(h.gm.const.WelfareUI)},s([a(cc.Node)],_.prototype,"nod_parent",void 0),i=s([i],_),r.default=i,cc._RF.pop()},{}],WorktopItem:[function(t,e,o){"use strict";cc._RF.push(e,"e51fdhnMp1EQpyu35yaVD8+","WorktopItem");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("Const"),u=i("ListItem"),d=i("EventManager");function h(){var t=null!==l&&l.apply(this,arguments)||this;return t.nod_item=null,t.nod_empty=null,t.nod_unlock=null,t.spr_icon=null,t.nod_rate=null,t.lbl_rate=null,t.lock=!0,t.selectIndex=0,t}i=(a=cc._decorator).ccclass,a=a.property,c(h,l=u.default),h.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this),d.default.on(p.GameEvent.updateBase,this.updateUI,this)},h.prototype.onDisable=function(){d.default.off(p.GameEvent.updateBase,this.updateUI,this)},h.prototype.start=function(){},h.prototype.setData=function(t,e){void 0===e&&(e=0),this.produceConfig=t,this.selectIndex=e,this.updateUI()},h.prototype.updateUI=function(){},h.prototype.onTouch=function(){this.lock||(d.default.emit(p.GameEvent.factory_ui_select,this.listId),this.updateUI())},s([a(cc.Node)],h.prototype,"nod_item",void 0),s([a(cc.Node)],h.prototype,"nod_empty",void 0),s([a(cc.Node)],h.prototype,"nod_unlock",void 0),s([a(cc.Sprite)],h.prototype,"spr_icon",void 0),s([a(cc.Node)],h.prototype,"nod_rate",void 0),s([a(cc.Label)],h.prototype,"lbl_rate",void 0),i=s([i],h),r.default=i,cc._RF.pop()},{}],WorktopUnlockMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a31abVvtptFyZRzFnLsNFiJ","WorktopUnlockMgr");var n,i=t,a=e,r=o;n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},a=function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},Object.defineProperty(r,"__esModule",{value:!0});var c,s=i("GameMgr");function l(){return null!==c&&c.apply(this,arguments)||this}a(l,c=i("Singleton").default),l.prototype.getConfig=function(t){for(var e=[],o=0,n=s.gm.config.data.BuildWorktopUnlock;o<n.length;o++){var i=n[o];i.build_id==t&&e.push(i)}return e},a=l,r.default=a,cc._RF.pop()},{}],Zone:[function(t,e,o){"use strict";cc._RF.push(e,"1d2fbBGlGpEobib9AAjZD/5","Zone");var n,i=t,a=e,r=o,c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(r,"__esModule",{value:!0});var l,p=i("ConfigUtils"),u=i("Const"),d=i("GameMgr"),h=i("Utils"),_=i("IconUtils"),f=i("NodePoolItem");function g(){var t=l.call(this)||this;return t.chara_layer=null,t.wall_layer=null,t.pos_layer=null,t.button_node=null,t.outside_node=null,t.huahuati_node=null,t.mask_node=null,t.mapItem=null,t.tTempPos=cc.v2(0,0),t.pMainChara=null,t.tCharas=null,t.tPosMap=null,t.pCharaEventCb=null,t.pCharaEventCbTarget=null,t.cfgId=0,t.tFollowPos=cc.v2(0,0),t.bCameraIsFollow=!1,t.iFollowLimitSec=0,t.iCameraLimitLeft=0,t.iCameraLimitRight=0,t.iCameraLimitTop=0,t.iCameraLimitBottom=0,t.bNeedCameraFollow=!0,t.tDecorates=null,t._button_list=[],t.MAP_COUNT=144,t.COL_COUNT=9,t.ROW_COUNT=16,t.MAP_WIDTH=512,t.iFollowSpeed=.1,t.iFollowTime=.1,t._is_moving=!1,t}i=(a=cc._decorator).ccclass,a=a.property,c(g,l=f.NodePoolItem),g.prototype.onLoad=function(){},g.prototype.initMapItem=function(){for(var t=this,e=this.MAP_COUNT,o=this,n=0;n<e;n++)!function(e){o.check_is_in_screen(e+1,o.node.x,o.node.y)&&o.scheduleOnce(function(){t.add_map_node(e)},0)}(n)},g.prototype.check_is_in_screen=function(t,e,o){var n=(t-1)%this.ROW_COUNT+1-(this.ROW_COUNT+1)/2;return t=(this.COL_COUNT+1)/2-Math.floor((t-1)/this.ROW_COUNT)-1,n=Math.abs(-e/this.node.scale-n*this.MAP_WIDTH),t=Math.abs(-o/this.node.scale-t*this.MAP_WIDTH),n<this.node.width/2+this.MAP_WIDTH&&t<this.node.height+this.MAP_WIDTH},g.prototype.remove_one_map=function(t,e){void 0===e&&(e=!0),(t=this.node.children[1].getChildByName("map"+t))&&t.destroy()},g.prototype.check_screen_map=function(t){var e=this;if(void 0===t&&(t=!0),!(100<=this.cfgId))for(var o=this.MAP_COUNT,n=this,i=0;i<o;i++)!function(o){n.check_is_in_screen(o+1,n.node.x,n.node.y)?n.scheduleOnce(function(){e.add_map_node(o)},0):n.remove_one_map(o,t)}(i)},g.prototype.add_map_node=function(t){var e,o,n;this.node.children[1].getChildByName("map"+t)||(e=t%this.ROW_COUNT-Math.floor(this.ROW_COUNT/2),n=Math.floor(t/this.ROW_COUNT)-this.COL_COUNT/2,(o=cc.instantiate(this.mapItem)).getComponent(cc.Sprite).spriteFrame=null,o.name="map"+t,o.width=this.MAP_WIDTH,o.height=this.MAP_WIDTH,o.position=cc.v3(e*o.width+o.width/2,-n*o.height-o.width/2,0),this.node.children[1].addChild(o),n=Math.floor(t/this.ROW_COUNT),t=Math.floor(t%this.ROW_COUNT),_.IconUtils.setSpriteFrame(u.BundleName.MAIN_UI,"texture/zone/map"+this.cfgId+"/"+n+"_"+t,o.getComponent(cc.Sprite)))},g.prototype.remove_map=function(){for(var t=this.node.children[1].childrenCount,e=0;e<t;++e){var o=this.node.children[1].children[0];o&&(o.removeFromParent(),o.destroy())}},g.prototype.setCfgId=function(t){this.cfgId=t,this.cfgId<100&&(this.node.children[0].active=!0,this.initMapItem())},g.prototype.getCfgId=function(){return this.cfgId},g.prototype.reset=function(){null!=this.tDecorates&&this.refreshDecorateOpacity(!0),this.pCharaEventCb=null,this.pCharaEventCbTarget=null,this.pMainChara=null,this.tDecorates=null,cc.Tween.stopAllByTarget(this.node)},g.prototype.onEnable=function(){this.pos_layer.active=!1,this.tCharas={},this._button_list=[],this.mask_node.active=!1,this.initCharaLayerZIndex(),this.initPosMap(),this.initCameraLimit()},g.prototype.initCameraLimit=function(){d.gm.localData.explore_data.explore_scale=d.gm.localData.explore_data.explore_scale||d.gm.const.exploreMapInitScale;var t=this.chara_layer.width*d.gm.localData.explore_data.explore_scale,e=this.chara_layer.height*d.gm.localData.explore_data.explore_scale;this.iCameraLimitLeft=cc.winSize.width/2-t/2,this.iCameraLimitRight=t/2-cc.winSize.width/2,this.iCameraLimitTop=e/2-cc.winSize.height/2,this.iCameraLimitBottom=cc.winSize.height/2-e/2,this.iCameraLimitTop=this.iCameraLimitTop<0?0:this.iCameraLimitTop,this.iCameraLimitBottom=0<this.iCameraLimitBottom?0:this.iCameraLimitBottom,this.iCameraLimitLeft=this.iCameraLimitLeft/d.gm.localData.explore_data.explore_scale,this.iCameraLimitRight=this.iCameraLimitRight/d.gm.localData.explore_data.explore_scale,this.iCameraLimitTop=this.iCameraLimitTop/d.gm.localData.explore_data.explore_scale,this.iCameraLimitBottom=this.iCameraLimitBottom/d.gm.localData.explore_data.explore_scale},g.prototype.initPosMap=function(){if(null==this.tPosMap&&(this.tPosMap={},null!=this.pos_layer))for(var t=this.pos_layer.childrenCount,e=this.pos_layer.children,o=0;o<t;o++){var n=e[o];this.tPosMap[n.name],this.tPosMap[n.name]={x:n.x,y:n.y}}},g.prototype.getPos=function(t){return this.tPosMap[t]},g.prototype.initCharaLayerZIndex=function(){var t=this.chara_layer.childrenCount;this.tDecorates=[];for(var e=0;e<t;e++){var o=this.chara_layer.children[e];this.tDecorates.push({node:o,bIsHide:!1}),h.Utils.updateZIndexWithY(o)}},g.prototype.refreshDecorateOpacity=function(t){if((t=void 0!==t&&t)||null!=this.pMainChara)for(var e=0;e<this.tDecorates.length;e++){var o,n,i,a,r,c=this.tDecorates[e];t?(cc.Tween.stopAllByTarget(c.node),c.node.opacity=255):(o=c.node.x-c.node.width*c.node.anchorX,n=c.node.x+c.node.width*(1-c.node.anchorX),i=c.node.y+c.node.height*(1-c.node.anchorY),a=c.node.y-c.node.height*c.node.anchorY,r=!1,o<this.pMainChara.node.x&&this.pMainChara.node.x<n&&a<this.pMainChara.node.y&&this.pMainChara.node.y+this.pMainChara.node.height<i&&(r=!0),c.bIsHide!=r&&(c.bIsHide=r,cc.Tween.stopAllByTarget(c.node),r=r?100:255,cc.tween(c.node).to(.1,{opacity:r}).start()))}},g.prototype.removeChara=function(t){t&&(delete this.tCharas[t.getUid()],t.node&&t.node.removeFromParent())},g.prototype.getChara=function(t){return this.tCharas[t]},g.prototype.removeBullet=function(){for(var t in this.tCharas)this.tCharas[t].is_bullet&&d.gm.pool.put(this.tCharas[t].node)},g.prototype.addChara=function(t,e,o,n,i){if(void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=0),this.tCharas&&t&&this.tPosMap&&t.node&&((this.tCharas[t.getUid()]=t).setZone(this),t.setWalkSpeed(n),this.chara_layer)){for(var a=0;a<this.chara_layer.childrenCount;++a)if(this.chara_layer.children[a].uuid==t.node.uuid)return;if(this.chara_layer.addChild(t.node),null!=e&&""!=e){if(!this.tPosMap[e])return;this.tCharas[t.getUid()].node.x=this.tPosMap[e].x,this.tCharas[t.getUid()].node.y=this.tPosMap[e].y}null!=i&&(this.tCharas[t.getUid()].node.x=i.x,this.tCharas[t.getUid()].node.y=i.y),null!=o?t.node.zIndex=o:h.Utils.updateZIndexWithY(t.node)}},g.prototype.getCharaList=function(t){var e,o=[];for(e in this.tCharas)this.tCharas[e].getCfgId()==t&&o.push(this.tCharas[e]);return o},g.prototype.getCharaListByType=function(t){var e,o=[];for(e in this.tCharas){var n=this.tCharas[e];0<n.getCfgId()&&(n=p.OutSideMapResUtils.getConfig(this.cfgId,n.getCfgId()))&&t==n.res_type&&o.push(this.tCharas[e])}return o},g.prototype.getCharaListByResId=function(t){var e,o=[];for(e in this.tCharas){var n=this.tCharas[e];0<n.getCfgId()&&(n=p.OutSideMapResUtils.getConfig(this.cfgId,n.getCfgId()))&&Math.floor(t/10)==Math.floor(n.res_id/10)&&o.push(this.tCharas[e])}return o},g.prototype.getCharaListByAddType=function(){},g.prototype.getCharaListByGroup=function(){return[]},g.prototype.addMainChara=function(t){this.addChara(t,null,null,260,null),this.pMainChara=t,(t=this.pMainChara.getsCurAniName())&&"stay"!=t&&(this.pMainChara.chara_spine.setAnimation(0,"stay",!1),this.pMainChara.setsCurAniName("stay"))},g.prototype.getMainChara=function(){return this.pMainChara},g.prototype.removeMainChara=function(){this.removeChara(this.pMainChara),this.pMainChara=null},g.prototype.addCharaEventCb=function(t,e){void 0===e&&(e=null),this.pCharaEventCb=t,this.pCharaEventCbTarget=e},g.prototype.onCharaEvent=function(t,e){null==this.pCharaEventCbTarget?this.pCharaEventCb&&this.pCharaEventCb(t,e):this.pCharaEventCb.apply(this.pCharaEventCbTarget,[t,e])},g.prototype.onDisable=function(){this._button_list=[],this.unscheduleAllCallbacks()},g.prototype.update=function(t){for(var e in this.tCharas)(e=this.tCharas[e])&&e.updateLogic(t);this.refreshDecorateOpacity(),this.updateCameraFollow(t)},g.prototype.updateCameraFollow=function(t){var e,o=this;this.iFollowTime+=t,.5<=this.iFollowTime&&(this.check_is_start_follow(),this.iFollowTime=0),!this.bNeedCameraFollow||this.bCameraIsFollow||null==this.pMainChara||this.iFollowLimitSec<=0&&!this.pMainChara.isWalking()||(this.iFollowLimitSec<this.iFollowSpeed?this.iFollowLimitSec++:(e=this.pMainChara.node.x,t=this.pMainChara.node.y,e=(e=e<this.iCameraLimitLeft?this.iCameraLimitLeft:e)>this.iCameraLimitRight?this.iCameraLimitRight:e,t=(t=t<this.iCameraLimitBottom?this.iCameraLimitBottom:t)>this.iCameraLimitTop?this.iCameraLimitTop:t,this.tFollowPos.x=-1*e,this.tFollowPos.y=-1*t,h.Utils.distance(this.node,this.tFollowPos)<=1?this.iFollowLimitSec=0:(this.tFollowPos=this.check_zone_pos(this.tFollowPos,d.gm.localData.explore_data.explore_scale),cc.tween(this.node).to(this.iFollowSpeed,{x:this.tFollowPos.x,y:this.tFollowPos.y}).call(function(){o.bCameraIsFollow=!1,o.iFollowSpeed=.1}).start(),this.check_screen_map(!1))))},Object.defineProperty(g.prototype,"is_moving",{set:function(t){this._is_moving=t},enumerable:!1,configurable:!0}),g.prototype.check_is_start_follow=function(){},g.prototype.check_zone_pos=function(t,e){var o=this.cfgId<1e3?d.gm.const.exploreMapX:d.gm.const.roomPetMapX,n=this.cfgId<1e3?d.gm.const.exploreMapY:d.gm.const.roomPetMapY;return t.x<=(360-o*e/2)/e&&(t.x=(360-o*e/2)/e),t.x>=(o*e/2-360)/e&&(t.x=(o*e/2-360)/e),t.y<=(840-n*e/2)/e&&(t.y=(840-n*e/2)/e),t.y>=(n*e/2-840)/e&&(t.y=(n*e/2-840)/e),t},g.prototype.getTouchPos=function(t){return this.chara_layer.convertToNodeSpaceAR(t.getLocation(),this.tTempPos)},g.prototype.checkHitWall=function(t,e){for(var o=this.wall_layer.childrenCount,n=this.wall_layer.children,i=0;i<o;i++){var a=n[i];if(a.active&&h.Utils.isPosInRect(t,e,a))return!0}return!1},g.prototype.setNeedCameraFollow=function(t){this.bNeedCameraFollow=t},Object.defineProperty(g.prototype,"needCameraFollow",{get:function(){return this.bNeedCameraFollow},enumerable:!1,configurable:!0}),g.prototype.getCharaLayer=function(){return this.chara_layer},g.prototype.create_button_effect=function(){},g.prototype.remove_button_effect=function(t){for(var e=0;e<this._button_list.length;e++)this._button_list[e]==t&&this._button_list.splice(e,1)},s([a(cc.Node)],g.prototype,"chara_layer",void 0),s([a(cc.Node)],g.prototype,"wall_layer",void 0),s([a(cc.Node)],g.prototype,"pos_layer",void 0),s([a(cc.Node)],g.prototype,"button_node",void 0),s([a(cc.Node)],g.prototype,"outside_node",void 0),s([a(cc.Node)],g.prototype,"huahuati_node",void 0),s([a(cc.Node)],g.prototype,"mask_node",void 0),s([a(cc.Prefab)],g.prototype,"mapItem",void 0),i=s([i],g),r.default=i,cc._RF.pop()},{}],_process:[function(t,e){"use strict";cc._RF.push(e,"85ef6nmEBJN9JUiAHnTUO6t","_process");var o,n,i=(i=e).exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var s,l=[],p=!1,u=-1;function d(){p&&s&&(p=!1,s.length?l=s.concat(l):u=-1,l.length&&h())}function h(){if(!p){var t=c(d);p=!0;for(var e=l.length;e;){for(s=l,l=[];++u<e;)s&&s[u].run();u=-1,e=l.length}s=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function f(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];l.push(new _(t,e)),1!==l.length||p||c(h)},_.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0},cc._RF.pop()},{}],algo:[function(t,e){"use strict";cc._RF.push(e,"6dd31vOKz5GxqMimAD48/W+","algo");var o=e,n={cipher:function(t,e){for(var o=e.length/4-1,i=[[],[],[],[]],a=0;a<16;a++)i[a%4][Math.floor(a/4)]=t[a];i=n.addRoundKey(i,e,0,4);for(var r=1;r<o;r++)i=n.subBytes(i,4),i=n.shiftRows(i,4),i=n.mixColumns(i,4),i=n.addRoundKey(i,e,r,4);i=n.subBytes(i,4),i=n.shiftRows(i,4),i=n.addRoundKey(i,e,o,4);var c=new Array(16);for(a=0;a<16;a++)c[a]=i[a%4][Math.floor(a/4)];return c},keyExpansion:function(t){for(var e=t.length/4,o=6+e,i=new Array(4*(1+o)),a=new Array(4),r=0;r<e;r++){var c=[t[4*r],t[4*r+1],t[4*r+2],t[4*r+3]];i[r]=c}for(r=e;r<4*(1+o);r++){i[r]=new Array(4);for(var s=0;s<4;s++)a[s]=i[r-1][s];if(r%e==0)for(a=n.subWord(n.rotWord(a)),s=0;s<4;s++)a[s]^=n.rCon[r/e][s];else 6<e&&r%e==4&&(a=n.subWord(a));for(s=0;s<4;s++)i[r][s]=i[r-e][s]^a[s]}return i},subBytes:function(t,e){for(var o=0;o<4;o++)for(var i=0;i<e;i++)t[o][i]=n.sBox[t[o][i]];return t},shiftRows:function(t,e){for(var o=new Array(4),n=1;n<4;n++){for(var i=0;i<4;i++)o[i]=t[n][(i+n)%e];for(i=0;i<4;i++)t[n][i]=o[i]}return t},mixColumns:function(t){for(var e=0;e<4;e++){for(var o=new Array(4),n=new Array(4),i=0;i<4;i++)o[i]=t[i][e],n[i]=128&t[i][e]?t[i][e]<<1^283:t[i][e]<<1;t[0][e]=n[0]^o[1]^n[1]^o[2]^o[3],t[1][e]=o[0]^n[1]^o[2]^n[2]^o[3],t[2][e]=o[0]^o[1]^n[2]^o[3]^n[3],t[3][e]=o[0]^n[0]^o[1]^o[2]^n[3]}return t},addRoundKey:function(t,e,o,n){for(var i=0;i<4;i++)for(var a=0;a<n;a++)t[i][a]^=e[4*o+a][i];return t},subWord:function(t){for(var e=0;e<4;e++)t[e]=n.sBox[t[e]];return t},rotWord:function(t){for(var e=t[0],o=0;o<3;o++)t[o]=t[o+1];return t[3]=e,t},sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]]};void 0!==o&&o.exports&&(o.exports=n),"function"==typeof define&&define.amd&&define([],function(){return n}),cc._RF.pop()},{}],"background-adapter":[function(t,e,o){"use strict";cc._RF.push(e,"457af8z/chBRLjK4eYIo/vj","background-adapter");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=cc._decorator;function l(){return null!==c&&c.apply(this,arguments)||this}i=s.ccclass,s.property,r(l,c=cc.Component),l.prototype.onLoad=function(){var t=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),e=this.node.width*t;t=this.node.height*t,this.node.scale=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/t)},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([i],l),a.default=i,cc._RF.pop()},{}],"base64-js":[function(t,e,o){"use strict";cc._RF.push(e,"445d8dvwQxDfLuMiaskXwa+","base64-js");var n=o;n.byteLength=function(t){var e=p(t);return 3*((t=e[0])+(e=e[1]))/4-e},n.toByteArray=function(t){for(var e,o=(n=p(t))[0],n=n[1],i=new r(3*(o+n)/4-n),c=0,s=0<n?o-4:o,l=0;l<s;l+=4)e=a[t.charCodeAt(l)]<<18|a[t.charCodeAt(l+1)]<<12|a[t.charCodeAt(l+2)]<<6|a[t.charCodeAt(l+3)],i[c++]=e>>16&255,i[c++]=e>>8&255,i[c++]=255&e;return 2===n&&(e=a[t.charCodeAt(l)]<<2|a[t.charCodeAt(l+1)]>>4,i[c++]=255&e),1===n&&(e=a[t.charCodeAt(l)]<<10|a[t.charCodeAt(l+1)]<<4|a[t.charCodeAt(l+2)]>>2,i[c++]=e>>8&255,i[c++]=255&e),i},n.fromByteArray=function(t){for(var e,o=t.length,n=o%3,a=[],r=0,c=o-n;r<c;r+=16383)a.push(function(t,e){for(var o,n=[],a=r;a<e;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),n.push(i[o>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return n.join("")}(t,c<r+16383?c:r+16383));return 1==n?(e=t[o-1],a.push(i[e>>2]+i[e<<4&63]+"==")):2==n&&(e=(t[o-2]<<8)+t[o-1],a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),a.join("")};for(var i=[],a=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=c.length;s<l;++s)i[s]=c[s],a[c.charCodeAt(s)]=s;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");return[t=-1===(t=t.indexOf("="))?e:t,t===e?0:4-t%4]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63,cc._RF.pop()},{}],beans:[function(t,e,o){"use strict";cc._RF.push(e,"a75735cqo9GoLOV/rmPTb8Z","beans");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),n.TreasureItemVo=n.ItemVo=n.MsgBattleBegin=n.MsgBattleEnd=n.ZoneResVo=n.Point=n.SearchPathPoint=void 0,n.SearchPathPoint=function(){this.sKey="",this.x=0,this.y=0,this.f=0,this.g=0,this.h=0,this.tParent=null,this.bIsEndPos=!1},n.Point=function(){this.x=0,this.y=0},n.ZoneResVo=function(){this.leftCount=0},i.STATUS_WIN=1,i.STATUS_LOSE=2,i.STATUS_ESCAPE=3,n.MsgBattleEnd=i,n.MsgBattleBegin=function(){},n.ItemVo=function(){},n.TreasureItemVo=function(){},cc._RF.pop()},{}],buffer:[function(t,e,o){(function(n){"use strict";cc._RF.push(e,"ceecc+FRMpMPYb33zWrTc3e","buffer");var i=t,a=o;(function(t){var e=i("base64-js"),o=i("ieee754"),n=i("isarray");function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(t=null===t?new s(e):t).length=e,t}function s(t,e,o){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,o);if("number"!=typeof t)return l(this,t,e,o);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}function l(t,e,o,i){if("number"==typeof e)throw new TypeError("'value' argument must not be a number");return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,o,n){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===o&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,o):new Uint8Array(e,o,n),s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=d(t,e),t}(t,e,o,i):"string"==typeof e?function(t,e,o){if(!s.isEncoding(o="string"!=typeof o||""===o?"utf8":o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,o);return(o=(t=c(t,n)).write(e,o))!==n?t.slice(0,o):t}(t,e,o):function(t,e){if(s.isBuffer(e)){var o=0|h(e.length);return 0===(t=c(t,o)).length||e.copy(t,0,0,o),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?c(t,0):d(t,e);if("Buffer"===e.type&&n(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(p(e),t=c(t,e<0?0:0|h(e)),!s.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function d(t,e){var o=e.length<0?0:0|h(e.length);t=c(t,o);for(var n=0;n<o;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function _(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var o=(t="string"!=typeof t?""+t:t).length;if(0===o)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return T(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return j(t).length;default:if(n)return T(t).length;e=(""+e).toLowerCase(),n=!0}}function f(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function g(t,e,o,n,i){if(0===t.length)return-1;if("string"==typeof o?(n=o,o=0):2147483647<o?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,(o=(o=isNaN(o)?i?0:t.length-1:o)<0?t.length+o:o)>=t.length){if(i)return-1;o=t.length-1}else if(o<0){if(!i)return-1;o=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:y(t,e,o,n,i);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,o):y(t,[e],o,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,o,n,i){var a=1,r=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;r/=a=2,c/=2,o/=2}function s(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i)for(var l=-1,p=o;p<r;p++)if(s(t,p)===s(e,-1===l?0:p-l)){if(p-(l=-1===l?p:l)+1===c)return l*a}else-1!==l&&(p-=p-l),l=-1;else for(p=o=r<o+c?r-c:o;0<=p;p--){for(var u=!0,d=0;d<c;d++)if(s(t,p+d)!==s(e,d)){u=!1;break}if(u)return p}return-1}function m(t,e,o,n){return k(function(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}(e),t,o,n)}function v(t,e,o){o=Math.min(t.length,o);for(var n=[],i=e;i<o;){var a,r,c,s,l=t[i],p=null,u=239<l?4:223<l?3:191<l?2:1;if(i+u<=o)switch(u){case 1:l<128&&(p=l);break;case 2:128==(192&(a=t[i+1]))&&127<(s=(31&l)<<6|63&a)&&(p=s);break;case 3:a=t[i+1],r=t[i+2],128==(192&a)&&128==(192&r)&&2047<(s=(15&l)<<12|(63&a)<<6|63&r)&&(s<55296||57343<s)&&(p=s);break;case 4:a=t[i+1],r=t[i+2],c=t[i+3],128==(192&a)&&128==(192&r)&&128==(192&c)&&65535<(s=(15&l)<<18|(63&a)<<12|(63&r)<<6|63&c)&&s<1114112&&(p=s)}null===p?(p=65533,u=1):65535<p&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),i+=u}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);for(var o="",n=0;n<e;)o+=String.fromCharCode.apply(String,t.slice(n,n+=b));return o}(n)}a.Buffer=s,a.SlowBuffer=function(t){return s.alloc(+(t=+t!=t?0:t))},a.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),a.kMaxLength=r(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,o){return l(null,t,e,o)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,o){return p(t),t<=0||void 0===e?c(null,t):"string"==typeof o?c(null,t).fill(e,o):c(null,t).fill(e)},s.allocUnsafe=function(t){return u(null,t)},s.allocUnsafeSlow=function(t){return u(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,n=e.length,i=0,a=Math.min(o,n);i<a;++i)if(t[i]!==e[i]){o=t[i],n=e[i];break}return o<n?-1:n<o?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!n(t))throw new TypeError("'list' argument must be an Array of Buffers");if(0===t.length)return s.alloc(0);if(void 0===e)for(a=e=0;a<t.length;++a)e+=t[a].length;for(var o=s.allocUnsafe(e),i=0,a=0;a<t.length;++a){var r=t[a];if(!s.isBuffer(r))throw new TypeError("'list' argument must be an Array of Buffers");r.copy(o,i),i+=r.length}return o},s.byteLength=_,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)f(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)f(this,e,e+3),f(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)f(this,e,e+7),f(this,e+1,e+6),f(this,e+2,e+5),f(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?v(this,0,t):function(t,o,n){var i,a,r=!1;if((o=void 0===o||o<0?0:o)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(o>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,o){var n,i=t.length;(!o||o<0||i<o)&&(o=i);for(var a="",r=e=!e||e<0?0:e;r<o;++r)a+=(n=t[r])<16?"0"+n.toString(16):n.toString(16);return a}(this,o,n);case"utf8":case"utf-8":return v(this,o,n);case"ascii":return function(t,e,o){var n="";o=Math.min(t.length,o);for(var i=e;i<o;++i)n+=String.fromCharCode(127&t[i]);return n}(this,o,n);case"latin1":case"binary":return function(t,e,o){var n="";o=Math.min(t.length,o);for(var i=e;i<o;++i)n+=String.fromCharCode(t[i]);return n}(this,o,n);case"base64":return a=n,0===(i=o)&&a===this.length?e.fromByteArray(this):e.fromByteArray(this.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,o){for(var n=t.slice(e,o),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,o,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=a.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,o,n,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(e=void 0===e?0:e)<0||o>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&o<=e)return 0;if(i<=n)return-1;if(o<=e)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),r=(o>>>=0)-(e>>>=0),c=Math.min(a,r),l=this.slice(n,i),p=t.slice(e,o),u=0;u<c;++u)if(l[u]!==p[u]){a=l[u],r=p[u];break}return a<r?-1:r<a?1:0},s.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},s.prototype.indexOf=function(t,e,o){return g(this,t,e,o,!0)},s.prototype.lastIndexOf=function(t,e,o){return g(this,t,e,o,!1)},s.prototype.write=function(t,e,o,n){if(void 0===e)n="utf8",o=this.length,e=0;else if(void 0===o&&"string"==typeof e)n=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var i=this.length-e;if((void 0===o||i<o)&&(o=i),0<t.length&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var a,r,c,s,l,p=!1;;)switch(n){case"hex":return function(t,o,n,i){n=Number(e)||0;var a=t.length-n;if((!i||(i=Number(i))>a)&&(i=a),(a=o.length)%2!=0)throw new TypeError("Invalid hex string");a/2<i&&(i=a/2);for(var r=0;r<i;++r){var c=parseInt(o.substr(2*r,2),16);if(isNaN(c))return r;t[n+r]=c}return r}(this,t,0,o);case"utf8":case"utf-8":return r=e,c=o,k(T(t,(a=this).length-r),a,r,c);case"ascii":return m(this,t,e,o);case"latin1":case"binary":return m(this,t,e,o);case"base64":return a=this,r=e,c=o,k(j(t),a,r,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=e,l=o,k(function(t,e){for(var o,n,i=[],a=0;a<t.length&&!((e-=2)<0);++a)o=(n=t.charCodeAt(a))>>8,i.push(n%=256),i.push(o);return i}(t,this.length-s),this,s,l);default:if(p)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function I(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(o<t+e)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,o,n,i,a){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<a)throw new RangeError("'value' argument is out of bounds");if(o+n>t.length)throw new RangeError("Index out of range")}function C(t,e,o,n){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-o,2);i<a;++i)t[o+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function O(t,e,o,n){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-o,4);i<a;++i)t[o+i]=e>>>8*(n?i:3-i)&255}function w(t,e,o,n){if(o+n>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function M(t,e,n,i,a){return a||w(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function P(t,e,n,i,a){return a||w(t,0,n,8),o.write(t,e,n,i,52,8),n+8}s.prototype.slice=function(t,e){var o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):o<t&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):o<e&&(e=o),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=s.prototype;else for(var n=e-t,i=new s(n,void 0),a=0;a<n;++a)i[a]=this[a+t];return i},s.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||I(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},s.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||I(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||I(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||I(t,e,this.length);for(var n=e,i=1,a=this[t+--n];0<n&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},s.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){return e||I(t,2,this.length),32768&(t=this[t]|this[t+1]<<8)?4294901760|t:t},s.prototype.readInt16BE=function(t,e){return e||I(t,2,this.length),32768&(t=this[t+1]|this[t]<<8)?4294901760|t:t},s.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,o,n){t=+t,e|=0,o|=0,n||D(this,t,e,o,Math.pow(2,8*o)-1,0);var i=1,a=0;for(this[e]=255&t;++a<o&&(i*=256);)this[e+a]=t/i&255;return e+o},s.prototype.writeUIntBE=function(t,e,o,n){t=+t,e|=0,o|=0,n||D(this,t,e,o,Math.pow(2,8*o)-1,0);var i=o-1,a=1;for(this[e+i]=255&t;0<=--i&&(a*=256);)this[e+i]=t/a&255;return e+o},s.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,o,n){t=+t,e|=0,n||D(this,t,e,o,(n=Math.pow(2,8*o-1))-1,-n);var i=0,a=1,r=0;for(this[e]=255&t;++i<o&&(a*=256);)t<0&&0===r&&0!==this[e+i-1]&&(r=1),this[e+i]=(t/a>>0)-r&255;return e+o},s.prototype.writeIntBE=function(t,e,o,n){t=+t,e|=0,n||D(this,t,e,o,(n=Math.pow(2,8*o-1))-1,-n);var i=o-1,a=1,r=0;for(this[e+i]=255&t;0<=--i&&(a*=256);)t<0&&0===r&&0!==this[e+i+1]&&(r=1),this[e+i]=(t/a>>0)-r&255;return e+o},s.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},s.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,o){return M(this,t,e,!0,o)},s.prototype.writeFloatBE=function(t,e,o){return M(this,t,e,!1,o)},s.prototype.writeDoubleLE=function(t,e,o){return P(this,t,e,!0,o)},s.prototype.writeDoubleBE=function(t,e,o){return P(this,t,e,!1,o)},s.prototype.copy=function(t,e,o,n){if(o=o||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),(n=0<n&&n<o?o:n)===o)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i,a=(n=t.length-e<n-o?t.length-e+o:n)-o;if(this===t&&o<e&&e<n)for(i=a-1;0<=i;--i)t[i+e]=this[i+o];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+a),e);return a},s.prototype.fill=function(t,e,o,n){if("string"==typeof t){var i;if("string"==typeof e?(n=e,e=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===t.length&&(i=t.charCodeAt(0))<256&&(t=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;if(e>>>=0,o=void 0===o?this.length:o>>>0,"number"==typeof(t=t||0))for(c=e;c<o;++c)this[c]=t;else for(var a=s.isBuffer(t)?t:T(new s(t,n).toString()),r=a.length,c=0;c<o-e;++c)this[c+e]=a[c%r];return this};var S=/[^+\/0-9A-Za-z-_]/g;function T(t,e){var o;e=e||1/0;for(var n=t.length,i=null,a=[],r=0;r<n;++r){if(55295<(o=t.charCodeAt(r))&&o<57344){if(!i){if(56319<o){-1<(e-=3)&&a.push(239,191,189);continue}if(r+1===n){-1<(e-=3)&&a.push(239,191,189);continue}i=o;continue}if(o<56320){-1<(e-=3)&&a.push(239,191,189),i=o;continue}o=65536+(i-55296<<10|o-56320)}else i&&-1<(e-=3)&&a.push(239,191,189);if(i=null,o<128){if(--e<0)break;a.push(o)}else if(o<2048){if((e-=2)<0)break;a.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;a.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return a}function j(t){return e.toByteArray(function(t){if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(S,"")).length<2)return"";for(var e;t.length%4!=0;)t+="=";return t}(t))}function k(t,e,o,n){for(var i=0;i<n&&!(i+o>=e.length||i>=t.length);++i)e[i+o]=t[i];return i}}).call(void 0,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"content-adapter":[function(t,e,o){"use strict";cc._RF.push(e,"f2a3edz5WJI2oGwq1aMksKf","content-adapter");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(a,"__esModule",{value:!0});var c,s=(l=cc._decorator).ccclass,l=(l.property,i=l.menu,l.disallowMultiple);function p(){return null!==c&&c.apply(this,arguments)||this}r(p,c=cc.Component),p.prototype.onLoad=function(){var t=cc.director.getScene().getComponentInChildren(cc.Canvas);t.fitWidth&&!t.fitHeight?this.adaptWidth():t.fitHeight&&!t.fitWidth?this.adaptHeight():this.adaptShowAll()},p.prototype.adaptShowAll=function(){var t=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),e=this.node.width*t;t=this.node.height*t,this.node.width=this.node.width*(cc.view.getCanvasSize().width/e),this.node.height=this.node.height*(cc.view.getCanvasSize().height/t)},p.prototype.adaptWidth=function(){var t=cc.view.getCanvasSize().width/this.node.width,e=this.node.width*t;t=this.node.height*t,this.node.width=this.node.width*(cc.view.getCanvasSize().width/e),this.node.height=this.node.height*(cc.view.getCanvasSize().height/t)},p.prototype.adaptHeight=function(){var t=cc.view.getCanvasSize().height/this.node.height,e=this.node.width*t;t=this.node.height*t,this.node.width=this.node.width*(cc.view.getCanvasSize().width/e),this.node.height=this.node.height*(cc.view.getCanvasSize().height/t)},i=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r}([s,l(),i("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/ContentAdapter")],p),a.default=i,cc._RF.pop()},{}],cycle:[function(require,module,exports){"use strict";cc._RF.push(module,"191b1YAG2NCn6tO8xE4ZREX","cycle");var c=require,d=module,e=exports;"function"!=typeof JSON.decycle&&(JSON.decycle=function(t,e){var o=new WeakMap;return function t(n,i){var a,r;return"object"!=typeof(n=void 0!==e?e(n):n)||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String?n:void 0!==(a=o.get(n))?{$ref:a}:(o.set(n,i),Array.isArray(n)?(r=[],n.forEach(function(e,o){r[o]=t(e,i+"["+o+"]")})):(r={},Object.keys(n).forEach(function(e){r[e]=t(n[e],i+"["+JSON.stringify(e)+"]")})),r)}(t,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function f(g){var h=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return function i(j){j&&"object"==typeof j&&(Array.isArray(j)?j.forEach(function(k,l){var m;"object"==typeof k&&null!==k&&(m=k.$ref,"string"==typeof m&&h.test(m)?j[l]=eval(m):i(k))}):Object.keys(j).forEach(function(k){var l=j[k],m;"object"==typeof l&&null!==l&&(m=l.$ref,"string"==typeof m&&h.test(m)?j[k]=eval(m):i(l))}))}(g),g}),cc._RF.pop()},{}],encryptjs:[function(t,e,o){"use strict";cc._RF.push(e,"c2b1aS3o8hEzJohHYUOjCaZ","encryptjs");var n=t,i=e,a=o;(function(t){!function(t){void 0!==a&&void 0!==i?i.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):"function"==typeof define&&"object"==typeof define.petal?define("encryptjs",[],t):this.encryptjs=t()}(function(e){var o;(e={version:"1.0.0"}).init=function(){console.log("--------------------Applying Encryption Algorithm------------------ ")},void 0!==i&&i.exports&&(o=n("algo")),e.encrypt=function(t,n,i){if(128!=i&&192!=i&&256!=i)return"";t=String(t).utf8Encode(),n=String(n).utf8Encode();for(var a=i/8,r=new Array(a),c=0;c<a;c++)r[c]=isNaN(n.charCodeAt(c))?0:n.charCodeAt(c);var s=(s=o.cipher(r,o.keyExpansion(r))).concat(s.slice(0,a-16)),l=new Array(16),p=(i=(new Date).getTime())%1e3,u=Math.floor(i/1e3),d=Math.floor(65535*Math.random());for(c=0;c<2;c++)l[c]=p>>>8*c&255;for(c=0;c<2;c++)l[c+2]=d>>>8*c&255;for(c=0;c<4;c++)l[c+4]=u>>>8*c&255;var h="";for(c=0;c<8;c++)h+=String.fromCharCode(l[c]);for(var _=o.keyExpansion(s),f=Math.ceil(t.length/16),g=new Array(f),y=0;y<f;y++){for(var m=0;m<4;m++)l[15-m]=y>>>8*m&255;for(m=0;m<4;m++)l[15-m-4]=y/4294967296>>>8*m;var v=o.cipher(l,_),b=y<f-1?16:(t.length-1)%16+1,I=new Array(b);for(c=0;c<b;c++)I[c]=v[c]^t.charCodeAt(16*y+c),I[c]=String.fromCharCode(I[c]);g[y]=I.join("")}return s=h+g.join(""),e.base64Encode(s)},e.decrypt=function(t,n,i){if(128!=i&&192!=i&&256!=i)return"";t=e.base64Decode(String(t)),n=String(n).utf8Encode();for(var a=i/8,r=new Array(a),c=0;c<a;c++)r[c]=isNaN(n.charCodeAt(c))?0:n.charCodeAt(c);i=(i=o.cipher(r,o.keyExpansion(r))).concat(i.slice(0,a-16));var s=new Array(8),l=t.slice(0,8);for(c=0;c<8;c++)s[c]=l.charCodeAt(c);for(var p=o.keyExpansion(i),u=Math.ceil((t.length-8)/16),d=new Array(u),h=0;h<u;h++)d[h]=t.slice(8+16*h,24+16*h);t=d;var _=new Array(t.length);for(h=0;h<u;h++){for(var f=0;f<4;f++)s[15-f]=h>>>8*f&255;for(f=0;f<4;f++)s[15-f-4]=(h+1)/4294967296-1>>>8*f&255;var g=o.cipher(s,p),y=new Array(t[h].length);for(c=0;c<t[h].length;c++)y[c]=g[c]^t[h].charCodeAt(c),y[c]=String.fromCharCode(y[c]);_[h]=y.join("")}return _.join("").utf8Decode()};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return e.base64Encode=function(t){var o,n,i,r,c,s,l="",p=0;for(t=e._utf8_encode(t);p<t.length;)i=(s=t.charCodeAt(p++))>>2,r=(3&s)<<4|(o=t.charCodeAt(p++))>>4,c=(15&o)<<2|(n=t.charCodeAt(p++))>>6,s=63&n,isNaN(o)?c=s=64:isNaN(n)&&(s=64),l=l+a.charAt(i)+a.charAt(r)+a.charAt(c)+a.charAt(s);return l},e.base64Decode=function(t){var o,n,i,r,c,s="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)o=a.indexOf(t.charAt(l++))<<2|(i=a.indexOf(t.charAt(l++)))>>4,n=(15&i)<<4|(r=a.indexOf(t.charAt(l++)))>>2,i=(3&r)<<6|(c=a.indexOf(t.charAt(l++))),s+=String.fromCharCode(o),64!=r&&(s+=String.fromCharCode(n)),64!=c&&(s+=String.fromCharCode(i));return e._utf8_decode(s)},e._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o);n<128?e+=String.fromCharCode(n):(127<n&&n<2048?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e},e._utf8_decode=function(t){for(var e,o="",n=0,i=0;n<t.length;)(e=t.charCodeAt(n))<128?(o+=String.fromCharCode(e),n++):191<e&&e<224?(i=t.charCodeAt(n+1),o+=String.fromCharCode((31&e)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),o+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&c3),n+=3);return o},e.getTextEncryptAndSaveToTextFile=function(){throw Error("Command line not supported on this platform")},e.getTextEncryptAndSaveToJSONFile=function(){throw Error("Command line not supported on this platform")},e.writeCipherTextToJSON=function(t,e,o,n){null==n&&(n=o,o={});var i=("object"==typeof o&&null!==o&&"spaces"in o?o:this).spaces;try{JSON.stringify(e,o?o.replacer:null,i)}catch(t){if(n)return n(t,null)}},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}}),void 0===String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if("undefined"!=typeof btoa)return btoa(this);if(void 0!==t)return new t(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),void 0===String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if("undefined"!=typeof atob)return atob(this);if(void 0!==t)return new t(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),e.init(),e})}).call(void 0,n("buffer").Buffer),cc._RF.pop()},{}],ieee754:[function(t,e,o){"use strict";cc._RF.push(e,"626f2QhVHJLz4cG2naPXTj5","ieee754");var n=o;n.read=function(t,e,o,n,i){var a,r,c=8*i-n-1,s=(1<<c)-1,l=s>>1,p=-7,u=o?i-1:0,d=o?-1:1;for(o=t[e+u],u+=d,a=o&(1<<-p)-1,o>>=-p,p+=c;0<p;a=256*a+t[e+u],u+=d,p-=8);for(r=a&(1<<-p)-1,a>>=-p,p+=n;0<p;r=256*r+t[e+u],u+=d,p-=8);if(0===a)a=1-l;else{if(a===s)return r?NaN:1/0*(o?-1:1);r+=Math.pow(2,n),a-=l}return(o?-1:1)*r*Math.pow(2,a-n)},n.write=function(t,e,o,n,i,a){var r,c,s=8*a-i-1,l=(1<<s)-1,p=l>>1,u=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,h=n?1:-1;for(a=e<0||0===e&&1/e<0?1:0,e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,r=l):(r=Math.floor(Math.log(e)/Math.LN2),e*(n=Math.pow(2,-r))<1&&(r--,n*=2),2<=(e+=1<=r+p?u/n:u*Math.pow(2,1-p))*n&&(r++,n/=2),l<=r+p?(c=0,r=l):1<=r+p?(c=(e*n-1)*Math.pow(2,i),r+=p):(c=e*Math.pow(2,p-1)*Math.pow(2,i),r=0));8<=i;t[o+d]=255&c,d+=h,c/=256,i-=8);for(r=r<<i|c,s+=i;0<s;t[o+d]=255&r,d+=h,r/=256,s-=8);t[o+d-h]|=128*a},cc._RF.pop()},{}],isarray:[function(t,e){"use strict";cc._RF.push(e,"03458GOn0tLNZlOzs29wQjc","isarray");var o={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)},cc._RF.pop()},{}],lzstring:[function(t,e){"use strict";cc._RF.push(e,"151a2J3URdPjLbbo8D6MXdS","lzstring");var o,n,i,a,r,c=e,s=(o=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},r={compressToBase64:function(t){if(null==t)return"";var e=r._compress(t,6,function(t){return n.charAt(t)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:r._decompress(t.length,32,function(e){return l(n,t.charAt(e))})},compressToUTF16:function(t){return null==t?"":r._compress(t,15,function(t){return o(t+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:r._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=r.compress(t),o=new Uint8Array(2*e.length),n=0,i=e.length;n<i;n++){var a=e.charCodeAt(n);o[2*n]=a>>>8,o[2*n+1]=a%256}return o},decompressFromUint8Array:function(t){if(null==t)return r.decompress(t);for(var e=new Array(t.length/2),n=0,i=e.length;n<i;n++)e[n]=256*t[2*n]+t[2*n+1];var a=[];return e.forEach(function(t){a.push(o(t))}),r.decompress(a.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":r._compress(t,6,function(t){return i.charAt(t)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(e){return l(i,t.charAt(e))}))},compress:function(t){return r._compress(t,16,function(t){return o(t)})},_compress:function(t,e,o){if(null==t)return"";for(var n,i,a,r,c={},s={},l="",p=2,u=3,d=2,h=[],_=0,f=0,g=0;g<t.length;g+=1)if(a=t.charAt(g),Object.prototype.hasOwnProperty.call(c,a)||(c[a]=u++,s[a]=!0),r=l+a,Object.prototype.hasOwnProperty.call(c,r))l=r;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++)_<<=1,f==e-1?(f=0,h.push(o(_)),_=0):f++;for(i=l.charCodeAt(0),n=0;n<8;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1}else{for(i=1,n=0;n<d;n++)_=_<<1|i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i=0;for(i=l.charCodeAt(0),n=0;n<16;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[l]}else for(i=c[l],n=0;n<d;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1;0==--p&&(p=Math.pow(2,d),d++),c[r]=u++,l=String(a)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++)_<<=1,f==e-1?(f=0,h.push(o(_)),_=0):f++;for(i=l.charCodeAt(0),n=0;n<8;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1}else{for(i=1,n=0;n<d;n++)_=_<<1|i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i=0;for(i=l.charCodeAt(0),n=0;n<16;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1}0==--p&&(p=Math.pow(2,d),d++),delete s[l]}else for(i=c[l],n=0;n<d;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1;0==--p&&(p=Math.pow(2,d),d++)}for(i=2,n=0;n<d;n++)_=_<<1|1&i,f==e-1?(f=0,h.push(o(_)),_=0):f++,i>>=1;for(;;){if(_<<=1,f==e-1){h.push(o(_));break}f++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:r._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(t,e,n){for(var i,a,r,c,s,l,p=[],u=4,d=4,h=3,_="",f=[],g={val:n(0),position:e,index:1},y=0;y<3;y+=1)p[y]=y;for(a=0,c=Math.pow(2,2),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;l=o(a);break;case 1:for(a=0,c=Math.pow(2,16),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;l=o(a);break;case 2:return""}for(i=p[3]=l,f.push(l);;){if(g.index>t)return"";for(a=0,c=Math.pow(2,h),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;switch(l=a){case 0:for(a=0,c=Math.pow(2,8),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;p[d++]=o(a),l=d-1,u--;break;case 1:for(a=0,c=Math.pow(2,16),s=1;s!=c;)r=g.val&g.position,g.position>>=1,0==g.position&&(g.position=e,g.val=n(g.index++)),a|=(0<r?1:0)*s,s<<=1;p[d++]=o(a),l=d-1,u--;break;case 2:return f.join("")}if(0==u&&(u=Math.pow(2,h),h++),p[l])_=p[l];else{if(l!==d)return null;_=i+i.charAt(0)}f.push(_),p[d++]=i+_.charAt(0),i=_,0==--u&&(u=Math.pow(2,h),h++)}}});function l(t,e){if(!a[t]){a[t]={};for(var o=0;o<t.length;o++)a[t][t.charAt(o)]=o}return a[t][e]}"function"==typeof define&&define.amd?define(function(){return s}):void 0!==c&&null!=c?c.exports=s:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return s}),cc._RF.pop()},{}],md5:[function(t,e,o){"use strict";cc._RF.push(e,"198555BrTVNmYZpwTVO1pTT","md5");var n=o;function i(){}Object.defineProperty(n,"__esModule",{value:!0}),i.hex_md5=function(t){return this.binl2hex(this.core_md5(this.str2binl(t),t.length*this.chrsz))},i.binl2hex=function(t){for(var e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",n=0;n<4*t.length;n++)o+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return o},i.core_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var o=1732584193,n=-271733879,i=-1732584194,a=271733878,r=0;r<t.length;r+=16){var c=o,s=n,l=i,p=a;o=this.md5_ff(o,n,i,a,t[r+0],7,-680876936),a=this.md5_ff(a,o,n,i,t[r+1],12,-389564586),i=this.md5_ff(i,a,o,n,t[r+2],17,606105819),n=this.md5_ff(n,i,a,o,t[r+3],22,-1044525330),o=this.md5_ff(o,n,i,a,t[r+4],7,-176418897),a=this.md5_ff(a,o,n,i,t[r+5],12,1200080426),i=this.md5_ff(i,a,o,n,t[r+6],17,-1473231341),n=this.md5_ff(n,i,a,o,t[r+7],22,-45705983),o=this.md5_ff(o,n,i,a,t[r+8],7,1770035416),a=this.md5_ff(a,o,n,i,t[r+9],12,-1958414417),i=this.md5_ff(i,a,o,n,t[r+10],17,-42063),n=this.md5_ff(n,i,a,o,t[r+11],22,-1990404162),o=this.md5_ff(o,n,i,a,t[r+12],7,1804603682),a=this.md5_ff(a,o,n,i,t[r+13],12,-40341101),i=this.md5_ff(i,a,o,n,t[r+14],17,-1502002290),n=this.md5_ff(n,i,a,o,t[r+15],22,1236535329),o=this.md5_gg(o,n,i,a,t[r+1],5,-165796510),a=this.md5_gg(a,o,n,i,t[r+6],9,-1069501632),i=this.md5_gg(i,a,o,n,t[r+11],14,643717713),n=this.md5_gg(n,i,a,o,t[r+0],20,-373897302),o=this.md5_gg(o,n,i,a,t[r+5],5,-701558691),a=this.md5_gg(a,o,n,i,t[r+10],9,38016083),i=this.md5_gg(i,a,o,n,t[r+15],14,-660478335),n=this.md5_gg(n,i,a,o,t[r+4],20,-405537848),o=this.md5_gg(o,n,i,a,t[r+9],5,568446438),a=this.md5_gg(a,o,n,i,t[r+14],9,-1019803690),i=this.md5_gg(i,a,o,n,t[r+3],14,-187363961),n=this.md5_gg(n,i,a,o,t[r+8],20,1163531501),o=this.md5_gg(o,n,i,a,t[r+13],5,-1444681467),a=this.md5_gg(a,o,n,i,t[r+2],9,-51403784),i=this.md5_gg(i,a,o,n,t[r+7],14,1735328473),n=this.md5_gg(n,i,a,o,t[r+12],20,-1926607734),o=this.md5_hh(o,n,i,a,t[r+5],4,-378558),a=this.md5_hh(a,o,n,i,t[r+8],11,-2022574463),i=this.md5_hh(i,a,o,n,t[r+11],16,1839030562),n=this.md5_hh(n,i,a,o,t[r+14],23,-35309556),o=this.md5_hh(o,n,i,a,t[r+1],4,-1530992060),a=this.md5_hh(a,o,n,i,t[r+4],11,1272893353),i=this.md5_hh(i,a,o,n,t[r+7],16,-155497632),n=this.md5_hh(n,i,a,o,t[r+10],23,-1094730640),o=this.md5_hh(o,n,i,a,t[r+13],4,681279174),a=this.md5_hh(a,o,n,i,t[r+0],11,-358537222),i=this.md5_hh(i,a,o,n,t[r+3],16,-722521979),n=this.md5_hh(n,i,a,o,t[r+6],23,76029189),o=this.md5_hh(o,n,i,a,t[r+9],4,-640364487),a=this.md5_hh(a,o,n,i,t[r+12],11,-421815835),i=this.md5_hh(i,a,o,n,t[r+15],16,530742520),n=this.md5_hh(n,i,a,o,t[r+2],23,-995338651),o=this.md5_ii(o,n,i,a,t[r+0],6,-198630844),a=this.md5_ii(a,o,n,i,t[r+7],10,1126891415),i=this.md5_ii(i,a,o,n,t[r+14],15,-1416354905),n=this.md5_ii(n,i,a,o,t[r+5],21,-57434055),o=this.md5_ii(o,n,i,a,t[r+12],6,1700485571),a=this.md5_ii(a,o,n,i,t[r+3],10,-1894986606),i=this.md5_ii(i,a,o,n,t[r+10],15,-1051523),n=this.md5_ii(n,i,a,o,t[r+1],21,-2054922799),o=this.md5_ii(o,n,i,a,t[r+8],6,1873313359),a=this.md5_ii(a,o,n,i,t[r+15],10,-30611744),i=this.md5_ii(i,a,o,n,t[r+6],15,-1560198380),n=this.md5_ii(n,i,a,o,t[r+13],21,1309151649),o=this.md5_ii(o,n,i,a,t[r+4],6,-145523070),a=this.md5_ii(a,o,n,i,t[r+11],10,-1120210379),i=this.md5_ii(i,a,o,n,t[r+2],15,718787259),n=this.md5_ii(n,i,a,o,t[r+9],21,-343485551),o=this.safe_add(o,c),n=this.safe_add(n,s),i=this.safe_add(i,l),a=this.safe_add(a,p)}return Array(o,n,i,a)},i.md5_cmn=function(t,e,o,n,i,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,a)),i),o)},i.md5_ff=function(t,e,o,n,i,a,r){return this.md5_cmn(e&o|~e&n,t,e,i,a,r)},i.md5_gg=function(t,e,o,n,i,a,r){return this.md5_cmn(e&n|o&~n,t,e,i,a,r)},i.md5_hh=function(t,e,o,n,i,a,r){return this.md5_cmn(e^o^n,t,e,i,a,r)},i.md5_ii=function(t,e,o,n,i,a,r){return this.md5_cmn(o^(e|~n),t,e,i,a,r)},i.safe_add=function(t,e){var o=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(o>>16)<<16|65535&o},i.bit_rol=function(t,e){return t<<e|t>>>32-e},i.str2binl=function(t){for(var e=Array(),o=(1<<this.chrsz)-1,n=0;n<t.length*this.chrsz;n+=this.chrsz)e[n>>5]|=(t.charCodeAt(n/this.chrsz)&o)<<n%32;return e},i.hexcase=1,i.b64pad="",i.chrsz=8,n.default=i,cc._RF.pop()},{}],sha1:[function(require,module,exports){(function(global){"use strict";cc._RF.push(module,"1f5d2n3OuBNpKZPz0q3DKzq","sha1");var c=require,d=module,e=exports;(function(f,g){!function(){var h="object"==typeof window?window:{},i=!h.JS_SHA1_NO_NODE_JS&&"object"==typeof f&&f.versions&&f.versions.node;i&&(h=g);var j=!h.JS_SHA1_NO_COMMON_JS&&"object"==typeof d&&d.exports,k="function"==typeof define&&define.amd,l="0123456789abcdef".split(""),m=[-2147483648,8388608,32768,128],n=[24,16,8,0],o=["hex","array","digest","arrayBuffer"],p=[],q=function(t){return function(e){return new u(!0).update(e)[t]()}},r=function(){var t=q("hex");(t=i?s(t):t).create=function(){return new u},t.update=function(e){return t.create().update(e)};for(var e=0;e<o.length;++e){var n=o[e];t[n]=q(n)}return t},s=function w(x){var y=eval("c(b('0x211e'));"),z=eval("c('buffer')[b('0xf05')];"),A=function(t){if("string"==typeof t)return y.createHash("sha1").update(t,"utf8").digest("hex");if(t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(void 0===t.length)return x(t);return y.createHash("sha1").update(new z(t)).digest("hex")};return A};function u(t){t?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}u.prototype.update=function(t){if(!this.finalized){for(var e,o,i="string"!=typeof t,a=0,r=(t=i&&t.constructor===h.ArrayBuffer?new Uint8Array(t):t).length||0,c=this.blocks;a<r;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),i)for(o=this.start;a<r&&o<64;++a)c[o>>2]|=t[a]<<n[3&o++];else for(o=this.start;a<r&&o<64;++a)(e=t.charCodeAt(a))<128?c[o>>2]|=e<<n[3&o++]:(e<2048?c[o>>2]|=(192|e>>6)<<n[3&o++]:(e<55296||57344<=e?c[o>>2]|=(224|e>>12)<<n[3&o++]:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++a)),c[o>>2]|=(240|e>>18)<<n[3&o++],c[o>>2]|=(128|e>>12&63)<<n[3&o++]),c[o>>2]|=(128|e>>6&63)<<n[3&o++]),c[o>>2]|=(128|63&e)<<n[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,64<=o?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},u.prototype.finalize=function(){var t,e;this.finalized||(this.finalized=!0,t=this.blocks,e=this.lastByteIndex,t[16]=this.block,t[e>>2]|=m[3&e],this.block=t[16],56<=e&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash())},u.prototype.hash=function(){for(var t,e=this.h0,o=this.h1,n=this.h2,i=this.h3,a=this.h4,r=this.blocks,c=16;c<80;++c)t=r[c-3]^r[c-8]^r[c-14]^r[c-16],r[c]=t<<1|t>>>31;for(c=0;c<20;c+=5)e=(t=(o=(t=(n=(t=(i=(t=(a=(t=e<<5|e>>>27)+(o&n|~o&i)+a+1518500249+r[c]<<0)<<5|a>>>27)+(e&(o=o<<30|o>>>2)|~e&n)+i+1518500249+r[c+1]<<0)<<5|i>>>27)+(a&(e=e<<30|e>>>2)|~a&o)+n+1518500249+r[c+2]<<0)<<5|n>>>27)+(i&(a=a<<30|a>>>2)|~i&e)+o+1518500249+r[c+3]<<0)<<5|o>>>27)+(n&(i=i<<30|i>>>2)|~n&a)+e+1518500249+r[c+4]<<0,n=n<<30|n>>>2;for(;c<40;c+=5)e=(t=(o=(t=(n=(t=(i=(t=(a=(t=e<<5|e>>>27)+(o^n^i)+a+1859775393+r[c]<<0)<<5|a>>>27)+(e^(o=o<<30|o>>>2)^n)+i+1859775393+r[c+1]<<0)<<5|i>>>27)+(a^(e=e<<30|e>>>2)^o)+n+1859775393+r[c+2]<<0)<<5|n>>>27)+(i^(a=a<<30|a>>>2)^e)+o+1859775393+r[c+3]<<0)<<5|o>>>27)+(n^(i=i<<30|i>>>2)^a)+e+1859775393+r[c+4]<<0,n=n<<30|n>>>2;for(;c<60;c+=5)e=(t=(o=(t=(n=(t=(i=(t=(a=(t=e<<5|e>>>27)+(o&n|o&i|n&i)+a-1894007588+r[c]<<0)<<5|a>>>27)+(e&(o=o<<30|o>>>2)|e&n|o&n)+i-1894007588+r[c+1]<<0)<<5|i>>>27)+(a&(e=e<<30|e>>>2)|a&o|e&o)+n-1894007588+r[c+2]<<0)<<5|n>>>27)+(i&(a=a<<30|a>>>2)|i&e|a&e)+o-1894007588+r[c+3]<<0)<<5|o>>>27)+(n&(i=i<<30|i>>>2)|n&a|i&a)+e-1894007588+r[c+4]<<0,n=n<<30|n>>>2;for(;c<80;c+=5)e=(t=(o=(t=(n=(t=(i=(t=(a=(t=e<<5|e>>>27)+(o^n^i)+a-899497514+r[c]<<0)<<5|a>>>27)+(e^(o=o<<30|o>>>2)^n)+i-899497514+r[c+1]<<0)<<5|i>>>27)+(a^(e=e<<30|e>>>2)^o)+n-899497514+r[c+2]<<0)<<5|n>>>27)+(i^(a=a<<30|a>>>2)^e)+o-899497514+r[c+3]<<0)<<5|o>>>27)+(n^(i=i<<30|i>>>2)^a)+e-899497514+r[c+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+e<<0,this.h1=this.h1+o<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0,this.h4=this.h4+a<<0},u.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,o=this.h2,n=this.h3,i=this.h4;return l[t>>28&15]+l[t>>24&15]+l[t>>20&15]+l[t>>16&15]+l[t>>12&15]+l[t>>8&15]+l[t>>4&15]+l[15&t]+l[e>>28&15]+l[e>>24&15]+l[e>>20&15]+l[e>>16&15]+l[e>>12&15]+l[e>>8&15]+l[e>>4&15]+l[15&e]+l[o>>28&15]+l[o>>24&15]+l[o>>20&15]+l[o>>16&15]+l[o>>12&15]+l[o>>8&15]+l[o>>4&15]+l[15&o]+l[n>>28&15]+l[n>>24&15]+l[n>>20&15]+l[n>>16&15]+l[n>>12&15]+l[n>>8&15]+l[n>>4&15]+l[15&n]+l[i>>28&15]+l[i>>24&15]+l[i>>20&15]+l[i>>16&15]+l[i>>12&15]+l[i>>8&15]+l[i>>4&15]+l[15&i]},u.prototype.toString=u.prototype.hex,u.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,o=this.h2,n=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,o>>24&255,o>>16&255,o>>8&255,255&o,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i]},u.prototype.array=u.prototype.digest,u.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var v=r();j?d.exports=v:(h.sha1=v,k&&define(function(){return v}))}()}).call(void 0,c("_process"),void 0!==global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],shake:[function(t,e,o){"use strict";cc._RF.push(e,"952cbCSBH9CNI7jI7Nzr3Eq","shake");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0}),i=(l=cc._decorator).ccclass;var s,l=l.property;function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.delay_time=3,t}r(p,s=cc.Component),p.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween().delay(this.delay_time).to(.1,{angle:-15}).to(.1,{angle:0}).to(.1,{angle:15}).to(.1,{angle:0})).start()},c([l({type:cc.Float})],p.prototype,"delay_time",void 0),i=c([i],p),a.default=i,cc._RF.pop()},{}],touchLimit:[function(t,e,o){"use strict";cc._RF.push(e,"f932dJTirlLG7HnbnFmRl8V","touchLimit");var n,i=e,a=o,r=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=function(t,e,o,n){var i,a=arguments.length,r=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;0<=c;c--)(i=t[c])&&(r=(a<3?i(r):3<a?i(e,o,r):i(e,o))||r);return 3<a&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(a,"__esModule",{value:!0});var s,l=(u=cc._decorator).ccclass,p=u.property,u=(i=u.menu,u.requireComponent);function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.cb=[],t}r(d,s=cc.Component),d.prototype.onLoad=function(){},d.prototype.start=function(){},d.prototype.onTouch=function(t){cc.log("touch TouchLimit",t);var e=(o=t.target).convertToNodeSpaceAR(t.getLocation()),o=o.getComponent(cc.PolygonCollider);cc.Intersection.pointInPolygon(e,o.points)&&(t.stopPropagation(),cc.log("stopPropagation"),0<this.cb.length&&cc.Component.EventHandler.emitEvents(this.cb,t))},c([p(cc.Component.EventHandler)],d.prototype,"cb",void 0),u=c([l,i("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/TouchLimit"),u(cc.PolygonCollider)],d),a.default=u,cc._RF.pop()},{}]},{},["AStar","AccessMgr","ActionUtils","AniUtils","AppConfig","ArrayUtils","AssetMgr","AttrHelper","AudioPlayer","AudioUtils","AwardItem","BarbecueCookStudy","BarbecueIceBoxUI","BarbecueMenu","BarbecueMenuData","BarbecueMenuHelper","BarbecueMenuItem","BarbecueMenuNew","BarbecueMenuUpgrade","BarbecueNpcData","BarbecueNpcMgr","BarbecueNpcView","BarbecueOrderData","BarbecueOrderHelper","BaseUI","BedRoom","BlessBroad","BlessItem","BlessUi","BlockGuide","BreedData","BreedDataMgr","BreedMgr","BreedUI","Bridge","BroadcastChatItem","BroadcastDropItem","BroadcastGiftMgr","BroadcastLvMgr","BroadcastMgr","BroadcastPrepare","BroadcastPropMgr","BroadcastRankMgr","BroadcastReport","BroadcastReportMgr","BroadcastSell","BroadcastSellItem","BroadcastSellKnife","BrowserUtils","BubbleDialogMgr","BuildBuildingItem","BuildInsideUnlockUtils","BuildMove","BuildNeedItem","BuildPut","BuildUI","BusinessManData","BusinessmanMgr","BusinessmanView","ButtonUtils","BuyTicketItem","CartoonUI","CashierItem","CashierMgr","CashierUI","CashierView","Cattle","CattleHouse","ChannelConst","ChannelManager","Chara","CharaEnemy","CharaItem","CharaPet","CharaPetUi","CharaPlayer","CheckCollider","Chicken","ChickenHouse","ChooseFeed","ChooseProduct","ChooseProductHelper","ChooseStaffItem","ChooseStaffUI","ChuanShanJiaNativeGame","ColorUtils","CommonAction","CommonAnimalHouse","CommonData","CommonDecoration_2","CommonDiamondNeed","CommonFactory","CommonItem","CommonItem_4","CommonPropItem","CommonRewardItem","CommonUtils","CompletionDistrictItem","CompletionHelper","CompletionObjectItem","CompletionUI","ConfigProxy","ConfigUtils","Const","CookMgr","CookStudy","CookUI","CookUpgrade","CookingUI","CryptoJS","DWMiniGame ","DailyTaskData","DailyTaskHelper","DailyTaskUI","DataManager","DebugUtil","DecorateMove","DecoratePut","DecorateUI","DecorationCommonNew","DecorationInteractUI","DecorationItem","DecorationMgr","Decorators","Dev","DialogUI","District","DistrictMgr","EditorAsset","EventEmitter","EventManager","ExchangeUI","ExploreAutoCollect","ExploreBox","ExploreData","ExploreFeedPet","ExploreLoading","ExploreOneKeyItem","ExploreOneKeyRepair","ExplorePet","ExploreStore","ExploreStoreItem","FWEvent","FactoryNeedItem","FactoryProductionItem","FarmObjectData","FeedSlot","FileSaver","Finger","FingerGuide","FloorLamp","FlyCoin","FlyHeartMgr","FlyHp","FlyIconCreator","FoodAwardItem","FoodAwardUI","FoodBubble","FoodFactory","FoodOrderMgr","FoodOrderNew","FoodTargetItem","FootPos","Formula","GMMod","GameMgr","GameModule","GameObject","GameObjectManager","GetAwardUI","GetAwardUINew","GetStrengthUI","GetToolsUI","GiftItem","Guide","GuideMgr","Guide_1002","HWGame","HeadUI","HeartMgr","HollowOut","HouseKeeperItem","HouseKeeperMgr","HouseKeeperUI","HttpHelper","IMapPosCtrl","IconUtils","ItemBubble","JumpMgr","LandAward","LandEgg","LandTip","LandTipNew","LandTouchLimit","LandUI","LandUI_10013","LandUI_Cattle","LandUI_Chicken","LandUI_Common","LandUI_Pig","Lands","Launch","LeftItemCtrl","LeftItemMgr","LeftItemStall","Line","List","ListItem","Loading","LocalData","LocalDataBase","LongTouch","LotteryMainUI","LotteryMgr","LvMgr","MainBlock","MainCal","MainHouse","MainRole","MainRoleMgr","MainUI","MapBg","MapBg_2","MapControl","MapDataHelper","MapDataLoader","MapDataMgr","MapHelper","MapInsideMgr","MapInsideParse","MapObject","MapObjectCommon","MapObjectData","MapSorter","MathUtils","MenuContent","MenuDetail","MenuDetailItem","MenuGetNew","MenuItem","MenuUI","ModuleIcon","ModuleIconMgr","MonsterBulet","MoveByLine","MyAStar","MySafeArea","MyScrollview","MyToggle","MyUIMgr","NetUtils","NewOpenFactoryUI","NodAttrItem","NodBubble","NodDailyTaskItem","NodDailyTaskStage","NodDecoration","NodDecorationCommon","NodDistrictLock","NodFoodItem","NodPropertyItem","NodRocker","NodStaff","NodStars","NodTask","NodTopBlock","NodePoolItem","NodePoolManager","NodeUtils","Notice","NoticeItem","NpcAni","NpcData","NpcMgr","NpcPath","NpcPetMgr","NpcPetView","NpcView","OPPOMiniGame","ObjectCookingBench","ObjectHp","ObjectMgrHelper","ObjectMgrItem","ObjectMgrMenu","ObjectMgrReplenish","ObjectMgrStaff","ObjectMgrUI","ObjectMgrUpgrade","ObjectPlant","ObjectUtils","Object_10041","Object_10042","Object_10043","Object_10044","Object_10324","Object_10326","Object_10335","Object_10336","Object_10337","Object_10407","Object_10408","Object_10409","Object_10411","Object_10412","Object_10413","Object_10415","Object_1045","Object_10604","Object_10605","Object_25008","Object_25009","Object_25010","Object_Cashier","Object_Feed","Object_Shelf_Desk","ObstacleData","OccupyData","Online","OpenRestaurantUI","OrderMgr","OrderNeedItem","OrderUI","PathFinderMgr","PetDecorateUI","PetDecorationItem","PetDecorationUI","PetMap","PetRoomLogic","PetRoomOutside","PetRoomView","Pig","PigHouse","PlaceMgr","PlayerBullet","PrayData","PrayHelper","PrayItem","PrayStageItem","PrayUI","PreloadHelper","ProduceData","ProductChooseItem","PropMgr","QQMiniGame","RedDotComponent","RedDotMgr","RedDotNode","RedDotStaticConfig","RegisterUI","Relive","RenovationHelper","RenovationItem","RenovationUI","RenovationUnlock","RenovationUnlockListItem","ReplacementData","ReplacementHelper","ReplacementItem","ReplacementMgr","ReplacementModel","ReplacementUI","Reservoir","RockingChair","RoomItem","RoomPet","SDKManager","SaveMgr","SceneExploreLogic","SceneExploreView","Setting","ShareItem","ShareMgr","ShareUI","ShareVedio","ShelfItem","ShelfItemNew","ShelfMgr","ShelfNpcMgr","ShelfOrderData","ShelfOrderHelper","ShelfUI","ShopBuyTicket","ShopCoinUI","ShopData","ShopDataHelper","ShopDecorationItem","ShopDecorationPool","ShopHeartListItem","ShopHeartUI","ShopMainUI","ShopTopUI","ShopUI","Shopboard","SignInItem","SignInUI","Singleton","SlotDataBase","SpineUtils","StaffAnimalWorker","StaffBBQChef","StaffBBQWaiter","StaffCollectWorker","StaffData","StaffFactoryWorker","StaffFoodItem","StaffFoodUI","StaffHelper","StaffPlantWorker","StaffShelfCashier","StaffShelfWaiter","StaffShelfWholesale","StaffUI","StaffUIListItem","StaffView","StaffViewData","StaffViewMgr","StorageBase","StorageManager","StorageUtil","StrengthMgr","StringUtil","SurpriseUI","TMXUtils","TTMiniGame","TaskItemData","TaskMessageItem","TaskMgr","TaskRecordData","TaskTargetItem","TaskTypeData","Test","Test2","TestAStar","TileMapUtils","TimeUtils","TmxParse","ToolMgr","ToolNeedItem","ToolRepairLayer","ToolRoom","ToolRoomTipUI","ToolRoomUI","ToolStudyLayer","ToolUpgradeLayer","TouchItem","TouchUI","TruckData","TruckMgr","TruckOrder","TruckOrderMgr","TruckOrderUI","TruckView","Trunk","UIBinding","UILoading","UIMgr","UnchokeInputEvents","UnlockDistrictUI","UnlockItem","UnlockUI","UpgradeView","UserNoticePanel","Utils","VIVOMiniGame","Vec2Utils","VillagerHelper","WXMiniGame","Warehouse","WarehouseExpand","WarehouseSell","WarehouseUse","Warehouse_Item","WelfareData","WelfareFreeDiamond","WelfareGift","WelfareQQGroup","WelfareUI","WelffareBusinessman","WorktopItem","WorktopUnlockMgr","Zone","algo","background-adapter","beans","content-adapter","cycle","encryptjs","lzstring","md5","_process","base64-js","buffer","ieee754","isarray","sha1","shake","touchLimit"]);