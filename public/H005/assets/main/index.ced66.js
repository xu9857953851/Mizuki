window.__require=function t(e,n,r){function o(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({ADController:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"bdd73vAdhtEeqVI20+Ihh8m","ADController");var u=t,l=n;Object.defineProperty(l,"__esModule",{value:!0}),l.ADController=l.AdSharePriority=l.AdShareStatus=l.InterAdType=l.AdType=void 0;var h,f,d=u("App"),p=u("GameText"),y=u("BaseController"),v=u("ViewManager"),g=u("Toast"),m=u("NotificationConst"),_=u("ViewConst"),b=u("ADManageBase"),w=u("ADModel");(u=l.AdType||(l.AdType={}))[u.IDLE_DOUBLE=0]="IDLE_DOUBLE",u[u.IDLE_5X=1]="IDLE_5X",u[u.AD_RATE_BUFF=2]="AD_RATE_BUFF",u[u.AD_REWRAD=3]="AD_REWRAD",u[u.BUFF_EMPLOYEE_PRODUCTION_SPEED=4]="BUFF_EMPLOYEE_PRODUCTION_SPEED",u[u.BUFF_EMPLOYEE_MOVE_SPEED=5]="BUFF_EMPLOYEE_MOVE_SPEED",u[u.BUFF_CUSTOMER_MOVE_SPEED=6]="BUFF_CUSTOMER_MOVE_SPEED",u[u.SHOP_BOX=7]="SHOP_BOX",(u=l.InterAdType||(l.InterAdType={}))[u.normal=0]="normal",u[u.full=1]="full",(u=h=l.AdShareStatus||(l.AdShareStatus={}))[u.NONE=0]="NONE",u[u.AD=1]="AD",u[u.SHARE=2]="SHARE",u[u.PAY=3]="PAY",u[u.SUPER_CASH=4]="SUPER_CASH",u[u.FREE=5]="FREE",(u=f=l.AdSharePriority||(l.AdSharePriority={}))[u.NONE=0]="NONE",u[u.AD=1]="AD",u[u.SHARE=2]="SHARE",u[u.PAY=3]="PAY",u[u.SUPER_CASH=4]="SUPER_CASH";var C=function(t){var e,n;function o(){var e;return(e=t.call(this)||this).adResolve=null,e.curAdType=null,e.curAdStatus=null,e._model=null,e.init(),e._model=new w.ADModel(c(e)),d.default.NotificationCenter.addListener(m.NotificationConst.INIT_GAME_FINISH,e.initGame,c(e),1),e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n),o.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance};var i,u,l=o.prototype;return l.init=function(){var t=this;this.registerFunc(0,this.openAdByTypeAsync,this),this.registerFunc(1,this.registerItem,this),this.registerFunc(2,this.unregisterItem,this),this.registerFunc(3,this.getAdTabData,this),this.registerFunc(4,this.getAdCntData,this),this.registerFunc(5,this.adIsHas,this),this.registerFunc(8,this.onGetIsFree,this),this.registerFunc(6,function(e){t._model.adAndShareData.isRemoveAd=e?1:0},this),d.default.NotificationCenter.addListener(b.AdEvent.AD_SWITCH_STATUS,this.changeBtnWithADStatus,this),d.default.NotificationCenter.addListener(b.AdEvent.SHOW_AD_RESULT,this.onShowAdResult,this),d.default.NotificationCenter.addListener(m.NotificationConst.ON_HIDE,this.onHide,this),d.default.NotificationCenter.addListener(m.NotificationConst.LOGOUT,this.onLogout,this)},l.onHide=function(){this.adResolve},l.initGame=function(){this._model.initShareStaticData(),d.default.NotificationCenter.removeListener(m.NotificationConst.INIT_GAME_FINISH,this.initGame,this)},l.onSystemOpen=function(){},l.initInteractionAd=function(){d.default.NotificationCenter.addListener(v.default.VIEW_IS_OPEN,this.onViewOpen,this),this._model.interactionAdConf=d.default.ConfigManager.gameConf.interactionAd,d.default.TimerManager.doTimer(this._model.interactionAdConf.startShowTime,1,this.showInteractionAdTimer,this)},l.showInteractionAdTimer=function(){this.showInteractionAd()},l.onViewOpen=function(){},l.onViewClose=function(t){t=_.ViewConst[t],this._model.interactionAdConf.view[t]&&(Math.random()<this._model.interactionAdConf.view[t]+this._model.interProbability?(this.showInteractionAd(),this._model.interProbability=0):this._model.interProbability<.5&&(this._model.interProbability+=.04))},l.showInteractionAd=function(){},l.getAdTabData=function(t){return this._model.getAdShareConf(t)},l.getAdCntData=function(t){return this._model.getData(t)},l.adIsHas=function(t){var e=this._model.getAdShareConf(t);return t=this._model.getData(t),e.adTimes>t.adCnt},l.onLogout=function(){this._model.reset(),d.default.NotificationCenter.addListener(m.NotificationConst.INIT_GAME_FINISH,this.initGame,this,1)},l.changeBtnWithADStatus=function(){for(var t in this._model.registerItems)for(var e,n=parseInt(t),o=r(this._model.registerItems[t]);!(e=o()).done;){var i=e.value;this.checkItem(n,i)}},l.onShowAdResult=function(t){var e=0===t.code;if(e&&null!==this.curAdType){t.status=this.curAdStatus;var n=this._model.getData(this.curAdType);this.curAdStatus===h.AD?(n.adCnt++,this._model.addAdNum(),d.default.AnalyticMgr.AD(this.curAdType,e?1:0)):this.curAdStatus===h.FREE?this.isRemoveAD?n.adCnt++:n.freeCnt++:this.curAdStatus===h.SHARE?(n.shareCnt++,d.default.AnalyticMgr.AD(this.curAdType+1e3,e?1:0)):this.curAdStatus===h.SUPER_CASH&&n.superCashCnt++,this.curAdStatus=this.curAdType=null,localStorage.getItem("isfirstAD")||(localStorage.setItem("isfirstAD","isfirstAD"),console.log("\u7b2c\u4e00\u6b21\u89c2\u770b\u5e7f\u544a"),d.default.AnalyticMgr.recordFirstAD({api_token:d.default.GameDataMsr.playerInfo.token,type:this.curAdType,module:"first_ad"}))}this.adResolve&&(this.adResolve(t),this.adResolve=null),this.changeBtnWithADStatus(),d.default.TimerManager.doTimer(1e3,1,function(){d.default.SoundManager.resumeMusic()},this)},l.openAdByTypeAsync=function(t,e){var n=this;return new Promise(function(r){var o=n._model.adShareStatus[t];isNaN(o)&&r(!1);var i=d.default.Platform.getAdState(t);if(1==i)return g.default.launch(p.GameText.getText(61)),void r(!1);if(3==i)return g.default.launch(p.GameText.getText(62)),void r(!1);if(n.curAdType=t,n.adResolve=r,n.curAdStatus=o,o==h.NONE&&g.default.launch(p.GameText.getText(60)),o==h.AD)d.default.SoundManager.pauseMusic(),d.default.Platform.showAD(t);else if(o==h.FREE)n.onShowAdResult({code:0});else if(o==h.SHARE){d.default.SoundManager.pauseMusic();var a=n._model.getShareData();d.default.Platform.share(t,{url:a.sharePic,title:a.shareMessage,description:"",paramList:{chl:d.default.ConfigManager.gameConf.channel,playerid:d.default.GameDataMsr.playerInfo.id+"",shareType:t},extraParam:e})}else if(o==h.SUPER_CASH){r=n._model.getAdShareConf(t),a=n._model.getData(t);var c=(r.price-a.superCashCnt*r.addSuperCash)*(e||1);WorldScene.instance.subSuperMoney(c)?(n.onShowAdResult({code:0}),d.default.Platform.recordDiamondCost(t+100,c)):n.onShowAdResult({code:-1})}else n.onShowAdResult({code:-1})})},l.unregisterItem=function(t,e){this._model.registerItems[t]&&(-1<(e=this._model.registerItems[t].indexOf(e))&&this._model.registerItems[t].splice(e,1),0===this._model.registerItems[t].length&&delete this._model.registerItems[t])},l.registerItem=function(t,e){this._model.registerItems[t]?-1===this._model.registerItems[t].indexOf(e)&&(this._model.registerItems[t].push(e),this.checkItem(t,e)):(this._model.registerItems[t]=[e],this.checkItem(t,e))},l.isCanToShare=function(t){var e=this._model.getData(t);return t=this._model.getAdShareConf(t),e.shareCnt<t.shareTimes},l.checkItem=function(t,e){var n=this._model.getData(t);if(n){var r=this._model.getAdShareConf(t);if(e&&r){var o=n.adCnt,i=n.shareCnt,a=n.freeCnt||0,c=o+i+a,s=d.default.Platform.isCanShare()&&0<r.shareTimes&&r.shareTimes>i;if(r.totalTimes>c){if(r.freeCnt&&r.freeCnt>a)return e.toFree&&e.toFree(t,r,n),void(this._model.adShareStatus[t]=h.FREE);switch(r.type){case f.AD:if(this.isRemoveAD&&r.adTimes>o)return e.toFree&&e.toFree(t,r,n),void(this._model.adShareStatus[t]=h.FREE);if(3!==(u=d.default.Platform.getAdState(t))&&r.adTimes>o)return e.toAd&&e.toAd(t,r,n,u),void(this._model.adShareStatus[t]=h.AD);if(s)return e.toShare&&e.toShare(t,r,n),void(this._model.adShareStatus[t]=h.SHARE);if(0<r.superCashTimes&&r.superCashTimes>i)return e.toSupercash&&e.toSupercash(t,r,n),void(this._model.adShareStatus[t]=h.SUPER_CASH);if(3===u&&r.adTimes>o)return e.toAd&&e.toAd(t,r,n,u),void(this._model.adShareStatus[t]=h.AD);break;case f.SHARE:var u=d.default.Platform.getAdState(t);if(s)return e.toShare&&e.toShare(t,r,n),void(this._model.adShareStatus[t]=h.SHARE);if(0<r.adTimes&&r.adTimes>o&&3!==u)return e.toAd&&e.toAd(t,r,n,u),void(this._model.adShareStatus[t]=h.AD);if(0<r.superCashTimes&&r.superCashTimes>i)return e.toSupercash&&e.toSupercash(t,r,n),void(this._model.adShareStatus[t]=h.SUPER_CASH);break;case f.PAY:if(r.payTimes>c)return e.toPay&&e.toPay(t,r,n),void(this._model.adShareStatus[t]=h.PAY);break;case f.SUPER_CASH:if(r.superCashTimes>n.superCashCnt)return e.toSupercash&&e.toSupercash(t,r,n),void(this._model.adShareStatus[t]=h.SUPER_CASH)}}}e.toFail&&e.toFail(t,r,n,3),this._model.adShareStatus[t]=h.NONE}},l.onGetIsFree=function(t){if(!(r=this._model.getData(t)))return!1;var e=this._model.getAdShareConf(t);if(e){var n=r.adCnt,r=(t=r.shareCnt,r.freeCnt||0);if(e.totalTimes>n+t+r&&e.freeCnt&&e.freeCnt>r)return!0}return!1},i=o,(u=[{key:"isRemoveAD",get:function(){return this._model.adAndShareData.isRemoveAd}}])&&a(i.prototype,u),Object.defineProperty(i,"prototype",{writable:!1}),o}(y.default);l.ADController=C,cc._RF.pop()},{}],ADManageBase:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"1d891mRHEhMW7vCegjEjRfi","ADManageBase");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.ADManageBase=i.ADConst=i.AdEvent=i.AdState=void 0;var a,c,s=o("App"),u=o("GameText"),l=o("Toast");(o=a=i.AdState||(i.AdState={}))[o.none=0]="none",o[o.loading=1]="loading",o[o.success=2]="success",o[o.fail=3]="fail",o[o.show=4]="show",o[o.userClose=5]="userClose",o[o.hide=6]="hide",o[o.show_video=7]="show_video",(o=c=i.AdEvent||(i.AdEvent={})).SET_SHOW_AD_COMPLETE="SET_SHOW_AD_COMPLETE",o.AD_SWITCH_STATUS="AD_SWITCH_STATUS",o.SHOW_AD_RESULT="SHOW_AD_RESULT",o.AD_FINISH_SERVER_RETURN="AD_FINISH_SERVER_RETURN",(o=i.ADConst||(i.ADConst={}))[o.OPENAD=0]="OPENAD",o[o.REGISTER_ITEM=1]="REGISTER_ITEM",o[o.UNREGISTER_ITEM=2]="UNREGISTER_ITEM",o[o.GET_AD_TAB_DATA=3]="GET_AD_TAB_DATA",o[o.GET_AD_CNT_DATA=4]="GET_AD_CNT_DATA",o[o.GET_AD_IS_SEE_OUT=5]="GET_AD_IS_SEE_OUT",o[o.REMOVE_AD=6]="REMOVE_AD",o[o.WATCH_AD_END=7]="WATCH_AD_END",o[o.IS_FREE=8]="IS_FREE";var h=function(){function t(){this.isAutoReload=!0,this.restyCnt=0,this.adShowTime=-1,this.overtime=3e4,this.tryReloadTime=3e4}var e,n,o=t.prototype;return o.getAdObj=function(){return this.curAdObj},o.setAdObj=function(t){t.onLoadAdComplete=this.onLoadAdComplete.bind(this),t.onLoadAdFail=this.onLoadAdFail.bind(this),t.onShowAdComplete=this.onShowAdComplete.bind(this),t.init(),this.curAdObj=t,this.reloadAd()},o.getAdState=function(){return this.curAdObj?this.curAdObj.adState:a.none},o.loadTimeOut=function(){Log.warn("\u62c9\u53d6\u6fc0\u52b1\u5e7f\u544a\u8d85\u65f6!!!"),this._timeOut=null,this.onLoadAdFail(null)},o.stopTimeOUtTimer=function(){this._timeOut&&(s.default.TimerManager.remove(this.loadTimeOut,this),this._timeOut=null)},o.startTimeOutTiemr=function(){},o.onLoadAdComplete=function(){Log.debug("\u62c9\u53d6\u6fc0\u52b1\u5e7f\u544a\u6210\u529f!!!"),this.stopTimeOUtTimer(),this.restyCnt=0,this.setADStatus(a.success)},o.show=function(){return 0<this.adShowTime&&s.default.DateUtils.Now()<this.adShowTime?(l.default.launch(u.GameText.getText(lang.common_ad_cd).format(s.default.CommonUtils.getFormatBySecond1((this.adShowTime-s.default.DateUtils.Now())/1e3))),void s.default.NotificationCenter.dispatch(c.SHOW_AD_RESULT,{code:-1})):this.curAdObj?this.curAdObj.show():void 0},o.onLoadAdFail=function(t){if(this.stopTimeOUtTimer(),Log.debug("\u62c9\u53d6\u6fc0\u52b1\u5e7f\u544a\u5931\u8d25!!!",t,this.restyCnt),3<this.restyCnt)return this.restyCnt=0,this.setADStatus(a.fail),void this.startReloadTimer();this.restyCnt++,this.startTimeOutTiemr(),s.default.TimerManager.setTimeOut(500,this.curAdObj.load,this.curAdObj)},o.startReloadTimer=function(){this.isAutoReload&&s.default.TimerManager.setTimeOut(this.tryReloadTime,this.reloadAd,this)},o.onShowAdComplete=function(t){Log.warn("\u5c55\u793a\u5e7f\u544a\u5b8c\u6bd5!!! ",t.code),0==t.code&&(Log.trace("\u5e7f\u544a\u64ad\u653e\u56de\u8c03\u5956\u52b1"),this.adShowTime=s.default.DateUtils.Now(),s.default.NotificationCenter.dispatch(c.SHOW_AD_RESULT,t)),this.reloadAd()},o.setADStatus=function(t){this.curAdObj.adState=t,s.default.NotificationCenter.dispatch(c.AD_SWITCH_STATUS,t)},o.reloadAd=function(){this.startTimeOutTiemr(),this.restyCnt=0,this.setADStatus(a.loading),this.curAdObj.load()},e=t,(n=[{key:"adState",get:function(){return this.curAdObj?this.curAdObj.adState:a.none}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();(i.ADManageBase=h).LOAD_AD_COMPLETE="loadAdComplete",h.LOAD_AD_FAIL="loadAdFail",h.SHOW_AD_RESULT="showAdResult",h.SHOW_AD_FAIL="showAdFail",cc._RF.pop()},{}],ADModel:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"ecab3/tukhJh4VF6UO2in3B","ADModel");var a=t,c=n,s=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.ADModel=void 0;var u=a("App"),l=a("BaseModel"),h=(a("ControllerConst"),a("GameDataMsr")),f=a("ADController");c.ADModel=function(t){var e,n;function a(e){var n;return(n=t.call(this,e)||this).registerItems={},n.adAndShareData=null,n.interactionAdConf=null,n.interProbability=0,n.interProbabilityLevel=0,n.shareStaticData=[],n.adShareStatus={},u.default.SaveManage.add(o(n),h.GameDataSaveKey.AD_AND_SHARE_DATA,!0,!0),n.interProbability=0,n.interProbabilityLevel=0,n}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var c=a.prototype;return c.getData=function(t){var e=f.AdType[t],n=this.adAndShareData[e];return n||(this.adAndShareData[e]={adCnt:0,shareCnt:0,freeCnt:0,superCashCnt:0})},c.reset=function(){this.registerItems={},this.adShareStatus={}},c.getAdShareConf=function(t){return u.default.ConfigManager.getConfig("AdDataManager").getData(t)},c.addAdNum=function(){this.adAndShareData.adNum++},c.getShareData=function(t){if(t)for(var e=0;e<this.shareStaticData.length;e++)if(this.shareStaticData[e].key==t)return this.shareStaticData[e];var n=[];for(e=0;e<this.shareStaticData.length;e++)n.push(this.shareStaticData[e].weight);var r=this.weight_rand(n);return this.shareStaticData[r]},c.weight_rand=function(t){var e,n,r=0;for(n=t.length,e=0;e<n;e++)r+=void 0!==t[e]?t[e]:0;if(0==r)return this.random(n);for(e=0;e<n;e++){if(Math.floor(Math.random()*r+1)<=t[e])return e;r-=t[e]}},c.random=function(t){return Math.floor(Math.random()*t)},c.initShareStaticData=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(cc.sys.platform!==cc.sys.WECHAT_GAME){t.next=14;break}return t.prev=1,t.next=4,u.default.Http.requestAsync(u.default.ConfigManager.gameConf.serverInfos.interface+"/api/config/share_list",{},"GET");case 4:e=t.sent,0===(n=JSON.parse(e)).code&&(this.shareStaticData=n.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.shareStaticData=[{id:1,key:"s1",message:"\u4f60\u79bb\u4ebf\u4e07\u5bcc\u7fc1\uff0c\u53ea\u5dee\u4e00\u5ea7\u91d1\u77ff\uff01",image_src:"http://mine.gzqidong.cn/uploads/images/16752461461591960177.jpg",weight:1}];case 12:t.next=15;break;case 14:this.shareStaticData=[{message:"\u6d4b\u8bd5",image_src:"http://mine.gzqidong.cn/uploads/images/16752461461591960177.jpg"}];case 15:this.getShareData();case 16:case"end":return t.stop()}},t,this,[[1,9]])}))},c.updateDayData=function(){var t=u.default.ConfigManager.getConfig("AdDataManager");for(var e in this.adAndShareData){var n,r;"adNum"!=e&&(n=this.adAndShareData[e],r=f.AdType[e],r=t.getData(r),n&&(r&&r.isDayClear?this.adAndShareData[e]={shareCnt:0,adCnt:0,freeCnt:0,superCashCnt:0}:this.adAndShareData[e]={shareCnt:0,adCnt:0,freeCnt:n.freeCnt,superCashCnt:0}))}},c.createMemento=function(){return this.adAndShareData},c.setMemento=function(t){this.adAndShareData=t||{adNum:0}},a}(l.default),cc._RF.pop()},{}],AStarRoadSeeker:[function(t,e,n){"use strict";cc._RF.push(e,"a3a193EdkVIWoDgtJ/bBisA","AStarRoadSeeker");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=14,this.maxStep=1e3,this._round=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],this.handle=-1,this.optimize=!0,this._roadNodes=t}var e=t.prototype;return e.seekPath=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(1==this._targetNode.value)return[];this._openlist=[],this._closelist=[];for(var n=0;;){if(n>this.maxStep)return[];if(n++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return[];if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),this._currentNode==this._targetNode)return this.getPath();this._closelist.push(this._currentNode)}return[]},e.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];this._openlist=[],this._closelist=[];for(var n=0,r=null;;){if(n>this.maxStep)return this.seekPath(t,r);if(n++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return this.seekPath(t,r);if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),(null==r||this._currentNode.h<r.h)&&(r=this._currentNode),this._currentNode==this._targetNode)return this.getPath();this._closelist.push(this._currentNode)}return this.seekPath(t,r)},e.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0},e.getPath=function(){for(var t=[],e=this._targetNode;e!=this._startNode;)t.unshift(e),e=e.parent;if(t.unshift(this._startNode),!this.optimize)return t;for(var n=1;n<t.length-1;n++){var r=t[n-1],o=t[n],i=t[n+1],a=o.cx==r.cx&&o.cx==i.cx,c=o.cy==r.cy&&o.cy==i.cy;o=(o.cx-r.cx)/(o.cy-r.cy)*((i.cx-o.cx)/(i.cy-o.cy))==1,(a||c||o)&&(t.splice(n,1),n--)}return t},e.testSeekPathStep=function(t,e,n,r,o){var i,a=this;void 0===o&&(o=100),this._startNode=t,this._currentNode=t,this._targetNode=e,1!=this._targetNode.value&&(this._openlist=[],this._closelist=[],i=0,clearInterval(this.handle),this.handle=setInterval(function(){i>a.maxStep?clearInterval(a.handle):(i++,a.searchRoundNodes(a._currentNode),0!=a._openlist.length?(a._openlist.sort(a.sortNode),a._currentNode=a._openlist.shift(),a._currentNode==a._targetNode?(clearInterval(a.handle),n.apply(r,[a._startNode,a._targetNode,a._currentNode,a._openlist,a._closelist,a.getPath()])):(a._closelist.push(a._currentNode),n.apply(r,[a._startNode,a._targetNode,a._currentNode,a._openlist,a._closelist,null]))):clearInterval(a.handle))},o))},e.searchRoundNodes=function(t){for(var e=0;e<this._round.length;e++){var n=t.cx+this._round[e][0],r=t.cy+this._round[e][1];null==(r=this._roadNodes[n+"_"+r])||r==this._startNode||1==r.value||this.isInCloseList(r)||this.inInCorner(r)||this.setNodeF(r)}},e.setNodeF=function(t){var e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL;if(this.isInOpenList(t)){if(!(e<t.g))return;t.g=e}else t.g=e,this._openlist.push(t);t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h},e.isInOpenList=function(t){return-1!=this._openlist.indexOf(t)},e.isInCloseList=function(t){return-1!=this._closelist.indexOf(t)},e.inInCorner=function(t){if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this._roadNodes[this._currentNode.cx+"_"+t.cy];return t=this._roadNodes[t.cx+"_"+this._currentNode.cy],null==e||0!=e.value||null==t||0!=t.value},e.dispose=function(){this._roadNodes=null,this._round=null},t}(),cc._RF.pop()},{}],AbilityInfoData:[function(t,e,n){"use strict";cc._RF.push(e,"2b4b4Mcri9J+ZhkIwuGlK6e","AbilityInfoData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("Toast"),a=r("CurrencyService");o.default=function(){function t(){this.cfg=null,this.curLevel=null,this.data=null,this.value=0,this.nextLvValue=0,this.cost=0,this.installCost=0}var e=t.prototype;return e.getValue=function(t){return this.value?this.value/100:t},e.init=function(t,e){if(this.cfg=t,this.data=e,this.installCost=t.unlock_cost,e.lv){this.value=this.cfg.value;var n=e.lv;this.cost=e.lv=0,this.unlock();for(var r=1;r<n;r++)this.$levelUp()}},e.isMaxLevel=function(){return this.data.lv>=this.cfg.max_level},e.$levelUp=function(){this.data.lv++,this.value+=this.cfg.value_add,this.cost+=this.cfg.upgrade_cost_add,this.nextLvValue=this.value+this.cfg.value_add,this.curLevel=this.data.lv},e.canUnlock=function(){return a.default.ins.checkDiamondEnough(this.cfg.unlock_cost)},e.unlock=function(){this.value=this.cfg.value,this.data.lv=1,this.cost=this.cfg.upgrade_cost,this.nextLvValue=this.value+this.cfg.value_add,this.curLevel=this.data.lv},e.canLvUp=function(){return a.default.ins.checkDiamondEnough(this.cost)},e.levelUp=function(){var t;this.isMaxLevel()?i.default.launch("\u5df2\u7ecf\u662f\u6700\u5927\u7b49\u7ea7!"):(t=-this.cost,a.default.ins.checkDiamondEnough(t)?(this.$levelUp(),a.default.ins.diamondChange(t)):i.default.launch("\u91d1\u5e01\u4e0d\u8db3!"))},e.isUnlock=function(){return 0<this.data.lv},e.getAvilityIconUrl=function(){return"Texture/ability/ability_icon_"+this.cfg.idx},e.getAvilityLockIconUrl=function(){return"Texture/ability/ability_icon_lock_"+this.cfg.idx},t}(),cc._RF.pop()},{}],AbilityInfoService:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c7db8TRA8lHQaiy1Gv9EUDW","AbilityInfoService");var o,i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.PayAbilityType=void 0;var c,s=i("App"),u=i("Toast"),l=i("ControllerConst"),h=(i("PlatformBase"),i("AdRewardConst")),f=i("AbilityInfoData"),d=i("GlobalAttr"),p=i("BaseService"),y=i("CurrencyService"),v=null,g=cc._decorator.ccclass;(i=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).define=null,e.datas=null,e.dataMap={},e.cfgs=null,e.saveData=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){(o.ins=this).cfgs=s.default.ConfigManager.getConfig("AbilityInfo")},a.unlockAll=function(){this.datas.concat()},a.unlockAbility=function(t,e){void 0===e&&(e=0);var n=this.dataMap[t];return n.canUnlock()?(n.unlock(),this.updateData(n.cfg.idx),y.default.ins.diamondChange(-n.installCost),s.default.AnalyticMgr.recordDiamondCost(4,-n.installCost),!0):(u.default.launch("\u94bb\u77f3\u4e0d\u8db3!"),!1)},a.updateData=function(t){switch(t){case c.get_tips_chance:v.calTipChance();break;case c.gems_chance_at_ad:v.calGemsChanceAtAd();break;case c.ad_booster_effect:v.calAdBoosterEffect(),s.default.ControllerManager.applyFunc(l.ControllerConst.AdReward,h.AdRewardConst.UPDATE_AD_RATE);break;case c.offline_revenue:v.calOfflineRevenue();break;case c.tips_rate:v.calTipRate();break;case c.offline_reward_time:v.calOfflineRewardTime();break;case c.ad_booster_duration:v.calAdBoosterDuration();break;case c.customer_move_speed:v.calCustomerMoveSpeed();break;case c.ad_reward_revenue:v.calAdRewardRevenue()}},a.lvUp=function(t,e){void 0===e&&(e=!1);var n=this.dataMap[t];if(n.isMaxLevel())return u.default.launch("\u5df2\u8fbe\u6700\u5927\u7b49\u7ea7!"),!1;if(n.canLvUp()||e){var r=n.cost;return n.levelUp(),this.updateData(n.cfg.idx),y.default.ins.diamondChange(-r),!0}return u.default.launch("\u94bb\u77f3\u4e0d\u8db3!"),!1},a.init=function(){var t=this.cfgs;this.datas=[];var e=s.default.ControllerManager.getControllerModel(l.ControllerConst.Game);e.data.AbilityInfo||(e.data.AbilityInfo=[]),this.saveData=e.data.AbilityInfo;for(var n=t.length,r=0;r<n;r++){var o=new f.default;this.datas[r]=o,this.dataMap[t[r].idx]=o,this.saveData[r]||(this.saveData[r]={lv:0}),o.init(t[r],this.saveData[r])}v=d.default.ins},a.desotrySelf=function(){},i}(p.default)).ins=null,i=o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([g],i),a.default=i=o,(a=c=a.PayAbilityType||(a.PayAbilityType={}))[a.get_tips_chance=1]="get_tips_chance",a[a.gems_chance_at_ad=2]="gems_chance_at_ad",a[a.ad_booster_effect=3]="ad_booster_effect",a[a.offline_revenue=4]="offline_revenue",a[a.tips_rate=5]="tips_rate",a[a.offline_reward_time=6]="offline_reward_time",a[a.ad_booster_duration=7]="ad_booster_duration",a[a.customer_move_speed=8]="customer_move_speed",a[a.ad_reward_revenue=9]="ad_reward_revenue",cc._RF.pop()},{}],AbilityViewItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"90a3dYeQC9HbLA3tty6AIu4","AbilityViewItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=(i("ViewConst"),i("GlobalAttr")),l=i("AbilityInfoService"),h=cc._decorator,f=h.ccclass,d=h.property;h.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).lockNode=null,e.lockDescNode=null,e.lockIconSpr=null,e.unlockBtn=null,e.unlockBtnLab=null,e.unlockIcon=null,e.unlockNode=null,e.lvLab=null,e.descRichText=null,e.rateRichText=null,e.costLab=null,e.costBtn=null,e.maxLabNode=null,e.iconSpr=null,e.data=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){(this.data=t).isUnlock()?(this.lockNode.active=!1,this.unlockNode.active=!0,this.updateUI()):(this.lockNode.active=!0,this.unlockNode.active=!1,c.default.CommonUtils.setSpriteFrame(this.data.getAvilityLockIconUrl(),this.lockIconSpr))},i.showUnlockBtn=function(){this.unlockBtn.active=!0,this.lockDescNode.active=!1,0===this.data.cfg.unlock_cost?(this.unlockIcon.active=!1,this.unlockBtnLab.string="\u514d\u8d39",this.unlockBtnLab.node.x=0):this.unlockBtnLab.string=this.data.cfg.unlock_cost.toString()},i.updateUI=function(){this.lvLab.string="Level "+this.data.curLevel,c.default.CommonUtils.setSpriteFrame(this.data.getAvilityIconUrl(),this.iconSpr),this.costLab.string=this.data.cost.toString();var t=this.data.isMaxLevel();this.costBtn.active=!t,this.maxLabNode.active=t;var e=this.data.value,n=this.data.nextLvValue;this.data.cfg.idx==l.PayAbilityType.ad_booster_effect&&(n=Math.floor(n-e+100*u.default.ins.ad_booster_effect)/100,e=u.default.ins.ad_booster_effect);var r="X";this.data.cfg.idx==l.PayAbilityType.get_tips_chance||this.data.cfg.idx==l.PayAbilityType.gems_chance_at_ad?r="%":this.data.cfg.idx!=l.PayAbilityType.ad_booster_effect&&(e/=100,n/=100),this.descRichText.string=s.GameText.getTextByStr(this.data.cfg.desc).format(e),t?(this.rateRichText.node.active=!1,this.descRichText.node.y=-42):this.rateRichText.string="<b><color=#aa5252>"+e+r+"></c><color=#f25d6b>"+n+r+"</color></b>"},i.onTouchCostBtn=function(){l.default.ins.lvUp(this.data.cfg.idx)&&this.updateUI()},i.onTouchUnlockBtn=function(){if(l.default.ins.unlockAbility(this.data.cfg.idx)){this.lockNode.active=!1,this.unlockNode.active=!0,this.updateUI();var t=c.default.ViewManager.getView(22);t&&t.updateUI()}},o}(cc.Component),o([d(cc.Node)],i.prototype,"lockNode",void 0),o([d(cc.Node)],i.prototype,"lockDescNode",void 0),o([d(cc.Sprite)],i.prototype,"lockIconSpr",void 0),o([d(cc.Node)],i.prototype,"unlockBtn",void 0),o([d(cc.Label)],i.prototype,"unlockBtnLab",void 0),o([d(cc.Node)],i.prototype,"unlockIcon",void 0),o([d(cc.Node)],i.prototype,"unlockNode",void 0),o([d(cc.Label)],i.prototype,"lvLab",void 0),o([d(cc.RichText)],i.prototype,"descRichText",void 0),o([d(cc.RichText)],i.prototype,"rateRichText",void 0),o([d(cc.Label)],i.prototype,"costLab",void 0),o([d(cc.Node)],i.prototype,"costBtn",void 0),o([d(cc.Node)],i.prototype,"maxLabNode",void 0),o([d(cc.Sprite)],i.prototype,"iconSpr",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],AbilityView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d8c92/BYtVL8ZT6tl8NBNbi","AbilityView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("BaseView"),s=i("AbilityInfoService"),u=i("AbilityViewItem"),l=cc._decorator,h=l.ccclass,f=l.property;l.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemPre=null,e.content=null,e.abilityViewItems=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this),this.initItem()},i.open=function(){t.prototype.open.call(this),this.updateUI()},i.initItem=function(){this.abilityViewItems=[];for(var t=s.default.ins.datas,e=0;e<t.length;e++){var n=cc.instantiate(this.itemPre);this.content.addChild(n);var r=n.getComponent(u.default);r.setData(t[e]),this.abilityViewItems.push(r)}},i.updateUI=function(){for(var t=s.default.ins.datas,e=0;e<t.length;e++)if(!t[e].isUnlock()&&(0===e||t[e-1].isUnlock())){this.abilityViewItems[e].showUnlockBtn();break}},o}(c.default),o([f(cc.Prefab)],i.prototype,"itemPre",void 0),o([f(cc.Node)],i.prototype,"content",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],Actions:[function(t,e,n){"use strict";cc._RF.push(e,"41094wEF4BCTJGMO5ZwE0/i","Actions");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.register=o.Actions=void 0;var i=r("B3Error"),a=r("Failer"),c=r("Runner"),s=r("Succeeder"),u=r("Wait"),l=r("b3"),h=r("MemPriority"),f=r("MemSequence");function d(t,e){o.Actions[e.replace("Action","")]=t}r=r("SubTree"),o.Actions=Object.create(null),o.register=d,d(l.Inverter,"Inverter"),d(l.Limiter,"Limiter"),d(l.MaxTime,"MaxTime"),d(l.RepeatUntilFailure,"RepeatUntilFailure"),d(l.RepeatUntilSuccess,"RepeatUntilSuccess"),d(l.Repeater,"Repeater"),d(i.default,"Error"),d(a.default,"Failer"),d(c.default,"Runner"),d(s.default,"Succeeder"),d(u.default,"Wait"),d(h.default,"MemPriority"),d(f.default,"MemSequence"),d(l.Priority,"Priority"),d(l.Sequence,"Sequence"),d(r.default,"SubTree"),cc._RF.pop()},{}],Action:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"9073fkI6s5B1501BDU/+JLG","Action");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("BaseNode");i.default=function(t){var e,n;function o(e){var n=void 0===e?{}:e,r=n.name,o=void 0===r?"Action":r,i=n.title,c=n.properties;return t.call(this,{category:a.ACTION,name:o,title:i,properties:c})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o}(c.default),cc._RF.pop()},{}],AdDataManager:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"52e29grE31Hqr6Ux3ZXbWhT","AdDataManager");var a=t,c=n,s=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.AdData=c.AdDataManager=void 0;var u=a("CsvDataBase"),l=a("DataMsrBase"),h=a("ConfigManager"),f=a("ADController"),d=function(t){function e(){return t.call(this,p,"ad_data","id")||this}return o(e,t),e.prototype.load=function(){var e=Object.create(null,{load:{get:function(){return t.prototype.load}}});return s(this,void 0,void 0,r().mark(function t(){var n,o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load.call(this);case 2:for(o in n={},this.datas)n[f.AdType[this.datas[o].enumKey]]=this.datas[o];this.datas=n;case 5:case"end":return t.stop()}},t,this)}))},e}(l.default);c.AdDataManager=d;var p=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).id=null,e.name=null,e.enumKey="",e.adTimes=null,e.shareTimes=null,e.superCashTimes=null,e.payTimes=null,e.type=null,e.price=null,e.totalTimes=null,e.freeCnt=null,e.isDayClear=null,e.addSuperCash=null,e}return o(e,t),e}(u.CsvDataBase);c.AdData=p,h.register(d,"AdDataManager"),cc._RF.pop()},{}],AdRateBuffView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6d57a54B41IMaVJzR/QsA30","AdRateBuffView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.AdRateBuffView=void 0;var u=a("App"),l=a("BaseView"),h=a("ControllerConst"),f=a("AdRewardConst"),d=cc._decorator,p=d.property,y=(d.menu,d.ccclass);a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).rateLab=null,e.adTimeLab=null,e.countDownTimeLab=null,e.countDownBg=null,e.redPoint=null,e.aniNode=null,e.bgType=0,e.isShowItem=!1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(){t.prototype.open.call(this)},a.updateUI=function(t,e){this.rateLab.string="x"+t,this.adTimeLab.string="+"+Math.floor(e/60)+"M"},a.updateTime=function(t){var e=!!t;this.isShowItem!=e&&(this.isShowItem=e,this.updateState()),this.countDownTimeLab.string=u.default.DateUtils.getFormatBySecond(t,10)},a.updateState=function(){this.countDownBg.active=this.isShowItem,this.countDownTimeLab.node.active=this.isShowItem,this.redPoint.active=!this.isShowItem,this.aniNode.active=this.isShowItem},a.onTouchBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(h.ControllerConst.AdReward,f.AdRewardConst.WATCH_AD_RATE_BUFF);case 2:case"end":return t.stop()}},t)}))},i}(l.default),i([p(cc.Label)],a.prototype,"rateLab",void 0),i([p(cc.Label)],a.prototype,"adTimeLab",void 0),i([p(cc.Label)],a.prototype,"countDownTimeLab",void 0),i([p(cc.Node)],a.prototype,"countDownBg",void 0),i([p(cc.Node)],a.prototype,"redPoint",void 0),i([p(cc.Node)],a.prototype,"aniNode",void 0),a=i([y],a),c.AdRateBuffView=a,cc._RF.pop()},{}],AdRewardConfig:[function(t,e){"use strict";cc._RF.push(e,"c69a5y5YJtLP6xC7gm6qXW1","AdRewardConfig"),cc._RF.pop()},{}],AdRewardConst:[function(t,e,n){"use strict";cc._RF.push(e,"3dec3KNS1ZHm4r39nMJ/t0d","AdRewardConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.AdReawardType=o.AdRewardConst=o.AdRewardEvent=void 0,o.AdRewardEvent||(o.AdRewardEvent={}),(r=o.AdRewardConst||(o.AdRewardConst={}))[r.WATCH_AD_RATE_BUFF=0]="WATCH_AD_RATE_BUFF",r[r.UPDATE_AD_RATE=1]="UPDATE_AD_RATE",r[r.WATCH_AD_REWARD=2]="WATCH_AD_REWARD",o.AdReawardType||(o.AdReawardType={}),cc._RF.pop()},{}],AdRewardController:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"690b29zYdNGO5ARw/wLpkqn","AdRewardController");var c=t,s=n,u=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0});var l=c("App"),h=c("BaseController"),f=c("RedPointMgr"),d=c("Toast"),p=c("ControllerConst"),y=c("NotificationConst"),v=(c("ViewConst"),c("LayerManager"),c("ADController"),c("ADManageBase"),c("BagController")),g=c("BuffConst"),m=c("BuffMgr"),_=c("IBuff"),b=c("GameConst"),w=c("GlobalAttr"),C=c("CurrencyService"),S=c("MachineService"),O=c("SystemOpenConst"),T=c("AdRewardConst"),I=c("AdRewardModle");f.RedPointMgr.types.AdRateBuff="AdRateBuff",s.default=function(t){var e,n;function c(){var e;return(e=t.call(this)||this).adRateBuffView=null,e.adRewardMoneyView=null,e._model=null,e.adBuffEndTime=0,e.adRewardCoolTime=0,e.adRewardShowTime=0,e.adRewardFunc=null,l.default.ViewManager.register(23,{prefabName:"AdRateBuffView",zIndex:50,controller:i(e),dir:"AdReward",isNotShowLoad:!0}),l.default.ViewManager.register(24,{prefabName:"AdRewardMoneyView",zIndex:50,controller:i(e),dir:"AdReward",isNotShowLoad:!0}),e._model=new I.default(i(e)),e._model.init(),e.initModleEvent(),e.initModleFunc(),e}n=t,(e=c).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var s,h,f=c.prototype;return f.initModleFunc=function(){this.registerFunc(T.AdRewardConst.WATCH_AD_RATE_BUFF,this.watchAdRateBuff,this),this.registerFunc(T.AdRewardConst.UPDATE_AD_RATE,this.updateAdRateBuff,this),this.registerFunc(T.AdRewardConst.WATCH_AD_REWARD,this.watchAdReward,this)},f.initModleEvent=function(){l.default.NotificationCenter.addListener(y.NotificationConst.INIT_GAME,this.onInitGame,this),l.default.NotificationCenter.addListener(b.GameNotificationConst.UPDATE_BUFF,this.onUpdateBuff,this),l.default.NotificationCenter.addListener(y.NotificationConst.ENTER_MAP,this.onEnterMap,this)},f.onUpdateBuff=function(t,e,n){_.BUFF_TYPE[n]===_.BUFF_TYPE.FOOD_SELL_RATE&&this.updateAdRateBuff()},f.onInitGame=function(){var t=this.checkAdRateBuffOpen(),e=this.checkAdRewardOpen();t&&e||l.default.NotificationCenter.addListener(y.NotificationConst.SYS_OPEN,this.onCheckOpen,this),l.default.NotificationCenter.removeListener(y.NotificationConst.INIT_GAME,this.onInitGame,this)},f.onCheckOpen=function(t,e){e&&(t==O.OpenTypeConst.AD_RATE_BUFF?this.checkAdRateBuffOpen(!0):t==O.OpenTypeConst.AD_REWARD&&this.checkAdRewardOpen())},f.onEnterMap=function(){this.adRewardMoneyView&&(this.adRewardShowTime=0,this.adRewardCountTimeShow())},f.startTime=function(){l.default.TimerManager.isExists(this.countDownTime,this)||l.default.TimerManager.doTimer(1e3,0,this.countDownTime,this)},f.countDownTime=function(){this.adBuffCountTime(),this.adRewardFunc&&this.adRewardFunc()},f.onOpenView=function(t){23==t.viewId&&this.updateAdRateBuff()},f.checkAdRateBuffOpen=function(t){return void 0===t&&(t=!1),(t=t||l.default.ControllerManager.applyFunc(p.ControllerConst.SystemOpen,O.OpenConst.CHCEK_OPEN,O.OpenTypeConst.AD_RATE_BUFF))&&l.default.ViewManager.open(23),t},f.adBuffCountTime=function(){if(!this.adBuffEndTime||!this.adRateBuffView)return!1;var t=this.adBuffEndTime-l.default.DateUtils.Now();0<t?this.adRateBuffView.updateTime(Math.floor(t/1e3)):(this.adBuffEndTime=0,this.adRateBuffView.updateTime(0))},f.watchAdRateBuff=function(){return u(this,void 0,void 0,r().mark(function t(){var e,n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.ControllerManager.applyFunc(p.ControllerConst.AD,0,2);case 2:(e=t.sent)&&0===e.code&&(n=100*w.default.ins.ad_booster_effect,o=1e3*w.default.ins.define.booster_ad_time,i=1e3*w.default.ins.define.booster_ad_max_time,(e=m.default.ins.getGlobalBuffByIndex(g.BuffIndex.AD_FOOD_SELL_RATE))&&e.buffEndTime&&(e=e.buffEndTime-l.default.DateUtils.Now())+o>i&&(o=i-e,d.default.launch("\u5df2\u8fbe\u5230\u65f6\u95f4\u4e0a\u9650\uff01")),m.default.ins.addGlobalBuff({buffIndex:g.BuffIndex.AD_FOOD_SELL_RATE,buffValue:n,buffEndTime:l.default.DateUtils.Now()+o}),this.updateAdRateBuff());case 4:case"end":return t.stop()}},t,this)}))},f.updateAdRateBuff=function(){var t=w.default.ins.ad_booster_effect,e=w.default.ins.define.booster_ad_time;this.adRateBuffView&&this.adRateBuffView.updateUI(t,e),(e=m.default.ins.getGlobalBuffByIndex(g.BuffIndex.AD_FOOD_SELL_RATE))&&e.buffEndTime?(this.adBuffEndTime=e.buffEndTime,this.startTime(),l.default.RedPointMgr.next(l.default.RedPointMgr.types.AdRateBuff,!1)):l.default.RedPointMgr.next(l.default.RedPointMgr.types.AdRateBuff,!0)},f.checkAdRewardOpen=function(t){return void 0===t&&(t=!1),!!this.adRewardFunc||((t=t||l.default.ControllerManager.applyFunc(p.ControllerConst.SystemOpen,O.OpenConst.CHCEK_OPEN,O.OpenTypeConst.AD_REWARD))&&(this.adRewardCoolTime=w.default.ins.define.supply_ad_appear_cooltime,this.adRewardFunc=this.adRewardCountTimeCool,this.startTime()),t)},f.adRewardCountTimeCool=function(){if(this.adRewardCoolTime--,this.adRewardCoolTime<=0){if(this.adRewardCoolTime=0,l.default.RandomUtils.limit(0,1)<=w.default.ins.gemsChanceAtAd){var t=w.default.ins.define.supply_ad_gem_value;l.default.ViewManager.open(24,t.toString(),v.CostType.diamond)}else{var e=S.default.ins.calculateIdleMoney(w.default.ins.define.supply_ad_money_value);if(!e)return void(this.adRewardCoolTime=w.default.ins.define.supply_ad_appear_cooltime);l.default.ViewManager.open(24,e,v.CostType.coin)}this.adRewardShowTime=w.default.ins.define.supply_ad_appear_holdtime,this.adRewardFunc=this.adRewardCountTimeShow}},f.adRewardCountTimeShow=function(){this.adRewardShowTime--,this.adRewardShowTime<=0&&(this.adRewardShowTime=0,this.adRewardMoneyView.hide(),this.adRewardCoolTime=w.default.ins.define.supply_ad_appear_cooltime,this.adRewardFunc=this.adRewardCountTimeCool)},f.watchAdReward=function(t){return u(this,void 0,void 0,r().mark(function e(){var n,o,i;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.ControllerManager.applyFunc(p.ControllerConst.AD,0,3);case 2:o=e.sent,i=0,o&&0===o.code&&(i=t==v.CostType.diamond?(n=w.default.ins.define.supply_ad_gem_value,C.default.ins.diamondChange(n),n):(n=S.default.ins.calculateIdleMoney(w.default.ins.define.supply_ad_money_value),C.default.ins.moneyChange(n),n),l.default.ViewManager.close(24),l.default.NotificationCenter.dispatch(y.NotificationConst.PLAY_MONEY_ANI,t,i),this.adRewardCoolTime=w.default.ins.define.supply_ad_appear_cooltime,this.adRewardFunc=this.adRewardCountTimeCool);case 5:case"end":return e.stop()}},e,this)}))},s=c,(h=[{key:"model",get:function(){return this._model}}])&&o(s.prototype,h),Object.defineProperty(s,"prototype",{writable:!1}),c}(h.default),cc._RF.pop()},{}],AdRewardModle:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3756dL37bdFMp3fM6e6JzOy","AdRewardModle");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseModel");a.default=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).savaData=null,n._saveKey="AdReward",c.default.SaveManage.add(r(n),n._saveKey,!0,!0),c.default.SaveManage.load(n._saveKey),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.init=function(){},a.updateDayData=function(){},a.createMemento=function(){return this.savaData},a.setMemento=function(t){this.savaData=t||{}},i}(s.default),cc._RF.pop()},{}],AdRewardMoneyView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d22af97bTFEtKv/2kuxH34w","AdRewardMoneyView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.AdRewardMoneyView=void 0;var u=a("App"),l=a("SwitchFrame"),h=a("BaseView"),f=a("ControllerConst"),d=a("BagController"),p=a("MyBigLong"),y=a("AdRewardConst"),v=cc._decorator,g=v.property,m=(v.menu,v.ccclass);a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).btn=null,e.numLab=null,e.switchFrame=null,e.bgType=0,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(e,n){t.prototype.open.call(this),p.default.tempNum.init(e,0),this.numLab.string="+"+p.default.tempNum.toString(),this.type=n,this.switchFrame.frameIndex=n%d.CostType.coin,this.show()},a.show=function(){this.btn.stopAllActions(),this.btn.x=425,cc.tween(this.btn).delay(.5).to(1,{x:260}).start()},a.hide=function(){var t=this;this.btn.stopAllActions(),this.btn.x=247,cc.tween(this.btn).to(1,{x:425}).call(function(){t.closeView()}).start()},a.onTouchBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(f.ControllerConst.AdReward,y.AdRewardConst.WATCH_AD_REWARD,this.type);case 2:case"end":return t.stop()}},t,this)}))},i}(h.default),i([g(cc.Node)],a.prototype,"btn",void 0),i([g(cc.Label)],a.prototype,"numLab",void 0),i([g(l.default)],a.prototype,"switchFrame",void 0),a=i([m],a),c.AdRewardMoneyView=a,cc._RF.pop()},{}],AdShareBtnCtr:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"edff3CXSOxByYaREqZ8pqL3","AdShareBtnCtr");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("GameText"),l=a("ControllerConst"),h=a("ADController"),f=(a("ADManageBase"),cc._decorator),d=f.ccclass,p=f.property;f.menu,i([p],(a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._adType="",e._isForbiden=!0,e.button=null,e.sprite=null,e.label=null,e.shareStr="",e.freeStr="",e.adStr="",e.adFailStr="common_btn_fail",e.failStr="common_btn_zero",e.adLoadingStr="common_loading",e.toAdEvent=[],e.toFailEvent=[],e.toShareEvent=[],e.toFreeEvent=[],e.toPayEvent=[],e.supercashStr="",e.toSupercashEvent=[],e.isFirst=!0,e.imgUrl="",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,f=i.prototype;return f.onLoad=function(){this.adLoadingStr?this.adLoadingStr=u.GameText.getTextByStr(this.adLoadingStr)||this.adLoadingStr:this.adLoadingStr=u.GameText.getText(12),this.adStr&&(this.adStr=u.GameText.getTextByStr(this.adStr)||this.adStr),this.shareStr?this.shareStr=u.GameText.getTextByStr(this.shareStr)||this.shareStr:this.shareStr=this.adStr,this.adFailStr?this.adFailStr=u.GameText.getTextByStr(this.adFailStr)||this.adFailStr:this.adFailStr=this.adStr,this.freeStr?this.freeStr=u.GameText.getTextByStr(this.freeStr)||this.freeStr:this.freeStr=this.adStr,this.supercashStr?this.supercashStr=u.GameText.getTextByStr(this.supercashStr)||this.supercashStr:this.supercashStr=this.adStr,this.failStr?this.failStr=u.GameText.getTextByStr(this.failStr)||this.failStr:this.failStr=this.adStr,this.button=this.getComponent(cc.Button)},f.setSpriteFrame=function(t,e){this.imgUrl!==t&&(this.imgUrl=t,cc.resources.load(t,cc.SpriteFrame,function(t,n){t||(e.spriteFrame=n)}))},f.toAd=function(t,e,n,r){this.sprite&&(this.setSpriteFrame("Texture/common/icons/icon_ad",this.sprite),this.sprite.node.active=!0),1===r?(this.label&&(this.label.string=this.adLoadingStr),this._isForbiden&&(this.button.interactable=!1)):2===r?(this._isForbiden&&(this.button.interactable=!0),this.label&&(this.label.string=this.adStr)):3===r&&(this._isForbiden&&(this.button.interactable=!1),this.label&&(this.label.string=this.adFailStr)),cc.Component.EventHandler.emitEvents(this.toAdEvent,t,e,n,r)},f.toShare=function(){this.sprite&&this.setSpriteFrame("Texture/common/icons/icon_share",this.sprite),this.label&&(this.label.string=this.shareStr),this._isForbiden&&(this.button.interactable=!0),cc.Component.EventHandler.emitEvents(this.toShareEvent)},f.toFail=function(t,e,n){this.label&&(this.label.string=this.failStr),this._isForbiden&&(this.button.interactable=!1),cc.Component.EventHandler.emitEvents(this.toFailEvent,t,e,n)},f.toFree=function(t,e,n){this.sprite&&(this.sprite.node.active=!1),this.label&&(this.label.string=this.freeStr),this._isForbiden&&(this.button.interactable=!0),cc.Component.EventHandler.emitEvents(this.toFreeEvent,t,e,n)},f.toPay=function(t,e,n){cc.Component.EventHandler.emitEvents(this.toPayEvent,t,e,n)},f.toSupercash=function(t,e,n){this.setSpriteFrame("Texture/common/icons/money_11001003",this.sprite),this.label&&(this.label.string=this.supercashStr.format(e.price+n.superCashCnt*e.addSuperCash+"")),this._isForbiden&&(this.button.interactable=!0),cc.Component.EventHandler.emitEvents(this.toSupercashEvent,t,e,n)},f.onEnable=function(){s.default.ControllerManager.applyFunc(l.ControllerConst.AD,1,this.adType,this)},f.onDisable=function(){s.default.ControllerManager.applyFunc(l.ControllerConst.AD,2,this.adType,this)},a=i,(c=[{key:"adType",get:function(){return h.AdType[this._adType]},set:function(t){this._adType=h.AdType[t]}},{key:"forbiden",get:function(){return this._isForbiden},set:function(t){this._isForbiden=t}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component)).prototype,"_adType",void 0),i([p({type:cc.Enum(h.AdType)})],a.prototype,"adType",null),i([p()],a.prototype,"_isForbiden",void 0),i([p({})],a.prototype,"forbiden",null),i([p({type:cc.Sprite})],a.prototype,"sprite",void 0),i([p({type:cc.Label})],a.prototype,"label",void 0),i([p({})],a.prototype,"shareStr",void 0),i([p({})],a.prototype,"freeStr",void 0),i([p({})],a.prototype,"adStr",void 0),i([p({})],a.prototype,"adFailStr",void 0),i([p({})],a.prototype,"failStr",void 0),i([p({})],a.prototype,"adLoadingStr",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toAdEvent",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toFailEvent",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toShareEvent",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toFreeEvent",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toPayEvent",void 0),i([p({})],a.prototype,"supercashStr",void 0),i([p({type:cc.Component.EventHandler})],a.prototype,"toSupercashEvent",void 0),a=i([d],a),c.default=a,cc._RF.pop()},{}],AnalyticMgr:[function(t,e,n){"use strict";cc._RF.push(e,"1c604Mskk1GQIOCQgg7zqcb","AnalyticMgr");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App");o.default=function(){function t(){this.loginId=-1}var e=t.prototype;return e.AD=function(t,e){void 0===e&&(e=0)},e.recordDiamondCost=function(){},e.recordState=function(){},e.record=function(){},e.recordUserBuy=function(){},e.recordFirstAD=function(){},e.recordInteractionAd=function(){},e.activityLogout=function(){},e.activityLogin=function(){},e.dayStatistics=function(){},e.recordPay=function(t,e,n,r){r=r||i.default.Platform.appid},e.sentDayRetain=function(){var t,e=i.default.DateUtils.Now(),n=localStorage.getItem("DAY_RETAIN");n?(t=parseInt(n),i.default.DateUtils.isLastDay(t/1e3,e/1e3)&&localStorage.setItem("DAY_RETAIN",e.toString())):localStorage.setItem("DAY_RETAIN",e.toString())},t}(),cc._RF.pop()},{}],App:[function(t,e,n){"use strict";cc._RF.push(e,"a7092o4k9lH+bQ5FZfR23kA","App");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("ConfigManager"),a=r("GameDataMsr"),c=r("AnalyticMgr"),s=r("ControllerManager"),u=r("ViewManager"),l=r("ResManager"),h=r("ResRecycle"),f=r("SaveManage"),d=r("SceneManager"),p=r("SettingManager"),y=r("SoundManager"),v=r("Base64"),g=r("Color"),m=r("CommonUtils"),_=r("DateUtils"),b=r("DebugUtils"),w=r("Http"),C=r("MathUtils"),S=r("MessageCenter"),O=r("RandomUtils"),T=r("RedPointMgr"),I=r("ShockUtils"),E=r("StringUtil"),x=r("TimeManager"),A=function(){function t(){}return t.init=function(){t.isInit||(t.isInit=!0,t.ObjectPool=new ObjectPool,t.MessageCenter=t.NotificationCenter=new S.default(1),t.DateUtils=new _.DateUtils,t.CommonUtils=new m.CommonUtils,t.SaveManage=new f.default,t.MathUtils=new C.MathUtils,t.RandomUtils=new O.default,t.Http=new w.Http,t.TimerManager=new x.TimerManager,t.SoundManager=new y.default,t.SettingManager=new p.default,t.ResManager=new l.default,t.ControllerManager=new s.default,t.ViewManager=new u.default,t.ConfigManager=new i.ConfigManager,t.GameDataMsr=new a.GameDataMsr,t.SceneManager=new d.SceneManager,t.StringUtil=new E.StringUtil,t.Bass64=new v.Base64,t.DebugUtils=new b.DebugUtils,t.RedPointMgr=new T.RedPointMgr,t.ResRecycle=new h.ResRecycle,t.AnalyticMgr=new c.default,t.ShockUtils=new I.default,t.Color=new g.Color)},t}();o.default=A,A.isInit=!1,A.ShockUtils=null,A.AnalyticMgr=null,A.ResRecycle=null,A.EasyLoading=null,A.Platform=null,A.RedPointMgr=null,A.DebugUtils=null,A.ObjectPool=null,A.SaveManage=null,A.CommonUtils=null,A.DateUtils=null,A.MathUtils=null,A.RandomUtils=null,A.Http=null,A.TimerManager=null,A.NotificationCenter=null,A.MessageCenter=null,A.ResManager=null,A.ControllerManager=null,A.SoundManager=null,A.ViewManager=null,A.SettingManager=null,A.ConfigManager=null,A.GameDataMsr=null,A.SceneManager=null,A.NodePoolMsr=null,A.StringUtil=null,A.Bass64=null,A.Color=null,window.App=A,cc._RF.pop()},{}],ArchiveonMgrView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"bcbb66GxPVFB7p17OZHql4B","ArchiveonMgrView");var s,u,l=t,h=n,f=(u=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(h,"__esModule",{value:!0}),h.ArchiveonMgrView=void 0;var d=l("App"),p=l("List"),y=l("BaseView"),v=l("Toast"),g=(l("ViewConst"),l("GameDataMsr")),m=l("TipView"),_=cc._decorator,b=_.ccclass,w=_.property,C=null,S=s=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).itemList=null,e.itemDatas=null,e.items=[],e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this),this.itemDatas=s.getArchiveonData(),this.itemList.numItems=this.itemDatas.list.length},i.getArchiveonData=function(){if(!C){var t=cc.sys.localStorage.getItem("ArchiveonCache");if(t)try{C=JSON.parse(t)}catch(t){C={cur:"",list:[]}}else C={cur:"",list:[]}}return C},a.saveData=function(){cc.sys.localStorage.setItem("ArchiveonCache",JSON.stringify(this.itemDatas))},a.loadRemote=function(t){return f(this,void 0,void 0,r().mark(function e(){var n,i,a,c,s,u,l,h,f;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.Http.requestAsync("https://wxclient.gzqidong.cn/MergeElves/archive/assets/archive/r_cfg.txt?"+Date.now(),{},"GET");case 2:return n=e.sent,Log.trace("result:",n),cc.assetManager.downloader.bundleVers?cc.assetManager.downloader.bundleVers.archive=n:cc.assetManager.downloader.bundleVers={archive:n},i=t.target.getComponentInChildren(cc.EditBox).string||"normal",e.t0=o,e.next=8,d.default.ResManager.loadDirInBundle("https://wxclient.gzqidong.cn/MergeElves/archive/assets/archive",i,cc.JsonAsset);case 8:e.t1=e.sent,a=(0,e.t0)(e.t1);case 10:if((c=a()).done){e.next=24;break}s=c.value,u=s.json,l=!1,h=this.itemDatas.list.length,f=0;case 14:if(!(f<h)){e.next=21;break}if(this.itemDatas.list[f].name!=u.name){e.next=18;break}return l=!0,e.abrupt("break",21);case 18:f++,e.next=14;break;case 21:l?this.itemDatas.list[f]=u:u.name?this.itemDatas.list.push(u):this.itemDatas.list.push({name:(new Date).Format("\u8fdc\u7a0b-0(MM-dd hh:mm:ss)"),data:u});case 22:e.next=10;break;case 24:v.default.launch("\u5bfc\u5165\u5b8c\u6210!"),this.itemList.numItems=this.itemDatas.list.length,this.saveData();case 25:case"end":return e.stop()}},e,this)}))},a.addNewArchive=function(t){var e=this,n=t.target.getComponentInChildren(cc.EditBox);try{var r,o=function(){var t;(t=n.string.includes("{")?JSON.parse(n.string):JSON.parse(d.default.StringUtil.unzip(n.string))).name||(t={name:(new Date).Format("\u5b58\u6863(MM-dd hh:mm:ss)"),data:t}),r=e.itemDatas.list.length;for(var o=function(n){if(e.itemDatas.list[n].name==t.name)return{v:{v:void d.default.ViewManager.open(14,{tipsStr:"\u5df2\u6709\u76f8\u540c\u540d\u5b57\u7684\u5b58\u6863,\u662f\u5426\u8986\u76d6\u65e7\u5b58\u6863!!!",leftBtnText:"\u8986\u76d6",hasCloseBtn:!1,curState:m.TIPSTATE.SURE_CANCEL,leftFunc:function(){e.itemDatas.list[n]=t,v.default.launch("\u5bfc\u5165\u5b58\u6863\u6210\u529f,\u8986\u76d6\u4e86\u65e7\u7684\u5b58\u6863!")},leftThisObj:e,rightBtnText:"\u65b0\u589e",rightFunc:function(){e.itemDatas.list.push(t),t.name+="(new)",e.itemList.numItems=e.itemDatas.list.length,v.default.launch("\u5bfc\u5165\u4e86\u5b58\u6863:"+t.name)},rightThisObj:e})}}},i=0;i<r;i++){var a=o(i);if("object"==typeof a)return a.v}e.itemDatas.list.push(t),e.itemList.numItems=e.itemDatas.list.length,e.saveData()}();if("object"==typeof o)return o.v}catch(t){v.default.launch("\u5bfc\u5165\u5931\u8d25!"),Log.error(t)}},a.addCurArchive=function(t){var e=this,n=t.target.getComponentInChildren(cc.EditBox);try{var r,o,i=function(){var t=d.default.SaveManage.getAllAutoSaveData();if(n.string){r=e.itemDatas.list.length;for(var i=function(r){if(e.itemDatas.list[r].name==n.string)return{v:{v:void d.default.ViewManager.open(14,{tipsStr:"\u5df2\u6709\u76f8\u540c\u540d\u5b57\u7684\u5b58\u6863,\u662f\u5426\u8986\u76d6\u65e7\u5b58\u6863!!!",leftBtnText:"\u8986\u76d6",hasCloseBtn:!1,curState:m.TIPSTATE.SURE_CANCEL,leftFunc:function(){e.itemDatas.list[r].data=t,e.saveData(),v.default.launch("\u5b58\u5165\u6210\u529f!")},leftThisObj:e,rightBtnText:"\u53d6\u6d88",rightFunc:function(){},rightThisObj:e})}}},a=0;a<r;a++){var c=i(a);if("object"==typeof c)return c.v}o=n.string}else o=(new Date).Format("\u5b58\u6863(MM-dd hh:mm:ss)");e.itemDatas.list.push({name:o,data:JSON.parse(t)}),e.itemList.numItems=e.itemDatas.list.length,e.saveData()}();if("object"==typeof i)return i.v}catch(t){v.default.launch("\u5bfc\u5165\u5931\u8d25!"),Log.error(t)}},a.importText=function(t){try{for(var e="string"==typeof t.data?JSON.parse(t.data):t.data,n=Object.keys(e),r={},o=0,i=n;o<i.length;o++){var a=i[o];r[a.replace(/[\d]{8}/,"")]=e[a]}var c=(e=r)[g.GameDataSaveKey.PLAYER_INFO],s=d.default.GameDataMsr.playerInfo;c.saveTime=d.default.DateUtils.Now(),c.id=s.id,c.account=s.account,c.nickName=s.nickName,d.default.SaveManage.syncByData(e),d.default.GameDataMsr.playerInfo.token=null,d.default.SaveManage.clearAllItem(),d.default.ViewManager.open(14,{tipsStr:"\u5bfc\u5165\u5b58\u6863\u6210\u529f",hasCloseBtn:!1,curState:m.TIPSTATE.SURE,leftFunc:function(){d.default.Platform.resetGame()},leftThisObj:this})}catch(l){d.default.ViewManager.open(14,{tipsStr:"\u5bfc\u5165\u5b58\u6863\u51fa\u9519",curState:m.TIPSTATE.NO_SURE,hasCloseBtn:!0})}},a.onEditArchiveName=function(t,e){if(this.itemDatas.list[e].name!=t.string){for(var n=this.itemDatas.list.length,r=0;r<n;r++)if(this.itemDatas.list[r].name==t.string)return v.default.launch("\u4fee\u6539\u5931\u8d25,\u5b58\u6863\u540d\u4e0d\u5141\u8bb8\u91cd\u590d"),void(t.string=this.itemDatas.list[e].name);this.itemDatas.list[e].name=t.string,this.saveData()}},a.onOutputArchive=function(t,e){var n,r=parseInt(e);e=this.itemDatas.list[r],cc.sys.platform!==cc.sys.WECHAT_GAME?((n=document.createElement("a")).download=e.name+".json",n.style.display="none",r=new Blob([JSON.stringify(e,null,4)]),n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),document.body.removeChild(n)):(n="",n="string"==typeof e.data?e.data:d.default.StringUtil.zipStr(JSON.stringify(e.data)),wx.setClipboardData({data:n,success:function(){}}))},a.onDeleteArchive=function(t,e){e=parseInt(e),this.itemDatas.list.splice(e,1),this.itemList.numItems=this.itemDatas.list.length,this.saveData()},a.onLoadArchive=function(t,e){e=parseInt(e),e=this.itemDatas.list[e],this.importText(e)},a.onRenderItem=function(t,e){var n=this.itemDatas.list[e],r=t.getChildByName("btns"),o={edit:t.getChildByName("EditBox").getComponent(cc.EditBox),loadBtn:r.getChildByName("\u52a0\u8f7d").getComponent(cc.Button),delBtn:r.getChildByName("\u5220\u9664").getComponent(cc.Button),outputBtn:r.getChildByName("\u5bfc\u51fa").getComponent(cc.Button),visistBtn:r.getChildByName("\u8bbf\u95ee").getComponent(cc.Button)};o.edit.string=n.name,o.loadBtn.clickEvents[0].customEventData=o.delBtn.clickEvents[0].customEventData=o.visistBtn.clickEvents[0].customEventData=o.outputBtn.clickEvents[0].customEventData=o.edit.editingDidEnded[0].customEventData=e+""},i}(y.default);u([w({type:p.default})],S.prototype,"itemList",void 0),s=u([b],S),h.ArchiveonMgrView=s,cc._RF.pop()},{}],AstarHoneycombRoadSeeker:[function(t,e,n){"use strict";cc._RF.push(e,"470f8oyv3xHR719BwQrvDie","AstarHoneycombRoadSeeker");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=10,this.maxStep=1e3,this._round1=[[0,-1],[1,-1],[1,0],[0,1],[-1,0],[-1,-1]],this._round2=[[0,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]],this.handle=-1,this.optimize=!0,this._roadNodes=t}var e=t.prototype;return e.seekPath=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(1==this._targetNode.value)return console.log("\u76ee\u6807\u4e0d\u53ef\u8fbe\u5230\uff1a"),[];this._openlist=[],this._closelist=[];for(var n=0;;){if(n>this.maxStep)return[];if(n++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return[];if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),this._currentNode==this._targetNode)return this.getPath();this._closelist.push(this._currentNode)}return[]},e.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];this._openlist=[],this._closelist=[];for(var n=0,r=null;;){if(n>this.maxStep)return console.log("\u6ca1\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",n),this.seekPath(t,r);if(n++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return console.log("\u6ca1\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",n),this.seekPath(t,r);if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),(null==r||this._currentNode.h<r.h)&&(r=this._currentNode),this._currentNode==this._targetNode)return console.log("\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",n),this.getPath();this._closelist.push(this._currentNode)}return this.seekPath(t,r)},e.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0},e.getPath=function(){for(var t=[],e=this._targetNode;e!=this._startNode;)t.unshift(e),e=e.parent;if(t.unshift(this._startNode),!this.optimize)return t;for(var n=1;n<t.length-1;n++){var r=t[n-1],o=t[n],i=t[n+1],a=!1,c=null;(a=(c=2==Math.abs(i.cx-r.cx)&&r.cy==i.cy?o.cx%2==0?o.cy==r.cy?this._roadNodes[o.cx+"_"+(o.cy+1)]:this._roadNodes[o.cx+"_"+(o.cy-1)]:o.cy==r.cy?this._roadNodes[o.cx+"_"+(o.cy-1)]:this._roadNodes[o.cx+"_"+(o.cy+1)]:c)?1!=c.value:a)&&(t.splice(n,1),n--)}for(n=1;n<t.length-1;n++){r=t[n-1],o=t[n],i=t[n+1];var s=o.cx==r.cx&&o.cx==i.cx,u=o.cy==r.cy&&o.cy==i.cy&&r.cx%2==o.cx%2&&o.cx%2==i.cx%2,l=r.cy-Math.floor(r.cx/2)==o.cy-Math.floor(o.cx/2)&&o.cy-Math.floor(o.cx/2)==i.cy-Math.floor(i.cx/2),h=r.cy+Math.ceil(r.cx/2)==o.cy+Math.ceil(o.cx/2)&&o.cy+Math.ceil(o.cx/2)==i.cy+Math.ceil(i.cx/2);(s||u||l||h)&&(t.splice(n,1),n--)}return t},e.testSeekPathStep=function(t,e,n,r,o){var i,a=this;void 0===o&&(o=100),this._startNode=t,this._currentNode=t,this._targetNode=e,1!=this._targetNode.value&&(this._openlist=[],this._closelist=[],i=0,clearInterval(this.handle),this.handle=setInterval(function(){return i>a.maxStep?(console.log("\u6ca1\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",i),void clearInterval(a.handle)):(i++,a.searchRoundNodes(a._currentNode),0==a._openlist.length?(console.log("\u6ca1\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",i),void clearInterval(a.handle)):(a._openlist.sort(a.sortNode),a._currentNode=a._openlist.shift(),void(a._currentNode==a._targetNode?(console.log("\u627e\u5230\u76ee\u6807\u8ba1\u7b97\u6b65\u9aa4\u4e3a\uff1a",i),clearInterval(a.handle),n.apply(r,[a._startNode,a._targetNode,a._currentNode,a._openlist,a._closelist,a.getPath()])):(a._closelist.push(a._currentNode),n.apply(r,[a._startNode,a._targetNode,a._currentNode,a._openlist,a._closelist,null])))))},o))},e.searchRoundNodes=function(t){for(var e=t.cx%2==0?this._round1:this._round2,n=0;n<e.length;n++){var r=t.cx+e[n][0],o=t.cy+e[n][1];null==(o=this._roadNodes[r+"_"+o])||o==this._startNode||1==o.value||this.isInCloseList(o)||this.setNodeF(o)}},e.setNodeF=function(t){var e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL;if(this.isInOpenList(t)){if(!(e<t.g))return;t.g=e}else t.g=e,this._openlist.push(t);t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h},e.isInOpenList=function(t){return-1!=this._openlist.indexOf(t)},e.isInCloseList=function(t){return-1!=this._closelist.indexOf(t)},e.inInCorner=function(t){if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this._roadNodes[this._currentNode.cx+"_"+t.cy];return t=this._roadNodes[t.cx+"_"+this._currentNode.cy],null==e||0!=e.value||null==t||0!=t.value},e.dispose=function(){this._roadNodes=null,this._round1=null,this._round2=null},t}(),cc._RF.pop()},{}],AttributeBase:[function(t,e,n){"use strict";var r;cc._RF.push(e,"71be526brZPIZJZGUgx7bWg","AttributeBase");var o,i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.AttributeBase=a.AttributeGroppKey=void 0,o=i("CostumeConst"),(i=a.AttributeGroppKey||(a.AttributeGroppKey={}))[i.BASE=0]="BASE",i[i.BUFF=1]="BUFF";var c=((r={})[o.CostumeAbilityType.doublebase]=o.CostumeAbilityType.base,r);a.AttributeBase=function(){function t(){this.finalAttr=null,this.attrGroups=null,this.attrBites=null,this.isNeedReCal=!1,this.reset()}var e=t.prototype;return e.addAttrBute=function(t,e){this.isNeedReCal=!0,this.attrBites[t]=e},e.removeAttrBute=function(t){this.isNeedReCal=!0,delete this.attrBites[t]},e.getAttrBute=function(t){return this.attrBites[t]},e.addAttrDict=function(t,e){this.isNeedReCal=!0,this.attrGroups[t]=e},e.getAttrDict=function(t){return this.attrGroups[t]},e.removeAttrDict=function(t){this.isNeedReCal=!0,delete this.attrGroups[t]},e.addAttrValue=function(t,e,n){var r;this.isNeedReCal=!0,this.attrGroups[t]?this.attrGroups[t][e]=n:this.attrGroups[t]=((r={})[e]=n,r)},e.removeAttrValue=function(t,e){this.isNeedReCal=!0,this.attrGroups[t]&&delete this.attrGroups[t][e]},e.toString=function(){return"\u653b\u51fb:"+this.finalAttr.ap+", \u6218\u529b:"+this.finalAttr.power+", HP:"+this.finalAttr.hp+", \u66b4\u51fb\u7387:"+this.finalAttr.crit+", \u95ea\u907f\u7387:"+this.finalAttr.dodge},e.claFinishAttr=function(){var t=this.finalAttr=Object.create(null);for(var e in this.attrGroups){var n,r=this.attrGroups[e];for(n in r){var o=r[n],i=t[n];null==i&&(i=0),t[n]=i+o}}for(var a in this.attrBites){var s,u=this.attrBites[a].finalAttr;for(s in u){var l=u[s],h=t[s];null==h&&(h=0),t[s]=h+l}}for(var f in t){var d=c[f];d&&t[d]&&(t[d]=t[d]*t[f]/100,delete t[f])}},e.reset=function(){this.finalAttr=Object.create(null),this.attrGroups=Object.create(null),this.attrBites=Object.create(null)},t}(),cc._RF.pop()},{}],Attribute:[function(t,e,n){"use strict";cc._RF.push(e,"c552cKSUwJNz423gyAX4syS","Attribute");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(){this.tipChance=0,this.generousTipRate=0,this.chefProductionSpeed=1,this.waiterProductionSpeed=1,this.moneyRate=1,this.customerMoveSpeed=1,this.chefspeed=0,this.waiterspeed=0,this.perfectDishRate=0,this.instaCompletedDishRate=0,this.menuItemUpgradeDiscount=0,this.cookMoneyRate=0}}(),cc._RF.pop()},{}],AutoReleaseImg:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0e153kUYIJEVaFFPgzYDBVk","AutoReleaseImg");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u="AutoReleaseImg",l=cc._decorator,h=l.ccclass,f=l.property;l.menu,a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._source="",e.imgState=0,e._spriteFrame=null,e.isNeedDestory=!1,e.isReleaseUnable=!1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,l=i.prototype;return l.onLoad=function(){this.isNeedDestory||this.parseSource()},l.onImgDestory=function(){this.spriteFrame&&(s.default.ResRecycle.decRefByUrl(this._source,u),this.spriteFrame=null,this.imgState=0)},l.onEnable=function(){t.prototype.onEnable.call(this),this.isReleaseUnable&&this.parseSource()},l.onDisable=function(){t.prototype.onDisable.call(this),this.isReleaseUnable&&this.onImgDestory()},l.onDestroy=function(){this.onImgDestory()},l.parseSource=function(){var t=this;if(0==this.imgState){var e=this._source;this.imgState=1,cc.resources.load(e,cc.SpriteFrame,function(n,r){if(n)t.imgState=0,Log.error("\u56fe\u7247\u4e0d\u5b58\u5728:"+e,n);else if(s.default.ResRecycle.addUrl(e,u),t.isValid){if(t.isReleaseUnable&&!t.node.activeInHierarchy)return t.imgState=0,void s.default.ResRecycle.decRefByUrl(e,u);t.imgState=2,t.spriteFrame=r}else s.default.ResRecycle.decRefByUrl(e,u)})}},a=i,(c=[{key:"source",get:function(){return this._spriteFrame},set:function(t){var e=this;t?(this.spriteFrame=t,Editor.assetdb.queryMetaInfoByUuid(t._uuid,function(n,r){if(n)cc.error(n);else{var o=r.assetUrl;o.startsWith("db://assets/resources")?(e.spriteFrame=t,o=o.replace("db://assets/resources/",""),e._source=o.slice(0,o.lastIndexOf(".")),Editor.log(e._source)):cc.error("\u53ea\u5141\u8bb8\u653e\u7f6eresources\u6587\u4ef6\u5939\u91cc\u9762\u7684\u56fe\u7247")}})):(this.spriteFrame=null,this._source="")}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Sprite),i([f()],a.prototype,"_source",void 0),i([f({type:cc.SpriteFrame,editorOnly:!0,override:!0})],a.prototype,"_spriteFrame",void 0),i([f({type:cc.SpriteFrame,override:!0})],a.prototype,"source",null),i([f({})],a.prototype,"isReleaseUnable",void 0),a=i([h],a),c.default=a,cc._RF.pop()},{}],B3Error:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e686et4dm9MMY6/wypPPTF4","B3Error");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Action");i.default=function(t){var e,n;function o(){return t.call(this,{name:"Error"})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(){return a.ERROR},o}(c.default),cc._RF.pop()},{}],B3Functions:[function(t,e,n){"use strict";cc._RF.push(e,"ed75fheFMpLnIiOYISHJHlI","B3Functions");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.createUUID=void 0,r.createUUID=function(){for(var t=[],e=0;e<36;e++)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},cc._RF.pop()},{}],B3Tree1:[function(t,e,n){"use strict";cc._RF.push(e,"b5ea50/9ZtDP7DlY5dPrHCU","B3Tree1");var r=t,o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.BaseDecorator=i.BaseCondition=i.BaseAction=i.register=i.b3=void 0;var a=r("Actions");Object.defineProperty(i,"register",{enumerable:!0,get:function(){return a.register}}),o=r("b3"),i.b3=o,o=r("BaseAction"),i.BaseAction=o.default,o=r("BaseCondition"),i.BaseCondition=o.default,r=r("BaseDecorator"),i.BaseDecorator=r.default,cc._RF.pop()},{}],BackgroundAdapter:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"12d22Kj3WZES6hySkZU+mW7","BackgroundAdapter");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass;a.menu,o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([c],o=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.onLoad=function(){this.node.scale=cc.winSize.height/1664},o}(cc.Component)),i.default=o,cc._RF.pop()},{}],BagConst:[function(t,e,n){"use strict";cc._RF.push(e,"6c4f1BX44NOvZ5qM7Cry26R","BagConst");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.CostumeItemRuleKey=o.BagConst=o.ItemType=void 0;var i=r("ConfigManager");(r=o.ItemType||(o.ItemType={}))[r.BOX=0]="BOX",r[r.IELD_MONEY=1]="IELD_MONEY",r[r.SUPER_CASH=2]="SUPER_CASH",r[r.BUFF=4]="BUFF",r[r.COSTUME=5]="COSTUME",r[r.REMOVE_AD=6]="REMOVE_AD",(r=o.BagConst||(o.BagConst={}))[r.USE_ITEM=0]="USE_ITEM",r[r.ADD_TIME=1]="ADD_TIME",r[r.USE_ITEM_ANI=2]="USE_ITEM_ANI",r[r.GET_ITEM=3]="GET_ITEM",r[r.GET_ITEMS_BY_TYPE=4]="GET_ITEMS_BY_TYPE",i.registerJSONConf("item_data","files/item_data"),(o.CostumeItemRuleKey||(o.CostumeItemRuleKey={})).NORMAL="normal",cc._RF.pop()},{}],BagController:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"df19dqEXrlJwLTOaEjF1ubh","BagController");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0}),c.CostType=void 0;var s,u=a("App"),l=a("BaseController"),h=a("NotificationConst"),f=a("GameConst"),d=a("CurrencyService"),p=a("BagConst"),y=a("BagModel"),v=null;c.default=function(t){var e,n;function a(){var e;return(e=t.call(this)||this)._model=null,(v=o(e)).initNotificationEvent(),e.setModel(new y.BagModel(o(e))),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var c,l,g=a.prototype;return g.initModuleEvent=function(){this.registerFunc(p.BagConst.USE_ITEM,this.useItem,this),this.registerFunc(p.BagConst.ADD_TIME,this.addItem,this),this.registerFunc(p.BagConst.USE_ITEM_ANI,this.useItemAni,this),this.registerFunc(p.BagConst.GET_ITEM,this.getItem,this),this.registerFunc(p.BagConst.GET_ITEMS_BY_TYPE,this.getItemType,this)},g.initNotificationEvent=function(){u.default.NotificationCenter.addListener(h.NotificationConst.INIT_GAME_FINISH,this.initGame,this)},g.initGame=function(){this.initModuleEvent(),u.default.NotificationCenter.removeListener(h.NotificationConst.INIT_GAME_FINISH,this.initGame,this),this._model.init()},g.useItemAni=function(t,e,n){void 0===n&&(n=0)},g.onLoadView=function(){},g.onOpenView=function(){},g.useItem=function(t,e){void 0===e&&(e=1);var n=this._model.itmes[t];if(n){if(n.cnt>=e){n.cnt-=e;var r=n.use(e);return u.default.NotificationCenter.dispatch(f.GameNotificationConst.USE_ITEM,t,e,r),r}return Log.warn("\u7269\u54c1\u6570\u91cf\u4e0d\u8db3, \u7269\u54c1id:"+t+", \u7269\u54c1\u540d\u79f0:"+n.getName()),{result:-1}}return Log.error("\u4e0d\u5b58\u5728\u7684\u7269\u54c1id:"+t),{result:-2}},g.addItem=function(t,e){if(void 0===e&&(e=1),t<=1e4){var n=this._model.itmes[t];return n?(n.cnt+=e,n.data.isNowUseItem?this.useItem(t,e,!0,!0):u.default.NotificationCenter.dispatch(f.GameNotificationConst.ADD_ITEM,t),!0):(Log.error("\u4e0d\u5b58\u5728\u7684\u7269\u54c1id:"+t),!1)}this.addMoney(t,e)},g.addMoney=function(t,e){switch(t){case s.coin:d.default.ins.moneyChange(e);break;case s.diamond:d.default.ins.diamondChange(e)}},g.getItem=function(t){return this._model.itmes[t]},g.getItemType=function(t){return this._model.itmeTypes[t]},c=a,l=[{key:"ins",get:function(){return v}}],null&&r(c.prototype,null),l&&r(c,l),Object.defineProperty(c,"prototype",{writable:!1}),a}(l.default),(c=s=c.CostType||(c.CostType={}))[c.coin=20001]="coin",c[c.diamond=20002]="diamond",cc._RF.pop()},{}],BagModel:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5a795MxSutF2okgqZ7Fxtv0","BagModel");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.BagModel=void 0;var c=i("App"),s=i("BaseModel"),u=i("BagConst"),l=i("BuffItem"),h=i("CreateCostumeItem"),f=i("ItemBase"),d=i("MoneyItem"),p=i("RemoveAdItem");a.BagModel=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).conf=null,n.itmes={},n.itmeTypes={},c.default.SaveManage.add(r(n),"BAG_DATA",!1,!0),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.getItemObjByType=function(t){switch(t){case u.ItemType.IELD_MONEY:return new d.default;case u.ItemType.BUFF:return new l.default;case u.ItemType.COSTUME:return new h.default;case u.ItemType.REMOVE_AD:return new p.RemoveAdItem;default:return new f.ItemBase}},a.init=function(){var t,e=this.conf=c.default.ConfigManager.getConfig("item_data");for(t in e){var n=e[t],r=this.getItemObjByType(n.itemType);r.setConfData(n),this.itmes[n.id]=r;var o=this.itmeTypes[n.itemType];o||(o={},this.itmeTypes[n.itemType]=o),o[n.id]=r}c.default.SaveManage.load("BAG_DATA")},a.createMemento=function(){var t={};for(var e in this.itmes){var n=this.itmes[e],r=n.createMemento();r&&(t[n.data.id]=r)}return t},a.setMemento=function(t){for(var e in this.itmes)this.itmes[e].setMemento(t&&t[e])},i}(s.default),cc._RF.pop()},{}],Base64:[function(t,e,n){"use strict";cc._RF.push(e,"a2b18UZ9xlE+K/HomwxZwLC","Base64");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.Base64=void 0,r.Base64=function(){function t(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}var e=t.prototype;return e.encode=function(t){var e,n,r,o,i,a,c="",s=0;for(t=this._utf8_encode(t);s<t.length;)r=(a=t.charCodeAt(s++))>>2,o=(3&a)<<4|(e=t.charCodeAt(s++))>>4,i=(15&e)<<2|(n=t.charCodeAt(s++))>>6,a=63&n,isNaN(e)?i=a=64:isNaN(n)&&(a=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(a);return c},e.decode=function(t){var e,n,r,o,i,a="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)e=this._keyStr.indexOf(t.charAt(c++))<<2|(r=this._keyStr.indexOf(t.charAt(c++)))>>4,n=(15&r)<<4|(o=this._keyStr.indexOf(t.charAt(c++)))>>2,r=(3&o)<<6|(i=this._keyStr.indexOf(t.charAt(c++))),a+=String.fromCharCode(e),64!=o&&(a+=String.fromCharCode(n)),64!=i&&(a+=String.fromCharCode(r));return this._utf8_decode(a)},e._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):(127<r&&r<2048?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e},e._utf8_decode=function(t){for(var e,n,r="",o=0,i=0;o<t.length;)(e=t.charCodeAt(o))<128?(r+=String.fromCharCode(e),o++):191<e&&e<224?(i=t.charCodeAt(o+1),r+=String.fromCharCode((31&e)<<6|63&i),o+=2):(i=t.charCodeAt(o+1),n=t.charCodeAt(o+2),r+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&n),o+=3);return r},t}(),cc._RF.pop()},{}],BaseAction:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0b8c9aPBUtHbaOS8XvXyeDA","BaseAction");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0}),c=c("Action"),s.default=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.interrupt=function(){},i.enter=function(){},i.toString=function(){var t=this.title,e=t.match(/(<[0-9a-zA-Z_]+>)/g);if(e)for(var n,o=r(e);!(n=o()).done;){var i=n.value,a=i.slice(1,i.length-1);t=t.replace(i,this.properties[a]+"")}return t},i.log=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=Log).trace.apply(t,[this.toString()].concat(n))},o}(c.default),cc._RF.pop()},{}],BaseClass:[function(t,e,n){"use strict";function r(){return(r=o()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4816871hYNHRYVllEzwf4rU","BaseClass");var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){function t(){}return t.getInstance=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._instance||(this._instance=r(this,e)),this._instance},t}(),cc._RF.pop()},{}],BaseCondition:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"77066LDAC5J3IyiAzeIW1/9","BaseCondition");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0}),c=c("Condition"),s.default=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n),o.prototype.log=function(){var t,e=this.title,n=e.match(/(<[0-9a-zA-Z_]+>)/g);if(n)for(var o,i=r(n);!(o=i()).done;){var a=o.value,c=a.slice(1,a.length-1);e=e.replace(a,this.properties[c]+"")}for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];(t=Log).trace.apply(t,[e].concat(u))},o}(c.default),cc._RF.pop()},{}],BaseController:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"81f17QKtrNBhpI/RPsQAGS7","BaseController");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseClass");a.default=function(t){var e,n;function i(){var e;return(e=t.call(this)||this).eventKeyMap=Object.create(null),e._messages={},e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,s,u=i.prototype;return u.initController=function(){return Promise.resolve()},u.addEventKeyMap=function(t){for(var e in t){var n=parseInt(e);isNaN(n)&&(this.eventKeyMap[e]=t[e])}},u.onLoadView=function(){},u.onOpenView=function(){},u.onCloseView=function(){},u.registerFunc=function(t,e,n){this._messages[t]=[e,n]},u.unregister=function(t){delete this._messages[t]},u.getProxy=function(){return this.proxy},u.applyFunc=function(t){for(var e=this._messages[t],n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e?e[0].apply(e[1],r):(Log.trace("\u6d88\u606f"+t+"\u4e0d\u5b58\u5728\u4fa6\u542c"),null)},u.applyControllerFunc=function(t,e){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return(n=c.default.ControllerManager).applyFunc.apply(n,[t,e].concat(o))},u.addListener=function(t,e,n,r){void 0===n&&(n=this),c.default.NotificationCenter.addListener(t,e,n,r)},u.removeAllListener=function(t){void 0===t&&(t=this),c.default.NotificationCenter.removeAll(t)},u.removeListener=function(t,e,n){void 0===n&&(n=this),c.default.NotificationCenter.removeListener(t,e,n)},u.dispatchMsg=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=c.default.NotificationCenter).dispatch.apply(e,[t].concat(r))},u.setModel=function(t){this._model=t},u.getModel=function(){return this._model},u.getControllerModel=function(t){return c.default.ControllerManager.getControllerModel(t)},u.destroy=function(){c.default.NotificationCenter.removeAll(this)},a=i,s=[{key:"ins",get:function(){return this.getInstance()}}],null&&r(a.prototype,null),s&&r(a,s),Object.defineProperty(a,"prototype",{writable:!1}),i}(s.default),cc._RF.pop()},{}],BaseDecorator:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b0b81l+BYBI2K2gPpUNkhHz","BaseDecorator");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0}),c=c("Decorator"),s.default=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n),o.prototype.log=function(){var t,e=this.title,n=e.match(/(<[0-9a-zA-Z_]+>)/g);if(n)for(var o,i=r(n);!(o=i()).done;){var a=o.value,c=a.slice(1,a.length-1);e=e.replace(a,this.properties[c]+"")}for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];(t=Log).trace.apply(t,[e].concat(u))},o}(c.default),cc._RF.pop()},{}],BaseMan:[function(t,e,n){"use strict";var r;function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"19c20pjOutBkarATLNQsfNU","BaseMan");var a,c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0}),u.CharactorState=u.aniMap=void 0;var l=s("MoveComponent"),h=cc._decorator,f=h.property,d=h.ccclass;u.aniMap=((r={})[l.Dir.Bottom]="Z_",r[l.Dir.BottomRight]="Z_",r[l.Dir.BottomLeft]="Z_",r[l.Dir.Right]="L_",r[l.Dir.TopRight]="L_",r[l.Dir.Top]="B_",r[l.Dir.TopLeft]="L_",r[l.Dir.Left]="L_",r),(s=a=u.CharactorState||(u.CharactorState={}))[s.stand=0]="stand",s[s.run=1]="run",s[s.send_food=2]="send_food",s[s.sitdown=3]="sitdown",s[s.cooking=4]="cooking",s=function(t){var e,n;function r(){var e;return(e=t.apply(this,arguments)||this).sp=null,e.aniPre=null,e.skinName="",e.moveSpeed=150,e.roleLangBubble=null,e._direction=0,e._state=0,e.curAniName="",e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var c,s,l=r.prototype;return l.start=function(){this.direction=0,this.state=a.stand},l.test=function(){},l.changeSlot=function(t,e,n){var r=this.sp.skeletonData.getRuntimeData(),o=r.findSkin(t),i=r.findSlotIndex(e),a=o.getAttachment(i,n),c=this.sp.findSlot(e);c&&c.setAttachment(a)},l.playAni=function(t){this.sp.setAnimation(0,this.aniPre+t,!0),this.sp.timeScale=1},c=r,(s=[{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t,this.aniPre=u.aniMap[t],this.sp.node.scaleX=4<t?-1:1,this.state=this._state}},{key:"state",get:function(){return this._state},set:function(t){this._state=t;var e="";switch(this._state){case a.stand:e=this.aniPre+"idle",this.sp.timeScale=1;break;case a.run:e=this.aniPre+"walk",this.sp.timeScale=this.moveSpeed/150;break;case a.sitdown:e=this.aniPre+"idle",this.sp.timeScale=1;break;case a.send_food:e=this.aniPre+"walk2",this.sp.timeScale=this.moveSpeed/150;break;case a.cooking:e=this.aniPre+"cook",this.sp.timeScale=1}this.curAniName!==e&&(this.sp.setAnimation(0,e,!0),this.curAniName=e)}}])&&o(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),r}(cc.Component),c([f(sp.Skeleton)],s.prototype,"sp",void 0),s=c([d],s),u.default=s,cc._RF.pop()},{}],BaseModel:[function(t,e,n){"use strict";cc._RF.push(e,"054334mTspEBrMU+SkFlBNV","BaseModel");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(t){this._controller=t,this._controller.setModel(this)}}(),cc._RF.pop()},{}],BaseNode:[function(t,e,n){"use strict";cc._RF.push(e,"85453yZWplLCKjgRrUi3Dwx","BaseNode");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("B3Functions"),a=r("constants");o.default=function(){function t(t){var e=void 0===t?{}:t,n=e.category,r=e.name,o=e.title,a=e.description,c=e.properties;this.id=i.createUUID(),this.category=n||"",this.name=r||"",this.title=o||this.name,this.description=a||"",this.properties=c||{}}var e=t.prototype;return e._execute=function(t){this._enter(t),t.blackboard.get("isOpen",t.tree.id,this.id)||this._open(t);var e=this._tick(t);return e!==a.RUNNING&&this._close(t),this._exit(t),e},e._enter=function(t){t._enterNode(this),this.enter(t)},e._open=function(t){t._openNode(this),t.blackboard.set("isOpen",!0,t.tree.id,this.id),this.open(t)},e._tick=function(t){return t._tickNode(this),this.tick(t)},e._close=function(t){t._closeNode(this),t.blackboard.set("isOpen",!1,t.tree.id,this.id),this.close(t)},e._exit=function(t){t._exitNode(this),this.exit(t)},e.enter=function(){},e.open=function(){},e.interrupt=function(){},e.close=function(){},e.exit=function(){},t}(),cc._RF.pop()},{}],BaseProxy:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"4c324NUTtpE671fagauBfqj","BaseProxy");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App");i.default=function(){function t(t){this._model=null,this._controller=t}var e,n,o=t.prototype;return o.setModel=function(t){this._model=t},o.applyFunc=function(t){return this._controller.applyFunc.apply(this._controller,arguments)},o.applyControllerFunc=function(t,e){return this._controller.applyControllerFunc.apply(this._controller,arguments)},o.receiveServerMsg=function(){},o.removeServerMsg=function(t,e,n){a.default.NotificationCenter.removeListener(t,e,n)},o.isError=function(t){return 1!=t.resultConst},o.dispatch=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=a.default.NotificationCenter).dispatch.apply(e,[t].concat(r))},e=t,(n=[{key:"isInit",get:function(){return this._isInit}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],BaseScene:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"aaf055scMxP4olBocVBFWac","BaseScene");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("NotificationConst"),c=o("App");i.default=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).sceneName="",e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){c.default.init(),c.default.NotificationCenter.addListener(a.NotificationConst.ON_KEY_BACK,this.onKeyBack,this),this.onEnter()},i.onKeyBack=function(){Log.trace("_keyDown:")},i.start=function(){},i.getLazyLoadGroup=function(){return[]},o.getPreloadGroup=function(){return[]},i.initResGroup=function(){},i.update=function(t){this.timerManager.onEnterFrame(t)},i.loadLazyRes=function(){},i.onEnter=function(){c.default.SceneManager.isFirstScene&&(c.default.SceneManager.isFirstScene=!1,c.default.SceneManager._sceneName=this.sceneName),c.default.ViewManager.reset(),c.default.SceneManager.onSceneLoad(),this.timerManager=c.default.TimerManager},i.onExit=function(){c.default.ViewManager.destoryAllView()},o}(cc.Component),cc._RF.pop()},{}],BaseService:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4ff69290r1IeLs/m+W/onlo","BaseService");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=o("ControllerConst");i.default=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.getModel=function(){return a.default.ControllerManager.getControllerModel(c.ControllerConst.Game)},i.onDestroy=function(){a.default.NotificationCenter.removeAll(this)},o}(cc.Component),cc._RF.pop()},{}],BaseSound:[function(t,e,n){"use strict";cc._RF.push(e,"e8d5demusxMK51D833/1Jgv","BaseSound");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.AUDIO_DIR=void 0,r.AUDIO_DIR="audio/",r.default=function(){function t(){this._cache={},this._loadingCache=[]}var e=t.prototype;return e.getSound=function(t){var e=r.AUDIO_DIR+t;return(t=cc.loader.getRes(e,cc.AudioClip))||cc.resources.load(e,cc.AudioClip,this.onResourceLoadComplete.bind(this)),t},e.onResourceLoadComplete=function(t,e){this.loadedPlay(e)},e.loadedPlay=function(){},e.checkCanClear=function(){return!0},t}(),cc._RF.pop()},{}],BaseView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c0fa3R/VSVGjKD4iR8StD58","BaseView");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.VIEW_CLOSE_TYPE=void 0;var a,c=o("ViewAni"),s=o("App"),u=o("ViewManager");(o=a=i.VIEW_CLOSE_TYPE||(i.VIEW_CLOSE_TYPE={}))[o.NORMAL=0]="NORMAL",o[o.DESTORY_VIEW=1]="DESTORY_VIEW",o[o.DESTORY_VIEW_AND_RES=2]="DESTORY_VIEW_AND_RES",i.default=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).controller=null,e._myParent=null,e._isInit=!1,e.bgType=0,e.closeType=a.DESTORY_VIEW,e.bgImg=null,e.viewId=null,e._isFullScreen=!1,e.isEnterAniFInish=!1,e.closeResole=null,e.initComplete=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.isFullScreen=function(){return this._isFullScreen},i.start=function(){this.viewAni=this.getComponent(c.default),this.viewAni&&(this.viewAni.view=this),this.initComplete&&(this.enabled=!1,this.initComplete(),this.initComplete=null)},i.enterAniFinish=function(){this.isEnterAniFInish=!0},i.exitAniFinish=function(){this.isEnterAniFInish=!1},i.isInit=function(){return this._isInit},i.applyFunc=function(t){return this.controller.applyFunc.apply(this.controller,arguments)},i.applyControllerFunc=function(t,e){return this.controller.applyControllerFunc.apply(this.controller,arguments)},i.isShow=function(){return this.node.parent&&this.node.active&&(!this.viewAni||!this.viewAni.isExiting)},i.addToParent=function(t){this.node.parent||(t.addChild(this.node),s.default.ViewManager.checkIsNeedAddBg(),this.playEnterAni())},i.onExitAniFinish=function(){this.closeType==a.DESTORY_VIEW?s.default.ViewManager.destoryView(this.viewId):this.closeType==a.DESTORY_VIEW_AND_RES&&(s.default.ViewManager.destoryView(this.viewId),s.default.ViewManager.releaseViewRes(this.viewId))},i.removeFromParent=function(){this.viewAni&&this.viewAni.isExitAni()&&this.viewAni.enabled?this.viewAni.onExit():(this.node&&this.node.parent&&this.node.parent.removeChild(this.node,!1),this.node.active=!1,s.default.ViewManager.checkIsNeedAddBg(),this.onExitAniFinish())},i.initUI=function(){this._isInit=!0},i.onTouchClose=function(){s.default.ViewManager.closeView(this)},i.awaitClose=function(){var t=this;return this.closePromise||(this.closePromise=new Promise(function(e){t.closeResole=e}),this.closePromise)},i.onTouchBg=function(){},i.initData=function(){},i.destroyView=function(){this.controller=null,this._myParent=null},i.open=function(){this.sendOpenMsg()},i.playEnterAni=function(){this.viewAni=this.getComponent(c.default),this.viewAni&&this.viewAni.enabled?(this.viewAni.view=this).viewAni.onEnter():this.enterAniFinish()},i.reOpen=function(){},i.close=function(){this.initComplete=null,this.sendCloseMsg(),this.closeResole&&(this.closeResole(),this.closeResole=null,this.closePromise=null)},i.sendOpenMsg=function(){},i.changeScenePre=function(){},i.sendCloseMsg=function(){s.default.NotificationCenter.dispatch(u.ViewManagerEvent.VIEW_IS_CLOSE,this.viewId)},i.closeView=function(){s.default.ViewManager.closeView(this)},i.onDestroy=function(){s.default.TimerManager.removeAll(this),s.default.NotificationCenter.removeAll(this)},i.loadResource=function(){var t=this;return new Promise(function(e){t.initComplete=e})},i.setVisible=function(t){this.node.active=t},o}(cc.Component),cc._RF.pop()},{}],BehaviorTree:[function(t,e,n){"use strict";cc._RF.push(e,"7306b/+u5lOE5d/ORDiWCZC","BehaviorTree");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("B3Functions"),a=r("constants"),c=r("Tick");o.default=function(){function t(){this.id=i.createUUID(),this.title="The behavior tree",this.description="Default description",this.properties={},this.root=null,this.debug=!1}var e=t.prototype;return e.load=function(t,e){void 0===e&&(e={}),e=e||{},this.title=t.title||this.title,this.description=t.description||this.description,this.properties=t.properties||this.properties;var n,r,o,i={};for(n in t.nodes){if(!((r=t.nodes[n]).name in e))throw new EvalError('BehaviorTree.load: Invalid node name + "'+r.name+'".');(o=new e[r.name](r.properties)).id=r.id||o.id,o.name=r.name,o.title=r.title||o.title,o.description=r.description||o.description,o.properties=r.properties||o.properties,i[n]=o}for(n in t.nodes)if(r=t.nodes[n],(o=i[n]).category===a.COMPOSITE&&r.children)for(var c=0;c<r.children.length;c++){var s=r.children[c];o.children.push(i[s])}else o.category===a.DECORATOR&&r.child&&(o.child=i[r.child]);this.root=i[t.root]},e.dump=function(){},e.tick=function(t,e){if(!e)throw"The blackboard parameter is obligatory and must be an instance of b3.Blackboard";var n=new c.default;n.debug=this.debug,n.target=t,n.blackboard=e;for(var r=(n.tree=this).root._execute(n),o=e.get("openNodes",this.id),i=n._openNodes.slice(0),a=Math.min(o.length,i.length),s=0;s<a;s++)if(o[s]!==i[s]){a=s;break}for(var u=o.length-1;u>=a;u--)e.get("isOpen",this.id,o[u].id)&&(o[u]._close(n),o[u].interrupt(n));return e.set("openNodes",i,this.id),e.set("nodeCount",n._nodeCount,this.id),r},t}(),cc._RF.pop()},{}],BezierCurveUtils:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e8a31LebFdJa58f1InC3jYY","BezierCurveUtils");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),i=i("BaseClass"),a.default=function(t){var e,n;function i(){return t.call(this)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s.showSpotMove=function(t,e,n,r,o,i,a){var c=this.getCurveFuncAroundSrcPoint(e,n,o);return this.tweenHelper(t.item,r,function(e){e=c(e),t.item.x=e.x,t.item.y=e.y,t.particle1.x=e.x,t.particle1.y=e.y},"smooth",i,a)},s.showCurveByRandomPoint=function(t,e,n,r,o,i,a){t.x=e.x,t.y=e.y;var c=this.getCurveFuncAroundSrcPoint(e,n,o);this.tweenHelper(t,r,function(e){t.isValid&&(e=c(e),t.x=e.x,t.y=e.y)},"smooth",i,a)},s.showCurveBySurePoint=function(t,e,n,r,o,i,a,c,s){void 0===i&&(i="linear");var u=this.getCurveFunc(e,r,n);this.tweenHelper(t,o,function(e){var n=u(e);t.x=n.x,t.y=n.y,s&&s.apply(c,[e])},i,a,c)},s.getCurveFuncAroundSrcPoint=function(t,e,n){return void 0===n&&(n=100),n=this.getControllPointAroundSrcPoint(t,e,n),this.getCurveFunc(t,e,n)},s.getCurveFuncAroundMidPoint=function(t,e){var n=this.getControllPointAroundMidPoint(t,e);return this.getCurveFunc(t,e,n)},s.getControllPointAroundSrcPoint=function(t,e,n){var r=Math.random()*Math.PI*2;return n=new cc.Vec2(Math.sin(r)*n,Math.cos(r)*n),t.add(n)},s.getControllPointAroundMidPoint=function(t,e){var n=t.sub(e).mag()/4;return t=t.lerp(e,.5),e=Math.random()*Math.PI*2,t.add(new cc.Vec2(n*Math.sin(e),n*Math.cos(e)))},s.getCurveFunc=function(t,e,n){return function(r){var o=(1-r)*(1-r)*t.x+2*r*(1-r)*n.x+r*r*e.x;return r=(1-r)*(1-r)*t.y+2*r*(1-r)*n.y+r*r*e.y,new cc.Vec2(o,r)}},s.phase1Easing=function(t){return t=(2-t)/2,1-(Math.cos(Math.PI/4)-Math.cos(90*t*Math.PI/180))/Math.cos(Math.PI/4)},s.phase3Easing=function(t){return t=(t+1)/2,(Math.cos(Math.PI/4)-Math.cos(90*t*Math.PI/180))/Math.cos(Math.PI/4)},s.tweenHelper=function(t,e,n,r,o,i){var a={t:0},c=e<=2?cc.tween().to(e/2,{t:.5},{progress:function(t,e,r,o){n(t+(e-t)*o)},easing:this.phase1Easing}).call(function(){a.t=.5}).to(e/2,{t:1},{progress:function(t,e,r,o){n(t+(e-t)*o)},easing:this.phase3Easing}):cc.tween().to(1.5,{t:1.5/e},{progress:function(t,e,r,o){n(t+(e-t)*o)},easing:this.phase1Easing}).call(function(){a.t=1.5/e}).to(e-1.5-.5,{t:1-.5/e},{progress:function(t,e,r,o){n(t+(e-t)*o)},easing:function(t){return t}}).call(function(){a.t=1-.5/e}).to(.5,{t:1},{progress:function(t,e,r,o){n(t+(e-t)*o)},easing:this.phase3Easing});return cc.tween(a).then(c).call(function(){o&&o.call(i,t)}).start()},a=i,c=[{key:"ins",get:function(){return this.getInstance()}}],null&&r(a.prototype,null),c&&r(a,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(i.default),cc._RF.pop()},{}],Blackboard:[function(t,e,n){"use strict";cc._RF.push(e,"270a31x96dPRpNF4SrqFCH5","Blackboard");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){this._baseMemory={},this._treeMemory={}}var e=t.prototype;return e._getTreeMemory=function(t){return this._treeMemory[t]||(this._treeMemory[t]={nodeMemory:{},openNodes:[],traversalDepth:0,traversalCycle:0}),this._treeMemory[t]},e._getNodeMemory=function(t,e){return(t=t.nodeMemory)[e]||(t[e]={}),t[e]},e._getMemory=function(t,e){var n=this._baseMemory;return t&&(n=this._getTreeMemory(t),e&&(n=this._getNodeMemory(n,e))),n},e.set=function(t,e,n,r){this._getMemory(n,r)[t]=e},e.get=function(t,e,n){return this._getMemory(e,n)[t]},t}(),cc._RF.pop()},{}],BuffConst:[function(t,e,n){"use strict";cc._RF.push(e,"4aca0PQuIlNboKK6jTLSQjb","BuffConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.BuffIndex=void 0,(r=r.BuffIndex||(r.BuffIndex={}))[r.FOOD_SELL_RATE=10001]="FOOD_SELL_RATE",r[r.ADD_IDLE=10002]="ADD_IDLE",r[r.CUSTOMER_MOVE_SPEED=10003]="CUSTOMER_MOVE_SPEED",r[r.WAITER_SPEED=10004]="WAITER_SPEED",r[r.COOK_SPEED=10005]="COOK_SPEED",r[r.COOK_MOVE_SPEED=10006]="COOK_MOVE_SPEED",r[r.AD_FOOD_SELL_RATE=10007]="AD_FOOD_SELL_RATE",r[r.DIAMOND_DOUBLE_FOOD_SELL_RATE=10008]="DIAMOND_DOUBLE_FOOD_SELL_RATE",r[r.DIAMOND_FIVE_FOOD_SELL_RATE=10009]="DIAMOND_FIVE_FOOD_SELL_RATE",r[r.ALL_WORKER_WORK_SPEED_100=10010]="ALL_WORKER_WORK_SPEED_100",r[r.ALL_CUSTOMER_SPEED_100=10011]="ALL_CUSTOMER_SPEED_100",r[r.ALL_WORKER_SPEED_100=10012]="ALL_WORKER_SPEED_100",cc._RF.pop()},{}],BuffDataManager:[function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b84c7rCNo1BiYsBIuId2hGT","BuffDataManager");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.BuffConfig=a.BuffDataManager=void 0;var c=i("CsvDataBase"),s=i("DataMsrBase"),u=i("ConfigManager"),l=function(t){function e(){var e;return(e=t.call(this,h,"buff_data","buff_index")||this).count=0,e}return r(e,t),e.prototype.getType=function(t){return cc.log("buffIndex.....",t),this.getData(t).buff_type},e}(s.default);a.BuffDataManager=l;var h=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).buff_index=null,e.desc=null,e.buff_type=null,e}return r(e,t),e}(c.CsvDataBase);a.BuffConfig=h,u.register(l,"BuffDataManager"),cc._RF.pop()},{}],BuffItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"76bb0yQ0xFJlKcoKP5gdHzh","BuffItem");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=o("GameText"),s=o("BuffMgr"),u=o("ItemBase");i.default=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this)._name=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.use=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)s.default.ins.addGlobalBuff({buffIndex:this.data.buff.buffIndex,buffValue:this.data.buff.buffValue,buffEndTime:a.default.DateUtils.Now()+1e3*this.data.buff.buffTime})},i.setConfData=function(e){t.prototype.setConfData.call(this,e);var n=e.buff.buffTime,r=3600<n?n/3600+c.GameText.getText(10):60<=n?n/60+c.GameText.getText(13):n+c.GameText.getText(16);this._name=e.name.format(r)},i.getName=function(){return this._name},o}(u.ItemBase),cc._RF.pop()},{}],BuffMgr:[function(t,e,n){"use strict";cc._RF.push(e,"398beQOrDlEFYdcKn2RFu+j","BuffMgr");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App"),a=r("GameConst"),c=r("IBuff"),s={ADD_IDLE:1,CUSTOMER_MOVE_SPEED:0,WAITER_SPEED:0,CHEF_SPEED:0,COOK_SPEED:0,FOOD_SELL_RATE:1,ALL_EMPLOYEES_MOVE_SPEED:0},u=function(){function t(){this._buffDataList={},this._globalBuffList={},this._regionBuffList={},this._globalBuffAttrList=null,this._regionBuffAttrList={},ObjectPool.registerClass(c.BuffAttr,"BuffAttr"),this._globalBuffAttrList=c.BuffAttr.create(s),this.buffDataManager=i.default.ConfigManager.getConfig("BuffDataManager"),i.default.TimerManager.doTimer(500,0,this.routine,this),i.default.SaveManage.add(this,"buff",!1,!0),i.default.SaveManage.load("buff")}var e=t.prototype;return e.checkBuff=function(t,e){return!!(t.buffEndTime&&t.buffEndTime<e)},e.routine=function(){var t,e,n=i.default.DateUtils.Now();for(t in this._globalBuffList){var r=this._globalBuffList[t];r.buffEndTime&&r.buffEndTime<n&&this.removeGlobalBuff(r.buffIndex)}for(e in this._regionBuffList){var o,a=this._regionBuffList[e];for(o in a){var c=a[o];this.checkBuff(c,n)&&this.removeRegionBuff(Number(e),c.buffIndex)}}},e.getGlobalBuffList=function(){return this._globalBuffList},e.getGlobalBuffByIndex=function(t){return this._globalBuffList[t]},e.addGlobalBuff=function(t){t.buffType||(t.buffType=this.buffDataManager.getType(t.buffIndex));var e,n=this._globalBuffList[t.buffIndex];n&&n.buffValue==t.buffValue?(e=i.default.DateUtils.Now(),n.buffEndTime&&n.buffEndTime>e?n.buffEndTime+=t.buffEndTime-e:n.buffEndTime&&n.buffEndTime<=e?n.buffEndTime=t.buffEndTime:this._globalBuffList[t.buffIndex]=t):this._globalBuffList[t.buffIndex]=t,this.calGlobalBuffAttr(),i.default.NotificationCenter.dispatch(a.GameNotificationConst.UPDATE_BUFF,-1,-1,t.buffType)},e.removeGlobalBuff=function(t){var e=this._globalBuffList[t];delete this._globalBuffList[t],this.calGlobalBuffAttr(),i.default.NotificationCenter.dispatch(a.GameNotificationConst.UPDATE_BUFF,-1,-1,e.buffType)},e.getKcBuffList=function(){return this._regionBuffList},e.getKcBuffListById=function(t){return this._regionBuffList[t]},e.getKcBuffByIndex=function(t,e){return this._regionBuffList[t]||(this._regionBuffList[t]={}),this._regionBuffList[t][e]},e.openNewRegion=function(t){this._regionBuffList[t]=this._regionBuffList[t]||{},this._regionBuffAttrList[t]&&(this._regionBuffAttrList[t]=c.BuffAttr.create(s)),this.calRegionBuffAttrById(t)},e.closeRegion=function(t){delete this._regionBuffList[t]},e.addRegionBuff=function(t,e){e.buffType||(e.buffType=this.buffDataManager.getType(e.buffIndex)),this._regionBuffList[t]||(this._regionBuffList[t]={});var n,r=this._regionBuffList[t],o=r[e.buffIndex];o&&o.buffValue==e.buffValue?(n=i.default.DateUtils.Now(),o.buffEndTime&&o.buffEndTime>n?o.buffEndTime+=e.buffEndTime-n:o.buffEndTime&&o.buffEndTime<=n?o.buffEndTime=e.buffEndTime:r[e.buffIndex]=e):r[e.buffIndex]=e,this.calRegionBuffAttrById(t,!0),i.default.NotificationCenter.dispatch(a.GameNotificationConst.UPDATE_BUFF,t,-1,e.buffType)},e.removeRegionBuff=function(t,e){this._regionBuffList[t]||(this._regionBuffList[t]={});var n=this._regionBuffList[t],r=n[e];delete n[e],this.calRegionBuffAttrById(t,!0),i.default.NotificationCenter.dispatch(a.GameNotificationConst.UPDATE_BUFF,t,-1,r.buffType)},e.calGlobalBuffAttr=function(){for(var t in this._globalBuffAttrList.reset(),this._globalBuffList){var e=this._globalBuffList[t];t=e.buffType,this._globalBuffAttrList.addBuffValue(t,e.buffValue)}this._globalBuffAttrList.claFinish(),this.calRegionBuffAttr()},e.calRegionBuffAttrById=function(t,e){void 0===e&&(e=0);var n,r=this._regionBuffList[t];this._regionBuffAttrList[t]||(this._regionBuffAttrList[t]=c.BuffAttr.create(s));var o=this._regionBuffAttrList[t];for(n in o.reset(),r){var i=r[n],a=i.buffType;o.addBuffValue(a,i.buffValue)}o.claFinish(),o.addBuffAttr(this._globalBuffAttrList)},e.calRegionBuffAttr=function(){for(var t in this._regionBuffList)this.calRegionBuffAttrById(t)},e.getRegionBuffAttrList=function(t){return this._regionBuffAttrList[t]=this._regionBuffAttrList[t]||c.BuffAttr.create(),this._regionBuffAttrList[t]},e.setMemento=function(t){t?(this._globalBuffList=this._buffDataList[0]=t[0]||{},this._regionBuffList=this._buffDataList[1]=t[1]||{}):(this._globalBuffList=this._buffDataList[0]=this._buffDataList[0]||{},this._regionBuffList=this._buffDataList[1]=this._buffDataList[1]||{}),this.calGlobalBuffAttr()},e.createMemento=function(){return this._buffDataList},e.save=function(){},t}();(o.default=u).ins=null,cc._RF.pop()},{}],CQRcode:[function(t,e){"use strict";cc._RF.push(e,"d803bOvKdBL6IprmQONMblS","CQRcode"),cc._RF.pop()},{}],CarAI:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"dc89bZSPcxK5YLcOxeZuXtO","CarAI");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("DeskService"),u=a("OrderService"),l=a("RoleService"),h=a("BaseMan"),f=a("Car"),d=a("OrderDisplay"),p=a("MoveComponent");(a=o=o||{})[a.NONE=0]="NONE",a[a.MOVE_TO_ORDER=1]="MOVE_TO_ORDER",a[a.WAIT_ORDER=2]="WAIT_ORDER",a[a.WAIT_FOOD=3]="WAIT_FOOD",a[a.MOVE_TO_FRONT=4]="MOVE_TO_FRONT",a[a.MOVE_TO_EXIT=5]="MOVE_TO_EXIT",a=i([a=cc._decorator.ccclass],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).man=null,e.move=null,e.state=o.NONE,e.curIndex=-1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){l.default.ins.canCreateCar=!1,this.man=this.getComponent(f.default),this.move=this.getComponent(p.default)},a.log=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=cc).log.apply(t,["CarAI"].concat(n))},a.update=function(){if(this.man.state===h.CharactorState.stand)switch(this.state){case o.WAIT_ORDER:case o.WAIT_FOOD:this.man.isEixt&&(this.state=o.MOVE_TO_EXIT,l.default.ins.cars.remove(this.man),this.move.moveTo(l.default.ins.exit),this.man.posData=null);break;case o.MOVE_TO_FRONT:0===this.curIndex?(this.man.isReadyReceive=!0,this.state=o.WAIT_FOOD,s.default.ins.carCookDataFinish(this.man)):l.default.ins.cars.indexOf(this.man)!==this.curIndex&&(this.curIndex=l.default.ins.cars.indexOf(this.man),this.move.moveTo(this.man.carPosData.receiveTrans[this.curIndex]));break;case o.NONE:this.state=o.MOVE_TO_ORDER,this.move.moveTo(this.man.carPosData.order);break;case o.MOVE_TO_ORDER:u.default.ins.waitOrderList.push({target:this,cb:this.orderFinish,pos:this.man.carPosData.staffTrans.pos,direction:this.man.carPosData.staffTrans.direction}),this.state=o.WAIT_ORDER;break;case o.MOVE_TO_EXIT:this.man.destroySelf()}},a.orderFinish=function(){l.default.ins.canCreateCar=!0;for(var t=u.default.ins.createOrders(4),e=t.length,n=0;n<e;n++){var r=t[n];this.man.orders.push(r);var i=u.default.ins.orderPool.pop();i.x=i.y=0,this.man.orderNode.children[n].addChild(i),r.display=i.getComponent(d.default),r.display||(r.display=i.addComponent(d.default)),r.customer=this.man,r.display.setData(r)}this.curIndex=l.default.ins.cars.indexOf(this.man),this.move.moveTo(this.man.carPosData.receiveTrans[this.curIndex]),this.state=o.MOVE_TO_FRONT},i}(cc.Component)),c.default=a,cc._RF.pop()},{}],Car:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"84bcf9oCKRIu5lQ7bD6k3Ot","Car");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GlobalAttr"),u=i("BaseMan"),l=cc._decorator,h=l.ccclass,f=l.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).posData=null,e.carPosData=null,e.isEixt=!1,e.isReadyReceive=!1,e.orders=[],e.orderNode=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.start=function(){t.prototype.start.call(this),this.calSpeed(),this.sp.setSkin(c.default.RandomUtils.randomArray(["cat_yellow","cat_blue"]))},i.calSpeed=function(){this.moveSpeed=s.default.ins.customerMoveSpeed},i.sitDown=function(){this.state=u.CharactorState.sitdown,this.direction=this.posData.sit.direction},i.exit=function(t){this.orders.remove(t),0===this.orders.length&&(this.state=u.CharactorState.stand,this.isEixt=!0)},i.destroySelf=function(){this.node.destroy()},o}(u.default),o([f(cc.Node)],i.prototype,"orderNode",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],CatTimeOut:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"20d25WQZINHfZHhrFrK8kAZ","CatTimeOut");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App"),s=o("RoleService"),u=o("Chef"),l=o("ChefAI");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).progress=null,e.manAI=null,e.leftTime=null,e._hireEndTime=0,e._holdTime=0,e._callBack=null,e._target=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.manAI=this.getComponent(l.default);var t=c.default.NodePoolMsr.catLefttimeProgressPool.pop();t.zIndex=-1,this.progress=t.getComponent(cc.ProgressBar),this.node.addChild(t)},i.update=function(){},i.onDestroy=function(){this.progress.isValid&&this.progress.node.destroy()},i.setLeftTime=function(t,e){this._hireEndTime=t,this._holdTime=e,this.update=this.updateProgress},i.setCallBack=function(t,e){this._callBack=t,this._target=e},i.removeImmediately=function(){this.update=this.checkCanDestory},i.checkCanDestory=function(){this.manAI.state!==l.AI_STATE.NONE&&this.manAI.state!==l.AI_STATE.REST&&this.manAI.state!==l.AI_STATE.MOVE_TO_REST&&this.manAI.state!==l.AI_STATE.DEEP_REST||(s.default.ins.removeEmployee(this.getComponent(u.default)),this._callBack&&this._callBack.call(this._target))},i.updateProgress=function(){var t=(this._hireEndTime-c.default.DateUtils.Now())/this._holdTime;0<t?this.progress.progress=t:(this.progress.progress=1e-4,this.update=this.checkCanDestory)},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],ChangeScaleBySize:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a3a79M6U3JHk5xFZ7c2TXrJ","ChangeScaleBySize");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property,h=s.executeInEditMode;s.menu,c([l],(i=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._maxSize=100,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s.onLoad=function(){this.node.on(cc.Node.EventType.SIZE_CHANGED,this.onSizeChange,this),this.onSizeChange()},s.onSizeChange=function(){var t;this.node.width>this._maxSize||this.node.height>this._maxSize?(t=this.node.width>this.node.height?this._maxSize/this.node.width:this._maxSize/this.node.height,this.node.scale=t):this.node.scale=1},a=i,(c=[{key:"maxSize",get:function(){return this._maxSize},set:function(t){this._maxSize=t,this.onSizeChange()}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component)).prototype,"_maxSize",void 0),c([l({})],i.prototype,"maxSize",null),i=c([u,h],i),a.default=i,cc._RF.pop()},{}],ChefAI:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"939fe1VdkFAb4cmidFHzF6Z","ChefAI");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),c.AI_STATE=void 0;var s=a("GameConst"),u=a("OrderService"),l=a("RoleService"),h=a("BaseMan"),f=a("MoveComponent");(a=o=c.AI_STATE||(c.AI_STATE={}))[a.NONE=0]="NONE",a[a.MOVE_TO_REST=1]="MOVE_TO_REST",a[a.REST=2]="REST",a[a.DEEP_REST=3]="DEEP_REST",a[a.ORDERING=4]="ORDERING",a[a.MOVE_TO_ORDERING=5]="MOVE_TO_ORDERING",a[a.COOKING=6]="COOKING",a[a.MOVE_TO_COOKING=7]="MOVE_TO_COOKING",a[a.SEND_FOOD=8]="SEND_FOOD",a[a.MOVE_TO_SEND_FOOD=9]="MOVE_TO_SEND_FOOD",a=i([a=cc._decorator.ccclass],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).man=null,e.move=null,e.waitOrderData=null,e.leftTime=0,e.maxTime=0,e.orderDataList=null,e.cookData=null,e.state=o.NONE,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){this.man=this.getComponent(h.default),this.move=this.getComponent(f.default),this.orderDataList=u.default.ins.orders[s.MachineType.type2]},a.think=function(){if(this.orderDataList.hasEmp){var t=this.cookData=this.orderDataList.cookOrder();return t.init(this.man),this.move.moveTo(t.slot.chefPos),void(this.state=o.MOVE_TO_COOKING)}this.state!==o.MOVE_TO_REST&&this.state!==o.REST&&this.state!==o.DEEP_REST&&(this.move.moveTo(this.man.basePos),this.state=o.MOVE_TO_REST)},a.update=function(t){if(this.man.state===h.CharactorState.stand)switch(this.state){case o.NONE:this.think();break;case o.DEEP_REST:this.think(),this.state!==o.DEEP_REST&&l.default.ins.showLang(this.node,s.RoleLangType.WALK_UP);break;case o.REST:if(this.think(),this.state!==o.REST)break;this.leftTime-=t,this.leftTime<0&&(this.man.playAni("sleep2"),this.state=o.DEEP_REST);break;case o.MOVE_TO_COOKING:this.onMoveToCookingFinish();break;case o.COOKING:this.onCooking(t);break;case o.SEND_FOOD:this.cookData.passSectionData.addCookData(this.cookData),this.man.direction=this.cookData.passSectionData.chef.direction,this.cookData=null,this.man.hideFood(),this.state=o.NONE;break;case o.MOVE_TO_REST:this.moveToRest()}else this.man.state===h.CharactorState.run&&this.state===o.MOVE_TO_REST&&this.think()},a.moveToRest=function(){this.state=o.REST,this.leftTime=5,this.man.direction=2,this.man.playAni("sleep")},a.onMoveToCookingFinish=function(){var t=this.man.getInstaCompletedDishRate();t&&t>Math.random()?(this.man.showInstaCompletedDishEffect(),this.maxTime=.3):this.maxTime=this.cookData.getCookTime(),this.leftTime=0,this.man.progress.progress=this.leftTime/this.maxTime,this.man.progress.node.active=!0,this.state=o.COOKING,this.man.direction=this.cookData.slot.direction,this.man.playAni("cook"),this.cookData.slot.playCookAni(),this.man.showFire()},a.onCooking=function(t){this.leftTime+=t,this.leftTime<this.maxTime?this.man.progress.progress=this.leftTime/this.maxTime:(this.man.progress.node.active=!1,t=this.man.getPerfectDishRate(),this.cookData.finishCook(t&&t>Math.random()),this.orderDataList.checkHasEmp(),this.move.moveTo(this.cookData.passSectionData.chef.pos),this.state=o.SEND_FOOD,this.man.showFood(this.cookData.order.display.food.spriteFrame,this.cookData.foodValue),this.man.state=h.CharactorState.send_food,this.man.removeFire(),l.default.ins.showLang(this.node,s.RoleLangType.MACHINE_FINISH))},i}(cc.Component)),c.default=a,cc._RF.pop()},{}],ChefAttr:[function(t,e,n){"use strict";cc._RF.push(e,"c1447bI0/RBJKO6eh0MSSP4","ChefAttr");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){this.speed=150,this.cookSpeed=1}return t.prototype.calFinalAttr=function(){},t}(),cc._RF.pop()},{}],Chef:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e6af8KOhCxI9qvRzUQwYwuq","Chef");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("GlobalAttr"),l=a("MyBigLong"),h=a("MapService"),f=a("BaseMan"),d=cc._decorator,p=d.ccclass,y=d.property;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).progress=null,e.food=null,e.basePos=null,e.frontFood=null,e.backFood=null,e.moneyLab=null,e.fireNode=null,e.skinName="\u88c5\u5907/\u670d\u52a1\u5458/waiter_02",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,d=i.prototype;return d.onLoad=function(){this.food.node.removeFromParent(),this.initSkin()},d.initSkin=function(){if(this.skinName){var t=this.sp.skeletonData.getRuntimeData().findSkin(this.skinName),e=this.sp._skeleton.slots;for(var n in t.attachments){var r=t.attachments[n];for(var o in r)if("Cat_1"!==o){var i=e[n],a=r[o];i&&i.setAttachment(a)}}}},d.showInstaCompletedDishEffect=function(){var t=new cc.Node,e=t.addComponent(cc.Label);e.string="\u7acb\u5373\u5b8c\u6210",e.fontSize=30,h.default.ins.uiLayer.addChild(t),t.position=this.node.position,t.y+=100,cc.tween(t).to(.1,{scale:1.1},{easing:cc.easing.sineOut}).to(.1,{scale:1},{easing:cc.easing.sineIn}).to(.7,{y:t.y+50}).delay(.2).to(.3,{opacity:0}).call(function(){t.destroy()}).start()},d.calSpeed=function(){this.moveSpeed=u.default.ins.chefspeed},d.getCookMoneyRate=function(){return u.default.ins.cookMoneyRate},d.getInstaCompletedDishRate=function(){return u.default.ins.instaCompletedDishRate},d.getCookSpeedRate=function(){return u.default.ins.chefProductionSpeed},d.getPerfectDishRate=function(){return u.default.ins.perfectDishRate},d.showFood=function(t,e){this.food.spriteFrame=t,4===this._direction?(this.food.node.removeFromParent(!1),this.backFood.addChild(this.food.node)):(this.food.node.removeFromParent(!1),this.frontFood.addChild(this.food.node));var n=this.moneyLab=s.default.NodePoolMsr.moneyLabPool.pop();this.node.addChild(n),n.getComponent(cc.Label).string=l.default.toString(e)},d.hideFood=function(){this.food.node.parent&&this.food.node.removeFromParent(!1),this.food.spriteFrame=null,this.moneyLab&&this.moneyLab.pool.push(this.moneyLab)},d.showFire=function(){this.fireNode||0<u.default.ins.buffAttr.attr.COOK_SPEED&&(this.fireNode=s.default.NodePoolMsr.fireAniPool.pop(),this.node.addChild(this.fireNode),this.fireNode.setSiblingIndex(0))},d.removeFire=function(){this.fireNode&&(s.default.NodePoolMsr.fireAniPool.push(this.fireNode),this.fireNode=null)},a=i,(c=[{key:"direction",set:function(t){this.food.node.parent&&t!==this._direction&&(4===t?(this.food.node.removeFromParent(!1),this.backFood.addChild(this.food.node)):4===this._direction&&(this.food.node.removeFromParent(!1),this.frontFood.addChild(this.food.node))),this._direction=t,this.aniPre=f.aniMap[t],this.sp.node.scaleX=4<t?-1:1,this.state=this._state}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(f.default),i([y(cc.ProgressBar)],a.prototype,"progress",void 0),i([y(cc.Sprite)],a.prototype,"food",void 0),i([y(cc.Node)],a.prototype,"frontFood",void 0),i([y(cc.Node)],a.prototype,"backFood",void 0),a=i([p],a),c.default=a,cc._RF.pop()},{}],CocosClass:[function(t,e,n){"use strict";cc._RF.push(e,"e66bd7KbG5CCr9xLtGrP214","CocosClass");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App");cc.ProgressBar.prototype.stopRunToAction=function(){this.__cbRunToAction&&(this.unschedule(this.__cbRunToAction),this.__cbRunToAction=null)},cc.ProgressBar.prototype.runTo=function(t,e,n){void 0===n&&(n=!1);var r=this;return new Promise(function(o){var i,a,c,s=r.progress;t!=s?isNaN(t)||(0==e||isNaN(e)?(r.progress=t,o()):(i=t>r.progress,r.stopRunToAction(),a=(t-s)/e,c=function(e){s+=a*e,e=i?t<=s:s<=t,r.progress=n?Math.abs(s)-Math.floor(Math.abs(s)):s.limit(0,1),e&&(e=t,n&&(e=Math.abs(e)-Math.floor(Math.abs(e))),r.progress=e,r.unscheduleAllCallbacks(),o())},r.schedule(c,0,cc.macro.REPEAT_FOREVER),r.__cbRunToAction=c)):o()})},cc.Label.prototype.numberTo=function(t,e,n,r){var o,i,a=this,c=null==t?parseInt(this.string):t;(c=isNaN(c)?0:c)!=e&&(this.string=r?r(c):c+"",o=(e-c)/n,i=c<e,this.stopNumberAction(),this.__cbNumberTo=n=function(t){c+=o*t,a.string=r?r(c):c+"",i!=c<e&&(a.unscheduleAllCallbacks(),a.string=r?r(e):e+"")},this.schedule(n,0,cc.macro.REPEAT_FOREVER))},cc.Label.prototype.stopNumberAction=function(){this.__cbNumberTo&&(this.unschedule(this.__cbNumberTo),this.__cbNumberTo=null)},cc.Label.prototype.timeCounter=function(t,e,n,r,o){void 0===e&&(e=1);var a=this;t/=1e3,this.string=n?n(t):t+"",this.stopTimeCounterAction();var c,s=i.default.DateUtils.Now(),u=function e(){c=Math.round(t-(i.default.DateUtils.Now()-s)/1e3),a.string=n?n(c):c+"",o&&o(c),c<=0&&(r&&r(),a.unschedule(e))};return this.__cbTimeCounter=u,this.schedule(u,e,cc.macro.REPEAT_FOREVER),u(),u},cc.Label.prototype.stopTimeCounterAction=function(){this.__cbTimeCounter&&(this.unschedule(this.__cbTimeCounter),this.__cbTimeCounter=null)},cc._RF.pop()},{}],Color:[function(t,e,n){"use strict";cc._RF.push(e,"c8144V7v3RG6LkLQYqdlGTz","Color");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.Color=void 0,r.Color=function(){function t(){this.colorMap=null}return t.prototype.getColorFromHex=function(t){return this.colorMap||(this.colorMap={}),this.colorMap[t]||(this.colorMap[t]=(new cc.Color).fromHEX(t)),this.colorMap[t]},t}(),cc._RF.pop()},{}],CommonUtils:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"e4d3bFjNR9Gua4NcPYmj3PE","CommonUtils");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0}),c.CommonUtils=void 0;var s=a("GameText");c.CommonUtils=function(){function t(){}var e=t.prototype;return e.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var n=Object.keys(t),r=0,o=n.length;r<o;r++){var i=n[r];e[i]=this.copyDataHandler(t[i])}return e},e.parseArardStr=function(t){for(var e=t.split("|"),n={},r=0;r<e.length;r++){var o=e[r].split("_");n[o[0]]=o[1]?parseInt(o[1]):1}return n},e.getEloScore=function(t,e,n,r,o,i){return void 0===o&&(o=32),void 0===i&&(i=32),function(e){var a=1/(1+Math.pow(10,(e-t)/400));return e=1/(1+Math.pow(10,(t-e)/400)),[Math.round(o*(n-a)),Math.round(i*(r-e))]}(e)},e.setSpriteFrameByBundle=function(t,e,n,r){var o=cc.assetManager.getBundle(t);(t=o.get(e,cc.SpriteFrame))?(n&&(n.spriteFrame=t),r&&r()):o.load(e,cc.SpriteFrame,function(t,e){t||(n.spriteFrame=e,r&&r())})},e.setSpriteFrame=function(t,e,n){var r=cc.resources.get(t,cc.SpriteFrame);r?(e&&(e.spriteFrame=r),n&&n()):cc.resources.load(t,cc.SpriteFrame,function(t,r){t||(e.spriteFrame=r,n&&n())})},e.shuffle=function(t){for(var e=t.length-1;0<=e;e--){var n=Math.floor(Math.random()*(e+1)),r=t[n];t[n]=t[e],t[e]=r}return t},e.postionLen=function(t,e){var n=e.x-t.x;return n*n+(t=e.y-t.y)*t},e.copyObject=function(t,e){for(var n in t)e[n]=t[n]},e.getItemByKey=function(t,e,n){for(var r=t.length-1;-1<r;--r)if(t[r][e]==n)return t[r];return null},e.getIndexByKey=function(t,e,n){for(var r=t.length-1;-1<r;--r)if(t[r][e]==n)return r;return-1},e.getNumberInNormalDistribution=function(t,e){return t+this.randomNormalDistribution()*e},e.randomNormalDistribution=function(){for(var t,e=0,n=0;0==(n=(e=2*Math.random()-1)*e+(t=2*Math.random()-1)*t)||1<=n;);return e*Math.sqrt(-2*Math.log(n)/n)},e.removeItemByKey=function(t,e,n){for(var r=t.length-1;-1<r;--r)if(t[r][e]==n)return t.splice(r,1);return null},e.removeItemByValue=function(t,e){for(var n=t.length-1;-1<n;--n)if(t[n]==e)return t.splice(n,1),!0;return!1},e.getFormatTime=function(t,e){void 0===e&&(e=!1);var n="";return 86400<=(t=Math.floor(t/1e3))&&(n+=s.GameText.getText(56).format(Math.floor(t/86400)+""),t%=86400,e)||3600<=t&&(n+=s.GameText.getText(57).format(Math.floor(t/3600)+""),t%=3600,e)||60<=t&&(n+=s.GameText.getText(58).format(Math.floor(t/60)+""),t%=60,e)||t&&(n+=s.GameText.getText(59).format(t)),n},e.getFormatBySecond1=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var n=0==(o=Math.floor(t/3600))?"00":o<10?"0"+o:""+o,r=0==(r=Math.floor((t-3600*o)/60))?"00":r<10?"0"+r:""+r,o=0==(o=Math.floor((t-3600*o)%60))?"00":o<10?"0"+o:""+o;return e&&-1<n.indexOf("00")?r+":"+o:n+":"+r+":"+o},e.isFunction=function(t){try{return"function"==typeof t}catch(t){return!1}},e.isUndefined=function(t){return void 0===t},e.isSameDay=function(t){return new Date(t).Format("yyyyMMdd")==new Date(Date.now()).Format("yyyyMMdd")},e.isNull=function(t){return!t&&!this.isUndefined(t)&&0!=t},e.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isString=function(t){return"string"==typeof t},e.parsePos=function(t,e,n){for(var o,i,a=r(e.split(n||","));!(i=a()).done;)switch((o=i.value)[0]){case"l":t.left=parseInt(o.slice(1));break;case"r":t.right=parseInt(o.slice(1));break;case"t":t.top=parseInt(o.slice(1));break;case"b":t.bottom=parseInt(o.slice(1));break;case"v":t.verticalCenter=parseInt(o.slice(1));break;case"w":t.width=parseInt(o.slice(1));break;case"h":t.height=parseInt(o.slice(1));break;case"H":t.horizontalCenter=parseInt(o.slice(1));break;case"R":t.rotation=parseInt(o.slice(1))}},e.transPos=function(){},e.getPosX1=function(t,e,n){return isNaN(t.left)?isNaN(t.right)?isNaN(t.horizontalCenter)?t.x:(e-n)/2+t.horizontalCenter:e/2-t.right-n:t.left-e/2},e.getPosY1=function(t,e,n){return isNaN(t.top)?isNaN(t.bottom)?isNaN(t.verticalCenter)?t.y:(e-n)/2+t.verticalCenter:t.bottom-e/2-n:e/2-t.top},e.sleep=function(t){return new Promise(function(e){cc.director.getScheduler().schedule(e,null,0,1,t/1e3)})},t}(),Number.prototype.limit=function(t,e){var n=this;return null!=t&&null!=t&&(n=Math.max(n,t)),null!=e&&null!=e?Math.min(n,e):n},Array.prototype.include=function(t){return 0<=this.indexOf(t)},Object.defineProperty(Array.prototype,"include",{enumerable:!1}),Object.defineProperty(Number.prototype,"limit",{enumerable:!1}),Array.prototype.remove=function(t){return-1<(t=this.indexOf(t))&&(this.splice(t,1),!0)},Array.prototype.last=function(){return this[this.length-1]},Object.defineProperty(Array.prototype,"last",{enumerable:!1}),Object.defineProperty(Array.prototype,"remove",{enumerable:!1}),cc._RF.pop()},{}],Composite:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"58b37Yd/TNLSI6Suw4F/GeJ","Composite");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("BaseNode");i.default=function(t){var e,n;function o(e){var n,r=void 0===e?{}:e,o=r.children,i=void 0===o?[]:o,c=r.name,s=void 0===c?"Composite":c,u=r.title,l=r.properties;return(n=t.call(this,{category:a.COMPOSITE,name:s,title:u,properties:l})||this).children=i.slice(0),n}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o}(c.default),cc._RF.pop()},{}],Condition:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a776bGC0OFBNo4Ccq13k/6y","Condition");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0});var u=c("constants"),l=c("BaseNode");s.default=function(t){var e,n;function o(e){var n=void 0===e?{}:e,r=n.name,o=void 0===r?"Condition":r,i=n.title,a=n.properties;return t.call(this,{category:u.CONDITION,name:o,title:i,properties:a})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n),o.prototype.log=function(){var t,e=this.title,n=e.match(/(<[0-9a-zA-Z_]+>)/g);if(n)for(var o,i=r(n);!(o=i()).done;){var a=o.value,c=a.slice(1,a.length-1);e=e.replace(a,this.properties[c]+"")}for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];(t=Log).trace.apply(t,[e].concat(u))},o}(l.default),cc._RF.pop()},{}],ConfigManager:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"90160/YH2BPSKTdSbqU0thj","ConfigManager");var o=t,i=n,a=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigManager=i.registerJSONConf=i.registerCfg=i.register=void 0;var c=o("App"),s=o("DataMsrBase");function u(t,e,n){l.jsonFiles[t]=e,l.jsonParseObjs[t]=n}i.register=function(t,e){l.loadList[e]=t},i.registerCfg=function(t,e){l.loadList[e]=t},i.registerJSONConf=u;var l=function(){function t(){this.configs={},this._serverInfo=null}var e=t.prototype;return e.getConfig=function(t){var e=this.configs[t];if(e)return e;Log.error("\u914d\u7f6e\u6587\u4ef6<"+t+">\u4e0d\u5b58\u5728,\u53ef\u80fd\u662f\u52a0\u8f7d\u5931\u8d25,\u6216\u8005\u8fd8\u672a\u52a0\u8f7d")},e.getServerCacheInfo=function(){if(this._serverInfo)return this._serverInfo;var t=!1,e=cc.sys.localStorage.getItem("SERFER_INFO");if(e)try{this._serverInfo=JSON.parse(e),this._serverInfo.game||(this._serverInfo.game=c.default.ConfigManager.gameConf.serverInfos.game,t=!0),this._serverInfo.stat||(this._serverInfo.stat=c.default.ConfigManager.gameConf.serverInfos.interface,t=!0)}catch(e){this._serverInfo={game:c.default.ConfigManager.gameConf.serverInfos.game,stat:c.default.ConfigManager.gameConf.serverInfos.interface},t=!0}else this._serverInfo={game:c.default.ConfigManager.gameConf.serverInfos.game,stat:c.default.ConfigManager.gameConf.serverInfos.interface},t=!0;return t&&this.saveServerInfo(),this._serverInfo},e.saveServerInfo=function(){cc.sys.localStorage.setItem("SERFER_INFO",JSON.stringify(this._serverInfo))},e.loadAllConfig=function(e,n){return a(this,void 0,void 0,r().mark(function o(){var i,a,c,s;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(a in i=[],u("GameConf","game_conf"),u("Server","files/serverConfig"),u("StageSet","files/StageSet"),u("FbMap","files/FbMap"),u("MachineMenu","files/MachineMenu"),u("AbilityInfo","files/AbilityInfo"),u("Helper","files/Helper"),u("RapidCat","files/RapidCat"),u("Region","files/Region"),u("Define","Define"),u("RoleLang","files/RoleLang"),t.jsonFiles)i.push(this.loadJSONConf(a,t.jsonFiles[a]));for(c in t.loadList)s=new t.loadList[c],this.configs[c]=s,i.push(s.load());return e&&function(){for(var t=0,r=i.length,o=0;o<r;o++)i[o].then(function(){t++,e.call(n,t,i.length)})}(),r.next=7,Promise.all(i);case 7:this.gameConf=this.getConfig("GameConf");case 8:case"end":return r.stop()}},o,this)}))},e.loadJSONConf=function(e,n){return a(this,void 0,void 0,r().mark(function o(){var i,a;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a="config",r.t0="test"==versionInfo.packVersion,!r.t0){r.next=6;break}return a="config_sub",r.next=6,c.default.ResManager.loadBundle("http://localhost:7556/mini-game/wechatgame/assets/config_sub");case 6:return r.next=8,c.default.ResManager.loadInBundle(a,s.CONFIG_FILE_DIR+n,cc.JsonAsset);case 8:return i=r.sent,t.jsonParseObjs[e]?this.configs[e]=t.jsonParseObjs[e].parse(i.json):this.configs[e]=i.json,r.abrupt("return",this.configs[e]);case 11:case"end":return r.stop()}},o,this)}))},t}();i.ConfigManager=l,l.loadList=Object.create(null),l.jsonFiles=Object.create(null),l.jsonParseObjs=Object.create(null),cc._RF.pop()},{}],CongratulationItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a93d7gkfx1Be7HKt/tTntbl","CongratulationItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameConst"),u=cc._decorator,l=u.ccclass,h=u.property;u.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.nameLab=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setItemData=function(t,e){t.data.buff?this.nameLab.string=t.getDesc()+"   \u6301\u7eed"+c.default.DateUtils.getFormatBySecond(t.data.buff.buffTime,11):this.nameLab.string=t.getName()+(e?"x"+e:""),c.default.CommonUtils.setSpriteFrame(t.getItemPic(),this.icon)},i.setCostumeItemData=function(t,e){this.nameLab.string=t.getName()+(e?"x"+e:""),c.default.CommonUtils.setSpriteFrameByBundle(s.BundleType.MAP_ICON,t.getIcon(),this.icon)},i.setCustomeData=function(t){this.nameLab.string=t.name+(t.cnt?"x"+t.cnt:""),c.default.CommonUtils.setSpriteFrame(t.iconUrl,this.icon)},o}(cc.Component),o([h(cc.Sprite)],i.prototype,"icon",void 0),o([h(cc.Label)],i.prototype,"nameLab",void 0),i=o([l],i),a.default=i,cc._RF.pop()},{}],CongratulationView:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d756d03mYBLDrqRVh3emWp1","CongratulationView");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("App"),h=s("BaseView"),f=s("ControllerConst"),d=s("BagConst"),p=s("CostumeItem"),y=s("GameConst"),v=s("CongratulationItem"),g=cc._decorator,m=g.ccclass,_=g.property;g.menu,s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).content=null,e.ani=null,e.congratulationItem=null,e.passIcon=null,e.passRewardIcon=null,e.passCountLab=null,e.titleLab=null,e.items=[],e.showItems=null,e.callBack=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e,n,r){t.prototype.open.call(this),this.callBack=r,e instanceof Array?(this.showItems=e,this.resetView(this.showItems.pop())):this.resetView(e,n)},i.showItem=function(t,e){if(t="number"==typeof t?l.default.ControllerManager.applyFunc(f.ControllerConst.Item,d.BagConst.GET_ITEM,t):t,this.passIcon.node.active=!1,this.congratulationItem.node.active=!0,t.isCostume()){var n=t;this.congratulationItem.setCostumeItemData(n.getTempCostume(),e)}else this.congratulationItem.setItemData(t,e)},i.showCostumeItem=function(t,e){this.passIcon.node.active=!1,this.congratulationItem.node.active=!0,this.congratulationItem.setCostumeItemData(t,e)},i.showCongratulationData=function(t){t.type==y.CongratulationType.Pass?(this.passIcon.node.active=!0,this.congratulationItem.node.active=!1,l.default.CommonUtils.setSpriteFrame(t.iconUrl,this.passRewardIcon),this.passCountLab.string="x"+t.cnt,l.default.CommonUtils.setSpriteFrameByBundle(y.BundleType.MAP_ICON,t.passIcon,this.passIcon)):(this.passIcon.node.active=!1,this.congratulationItem.node.active=!0,t.data?t.data instanceof p.default?this.showCostumeItem(t.data,t.cnt):this.showItem(t.data,t.cnt):this.congratulationItem.setCustomeData(t))},i.resetView=function(t,e){var n=this;void 0===e&&(e=1);for(var o,i=r(this.ani.node.children);!(o=i()).done;)o.value.scale=0;var a="\u606d\u559c\u83b7\u5f97";t instanceof p.default?this.showCostumeItem(t,1):t instanceof y.CongratulationData?(this.showCongratulationData(t),t.type==y.CongratulationType.Pass&&(a="\u65b0\u5e97\u5f00\u4e1a")):this.showItem(t,e),this.titleLab.string=a,this.ani.once(cc.Animation.EventType.FINISHED,function(){n.ani.play("idle")}),this.ani.play("work")},i.onTouchClose=function(){this.showItems&&this.showItems.length?this.resetView(this.showItems.pop()):(this.closeView(),this.callBack&&(this.callBack(),this.callBack=null))},o}(h.default),c([_(cc.Node)],s.prototype,"content",void 0),c([_(cc.Animation)],s.prototype,"ani",void 0),c([_(v.default)],s.prototype,"congratulationItem",void 0),c([_(cc.Sprite)],s.prototype,"passIcon",void 0),c([_(cc.Sprite)],s.prototype,"passRewardIcon",void 0),c([_(cc.Label)],s.prototype,"passCountLab",void 0),c([_(cc.Label)],s.prototype,"titleLab",void 0),s=c([m],s),u.default=s,cc._RF.pop()},{}],ControllerConst:[function(t,e,n){"use strict";cc._RF.push(e,"fb9eeTSjrhJlbbBCJav+FJ1","ControllerConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.ControllerConst=void 0,(r=r.ControllerConst||(r.ControllerConst={}))[r.Loading=0]="Loading",r[r.Login=1]="Login",r[r.Game=2]="Game",r[r.GameUI=3]="GameUI",r[r.Material=4]="Material",r[r.AD=5]="AD",r[r.Item=6]="Item",r[r.Player=7]="Player",r[r.SystemOpen=8]="SystemOpen",r[r.Guide=9]="Guide",r[r.Map=10]="Map",r[r.BossMgr=11]="BossMgr",r[r.UpgradeView=12]="UpgradeView",r[r.Data=13]="Data",r[r.RoleCard=14]="RoleCard",r[r.AdReward=15]="AdReward",r[r.Costume=16]="Costume",r[r.Shop=17]="Shop",r[r.Mail=18]="Mail",cc._RF.pop()},{}],ControllerManager:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"5529cTgMz1M5LOFepotsmeA","ControllerManager");var o=n,i=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){function t(){this._modules={}}var e=t.prototype;return e.clear=function(){this._modules={}},e.initAllModule=function(){return i(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r().keys(this._modules);case 1:if((t.t1=t.t0()).done){t.next=7;break}return e=t.t1.value,t.next=5,this._modules[e].initController();case 5:t.next=1;break;case 7:case"end":return t.stop()}},t,this)}))},e.register=function(t,e){this.isExists(t)||(this._modules[t]=new e)},e.register1=function(t,e){this.isExists(t)||(this._modules[t]=e)},e.clearAllModules=function(t){for(var e in void 0===t&&(t=[]),this._modules){var n=parseInt(e);-1==t.indexOf(n)&&(this._modules[e].destroy(),delete this._modules[e])}},e.unregister=function(t){delete this._modules[t]},e.isExists=function(t){return null!=this._modules[t]},e.applyFunc=function(t,e){for(var n=this._modules[t],r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return n?n.applyFunc.apply(n,[e].concat(o)):(Log.warn("\u6a21\u5757"+t+"\u4e0d\u5b58\u5728"),null)},e.applyFunc2=function(t,e){for(var n=this._modules[t],r=(e=n.eventKeyMap[e],arguments.length),o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return n?n.applyFunc.apply(n,[e].concat(o)):(Log.trace("\u6a21\u5757"+t+"\u4e0d\u5b58\u5728"),null)},e.getControllerModel=function(t){return(t=this._modules[t])?t.getModel():null},t}(),cc._RF.pop()},{}],CookData:[function(t,e,n){"use strict";cc._RF.push(e,"b3081p6RB5EQqDril1BURsU","CookData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App"),a=r("LabelTip"),c=r("GlobalAttr"),s=r("MyBigLong"),u=r("CurrencyService"),l=r("MapService"),h=r("OrderService");o.default=function(){function t(){this.slot=null,this.order=null,this.foodValue=0,this.isPerfect=!1,this.cookTime=0,this.cookMoneyRate=1}var e=t.prototype;return e.init=function(t){this.cookTime=Math.ceil(this.order.machine.attr.manufactureTime/t.getCookSpeedRate()),this.cookMoneyRate=t.getCookMoneyRate()},e.finishCook=function(t){this.isPerfect=t,this.slot.stopCook(),this.calValue(t)},e.getCookTime=function(){return this.cookTime},e.finishOrder=function(){var t,e=c.default.ins,n=this.order.customer.posData.tipAndValueUp,r=this.foodValue,o=s.default.toString(this.foodValue);1<e.moneyRate&&(r*=e.moneyRate,o=s.default.toString(r)),i.default.NodePoolMsr.flyLabel.pop().getComponent(a.default).init(l.default.ins.uiLayer,o,35).flyUp(n.pos.x,n.pos.y+100,!0),h.default.ins.finshOrder(this.order),e.tipChance&&e.tipChance>Math.random()&&(t=e.generousTipRate&&e.generousTipRate>Math.random()?e.define.costume_ability204_value/100:e.tipRate,n.addValue(Math.floor(this.foodValue*this.order.machine.attr.slotCnt*t/(this.getCookTime()+10)))),u.default.ins.moneyChange(r)},e.calValue=function(t){var e=c.default.ins;this.foodValue=t?this.order.getFoodValue()*this.cookMoneyRate*e.define.costume_ability403_value/100:this.order.getFoodValue()*this.cookMoneyRate,this.foodValue=Math.floor(this.foodValue)},t}(),cc._RF.pop()},{}],CostumeAttr:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8e120uAYFRMf4y2X7rwM45p","CostumeAttr");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("GameUtils"),c=o("AttributeBase"),s=o("CostumeConst");i.default=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.init=function(){},i.getAttrValue=function(t,e){return isNaN(this.finalAttr[t])?e:this.finalAttr[t]},i.toString=function(){var t="";for(var e in this.finalAttr){var n=parseInt(e);n==s.CostumeAbilityType.base&&(t+="\u57fa\u7840\u5c5e\u6027:"),t+=a.getCostumeAttrStr(n,this.finalAttr[e])+"\n"}return t},o}(c.AttributeBase),cc._RF.pop()},{}],CostumeBagEquipItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1074dFPSDFHiYmr6kx360Nd","CostumeBagEquipItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.CostumeBagEquipItem=void 0;var c=i("App"),s=(i("ViewConst"),i("MachineLvUpAni")),u=i("GameConst"),l=i("CostumeConst"),h=i("CostumeController"),f=i("CostumeBagItem"),d=cc._decorator,p=d.ccclass,y=d.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).costLab=null,e.lvUpRateLab=null,e.lvUpBtn=null,e.defaultIcon=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){if(t){this.data=t,this.lvLab.string="Lv."+t.data.lv+"/"+t.gradeCfg.max_level,c.default.CommonUtils.setSpriteFrame(l.getRarityUrlByGrade(t.data.grade),this.bgSpr),c.default.CommonUtils.setSpriteFrameByBundle(u.BundleType.MAP_ICON,t.getIcon(),this.icon),c.default.CommonUtils.setSpriteFrameByBundle(u.BundleType.MAP_ICON,t.getTypeIcon(),this.typeIcon),this.costLab.string=t.cost+"",t.isMaxLv()?(this.lvUpRateLab.node.active=!1,this.lvUpBtn.node.active=!1):(this.lvUpBtn.node.active=!0,this.lvUpRateLab.node.active=!0,this.lvUpRateLab.string="+"+t.gradeCfg.value_add+"%"),this.lvLab.node.active=this.typeIcon.node.active=this.icon.node.active=this.costLab.node.active=!0,this.defaultIcon&&(this.defaultIcon.active=!1),this.arrowList.active=!0;for(var e=l.getGradeLv(t.data.grade),n=this.arrowList.children,r=0;r<n.length;r++)n[r].active=r<e}else this.lvUpRateLab.node.active=this.lvLab.node.active=this.typeIcon.node.active=this.icon.node.active=this.lvUpBtn.node.active=this.costLab.node.active=!1,this.defaultIcon&&(this.defaultIcon.active=!0),c.default.CommonUtils.setSpriteFrame(l.getRarityUrlByGrade(l.RarityType.none),this.bgSpr),this.arrowList.active=!1},i.onTouchLvUpBtn=function(){if(h.default.ins.lvUp(this.data.data.uuid)){var t=this.node,e=c.default.NodePoolMsr.machineLvUpAni.pop();t.addChild(e),e.getComponent(s.default).playAni()}},i.onTouchItem=function(){c.default.ViewManager.open(26,this.data)},o}(f.CostumeBagItem),o([y(cc.Label)],i.prototype,"costLab",void 0),o([y(cc.Label)],i.prototype,"lvUpRateLab",void 0),o([y(cc.Button)],i.prototype,"lvUpBtn",void 0),o([y(cc.Node)],i.prototype,"defaultIcon",void 0),i=o([p()],i),a.CostumeBagEquipItem=i,cc._RF.pop()},{}],CostumeBagItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5d558f5Hi5JzJYi5z7D+leS","CostumeBagItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.CostumeBagItem=void 0;var c=i("App"),s=(i("ViewConst"),i("GameConst")),u=i("CostumeConst"),l=cc._decorator,h=l.ccclass,f=l.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).typeIcon=null,e.icon=null,e.bgSpr=null,e.lvLab=null,e.data=null,e.arrowList=null,e.recommendNode=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.data=t,this.lvLab&&(this.lvLab.string="Lv."+t.data.lv),c.default.CommonUtils.setSpriteFrame(u.getRarityUrlByGrade(t.data.grade),this.bgSpr),c.default.CommonUtils.setSpriteFrameByBundle(s.BundleType.MAP_ICON,t.getIcon(),this.icon),c.default.CommonUtils.setSpriteFrameByBundle(s.BundleType.MAP_ICON,t.getTypeIcon(),this.typeIcon);for(var e=u.getGradeLv(t.data.grade),n=this.arrowList.children,r=0;r<n.length;r++)n[r].active=r<e},i.hide=function(){this.data=null,this.lvLab.node.active=this.typeIcon.node.active=this.icon.node.active=!1,c.default.CommonUtils.setSpriteFrame(u.getRarityUrlByGrade(u.RarityType.none),this.bgSpr)},i.show=function(){this.lvLab.node.active=this.typeIcon.node.active=this.icon.node.active=!0},i.onToucItem=function(){c.default.ViewManager.open(26,this.data)},o}(cc.Component),o([f(cc.Sprite)],i.prototype,"typeIcon",void 0),o([f(cc.Sprite)],i.prototype,"icon",void 0),o([f(cc.Sprite)],i.prototype,"bgSpr",void 0),o([f(cc.Label)],i.prototype,"lvLab",void 0),o([f(cc.Node)],i.prototype,"arrowList",void 0),o([f(cc.Node)],i.prototype,"recommendNode",void 0),i=o([h()],i),a.CostumeBagItem=i,cc._RF.pop()},{}],CostumeBagView:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"7b818NuuJ9IpIj7YuQQVFJ+","CostumeBagView");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("App"),h=s("List"),f=s("BaseView"),d=(s("ViewConst"),s("GameConst")),p=s("GameUtils"),y=s("MainCat"),v=s("RoleService"),g=s("CostumeConst"),m=s("CostumeController"),_=s("CostumeBagEquipItem"),b=s("CostumeBagItem"),w=cc._decorator,C=w.ccclass,S=w.property;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemList=null,e.equipCostumeNode=null,e.moneyRateLab=null,e.mergeBtn=null,e.catNode=null,e.MoneyRateTipNode=null,e.mainCat=null,e.bgType=0,e.items=null,e.costumeBagEquipItems=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this);for(var e,n=r(this.equipCostumeNode.children);!(e=n()).done;){var o=e.value;this.costumeBagEquipItems.push(o.getComponent(_.CostumeBagEquipItem))}var i=v.default.ins.getNewMainCat();this.catNode.addChild(i),i.position=cc.Vec2.ZERO,this.mainCat=i.getComponent(y.default)},i.open=function(){t.prototype.open.call(this),this.updateList(!0),this.updateEquip(),this.addEvent()},i.close=function(){t.prototype.close.call(this),l.default.NotificationCenter.removeAll(this),v.default.ins.removeNewMainCat(this.mainCat.node),this.mainCat=null},i.addEvent=function(){l.default.NotificationCenter.addListener(d.GameNotificationConst.LV_UP_COSTUME,this.onLvUpCostume,this),l.default.NotificationCenter.addListener(d.GameNotificationConst.EQUIP_COSTUME,this.onEquipCostume,this),l.default.NotificationCenter.addListener(d.GameNotificationConst.UNEQUIP_COSTUME,this.onUnequipCostume,this),l.default.NotificationCenter.addListener(d.GameNotificationConst.REFUND_COSTUME,this.onUnequipCostume,this),l.default.NotificationCenter.addListener(d.GameNotificationConst.MERGE_COSTUME,this.onMergeCostume,this)},i.onEquipCostume=function(t){this.updateEquipCostumeByParts(t.cfg.parts),this.updateList(!0)},i.onMergeCostume=function(){this.updateList(),this.updateEquip()},i.updateEquipCostumeByParts=function(t){var e=m.default.ins.getModel();this.costumeBagEquipItems[t-1].setData(e.equipItems[t]),this.moneyRateLab.string="+"+e.attr.getAttrValue(g.CostumeAbilityType.base,0)+"%"},i.onRefundCostume=function(t){t.isEquip?this.updateEquipCostumeByParts(t.cfg.parts):this.updateList()},i.onUnequipCostume=function(t){this.updateEquipCostumeByParts(t.cfg.parts),this.updateList(!0)},i.onLvUpCostume=function(t){t.isEquip?this.updateEquipCostumeByParts(t.cfg.parts):this.updateList()},i.updateEquip=function(){for(var t=m.default.ins.getModel(),e=this.costumeBagEquipItems.length,n=0;n<e;n++){var r=this.costumeBagEquipItems[n],o=t.equipItems[n+1];r.setData(o)}this.MoneyRateTipNode.active=0<e,this.moneyRateLab.string="+"+t.attr.getAttrValue(g.CostumeAbilityType.base,0)+"%"},i.onTouchMergeBtn=function(){l.default.ViewManager.open(27)},i.updateList=function(t){void 0===t&&(t=!1);var e=m.default.ins.getModel(),n=this.items=e.items.concat();for(var r in e.equipItems)this.items.remove(e.equipItems[r]);this.items.sort(p.sortCostume),this.itemList.numItems=n.length,t&&this.mainCat.updateSlot(e.equipItems)},i.onRenderItem=function(t,e){var n=t.getComponent(b.CostumeBagItem),r=this.items[e];n.recommendNode.active=r.recommend,n.setData(r)},i.onTouchMoneyRateTip=function(){l.default.ViewManager.open(46)},o}(f.default),c([S({type:h.default})],s.prototype,"itemList",void 0),c([S({type:cc.Node})],s.prototype,"equipCostumeNode",void 0),c([S({type:cc.Label})],s.prototype,"moneyRateLab",void 0),c([S({type:cc.Button})],s.prototype,"mergeBtn",void 0),c([S(cc.Node)],s.prototype,"catNode",void 0),c([S(cc.Node)],s.prototype,"MoneyRateTipNode",void 0),s=c([C],s),u.default=s,cc._RF.pop()},{}],CostumeCoinReturnView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"95bd0IJqt1HlKpBgZJZrnaR","CostumeCoinReturnView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=i("EffectUtils"),l=i("BagController"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).diamondCntLab=null,e.diamondIcon=null,e.bgType=1,e.item=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e){t.prototype.open.call(this),this.num=e,this.diamondCntLab.string=""+e},i.playDiamonAni=function(){if(this.num){var t=c.default.ViewManager.uiRoot,e=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=(e=t.convertToNodeSpaceAR(e),this.diamondIcon.convertToWorldSpaceAR(cc.Vec2.ZERO));n=t.convertToNodeSpaceAR(n),u.default.instance.playMoneyAni(e,n,l.CostType.diamond,t,this.num)}},i.onTouchClose=function(){t.prototype.onTouchClose.call(this),this.playDiamonAni()},o}(s.default),o([d({type:cc.Label})],i.prototype,"diamondCntLab",void 0),o([d({type:cc.Node})],i.prototype,"diamondIcon",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],CostumeConst:[function(t,e,n){"use strict";cc._RF.push(e,"5deb6VHIxNHi408NWt+mW0S","CostumeConst");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.getGradeLv=o.getGradeIndexByGrade=o.getGradeBgByGrade=o.getRarityUrlByGrade=o.CostumeAbilityType=o.RarityType=o.CostumeParts=o.CostumeConst=void 0;var i,a=r("ConfigManager");function c(t){var e=-1;return t>=i.mystic?e=3:t>=i.legendary?e=2:t>=i.epic?e=1:t>=i.common&&(e=0),e}o.CostumeConst||(o.CostumeConst={}),(r=o.CostumeParts||(o.CostumeParts={}))[r.head=1]="head",r[r.body=2]="body",r[r.hand=3]="hand",(r=i=o.RarityType||(o.RarityType={}))[r.none=0]="none",r[r.common=1]="common",r[r.uncommon=2]="uncommon",r[r.rare=3]="rare",r[r.epic=4]="epic",r[r.epic1=5]="epic1",r[r.epic2=6]="epic2",r[r.legendary=7]="legendary",r[r.legendary1=8]="legendary1",r[r.legendary2=9]="legendary2",r[r.legendary3=10]="legendary3",r[r.mystic=11]="mystic",a.registerJSONConf("CostumeInfo","files/CostumeInfo"),a.registerJSONConf("CostumeMerge","files/CostumeMerge"),a.registerJSONConf("CostumeUpgrade","files/CostumeUpgrade"),(r=o.CostumeAbilityType||(o.CostumeAbilityType={}))[r.base=100]="base",r[r.doublebase=101]="doublebase",r[r.all_employees_production_speed=201]="all_employees_production_speed",r[r.all_employees_move_speed=202]="all_employees_move_speed",r[r.all_employees_perfect_dish_rate=203]="all_employees_perfect_dish_rate",r[r.extremely_generous_tip_rate=204]="extremely_generous_tip_rate",r[r.additional_cashier_charge=205]="additional_cashier_charge",r[r.menu_item_upgrade_discount=206]="menu_item_upgrade_discount",r[r.waiter_production_speed=301]="waiter_production_speed",r[r.chef_production_speed=302]="chef_production_speed",r[r.waiter_move_speed=303]="waiter_move_speed",r[r.chef_move_speed=304]="chef_move_speed",r[r.instaCompleted_dish_rate=305]="instaCompleted_dish_rate",r[r.upgrade_discount=306]="upgrade_discount",r[r.production_speed=401]="production_speed",r[r.move_speed=402]="move_speed",r[r.perfect_dish_rate=403]="perfect_dish_rate",r[r.self_base_rate=404]="self_base_rate",o.getRarityUrlByGrade=function(t){var e="Texture/quality/pz_";return t<i.common?e+0:t<i.uncommon?e+1:t<i.rare?e+2:t<i.epic?e+3:t<i.legendary?e+4:t<i.mystic?e+5:t>=i.mystic?e+6:e},o.getGradeBgByGrade=function(t){return"Texture/quality/dk_"+c(t)},o.getGradeIndexByGrade=c,o.getGradeLv=function(t){var e=0;switch(t){case i.epic1:case i.legendary1:e=1;break;case i.epic2:case i.legendary2:e=2;break;case i.legendary3:e=3}return e},cc._RF.pop()},{}],CostumeController:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"87f13C9WdZJOIVPiMai+8sE","CostumeController");var u=t,l=n;Object.defineProperty(l,"__esModule",{value:!0});var h=u("App"),f=u("BaseController"),d=u("RedPointMgr"),p=u("Toast"),y=u("NotificationConst"),v=(u("ViewConst"),u("LayerManager"),u("PlatformBase"),u("GameConst")),g=u("GameUtils"),m=u("CurrencyService"),_=u("CostumeConst"),b=u("CostumeItem"),w=u("CostumeModel"),C=null;d.RedPointMgr.types.MergeCostume="MergeCostume",d.RedPointMgr.types.RecommendCostume="RecommendCostume",l.default=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._model=null,e._recalMap=[],e._parseFuncMap=null,e.costumeBagView=null,e.costumeInfoView=null,e.costumeStatisticsView=null,(C=c(e)).initNotificationEvent(),e.setModel(new w.CostumeModel(c(e))),h.default.ViewManager.register(25,{prefabName:"CostumeBagView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(26,{prefabName:"CostumeInfoView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(27,{prefabName:"CostumeMergeView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(33,{prefabName:"CostumeRefundView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(34,{prefabName:"CotumeUpgradView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(35,{prefabName:"CostumeMergeTipView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(46,{prefabName:"CostumeStatisticsView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(47,{prefabName:"CostumeMergeAniView",zIndex:100,controller:c(e),dir:"costume"}),h.default.ViewManager.register(49,{prefabName:"CostumeCoinReturnView",zIndex:100,controller:c(e),dir:"costume"}),e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var i,u,l=o.prototype;return l.initModuleEvent=function(){},l.initNotificationEvent=function(){h.default.NotificationCenter.addListener(y.NotificationConst.INIT_GAME_FINISH,this.initGame,this)},l.log=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=cc).log.apply(t,["Costume"].concat(n))},l.initGame=function(){this.initModuleEvent(),h.default.NotificationCenter.removeListener(y.NotificationConst.INIT_GAME_FINISH,this.initGame,this);var t=this._model;t.init();for(var e=t.saveData.items,n=e.length,r=0;r<n;r++){var o=e[r],i=new b.default,a=t.costumeCfg[o.id];i.init(o,a,t.costumeUpgrade,t.costumeMergeCfg),t.addCostumeItem(i)}for(var c in t.saveData.equipItem)this.equipCostume(t.saveData.equipItem[c]);this.calEquipCostumeAttr(),this.checkRedpoint()},l.test=function(){var t=this._model,e=t.equipItems;if(!e[_.CostumeParts.head]){var n=t.getCostumeItemByParts(_.CostumeParts.head);n.length&&this.equipCostume(n[0].data.uuid)}if(!e[_.CostumeParts.hand]){var r=t.getCostumeItemByParts(_.CostumeParts.hand);r.length&&this.equipCostume(r[0].data.uuid)}if(!e[_.CostumeParts.body]){var o=t.getCostumeItemByParts(_.CostumeParts.body);o.length&&this.equipCostume(o[0].data.uuid)}for(var i in this.log("/-----\u5f53\u524d\u88c5\u5907:"),this._model.equipItems)this.log(this._model.equipItems[i].toString());this.log("\u5f53\u524d\u88c5\u5907-------/:")},l.createNewCostume=function(t,e,n,r){void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=!0);var o=new b.default,i=this._model,a={id:t,lv:n,grade:e,uuid:i.saveData.uuid++};return o.init(a,i.costumeCfg[t],i.costumeUpgrade,i.costumeMergeCfg),i.addCostumeItem(o),i.saveData.items.push(a),r&&this.checkRedpoint(),o},l.getTempCostume=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1);var r=new b.default,o=this._model,i={id:t,lv:n,grade:e,uuid:null};return r.init(i,o.costumeCfg[t],o.costumeUpgrade,o.costumeMergeCfg),r},l.lvUp=function(t){var e=this._model.getCostumeItemByUuid(t);if(e){var n=e.cost;if(m.default.ins.checkDiamondEnough(n))return e.lvUp(),m.default.ins.diamondChange(-n),e.isEquip&&(this.record(_.CostumeAbilityType.base),this.calEquipCostumeAttr()),e.recommend||this.checkRecommand(),h.default.NotificationCenter.dispatch(v.GameNotificationConst.LV_UP_COSTUME,e),h.default.AnalyticMgr.recordDiamondCost(2,-n),!0;p.default.launch("\u94bb\u77f3\u4e0d\u8db3")}else Log.error("\u88c5\u5907\u4e0d\u5b58\u5728:",t);return!1},l.upgradeGrade=function(t){var e=this._model.getCostumeItemByUuid(t);if(e){var n=e.gradeCfg.upgrade_cost;if(m.default.ins.checkDiamondEnough(n))return e.gradeUp(),this.refundCostume(e),m.default.ins.diamondChange(-n),e.isEquip&&(this.record(_.CostumeAbilityType.base),this.calEquipCostumeAttr()),e.recommend||this.checkRecommand(),this.checkRedpoint(!1),h.default.NotificationCenter.dispatch(v.GameNotificationConst.LV_UP_COSTUME,e),h.default.AnalyticMgr.recordDiamondCost(3,-n),!0;p.default.launch("\u94bb\u77f3\u4e0d\u8db3")}else Log.error("\u88c5\u5907\u4e0d\u5b58\u5728:",t)},l.equipCostume=function(t,e){var n=this._model.getCostumeItemByUuid(t);if(n){var r=this._model.equipItems[n.cfg.parts];if(n.isEquip=!0,this._model.equipItems[n.cfg.parts]=n,this._model.saveData.equipItem[n.cfg.parts]=n.data.uuid,r)for(var o in r.isEquip=!1,r.attr)this.record(parseInt(o));for(var i in n.attr)this.record(parseInt(i));e&&(this.calEquipCostumeAttr(),this.checkRecommand()),h.default.NotificationCenter.dispatch(v.GameNotificationConst.EQUIP_COSTUME,n,r)}else Log.error("\u88c5\u5907\u4e0d\u5b58\u5728:",t)},l.unequipCostume=function(t,e,n){var r=this._model.equipItems[t];if(r){for(var o in r.attr)this.record(parseInt(o));return delete this._model.equipItems[t],delete this._model.saveData.equipItem[t],r.isEquip=!1,n&&(this.calEquipCostumeAttr(),this.checkRecommand()),e&&h.default.NotificationCenter.dispatch(v.GameNotificationConst.UNEQUIP_COSTUME,r),r}Log.error("\u8fd9\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u88c5\u5907\u7269\u54c1:",t,_.CostumeParts[t])},l.record=function(t){this._recalMap.includes(t)||this._recalMap.push(t)},l.refundCostume=function(t){if(1<t.data.lv){var e=t.getLvCost(t.data.lv);return t.refund(),m.default.ins.diamondChange(e),t.isEquip&&(this.record(_.CostumeAbilityType.base),this.calEquipCostumeAttr()),t.recommend&&this.checkRecommand(),h.default.NotificationCenter.dispatch(v.GameNotificationConst.REFUND_COSTUME,t),!0}},l.checkItemIsRecommand=function(t){var e=this._model.items;t.cfg.parts;for(var n,o=r(e);!(n=o()).done;)n.value.cfg.parts},l.checkIsCanMerge=function(t,e){var n=this._model.costumeMergeCfg[t.data.grade],r=e.length;if(r!==n.costume_count)return!1;for(var o=0;o<r;o++)if(!t.checkIsCanMerge(e[o]))return!1;return!0},l.mergeCostume=function(t,e){if(!this.checkIsCanMerge(t,e))return null;for(var n=t.getLvCost(t.data.lv),r=t.isEquip,o=e.length,i=0;i<o;i++){var a=e[i];r=r||a.isEquip,n+=a.getLvCost(a.data.lv),this.destoryCostumeItem(a)}return t.gradeUp(),r&&this.calEquipCostumeAttr(),0<n&&m.default.ins.diamondChange(n),this.checkRedpoint(),h.default.NotificationCenter.dispatch(v.GameNotificationConst.MERGE_COSTUME,t,e),{refundDiamond:n}},l.destoryCostumeItem=function(t){t.isEquip&&this.unequipCostume(t.cfg.parts),this._model.removeCostumeItem(t)},l.calEquipCostumeAttr=function(){for(var t=this._model.attr,e=_.CostumeParts.head;e<=_.CostumeParts.hand;e++){var n=this._model.equipItems[e],r=t.getAttrBute("costume"+e);n?(r.addAttrDict("base",n.attr),r.claFinishAttr()):r.reset()}t.claFinishAttr(),h.default.NotificationCenter.dispatch(v.GameNotificationConst.UPDATE_EQUIP_COSTUME_ATTR,this._recalMap),this._recalMap.length=0},l.onLoadView=function(){},l.onOpenView=function(t){46==t.viewId&&this.updateCostumeStatisticInfo()},l.checkRecommand=function(){var t=this._model,e=t.equipItems,n=t.items;n.sort(g.sortCostume);var r=t.recommendItems;for(var o in r)r[o]&&(r[o].recommend=!1,r[o]=null);var i=n.length;if(0!==i){for(var a=0,c=!1,s=0;s<i;s++){var u=n[s],l=u.cfg.parts;if(!r[l]){var f=e[l];if((!f||u.data.grade>f.data.grade||u.data.grade===f.data.grade&&u.data.lv>f.data.lv)&&(u.recommend=!0,f!==u&&(c=!0),r[l]=u,a++),3===a)break}}h.default.RedPointMgr.next(h.default.RedPointMgr.types.RecommendCostume,c)}},l.checkRedpoint=function(t){void 0===t&&(t=!0);for(var e=this._model.items,n=e.length,r={},o=!1,i=0;i<n;i++){var a=e[i],c=a.cfg.parts,s=a.getMergeCfg(),u=1e4*c+1e3*a.data.grade;1===s.ingredient_costume_type&&(u+=a.cfg.idx),r[u]?(r[u].list.push(a),r[u].list.length>s.costume_count&&(o=!0)):r[u]={list:[a],cfg:s}}h.default.RedPointMgr.next(h.default.RedPointMgr.types.MergeCostume,o),t&&this.checkRecommand()},l.updateMergeInfo=function(){for(var t=this._model.items,e=t.length,n={},o=0;o<e;o++){var i=t[o],a=i.cfg.parts,c=i.getMergeCfg(),s=1e4*a+1e3*i.data.grade;1===c.ingredient_costume_type&&(s+=i.cfg.idx),n[s]?n[s].list.push(i):n[s]={list:[i],cfg:c}}for(var u in n)for(var l,h=n[u],f=h.list.length>h.cfg.costume_count,d=r(h.list);!(l=d()).done;)l.value.canMerge=f},l.checkIsCanUpgrade=function(t){t.getMergeCfg().ingredient_costume_type},l.onCloseView=function(t){33!=t.viewId&&34!=t.viewId||this.costumeInfoView&&this.costumeInfoView.isShow()&&this.costumeInfoView.updateData()},l.updateCostumeStatisticInfo=function(){for(var t,e={},n=[],r=_.CostumeParts.head;r<=_.CostumeParts.hand;r++){var o=this._model.equipItems[r];if(o){var i=_.getGradeIndexByGrade(o.data.grade);if(3==i&&(i--,n.push(o.getSpecialAbilityStr4())),0<i)for(var a=0;a<=i;a++){var c=o.cfg["special_ability"+(a+1)+"_type"],s=o.cfg["special_ability"+(a+1)+"_value"];e[c]||(e[c]={value:0,gradeIndex:a}),e[c].value+=s}}}this.costumeStatisticsView&&(t=this._model.attr.getAttrValue(_.CostumeAbilityType.base,0),this.costumeStatisticsView.updateUI(e,n,t))},i=o,u=[{key:"ins",get:function(){return C}}],null&&a(i.prototype,null),u&&a(i,u),Object.defineProperty(i,"prototype",{writable:!1}),o}(f.default),cc._RF.pop()},{}],CostumeInfoView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3ee02oWPYtK/7Y3kUjTX/DH","CostumeInfoView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=(i("ViewConst"),i("MachineLvUpAni")),l=i("GameConst"),h=i("CostumeConst"),f=i("CostumeController"),d=i("CostumeSpecialItem"),p=cc._decorator,y=p.ccclass,v=p.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).bgNode=null,e.itemBgSpr=null,e.iconSpr=null,e.costumeTypeSpr=null,e.arrowListNode=null,e.lvLab=null,e.nextLab=null,e.curLab=null,e.equipBtn=null,e.equipLab=null,e.upLvBtn=null,e.costLab=null,e.refundBtn=null,e.lvUpTipLab=null,e.bgType=1,e.refundIconSpr=null,e.refundBtnLab=null,e.titleLab=null,e.specialItems=[],e.item=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e){t.prototype.open.call(this),this.item=e,this.updateData(),this.titleLab.string=this.item.getName(),e=null!=this.item.data.uuid,this.equipBtn.node.active=e,this.refundBtn.node.active=e,this.upLvBtn.node.active=e,this.lvUpTipLab.node.active=e,this.bgNode.height=e?980:880},i.updateData=function(){var t=this.item;t.isEquip?this.equipLab.string="\u5378\u4e0b":this.equipLab.string="\u88c5\u5907",t.isMaxLv()?(this.upLvBtn.interactable=!1,this.costLab.string="MAX",this.nextLab.string="+"+t.getValue()+"%"):(this.nextLab.string="+"+t.getNextLvValue()+"%",this.costLab.string=t.cost+""),this.updateRefundBtnState(),this.lvLab.string="Lv."+t.data.lv+"/"+t.gradeCfg.max_level,this.curLab.string="+"+t.getValue()+"%",c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,t.getIcon(),this.iconSpr),c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,t.getTypeIcon(),this.costumeTypeSpr),c.default.CommonUtils.setSpriteFrame(h.getRarityUrlByGrade(t.data.grade),this.itemBgSpr);var e=t.canUpgradeGrade();this.specialItems[0].setData(t.getSpecialAbilityStr1(),0,t.data.grade>=h.RarityType.rare,e&&this.item.data.grade+1==h.RarityType.rare),this.specialItems[1].setData(t.getSpecialAbilityStr2(),1,t.data.grade>=h.RarityType.epic,e&&this.item.data.grade+1==h.RarityType.epic),this.specialItems[2].setData(t.getSpecialAbilityStr3(),2,t.data.grade>=h.RarityType.legendary,e&&this.item.data.grade+1==h.RarityType.legendary),this.specialItems[3].setData(t.getSpecialAbilityStr4(),3,t.data.grade>=h.RarityType.mystic,e&&this.item.data.grade+1==h.RarityType.mystic);for(var n=h.getGradeLv(t.data.grade),r=this.arrowListNode.children,o=0;o<r.length;o++)r[o].active=o<n},i.updateRefundBtnState=function(){var t=this.item;this.refundBtn.interactable=1<t.data.lv,t=1<t.data.lv?this.refundBtn.normalMaterial:this.refundBtn.grayMaterial,this.refundIconSpr.setMaterial(0,t),this.refundBtnLab.setMaterial(0,t)},i.onTouchEquipBtn=function(){this.item.isEquip?f.default.ins.unequipCostume(this.item.cfg.parts,!0,!0):f.default.ins.equipCostume(this.item.data.uuid,!0),this.closeView()},i.onToucRefundBtn=function(){c.default.ViewManager.open(33,this.item)},i.onTouchLvUpBtn=function(){if(f.default.ins.lvUp(this.item.data.uuid)){this.updateData();var t=this.itemBgSpr.node,e=c.default.NodePoolMsr.machineLvUpAni.pop();t.addChild(e),e.getComponent(u.default).playAni()}},i.onTouchGradeBtn=function(t,e){0<=this.item.data.uuid&&c.default.ViewManager.open(34,this.item,parseInt(e))},o}(s.default),o([v({type:cc.Node})],i.prototype,"bgNode",void 0),o([v({type:cc.Sprite})],i.prototype,"itemBgSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"iconSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"costumeTypeSpr",void 0),o([v({type:cc.Node})],i.prototype,"arrowListNode",void 0),o([v({type:cc.Label})],i.prototype,"lvLab",void 0),o([v({type:cc.Label})],i.prototype,"nextLab",void 0),o([v({type:cc.Label})],i.prototype,"curLab",void 0),o([v({type:cc.Button})],i.prototype,"equipBtn",void 0),o([v({type:cc.Label})],i.prototype,"equipLab",void 0),o([v({type:cc.Button})],i.prototype,"upLvBtn",void 0),o([v({type:cc.Label})],i.prototype,"costLab",void 0),o([v({type:cc.Button})],i.prototype,"refundBtn",void 0),o([v({type:cc.Label})],i.prototype,"lvUpTipLab",void 0),o([v({type:cc.Sprite})],i.prototype,"refundIconSpr",void 0),o([v({type:cc.Label})],i.prototype,"refundBtnLab",void 0),o([v(cc.Label)],i.prototype,"titleLab",void 0),o([v(d.default)],i.prototype,"specialItems",void 0),i=o([y],i),a.default=i,cc._RF.pop()},{}],CostumeItem:[function(t,e,n){"use strict";cc._RF.push(e,"d65a7Gs2w1DeJ2LLVojMqnq","CostumeItem");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("GameText"),a=r("GameUtils"),c=r("CurrencyService"),s=r("CostumeConst"),u=["costume/Dynamic_Icon_CostumeType_Head","costume/Dynamic_Icon_CostumeType_Body","costume/Dynamic_Icon_CostumeType_Hand"];o.default=function(){function t(){this.cfg=null,this.data=null,this.costumeUpgrade=null,this.costumeMergeCfg=null,this.gradeCfg=null,this.cost=0,this.canMerge=!1,this.recommend=!1,this.isEquip=!1,this.attr=null}var e=t.prototype;return e.init=function(t,e,n,r){var o;this.cfg=e,e=n[(this.data=t).grade],this.costumeMergeCfg=r,this.costumeUpgrade=n,this.gradeCfg=e,this.attr=((o={})[s.CostumeAbilityType.base]=e.value+(t.lv-1)*e.value_add,o),this.cost=e.upgrade_cost+(t.lv-1)*e.upgrade_cost_add,this.initSpecialAbilitys()},e.getNextGradeItem=function(){var e=new t,n=Object.assign(Object.create(null),this.data);return n.lv=1,n.grade++,e.init(n,this.cfg,this.costumeUpgrade,this.costumeMergeCfg),e},e.getLastGradeItem=function(){var e=new t,n=Object.assign(Object.create(null),this.data);return(n.lv=1)<n.grade&&n.grade--,e.init(n,this.cfg,this.costumeUpgrade,this.costumeMergeCfg),e},e.getGradeItemByGrade=function(e){var n=new t,r=Object.assign(Object.create(null),this.data);return r.lv=1,r.grade=e,n.init(r,this.cfg,this.costumeUpgrade,this.costumeMergeCfg),n},e.getName=function(){return i.GameText.getTextByStr(this.cfg.name)},e.getValue=function(){return this.attr[s.CostumeAbilityType.base]},e.getNextLvValue=function(){return this.attr[s.CostumeAbilityType.base]+this.gradeCfg.value_add},e.getMaxLvValue=function(){return this.gradeCfg.value+(this.gradeCfg.max_level-1)*this.gradeCfg.value_add},e.getLvUpAddRate=function(){var t=this.attr[s.CostumeAbilityType.base];return Math.round(this.gradeCfg.value_add/(t+this.gradeCfg.value_add)*100)},e.getTypeIcon=function(){return u[this.cfg.parts-1]},e.getIcon=function(){return"costume/"+this.cfg.icon_basic},e.toString=function(){var t=this.data,e=t.grade,n=this.cfg.name+" uuid:"+t.uuid+", id:"+this.cfg.idx+", lv:"+t.lv+", grade:"+e+"("+i.GameText.getTextByStr("str_grade"+e)+"), cost:"+this.cost;return n+="\n\u57fa\u7840\u5c5e\u6027\u52a0\u6210:"+this.attr[s.CostumeAbilityType.base]+"%",e<s.RarityType.uncommon?n:(n+="\n\u5df2\u89e3\u9501\u7279\u6b8a\u5c5e\u6027:",n+="\n    1."+this.getSpecialAbilityStr1(),e<s.RarityType.epic?n:(n+="\n    2."+this.getSpecialAbilityStr2(),e<s.RarityType.legendary?n:(n+="\n    3."+this.getSpecialAbilityStr3(),e<s.RarityType.mystic?n:n+"\n    4."+this.getSpecialAbilityStr4())))},e.isMaxGrade=function(){return this.data.grade>=s.RarityType.mystic},e.getMergeCfg=function(){return this.costumeMergeCfg[this.data.grade]},e.checkIsCanMerge=function(t){var e=this.costumeMergeCfg[this.data.grade];if(1===e.ingredient_costume_type){if(t.data.id!==this.data.id||t.data.grade!==e.costume_type_grade)return!1}else if(t.cfg.parts!==this.cfg.parts||t.data.grade!==e.costume_type_grade)return!1;return!0},e.initSpecialAbilitys=function(){return this.data.grade<s.RarityType.uncommon?this.attr:(this.attr[this.cfg.special_ability1_type]=this.cfg.special_ability1_value,this.data.grade<s.RarityType.epic?this.attr:(this.attr[this.cfg.special_ability2_type]=this.cfg.special_ability2_value,this.data.grade<s.RarityType.legendary?this.attr:(this.attr[this.cfg.special_ability3_type]=this.cfg.special_ability3_value,this.data.grade<s.RarityType.mystic?this.attr:void(this.attr[this.cfg.special_ability4_type]=this.cfg.special_ability4_value))))},e.getSpecialAbilityStr1=function(){return a.getCostumeAttrStr(this.cfg.special_ability1_type,this.cfg.special_ability1_value)},e.getSpecialAbilityStr2=function(){return a.getCostumeAttrStr(this.cfg.special_ability2_type,this.cfg.special_ability2_value)},e.getSpecialAbilityStr3=function(){return a.getCostumeAttrStr(this.cfg.special_ability3_type,this.cfg.special_ability3_value)},e.getSpecialAbilityStr4=function(){return a.getCostumeAttrStr(this.cfg.special_ability4_type,this.cfg.special_ability4_value,this.getName(),2*this.getValue())},e.getCurMaxSpecialAbilityStr=function(t){var e=null;return(t=t||this.data.grade)>=s.RarityType.rare&&(e=this.getSpecialAbilityStr1()),t>=s.RarityType.epic&&(e=this.getSpecialAbilityStr2()),t>=s.RarityType.legendary&&(e=this.getSpecialAbilityStr3()),t>=s.RarityType.mystic&&(e=this.getSpecialAbilityStr4()),e},e.getBaseValueStr=function(){return"+"+this.attr[s.CostumeAbilityType.base]+"%"},e.isMaxLv=function(){return this.data.lv>=this.gradeCfg.max_level},e.getLvCost=function(t){if(1===t)return 0;var e=this.gradeCfg;return t>e.max_level&&(t=e.max_level),--t*(e.upgrade_cost+e.upgrade_cost_add*(t-1)/2)},e.canLvUp=function(){return!this.isMaxLv()&&c.default.ins.checkDiamondEnough(this.cost)},e.refund=function(){this.data.lv=1,this.attr[s.CostumeAbilityType.base]=this.gradeCfg.value,this.cost=this.gradeCfg.upgrade_cost},e.lvUp=function(){return!this.isMaxLv()&&(this.data.lv++,this.attr[s.CostumeAbilityType.base]+=this.gradeCfg.value_add,this.cost+=this.gradeCfg.upgrade_cost_add,!0)},e.canUpgradeGrade=function(){return 0<this.gradeCfg.upgrade_grade_cost},e.gradeUp=function(){if(this.isMaxGrade())return!1;this.data.grade++,this.gradeCfg=this.costumeUpgrade[this.data.grade];var t=this.gradeCfg;if(this.data.lv=1,this.attr[s.CostumeAbilityType.base]=t.value,this.cost=t.upgrade_cost,this.attr)switch(this.data.grade){case s.RarityType.uncommon:this.attr[this.cfg.special_ability1_type]=this.cfg.special_ability1_value;break;case s.RarityType.epic:this.attr[this.cfg.special_ability2_type]=this.cfg.special_ability2_value;break;case s.RarityType.legendary:this.attr[this.cfg.special_ability3_type]=this.cfg.special_ability3_value;break;case s.RarityType.mystic:this.attr[this.cfg.special_ability4_type]=this.cfg.special_ability4_value}return!0},e.equip=function(){this.isEquip=!0},e.unEquip=function(){this.isEquip=!1},t}(),cc._RF.pop()},{}],CostumeMergeAniView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5f29f38XG9HGK0vHqOIYono","CostumeMergeAniView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=(i("ViewConst"),i("CostumeConst")),l=i("CostumeBagItem"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).infoAni=null,e.infoNode=null,e.newIcon=null,e.specialSpr=null,e.specialRichText=null,e.nameLab=null,e.moneyRateLab=null,e.mergeAni=null,e.newItem=null,e.mergeItems=[],e.isCanClose=!1,e.num=0,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this),this.mergeAni.on(cc.Animation.EventType.FINISHED,this.onMergeAniFinished,this),this.infoAni.on(cc.Animation.EventType.FINISHED,this.onInfoAniFinished,this)},i.open=function(e,n,r){var o=this;if(t.prototype.open.call(this),this.infoNode.active=!1,this.num=r,1===e.length)this.mergeItems[0].setData(e[0]),this.mergeItems[1].setData(n.getLastGradeItem()),this.mergeAni.play("work2");else{for(var i=0;i<e.length;i++)this.mergeItems[i].setData(e[i]);this.mergeItems[2].setData(n.getLastGradeItem()),this.mergeAni.play("work")}this.scheduleOnce(function(){o.infoNode.active=!0,o.infoAni.play("work")},1.15),this.newItem.setData(n),this.nameLab.string=n.getName(),this.moneyRateLab.string="+"+n.getValue()+"%",n.data.grade<u.RarityType.rare?this.specialSpr.node.active=!1:(c.default.CommonUtils.setSpriteFrame(u.getGradeBgByGrade(n.data.grade),this.specialSpr),this.specialRichText.string=n.getCurMaxSpecialAbilityStr(),n=u.getGradeLv(n.data.grade),this.newIcon.active=0===n),this.isCanClose=!1},i.onMergeAniFinished=function(){this.isCanClose=!0},i.onInfoAniFinished=function(){this.infoAni.play("idle")},i.onTouchClose=function(){this.isCanClose&&(this.closeView(),this.num&&c.default.ViewManager.open(49,this.num))},o}(s.default),o([d(cc.Animation)],i.prototype,"infoAni",void 0),o([d(cc.Node)],i.prototype,"infoNode",void 0),o([d(cc.Node)],i.prototype,"newIcon",void 0),o([d(cc.Sprite)],i.prototype,"specialSpr",void 0),o([d(cc.RichText)],i.prototype,"specialRichText",void 0),o([d(cc.Label)],i.prototype,"nameLab",void 0),o([d(cc.Label)],i.prototype,"moneyRateLab",void 0),o([d(cc.Animation)],i.prototype,"mergeAni",void 0),o([d(l.CostumeBagItem)],i.prototype,"newItem",void 0),o([d([l.CostumeBagItem])],i.prototype,"mergeItems",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],CostumeMergeItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"540dafPOM9CAqq33zsaH50o","CostumeMergeItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.CostumeMergeItem=void 0;var c=i("App"),s=i("ItemRenderer"),u=(i("ViewConst"),i("GameConst")),l=i("CostumeConst"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).typeIcon=null,e.icon=null,e.bgNode=null,e.equipNode=null,e.lvLab=null,e.arrowList=null,e.data=null,e.redpointImg=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.data=t,this.lvLab.string="Lv."+t.data.lv,c.default.CommonUtils.setSpriteFrame(l.getRarityUrlByGrade(t.data.grade),this.bgNode.getComponent(cc.Sprite)),this.equipNode.active=t.isEquip,c.default.CommonUtils.setSpriteFrameByBundle(u.BundleType.MAP_ICON,t.getIcon(),this.icon),c.default.CommonUtils.setSpriteFrameByBundle(u.BundleType.MAP_ICON,t.getTypeIcon(),this.typeIcon);for(var e=l.getGradeLv(t.data.grade),n=this.arrowList.children,r=0;r<n.length;r++)n[r].active=r<e;this.redpointImg.active=t.canMerge},i.onToucItem=function(){c.default.ViewManager.open(26,this.data)},o}(s.default),o([d(cc.Sprite)],i.prototype,"typeIcon",void 0),o([d(cc.Sprite)],i.prototype,"icon",void 0),o([d(cc.Node)],i.prototype,"bgNode",void 0),o([d(cc.Node)],i.prototype,"equipNode",void 0),o([d(cc.Label)],i.prototype,"lvLab",void 0),o([d(cc.Node)],i.prototype,"arrowList",void 0),o([d(cc.Node)],i.prototype,"redpointImg",void 0),i=o([f()],i),a.CostumeMergeItem=i,cc._RF.pop()},{}],CostumeMergeTipItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e46bbCXH3ZL0Zyy+dm16QqS","CostumeMergeTipItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("CostumeConst"),l=cc._decorator,h=l.ccclass,f=l.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).descRichText=null,e.baseItem=null,e.newItem=null,e.head_0=null,e.head_1=null,e.materialItems=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.updateItem(this.baseItem,t.step),this.updateItem(this.newItem,t.step+1),this.updateItem(this.materialItems[0],t.costume_type_grade),2===t.costume_count?(this.materialItems[1].active=!0,this.updateItem(this.materialItems[1],t.costume_type_grade)):this.materialItems[1].active=!1;var e=2==t.ingredient_costume_type;this.head_0.active=!e,this.head_1.active=e,this.descRichText.string=s.GameText.getTextByStr(t.costume_merge_desc)},i.updateItem=function(t,e){var n=t.getComponent(cc.Sprite);c.default.CommonUtils.setSpriteFrame(u.getRarityUrlByGrade(e),n);for(var r=t.getChildByName("ArrowList").children,o=u.getGradeLv(e),i=0;i<r.length;i++)r[i].active=i<o},o}(cc.Component),o([f(cc.RichText)],i.prototype,"descRichText",void 0),o([f(cc.Node)],i.prototype,"baseItem",void 0),o([f(cc.Node)],i.prototype,"newItem",void 0),o([f(cc.Node)],i.prototype,"head_0",void 0),o([f(cc.Node)],i.prototype,"head_1",void 0),o([f([cc.Node])],i.prototype,"materialItems",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],CostumeMergeTipView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b7a0dtPbQRMNbVA7SvNAy34","CostumeMergeTipView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("List"),s=i("BaseView"),u=i("CostumeController"),l=i("CostumeMergeTipItem"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemList=null,e.bgType=1,e.items=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this);var e=u.default.ins.getModel();this.items=e.costumeMergeCfg,this.itemList.numItems=10},i.open=function(){t.prototype.open.call(this)},i.onRenderItem=function(t,e){var n=t.getComponent(l.default),r=this.items[e+1];n.setData(r)},o}(s.default),o([d(c.default)],i.prototype,"itemList",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],CostumeMergeView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"65454Cf/UFMKLEe4Lbc9n+o","CostumeMergeView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("ListView"),u=i("BaseView"),l=(i("ViewConst"),i("GameUtils")),h=i("CostumeConst"),f=i("CostumeController"),d=i("CostumeBagItem"),p=i("CostumeMergeItem"),y=cc._decorator,v=y.ccclass,g=y.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).mergeNode=null,e.newItemSpecialSpr=null,e.newItemNameLab=null,e.newItemCurLab=null,e.newItemUpgradeLab=null,e.newItemSpecialRichText=null,e.mergeBtn=null,e.costLab=null,e.mergeItemsNode=null,e.selectNode=null,e.itemList=null,e.newItemDisplay=null,e.targetDisplay=null,e.costItemDisplay1=null,e.costItemDisplay2=null,e.items=null,e.bgType=1,e.targetItem=null,e._model=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this),this.itemList.node.on(s.ListViewEvent.ITEM_TAP,this.onSelectItem,this)},i.onItemMerge=function(){var t=this.itemList.selectedItems.slice(1),e=f.default.ins.mergeCostume(this.targetItem,t);e&&(c.default.ViewManager.open(47,t,this.targetItem,e.refundDiamond),this.targetItem=null,f.default.ins.updateMergeInfo(),this.toNormalState(),this.updateList(),this.itemList.updateViewPort())},i.open=function(){t.prototype.open.call(this),this._model=f.default.ins.getModel(),f.default.ins.updateMergeInfo(),this.toNormalState(),this.updateList()},i.close=function(){t.prototype.close.call(this),this._model=null},i.toNormalState=function(){this.mergeNode.active=!1,this.selectNode.active=!0},i.toSelectState=function(){this.mergeNode.active=!0,this.selectNode.active=!1},i.onRenderItem=function(t,e){var n=t.getComponent(p.CostumeMergeItem),r=this.items[e];n.setData(r)},i.onSelectItem=function(t){if(this.targetItem)if(t.data===this.targetItem)this.setTarget(null),this.updateList();else{var e=this.itemList.selectedItems;e.length===this.itemList.maxMultipleSelectNum?this.updateMergeBtnState(!0):this.updateMergeBtnState(!1),1<e.length?(this.costItemDisplay1.show(),this.costItemDisplay1.setData(e[1])):this.costItemDisplay1.hide(),2<e.length?(this.costItemDisplay2.show(),this.costItemDisplay2.setData(e[2])):this.costItemDisplay2.hide()}else this.setTarget(t.data),this.toSelectState()},i.setTarget=function(t){if(this.targetItem=t){this.newItemNameLab.string=t.getName();var e=t.getNextGradeItem();this.newItemDisplay.setData(e),this.newItemCurLab.string=t.getBaseValueStr(),this.newItemUpgradeLab.string=e.getBaseValueStr(),this.newItemSpecialSpr.node.active=!0,e.data.grade===h.RarityType.rare?(this.newItemSpecialRichText.string=e.getSpecialAbilityStr1(),c.default.CommonUtils.setSpriteFrame(h.getGradeBgByGrade(e.data.grade),this.newItemSpecialSpr)):e.data.grade===h.RarityType.epic?(this.newItemSpecialRichText.string=e.getSpecialAbilityStr2(),c.default.CommonUtils.setSpriteFrame(h.getGradeBgByGrade(e.data.grade),this.newItemSpecialSpr)):e.data.grade===h.RarityType.legendary?(this.newItemSpecialRichText.string=e.getSpecialAbilityStr3(),c.default.CommonUtils.setSpriteFrame(h.getGradeBgByGrade(e.data.grade),this.newItemSpecialSpr)):e.data.grade===h.RarityType.mystic?(this.newItemSpecialRichText.string=e.getSpecialAbilityStr4(),c.default.CommonUtils.setSpriteFrame(h.getGradeBgByGrade(e.data.grade),this.newItemSpecialSpr)):(this.newItemSpecialRichText.string="",this.newItemSpecialSpr.node.active=!1),this.targetDisplay.setData(t);var n=t.getMergeCfg();this.costItemDisplay1.hide(),2===n.costume_count?(this.costItemDisplay2.hide(),this.costItemDisplay2.node.active=!0):this.costItemDisplay2.node.active=!1,this.updateMergeBtnState(!1),this.itemList.maxMultipleSelectNum=1+n.costume_count;var r=this._model.getMergeCostume(t);r.includes(t)||r.unshift(t),this.itemList.updateDataSource(r),this.itemList.select([t]),this.itemList.updateViewPort()}else this.toNormalState()},i.updateMergeBtnState=function(t){this.mergeBtn.interactable=t,this.mergeBtn.node.getComponentInChildren(cc.Label).setMaterial(0,t?this.mergeBtn.normalMaterial:this.mergeBtn.grayMaterial)},i.updateList=function(){var t=this._model,e=this.items=t.items.filter(function(t){return t.data.grade<h.RarityType.mystic});this.items.sort(function(t,e){return t.canMerge===e.canMerge?l.sortCostume(t,e):e.canMerge?1:-1}),this.itemList.updateDataSource(e)},i.onTouchTipBtn=function(){c.default.ViewManager.open(35)},o}(u.default),o([g({type:cc.Node})],i.prototype,"mergeNode",void 0),o([g({type:cc.Sprite})],i.prototype,"newItemSpecialSpr",void 0),o([g({type:cc.Label})],i.prototype,"newItemNameLab",void 0),o([g({type:cc.Label})],i.prototype,"newItemCurLab",void 0),o([g({type:cc.Label})],i.prototype,"newItemUpgradeLab",void 0),o([g({type:cc.RichText})],i.prototype,"newItemSpecialRichText",void 0),o([g({type:cc.Button})],i.prototype,"mergeBtn",void 0),o([g({type:cc.Label})],i.prototype,"costLab",void 0),o([g({type:cc.Node})],i.prototype,"mergeItemsNode",void 0),o([g({type:cc.Node})],i.prototype,"selectNode",void 0),o([g({type:s.ListView})],i.prototype,"itemList",void 0),o([g(d.CostumeBagItem)],i.prototype,"newItemDisplay",void 0),o([g(d.CostumeBagItem)],i.prototype,"targetDisplay",void 0),o([g(d.CostumeBagItem)],i.prototype,"costItemDisplay1",void 0),o([g(d.CostumeBagItem)],i.prototype,"costItemDisplay2",void 0),i=o([v],i),a.default=i,cc._RF.pop()},{}],CostumeModel:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"12f7cbyZt1PnbwWAwvD2+xj","CostumeModel");var s=t,u=n;Object.defineProperty(u,"__esModule",{value:!0}),u.CostumeModel=void 0;var l=s("App"),h=s("BaseModel"),f=(s("ControllerConst"),s("GameUtils")),d=s("CostumeAttr"),p=s("CostumeConst");u.CostumeModel=function(t){var e,n;function o(e){var n;return(n=t.call(this,e)||this).costumeCfg=null,n.costumeMergeCfg=null,n.costumeUpgrade=null,n.saveData=null,n.items=[],n.attr=null,n.equipItems={},n.recommendItems={},l.default.SaveManage.add(a(n),"Costume",!1,!0),n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var i=o.prototype;return i.init=function(){this.attr=new d.default;for(var t=p.CostumeParts.head;t<=p.CostumeParts.hand;t++)this.attr.addAttrBute("costume"+t,new d.default);this.costumeCfg=l.default.ConfigManager.getConfig("CostumeInfo"),this.costumeMergeCfg=l.default.ConfigManager.getConfig("CostumeMerge"),this.costumeUpgrade=l.default.ConfigManager.getConfig("CostumeUpgrade"),l.default.SaveManage.load("Costume")},i.getMergeCostume=function(t){var e=t.getMergeCfg(),n=[],r=this.items,o=e.costume_type_grade;if(1===e.ingredient_costume_type)for(var i=t.cfg.idx,a=r.length,c=0;c<a;c++){var s=r[c];s.cfg.idx===i&&o===s.data.grade&&n.push(s)}else for(var u=t.cfg.parts,l=r.length,h=0;h<l;h++){var d=r[h];d.cfg.parts===u&&o===d.data.grade&&n.push(d)}return n.sort(f.sortCostume)},i.getCostumeItemByParts=function(t){for(var e=[],n=this.items.length,r=0;r<n;r++)this.items[r].cfg.parts===t&&e.push(this.items[r]);return e},i.addCostumeItem=function(t){this.items.push(t),t.data.grade},i.removeCostumeItem=function(t){this.items.remove(t),this.saveData.items.remove(t.data)},i.getCostumeItemByUuid=function(t){for(var e,n=r(this.items);!(e=n()).done;){var o=e.value;if(o.data.uuid===t)return o}},i.createMemento=function(){return this.saveData},i.setMemento=function(t){this.saveData=t||{items:[],uuid:0,equipItem:{}}},o}(h.default),cc._RF.pop()},{}],CostumeRefundView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"08795T0Ws1DpZRgjomkJbiR","CostumeRefundView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=i("EffectUtils"),l=i("BagController"),h=i("GameConst"),f=i("CostumeConst"),d=i("CostumeController"),p=cc._decorator,y=p.ccclass,v=p.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).curItemBgSpr=null,e.iconSpr=null,e.costumeTypeSpr=null,e.curArrowListNode=null,e.lvLab=null,e.originalItemBgSpr=null,e.originalIconSpr=null,e.originalCostumeTypeSpr=null,e.originalArrowListNode=null,e.originalLvLab=null,e.refundBtnBtn=null,e.diamondLabLab=null,e.diamondIcon=null,e.bgType=1,e.item=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e){t.prototype.open.call(this),this.item=e,this.updateUI()},i.updateUI=function(){this.lvLab.string="Lv."+this.item.data.lv+"/"+this.item.gradeCfg.max_level,c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getIcon(),this.iconSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getTypeIcon(),this.costumeTypeSpr),c.default.CommonUtils.setSpriteFrame(f.getRarityUrlByGrade(this.item.data.grade),this.curItemBgSpr),this.originalLvLab.string="Lv.1/"+this.item.gradeCfg.max_level,c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getIcon(),this.originalIconSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getTypeIcon(),this.originalCostumeTypeSpr),c.default.CommonUtils.setSpriteFrame(f.getRarityUrlByGrade(this.item.data.grade),this.originalItemBgSpr),this.diamondLabLab.string=""+this.item.getLvCost(this.item.data.lv);for(var t=f.getGradeLv(this.item.data.grade),e=this.curArrowListNode.children,n=this.originalArrowListNode.children,r=0;r<e.length;r++)e[r].active=n[r].active=r<t},i.playDiamonAni=function(t){var e=c.default.ViewManager.uiRoot,n=this.diamondLabLab.node.parent.convertToWorldSpaceAR(this.diamondLabLab.node.position),r=(n=e.convertToNodeSpaceAR(n),this.diamondIcon.convertToWorldSpaceAR(cc.Vec2.ZERO));r=e.convertToNodeSpaceAR(r),u.default.instance.playMoneyAni(n,r,l.CostType.diamond,e,t)},i.onToucRefundBtn=function(){var t=this.item.getLvCost(this.item.data.lv);d.default.ins.refundCostume(this.item)&&(this.closeView(),this.playDiamonAni(t))},o}(s.default),o([v({type:cc.Sprite})],i.prototype,"curItemBgSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"iconSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"costumeTypeSpr",void 0),o([v({type:cc.Node})],i.prototype,"curArrowListNode",void 0),o([v({type:cc.Label})],i.prototype,"lvLab",void 0),o([v({type:cc.Sprite})],i.prototype,"originalItemBgSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"originalIconSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"originalCostumeTypeSpr",void 0),o([v({type:cc.Node})],i.prototype,"originalArrowListNode",void 0),o([v({type:cc.Label})],i.prototype,"originalLvLab",void 0),o([v({type:cc.Button})],i.prototype,"refundBtnBtn",void 0),o([v({type:cc.Label})],i.prototype,"diamondLabLab",void 0),o([v(cc.Node)],i.prototype,"diamondIcon",void 0),i=o([y],i),a.default=i,cc._RF.pop()},{}],CostumeSpecialItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6473eht+PdCrJpkjmgZLLH3","CostumeSpecialItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("SwitchFrame"),s=cc._decorator,u=s.ccclass,l=s.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).str=null,e.lockNode=null,e.switchFrame=null,e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.setData=function(t,e,n,r){this.str.string=t,this.lockNode.active=!n,this.switchFrame.frameIndex=r?0:1},o}(cc.Component),o([l(cc.RichText)],i.prototype,"str",void 0),o([l(cc.Node)],i.prototype,"lockNode",void 0),o([l(c.default)],i.prototype,"switchFrame",void 0),i=o([u],i),a.default=i,cc._RF.pop()},{}],CostumeStatisticsView:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"ddbb97wkb1OQox4EQ5syVNk","CostumeStatisticsView");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("App"),h=s("BaseView"),f=s("GameUtils"),d=s("CostumeConst"),p=cc._decorator,y=p.ccclass,v=p.property;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).bg=null,e.item=null,e.content=null,e.moneyRateLab=null,e.widgetArr=[],e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(){t.prototype.open.call(this)},i.updateUI=function(t,e,n){this.moneyRateLab.string="+"+n+"%";var o=0;for(var i in t){var a=t[i],c=cc.instantiate(this.item);this.content.addChild(c),c.setSiblingIndex(parseInt(i));var s=c.getComponent(cc.Sprite);c.getComponentInChildren(cc.RichText).string=f.getCostumeAttrStr(parseInt(i),a.value),l.default.CommonUtils.setSpriteFrame("Texture/quality/dk_"+a.gradeIndex,s),o++}for(var u,h=r(e);!(u=h()).done;){var p=u.value,y=cc.instantiate(this.item);this.content.addChild(y),y.setSiblingIndex(0);var v=y.getComponent(cc.Sprite);y.getComponentInChildren(cc.RichText).string=p,l.default.CommonUtils.setSpriteFrame(d.getGradeBgByGrade(d.RarityType.mystic),v),o++}this.item.removeFromParent(),this.bg.height=60*o+360;for(var g,m=r(this.widgetArr);!(g=m()).done;)g.value.updateAlignment()},o}(h.default),c([v(cc.Node)],s.prototype,"bg",void 0),c([v(cc.Node)],s.prototype,"item",void 0),c([v(cc.Node)],s.prototype,"content",void 0),c([v(cc.Label)],s.prototype,"moneyRateLab",void 0),c([v([cc.Widget])],s.prototype,"widgetArr",void 0),s=c([y],s),u.default=s,cc._RF.pop()},{}],CotumeUpgradView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"68a8dZC+Q5IX6wEn0dRmuGa","CotumeUpgradView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=i("EffectUtils"),l=i("BagController"),h=i("GameConst"),f=i("CostumeConst"),d=i("CostumeController"),p=cc._decorator,y=p.ccclass,v=p.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).qualitySpr=null,e.curItemBgSpr=null,e.curIconSpr=null,e.curCostumeTypeSpr=null,e.curArrowListNode=null,e.nextItemBgSpr=null,e.nextIconSpr=null,e.nextCostumeTypeSpr=null,e.nextArrowListNode=null,e.curMaxLvLab=null,e.nextMaxLvLab=null,e.curMaxRateLab=null,e.nextMaxRateLab=null,e.descRichText=null,e.bottomNode=null,e.costBtnNode=null,e.costLabLab=null,e.diamondIcon=null,e.bgType=1,e.item=null,e.nextItem=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e,n){t.prototype.open.call(this),this.item=e,this.nextItem=e.getGradeItemByGrade(n),this.item.data.grade+1==n&&this.item.canUpgradeGrade()?(this.bottomNode.active=!0,this.costLabLab.string=this.item.gradeCfg.upgrade_grade_cost.toString()):this.bottomNode.active=!1,this.updateUI()},i.updateUI=function(){this.curMaxLvLab.string=this.item.gradeCfg.max_level.toString(),this.curMaxRateLab.string="+"+this.item.getMaxLvValue()+"%",c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getIcon(),this.curIconSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.item.getTypeIcon(),this.curCostumeTypeSpr),c.default.CommonUtils.setSpriteFrame(f.getRarityUrlByGrade(this.item.data.grade),this.curItemBgSpr);for(var t=f.getGradeLv(this.item.data.grade),e=this.curArrowListNode.children,n=0;n<e.length;n++)e[n].active=n<t;this.nextMaxLvLab.string=this.nextItem.gradeCfg.max_level.toString(),this.nextMaxRateLab.string="+"+this.nextItem.getMaxLvValue()+"%",c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.nextItem.getIcon(),this.nextIconSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,this.nextItem.getTypeIcon(),this.nextCostumeTypeSpr),c.default.CommonUtils.setSpriteFrame(f.getRarityUrlByGrade(this.nextItem.data.grade),this.nextItemBgSpr);for(var r=f.getGradeLv(this.item.data.grade),o=this.curArrowListNode.children,i=0;i<o.length;i++)o[i].active=i<r;this.descRichText.string=this.item.getCurMaxSpecialAbilityStr(this.nextItem.data.grade),c.default.CommonUtils.setSpriteFrame(f.getGradeBgByGrade(this.nextItem.data.grade),this.qualitySpr)},i.playDiamonAni=function(t){var e=c.default.ViewManager.uiRoot,n=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),r=(n=e.convertToNodeSpaceAR(n),this.diamondIcon.convertToWorldSpaceAR(cc.Vec2.ZERO));r=e.convertToNodeSpaceAR(r),u.default.instance.playMoneyAni(n,r,l.CostType.diamond,e,t)},i.onToucUpgradeBtn=function(){var t=this.item.getLvCost(this.item.data.lv);d.default.ins.upgradeGrade(this.item.data.uuid)&&(this.closeView(),this.playDiamonAni(t))},o}(s.default),o([v({type:cc.Sprite})],i.prototype,"qualitySpr",void 0),o([v({type:cc.Sprite})],i.prototype,"curItemBgSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"curIconSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"curCostumeTypeSpr",void 0),o([v({type:cc.Node})],i.prototype,"curArrowListNode",void 0),o([v({type:cc.Sprite})],i.prototype,"nextItemBgSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"nextIconSpr",void 0),o([v({type:cc.Sprite})],i.prototype,"nextCostumeTypeSpr",void 0),o([v({type:cc.Node})],i.prototype,"nextArrowListNode",void 0),o([v({type:cc.Label})],i.prototype,"curMaxLvLab",void 0),o([v({type:cc.Label})],i.prototype,"nextMaxLvLab",void 0),o([v({type:cc.Label})],i.prototype,"curMaxRateLab",void 0),o([v({type:cc.Label})],i.prototype,"nextMaxRateLab",void 0),o([v({type:cc.RichText})],i.prototype,"descRichText",void 0),o([v({type:cc.Node})],i.prototype,"bottomNode",void 0),o([v({type:cc.Node})],i.prototype,"costBtnNode",void 0),o([v({type:cc.Label})],i.prototype,"costLabLab",void 0),o([v(cc.Node)],i.prototype,"diamondIcon",void 0),i=o([y],i),a.default=i,cc._RF.pop()},{}],CountDownLab:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e478cffVFRDA6NGIhVKHXgq","CountDownLab");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("LocalizedLabel"),l=cc._decorator,h=l.ccclass,f=l.property,d=(l.menu,l.executeInEditMode);i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).timeBaseStr="",e._time=-1,e.isBref=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this)},i.setEndTime=function(t){this._time=t},i.updateLabel=function(){var t;this.label?this.dataID?(t=s.GameText.getTextByStr(this.dataID),this.timeBaseStr=t||"{0}"):this.timeBaseStr="{0}":cc.error("Failed to update localized label, label component is invalid!")},i.startCount=function(){c.default.TimerManager.doTimer(1e3,0,this.routine,this),this.routine()},i.stopCount=function(){c.default.TimerManager.remove(this.routine,this)},i.onDestroy=function(){c.default.TimerManager.remove(this.routine,this)},i.routine=function(){var t=this._time-c.default.DateUtils.Now();t<0?(t=0,c.default.TimerManager.remove(this.routine,this),this.label.string="00:00:00"):this.label.string=this.timeBaseStr.format(c.default.CommonUtils.getFormatTime(t,this.isBref))},o}(u.default),o([f()],i.prototype,"isBref",void 0),i=o([h,d],i),a.default=i,cc._RF.pop()},{}],CreateCostumeItem:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3f0f55Y6CdNracNa7GFKhAz","CreateCostumeItem");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0});var u=c("App"),l=c("CostumeController"),h=c("ItemBase");s.default=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).saveData=null,e.query=null,e.tempCostume=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.setConfData=function(e){t.prototype.setConfData.call(this,e),this.query=this.parseRule(e.costume.rule)},i.getRuleByKey=function(t){for(var e,n=r(this.data.specialCostume);!(e=n()).done;){var o=e.value;if(o.key==t)return o}},i.getTempCostume=function(){var t,e,n;return this.tempCostume||(n=this.data.costume.costumeId.split("_"),t=parseInt(n[0]),e=n[1]?parseInt(n[1]):1,n=n[2]?parseInt(n[2]):1,this.tempCostume=l.default.ins.getTempCostume(t,e,n)),this.tempCostume},i.parseRule=function(t){for(var e=[],n=t.split("|"),r=n.length,o=0;o<r;o++){var i=n[o].split("_");e.push({weight:parseInt(i[1]),grade:parseInt(i[0])})}return e},i.use=function(t){void 0===t&&(t=1);var e=[],n=l.default.ins;t:for(var o=0;o<t;o++){var i=this.query,a=this.data.costume,c=this.data.specialCostume;if(c&&c.length)for(var s=c.length,h=0;h<s;h++){var f=c[h],d=this.saveData.specialData[f.key];if((isNaN(d)?this.saveData.specialData[f.key]=1:++this.saveData.specialData[f.key])>=f.cnt){this.saveData.specialData[f.key]=0,d=Object.values(l.default.ins.getModel().costumeCfg),d=u.default.RandomUtils.randomArray(d),e.push(n.createNewCostume(d.idx,f.grade,1,!1));continue t}}var p=null;if(a.costumeId){var y=a.costumeId.split("_"),v=parseInt(y[0]),g=y[1]?parseInt(y[1]):1,m=y[2]?parseInt(y[2]):1;p=n.createNewCostume(v,g,m,!1),e.push(p)}else if(this.data.suitcaseUpgrade){var _=this.getGradeByUseCnt();Log.trace("suitcaseUpgrade:",_);var b=Object.values(l.default.ins.getModel().costumeCfg),w=u.default.RandomUtils.randomArray(b);p=n.createNewCostume(w.idx,_.grade,1,!1),e.push(p)}else b=u.default.RandomUtils.randomArrayByWeight(i),Log.trace("query:",i),w=Object.values(l.default.ins.getModel().costumeCfg),w=u.default.RandomUtils.randomArray(w),p=n.createNewCostume(w.idx,b.grade,1,!1),e.push(p);if(c&&c.length)for(var C,S=r(c);!(C=S()).done;){var O=C.value;p.data.grade>=O.grade&&this.saveData.specialData[O.key]&&(this.saveData.specialData[O.key]=0)}this.saveData.useCnt++}return n.checkRedpoint(),e},i.getSpecialRuleCnt=function(t){return t=this.saveData.specialData[t],isNaN(t)?0:t},i.setMemento=function(t){t?(this.saveData=t,this.cnt=t.cnt):(this.cnt=0,this.saveData={cnt:0,useCnt:0,specialData:{}})},i.createMemento=function(){return this.saveData.cnt=this.cnt,this.saveData},i.getCnt=function(){return 1},i.getUseCnt=function(){return isNaN(this.saveData.useCnt)&&(this.saveData.useCnt=0),this.saveData.useCnt},i.getGradeByUseCnt=function(){var t=[{weight:(t=this.getCurSuitcaseUpgradeCfg()).grade_1,grade:1},{weight:t.grade_2,grade:2}];return u.default.RandomUtils.randomArrayByWeight(t)},i.getCurSuitcaseUpgradeCfg=function(){for(var t=this.data.suitcaseUpgrade,e=this.data.suitcaseUpgrade.length,n=t[0],r=1;r<e;r++)if(this.saveData.useCnt<t[r].upgrade_count){n=-1===t[r].upgrade_count?t[r]:t[r-1];break}return n},i.getNextSuitcaseUpgradeCfg=function(){var t=this.getCurSuitcaseUpgradeCfg();return-1===t.upgrade_count?null:this.data.suitcaseUpgrade[t.level]},o}(h.ItemBase),cc._RF.pop()},{}],CsvDataBase:[function(t,e,n){"use strict";cc._RF.push(e,"b5588bgSlxDI485xjFeSMfk","CsvDataBase");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.CsvDataBase=void 0,r.CsvDataBase=function(){function t(){this.id=null}return t.prototype.$parseData=function(t,e,n){for(var r=t.length,o=0;o<r;o++)switch(e[o]){case"int":this[n[o]]=parseInt(t[o]);break;case"float":this[n[o]]=parseFloat(t[o]);break;case"string":this[n[o]]=t[o];break;case"ints":this[n[o]]=t[o].split("|").map(function(t){return parseInt(t)});break;case"floats":this[n[o]]=t[o].split("|").map(function(t){return parseFloat(t)});break;case"strings":this[n[o]]=t[o].split("|")}return t[0]},t}(),cc._RF.pop()},{}],CurrencyService:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"964a1Kx8URK8ZHb7yudaDiv","CurrencyService");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("ControllerConst"),l=a("NotificationConst"),h=a("BaseService"),f=a("MachineService"),d=cc._decorator.ccclass;(a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).mapSaveData=null,e.player=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){o.ins=this},a.init=function(){var t=s.default.ControllerManager.getControllerModel(u.ControllerConst.Game);this.mapSaveData=t.getCurMapData(),this.player=s.default.GameDataMsr.playerInfo},a.desotrySelf=function(){},a.checkMoneyEnough=function(t){return this.mapSaveData.money>=t},a.checkDiamondEnough=function(t){return this.player.diamond>=t},a.diamondChange=function(t){return!(t<0&&this.player.diamond<-t||(this.player.diamond+=t,s.default.NotificationCenter.dispatch(l.NotificationConst.UPDATE_SUPER_CASH,this.player.diamond,t),0))},a.addMoneyByIdle=function(t){this.moneyChange(f.default.ins.calculateIdleMoney(t,!0))},a.getIdleMoney=function(t){return f.default.ins.calculateIdleMoney(t,!0)},a.moneyChange=function(t){return!(t<0&&this.mapSaveData.money<-t||(this.mapSaveData.money+=t,s.default.NotificationCenter.dispatch(l.NotificationConst.UPDATE_MONEY,this.mapSaveData.money,t),0))},i}(h.default)).ins=null,a=o=i([d],a),c.default=a=o,cc._RF.pop()},{}],CustomerAI:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8cf28xsk19KAaFl7sHmmAQ5","CustomerAI");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("GameConst"),l=a("DeskService"),h=a("MapService"),f=a("OrderService"),d=a("RoleService"),p=a("BaseMan"),y=a("Customer"),v=a("OrderDisplay"),g=a("MoveComponent");(a=o=o||{})[a.NONE=0]="NONE",a[a.MOVE_TO_SIT=1]="MOVE_TO_SIT",a[a.SIT_DOWN=2]="SIT_DOWN",a[a.MOVE_TO_EXIT=3]="MOVE_TO_EXIT",a=i([a=cc._decorator.ccclass],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).man=null,e.move=null,e.state=o.NONE,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){this.man=this.getComponent(y.default),this.move=this.getComponent(g.default);var t=s.default.RandomUtils.limit(3e3,5e3);this.man.talkCnt=0,s.default.TimerManager.doTimer(t,1,this.showLang,this)},a.showLang=function(){d.default.ins.showLang(this.node,u.RoleLangType.COSTUMER_ENTER)&&this.man&&(this.man.talkCnt=1)},a.update=function(){if(this.man.state===p.CharactorState.stand)switch(this.state){case o.SIT_DOWN:this.man.isEixt&&(this.state=o.MOVE_TO_EXIT,l.default.ins.empPosList.push(this.man.posData),this.move.moveTo(d.default.ins.exit),this.man.posData=null);break;case o.NONE:this.state=o.MOVE_TO_SIT,this.move.moveTo(this.man.posData.sit.pos);break;case o.MOVE_TO_SIT:this.man.sitDown(),f.default.ins.waitOrderList.push({target:this,cb:this.orderFinish,pos:this.man.posData.staff.pos,direction:this.man.posData.staff.direction}),this.state=o.SIT_DOWN;break;case o.MOVE_TO_EXIT:d.default.ins.customers.remove(this.man),this.man.destroySelf()}},a.orderFinish=function(){var t=f.default.ins.createOrder(),e=f.default.ins.orderPool.pop();e.x=this.node.x+10,e.y=this.node.y+this.node.height+50,h.default.ins.uiLayer.addChild(e);var n=e.addComponent(v.default);t.display=n,t.customer=this.man,n.setData(t);var r=h.default.ins.langLayer.children[0];r&&r.x==this.node.x&&s.default.NodePoolMsr.roleLangPool.push(r)},i}(cc.Component)),c.default=a,cc._RF.pop()},{}],Customer:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"823a9DKztRKzIfixZIS53X6","Customer");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App"),s=o("GameConst"),u=o("GlobalAttr"),l=o("RoleService"),h=o("BaseMan");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).isSit=!1,e.posData=null,e.isEixt=!1,e.order=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.calSpeed()},i.sitDown=function(){this.state=h.CharactorState.sitdown,this.direction=this.posData.sit.direction},i.calSpeed=function(){this.moveSpeed=u.default.ins.customerMoveSpeed},i.exit=function(){this.state=h.CharactorState.stand,this.isEixt=!0,this.talkCnt||l.default.ins.showLang(this.node,s.RoleLangType.COSTUMER_EXIT)},i.destroySelf=function(){this.node.destroy()},i.ranSkin=function(){var t=c.default.RandomUtils.limitInteger(1,24);this.sp.setSkin("cat/Cat"+t)},o}(h.default)),a.default=i,cc._RF.pop()},{}],DailyCountDownLab:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b6c5bslnupI9qRTZ8RT7g9/","DailyCountDownLab");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("LocalizedLabel"),l=cc._decorator,h=l.ccclass,f=(l.menu,l.executeInEditMode),d=0,p=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).timeBaseStr="",e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){if(t.prototype.onLoad.call(this),!d){var e=c.default.DateUtils.getRealTimezone(),n=new Date(new Date(e).toLocaleDateString());n.setTime(n.getTime()+864e5),d=n.getTime()}},i.updateLabel=function(){var t;this.label?this.dataID?(t=s.GameText.getTextByStr(this.dataID),this.timeBaseStr=t||"{0}"):this.timeBaseStr="{0}":cc.error("Failed to update localized label, label component is invalid!")},i.onEnable=function(){c.default.TimerManager.doTimer(1e3,0,this.routine,this),this.routine()},i.onDisable=function(){c.default.TimerManager.remove(this.routine,this)},i.onDestroy=function(){c.default.TimerManager.remove(this.routine,this)},i.routine=function(){var t=c.default.DateUtils.getRealTimezone(),e=d-t;if(e<0){var n=new Date(new Date(t).toLocaleDateString());n.setTime(n.getTime()+864e5),e=(d=n.getTime())-t}this.label.string=this.timeBaseStr.format(c.default.CommonUtils.getFormatBySecond1(e/1e3))},o}(u.default);p=o([h,f],p),a.default=p,cc._RF.pop()},{}],DataGroup:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"be9327DJ1RBCZZH6U1cspAn","DataGroup");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("NodePool"),s=cc._decorator,u=s.ccclass,l=s.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemPool=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setDatas=function(){},i.onLoad=function(){},o}(cc.Component),o([l(c.default)],i.prototype,"itemPool",void 0),i=o([u],i),a.default=i,cc._RF.pop()},{}],DataMsrBase:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"f50bc+OBShGfrPtEFgx0gG9","DataMsrBase");var o=t,i=n,a=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.CsvDataList=i.CsvDataMap=i.CONFIG_FILE_DIR=void 0;var c=o("App");i.CONFIG_FILE_DIR="",i.default=function(){function t(t,e,n){this._class=t,this.csvFileName=e,this.indexKey=n,this.datas={},this.dataCnt=0}var e=t.prototype;return e.loadFile=function(t){return a(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.ResManager.loadInBundle("config",i.CONFIG_FILE_DIR+t,cc.TextAsset);case 3:n=e.sent,o=n.text,cc.assetManager.releaseAsset(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Log.error("\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u51fa\u9519:",t,e.t0);case 11:return e.abrupt("return",o.replace(/\r\n/g,"\n"));case 12:case"end":return e.stop()}},e,null,[[0,8]])}))},e.load=function(){return a(this,void 0,void 0,r().mark(function t(){var e,n,o,i,a,c,s;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadFile(this.csvFileName);case 2:for(e=t.sent.split(/\n/),n=e[0].split(","),e[1].split(","),o=e[2].split(","),i=e.length,a=3;a<i;a++)e[a]&&(c=e[a].split(","),(s=this.datas[c[0]])||(s=new this._class,this.datas[c[0]]=s,this.dataCnt++),s.$parseData(c,n,o));case 7:case"end":return t.stop()}},t,this)}))},e.getAllDatas=function(){return this.datas},e.getData=function(t){return null==(t=this.datas[t])?null:t},t}(),i.CsvDataMap=function(){function t(t,e){void 0===e&&(e=1),this._class=t,this.keyIndex=e,this.datas={},this.id=null,this.dataCnt=0}var e=t.prototype;return e.$parseData=function(t,e,n){var r=this.datas[t[this.keyIndex]];r||(r=new this._class,this.datas[t[this.keyIndex]]=r,this.dataCnt++),r.$parseData(t,e,n)},e.createAwardLevel=function(){},e.getData=function(t){return this.datas[t]},e.getAllData=function(){return this.datas},e.getCount=function(){return this.dataCnt},t}(),i.CsvDataList=function(){function t(t){this._class=t,this.awardLevel=[],this.datas=[],this.id=null,this.dataCnt=0}var e=t.prototype;return e.$parseData=function(t,e,n){var r=new this._class;r.$parseData(t,e,n),this.datas.push(r),this.dataCnt=this.datas.length},e.createAwardLevel=function(){},e.getData=function(t){return this.datas[t]},e.getAllData=function(){return this.datas},e.getCount=function(){return this.dataCnt},t}(),cc._RF.pop()},{}],DateUtils:[function(t,e,n){"use strict";cc._RF.push(e,"f6c95T+7YlM95lckZZpYxym","DateUtils");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.DateUtils=void 0;var i=r("GameText");o.DateUtils=function(){function t(){this.dayTimeSecond=86400,this.paddingTime=0,this._timezoneOffset=0,this.date=new Date}var e=t.prototype;return e.getFormatBySecond=function(t,e){void 0===e&&(e=1);var n="";switch(e){case 1:n=this.getFormatBySecond1(t);break;case 2:n=this.getFormatBySecond2(t);break;case 3:n=this.getFormatBySecond3(t);break;case 4:n=this.getFormatBySecond4(t);break;case 5:n=this.getFormatBySecond5(t);break;case 6:n=this.getFormatBySecond6(t);break;case 7:n=this.getFormatBySecond7(t);break;case 8:n=this.getFormatBySecond8(t);break;case 9:n=this.getFormatBySecond9(t);break;case 10:n=this.getFormatBySecond10(t);break;case 11:n=this.getFormatBySecond11(t)}return n},e.getFormatBySecond1=function(t){void 0===t&&(t=0);var e,n=0==(e=Math.floor(t/3600))?"00":e<10?"0"+e:""+e,r=Math.floor((t-3600*e)/60);return n+":"+(0==r?"00":r<10?"0"+r:""+r)+":"+(0==(e=Math.floor((t-3600*e)%60))?"00":e<10?"0"+e:""+e)},e.getFormatBySecond3=function(t){void 0===t&&(t=0);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60);return(0==n?"00":n<10?"0"+n:""+n)+":"+(0==(e=Math.floor((t-3600*e)%60))?"00":e<10?"0"+e:""+e)},e.getFormatBySecond2=function(t){return(t=new Date(t)).getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.getFormatBySecond4=function(t){var e=Math.floor(t/3600);return 0<e?24<e?0<Math.floor(e/24)?Math.floor(e/24)+i.GameText.getText(52):24+i.GameText.getText(51):0<e?e+i.GameText.getText(51):60+i.GameText.getText(50):0<Math.floor(t/60)?Math.floor(t/60)+i.GameText.getText(50):i.GameText.getText(49)},e.getGameFormatBySecond=function(t){var e="",n=Math.floor(t/86400),r=Math.floor(t%86400/3600),o=Math.floor(t%86400%3600/60),a=Math.ceil(t%60),c=i.GameText.getText(10),s=i.GameText.getText(13);return t=i.GameText.getText(16),0<n?(e=n+i.GameText.getText(6),0!=r&&(e+=r+c),0!=o&&1==n&&(e+=o+s)):0<r?(e=r+c,0!=o&&(e+=o+s)):0<o?(e=o+s,0!=a&&(e+=a+t)):e=a+t,e},e.getFormatBySecond5=function(t){var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),r=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60),a="",c="",s="";return 0<t?0==e?0==n?(a="",0==r?(c="",0==o?"":o<10?"0"+o+i.GameText.getText(16):""+o+i.GameText.getText(16)):(c=""+r+i.GameText.getText(13))+(0==o?"":o<10?"0"+o+i.GameText.getText(16):""+o+i.GameText.getText(16))):(a=n+i.GameText.getText(10),0==r?(c="",s=0==o?"":o<10?"0"+o+i.GameText.getText(16):""+o+i.GameText.getText(16)):c=r<10?"0"+r+i.GameText.getText(13):""+r+i.GameText.getText(13),a+c+s):e+i.GameText.getText(6)+(0==n?"":n<10?"0"+n+i.GameText.getText(10):""+n+i.GameText.getText(10)):""},e.getFormatBySecond6=function(t){return(t=new Date(t)).getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5"},e.getFormatBySecond7=function(t){return(t=new Date(t)).getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},e.getFormatBySecond8=function(t){return(t=new Date(t)).getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate()},e.getFormatBySecond9=function(t){return(t=new Date(t)).getMonth()+1+"."+t.getDate()},e.isLastDay=function(t,e){return!this.isSameDate(1e3*t,1e3*e)},e.getHour=function(t){return Math.floor(t/86400),Math.floor(t%86400/3600)},e.isSameTimePart=function(t,e){return this.getHour(t)/3==this.getHour(e)/3},e.setServerTime=function(){this.paddingTime=0},e.getPaddingTime=function(){return this.paddingTime},e.Now=function(){return Date.now()+this.paddingTime},e.secondNow=function(){return Math.floor((Date.now()+this.paddingTime)/1e3)},e.setTimezoneOffset=function(t){this._timezoneOffset=t},e.getTimezoneOffset=function(){return this._timezoneOffset},e.getTimezoneOffsetPadding=function(){return this._timezoneOffset-this.date.getTimezoneOffset()},e.getRealTimezone=function(){return Date.now()+this.paddingTime-this._timezoneOffset+6e4*this.date.getTimezoneOffset()},e.getTodayStart=function(t){return new Date(new Date(t).toLocaleDateString()).getTime()},e.getTodayEnd=function(t){return t?864e5*Math.ceil(t/864e5)-1+this.paddingTime:new Date((new Date).toLocaleDateString()).getTime()+(864e5-1)+this.paddingTime},e.isSameDay=function(t){return new Date(t).Format("yyyyMMdd")==new Date(this.Now()).Format("yyyyMMdd")},e.isGreaterNow=function(t){return t>this.Now()},e.getDay=function(t){return new Date(t).getDay()},e.isSameDate=function(t,e){var n=new Date(t),r=new Date(e);return n.getFullYear()==r.getFullYear()&&n.getMonth()==r.getMonth()&&n.getDate()==r.getDate()},e.format=function(t,e){void 0===e&&(e="yyyy-MM-dd hh:mm:ss");var n,r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e},e.getFormatBySecond10=function(t){var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),r=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60),i="",a="";return 0<t?0==e?0==n?0==r?(i="",0==o?"":o+"S"):(i=r+"M")+(0==o?"":o+"S"):(0==r?(i="",a=0==o?"":o+"S"):i=r+"M",n+"H"+i+a):e+"D"+(0==n?"":n+"H"):""},e.getFormatBySecond11=function(t){var e=Math.floor(t/86400),n=Math.floor(t%86400/3600),r=Math.floor((t-3600*n)/60),o=Math.floor((t-3600*n)%60),a="",c="",s="";return 0<t?0==e?0==n?(a="",0==r?(c="",0==o?"":""+o+i.GameText.getText(16)):(c=""+r+i.GameText.getText(13))+(0==o?"":""+o+i.GameText.getText(16))):(a=n+i.GameText.getText(10),0==r?(c="",s=0==o?"":""+o+i.GameText.getText(16)):c=""+r+i.GameText.getText(13),a+c+s):e+i.GameText.getText(7)+(0==n?"":""+n+i.GameText.getText(10)):""},t}(),cc._RF.pop()},{}],DebugPlatform:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c5172RuB7BLaobbSq+fsC8p","DebugPlatform");var i=t,a=n,c=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0});var s=i("App"),u=(i("LayerManager"),i("ADManageBase")),l=i("PlatformBase");a.default=function(t){var e,n;function i(){var e;return(e=t.call(this)||this).expressAdNode=null,e._isSignin=!1,void 0===window.versionInfo&&(window.versionInfo={version:"",packVersion:"gm",zipVersion:""}),e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.init=function(){t.prototype.init.call(this),Log.trace("\u5e73\u53f0\u4e3a3---------",cc.sys.platform)},a.initAccountServer=function(){var t=s.default.ConfigManager.getConfig("Server")[this.getServerId()];s.default.ConfigManager.gameConf.serverInfos.game=t.games[0].game,s.default.ConfigManager.gameConf.serverInfos.interface=t.stat,(t=s.default.ConfigManager.getServerCacheInfo())&&(s.default.ConfigManager.gameConf.serverInfos.game=t.game,s.default.ConfigManager.gameConf.serverInfos.interface=t.stat)},a.getServerId=function(){return"test"},a.getChannel=function(){return"test"},a.isShowDebugUI=function(){return!1},a.isAutoShowInteractionAd=function(){return!0},a.showInteractionAd=function(){var t=this;if(!this.expressAdNode){var e=this.expressAdNode=new cc.Node;e.width=cc.winSize.width,e.height=cc.winSize.height,s.default.ViewManager.uiRoot.addChild(this.expressAdNode),this.expressAdNode.zIndex=200;var n=e.addComponent(cc.Graphics);n.fillColor=cc.color(0,0,0,150),n.fillRect(-cc.winSize.width/2,-cc.winSize.height/2,cc.winSize.width,cc.winSize.height),n.fillColor=cc.Color.RED,n.fillRect(-175,-175,350,350);var r=new cc.Node;r.addComponent(cc.Label),e.addChild(r),r.color=cc.Color.YELLOW,r.x=200,r.y=200,this.expressAdNode.addComponent(cc.BlockInputEvents)}var o=5,i=this.expressAdNode.getComponentInChildren(cc.Label);return i.string=o--+"",s.default.TimerManager.doTimer(1e3,5,function(){i.string=o--+""},this,function(){t.expressAdNode.active=!1}),this.expressAdNode.active=!0},a.getAdState=function(){return 2},a.showAD=function(){s.default.NotificationCenter.dispatch(u.AdEvent.SHOW_AD_RESULT,{code:0},!0)},a.isGetRemoteRes=function(){return!1},a.isCanShare=function(){return!0},a.share=function(){s.default.NotificationCenter.dispatch(u.AdEvent.SHOW_AD_RESULT,{code:0},!0)},a.login=function(){return c(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.loginInfo.token?Promise.resolve({code:0,loginKey:this.loginInfo.token}):this.tourist());case 1:case"end":return t.stop()}},t,this)}))},a.clearAndResetGame=function(t){return void 0===t&&(t=!1),c(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&this.saveData(),s.default.SaveManage.clear(),s.default.SaveManage.clearAllItem(),cc.audioEngine.stopAll(),window.location.reload();case 1:case"end":return e.stop()}},e,this)}))},a.buy=function(t){return c(this,void 0,void 0,r().mark(function e(){var n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getProductConfigByPayString(t),e.abrupt("return",(this.playerSpendMoney=n.cost,!0));case 2:case"end":return e.stop()}},e,this)}))},i}(l.default),cc._RF.pop()},{}],DebugTree:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"361ecGWAyBEMI8NSHLImoPG","DebugTree");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.DebugTree=void 0;var a=o("BehaviorTree"),c=o("Tick");i.DebugTree=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(t,e){if(!e)throw"The blackboard parameter is obligatory and must be an instance of b3.Blackboard";var n=new c.default;n.debug=this.debug,n.target=t,n.blackboard=e;var r,o=(n.tree=this).root._execute(n),i=e.get("openNodes",this.id),a=n._openNodes.slice(0),s=0;for(r=0;r<Math.min(i.length,a.length)&&(s=r+1,e.get("openNodes",this.id),i[r]===a[r]);r++);for(r=i.length-1;r>=s;r--)i[r]._close(n);return e.set("openNodes",a,this.id),e.set("nodeCount",n._nodeCount,this.id),o},o}(a.default),cc._RF.pop()},{}],DebugUI:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d636asC+bRCQYF/VzwswIQO","DebugUI");var i,a,c=t,s=n,u=(a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(s,"__esModule",{value:!0}),s.DebugUI=void 0;var l=c("App"),h=c("List"),f=c("BaseView"),d=c("Toast"),p=c("ControllerConst"),y=c("NotificationConst"),v=(c("ViewConst"),c("BagController")),g=c("CostumeController"),m=c("BuffConst"),_=c("BuffMgr"),b=c("MyBigLong"),w=c("CurrencyService"),C=c("MachineService"),S=c("MapService"),O=c("StageUpgradeService"),T=c("GuideModel"),I=cc._decorator,E=I.ccclass,x=I.property;(c=i=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this).toggleBtn=null,e.uiNode=null,e.editBox1=null,e.debugNode=null,e.isMove=!1,e.itemList=null,e.itemDatas=null,e.tempNode=null,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c=a.prototype;return c.initUI=function(){t.prototype.initUI.call(this),this.uiNode=this.node.getChildByName("uiNode"),this.toggleBtn=this.node.getChildByName("toggleBtn").getComponent(cc.Toggle),this.uiNode.active=!1,this.toggleBtn.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},c.onAutoCollection=function(t){l.default.SettingManager.autoCollection=t.isChecked?1:0},c.removeAllPet=function(){},c.onChange=function(){this.uiNode.active=this.toggleBtn.isChecked},c.onTouchMove=function(t){t=this.toggleBtn.node.parent.convertToNodeSpaceAR(t.getLocation()),this.toggleBtn.node.position=t,this.isMove=!0},c.showFps=function(){cc.debug.setDisplayStats(!cc.debug.isDisplayStats())},c.onSaveData=function(){return u(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.default.Platform.saveData();case 1:case"end":return t.stop()}},t)}))},c.showMap=function(){l.default.NotificationCenter.dispatch(i.SHOW_MAP)},c.onChangeIsDrawPhy=function(){},c.clearData=function(){return u(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.default.GameDataMsr.playerInfo.token,n=l.default.GameDataMsr.playerInfo.timestamp,l.default.SaveManage.clear(),l.default.SaveManage.clearAllItem(),l.default.GameDataMsr.playerInfo.token=null,t.t0=e,!t.t0){t.next=11;break}return t.next=8,l.default.Http.post(l.default.ConfigManager.gameConf.serverInfos.interface+"/api/user/file",{api_token:e,file:l.default.StringUtil.zipStr(""),loginTime:n},1);case 8:n=t.sent,n=JSON.parse(n),console.log("======\u6e05\u7406\u5b58\u6863\uff1a",n);case 11:case"end":return t.stop()}},t)}))},c.onSubmitBtn=function(t){var e,n=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox).string;n&&(!(e=n.match(/(-?)(\d+)([a-z]{2}|M|K|T|B)?/))||-1!==(t=["","K","M","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at","au","av","aw","ax","ay","az","ba","bb","bc","bd","be","bf","bg","bh","bi","bj","bk","bl","bm","bn","bo","bp","bq","br","bs","bt","bu","bv","bw","bx","by","bz","ca","cb","cc","cd","ce","cf","cg","ch","ci","cj","ck","cl","cm","cn","co","cp","cq","cr","cs","ct","cu","cv","cw","cx","cy","cz"].indexOf(e[3]))&&(t=b.default.tempNum.init(parseInt(e[2]),3*t),e[1]?w.default.ins.checkMoneyEnough(t.value)?w.default.ins.moneyChange(-t.value):w.default.ins.mapSaveData.money=0:w.default.ins.moneyChange(t.value),l.default.NotificationCenter.dispatch(y.NotificationConst.UPDATE_MONEY)))},c.addSupperBuff=function(t){t=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox);var e=parseInt(t.string)||60;for(var n in m.BuffIndex){var r=parseInt(n);if(!isNaN(parseInt(n))){var o=400;m.BuffIndex.COOK_SPEED===r&&(o=20),_.default.ins.addGlobalBuff({buffIndex:r,buffValue:o,buffEndTime:l.default.DateUtils.Now()+1e3*e})}}},c.addDiamond=function(t){t=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox),t=parseInt(t.string),isNaN(t)||w.default.ins.diamondChange(t)},c.onOpenArchiveonMgrView=function(){l.default.ViewManager.open(5),this.toggleBtn.isChecked=!this.toggleBtn.isChecked,this.onChange()},c.addItem=function(t){var e=t.target.getChildByName("EditBox1").getComponent(cc.EditBox);t=t.target.getChildByName("EditBox2").getComponent(cc.EditBox),e=parseInt(e.string),t=parseInt(t.string),v.default.ins.addItem(e,t)},c.useItem=function(t){var e=t.target.getChildByName("EditBox1").getComponent(cc.EditBox);t=t.target.getChildByName("EditBox2").getComponent(cc.EditBox),e=parseInt(e.string),t=parseInt(t.string),v.default.ins.useItem(e,t)},c.Skiptheboot=function(){l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.SKIN_GUIDE,!0)},c.onTouchSendLog=function(){var t;return u(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.default.EasyLoading.showLoadingByTime(15),e.next=3,Log.getInstance().sendToNative(null===(t=null===(t=l.default.GameDataMsr)||void 0===t?void 0:t.playerInfo)||void 0===t?void 0:t.id);case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}d.default.launch("\u53d1\u9001\u65e5\u5fd7\u6210\u529f!");case 6:l.default.EasyLoading.hideLoading();case 7:case"end":return e.stop()}},e)}))},c.startRecordNodeTouch=function(){this.toggleBtn.isChecked=!this.toggleBtn.isChecked,this.onChange(),l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.START_RECORD)},c.stopRecordNodeTouch=function(){this.toggleBtn.isChecked=!this.toggleBtn.isChecked,this.onChange(),l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.STOP_RECORD)},c.playRecordNodeTouch=function(){this.toggleBtn.isChecked=!this.toggleBtn.isChecked,this.onChange(),l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.PLAY_RECORD)},c.onTouchStartGuideBtn=function(){var t=this.editBox1.string;l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.OPEN_GUIDE,t?parseInt(t):null),this.toggleBtn.isChecked=!this.toggleBtn.isChecked,this.onChange()},c.setGuideStep=function(t){t=t.target.getComponentInChildren(cc.EditBox),t=parseInt(t.string),isNaN(t)||l.default.ControllerManager.applyFunc(p.ControllerConst.Guide,T.GuideConst.SET_STEP,t)},c.hideDebugBtn=function(){this.debugNode.opacity=0},c.showDebugBtn=function(){this.debugNode.opacity=100},c.initItemList=function(){Log.trace("initItemList");var t=Object.values(MaterialController.ins.model.getServiceByType(MaterialType.SCENEITEM).getAllConfig()).filter(function(t){if(!(t.id.toFixed().startsWith("127")||t.id.toFixed().startsWith("12097")||t.id.toFixed().startsWith("12912")||t.id.toFixed().startsWith("12913")||t.id.toFixed().startsWith("12906")||t.id.toFixed().startsWith("12999")||t.id.toFixed().startsWith("12602")))return t.id.toFixed().endsWith("001")||!t.isSynthetic?t:void 0});this.itemDatas=t,this.itemList.numItems=t.length},c.onTouchAddItem=function(t,e){var n=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox),r=parseInt(e),o=parseInt(n.string),i=new MaterialData;i.id=r,i.count=o,i.type=Math.floor(r/1e6),MaterialController.ins.addMaterials([i])},c.showItemList=function(){this.itemList.node.parent.active=!this.itemList.node.parent.active,this.itemList.numItems||this.initItemList()},c.onRenderItem=function(t,e){e=this.itemDatas[e],t.getChildByName("ItemLab").getComponent(cc.RichText).string=e.name+"("+e.id+")"+e.quality;var n=t.getChildByName("AddButton").getComponent(cc.Button);t.getChildByName("icon").getComponent(MaterialShowIcon).setData(e.id,!1),n.clickEvents[0].customEventData=e.id+""},c.closeTimeCheck=function(){localStorage.setItem("TimeCheck","1")},c.openTimeCheck=function(){localStorage.removeItem("TimeCheck")},c.onReStartGame=function(){l.default.Platform.resetGame()},c.onTestNotOrder=function(t){return u(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox),e.next=3,l.default.Http.requestAsync(l.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/midas/not_received_order.php",{token:n.string});case 3:n=e.sent,0===(n=JSON.parse(n)).code&&(o=l.default.Platform.getProductConfigById(n.data[0].gid),console.log("+=========\u672a\u6d88\u8017\u8ba2\u5355: ",n,o));case 6:case"end":return e.stop()}},e)}))},c.onTestRecharge=function(t){return u(this,void 0,void 0,r().mark(function e(){var n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox)).string&&(l.default.Platform.playerSpendMoney=parseInt(n.string));case 2:case"end":return e.stop()}},e)}))},c.onTouchRechargeToggle=function(){this.rechargeToggel.isChecked?(cc.sys.localStorage.setItem("vipTest","vip"),console.log("========\u4e0d\u540c\u6b65\u670d\u52a1\u5668\u5145\u503c\u989d\u5ea6")):(cc.sys.localStorage.removeItem("vipTest"),console.log("========\u540c\u6b65\u670d\u52a1\u5668\u5145\u503c\u989d\u5ea6"))},c.onEnterMap=function(t){t=t.target.parent.getChildByName("EditBox").getComponent(cc.EditBox),Log.trace("box:",t.string),S.default.ins.loadMap(parseInt(t.string),!0)},c.onUnlockAllAbilityType=function(){O.default.ins.unlockAll()},c.addCostume=function(t){var e=t.target.parent.getChildByName("EditBox1").getComponent(cc.EditBox);t=t.target.parent.getChildByName("EditBox2").getComponent(cc.EditBox),e=parseInt(e.string),t=parseInt(t.string),g.default.ins.createNewCostume(e,t)},c.showIdleRate=function(t){return u(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.parent.getChildByName("Label").getComponent(cc.Label),o=C.default.ins.getIdleRate(),n.string=o<1e3?o.toString():b.default.toString(o),l.default.Platform.buy("test");case 2:case"end":return e.stop()}},e)}))},a}(f.default)).className="DebugUI",c.SHOW_MAP="SHOW_MAP",a([x(cc.EditBox)],c.prototype,"editBox1",void 0),a([x(cc.Node)],c.prototype,"debugNode",void 0),a([x({type:h.default})],c.prototype,"itemList",void 0),c=i=a([E],c),s.DebugUI=c=i,cc._RF.pop()},{}],DebugUtils:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"f93b7wXRaRKeZJ7O9ejMBTv","DebugUtils");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.DebugUtils=void 0;var i=new WeakMap,a=function(){};window.CacheTest=a,o.DebugUtils=function(){function t(){this._threshold=.5,this._log=null,this._startTimes={},this._lastTimes={}}var e,n,o=t.prototype;return o.addCache=function(t){i.set(t,new a)},o.checkObj=function(){queryObjects(a)},o.isOpen=function(t){this._isOpen=t},o.start=function(t){this._isOpen&&(delete this._lastTimes[t],this._startTimes[t]=window.performance.now())},o.stop=function(t){var e,n;if(!this._isOpen)return 0;if(!this._startTimes[t])return 0;for(var r=window.performance.now(),o=Math.floor(1e3*(r-this._startTimes[t]))/1e3,i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return o>this._threshold&&(this._lastTimes[t]?(e=Log).trace.apply(e,["DebugUtils",t+": "+o,Math.floor(r-this._lastTimes[t])].concat(a)):(n=Log).trace.apply(n,["DebugUtils",t+": "+o].concat(a)),this._lastTimes[t]=r),o},o.setThreshold=function(t){this._threshold=t},e=t,(n=[{key:"isDebug",get:function(){return this._isOpen}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],Decorators:[function(t,e,n){"use strict";cc._RF.push(e,"4e0e3VBQzhDlJxtek+hYzeR","Decorators");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.Decorators=void 0,(r.Decorators||(r.Decorators={})).AddGetInstance=function(t){t.getInstance=function(){var t;return this._instance||(0==(t=arguments.length)?this._instance=new this:1==t?this._instance=new this(arguments.length<=0?void 0:arguments[0]):2==t?this._instance=new this(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]):3==t?this._instance=new this(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):4==t?this._instance=new this(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]):5==t&&(this._instance=new this(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4]))),this._instance}},cc._RF.pop()},{}],Decorator:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b01bbjnPQhCMKBm5BFTimR6","Decorator");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("BaseNode");i.default=function(t){var e,n;function o(e){var n,r=void 0===e?{}:e,o=r.child,i=void 0===o?null:o,c=r.name,s=void 0===c?"Decorator":c,u=r.title,l=r.properties;return(n=t.call(this,{category:a.DECORATOR,name:s,title:u,properties:l})||this).child=i,n}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o}(c.default),cc._RF.pop()},{}],DesignView:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6914fafd5JMYJm3mv5uK1A8","DesignView");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property,h=s.executeInEditMode,f=s.menu;c([l],(i=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._sprite=null,e._spriteFrame=null,e._prefabFileId="",e._opacity=70,e._offsetX=0,e._offsetY=0,e._showTop=!0,e._designUrl="",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s._updateDesignView=function(t){if(this._spriteFrame!==t){if(this._designUrl=t?t._uuid:"",!this._sprite){var e=new cc.Node("DesignView");this._sprite=e.addComponent(cc.Sprite),e.parent=this.node,e._objFlags|=cc.Object.Flags.DontSave|cc.Object.Flags.LockedInEditor|cc.Object.Flags.HideInHierarchy,this._updateOffset(),this._updateOrder(),this._updateOpatity()}this._sprite.spriteFrame=t,this._spriteFrame=t}},s._updateOffset=function(){if(this._sprite){var t=this._sprite.node;t.x=this._offsetX,t.y=this._offsetY}},s._updateOrder=function(){this._sprite&&(this._sprite.node.zIndex=this._showTop?999:-1)},s._updateOpatity=function(){this._sprite&&(this._sprite.node.opacity=this._opacity)},s.onLoad=function(){},s._isCurPrefab=function(){var t=this.node._prefab;return t&&t.root&&(!this._prefabFileId||this._prefabFileId===t.fileId)},s.onEnable=function(){this._sprite&&(this._sprite.enabled=!0)},s.onDisable=function(){this._sprite&&(this._sprite.enabled=!1)},s.onDestroy=function(){!this._sprite||this._sprite.node._objFlags&cc.Object.Flags.Destroying||this._sprite.node.destroy()},a=i,(c=[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._updateDesignView(t)}},{key:"showTop",get:function(){return this._showTop},set:function(t){this._showTop=t,this._updateOrder()}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity=t,this._updateOpatity()}},{key:"offsetX",get:function(){return this._offsetX},set:function(t){this._offsetX=t,this._updateOffset()}},{key:"offsetY",get:function(){return this._offsetY},set:function(t){this._offsetY=t,this._updateOffset()}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component)).prototype,"_prefabFileId",void 0),c([l],i.prototype,"_opacity",void 0),c([l],i.prototype,"_offsetX",void 0),c([l],i.prototype,"_offsetY",void 0),c([l],i.prototype,"_showTop",void 0),c([l],i.prototype,"_designUrl",void 0),c([l({type:cc.SpriteFrame,displayName:"\u8bbe\u8ba1\u56fe"})],i.prototype,"spriteFrame",null),c([l({type:cc.Boolean,displayName:"\u7f6e\u9876"})],i.prototype,"showTop",null),c([l({type:cc.Integer,displayName:"\u900f\u660e\u5ea6",slide:!0,min:0,max:255})],i.prototype,"opacity",null),c([l({type:cc.Integer,displayName:"X\u504f\u79fb"})],i.prototype,"offsetX",null),c([l({type:cc.Integer,displayName:"Y\u504f\u79fb"})],i.prototype,"offsetY",null),i=c([u,h,f("UI/DesignView")],i),a.default=i,cc._RF.pop()},{}],DeskService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"13e9dnZvD1BNYopLea+RKMU","DeskService");var c,s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0}),l.DeskPosData=l.CarPosData=l.DeskData=void 0;var h=u("PassSectionData"),f=u("TipData"),d=u("GameConst"),p=u("GameUtils"),y=u("BaseService"),v=u("MapService"),g=cc._decorator.ccclass;c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).mapNode=null,e.empPosList=null,e.passSectionDatas=null,e.cookDatas=null,e.carCookDatas=null,e.deskDatas=null,e.carPosData=null,e.stageType=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){c.ins=this},i.hasEmpPos=function(){return 0<this.empPosList.length},i.init=function(){this.stageType=v.default.ins.curCfg.type,this.stageType!==d.StageType.CAR&&this.unlockDesk2()},i.addCookData=function(t){(this.stageType!==d.StageType.CAR||t.order.customer.isReadyReceive?this.cookDatas:this.carCookDatas).push(t)},i.carCookDataFinish=function(t){for(var e=this.carCookDatas.length-1;0<=e;e--)if(this.carCookDatas[e].order.customer===t){var n=this.carCookDatas.splice(e,1)[0];this.cookDatas.push(n)}},i.unlockDesk=function(t){var e;this.deskDatas[t].unlock(),(e=this.empPosList).push.apply(e,this.deskDatas[t].customers)},i.unlockDesk2=function(){this.empPosList.push(this.deskDatas[0].customers.pop())},i.parse=function(t){if(this.cookDatas=[],this.empPosList=[],this.carCookDatas=[],this.passSectionDatas=[],v.default.ins.curCfg.type===d.StageType.CAR){var e=t.getChildByName("DriveFront"),n=e.getChildByName("OrderTrans").position,o=e.getChildByName("valueUpTrans").position,i=this.carPosData=new b,a=i.posData=new w;a.tipAndValueUp=new f.default(o);var c=e.getChildByName("Desk");c?(a.tipAndValueUp.deskNode=c,c.removeFromParent(!1),v.default.ins.layer.addChild(c)):a.tipAndValueUp.deskNode=v.default.ins.uiLayer,i.order=n,i.receiveTrans=[];for(var s,u=e.getChildByName("ReceiveTrans"),l=u.x,y=u.y,g=r(u.children);!(s=g()).done;){var m=s.value.position;m.x+=l,m.y+=y,i.receiveTrans.push(m)}u=e.getChildByName("ReceiveStaffTrans").position,a.staff={pos:u,direction:p.getDirection(u,i.receiveTrans[0])},u=e.getChildByName("StaffTrans").position,i.staffTrans={pos:u,direction:p.getDirection(u,n)},e.destroy()}else{for(var C=t.getChildByName("Desk"),S=C.children.concat(),O=this.deskDatas=[],T=S.length,I=0;I<T;I++){var E=S[I],x=new _;0<I&&E.removeFromParent(!1),x.node=E,x.parse(E),O[I]=x}O[0].showNode(),C.destroy()}var A=t.getChildByName("PassSection"),L=A.getChildByName("Desk");L&&L.removeFromParent(!1);for(var P,M=r(A.children);!(P=M()).done;){var R=P.value,N=new h.default;if(N.passSectionDesk=v.default.ins.uiLayer,N.parse(R),L)for(var D,j=r(L.children);!(D=j()).done;){var F=D.value;if(F.getBoundingBox().contains(N.foodPos)){N.passSectionDesk=F;break}}this.passSectionDatas.push(N)}if(L){for(var B=L.children.length-1;0<=B;B--){var k=L.children[B];k.removeFromParent(!1),v.default.ins.layer.addChild(k)}L.destroy()}A.destroy()},o}(y.default),c=s([g],c),l.default=c;var m=cc.v2(),_=function(){function t(){this.customers=[],this.isUnlock=!1,this.node=null}var e=t.prototype;return e.parse=function(t){for(var e,n=t.x,o=t.y,i=t.getChildByName("Staff"),a=[],c=n+i.x,s=o+i.y,u=r(i.children);!(e=u()).done;){var l=e.value.position;l.x+=c,l.y+=s,a.push({pos:l,direction:0})}i.destroy();var h=t.getChildByName("TipAndValueUp"),d=t.children.filter(function(t){return"Desk"===t.name}),y=[];c=n+h.x,s=o+h.y;for(var g,_=r(h.children);!(g=_()).done;){var b=g.value.position;b.x+=c,b.y+=s;var C=new f.default(b);C.deskNode=v.default.ins.uiLayer,y.push(C);for(var S,O=r(d);!(S=O()).done;){var T=S.value,I=T.getBoundingBox();I.x+=n,I.y+=o,I.contains(b)&&(C.deskNode=T)}}h.destroy();var E=t.getChildByName("Customer");c=n+E.x,s=o+E.y;for(var x,A=r(E.children);!(x=A()).done;){var L=x.value.position;L.x+=c,L.y+=s;var P={pos:L,direction:0},M=new w;M.sit=P,this.customers.push(M);for(var R,N=1e6,D=r(y);!(R=D()).done;){var j=R.value,F=P.pos.sub(j.pos,m).magSqr();N>F&&(M.tipAndValueUp=j,N=F)}P.direction=p.getDirection(P.pos,M.tipAndValueUp.pos),N=1e6;for(var B,k=r(a);!(B=k()).done;){var G=B.value,U=M.sit.pos.sub(G.pos,m).magSqr();N>U&&(N=U,M.staff=G)}M.staff.direction=p.getDirection(M.staff.pos,M.tipAndValueUp.pos)}E.destroy(),this.node.removeFromParent(!1)},e.showNode=function(){for(var t=this.node,e=v.default.ins.layer,n=t.x,r=t.y,o=t.children.length-1;0<=o;o--){var i=t.children[o];i.removeFromParent(!1),e.addChild(i),i.x+=n,i.y+=r}t.destroy(),this.node=null},e.unlock=function(){this.isUnlock=!0,this.showNode()},t}();l.DeskData=_;var b=function(){this.receiveTrans=null,this.order=null,this.staffTrans=null,this.posData=null};l.CarPosData=b;var w=function(){this.sit=null,this.staff=null,this.tipAndValueUp=null};l.DeskPosData=w,cc._RF.pop()},{}],DiamondShopItem:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"439b4nTZJRAuIYcYzLSug41","DiamondShopItem");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.DiamondShopItem=void 0;var u=a("App"),l=a("ShopItem"),h=cc._decorator,f=h.property,d=h.ccclass,p=h.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).title=null,e.diamondNumLab=null,e.extraRateLab=null,e.rateNode=null,e.orginalDiamonLab=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initItem=function(){u.default.CommonUtils.setSpriteFrame(this.data.getDiamondIconUrl(),this.icon),this.data.cfg.rate&&!this.data.buyCnt?(this.extraRateLab.node.active=!0,this.diamondNumLab.string=""+2*this.data.cfg.diamond,this.orginalDiamonLab.string=""+this.data.cfg.diamond):(this.diamondNumLab.string=this.data.cfg.diamond.toString(),this.extraRateLab.node.active=!1,this.rateNode.active=!1,this.orginalDiamonLab.node.active=!1,this.diamondNumLab.node.x=0),this.title.string=this.data.getName(),this.costLab.string=u.default.Platform.getPrice(this.data.cfg.payId)},a.updateItem=function(){this.data.buyCnt&&(this.diamondNumLab.string=this.data.cfg.diamond.toString(),this.extraRateLab.node.active=!1,this.rateNode.active=!1,this.orginalDiamonLab.node.active=!1,this.diamondNumLab.node.x=0)},a.onTouchBuyBtn=function(){var e=Object.create(null,{onTouchBuyBtn:{get:function(){return t.prototype.onTouchBuyBtn}}});return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onTouchBuyBtn.call(this);case 2:this.updateItem();case 3:case"end":return t.stop()}},t,this)}))},i}(l.ShopItem),i([f(cc.Label)],a.prototype,"title",void 0),i([f(cc.Label)],a.prototype,"diamondNumLab",void 0),i([f(cc.Label)],a.prototype,"extraRateLab",void 0),i([f(cc.Node)],a.prototype,"rateNode",void 0),i([f(cc.Label)],a.prototype,"orginalDiamonLab",void 0),a=i([d,p("view/Shop/item/DiamondShopItem")],a),c.DiamondShopItem=a,cc._RF.pop()},{}],Draggable:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b5a2dT3vM1A/6RZDwy2SPmb","Draggable");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),c.DragEventType=void 0;var s=a("App"),u=cc._decorator,l=u.ccclass;u.menu,(a=o=c.DragEventType||(c.DragEventType={})).DRAG_START="DRAG_START",a.DRAGING="DRAGING",a.DRAGING_IN="DRAGING_IN",a.DRAGING_OUT="DRAGING_OUT",a.DROP="DROP",a.CANCEL="CANCEL",a.DRAG_END="DRAG_END",a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).delegate={onDragStart:function(){return null},onDragEnd:function(){return null},onDragDone:function(){return null},prepareDrag:function(){return{dragingData:null,dragingNode:null}}},e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.start=function(){},a.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},a.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},a.setDelegate=function(t){this.delegate=t},a.onDragDone=function(t,e){this.delegate.onDragDone&&this.delegate.onDragDone(this.dragingData,e)},a.onTouchStart=function(t){var e=this.delegate.prepareDrag();e&&(this.dragingData=e.dragingData,this.dragingNode=e.dragingNode,this.node.emit(o.DRAG_START,this,this.dragingData),(e=s.default.ViewManager.uiRoot).emit(o.DRAG_START,this,this.dragingData),e.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),e.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!0),e.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!0),this.delegate.onDragStart(this.dragingData),this.dragingNode&&(this.dragingNode.position=e.convertToNodeSpaceAR(t.getLocation()),e.addChild(this.dragingNode)))},a.onTouchMove=function(t){var e;this.node.emit(o.DRAGING,this,this.dragingData),this.dragingNode&&(e=s.default.ViewManager.uiRoot,this.dragingNode.position=e.convertToNodeSpaceAR(t.getLocation()))},a.onTouchEnd=function(t){this.delegate.onDragEnd&&this.delegate.onDragEnd(this.dragingData),this.dragingNode&&this.dragingNode.removeFromParent(),this.node.emit(o.DRAG_END,this,this.dragingData),s.default.ViewManager.uiRoot.emit(o.DRAG_END,this,this.dragingData,t),s.default.ViewManager.uiRoot.targetOff(this)},i}(cc.Component),a=i([l],a),c.default=a,cc._RF.pop()},{}],Droppable:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d6983+AYmNN0aTLQYQ8MTf6","Droppable");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("Draggable"),u=cc._decorator,l=u.ccclass;u.menu,i=o([l],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).canDrop=!1,e.delegate={checkCanDrop:function(){return!0},onDragIn:function(){return null},onDragOut:function(){return null},onDrop:function(){return null},onDropCancel:function(){return null},onDropEnd:function(){return null}},e.isDragingIn=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.start=function(){},i.onEnable=function(){c.default.ViewManager.uiRoot.on(s.DragEventType.DRAG_START,this.onDragStart,this),c.default.ViewManager.uiRoot.on(s.DragEventType.DRAG_END,this.onDragEnd,this)},i.onDisable=function(){c.default.ViewManager.uiRoot.off(s.DragEventType.DRAG_START,this.onDragStart,this),c.default.ViewManager.uiRoot.off(s.DragEventType.DRAG_END,this.onDragEnd,this)},i.setTouchNode=function(){c.default.ViewManager.uiRoot.off(s.DragEventType.DRAG_START,this.onDragStart,this),c.default.ViewManager.uiRoot.off(s.DragEventType.DRAG_END,this.onDragEnd,this),c.default.ViewManager.uiRoot.on(s.DragEventType.DRAG_START,this.onDragStart,this),c.default.ViewManager.uiRoot.on(s.DragEventType.DRAG_END,this.onDragEnd,this)},i.setDelegate=function(t){this.delegate=t},i.onDragStart=function(t,e){t.node!=this.node&&(this.dragingSource=t,this.dragingData=e,c.default.ViewManager.uiRoot.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.canDrop=this.delegate.checkCanDrop(this.dragingSource,this.dragingData))},i.onDragEnd=function(t,e,n){c.default.ViewManager.uiRoot.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),(n=this.node.getBoundingBoxToWorld().contains(n.getLocation()))&&this.isDragingIn&&this.canDrop?(this.delegate.onDrop&&this.delegate.onDrop(this.dragingSource,this.dragingData),this.node.emit(s.DragEventType.DROP,this,this.dragingData),t.onDragDone(e,this)):n||(this.delegate.onDropCancel&&this.delegate.onDropCancel(this.dragingSource,this.dragingData),this.node.emit(s.DragEventType.CANCEL,this,this.dragingData)),this.canDrop&&(this.delegate.onDropEnd&&this.delegate.onDropEnd(this.dragingSource,this.dragingData),this.node.emit(s.DragEventType.DRAG_END,this,this.dragingData)),this.isDragingIn=!1,this.dragingData=null,this.dragingSource=null,this.canDrop=!1},i.onTouchMove=function(t){(t=this.node.getBoundingBoxToWorld().contains(t.getLocation()))?this.canDrop&&(this.isDragingIn?this.node.emit(s.DragEventType.DRAGING,this,this.dragingData):(this.isDragingIn=!0,this.delegate.onDragIn&&this.delegate.onDragIn(this.dragingSource,this.dragingData),this.node.emit(s.DragEventType.DRAGING_IN,this,this.dragingData))):!t&&this.isDragingIn&&this.canDrop&&(this.isDragingIn=!1,this.delegate.onDragOut&&this.delegate.onDragOut(this.dragingSource,this.dragingData),this.node.emit(s.DragEventType.DRAGING_OUT,this,this.dragingData))},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],DybAd:[function(t,e,n){"use strict";cc._RF.push(e,"6eed9tR1DpBtoYx/qQLaN7a","DybAd");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.DybAd=void 0;var i=r("GameText"),a=r("Toast");r("ADManageBase"),o.DybAd=function(){function t(t){this.dybSdk=window.dyb,this.onLoadAdComplete=null,this.onLoadAdFail=null,this.adState=0,this.id=t}var e=t.prototype;return e.init=function(){this.initAd()},e.initAd=function(){console.log("adUnitId:",this.id),this.adState=2},e.load=function(){this.onLoadAdComplete()},e.show=function(){var t=this;this.dybSdk.createVideoAd(this.id,function(e){console.log(JSON.stringify(e),"createRewardedVideoAd");var n={code:1};"close"==e.state&&e.isEnded?(n.code=0,console.log("//\u89c6\u9891\u5b8c\u6574\u770b\u5b8c\uff0c\u8fdb\u884c\u53d1\u9001\u5956\u52b1")):console.log("//\u89c6\u9891\u6ca1\u770b\u5b8c"),t.onShowAdComplete(n),"error"==e.state&&a.default.launch(i.GameText.getText(62))})},t}(),cc._RF.pop()},{}],DybSdk:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,o)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,o,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"a4b06xt/MpHIr3pqR7JS9KX","DybSdk");var c=t,s=n,u=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.DybSdk=void 0;var l=c("App");s.DybSdk=function(){function t(){this.dybSdk=window.dyb,this.receivedOrders={},this.localOrder={},this.localSaveKey="DybSdk",this.getDybUserInfo();var t=cc.sys.localStorage.getItem(this.localSaveKey);t&&(this.localOrder=JSON.parse(t))}var e=t.prototype;return e.getDybUserInfo=function(){var t=this;return new Promise(function(e){t.openId&&e(t.openId),t.dybSdk.getDybUserInfo(function(n){t.openId=n.user.openid,e(t.openId)})})},e.createRole=function(){var t={role_name:""+l.default.GameDataMsr.playerInfo.id,server_id:1,server_name:"\u670d\u52a1\u5668"};this.dybSdk.createRole(t)},e.gameLevel=function(t,e){this.dybSdk.gameLevel(t,e)},e.submitOrder=function(t){var e=this;return new Promise(function(n){e.dybSdk.submitOrder(t,function(t){console.log("\u751f\u6210\u8ba2\u5355:"+JSON.stringify(t),t.code),n(1===t.code)})})},e.buy=function(t){return u(this,void 0,void 0,a().mark(function e(){var n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localOrder[t.payId],!e.t0){e.next=6;break}if(e.t1=this.receivedOrders[t.payId],e.t1){e.next=6;break}return e.next=6,this.getNotReceivedOrder(t.payId,0,0);case 6:if(this.deletAbnomalOrder(t.payId),e.t2=this.receivedOrders[t.payId],!e.t2){e.next=12;break}return e.next=11,this.consumeOrder(t.payId);case 11:e.t2=e.sent;case 12:if(!e.t2){e.next=14;break}return e.abrupt("return",!0);case 14:return e.next=16,this.createOrder(t);case 16:if(!(n=e.sent)){e.next=33;break}return r={pay_amount:t.cost,extra_info:"",goods_name:t.goods_name,redirect_uri:n.notify_moyang_midas,role_name:""+l.default.GameDataMsr.playerInfo.id,server_name:"\u65e0",order_sn:n.pay_order_id},e.next=21,this.submitOrder(r);case 21:if(!e.sent){e.next=33;break}return this.addAbnomalOrder(t.payId,r.order_sn),e.next=25,l.default.TimerManager.sleep(3e3);case 25:return e.next=27,this.getNotReceivedOrder(t.payId);case 27:if(!this.receivedOrders[t.payId]){e.next=32;break}return e.next=30,this.consumeOrder(t.payId);case 30:return o=e.sent,e.abrupt("return",(this.deletAbnomalOrder(t.payId),o));case 32:case 33:return e.abrupt("return",!1);case 34:case"end":return e.stop()}},e,this)}))},e.addAbnomalOrder=function(t,e){this.localOrder[t]=e,cc.sys.localStorage.setItem(this.localSaveKey,JSON.stringify(this.localOrder))},e.deletAbnomalOrder=function(t){this.localOrder[t]&&(this.localOrder[t]=null,cc.sys.localStorage.setItem(this.localSaveKey,JSON.stringify(this.localOrder)))},e.createOrder=function(t){return u(this,void 0,void 0,a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.Http.post(l.default.ConfigManager.gameConf.serverInfos.interface+"/api/purchase/create",{api_token:l.default.GameDataMsr.playerInfo.token,goods:t.payId,count:1,amount:t.cost,desc:t.goods_name,body:t.desc},3,3e3);case 2:return n=e.sent,n=JSON.parse(n),e.abrupt("return",n&&0===n.code?n.data:null);case 5:case"end":return e.stop()}},e)}))},e.getNotReceivedOrder=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=5),void 0===n&&(n=2e3),u(this,void 0,void 0,a().mark(function o(){var i,c,s,u,h;return a().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.default.Http.requestAsync(l.default.ConfigManager.gameConf.serverInfos.interface+"/api/purchase/paid_orders",{api_token:l.default.GameDataMsr.playerInfo.token},"GET",n);case 2:if(!(i=o.sent)){o.next=12;break}if(!((c=JSON.parse(i))&&0==c.code&&c.data&&c.data.length)){o.next=12;break}for(this.receivedOrders={},s=r(c.data);!(u=s()).done;)h=u.value,this.receivedOrders[h.goods]=h;if(t){o.next=10;break}return o.abrupt("return");case 10:if(!this.receivedOrders[t]){o.next=12;break}return o.abrupt("return");case 12:if(!(e<=0)){o.next=14;break}return o.abrupt("return",null);case 14:return e--,o.next=17,l.default.TimerManager.sleep(n);case 17:o.next=0;break;case 19:case"end":return o.stop()}},o,this)}))},e.consumeOrder=function(t,e,n){return void 0===e&&(e=5),void 0===n&&(n=2e3),u(this,void 0,void 0,a().mark(function r(){var o,i,c;return a().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this.receivedOrders[t]){r.next=3;break}return r.abrupt("return",!1);case 3:return r.next=5,l.default.Http.requestAsync(l.default.ConfigManager.gameConf.serverInfos.interface+"/api/purchase/confirm/"+o.id,{api_token:l.default.GameDataMsr.playerInfo.token,oid:o.id},"GET",n);case 5:if(!(i=r.sent)){r.next=10;break}if(!(c=JSON.parse(i))||0!==c.code){r.next=10;break}return r.abrupt("return",!(this.receivedOrders[t]=null));case 10:if(!(e<=0)){r.next=12;break}return r.abrupt("return",null);case 12:return e--,r.next=15,l.default.TimerManager.sleep(n);case 15:r.next=3;break;case 17:case"end":return r.stop()}},r,this)}))},e.dot=function(t){this.dybSdk.dot(t)},e.subscribeMsg=function(t){this.dybSdk.subscribeMsg(t)},t}(),cc._RF.pop()},{}],EasyLoading:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"9b22fj3g5dKg6x19q5waoox","EasyLoading");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.EasyLoading=void 0;var c=i("App"),s=cc._decorator,u=s.ccclass,l=s.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).tween=null,e.loadReel=null,e.bg=null,e.touchNode=null,e.count=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.tween=cc.tween(this.loadReel).by(2,{angle:360}).repeatForever(),this.node.active=!1,cc.game.addPersistRootNode(this.node),(c.default.EasyLoading=this).count=0},i.init=function(){},i.showLoading=function(t){void 0===t&&(t=!0),this.count++,this.node.active=!0,t?(this.tween.start(),this.loadReel.active=!0,this.bg.enabled=!0):(this.loadReel.active=!1,this.bg.enabled=!1)},i.showLoadingByTime=function(t,e,n,r){var o=this;void 0===t&&(t=0),void 0===r&&(r=!0),this.showLoading(r),c.default.TimerManager.doTimer(1e3,t,this.loadingByTimeUpdate,this,function(){e&&e.apply(n),o.hideLoadingByTime()})},i.hideLoading=function(){this.count--,this.count<=0&&(this.count=0,this.loadReel.stopAllActions(),this.node.active=!1,c.default.TimerManager.remove(this.loadingByTimeUpdate,this))},i.hideLoadingByTime=function(){this.hideLoading()},i.loadingByTimeUpdate=function(){},i.showLoadingTouchEnd=function(t){t&&(this.count++,this.node.active=!0,this.loadReel.active=!1,this.bg.enabled=!1,this.callBack=t,this.touchNode.on(cc.Node.EventType.TOUCH_START,this.callBack,this))},i.hideLoadingTouchEnd=function(){this.count--,this.count<=0&&(this.count=0,this.loadReel.stopAllActions(),this.node.active=!1,c.default.TimerManager.remove(this.loadingByTimeUpdate,this)),this.callBack&&(this.touchNode.off(cc.Node.EventType.TOUCH_START,this.callBack,this),this.callBack=null)},o}(cc.Component),o([l(cc.Node)],i.prototype,"loadReel",void 0),o([l(cc.Sprite)],i.prototype,"bg",void 0),o([l(cc.Node)],i.prototype,"touchNode",void 0),i=o([u],i),a.EasyLoading=i,cc._RF.pop()},{}],EffectUtils:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"ff50crhtq9DV4V3Q+o0h5Vw","EffectUtils");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("MoneyAni"),u=a("OpenSysAni"),l=(a("LayerManager"),a("BagController")),h=a("App"),f=a("NodePool"),d=a("QueueExecutor");(a={})[a.Score=0]="Score";var p=cc._decorator,y=p.ccclass,v=p.property;a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).queueExecutor=null,e.openSysAniPrefab=null,e.openSysAni=null,e.moneyAniPre=null,e.moneyAniPool=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){this.queueExecutor=new d.QueueExecutor,(o.instance=this).moneyAniPool=new f.default,this.moneyAniPool.prefab=this.moneyAniPre},a.playLockAni=function(t){var e=this;this.queueExecutor.regist(function(){var n=e.openSysAni;n||(e.openSysAni=n=cc.instantiate(e.openSysAniPrefab)),n.parent||(h.default.ViewManager.uiRoot.addChild(n),n.zIndex=100),n.getComponent(u.default).play(t)},this)},a.coinEffect1=function(t,e,n,r,o,i,a,c){var s=this;void 0===o&&(o=0),void 0===a&&(a=7),void 0===c&&(c=45);for(var u=0,l=n/Math.abs(n),f=r/Math.abs(r),d=!1,p=function(p){var y=s.pool.pop();11==Math.floor(o/1e6)?y.getComponent(MoneyIcon).moneyType=o:y.getComponent(cc.Sprite).spriteFrame=s.frames[o],y.x=t,y.y=e,y.active=!1,y.height=y.width=c,v=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2)),Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2)),g=cc.v2(t+200*l,e-300*f),cc.v2((g.x+n)/2,(g.y+r)/2),cc.tween(y).delay(u).set({active:!0}).to(v/1e3,{x:n,y:r},{easing:cc.easing.quadOut}).delay(.01).call(function(){s.pool.push(y),p==a-1&&s.queueExecutor.finishFunc(),d||(d=!0,h.default.SoundManager.playEffect("get_coin2"))}).start(),u+=.1,i.addChild(y),y.zIndex=110},y=0;y<a;y++){var v,g;p(y)}},a.coinEffect2=function(t,e,n,r,o,i,a,c){var s=this;void 0===o&&(o=0),void 0===a&&(a=7),void 0===c&&(c=45);for(var u=0,l=n/Math.abs(n),f=r/Math.abs(r),d=!1,p=function(p){var y=s.pool.pop();11==Math.floor(o/1e6)?y.getComponent(MoneyIcon).moneyType=o:y.getComponent(cc.Sprite).spriteFrame=s.frames[o],y.x=t,y.y=e,y.active=!1,y.height=y.width=c,v=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2)),g=cc.v2(t+200*l,e-300*f),m=cc.v2((g.x+n)/2,(g.y+r)/2),cc.tween(y).delay(u).set({active:!0}).bezierTo(v/1200,g,m,cc.v2(n,r)).delay(.01).call(function(){s.pool.push(y),p==a-1&&s.queueExecutor.finishFunc(),d||(d=!0,h.default.SoundManager.playEffect("get_coin2"))}).start(),u+=.1,i.addChild(y),y.zIndex=110},y=0;y<a;y++){var v,g,m;p(y)}},a.coinEffect=function(t,e,n,r,o,i,a,c,s,u){var l=this;void 0===o&&(o=0),void 0===a&&(a=20),void 0===c&&(c=45),void 0===s&&(s=800),void 0===u&&(u=500);var f=0;t-=c/2,e-=c/2;for(var d=!1,p=function(){var a=l.pool.pop();a.getComponent(cc.Sprite).spriteFrame=l.frames[o],v=(.5-Math.random())*s+t,g=(.5-Math.random())*u+e,a.x=t,a.y=e,a.active=!1,a.height=a.width=c,m=Math.sqrt(Math.pow(v-n,2)+Math.pow(g-r,2)),_=1.3*Math.sqrt(Math.pow(t-v,2)+Math.pow(e-g,2)),cc.tween(a).delay(f).set({active:!0}).to(_/1e3,{x:v,y:g},{easing:cc.easing.quadOut}).to(m/1e3,{x:n,y:r},{easing:cc.easing.circIn}).delay(.01).call(function(){l.pool.push(a),d||(d=!0,h.default.SoundManager.playEffect("get_coin2"))}).start(),f+=.01,i.addChild(a),a.zIndex=110},y=0;y<a;y++){var v,g,m,_;p()}},a.typerEffect=function(t,e,n,r,o){void 0===e&&(e=""),void 0===n&&(n=200);var i=0,a=function(){t.string+=e[i++]},c=e.length;return t.string="",h.default.TimerManager.doTimer(n,c,a,o,r,o),a},a.scaleEffect=function(t,e){return void 0===e&&(e=.94),cc.tween(t).to(.5,{scale:e},cc.easeSineInOut()).to(.5,{scale:1},cc.easeSineInOut()).union().repeatForever().start()},a.rotationEffect=function(t,e){return void 0===e&&(e=2),cc.tween(t).by(e,{angle:360}).repeatForever().start()},a.rockObj=function(t,e,n,r){void 0===e&&(e=.08),void 0===n&&(n=5),void 0===r&&(r=.7),cc.tween(t).repeatForever(cc.tween().to(e,{angle:n}).to(2*e,{angle:-n}).to(2*e,{angle:n}).to(2*e,{angle:-n}).to(e,{angle:0}).delay(r)).start()},a.flyObj=function(t,e,n){return void 0===n&&(n=50),cc.tween(t).by(e,{y:n}).by(e,{y:-n}).union().repeatForever().start()},a.playMoneyAni=function(t,e,n,r,o,i){var a=this;void 0===n&&(n=0);var c=this.moneyAniPool.pop(),u=c.getComponent(s.MoneyAni);r.addChild(c),c.zIndex=110,c.position=t,t=Math.sqrt(t.sub(e).magSqr())/900,2e4<n&&(n%=l.CostType.coin),u.playAni(e,n,t,function(){i&&i(),a.moneyAniPool.push(c)},o)},i}(cc.Component),i([v(cc.Prefab)],a.prototype,"openSysAniPrefab",void 0),i([v(cc.Prefab)],a.prototype,"moneyAniPre",void 0),a=o=i([y],a),c.default=a=o,cc._RF.pop()},{}],Erasure:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"db41e5T1ZhA97KoxyQssYWD","Erasure");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property,l=(c.menu,c.executeInEditMode);o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).mask=null,e.invokeEvent=[],e.scrapteRadius=35,e.scrapteArea=.5,e.achieveNum=0,e.pixelNum=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.maskGraphics=this.mask._graphics},i.onEnable=function(){this.getInitNum(),this.pixelNum=0,this.achieveNum=0,this.achieveNum=this.scrapteArea*this.initPixel(),this.node.on(cc.Node.EventType.TOUCH_START,this.onEventStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onEventMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEventEnd,this)},i.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onEventStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onEventMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onEventEnd,this)},i.onEventStart=function(t){this.comFun(this.node.convertToNodeSpaceAR(t.touch.getLocation())),this.checkScrape()},i.onEventMove=function(t){this.comFun(this.node.convertToNodeSpaceAR(t.touch.getLocation())),this.checkScrape()},i.onEventEnd=function(t){this.comFun(this.node.convertToNodeSpaceAR(t.touch.getLocation())),this.checkScrape()},i.addCircle=function(t){var e=this.maskGraphics,n=cc.color(0,0,0,255);e.ellipse(t.x,t.y,this.scrapteRadius+10,this.scrapteRadius+10),e.lineWidth=2,e.fillColor=n,e.fill()},i.checkScrape=function(){this.achieveNum<this.pixelNum&&(cc.Component.EventHandler.emitEvents(this.invokeEvent,this),cc.log("\u5df2\u7ecf\u522e\u5b8c\u56fe\u5c42"),this.mask.enabled=!1)},i.comFun=function(t){this.checkPixelPiont(t),this.addCircle(t)},i.getInitNum=function(){this.pixelNum=0,this.achieveNum=this.scrapteArea*this.initPixel()},i.initPixel=function(){for(var t=this.node.width,e=this.node.height,n=(this.node.width=t)/2,r=(this.node.height=e)/2,o=-r,i=o,a=[],c=2*this.scrapteRadius,s=2*this.scrapteRadius,u=-n;u<=n;u+=c)for(o=i;o<=r;o+=s){var l=[u,o];l.isTouch=!0,a.push(l)}return(this.pixelPiont=a).length},i.checkPixelPiont=function(t){var e,n,r,o=this.pixelPiont;for(r in o)if(e=Math.abs(t.x-o[r][0]),n=Math.abs(t.y-o[r][1]),e<=this.scrapteRadius&&n<=this.scrapteRadius&&o[r].isTouch)return o[r].isTouch=!1,void this.pixelNum++},o}(cc.Component),a([u(cc.Mask)],o.prototype,"mask",void 0),a([u({type:cc.Component.EventHandler})],o.prototype,"invokeEvent",void 0),a([u({})],o.prototype,"scrapteRadius",void 0),a([u({})],o.prototype,"scrapteArea",void 0),o=a([s,l],o),i.default=o,cc._RF.pop()},{}],Failer:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"cd8e4SGDAlAW65pZpehSP0b","Failer");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Action");i.default=function(t){var e,n;function o(){return t.call(this,{name:"Failer"})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(){return a.FAILURE},o}(c.default),cc._RF.pop()},{}],GameConst:[function(t,e,n){"use strict";cc._RF.push(e,"fad6fLe7hBA1ZSmFO878aU2","GameConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.RoleLangType=o.RoleType=o.CongratulationType=o.CongratulationData=o.BundleType=o.StageType=o.MachineType=o.EmMapType=o.GameNotificationConst=o.GameConst=void 0,(r=o.GameConst||(o.GameConst={}))[r.OPEN_FINISH=0]="OPEN_FINISH",r[r.GAME_INIT=1]="GAME_INIT",r[r.SAVE_DAVE=2]="SAVE_DAVE",r[r.GET_IDLE=3]="GET_IDLE",r[r.ENTER_FB_MAP=4]="ENTER_FB_MAP",r[r.EXIT_FB_MAP=5]="EXIT_FB_MAP";var i=function(){};(o.GameNotificationConst=i).UNLOCK_LEVEL="UNLOCK_LEVEL",i.USE_ITEM="USE_ITEM",i.ADD_ITEM="ADD_ITEM",i.UpdateInteractiveStorage="UpdateInteractiveStorage",i.BUY_SUCCESS="BUY_SUCCESS",i.UNLOCK_MACHINE="UNLOCK_MACHINE",i.UNLOCK_SLOT="UNLOCK_SLOT",i.UPDATE_BUFF="UPDATE_BUFF",i.UPDATE_EQUIP_COSTUME_ATTR="UPDATE_EQUIP_COSTUME_ATTR",i.EQUIP_COSTUME="EQUIP_COSTUME",i.UNEQUIP_COSTUME="UNEQUIP_COSTUME",i.LV_UP_COSTUME="LV_UP_COSTUME",i.REFUND_COSTUME="REFUND_COSTUME",i.MERGE_COSTUME="MERGE_COSTUME",(r=o.EmMapType||(o.EmMapType={}))[r.MAIN=0]="MAIN",r[r.FB=1]="FB",(r=o.MachineType||(o.MachineType={}))[r.type1=1]="type1",r[r.type2=2]="type2",(r=o.StageType||(o.StageType={}))[r.WAITER=1]="WAITER",r[r.WAITER_CHEF=2]="WAITER_CHEF",r[r.CAR=3]="CAR",(o.BundleType||(o.BundleType={})).MAP_ICON="map_icon_1",o.CongratulationData=function(){return function(){}}(),(r=o.CongratulationType||(o.CongratulationType={}))[r.NONE=0]="NONE",r[r.Pass=1]="Pass",r[r.BUFF=2]="BUFF",(r=o.RoleType||(o.RoleType={}))[r.CUSTOMER=0]="CUSTOMER",r[r.WORKER=1]="WORKER",(o=o.RoleLangType||(o.RoleLangType={}))[o.COSTUMER_ENTER=0]="COSTUMER_ENTER",o[o.COSTUMER_EXIT=1]="COSTUMER_EXIT",o[o.WALK_UP=2]="WALK_UP",o[o.ORDER_FINISH=3]="ORDER_FINISH",o[o.MACHINE_FINISH=4]="MACHINE_FINISH",o[o.OPEN_BOX=5]="OPEN_BOX",cc._RF.pop()},{}],GameController:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a482e1uLzNKhKpeDMAaDaKy","GameController");var a=t,c=n,s=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("GameText"),h=a("BaseController"),f=a("ViewManager"),d=a("QueueExecutor"),p=a("ControllerConst"),y=a("NotificationConst"),v=(a("ViewConst"),a("LayerManager"),a("SoundEffectConst")),g=(a("ADController"),a("ADManageBase"),a("BagController")),m=a("GuideController"),_=a("TipView"),b=a("BuffMgr"),w=a("GameConst"),C=a("GameModel"),S=a("GlobalAttr"),O=a("CurrencyService"),T=a("MachineService"),I=a("MapService"),E=a("GameUIView"),x=a("GameView"),A=a("HelperCatInfoView"),L=a("InviteHelperCatView");c.default=function(t){var e,n;function a(){var e;return(e=t.call(this)||this).gameView=null,e.gameScene=null,e.nextSaveTime=Date.now()+3e4,e._model=null,e.gameConf=null,e.curViewId=null,u.default.ViewManager.register(19,{prefabName:"StageUpgradeView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(21,{prefabName:"StageUpgradeTipView",zIndex:50,controller:o(e),isNotShowLoad:!0,dir:"gameUI"}),u.default.ViewManager.register(20,{prefabName:"SwitchMapView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(8,{prefabName:"SettingView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(22,{prefabName:"AbilityView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(17,{prefabName:"IdleView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(31,{prefabName:"CongratulationView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(38,{prefabName:"GameLoadingView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register(54,{prefabName:"WorldMapView",zIndex:100,controller:o(e),dir:"gameUI"}),u.default.ViewManager.register1(A.default.VIEW_INFO,o(e)),u.default.ViewManager.register1(L.default.VIEW_INFO,o(e)),u.default.ViewManager.register1(x.default.VIEW_INFO,o(e)),u.default.ViewManager.register1(E.default.VIEW_INFO,o(e)),e.setModel(new C.default(o(e))),e.initModuleEvent(),e.initProtocolEvents(),u.default.NotificationCenter.addListener(y.NotificationConst.INIT_GAME,e.initGame,o(e),100),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var c=a.prototype;return c.destroy=function(){t.prototype.destroy.call(this)},c.initModuleEvent=function(){this.registerFunc(w.GameConst.GET_IDLE,this.getIdle,this),this.registerFunc(w.GameConst.ENTER_FB_MAP,this.onEnterFBMap,this),this.registerFunc(w.GameConst.EXIT_FB_MAP,this.onExitFBMap,this)},c.initProtocolEvents=function(){u.default.NotificationCenter.addListener(f.ViewManagerEvent.VIEW_IS_CLOSE,this.onViewClose,this),u.default.NotificationCenter.addListener(y.NotificationConst.ADD_OPEN_VIEW,this.onAddView,this),u.default.NotificationCenter.addListener(y.NotificationConst.PLAY_MONEY_ANI,this.onPlayGetMoneyAni,this),u.default.NotificationCenter.addListener(y.NotificationConst.MACHINE_UPDATE,this.onUpdateProgress,this),u.default.NotificationCenter.addListener(y.NotificationConst.ENTER_MAP,this.onEnterMap,this)},c.onUpdateIntegral=function(){},c.initGame=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._model.init(),this.queueExecutor=new d.QueueExecutor,u.default.Platform.isShowDebugUI()&&u.default.ViewManager.open(6),u.default.NotificationCenter.removeListener(y.NotificationConst.INIT_GAME,this.initGame,this),this.gameConf=u.default.ConfigManager.gameConf.game,this.gameScene=u.default.SceneManager.getCurrScene(),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onShow,this),b.default.ins=new b.default,u.default.NotificationCenter.dispatch(y.NotificationConst.INIT_GAME_FINISH),t.next=12,I.default.ins.loadMap(this._model.getCurMapData().curId);case 12:u.default.ViewManager.open(4),this.registerFunc(w.GameConst.SAVE_DAVE,this.saveToServe,this),this.nextSaveTime=Date.now()+18e4,u.default.TimerManager.doTimer(2e3,0,this.routine,this),u.default.SoundManager.playBg(v.SoundsDefine.BG_GROUND),this.checkIdle();case 18:case"end":return t.stop()}},t,this)}))},c.onHide=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._model.setIdleTime(),this.saveToServe(),u.default.SoundManager.stopBg(),cc.director.pause();case 1:case"end":return t.stop()}},t,this)}))},c.onShow=function(){return s(this,void 0,void 0,r().mark(function t(){var e=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:cc.director.resume(),u.default.SoundManager.playBg(v.SoundsDefine.BG_GROUND);case 1:if(u.default.EasyLoading.showLoading(),t.t0=!(300<Math.abs(u.default.DateUtils.secondNow()-this._model.getCurMapData().startIdleTime)),t.t0){t.next=7;break}return t.next=6,u.default.Platform.getServerTime();case 6:t.t0=t.sent;case 7:if(!t.t0){t.next=10;break}return this.nextSaveTime=Date.now()+18e4,u.default.EasyLoading.hideLoading(),u.default.SaveManage.checkIsNeedUpdateData(),this.checkIdle(),u.default.NotificationCenter.dispatch(y.NotificationConst.ON_SHOW),u.default.GameDataMsr.playerInfo.timestamp=Math.floor(u.default.DateUtils.Now()/1e3),u.default.AnalyticMgr.activityLogin(),t.abrupt("break",14);case 10:return t.next=12,new Promise(function(t){u.default.EasyLoading.hideLoading(),u.default.ViewManager.open(14,{curState:_.TIPSTATE.SURE,leftBtnText:l.GameText.getText(17),leftFunc:function(){setTimeout(function(){t()},100)},leftThisObj:e,title:"\u63d0\u793a",tipsStr:l.GameText.getText(54)})});case 12:t.next=1;break;case 14:case"end":return t.stop()}},t,this)}))},c.routine=function(){Date.now()>this.nextSaveTime&&this.saveToServe(),u.default.SaveManage.checkIsNeedUpdateData()},c.saveToServe=function(){u.default.Platform.saveData(),u.default.AnalyticMgr.activityLogout(),this.nextSaveTime=Date.now()+18e4},c.onOpenView=function(t){switch(t.viewId){case 6:break;case 4:this.onUpdateProgress()}},c.onViewClose=function(t){this.curViewId==t&&this.queueExecutor.finishFunc()},c.onEntreStreet=function(){this.queueExecutor.reset()},c.onAddView=function(t,e){var n=this;this.queueExecutor.regist(function(){m.default.isGuide?n.queueExecutor.finishFunc():(n.curViewId=t,e())},this)},c.checkIdle=function(){if(this._model.getCurMapData().startIdleTime){var t,e=u.default.DateUtils.secondNow()-this._model.getCurMapData().startIdleTime;e>S.default.ins.offlineRewardMinTime&&(e>S.default.ins.offlineRewardMaxTime&&(e=S.default.ins.offlineRewardMaxTime),(t=O.default.ins.getIdleMoney(e))&&u.default.ViewManager.open(17,e,t))}},c.getIdle=function(t,e){return void 0===e&&(e=!1),s(this,void 0,void 0,r().mark(function n(){var o;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return n.next=3,u.default.ControllerManager.applyFunc(p.ControllerConst.AD,0,0);case 3:if((o=n.sent)&&0===o.code){n.next=6;break}return n.abrupt("return");case 6:t*=2;case 7:O.default.ins.addMoneyByIdle(t),this._model.getCurMapData().startIdleTime=0,u.default.ViewManager.close(17),this.onPlayGetMoneyAni(g.CostType.coin,O.default.ins.getIdleMoney(t));case 8:case"end":return n.stop()}},n,this)}))},c.onEnterMap=function(){this.onUpdateProgress(),u.default.ViewManager.close(21)},c.onEnterFBMap=function(t){I.default.ins.loadMap(t||this._model.getFBMapData().curId)},c.onExitFBMap=function(t){I.default.ins.loadMap(t||this._model.getMainMapData().curId)},c.onUpdateProgress=function(){var t=u.default.ViewManager.getView(4);t&&t.updateProgress(T.default.ins.getMachinProgress())},c.onPlayGetMoneyAni=function(t,e,n){var r=u.default.ViewManager.getView(4);r&&r.playGetCoinAni(t%20001,e,n)},a}(h.default),cc._RF.pop()},{}],GameDataMsr:[function(t,e,n){"use strict";cc._RF.push(e,"33fd724XbhPNIS8altyx5r0","GameDataMsr");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.GameDataMsr=o.GameDataSaveKey=void 0;var i,a=r("App");(r=i=o.GameDataSaveKey||(o.GameDataSaveKey={})).PLAYER_INFO="PLAYER_INFO",r.AD_AND_SHARE_DATA="AD_AND_SHARE_DATA",r.BAG_DATA="BAG_DATA",r.MAIN_DATA="MAIN_DATA",r.LUCK_DATA="LUCK_DATA",o.GameDataMsr=function(){function t(){this.playerInfo=null,this.gameMainData=null,this.tempData={isSyncDataByServer:!1}}var e=t.prototype;return e.init=function(){a.default.SaveManage.add(a.default.SoundManager,a.default.SoundManager.saveKey,!0,!1),a.default.SaveManage.add(this,i.PLAYER_INFO,!0,!0),a.default.SaveManage.load(i.PLAYER_INFO)},e.loadData=function(){a.default.SaveManage.load(i.AD_AND_SHARE_DATA),a.default.SaveManage.load(i.MAIN_DATA)},e.updateDayData=function(){i.MAIN_DATA},e.createMemento=function(t){switch(t){case i.PLAYER_INFO:return this.playerInfo;case i.MAIN_DATA:}return null},e.setMemento=function(t,e){switch(e){case i.PLAYER_INFO:t?(this.playerInfo=t,isNaN(this.playerInfo.mainTaskCnt)&&(this.playerInfo.mainTaskCnt=0)):this.playerInfo={score:0,finishTaskCnt:0,gold:0,diamond:0,nickName:""+Math.floor(1e5+1e5*Math.random()),head:"",sex:0,id:0,account:"",token:"",timestamp:0,saveTime:0,loginDaynumber:1,registerDaynumber:1,registerTime:Date.now(),mainTaskCnt:0,recharge:0,vipRecharge:0};break;case i.MAIN_DATA:this.gameMainData=t}},t}(),cc._RF.pop()},{}],GameLoadingView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"65a517DEM9EjJ9vYXLCi75Z","GameLoadingView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("BaseView"),l=i("GameConst"),h=cc._decorator,f=h.ccclass,d=h.property;h.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).curIconSpr=null,e.curNameLab=null,e.nextNameLab=null,e.nextIconSpr=null,e.arrowNode=null,e.arrowArray=[],e.arrowTime=.5,e.arrowIndex=0,e.bgType=1,e.closeType=2,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(e){t.prototype.open.call(this);var n=c.default.ConfigManager.getConfig("StageSet")[e];e=c.default.ConfigManager.getConfig("StageSet")[e+1],this.curNameLab.string=s.GameText.getTextByStr(n.stage_name),this.nextNameLab.string=s.GameText.getTextByStr(e.stage_name),c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,"stage/"+n.stage_icon,this.curIconSpr),c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,"stage/"+e.stage_icon,this.nextIconSpr)},i.update=function(t){this.arrowTime-=t,this.arrowTime<=0&&(this.arrowTime=.5,this.arrowIndex++,t=this.arrowIndex%3,this.arrowNode.x=this.arrowArray[t].x,this.arrowNode.y=this.arrowArray[t].y)},o}(u.default),o([d(cc.Sprite)],i.prototype,"curIconSpr",void 0),o([d(cc.Label)],i.prototype,"curNameLab",void 0),o([d(cc.Label)],i.prototype,"nextNameLab",void 0),o([d(cc.Sprite)],i.prototype,"nextIconSpr",void 0),o([d(cc.Node)],i.prototype,"arrowNode",void 0),o([d([cc.Node])],i.prototype,"arrowArray",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],GameModel:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3ffc7AcbhxBqbr9AmY+qAWM","GameModel");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseModel"),u=(i("ControllerConst"),i("GameConst"));a.default=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).data=null,c.default.SaveManage.add(r(n),"GAME_DATA",!1,!0),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.init=function(){c.default.SaveManage.load("GAME_DATA")},a.getCurMapData=function(){return this.data.maps[this.data.curMapType]},a.getFBMapData=function(){return this.data.maps[u.EmMapType.FB]},a.getMainMapData=function(){return this.data.maps[u.EmMapType.MAIN]},a.createMemento=function(){return this.setIdleTime(),this.data},a.resetMapData=function(t){return void 0===t&&(t=-1),this.data.maps[this.data.curMapType]={curId:t,money:c.default.ConfigManager.gameConf.game.originGold,machines:{}},this.data.maps[this.data.curMapType]},a.setMemento=function(t){var e;this.data=t||{maps:(e={},e[u.EmMapType.MAIN]={curId:1,money:c.default.ConfigManager.gameConf.game.originGold,machines:{}},e[u.EmMapType.FB]={curId:10001,money:c.default.ConfigManager.gameConf.game.originGold,machines:{}},e),curMapType:u.EmMapType.MAIN}},a.setIdleTime=function(){this.data.maps[this.data.curMapType].startIdleTime=c.default.DateUtils.secondNow()},i}(s.default),cc._RF.pop()},{}],GamePlatform:[function(t,e,n){"use strict";cc._RF.push(e,"da863FaIW9NJ7AC6Zppmwk8","GamePlatform");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ShareKeyConst=o.GamePlatform=o.WxImgId2=o.WxImg2=o.WxImgId1=o.WechatInviteRandom1ImageURL=o.WechatHelpImageURLId=o.WechatHelpImageURL=o.WechatPreviewImageURLId=o.WechatPreviewImageURL=o.RankInviteImageUrlId=o.RankInviteImageURL=o.RankInviteTitle=o.WechatInvite=void 0;var i=r("App"),a=r("WxMiniGameUtil");o.WechatInvite=11,o.RankInviteTitle="\u4e00\u8d77\u52a0\u5165\u62ef\u6551\u7a7a\u5c9b\u4e4b\u65c5\uff1f",o.RankInviteImageURL="https://wxclient.gzqidong.cn/resource/Upload/resource/1658730380901250732.png",o.RankInviteImageUrlId="GJgQ5fOBQMubGkU/lK02SQ==",o.WechatPreviewImageURL="http://mine.gzqidong.cn/uploads/images/QQ\u56fe\u724720230331174708.jpg",o.WechatPreviewImageURLId="1C5ovAl7THud2O+nTegwzQ==",o.WechatHelpImageURL="https://wxclient.gzqidong.cn/resource/Upload/resource/16587304421140728410.png",o.WechatHelpImageURLId="jdsRgWqrTA+Awya4YGih1g==",o.WechatInviteRandom1ImageURL="http://mine.gzqidong.cn/uploads/images/QQ\u56fe\u724720230331174708.jpg",o.WxImgId1="605ZLNk+RIm5xPHkjtlmTA==",o.WxImg2="https://wxclient.gzqidong.cn/resource/Upload/resource/1675246963653691576.jpg",o.WxImgId2="QSFGUmDpQB65Mu5d1oZFzQ==";var c=function(){function t(){}return t.isWeixinMiniGame=function(){return"undefined"!=typeof wx},t.getServerUID=function(){return i.default.GameDataMsr.playerInfo.id},t.getOpenId=function(){return i.default.GameDataMsr.playerInfo.openid},t.isFriendShare=function(){var t=wx.getLaunchOptionsSync();return!(!t||!t.query||t.query.shareMessageToFriendScene!==o.WechatInvite.toString())||!1},t.onMainSceneLoaded=function(){t.isWeixinMiniGame()&&(wx.getLaunchOptionsSync(),wx.setMessageToFriendQuery({shareMessageToFriendScene:o.WechatInvite}),a.WxMiniGameUtil.tryGetInfo())},t.randomShareData=function(){var t=new Array;return 1==i.default.RandomUtils.limitInteger(0,2)?(t.push(o.WechatInviteRandom1ImageURL),t.push(o.WxImgId1)):(t.push(o.WechatInviteRandom1ImageURL),t.push(o.WxImgId2)),t.push("\u4f60\u79bb\u4ebf\u4e07\u5bcc\u7fc1\uff0c\u53ea\u5dee\u4e00\u5ea7\u91d1\u77ff\uff01"),t},t}();o.GamePlatform=c,o.ShareKeyConst={fur:"fur",bubble:"bubble",shop:"shop",task:"task"},cc._RF.pop()},{}],GameScene:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"89283keENFPerJUJ0cf/RjD","GameScene");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseScene"),u=i("GameText"),l=i("ControllerConst"),h=i("NotificationConst"),f=(i("ViewConst"),i("AdRewardController")),d=i("BagController"),p=i("CostumeController"),y=i("GameController"),v=i("GuideController"),g=i("TipView"),m=i("MailController"),_=i("ShopController"),b=i("SystemOpenController"),w=i("SceneConst"),C=cc._decorator,S=C.ccclass,O=C.property,T=cc.Button.prototype._onTouchEnded;cc.Button.prototype._onTouchEnded=function(t){T.call(this,t),this.isNotPlayClickBtn||(this.isNotOpen?c.default.SoundManager.playEffect("ban"):c.default.SoundManager.playEffect("clickBtn"))},i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).gameViewPrefab=null,e.sceneName=w.SceneTag.GAME,e.nodePoolMsrPrefab=null,e.nodePoolMsr=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onEnter=function(){t.prototype.onEnter.call(this),this.initModule(),cc.game.setFrameRate(60),c.default.NotificationCenter.dispatch(h.NotificationConst.INIT_GAME)},i.onKeyBack=function(){c.default.ViewManager.isShow(15)||c.default.ViewManager.open(14,{curState:g.TIPSTATE.SURE,leftBtnText:u.GameText.getText(17),hasCloseBtn:!0,leftFunc:function(){c.default.Platform.saveData(),Log.trace("\u9000\u51fa\u6e38\u620f"),c.default.Platform.exitGame()},leftThisObj:this,tipsStr:u.GameText.getText(55)})},i.start=function(){t.prototype.start.call(this)},i.onTouchTest=function(){c.default.ViewManager.open(7)},i.initModule=function(){c.default.ControllerManager.register(l.ControllerConst.Game,y.default),c.default.ControllerManager.register(l.ControllerConst.Item,d.default),c.default.ControllerManager.register(l.ControllerConst.Costume,p.default),c.default.ControllerManager.register(l.ControllerConst.Guide,v.default),c.default.ControllerManager.register(l.ControllerConst.SystemOpen,b.default),c.default.ControllerManager.register(l.ControllerConst.Shop,_.default),c.default.ControllerManager.register(l.ControllerConst.AdReward,f.default),c.default.ControllerManager.register(l.ControllerConst.Mail,m.MailController)},i.update=function(t){this.timerManager.onEnterFrame(t)},i.backToStartScene=function(){},o}(s.default),o([O(cc.Prefab)],i.prototype,"gameViewPrefab",void 0),o([O(cc.Prefab)],i.prototype,"nodePoolMsrPrefab",void 0),i=o([S],i),a.default=i,cc._RF.pop()},{}],GameText:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"173f712LQxKHK1ZSrWBOOF0","GameText");var o=t,i=n,a=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.GameText=i.langKeyMap=i.langArr=i.LangEnum=void 0;var c=o("App");(o=i.LangEnum||(i.LangEnum={}))[o.zh_cn=0]="zh_cn",o[o.zh_TW=1]="zh_TW",o[o.en=2]="en",o[o.es=3]="es",o[o.pt=4]="pt",i.langArr=["zh_CN","zh_TW","en","es","pt","tr"],i.langKeyMap={"zh-Hans":"zh_CN","zh-Hans-CN":"zh_CN","zh-Hant-CN":"zh_TW","zh-Hant":"zh_TW","zh-HK":"zh_TW"},function(t){var e;t.curLang="0";var n={},o=!1;function i(t){return c.default.ResManager.loadInBundle("config",t)}t.setLang=function(t){cc.sys.localStorage.setItem("lang",t)},t.init=function(){return a(this,void 0,void 0,r().mark(function a(){var s,u,l,h;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o){r.next=13;break}return o=!0,cc.sys.platform,cc.sys.WECHAT_GAME,s=cc.sys.localStorage.getItem("lang"),t.curLang=s||c.default.Platform.getDefaultLang(),r.next=6,i("language/lang_"+t.curLang,cc.JsonAsset);case 6:return u=r.sent,r.next=9,i("language/lang_cfg_"+t.curLang,cc.JsonAsset);case 9:for(s=r.sent,n=s.json,l=(e=u.json).length,h=0;h<l;h++)n[lang[h]]=e[h];case 13:case"end":return r.stop()}},a)}))},t.getText=function(t){return e[t]||lang[t]},t.getTextByStr=function(t){return n[t]||t}}(i.GameText||(i.GameText={})),cc._RF.pop()},{}],GameTipsLab:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"9a6f6XKPMtOaryYWj9MYUse","GameTipsLab");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=cc._decorator,l=u.ccclass,h=u.property,f=[],d=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).lab=null,e.nextTipTime=0,e.index=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){if(!f.length){for(var t=1;;){var e="game_help_tip_"+t++,n=s.GameText.getTextByStr(e);if(n==e)break;f.push(n)}c.default.RandomUtils.shuffle(f)}this.showNextLab()},i.showNextLab=function(){this.lab.string=f[this.index],this.index++,this.index==f.length&&(this.index=0)},i.update=function(t){5<this.nextTipTime?(this.nextTipTime=0,this.showNextLab()):this.nextTipTime+=t},o}(cc.Component);o([h(cc.Label)],d.prototype,"lab",void 0),d=o([l],d),a.default=d,cc._RF.pop()},{}],GameUIView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"fc4e7rsCtVLwZd0fQz6jQxe","GameUIView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=i("EffectUtils"),l=(i("ViewConst"),i("LayerManager"),cc._decorator),h=l.ccclass,f=l.property;l.menu,(i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).moneyBarList=[],e.progressBar=null,e.progressRedPoint=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){t.prototype.open.call(this)},i.initUI=function(){t.prototype.initUI.call(this)},i.close=function(){t.prototype.close.call(this)},i.playGetCoinAni=function(t,e,n){void 0===e&&(e=0);var r=this.moneyBarList[t];if(r){var o=c.default.ViewManager.uiRoot;n=n?o.convertToNodeSpaceAR(n):cc.Vec2.ZERO;var i=r.convertToWorldSpaceAR(r.getChildByName("icon").position);i=o.convertToNodeSpaceAR(i),u.default.instance.playMoneyAni(n,i,t,o,e)}else Log.trace("\u627e\u4e0d\u5230\u8fd9\u4e2a\u7c7b\u578b",t)},i.updateProgress=function(t){this.progressRedPoint.active=1<=t,this.progressBar.progress=t},i.onTouchStageUpgradeBtn=function(){c.default.ViewManager.open(19)},i.onTouchMapBtn=function(){c.default.ViewManager.open(20)},i.onTouchSettingBtn=function(){c.default.ViewManager.open(8)},i.onTouchAbilityBtn=function(){c.default.ViewManager.open(22)},i.onTouchShop=function(){c.default.ViewManager.open(7)},i.onTouchEquipment=function(){c.default.ViewManager.open(25)},i.onTouchMailIcon=function(){c.default.ViewManager.open(45)},i.onTouchRemoveAd=function(){c.default.ViewManager.open(53)},o}(s.default)).VIEW_INFO={prefabName:"GameUIView",zIndex:50,key:4,dir:"gameUI"},o([f([cc.Node])],i.prototype,"moneyBarList",void 0),o([f(cc.ProgressBar)],i.prototype,"progressBar",void 0),o([f(cc.Node)],i.prototype,"progressRedPoint",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],GameUtils:[function(t,e,n){"use strict";cc._RF.push(e,"3e897IJIa5GQYD3w7EjrWXy","GameUtils");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.sortCostume2=o.sortCostume1=o.sortCostume=o.getCostumeAttrStr=o.getDirection=void 0;var i=r("GameText"),a=r("CostumeConst"),c=cc.v2();o.getDirection=function(t,e){return e=t.sub(e,c),Math.abs(e.x)>Math.abs(e.y)?0<e.x?2:6:0<e.y?0:4},o.getCostumeAttrStr=function(t,e,n,r){return t===a.CostumeAbilityType.doublebase?i.GameText.getTextByStr("str_name_special_ability"+t).format(n,e/100,r):i.GameText.getTextByStr("str_name_special_ability"+t).format(e)},o.sortCostume=function(t,e){return e.data.grade!==t.data.grade?e.data.grade-t.data.grade:e.data.lv!==t.data.lv?e.data.lv-t.data.lv:e.cfg.parts!==t.cfg.parts?e.cfg.parts-t.cfg.parts:e.cfg.idx-t.cfg.idx},o.sortCostume1=function(t,e){return e.data.grade!==t.data.grade?e.data.grade-t.data.grade:e.cfg.parts!==t.cfg.parts?e.cfg.parts-t.cfg.parts:e.cfg.idx!==t.cfg.idx?e.cfg.idx-t.cfg.idx:e.data.lv-t.data.lv},o.sortCostume2=function(t,e){return e.cfg.parts!==t.cfg.parts?e.cfg.parts-t.cfg.parts:e.data.grade!==t.data.grade?e.data.grade-t.data.grade:e.cfg.idx!==t.cfg.idx?e.cfg.idx-t.cfg.idx:e.data.lv-t.data.lv},cc._RF.pop()},{}],GameView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a4091DlYAZD7p1Cl+dNlB7k","GameView");var o=t,i=e,a=n;Object.defineProperty(a,"__esModule",{value:!0}),i=o("BaseView"),o=(o("ViewConst"),o("LayerManager"),cc._decorator).ccclass,(i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.getPreloadRes=function(){return"/prefab/view/"+this.VIEW_INFO.dir+"/"+this.VIEW_INFO.prefabName};var i=o.prototype;return i.close=function(){t.prototype.close.call(this)},i.open=function(){t.prototype.open.call(this)},o}(i.default)).VIEW_INFO={prefabName:"GameView",zIndex:50,key:2,dir:"game",isScene:!0},i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([o],i),a.default=i,cc._RF.pop()},{}],GlobalAttr:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"f3c10Pu5g9Kf6k+FOcHf8RO","GlobalAttr");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("ControllerConst"),l=a("CostumeConst"),h=a("BuffMgr"),f=a("IBuff"),d=a("GameConst"),p=a("AbilityInfoService"),y=a("MachineService"),v=a("MapService"),g=a("RoleService"),m=a("StageUpgradeService"),_=null,b=null,w=function(){function t(){this.tipChance=0,this.generousTipRate=0,this.chefProductionSpeed=1,this.waiterProductionSpeed=1,this.moneyRate=1,this.customerMoveSpeed=1,this.chefspeed=0,this.waiterspeed=0,this.perfectDishRate=0,this.instaCompletedDishRate=0,this.menuItemUpgradeDiscount=1,this.cookMoneyRate=0,this.tipRate=0,this.upgradeDiscount=1,this.ad_booster_effect=1,this.gemsChanceAtAd=0,this.offlineRevenue=1,this.offlineRewardMaxTime=1,this.offlineRewardMinTime=1,this.adBoosterDuration=1,this.adRewardRevenue=1,this.define=null,this.costumeAttr=null,this.buffAttr=null}t.init=function(){b=g.default.ins,t.ins=new t,_=p.default.ins.dataMap,t.ins.init()};var e=t.prototype;return e.init=function(){this.buffAttr=h.default.ins.getRegionBuffAttrList(v.default.ins.curId),this.define=s.default.ConfigManager.getConfig("Define"),this.offlineRewardMinTime=this.define.offline_reward_min_time,this.costumeAttr=s.default.ControllerManager.getControllerModel(u.ControllerConst.Costume).attr,s.default.NotificationCenter.addListener(d.GameNotificationConst.UPDATE_BUFF,this.onUpdateBuff,this),s.default.NotificationCenter.addListener(d.GameNotificationConst.UPDATE_EQUIP_COSTUME_ATTR,this.onUpdateEquipCostume,this)},e.onUpdateEquipCostume=function(t){for(var e,n=r(t);!(e=n()).done;)switch(e.value){case l.CostumeAbilityType.base:this.calCookMoneyRate();break;case l.CostumeAbilityType.all_employees_production_speed:this.calChefProductionSpeed(),this.calWaiterProductionSpeed();break;case l.CostumeAbilityType.all_employees_move_speed:this.calChefSpeed(),this.calWaiterSpeed();break;case l.CostumeAbilityType.all_employees_perfect_dish_rate:this.calPerfectDishRate();break;case l.CostumeAbilityType.extremely_generous_tip_rate:this.calGenerousTipRate();break;case l.CostumeAbilityType.additional_cashier_charge:this.calMoneyRate();break;case l.CostumeAbilityType.menu_item_upgrade_discount:this.calMenuItemUpgradeDiscount();break;case l.CostumeAbilityType.waiter_production_speed:this.calWaiterProductionSpeed();break;case l.CostumeAbilityType.chef_production_speed:this.calChefProductionSpeed();break;case l.CostumeAbilityType.waiter_move_speed:this.calWaiterSpeed();break;case l.CostumeAbilityType.chef_move_speed:this.calChefSpeed();break;case l.CostumeAbilityType.instaCompleted_dish_rate:break;case l.CostumeAbilityType.upgrade_discount:this.calUpgradeDiscount();break;case l.CostumeAbilityType.doublebase:}},e.destroy=function(){s.default.NotificationCenter.removeAll(this)},e.onUpdateBuff=function(t,e,n){switch(f.BUFF_TYPE[n]){case f.BUFF_TYPE.CHEF_SPEED:this.calChefSpeed();break;case f.BUFF_TYPE.WAITER_SPEED:this.calWaiterSpeed();break;case f.BUFF_TYPE.CUSTOMER_MOVE_SPEED:this.calCustomerMoveSpeed();break;case f.BUFF_TYPE.COOK_SPEED:this.calChefProductionSpeed(),this.calWaiterProductionSpeed();break;case f.BUFF_TYPE.FOOD_SELL_RATE:this.calMoneyRate();break;case f.BUFF_TYPE.ALL_EMPLOYEES_MOVE_SPEED:this.calWaiterSpeed(),this.calChefSpeed()}},e.calAll=function(){this.calTipChance(),this.calTipRate(),this.calMoneyRate(),this.calGemsChanceAtAd(),this.calAdBoosterEffect(),this.calOfflineRevenue(),this.calOfflineRewardTime(),this.calAdBoosterDuration(),this.calCustomerMoveSpeed(),this.calAdRewardRevenue(),this.calChefSpeed(),this.calWaiterSpeed(),this.calCookMoneyRate(),this.calGenerousTipRate(),this.calInstaCompletedDishRate(),this.calPerfectDishRate(),this.calMenuItemUpgradeDiscount(),this.calUpgradeDiscount(),this.calChefProductionSpeed(),this.calWaiterProductionSpeed()},e.calUpgradeDiscount=function(){this.upgradeDiscount=1-this.costumeAttr.getAttrValue(l.CostumeAbilityType.upgrade_discount,0)/100,m.default.ins.updateUpgradeDiscount()},e.calMenuItemUpgradeDiscount=function(){this.menuItemUpgradeDiscount=1-this.costumeAttr.getAttrValue(l.CostumeAbilityType.menu_item_upgrade_discount,0)/100,y.default.ins.reCalAllFoodCost()},e.calInstaCompletedDishRate=function(){},e.calPerfectDishRate=function(){this.perfectDishRate=this.costumeAttr.getAttrValue(l.CostumeAbilityType.all_employees_perfect_dish_rate,0)/100},e.calCookMoneyRate=function(){this.cookMoneyRate=1+this.costumeAttr.getAttrValue(l.CostumeAbilityType.base,0)/100},e.calGenerousTipRate=function(){this.generousTipRate=this.costumeAttr.getAttrValue(l.CostumeAbilityType.extremely_generous_tip_rate,0)/100},e.calMoneyRate=function(){this.moneyRate=this.buffAttr.attr.FOOD_SELL_RATE*(1+this.costumeAttr.getAttrValue(l.CostumeAbilityType.additional_cashier_charge,0)/100)},e.calTipChance=function(){this.tipChance=_[p.PayAbilityType.get_tips_chance].getValue(0)},e.calChefProductionSpeed=function(){this.chefProductionSpeed=1+(this.costumeAttr.getAttrValue(l.CostumeAbilityType.chef_production_speed,0)+this.costumeAttr.getAttrValue(l.CostumeAbilityType.all_employees_production_speed,0)+this.buffAttr.attr.COOK_SPEED)/100},e.calWaiterProductionSpeed=function(){this.waiterProductionSpeed=1+(this.costumeAttr.getAttrValue(l.CostumeAbilityType.waiter_production_speed,0)+this.costumeAttr.getAttrValue(l.CostumeAbilityType.all_employees_production_speed,0)+this.buffAttr.attr.COOK_SPEED)/100},e.calChefSpeed=function(){this.chefspeed=Math.floor(this.define.crew_move_speed*(b.chefspeed+this.buffAttr.attr.ALL_EMPLOYEES_MOVE_SPEED+this.buffAttr.attr.CHEF_SPEED+this.costumeAttr.getAttrValue(l.CostumeAbilityType.chef_move_speed,0)+this.costumeAttr.getAttrValue(l.CostumeAbilityType.all_employees_move_speed,0))/100),b.updateChefSpeed()},e.calWaiterSpeed=function(){this.waiterspeed=Math.floor(this.define.crew_move_speed*(b.waiterspeed+this.buffAttr.attr.WAITER_SPEED+this.buffAttr.attr.ALL_EMPLOYEES_MOVE_SPEED+this.costumeAttr.getAttrValue(l.CostumeAbilityType.waiter_move_speed,0)+this.costumeAttr.getAttrValue(l.CostumeAbilityType.all_employees_move_speed,0))/100),b.updateWaiterSpeed()},e.calTipRate=function(){this.tipRate=_[p.PayAbilityType.tips_rate].getValue(1)*this.define.tip_value},e.calGemsChanceAtAd=function(){this.gemsChanceAtAd=_[p.PayAbilityType.gems_chance_at_ad].getValue(0)},e.calOfflineRevenue=function(){this.offlineRevenue=_[p.PayAbilityType.offline_revenue].getValue(1)},e.calOfflineRewardTime=function(){this.offlineRewardMaxTime=Math.floor(this.define.offline_reward_max_time*_[p.PayAbilityType.offline_reward_time].getValue(1))},e.calAdBoosterDuration=function(){this.adBoosterDuration=Math.floor(_[p.PayAbilityType.ad_booster_duration].getValue(1)*this.define.booster_ad_time)},e.calAdBoosterEffect=function(){this.ad_booster_effect=this.define.booster_ad_value/100+_[p.PayAbilityType.ad_booster_effect].getValue(0)},e.calCustomerMoveSpeed=function(){this.customerMoveSpeed=this.define.customer_move_speed*(_[p.PayAbilityType.customer_move_speed].getValue(1)+this.buffAttr.attr.CUSTOMER_MOVE_SPEED/100)},e.calAdRewardRevenue=function(){this.adRewardRevenue=this.define.booster_ad_value/100+_[p.PayAbilityType.ad_reward_revenue].getValue(0)},t}();c.default=w,w.ins=null,cc._RF.pop()},{}],GodArrow:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"347eeGQrTtOt5Bdd1t6kAX8","GodArrow");var i,a,c=t,s=n,u=(a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(s,"__esModule",{value:!0});var l=c("App"),h=cc._decorator,f=h.property,d=h.ccclass;h.menu,(c=i=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this).desc=null,e.img=null,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n),a.newInstance=function(){return u(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,AssetManager.instance.autoLoadAssetAsync(i.ASSET_REQUEST);case 2:return e=t.sent,t.abrupt("return",cc.instantiate(e).getComponent(i));case 4:case"end":return t.stop()}},t)}))};var c=a.prototype;return c.setLabel=function(t){t?(this.img&&(this.img.node.active=!0),l.default.CommonUtils.setSpriteFrame("Font/"+t,this.img)):this.img&&(this.img.node.active=!1)},c.dispose=function(){this.node.removeFromParent(),this.destroy()},a}(cc.Component)).ASSET_REQUEST={url:"prefab/view/guide/GodArrow",clazz:cc.Prefab,cache:!0,local:!0},a([f(cc.Label)],c.prototype,"desc",void 0),a([f(cc.Sprite)],c.prototype,"img",void 0),c=i=a([d],c),s.default=c=i,cc._RF.pop()},{}],GodGuide:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"176a4SAwu9Di5PIYQxGsvv+","GodGuide");var s,u=t,l=n,h=(s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(l,"__esModule",{value:!0});var f=u("App"),d=u("SwitchFrame"),p=u("BaseView"),y=u("GuideModel"),v=u("Locator"),g=2*Math.PI/360;function m(t,e,n){return[cc.v2(t.x,t.y),cc.v2(t.x+t.width,t.y),cc.v2(t.x+t.width,t.y+t.height),cc.v2(t.x,t.y+t.height)].map(function(t){return function(t,e,n){var r=cc.v2(),o=-e*g;return r.x=(t.x-n.x)*Math.cos(o)-(t.y-n.y)*Math.sin(o)+n.x,r.y=(t.x-n.x)*Math.sin(o)+(t.y-n.y)*Math.cos(o)+n.y,r}(t,e,n)})}var _=cc._decorator,b=_.ccclass,w=_.property;u=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).closeType=0,e.FINGER_PREFAB=null,e.TEXT_PREFAB=null,e.skipBtn=null,e.storyPrefab=null,e.stroyObj=null,e._checkPosFunc=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this),this.init()},a.touchSimulation=function(t){this.log("\u81ea\u52a8\u6267\u884c\uff0c\u6a21\u62df\u89e6\u6478"),this.scheduleOnce(function(){cc.log("\u81ea\u52a8\u8282\u70b9 :",JSON.stringify(t.position));var e=t.parent.convertToWorldSpaceAR(t.position);cc.log("\u4e16\u754c\u8282\u70b9 :",JSON.stringify(e)),function(t,e){var n,r=window._cc.inputManager;cc.sys.isBrowser?(c=document.getElementById("GameCanvas"),n=r.getHTMLElementPosition(c)):((n=cc.view.getFrameSize()).left=0,n.top=0);var o=cc.view.getViewportRect(),i=cc.view.getScaleX(),a=cc.view.getScaleY(),c=cc.view.getDevicePixelRatio();i=(t*i+o.x)/c+n.left,c=n.top+n.height-(e*a+o.y)/c,c=cc.v2(i,c),cc.log("\u6a21\u62df\u70b9\u51fb\u5750\u6807\uff1a"+c.x+", "+c.y);var s=r.getTouchByXY(c.x,c.y,n);r.handleTouchesBegin([s]),setTimeout(function(){r.handleTouchesEnd([s])},200)}(e.x,e.y)},1)},a.showSkip=function(t){this.skipBtn.active=!!t},a.init=function(){this.node.getChildByName("SkipBtn").zIndex=100,this.node.setContentSize(cc.winSize),this._targetNode=null,this.FINGER_PREFAB&&(this._finger=cc.instantiate(this.FINGER_PREFAB),this._finger.parent=this.node,this._finger.active=!1),this.TEXT_PREFAB&&(this.text=cc.instantiate(this.TEXT_PREFAB),this.text.parent=this.node,this.text.active=!1),this._mask=this.node.getComponentInChildren(cc.Mask),this._mask.inverted=!0,this._mask.node.opacity=0,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!0)},a.onTouchSkin=function(){this.applyFunc(y.GuideConst.SKIN_GUIDE)},a.getStoryObj=function(){if(!this.stroyObj){var t=cc.instantiate(this.storyPrefab);this.node.addChild(t),this.stroyObj={index:0,node:t,items:[],label:t.getChildByName("Label").getComponent(cc.Label)},t.getChildByName("skinBtn").on(cc.Node.EventType.TOUCH_END,this.onTouchSkin,this);for(var e,n=o(t.getChildByName("content").children);!(e=n()).done;){var r=e.value;r.active=!1,this.stroyObj.items.push({node:r,img:r.getComponent(d.default)})}}return this.stroyObj},a.stepFinish=function(){this._mask.node.active=!1},a.enterStep=function(){this._mask.node.active=!0},a.hideFinger=function(){this._finger&&(this._finger.active=!1)},a.onTouchStart=function(t){if(this._dispatchEvent)this.node._touchListener.setSwallowTouches(!1);else{if(this._mask.node.active)return this._targetNode?void(this._targetNode._hitTest(t.getLocation(),this._targetNode)?this.node._touchListener.setSwallowTouches(this._targetNode==this.node):(this.node._touchListener.setSwallowTouches(!0),t.stopPropagationImmediate(),Log.trace("\u672a\u547d\u4e2d\u76ee\u6807\u8282\u70b9\uff0c\u62e6\u622a"))):(t.stopPropagationImmediate(),void this.node._touchListener.setSwallowTouches(!0));this.node._touchListener.setSwallowTouches(!1)}},a.reset=function(){this._targetNode=null,this.hideFinger(),this.hideText(),this.showSkip(0)},a.hideText=function(){this.text.getComponent(this.TEXT_PREFAB.name).hideText()},a.hideMask=function(){this._mask._graphics&&this._mask._graphics.clear(),this._mask.node.active=!1},a.showMask=function(t){this._mask.node.active=!0,this._mask._graphics.clear(),this._mask.node.opacity=-1<t?t:255},a.open=function(){t.prototype.open.call(this),this._mask.node.active=!1},a.fingerToNode=function(t,e){this._finger||e(),this._finger.active=!0;var n=this.node.convertToNodeSpaceAR(t.parent.convertToWorldSpaceAR(t.position)),r=n.sub(this._finger.position).mag()/cc.winSize.height;this._finger.stopActionByTag(111),cc.tween(this._finger).to(r,{position:n}).call(e).tag(111).start()},a.fingerToNodeAsync=function(t){var e=this;return this._finger?new Promise(function(n){e._finger.active=!0;var r=e.node.convertToNodeSpaceAR(t),o=r.sub(e._finger.position).mag()/cc.winSize.height;cc.tween(e._finger).to(o,{position:r}).call(n).tag(111).start()}):Promise.resolve()},a.log=function(){},a.find=function(t,e,n,r){var o=this;void 0===n&&(n=0);var i=cc.director.getScene();v.Locator.locateNode(i,t,function(t,i){if(t)Log.trace(t);else{for(var a=i;a=a.parent;);f.default.TimerManager.setFrameOut(2,function(){var t=o._focusToNode(i,n);r?o.fingerToNode(i,function(){e(i,t)}):e(i,t)},o)}})},a.findAsync=function(t){return h(this,void 0,void 0,r().mark(function e(){var n,o,i,a,c,s,u;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=cc.director.getScene(),e.next=3,v.Locator.locateNodeSync(n,t.args);case 3:if(o=e.sent,i=o.error,a=o.node,i){e.next=20;break}return e.next=9,f.default.TimerManager.sleepFrame(2);case 9:return this._focusToNode(a,t.type),t.isShowFinger,c=t.fy||0,this._finger.getChildByName("hand").anchorY=1+a.height/2/this._finger.height,s=a.convertToWorldSpaceAR(cc.v2(t.fX||0,c)),u=cc.Camera.findCamera(a),this._finger.angle=t.angle||0,u.getWorldToScreenPoint(s,s),e.next=19,this.fingerToNodeAsync(s);case 19:return e.abrupt("return",a);case 20:Log.trace(i);case 21:case"end":return e.stop()}},e,this)}))},a.clearCheckPosFuncTimer=function(){this._checkPosFunc&&(f.default.TimerManager.remove(this._checkPosFunc,this),this._checkPosFunc=null)},a.checkPos=function(t,e,n,r){var o=this,i=t.convertToWorldSpaceAR(r);this.clearCheckPosFuncTimer(),this._checkPosFunc=function(){var a=t.convertToWorldSpaceAR(r);i.x==a.x&&i.y==a.y||(i=a,o._focusToNode(t,e),n&&o.fingerToNodeAsync(a))},f.default.TimerManager.doFrame(100,0,this._checkPosFunc,this)},a.getNodePoints=function(t,e,n){return m(t,e,n).map(function(t){return t})},a.fillPolygon=function(t){var e=this,n=t[0];this._mask._graphics.moveTo(n.x,n.y),t.slice(1).forEach(function(t){e._mask._graphics.lineTo(t.x,t.y)}),this._mask._graphics.lineTo(n.x,n.y),this._mask._graphics.stroke(),this._mask._graphics.fill()},a.fillPoints=function(t){var e=this,n=t[0];this._mask._graphics.moveTo(n.x,n.y),t.slice(1).forEach(function(t){e._mask._graphics.lineTo(t.x,t.y)}),this._mask._graphics.lineTo(n.x,n.y),this._mask._graphics.stroke(),this._mask._graphics.fill()},a._focusToNode=function(t,e){void 0===e&&(e=0),this._mask._graphics.clear();var n=t.getBoundingBoxToWorld(),r=cc.Camera.findCamera(t),o=n.center;return r.getWorldToScreenPoint(o,o),this.node.convertToNodeSpaceAR(o,o),0===e?(e=t.width>t.height?t.width/2:t.height/2+10,this._mask._graphics.circle(o.x,o.y,e)):this._mask._graphics.roundRect(o.x-t.width/2,o.y-t.height/2,t.width,t.height,10),this._mask._graphics.fill(),n},a.getNodeFullPath=function(t){for(var e=[],n=t;"GameScene"!==n.name&&e.unshift(n.name),(n=n.parent)&&"Canvas"!==n.name;);return e.join("/")},a.isGuideNode=function(t){var e=!1,n=t;do{if(n===this.node){e=!0;break}}while(n=n.parent);return e},a.startRecordNodeTouch=function(){if(this._dispatchEvent)cc.warn("\u5df2\u7ecf\u8fdb\u5165\u5f55\u5236\u6a21\u5f0f");else{this._dispatchEvent=cc.Node.prototype.dispatchEvent,this._recordSteps=[];var t=this,e=Date.now();cc.Node.prototype.dispatchEvent=function(n){var r,o;t.isGuideNode(this)||n.type===cc.Node.EventType.TOUCH_END&&(r=((o=Date.now())-e)/1e3,e=o,o=t.getNodeFullPath(this),t._recordSteps.push({arg1:o,delay:r})),t._dispatchEvent.call(this,n)}}},a.stopRecordNodeTouch=function(){this._dispatchEvent?(cc.Node.prototype.dispatchEvent=this._dispatchEvent,this._dispatchEvent=null,cc.warn("\u9000\u51fa\u5f55\u5236\u72b6\u6001")):cc.warn("\u672a\u8fdb\u5165\u5f55\u5236\u72b6\u6001")},a.playRecordNodeTouch=function(){this.stopRecordNodeTouch(),this._recordSteps&&this._recordSteps.length&&cc.log("\u751f\u6210\u4efb\u52a1\uff1a",console.table(this._recordSteps))},a.showText=function(t,e){var n=this,r=this.text.getChildByName("Body").getComponent(cc.Widget);switch(t.ani){case"l":this.text.x=-cc.winSize.width/2,cc.tween(this.text).to(.5,{x:0},{easing:cc.easing.cubicOut}).start();break;case"r":this.text.x=cc.winSize.width/2,cc.tween(this.text).to(.5,{x:0},{easing:cc.easing.cubicOut}).start();break;default:this.text.x=0}if(t.pos){var o=t.pos;switch(r.isAlignVerticalCenter=r.isAlignTop=r.isAlignBottom=!1,o[0]){case"v":r.isAlignVerticalCenter=!0,r.verticalCenter=parseInt(o.slice(1));break;case"t":r.isAlignTop=!0,r.top=parseInt(o.slice(1));break;case"b":r.isAlignBottom=!0,r.bottom=parseInt(o.slice(1));break;default:r.isAlignBottom=!0,r.bottom=155}}else r.isAlignVerticalCenter=!1,r.isAlignTop=!1,r.isAlignBottom=!0,r.bottom=155;this.text.getComponent(this.TEXT_PREFAB.name).setText(t,function(){n.text.off(cc.Node.EventType.TOUCH_END),n._targetNode=null,e&&e()})},a.onTouchStartGuideBtn=function(){this.applyFunc(y.GuideConst.OPEN_GUIDE)},a.close=function(){t.prototype.close.call(this),this.node.active=!1},i}(p.default),s([w(cc.Prefab)],u.prototype,"FINGER_PREFAB",void 0),s([w(cc.Prefab)],u.prototype,"TEXT_PREFAB",void 0),s([w(cc.Node)],u.prototype,"skipBtn",void 0),s([w(cc.Prefab)],u.prototype,"storyPrefab",void 0),u=s([b],u),l.default=u,cc._RF.pop()},{}],GodText:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c2ef6S7BFpKP5LosWcOJwcT","GodText");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=cc._decorator,l=u.ccclass,h=u.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).descLab=null,e.typeTimer=null,e.cb=null,e.txt="",e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.hideText=function(){this.node.active=!1},i.typerFinish=function(){this.typeTimer=null,this.cb&&(this.cb(),this.cb=null)},i.clearTimer=function(){this.descLab.string=this.txt,this.typeTimer&&(c.default.TimerManager.remove(this.typeTimer,null),this.typeTimer=null,this.cb=null)},i.setText=function(t,e){this.node.active=!0,this.cb=e,(t=this.txt=t.i18?s.GameText.getTextByStr(t.i18):t.str)&&(this.descLab.node.active=!0,this.descLab.string=t)},o}(cc.Component),o([h(cc.RichText)],i.prototype,"descLab",void 0),i=o([l],i),a.default=i,cc._RF.pop()},{}],GridLayer:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"09018XO6StGcov2GC6ehVqo","GridLayer");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("MapType"),u=cc._decorator,l=u.ccclass,h=u.property,f=u.menu,d=u.requireComponent,p=u.executeInEditMode;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).graphics=null,e.lineSize1=6,e.lineSize2=3,e.lingColor3=cc.color(0,0,0,187).fromHEX("#bbbbbbbb"),e.lingColor1=cc.color(255,0,0,187).fromHEX("#00550025"),e.lingColor2="#11115566",e._test=!1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,u=i.prototype;return u.onLoad=function(){this.graphics||(this.graphics=this.getComponent(cc.Graphics),this.graphics||(this.graphics=this.addComponent(cc.Graphics)))},u.clear=function(){this.graphics.clear()},u.drawGrid=function(t,e,n,r,o){this._mapWidth=t,this._mapHeight=e,this._ceilWidth=n,this._ceilHeight=r,this._halfCeilWidth=Math.floor(n/2),this._halfCeilHeight=Math.floor(r/2),n=2*Math.ceil(t/this._ceilWidth)+1,r=2*Math.ceil(e/this._ceilHeight)+1,t=n*this._halfCeilWidth,e=r*this._halfCeilHeight,0==o?this.draw45AngleGrid(r,n,t,e):1==o?this.draw90AngleGrid(r,n,t,e):2==o&&this.drawHoneycombGrid(t,e)},u.draw45AngleGrid=function(t,e,n,r){this.graphics.clear();for(var o=0;o<t+1;o++)o%2==0?this.graphics.strokeColor.fromHEX(this.lingColor2):this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=1,this.graphics.moveTo(0,o*this._halfCeilHeight),this.graphics.lineTo(n,o*this._halfCeilHeight),this.graphics.stroke();for(var i=0;i<e+1;i++)i%2==0?this.graphics.strokeColor.fromHEX(this.lingColor2):this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=1,this.graphics.moveTo(i*this._halfCeilWidth,0),this.graphics.lineTo(i*this._halfCeilWidth,r),this.graphics.stroke();for(var a,c,s,u,l=1;l<e+t;l++)this.graphics.strokeColor=this.lingColor3,this.graphics.lineWidth=2,a=l*this._halfCeilWidth,l%2==1?(s=c=0,u=l*this._halfCeilHeight,n<a&&(a=n,c=(l-e)*this._halfCeilHeight),r<u&&(s=(l-t)*this._halfCeilWidth,u=r),this.graphics.moveTo(a,c),this.graphics.lineTo(s,u)):(c=r,u=(t-l)*this._halfCeilHeight,n<a&&(a=n,c=(t-(l-e))*this._halfCeilHeight),u<(s=0)&&(s=(l-t)*this._halfCeilWidth,u=0),this.graphics.moveTo(a,c),this.graphics.lineTo(s,u),this.graphics.stroke())},u.draw90AngleGrid=function(t,e,n,r){this.graphics.clear();for(var o=this.lineSize1,i=this.lineSize2,a=0;a<t+1;a++)a%2==0?(this.graphics.strokeColor=this.lingColor3,this.graphics.lineWidth=o):(this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=i),this.graphics.moveTo(0,a*this._halfCeilHeight),this.graphics.lineTo(n,a*this._halfCeilHeight),this.graphics.stroke();for(var c=0;c<e+1;c++)c%2==0?(this.graphics.strokeColor=this.lingColor3,this.graphics.lineWidth=o):(this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=i),this.graphics.moveTo(c*this._halfCeilWidth,0),this.graphics.lineTo(c*this._halfCeilWidth,r),this.graphics.stroke()},u.drawHoneycombGrid=function(t,e){this.graphics.clear(),this._ceilWidth;for(var n=this._ceilWidth/4,r=3*n,o=this._ceilHeight/2,i=2*n-o,a=t/this._ceilWidth,c=e/this._ceilWidth,s=2*Math.ceil((this._mapWidth-n)/(6*n)),u=Math.ceil((this._mapHeight-o)/this._ceilHeight),l=0;l<4*c+1;l++)l%4==0?(this.graphics.strokeColor.fromHEX(this.lingColor2),this.graphics.lineWidth=1):(this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=1.2),l%4==1?(this.graphics.moveTo(0,(l-1)*n+i),this.graphics.lineTo(t,(l-1)*n+i)):l%4==3?(this.graphics.moveTo(0,(l-1)*n+o),this.graphics.lineTo(t,(l-1)*n+o)):(this.graphics.moveTo(0,l*n),this.graphics.lineTo(t,l*n)),this.graphics.stroke();for(var h=0;h<4*a+1;h++)h%4==0?this.graphics.strokeColor.fromHEX(this.lingColor2):this.graphics.strokeColor=this.lingColor1,this.graphics.lineWidth=1,this.graphics.moveTo(h*n,0),this.graphics.lineTo(h*n,e),this.graphics.stroke();this.graphics.strokeColor=this.lingColor3,this.graphics.lineWidth=1.5;for(var f=0;f<s;f++){var d=f*r,p=0;f%2!=0&&(p=o);for(var y=0;y<u;y++){var v=y*this._ceilHeight+p;f%2==0?(this.drawLine(d+n,0+v,d+r,0+v),this.drawLine(d+r,0+v,d+this._ceilWidth,o+v),this.drawLine(d+this._ceilWidth,o+v,d+r,this._ceilHeight+v),y==u-1&&this.drawLine(d+r,this._ceilHeight+v,d+n,this._ceilHeight+v),this.drawLine(d+n,this._ceilHeight+v,0+d,o+v),this.drawLine(0+d,o+v,d+n,0+v)):(this.drawLine(d+n,0+v,d+r,0+v),f==s-1&&(this.drawLine(d+r,0+v,d+this._ceilWidth,o+v),this.drawLine(d+this._ceilWidth,o+v,d+r,this._ceilHeight+v)),y==u-1&&(this.drawLine(d+r,this._ceilHeight+v,d+n,this._ceilHeight+v),this.drawLine(d+n,this._ceilHeight+v,0+d,o+v),f!=s-1&&this.drawLine(d+this._ceilWidth,o+v,d+r,this._ceilHeight+v)))}}},u.drawLine=function(t,e,n,r){this.graphics.moveTo(t,e),this.graphics.lineTo(n,r),this.graphics.stroke()},a=i,(c=[{key:"test",get:function(){return this._test},set:function(t){this._test=t,this.drawGrid(this.node.parent.width,this.node.parent.height,100,100,s.MapType.angle90)}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),i([h(cc.Graphics)],a.prototype,"graphics",void 0),i([h()],a.prototype,"lineSize1",void 0),i([h()],a.prototype,"lineSize2",void 0),i([h()],a.prototype,"lingColor3",void 0),i([h()],a.prototype,"lingColor1",void 0),i([h],a.prototype,"_test",void 0),i([h()],a.prototype,"test",null),a=i([l,d(cc.Graphics),f("game/map/GridLayer"),p],a),c.default=a,cc._RF.pop()},{}],GuideController:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,o)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,o,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"88a5bVLV7pJa6DUA9/6vNFZ","GuideController");var u=t,l=n,h=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});var f=u("App"),d=u("Actions"),p=u("SubTree"),y=u("GameText"),v=u("BaseController"),g=u("EffectUtils"),m=u("ViewAni"),_=u("ConfigManager"),b=u("NotificationConst"),w=(u("ViewConst"),u("LayerManager"),u("CurrencyService")),C=u("MachineService"),S=u("MapService"),O=u("SystemOpenConst"),T=u("SystemOpenController"),I=u("B3Tree1"),E=u("GuideModel"),x=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._model=null,e.godGuide=null,e.isSkip=null,e.curId=null,e.tree=null,e.blackboard=null,e.notification=null,e.cb=null,e.param=null,e._typerTimer=null,e._isTest=!1,e.eventRefMap={},e.isCheckCd=!1,e.setModel(new E.GuideModel(c(e))),f.default.SaveManage.add(e._model,"GUIDE_DATA",!0,!0),e.addEventKeyMap(E.GuideConst),f.default.ViewManager.register(15,{prefabName:"GodGuide",zIndex:200,dir:"guide",controller:c(e)}),f.default.NotificationCenter.addListener(b.NotificationConst.INIT_GAME_FINISH,e.init,c(e)),e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var i=o.prototype;return i.init=function(){f.default.NotificationCenter.removeListener(b.NotificationConst.INIT_GAME_FINISH,this.init,this),this.initModuleEvent(),this.initNotificationEvent(),this.initData()},i.initData=function(){f.default.SaveManage.load("GUIDE_DATA"),this.loadTree()},i.setIsCanPlayAni=function(t){m.default.isCanPlayAni=t,o.isGuide=!t},i.listenNotifiaction=function(){this.notification&&""!=this.notification&&(this.param=null,f.default.NotificationCenter.removeListener(this.notification,this.listenNotifiaction,this)),f.default.TimerManager.remove(this.listenNotifiaction,this),this.godGuide.clearCheckPosFuncTimer(),this.tick()},i.wait=function(t,e,n){e&&""!=e&&(this.notification=e,this.param=n,f.default.NotificationCenter.addListener(e,this.listenNotifiaction,this)),t&&f.default.TimerManager.doTimer(t,1,this.listenNotifiaction,this)},i.showStory=function(t){var e=this;this.clearTyperTimer();var n=this.godGuide.getStoryObj(),r=n.items[n.index++];r.node.active=!0,n.label.string="",r.img.frameIndex=1,n.index%2?r.node.x=-860:r.node.x=860,cc.tween(r.node).to(.7,{x:0},{easing:cc.easing.cubicOut}).call(function(){var o=t.i18?y.GameText.getTextByStr(t.i18):t.str;if(cc.tween(r.img.node).call(function(){r.img.frameIndex=0}).delay(.7).call(function(){r.img.frameIndex=1}).delay(.7).union().repeatForever().start(),t.typerAniTime){e.godGuide._targetNode=n.node;var i=o.split("|"),a=i.length,c=0,s=!0,u=function(){var r=i[c];s=!1,e._typerTimer=g.default.instance.typerEffect(n.label,r.replace(/\\n/g,"\n"),t.typerAniTime,function(){s=!0,a===++c?e.typerFinish():n.label.string=r},e)};u(),n.node.on(cc.Node.EventType.TOUCH_END,function(){e.clearTyperTimer(),a===c?(e.typerFinish(),e.godGuide._targetNode=null,n.label.string=i[i.length-1]):s?u():(s=!0,n.label.string=i[c],c++)},e)}else n.label.string=o.replace(/\\n/g,"\n"),e.typerFinish()}).start()},i.hideStory=function(){var t=this;this.clearTyperTimer();var e=this.godGuide.getStoryObj();cc.tween(e.node).to(.7,{x:-cc.winSize.width},{easing:cc.easing.cubicOut}).call(function(){e.node.active=!1,t.tick()}).start()},i.removeStory=function(){this.clearTyperTimer();var t=this.godGuide.getStoryObj();cc.tween(t.node).to(.5,{x:-cc.winSize.width},{easing:cc.easing.cubicOut}).call(function(){t.node.active=!1}).start()},i.typerFinish=function(){f.default.TimerManager.setFrameOut(1,this.waitTouch,this),this.godGuide.getStoryObj().node.off(cc.Node.EventType.TOUCH_END),this._typerTimer=null},i.clearTyperTimer=function(){this._typerTimer&&(f.default.TimerManager.remove(this._typerTimer,null),this._typerTimer=null)},i.waitTouch=function(t){this.godGuide._targetNode||(this.godGuide._targetNode=this.godGuide.node),t&&this.godGuide.node.once(cc.Node.EventType.TOUCH_END,this.onTouchTarget,this),this.godGuide._targetNode.once(cc.Node.EventType.TOUCH_END,this.onTouchTarget,this)},i.onTouchTarget=function(){var t=this;this.godGuide._targetNode&&(this.godGuide._targetNode=null,this.godGuide.clearCheckPosFuncTimer(),f.default.TimerManager.setFrameOut(1,function(){t.tick()},this))},i.locatorTouchNode=function(t,e,n,r){var o=this;void 0===r&&(r=0),this.godGuide.find(t,function(t){o.godGuide._targetNode=t,n(),o.tick()},r,e)},i.locatorTouchNodeAsync=function(t,e){return h(this,void 0,void 0,a().mark(function n(){var r;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.godGuide.findAsync(t);case 2:r=n.sent,this.godGuide._targetNode=r,e&&e(),this.tick();case 4:case"end":return n.stop()}},n,this)}))},i.hideMask=function(){this.godGuide&&this.godGuide.hideMask()},i.showMask=function(t){this.godGuide.showMask(t),this.godGuide._targetNode=this.godGuide.node},i.showSkip=function(t,e){t&&e?f.default.TimerManager.doTimer(e,1,this.delayShowSkip,this):(f.default.TimerManager.remove(this.delayShowSkip,this),this.godGuide.showSkip(t))},i.delayShowSkip=function(){this.godGuide.showSkip(1)},i.setStep=function(t,e){void 0===e&&(e=this.curId),this._model.setStep(this.curId,t),-1===t&&(this.godGuide.stepFinish(this.curId),f.default.NotificationCenter.dispatch(b.NotificationConst.GUIDE_STEP_FINISH,e))},i.openGuideView=function(){var t=this;g.default.instance.queueExecutor.regist(function(){t.setIsCanPlayAni(!1),f.default.NotificationCenter.dispatch(b.NotificationConst.START_GUIDE),f.default.TimerManager.doTimer(1,1,function(){f.default.ViewManager.open(15,!0),g.default.instance.queueExecutor.finishFunc()},t)},this)},i.skinGuide=function(t){return h(this,void 0,void 0,a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.TimerManager.sleep(500);case 2:f.default.ViewManager.close(15),t?this.testSkinGuide():-1<this.curId&&(this._model.setStep(this.curId,-1),this.blackboard=new I.b3.Blackboard,this.godGuide.reset(),this.tick());case 4:case"end":return e.stop()}},e,this)}))},i.checkStep=function(t){return this.isSkip&&this._model.setStep(this.curId,-1),this._model.checkStep(this.curId,t)},i.showArrow=function(){},i.showTip=function(t){var e=this;this.godGuide.showText(t,function(){f.default.TimerManager.setFrameOut(1,e.tick,e)})},i.hideTip=function(){this.godGuide.hideText()},i.testSkinGuide=function(){this.isSkip=!0,this.blackboard=new I.b3.Blackboard,this.tick()},i.loadTree=function(){this.tree=new I.b3.BehaviorTree;var t=f.default.ConfigManager.getConfig("guideConf");if(t.trees){var e=/^\(?\d+\)/;p.default.setSubTreeLoadFunc(function(n){for(var o,i=r(t.trees);!(o=i()).done;){var a=o.value;if(a.title.replace(e,"")===n.properties.path||a.properties.path===n.properties.path){n.loadDataFinish(a);break}}});for(var n,o=r(t.trees);!(n=o()).done;){var i=n.value;if("\u4e3b\u6811"==i.title||i.properties&&"\u4e3b\u6811"==i.properties.path){this.tree.load(i,d.Actions);break}}}else this.tree.load(t,d.Actions);this.blackboard=new I.b3.Blackboard},i.tick=function(){this.tree&&(this.tree.tick(this,this.blackboard)===I.b3.RUNNING?this.setIsCanPlayAni(!1):o.isGuide&&(this.setIsCanPlayAni(!0),f.default.ViewManager.close(15)))},i.onOpenView=function(t){t.viewId,f.default.ViewManager.closeAll([4,2,6,0,15,29,23,24,39]),m.default.isCanPlayAni=!1,f.default.TimerManager.doFrame(1,1,this.tick,this)},i.on_OPEN_GUIDE=function(t){isNaN(t)||this.setStep(0,t),this.tick()},i.addEvent=function(t,e){this.eventRefMap[t]?-1===this.eventRefMap[t].indexOf(e)&&this.eventRefMap[t].push(e):(this.eventRefMap[t]=[e],f.default.NotificationCenter.addListener(t,this.checkIsGuide,this))},i.removeEvent=function(t,e){!this.eventRefMap[t]||-1!==(e=this.eventRefMap[t].indexOf(e))&&(this.eventRefMap[t].splice(e,1),0===this.eventRefMap[t].length&&(delete this.eventRefMap[t],f.default.NotificationCenter.removeListener(t,this.checkIsGuide,this)))},i.checkNewGuideIsOpen=function(t){if(t.mapId&&t.mapId!==S.default.ins.curId)return!1;if(this._model.checkIsFinish(t.id))return!1;if(this.isSkip)return this._model.setStep(t.id,-1),!1;if(t.open){if(!T.default.ins.checkSystemOpen(O.OpenTypeConst[t.open]))return this.addEvent(b.NotificationConst.SYS_OPEN,t.id),!1;this.removeEvent(b.NotificationConst.SYS_OPEN,t.id)}if(t.machinLvCnt){if(t.machinLvCnt>C.default.ins.getMachinAllLvCnt())return this.addEvent(b.NotificationConst.MACHINE_UPDATE,t.id),!1;this.removeEvent(b.NotificationConst.MACHINE_UPDATE,t.id)}if(t.money){if(!w.default.ins.checkMoneyEnough(t.money))return this.addEvent(b.NotificationConst.UPDATE_MONEY,t.id),!1;this.removeEvent(b.NotificationConst.UPDATE_MONEY,t.id)}return this.curId=t.id,Log.trace("\u8fdb\u5165\u65b0\u624b\u5f15\u5bfc:",this.curId),!0},i.initModuleEvent=function(){this.registerFunc(E.GuideConst.OPEN_GUIDE,this.on_OPEN_GUIDE,this),this.registerFunc(E.GuideConst.PLAY_RECORD,this.playRecordNodeTouch,this),this.registerFunc(E.GuideConst.START_RECORD,this.startRecordNodeTouch,this),this.registerFunc(E.GuideConst.STOP_RECORD,this.stopRecordNodeTouch,this),this.registerFunc(E.GuideConst.SKIN_GUIDE,this.skinGuide,this),this.registerFunc(E.GuideConst.NEXT_STEP,this.onNextStep,this),this.registerFunc(E.GuideConst.EXECUTE_FUNC,this.onExecuteFunc,this),this.registerFunc(E.GuideConst.CHECK_IS_GUIDE,this._model.checkIsFinish,this._model),this.registerFunc(E.GuideConst.SET_STEP,this.onSetStep,this),this.registerFunc(E.GuideConst.CHECK_STEP,this.checkStep,this)},i.onSetStep=function(t){delete this._model.saveData[t]},i.onNextStep=function(){this.godGuide.reset(),this.tick()},i.finishGuide=function(){},i.step6=function(){},i.onExecuteFunc=function(t){return this[t]&&"function"==typeof this[t]?this[t]():I.b3.FAILURE},i.playRecordNodeTouch=function(){this.godGuide.playRecordNodeTouch()},i.startRecordNodeTouch=function(){this.godGuide?this.godGuide.startRecordNodeTouch():f.default.ViewManager.open(15)},i.stopRecordNodeTouch=function(){this.godGuide.stopRecordNodeTouch()},i.setAutorun=function(){},i.checkIsGuide=function(){o.isGuide||this.tick()},i.addPet=function(){var t=this;this.isCheckCd||(this.isCheckCd=!0,f.default.TimerManager.doFrame(2,1,function(){t.isCheckCd=!1,t.checkIsGuide()},this))},i.addItem=function(t,e,n,r){(n||r)&&this.checkIsGuide()},i.initNotificationEvent=function(){f.default.NotificationCenter.addListener(b.NotificationConst.ENTER_MAP,this.checkIsGuide,this)},i.removeNotificationEvent=function(){},o}(v.default);l.default=x,x.isGuide=!1,_.registerJSONConf("guideConf","NewGuideTree"),cc._RF.pop()},{}],GuideModel:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0ca039v0ApFoLf8eFnD9QSC","GuideModel");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.GuideModel=i.GuideConst=void 0;var a=o("App"),c=o("BaseModel");(o=i.GuideConst||(i.GuideConst={}))[o.OPEN_GUIDE=0]="OPEN_GUIDE",o[o.START_RECORD=1]="START_RECORD",o[o.STOP_RECORD=2]="STOP_RECORD",o[o.PLAY_RECORD=3]="PLAY_RECORD",o[o.NEXT_STEP=4]="NEXT_STEP",o[o.EXECUTE_FUNC=5]="EXECUTE_FUNC",o[o.CHECK_IS_GUIDE=6]="CHECK_IS_GUIDE",o[o.SKIN_GUIDE=7]="SKIN_GUIDE",o[o.SET_STEP=8]="SET_STEP",o[o.CHECK_STEP=9]="CHECK_STEP",i.GuideModel=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).saveData=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.checkStep=function(t,e){return this.saveData[t]||(this.saveData[t]={index:0}),-1!=(t=this.saveData[t]).index&&t.index<=e},i.setStep=function(t,e){this.saveData[t]?this.saveData[t].index=e:this.saveData[t]={index:e},a.default.AnalyticMgr.recordState("guide",t,e)},i.checkIsFinish=function(t){return!(!(t=this.saveData[t])||-1!==t.index)},i.createMemento=function(){return this.saveData},i.setMemento=function(t){this.saveData=t||{}},o}(c.default),cc._RF.pop()},{}],HandGuide:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d8f21+5xX1DQpP0xQrqcEGR","HandGuide");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("LayerManager"),u=cc._decorator,l=u.ccclass,h=u.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).targetNode=null,e.isPlayAni=!1,e.pool=null,e.ani=null,e.padding=null,e.nextTick=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){},i.find=function(t,e){var n=this;this.isPlayAni&&this.ani.stop(),this.padding=e,e=cc.director.getScene(),Locator.locateNode(e,t,function(t,e){t?cc.log(t):(n.targetNode=e,c.default.TimerManager.setTimeOut(500,n.playAni,n))})},i.playAni=function(){var t=s.default.getLayer(100);this.node.parent||t.addChild(this.node);var e=this.targetNode.convertToWorldSpaceAR(cc.v2(0,0));this.padding&&e.addSelf(this.padding),this.node.position=this.node.parent.convertToNodeSpaceAR(e),this.ani.play(),this.isPlayAni=!0},i.update=function(t){if(this.nextTick-=t,this.nextTick<=0){this.nextTick=.2;var e=this.targetNode.convertToWorldSpaceAR(cc.v2(0,0));this.padding&&e.addSelf(this.padding),this.node.position=this.node.parent.convertToNodeSpaceAR(e)}},i.playOver=function(){this.isPlayAni=!1,this.pool?this.pool.push2(this.node,3):this.node.parent.removeChild(this.node,!1)},o}(cc.Component),o([h(cc.Animation)],i.prototype,"ani",void 0),i=o([l],i),a.default=i,cc._RF.pop()},{}],HelperCatBtn:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"72cef/ba85COb9NkrUKLXPn","HelperCatBtn");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("SwitchFrame"),u=(i("ViewConst"),i("HelperCatService")),l=cc._decorator,h=l.ccclass,f=l.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).timeLab=null,e.icon=null,e.define=null,e.saveData=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.define=c.default.ConfigManager.getConfig("Define"),this.saveData=u.default.ins.saveData},i.onEnable=function(){c.default.TimerManager.doTimer(1e3,0,this.routine,this),this.routine()},i.onDisable=function(){c.default.TimerManager.remove(this.routine,this)},i.routine=function(){var t=u.default.ins.getState();t===u.HelperCatState.READY?(this.icon.node.y=0,this.timeLab.node.parent.active=!1,this.icon.switch(0),this.timeLab.string=""):t===u.HelperCatState.CD?(this.timeLab.node.parent.active=!0,this.icon.switch(0),this.timeLab.string=c.default.DateUtils.getFormatBySecond(u.default.ins.getCatLeftCDTime()/1e3,10)):t===u.HelperCatState.WORKING&&(this.timeLab.node.parent.active=!0,this.icon.switch(1),this.timeLab.string=c.default.DateUtils.getFormatBySecond(u.default.ins.getCatLeftTime()/1e3,10))},i.onTouchBtn=function(){var t=u.default.ins.getState();t===u.HelperCatState.READY?c.default.ViewManager.open(43):t!==u.HelperCatState.CD&&t!==u.HelperCatState.WORKING||c.default.ViewManager.open(42)},o}(cc.Component),o([f(cc.Label)],i.prototype,"timeLab",void 0),o([f(s.default)],i.prototype,"icon",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],HelperCatData:[function(t,e,n){"use strict";cc._RF.push(e,"d476dG6j6JNkZGQlQs73mfN","HelperCatData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("CostumeAttr"),a=r("CostumeConst"),c=r("CostumeController");o.default=function(){function t(){this.attr=null,this.equipItems={},this.recalMap=[],this.cfg=null}var e=t.prototype;return e.init=function(t,e){var n;this.cfg=e;var r=c.default.ins;this.equipItems=((n={})[a.CostumeParts.hand]=r.getTempCostume(e.costume_hand,t.costume[a.CostumeParts.hand].grade,t.costume[a.CostumeParts.hand].lv),n[a.CostumeParts.body]=r.getTempCostume(e.costume_body,t.costume[a.CostumeParts.body].grade,t.costume[a.CostumeParts.body].lv),n[a.CostumeParts.head]=r.getTempCostume(e.costume_head,t.costume[a.CostumeParts.head].grade,t.costume[a.CostumeParts.head].lv),n)},e.record=function(t){this.recalMap.includes(t)||this.recalMap.push(t)},e.initAttr=function(){this.attr=new i.default;for(var t=a.CostumeParts.head;t<=a.CostumeParts.hand;t++)this.attr.addAttrBute("costume"+t,new i.default);this.calEquipCostumeAttr()},e.getGlobalAttr=function(){for(var t=[a.CostumeAbilityType.upgrade_discount,a.CostumeAbilityType.chef_move_speed,a.CostumeAbilityType.waiter_move_speed,a.CostumeAbilityType.chef_production_speed,a.CostumeAbilityType.waiter_production_speed,a.CostumeAbilityType.menu_item_upgrade_discount,a.CostumeAbilityType.additional_cashier_charge,a.CostumeAbilityType.extremely_generous_tip_rate,a.CostumeAbilityType.all_employees_move_speed,a.CostumeAbilityType.all_employees_perfect_dish_rate,a.CostumeAbilityType.all_employees_production_speed],e={},n=this.attr.finalAttr,r=0,o=t;r<o.length;r++){var i=o[r];n[i]&&(e[i]=n[i])}return e},e.calEquipCostumeAttr=function(){for(var t=this.attr,e=a.CostumeParts.head;e<=a.CostumeParts.hand;e++){var n=this.equipItems[e],r=t.getAttrBute("costume"+e);if(n){for(var o in n.attr)this.record(parseInt(o));r.addAttrDict("base",n.attr),r.claFinishAttr()}else r.reset()}t.claFinishAttr()},t}(),cc._RF.pop()},{}],HelperCatInfoItem:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f9188ALnbxGuYZORw17G+da","HelperCatInfoItem");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("StopAutoDeclare"),h=s("GameText"),f=s("CostumeBagItem"),d=s("MainCat"),p=cc._decorator,y=p.ccclass,v=p.property;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).equipCostumeNode=null,e.mainCat=null,e.costumeBagEquipItems=[],e.mainCatNode=null,e.nameLab=null,e.data=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){for(var t,e=r(this.equipCostumeNode.children);!(t=e()).done;){var n=t.value;this.costumeBagEquipItems.push(n.getComponent(f.CostumeBagItem))}this.mainCat=this.mainCatNode.getComponent(d.default)},i.setData=function(t){this.data=t;for(var e=this.costumeBagEquipItems.length,n=0;n<e;n++){var r=this.costumeBagEquipItems[n],o=t.equipItems[n+1];r.setData(o)}this.mainCat.updateSlot(t.equipItems),this.nameLab.string=h.GameText.getTextByStr(t.cfg.name)},o}(l.default),c([v({type:cc.Node})],s.prototype,"equipCostumeNode",void 0),c([v(cc.Node)],s.prototype,"mainCatNode",void 0),c([v({type:cc.Label})],s.prototype,"nameLab",void 0),s=c([y],s),u.default=s,cc._RF.pop()},{}],HelperCatInfoView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e99afrKe4xJXI8Y36m+oFOS","HelperCatInfoView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("BaseView"),s=i("CountDownLab"),u=(i("ViewConst"),i("LayerManager"),i("HelperCatInfoItem")),l=i("HelperCatService"),h=cc._decorator,f=h.ccclass,d=h.property;(i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).emptyNode=null,e.nromalNode=null,e.helperCatInfoItem=null,e.countDownLab=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){t.prototype.open.call(this);var e=l.default.ins.getState();e===l.HelperCatState.READY?this.onTouchClose():e===l.HelperCatState.CD?(this.emptyNode.active=!0,this.nromalNode.active=!1):e===l.HelperCatState.WORKING&&(this.emptyNode.active=!1,this.nromalNode.active=!0,this.helperCatInfoItem.setData(l.default.ins.curHelprCatData),this.countDownLab.setEndTime(l.default.ins.saveData.hireTime+1e3*l.default.ins.define.invite_appear_timer),this.countDownLab.startCount())},i.initUI=function(){t.prototype.initUI.call(this)},i.close=function(){t.prototype.close.call(this)},o}(c.default)).VIEW_INFO={prefabName:"HelperCatInfoView",zIndex:100,key:42,dir:"helpercat"},o([d({type:cc.Node})],i.prototype,"emptyNode",void 0),o([d({type:cc.Node})],i.prototype,"nromalNode",void 0),o([d(u.default)],i.prototype,"helperCatInfoItem",void 0),o([d(s.default)],i.prototype,"countDownLab",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],HelperCatService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"9937byU1NZA0JRc7wTcqRpx","HelperCatService");var c,s,u=t,l=e,h=n;Object.defineProperty(h,"__esModule",{value:!0}),h.HelperCatState=void 0;var f=u("App"),d=u("ControllerConst"),p=u("CostumeConst"),y=u("CostumeController"),v=u("HelperCatData"),g=u("GameConst"),m=u("GlobalAttr"),_=u("CatTimeOut"),b=u("BaseService"),w=u("RoleService");(l=s=h.HelperCatState||(h.HelperCatState={}))[l.NONE=0]="NONE",l[l.READY=1]="READY",l[l.WORKING=2]="WORKING",l[l.CD=3]="CD",u=cc._decorator.ccclass,(l=c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).helperCatDatas=[],e.curHelprCatData=null,e.cfgs=[],e.define=null,e.saveData=null,e._curCat=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){c.ins=this},i.getCfgsByTier=function(t){for(var e,n=[],o=r(this.cfgs);!(e=o()).done;){var i=e.value;i.tier===t&&n.push(i)}return n},i.isCatTimeOut=function(){return f.default.DateUtils.Now()-this.saveData.hireTime>1e3*this.define.invite_appear_timer},i.getCatLeftTime=function(){return 1e3*this.define.invite_appear_timer-f.default.DateUtils.Now()+this.saveData.hireTime},i.getCatLeftCDTime=function(){return 1e3*this.define.invite_appear_cooltime-f.default.DateUtils.Now()+this.saveData.hireTime},i.refresh=function(){this._curCat&&this._curCat.getComponent(_.default).removeImmediately(),this.saveData.hireTime=0,this._curCat=null},i.getState=function(){var t=(f.default.DateUtils.Now()-this.saveData.hireTime)/1e3;return!this.curHelprCatData||t>this.define.invite_appear_timer?t>this.define.invite_appear_cooltime?s.READY:s.CD:s.WORKING},i.init=function(){var t=f.default.ControllerManager.getControllerModel(d.ControllerConst.Game);if(this.define=f.default.ConfigManager.getConfig("Define"),this.cfgs=f.default.ConfigManager.getConfig("Helper"),t.data.helper||(t.data.helper={hireTime:0}),this.saveData=t.data.helper,this.saveData.cur)if(this.isCatTimeOut())delete this.saveData.cur;else{var e=new v.default;e.init(this.saveData.cur,this.getCfgById(this.saveData.cur.id)),e.initAttr(),this.setCurHelperCatData(e),this.createHelpCat()}},i.removeCurCat=function(){this.curHelprCatData=null,delete this.saveData.cur,this._curCat=null},i.onCatRemove=function(){if(this.curHelprCatData){var t=y.default.ins.getModel().attr;t.removeAttrDict("HELP_CAT"),t.claFinishAttr(),f.default.NotificationCenter.dispatch(g.GameNotificationConst.UPDATE_EQUIP_COSTUME_ATTR,this.curHelprCatData.recalMap),this.removeCurCat()}},i.createHelpCat=function(){var t=this.curHelprCatData.attr,e=this._curCat=w.default.ins.createManCat(t,""),n=e.addComponent(_.default),r=1e3*this.define.invite_appear_timer;n.setLeftTime(this.saveData.hireTime+r,r),n.setCallBack(this.onCatRemove,this),e.updateSlot(this.curHelprCatData.equipItems),e.getCookMoneyRate=function(){return m.default.ins.cookMoneyRate+t.getAttrValue(p.CostumeAbilityType.base,0)/100}},i.setCurHelperCatData=function(t){this.curHelprCatData=t;var e=y.default.ins.getModel().attr;e.addAttrDict("HELP_CAT",t.getGlobalAttr()),e.claFinishAttr(),f.default.NotificationCenter.dispatch(g.GameNotificationConst.UPDATE_EQUIP_COSTUME_ATTR,t.recalMap)},i.hireCat=function(t){return this.setCurHelperCatData(this.helperCatDatas[t]),this.helperCatDatas.length=0,this.saveData.cur=this.saveData.items[t],delete this.saveData.items,this.saveData.hireTime=f.default.DateUtils.Now(),this.createHelpCat(),this.curHelprCatData},i.getCfgById=function(t){for(var e=this.cfgs.length,n=0;n<e;n++)if(this.cfgs[n].idx===t)return this.cfgs[n]},i.getHelpCatDatas=function(){if(this.helperCatDatas.length)return this.helperCatDatas;for(var t=this.getCostumeCacheData(),e=t.length,n=0;n<e;n++){var r=t[n],o=new v.default;o.init(r,this.getCfgById(r.id)),o.initAttr(),this.helperCatDatas[n]=o}return this.helperCatDatas},i.getCostumeCacheData=function(){if(this.saveData.items)return this.saveData.items;for(var t=this.randomData(),e=this.saveData.items=[],n=y.default.ins.getModel().equipItems,r=t.length,o=0;o<r;o++){for(var i=t[o],a={},c=p.CostumeParts.head;c<=p.CostumeParts.hand;c++){var s=n[c],u=s?s.data.grade:p.RarityType.common,l=s?s.data.lv:0,h=f.default.RandomUtils.limitInteger(Math.max(u+i.costume_grade_min,p.RarityType.common),Math.max(u+i.costume_grade_max,p.RarityType.common)),d=f.default.RandomUtils.limitInteger(Math.max(i.costume_lv_min+l,1),Math.max(i.costume_lv_max+l,1));a[c]={lv:d,grade:h}}e.push({id:i.idx,costume:a})}return this.saveData.items},i.randomData=function(){var t=f.default.ConfigManager.getConfig("Define"),e=f.default.RandomUtils.limitInteger(t.tier1_min_count,t.tier1_max_count),n=f.default.RandomUtils.limitInteger(t.tier2_min_count,t.tier2_max_count);return t=f.default.RandomUtils.limitInteger(t.tier3_min_count,t.tier3_max_count),[].concat(f.default.RandomUtils.shuffle(this.getCfgsByTier(3)).splice(0,t),f.default.RandomUtils.shuffle(this.getCfgsByTier(2)).splice(0,n),f.default.RandomUtils.shuffle(this.getCfgsByTier(1)).splice(0,e))},i.desotrySelf=function(){this._curCat=null},o}(b.default)).ins=null,l=c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([u],l),h.default=l=c,cc._RF.pop()},{}],HoldEvent:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d2d05WNCK1Cw4JufdukJZmq","HoldEvent");var s=e,u=n,l=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(u,"__esModule",{value:!0});var h=cc._decorator,f=h.ccclass,d=h.property;h.menu,s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).callEvent=[],e.targets=[],e._interactable=!0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var i,s,u=o.prototype;return u.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchUpgradeStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchUpgradeEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchUpgradeCancel,this)},u.onTouchUpgradeStart=function(){this._interactable&&(this.schedule(this.onClick,.1,cc.macro.REPEAT_FOREVER,.5),this.node.scale=1.1)},u.onDisable=function(){this.unschedule(this.onClick)},u.onClick=function(){cc.Component.EventHandler.emitEvents(this.callEvent)},u.onTouchUpgradeEnd=function(){this._interactable&&(this.onTouchUpgradeCancel(),cc.Component.EventHandler.emitEvents(this.callEvent)),this.node.scale=1},u.onTouchUpgradeCancel=function(){this.unschedule(this.onClick),this.node.scale=1},i=o,(s=[{key:"interactable",get:function(){return this._interactable},set:function(t){if(t!==this._interactable)if(this._interactable=t)for(var e,n=r(this.targets);!(e=n()).done;)e.value.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"));else{this.unschedule(this.onClick),this.node.scale=1;for(var o,i=r(this.targets);!(o=i()).done;)o.value.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))}}}])&&a(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),o}(cc.Component),l([d({type:cc.Component.EventHandler})],s.prototype,"callEvent",void 0),l([d([cc.RenderComponent])],s.prototype,"targets",void 0),s=l([f],s),u.default=s,cc._RF.pop()},{}],HotUpdate:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"68c884j56VEQY2Z//ppukxR","HotUpdate");var i=t,a=e,c=n,s=(a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),i("ViewConst");var u=i("TipView"),l=i("App"),h=i("GameText");a=a([cc._decorator.ccclass],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._updating=!1,e._canRetry=!1,e._storagePath="",e._updateListener=!1,e._am=null,e._failCount=0,e.checkPromise=null,e.checkResolve=null,e.isCheck=!1,e.porgressFunc=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.log=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=Log).trace.apply(e,["HotUpdateLog:",t].concat(r))},a.versionCompareHandle=function(t,e){return this.log("JS Custom Version Compare: version A is "+t+", version B is "+e,0<parseInt(t)-parseInt(e)),parseInt(t)-parseInt(e)},a.checkCb=function(t){var e=!1;switch(this.log("Code: "+t.getEventCode()),this.isCheck=!0,t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.log("No local manifest file found, hot update skipped.");break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.log("Fail to download manifest file, hot update skipped.");break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.log("Already up to date with the latest remote version.");break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:e=!0,this.log("New version found, please try to update.");break;default:return}this._am.setEventCallback(null),this._updating=!1,e?this.hotUpdate():this.checkResolve&&(this.checkResolve(!1),this.checkResolve=this.checkPromise=null)},a.updateCb=function(t){return s(this,void 0,void 0,r().mark(function e(){var n,o,i,a,c;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!1,a=!1,e.t0=(Log.trace("updateCb:",t.getEventCode()),t.getEventCode()),e.next=e.t0===jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST?4:e.t0===jsb.EventAssetsManager.UPDATE_PROGRESSION?6:e.t0===jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST?10:e.t0===jsb.EventAssetsManager.ERROR_PARSE_MANIFEST?10:e.t0===jsb.EventAssetsManager.ALREADY_UP_TO_DATE?12:e.t0===jsb.EventAssetsManager.UPDATE_FINISHED?14:e.t0===jsb.EventAssetsManager.UPDATE_FAILED?16:e.t0===jsb.EventAssetsManager.ERROR_UPDATING?18:e.t0===jsb.EventAssetsManager.ERROR_DECOMPRESS?20:21;break;case 4:return this.log("No local manifest file found, hot update skipped."),a=!0,e.abrupt("break",21);case 6:return this.log(t.getDownloadedFiles()+" / "+t.getTotalFiles()),this.log(t.getDownloadedBytes()+" / "+t.getTotalBytes()),this.log(t.getPercent()),this.porgressFunc&&this.porgressFunc(t.getPercent(),t.getDownloadedBytes(),t.getTotalBytes()),(c=t.getMessage())&&this.log("Updated file: "+c),e.abrupt("break",21);case 10:return this.log("Fail to download manifest file, hot update skipped."),a=!0,e.abrupt("break",21);case 12:return this.log("Already up to date with the latest remote version."),a=!0,e.abrupt("break",21);case 14:return this.log("Update finished. "+t.getMessage()),i=!0,e.abrupt("break",21);case 16:return this.log("Update failed. "+t.getMessage()),this._updating=!1,this._canRetry=!0,l.default.ViewManager.open(13,{curState:u.TIPSTATE.SURE,leftFunc:function(){cc.audioEngine.stopAll(),cc.game.restart()},leftThisObj:this,tipsStr:h.GameText.getText(lang.hotupdate_failed_tip)}),e.abrupt("break",21);case 18:return Log.error("Asset update error: "+t.getAssetId()+", "+t.getMessage()),e.abrupt("break",21);case 20:this.log(t.getMessage());case 21:a&&(this._am.setEventCallback(null),this._updating=!1,this._canRetry?this.retry():(this.checkResolve(!1),this.checkResolve=this.checkPromise=null)),i&&(this._am.setEventCallback(null),this._updateListener=null,n=jsb.fileUtils.getSearchPaths(),o=this._am.getLocalManifest().getSearchPaths(),this.log(JSON.stringify(o)),Array.prototype.unshift.apply(n,o),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(n)),jsb.fileUtils.setSearchPaths(n),cc.sys.localStorage.removeItem("isUPdateing"),cc.audioEngine.stopAll(),cc.game.restart());case 22:case"end":return e.stop()}},e,this)}))},a.loadCustomManifest=function(){},a.retry=function(){!this._updating&&this._canRetry&&(this._canRetry=!1,this.log("Retry failed Assets..."),this._am.downloadFailedAssets())},a.timeOut=function(t){var e=this;return new Promise(function(n){l.default.TimerManager.setTimeOut(t,function(){e.isCheck||n(!1)},e)})},a.showUpdatePackTip=function(){var t=this;return new Promise(function(e){l.default.ViewManager.open(13,{curState:u.TIPSTATE.SURE_CANCEL,leftBtnText:"\u786e\u5b9a",leftFunc:function(){e()},rightFunc:function(){e()},rightThisObj:t,rightBtnText:"\u53d6\u6d88",leftThisObj:t,tipsStr:"\u68c0\u6d4b\u5230\u65b0\u7684\u7248\u672c,\u662f\u5426\u4e0b\u8f7d\u66f4\u65b0!"})})},a.checkUpdate=function(t){var e=this;return cc.sys.isNative?this.checkPromise||(this.porgressFunc=t,this.checkPromise=Promise.race([new Promise(function(t){if(e.checkResolve=t,e._am.getState()===jsb.AssetsManager.State.UNINITED&&(cc.sys.os===cc.sys.OS_ANDROID?e._am.loadLocalManifest("@assets/project.manifest"):e._am.loadLocalManifest(jsb.fileUtils.fullPathForFilename("project.manifest"))),!e._am.getLocalManifest()||!e._am.getLocalManifest().isLoaded())return e.log("Failed to load local manifest ..."),void t(!1);e._am.setEventCallback(e.checkCb.bind(e)),e._am.checkUpdate(),e._updating=!0}),this.timeOut(1e4)]),this.checkPromise):Promise.resolve(!1)},a.hotUpdate=function(){this._am&&!this._updating&&(this._am.setEventCallback(this.updateCb.bind(this)),cc.sys.localStorage.setItem("isUPdateing","true"),this._failCount=0,this._am.update(),this._updating=!0)},a.show=function(){},a.onLoad=function(){var t=this;cc.sys.isNative&&(this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"blackjack-remote-asset",this.log("this._storagePath:",this._storagePath),this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle.bind(this)),this._am.setVerifyCallback(function(e,n){var r=n.compressed,o=n.md5,i=n.path;return n.size,!!r||(t.log("Verification passed : "+i+" ("+o+")"),!0)}),this.log("Hot update is ready, please check or directly update."),cc.sys.os===cc.sys.OS_ANDROID&&this.log("Max concurrent tasks count have been limited to 2"))},a.onDestroy=function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)},i}(cc.Component)),c.default=a,cc._RF.pop()},{}],Http:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"c8037MWlY5HWZnOH1ZJ6lGG","Http");var o=n,i=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(o,"__esModule",{value:!0}),o.Http=void 0,o.Http=function(){function t(){this.httpCache={}}var e=t.prototype;return e.sleep=function(t){return new Promise(function(e){setTimeout(e,t)})},e.getRequestUrlTail=function(t){var e=[];for(var n in t){var r=t[n];e.push(n+"="+encodeURIComponent(r)+"&")}e.sort();var o=e.join("");return o.substring(0,o.length-1)},e.requestWithTokenAndCacheAsync=function(t,e,n,r,o,i,a,c){void 0===r&&(r=0),void 0===o&&(o=!1),void 0===i&&(i="GET"),void 0===c&&(c=1e4);var s=this.httpCache[t];return!o&&s&&Date.now()<s.reqTime+r?s.data:(c=this.requestWithTokenAsync(t,e,n,i,a,c),r&&(this.httpCache[t]={reqTime:Date.now(),data:c}),c)},e.post=function(t,e,n,o,a){return void 0===n&&(n=0),void 0===o&&(o=1e3),void 0===a&&(a=1e4),i(this,void 0,void 0,r().mark(function i(){return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.requestAsync(t,e,"POST",a);case 3:return r.abrupt("return",r.sent);case 6:r.prev=6,r.t0=r.catch(0),cc.error(r.t0);case 9:if(r.t1=o,!r.t1){r.next=13;break}return r.next=13,this.sleep(o);case 13:if(n--){r.next=0;break}case 14:return r.abrupt("return",null);case 15:case"end":return r.stop()}},i,this,[[0,6]])}))},e.requestAsync=function(t,e,n,r,o){var i=this;return void 0===n&&(n="POST"),void 0===r&&(r=1e4),new Promise(function(a,c){var s=new XMLHttpRequest;s.timeout=r,s.onerror=s.ontimeout=function(){c("\u8bf7\u6c42\u8d85\u65f6"),c=null},s.onreadystatechange=function(){var t,e;4==s.readyState&&(t=400<=s.status||0==s.status,e=s.responseText,t?c():a(e))};var u=i.getRequestUrlTail(e);if(o)for(var l in o)s.setRequestHeader(l,o[l]);"POST"===n?(s.open(n,t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(u)):"POST_JSON"===n?(s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(e))):(s.open(n,u?t+"?"+u:t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send())})},e.requestWithTokenAsync=function(t,e,n,r,o,i){var a=this;return void 0===r&&(r="POST"),void 0===i&&(i=1e4),new Promise(function(c){var s,u=new XMLHttpRequest;u.timeout=i,u.onerror=function(t){cc.error(t),c()},u.ontimeout=function(){Log.trace("\u8bf7\u6c42\u8d85\u65f6!"),c()},u.onreadystatechange=function(){var t;4==u.readyState&&((t=400<=u.status||0==u.status)?(cc.error("\u8bf7\u6c42\u9519\u8bef",t),c()):(t=o?u.response:u.responseText,c(t)))},o&&(u.responseType=o),"POST"===r?(u.open(r,t,!0),u.setRequestHeader("Access-Token",n),e instanceof Uint8Array?(u.setRequestHeader("Content-Type","application/octet-stream"),u.send(e.buffer)):(u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(e)))):(u.open(r,t,!0),s=a.getRequestUrlTail(e),u.open(r,s?t+"?"+s:t,!0),u.setRequestHeader("Access-Token",n),u.send())})},t}(),cc._RF.pop()},{}],HuawenMoveAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"79585r0v+NAHIMM6WdFFkWk","HuawenMoveAni");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;c.menu,o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).huawen_1=null,e.huawen_2=null,e.targetPos=null,e.originPos=null,e.speed=50,e.nomal=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.nomal=this.targetPos.sub(this.originPos).normalize()},i.update=function(t){this.huawen_1.x+=t*this.speed*this.nomal.x,this.huawen_1.y+=t*this.speed*this.nomal.y,this.huawen_2.x+=t*this.speed*this.nomal.x,this.huawen_2.y+=t*this.speed*this.nomal.y,this.huawen_1.x>this.targetPos.x&&(this.huawen_1.position=this.originPos),this.huawen_2.x>this.targetPos.x&&(this.huawen_2.position=this.originPos)},i.onTouchClose=function(){this.huawen_1.active=!1,this.huawen_2.active=!1},o}(cc.Component),a([u(cc.Node)],o.prototype,"huawen_1",void 0),a([u(cc.Node)],o.prototype,"huawen_2",void 0),a([u(cc.Vec2)],o.prototype,"targetPos",void 0),a([u(cc.Vec2)],o.prototype,"originPos",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],IAdObject:[function(t,e){"use strict";cc._RF.push(e,"a99d3oEX/VHgYmg3G8+h280","IAdObject"),cc._RF.pop()},{}],IBuff:[function(t,e,n){"use strict";cc._RF.push(e,"95c04YAzwtDhKfZb/hjO7YP","IBuff");var r,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.BUFF_TYPE=o.BuffAttr=void 0,o.BuffAttr=function(){function t(){this.ObjectPoolKey=null,this.attr=null,this.defaultAttr=null}t.create=function(t){var e=ObjectPool.pop("BuffAttr");return e.defaultAttr=t||Object.create(null),e};var e=t.prototype;return e.setBuffValue=function(t,e){this.attr[t]=e},e.getBuffValue=function(t){return this.attr[t]},e.resetBuffByType=function(t){this.setBuffValue(t,0)},e.addBuffValue=function(t,e){-1<a.indexOf(t)?(this.attr[t]=this.attr[t]*e/100,this.attr[t]<=0&&(this.attr[t]=.01)):this.attr[t]+=e},e.addBuffAttr=function(t){if(t){var e=this.attr,n=t.attr;for(var r in n){var o=n[r];-1<c.indexOf(r)?(e[r]=(100*e[r]-100+(100*o-100)+100)/100,e[r]<=0&&(e[r]=.01)):-1<a.indexOf(r)?(e[r]=e[r]*o,e[r]<=0&&(e[r]=.01)):e[r]+=o}}},e.claFinish=function(){for(var t=0;t<c.length;t++){var e=c[t],n=100+this[e];this.attr[e]=n<0?.01:n/100}},e.reset=function(){this.attr=Object.assign(Object.create(null),this.defaultAttr)},t}();var i=[];(o=r=o.BUFF_TYPE||(o.BUFF_TYPE={}))[o.ADD_IDLE=0]="ADD_IDLE",o[o.CUSTOMER_MOVE_SPEED=1]="CUSTOMER_MOVE_SPEED",o[o.WAITER_SPEED=2]="WAITER_SPEED",o[o.CHEF_SPEED=3]="CHEF_SPEED",o[o.COOK_SPEED=4]="COOK_SPEED",o[o.FOOD_SELL_RATE=5]="FOOD_SELL_RATE",o[o.ALL_EMPLOYEES_MOVE_SPEED=6]="ALL_EMPLOYEES_MOVE_SPEED";var a=[r[r.ADD_IDLE],r[r.FOOD_SELL_RATE]],c=[];for(var s in r)isNaN(s)&&i.push(s);cc._RF.pop()},{}],IRoadSeeker:[function(t,e,n){"use strict";cc._RF.push(e,"e4f3f6Ez/xAyqwa4NhT8jTY","IRoadSeeker");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),cc._RF.pop()},{}],IdleView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"785c5KAzJtEJrZIgXfauz4e","IdleView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("BaseView"),h=a("ControllerConst"),f=a("GameConst"),d=a("GlobalAttr"),p=a("MyBigLong"),y=cc._decorator,v=y.ccclass,g=y.property;y.menu,a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).moneyLab=null,e.idleTimeLab=null,e.progressBar=null,e.idleTime=0,e.bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(e,n){t.prototype.open.call(this),this.idleTime=e;var r=d.default.ins.offlineRewardMaxTime;this.idleTimeLab.string=u.default.DateUtils.getFormatBySecond(e,10),this.progressBar.progress=e/r,this.moneyLab.string=p.default.toString(n)},a.onTouchAd=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(h.ControllerConst.Game,f.GameConst.GET_IDLE,this.idleTime,!0);case 2:case"end":return t.stop()}},t,this)}))},a.onTouchClose=function(){t.prototype.onTouchClose.call(this),u.default.ControllerManager.applyFunc(h.ControllerConst.Game,f.GameConst.GET_IDLE,this.idleTime,!1)},i}(l.default),i([g(cc.Label)],a.prototype,"moneyLab",void 0),i([g(cc.Label)],a.prototype,"idleTimeLab",void 0),i([g(cc.ProgressBar)],a.prototype,"progressBar",void 0),a=i([v],a),c.default=a,cc._RF.pop()},{}],InputHandler:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"115c2HFaMtAcY8v0E3jICC4","InputHandler");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.InputType=void 0;var c=i("Toucher"),s=i("TouchPinch"),u=cc._decorator,l=u.ccclass,h=u.property,f=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).inputNode=null,e.stickBaseNode=null,e.stickNode=null,e.screenCoord=!0,e.ignoreInput=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.inputNode=this.inputNode||this.node,this._eventTarget=new cc.EventTarget,this.initToucher(),this.initKeyboard(),this.initMouse()},i.initToucher=function(){var t=this;cc.macro.TOUCH_TIMEOUT=120,this.touchFingers=0,this.toucher=this.inputNode.getComponent(c.default);var e=this.toucher;e.init(),e.registerEvents(this.inputNode,!1),e.registerEventsOnChildren(this.inputNode,!1);var n=new s.default;e.onStart=function(e,r,o){var i=o.target;t.touchFingers=t.getFingerCount("onStart"),1===t.touchFingers?(n.reset(),n.onTouchStart(o)):2===t.touchFingers?n.onTouchStart(o):n.reset(),t._eventTarget.emit(a.InputType.TOUCH_START,e,r,i)},e.onMove=function(e,r,o){o=o.target,t.touchFingers=t.getFingerCount("onMove"),2===t.touchFingers&&n.onPinch()&&(t.screenCoord&&(n.pinchCenter.y=cc.visibleRect.height-n.pinchCenter.y),t._eventTarget.emit(a.InputType.PINCH,n.pinchCenter,n.lastPinchDist,n.pinchDist,o))},e.onEnd=function(e,r,o){var i=o.target;t.touchFingers=t.getFingerCount("onEnd"),0===t.touchFingers?n.reset():n.onTouchEnd(o),t.screenCoord&&(r=cc.visibleRect.height-r),t._eventTarget.emit(a.InputType.TOUCH_END,e,r,i)},e.onPan=function(e,n,r,o,i){i=i.target,1===t.touchFingers&&(t.screenCoord&&(n=cc.visibleRect.height-n,o=-o),t._eventTarget.emit(a.InputType.PAN,e,n,r,o,i))},e.onTap=function(e,n,r){t.touchFingers=t.getFingerCount("onTap"),r=r.target,t._eventTarget.emit(a.InputType.TAP,e,n,r)},e.holdStart=function(e,n,r){r=r.target,t.touchFingers=t.getFingerCount("holdStart"),1===t.touchFingers&&(t.screenCoord&&(n=cc.visibleRect.height-n),t._eventTarget.emit(a.InputType.HOLD_START,e,n,r))},e.holdEnd=function(e,n,r){t.touchFingers=t.getFingerCount("holdEnd"),r=r.target,t.screenCoord&&(n=cc.visibleRect.height-n),t._eventTarget.emit(a.InputType.HOLD_END,e,n,r)},e.onJoystickChanged=function(e,n){var r=e.pressed,o=t.stickBaseNode,i=t.stickNode;r&&(o.width=2*e.radius,o.height=2*e.radius,o.setPosition(e.centerX-t.inputNode.width/2,e.centerY-t.inputNode.height/2),i.setPosition(e.x-t.inputNode.width/2,e.y-t.inputNode.height/2)),i.active=r,o.active=r,t.screenCoord&&(e.rotation=-e.rotation),n=n.target,e.pressed&&e.distance,t._eventTarget.emit(a.InputType.JOYSTICK,e,n)}},i.addEventListener=function(t,e,n,r){this._eventTarget.on(t,e,n,r)},i.addEventListenerOnce=function(t,e,n,r){this._eventTarget.once(t,e,n,r)},i.removeEventListener=function(t,e,n){this._eventTarget.off(t,e,n)},i.onTouchStart=function(t,e,n){this._eventTarget.on(a.InputType.TOUCH_START,t,e,n)},i.onTouchEnd=function(t,e,n){this._eventTarget.on(a.InputType.TOUCH_END,t,e,n)},i.onPan=function(t,e,n){this._eventTarget.on(a.InputType.PAN,t,e,n)},i.onTap=function(t,e,n){this._eventTarget.on(a.InputType.TAP,t,e,n)},i.onHoldStart=function(t,e,n){this._eventTarget.on(a.InputType.HOLD_START,t,e,n)},i.onHoldEnd=function(t,e,n){this._eventTarget.on(a.InputType.HOLD_END,t,e,n)},i.onPinch=function(t,e,n){this._eventTarget.on(a.InputType.PINCH,t,e,n)},i.onJoystickChanged=function(t,e,n){this._eventTarget.on(a.InputType.JOYSTICK,t,e,n)},i.onKeyDown=function(t){this._eventTarget.on(a.InputType.KEY_DOWN,t)},i.onKeyUp=function(t){this._eventTarget.on(a.InputType.KEY_UP,t)},i.onMouseWheel=function(t){this._eventTarget.on(a.InputType.MOUSE_WHEEL,t)},i.offTouchStart=function(t,e){this._eventTarget.off(a.InputType.TOUCH_START,t,e)},i.offTouchEnd=function(t,e){this._eventTarget.off(a.InputType.TOUCH_END,t,e)},i.offPan=function(t,e){this._eventTarget.off(a.InputType.PAN,t,e)},i.offTap=function(t,e){this._eventTarget.off(a.InputType.TAP,t,e)},i.offHoldStart=function(t,e){this._eventTarget.off(a.InputType.HOLD_START,t,e)},i.offHoldEnd=function(t,e){this._eventTarget.off(a.InputType.HOLD_END,t,e)},i.offPinch=function(t,e){this._eventTarget.off(a.InputType.PINCH,t,e)},i.offJoystickChanged=function(t,e){this._eventTarget.off(a.InputType.JOYSTICK,t,e)},i.offKeyDown=function(t){this._eventTarget.off(a.InputType.KEY_DOWN,t)},i.offKeyUp=function(t){this._eventTarget.off(a.InputType.KEY_UP,t)},i.offMouseWheel=function(t){this._eventTarget.off(a.InputType.MOUSE_WHEEL,t)},i.initKeyboard=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDownListener,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUpListener,this)},i.initMouse=function(){cc.systemEvent.on(cc.Node.EventType.MOUSE_WHEEL,this.mouseWheelListener,this)},i.getFingerCount=function(){return cc.internal.inputManager.getGlobalTouchCount()},i.keyDownListener=function(t){this._eventTarget.emit(a.InputType.KEY_DOWN,t)},i.keyUpListener=function(t){this._eventTarget.emit(a.InputType.KEY_UP,t)},i.mouseWheelListener=function(t){this._eventTarget.emit(a.InputType.MOUSE_WHEEL,t)},i.lateUpdate=function(){},i.onDestroy=function(){this._eventTarget.clear(),this._eventTarget=null,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.keyDownListener,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUpListener,this),cc.systemEvent.off(cc.Node.EventType.MOUSE_WHEEL,this.mouseWheelListener,this)},o}(cc.Component);o([h(cc.Node)],f.prototype,"inputNode",void 0),o([h(cc.Node)],f.prototype,"stickBaseNode",void 0),o([h(cc.Node)],f.prototype,"stickNode",void 0),o([h()],f.prototype,"screenCoord",void 0),f=o([l],f),a.default=f,f.prototype.on=f.prototype.addEventListener,f.prototype.once=f.prototype.addEventListenerOnce,f.prototype.off=f.prototype.removeEventListener,a.InputType={TOUCH_START:"touchStart",TOUCH_END:"touchEnd",PAN:"pan",TAP:"tap",HOLD_START:"holdStart",HOLD_END:"holdEnd",PINCH:"pinch",JOYSTICK:"joystick",KEY_DOWN:"keyDown",KEY_UP:"keyUP",MOUSE_WHEEL:"mouseWheel"},cc._RF.pop()},{}],Inverter:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"19dbeTLc5JFnYQemN4fijmG","Inverter");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Decorator");i.default=function(t){var e,n;function o(e){var n=(void 0===e?{}:e).child,r=void 0===n?null:n;return t.call(this,{child:r,name:"Inverter"})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(t){return this.child?((t=this.child._execute(t))==a.SUCCESS?t=a.FAILURE:t==a.FAILURE&&(t=a.SUCCESS),t):a.ERROR},o}(c.default),cc._RF.pop()},{}],InviteHelperCatView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"defac4c+UpBYLGkS+CDLmy8","InviteHelperCatView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("List"),s=i("BaseView"),u=(i("ViewConst"),i("LayerManager"),i("HelperCatInfoItem")),l=i("HelperCatService"),h=cc._decorator,f=h.ccclass,d=h.property;(i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemList=null,e.bgType=1,e._helperCatDatas=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){t.prototype.open.call(this);var e=this._helperCatDatas=l.default.ins.getHelpCatDatas();this.itemList.numItems=e.length},i.initUI=function(){t.prototype.initUI.call(this)},i.close=function(){t.prototype.close.call(this)},i.onRenderItem=function(t,e){var n=this;t.getComponent(u.default).setData(this._helperCatDatas[e]),t.getChildByName("InviteBtn").on("click",function(){l.default.ins.hireCat(e),n.onTouchClose()},this)},o}(s.default)).VIEW_INFO={prefabName:"InviteHelperCatView",zIndex:100,key:43,dir:"helpercat"},o([d({type:c.default})],i.prototype,"itemList",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],ItemBase:[function(t,e,n){"use strict";cc._RF.push(e,"dd788B5dp9L5KuqXf0y29Cr","ItemBase");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ItemBase=void 0;var i=r("GameText"),a=r("BagConst");o.ItemBase=function(){function t(){this._desc=""}var e=t.prototype;return e.setConfData=function(t){this.data=t},e.getItemPic=function(){return"Texture/itemIcon/"+this.data.itemIcon},e.getName=function(){return i.GameText.getTextByStr(this.data.name)},e.getDesc=function(){return i.GameText.getTextByStr(this.data.desc)},e.getCnt=function(){return 0},e.getDisplayCnt=function(){return this.getCnt()+""},e.isCostume=function(){return this.data.itemType==a.ItemType.COSTUME&&this.data.costume.costumeId},e.use=function(t){void 0===t&&(t=0)},e.setMemento=function(t){this.cnt=t?t.cnt:0},e.createMemento=function(){if(this.cnt)return{cnt:this.cnt}},t}(),cc._RF.pop()},{}],ItemRenderer:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"53159Dqef1La4gHG9B3XzZG","ItemRenderer");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("ListView"),u=cc._decorator,l=u.ccclass,h=u.property;u.menu,a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).data=null,e.recycled=!1,e.nodeSelected=null,e.nodeUnselected=null,e.nodeDisableSelected=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onSelected=function(){this.nodeSelected&&(this.nodeSelected.active=!0),this.nodeUnselected&&(this.nodeUnselected.active=!1)},a.isSelected=function(){return this.listView.selectedItems.include(this.data)},a.onClickSelected=function(){this.onSelected()},a.onCancelSelected=function(){this.onUnselected()},a.onUnselected=function(){this.nodeSelected&&(this.nodeSelected.active=!1),this.nodeUnselected&&(this.nodeUnselected.active=!0)},a.onEnableSelect=function(){this.nodeDisableSelected&&(this.nodeDisableSelected.active=!1)},a.onDisableSelect=function(){this.nodeDisableSelected&&(this.nodeDisableSelected.active=!0)},a.onDestroy=function(){},a.dataChanged=function(){},a.setData=function(t,e){void 0===e&&(e=!1);var n,r=this;this.data&&this.data===t&&!e&&!this.recycled||(n=this.data,this.data=t,this.dataChanged(n),1<(e=this.getComponents(o)).length&&e.forEach(function(e){e!=r&&(e.data=t,e.dataChanged(n))})),this.listView&&this.listView.node.emit(s.ListViewEvent.ITEM_DATA_CHANGED,this)},a.reportItemTapped=function(){this.listView?this.listView.onItemTap(this):this.node.emit(s.ListViewEvent.ITEM_TAP,this.data)},a.checkSelect=function(){return!0},i}(cc.Component),i([h(cc.Node)],a.prototype,"nodeSelected",void 0),i([h(cc.Node)],a.prototype,"nodeUnselected",void 0),i([h(cc.Node)],a.prototype,"nodeDisableSelected",void 0),a=o=i([l],a),c.default=a=o,cc._RF.pop()},{}],JsonCfgBase:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"83d42J6ETxLB5bv2luxYqVM","JsonCfgBase");var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.parseConfigMap=a.parseConfigList=void 0,a.parseConfigList=function(t){return{parse:function(e){for(var n,o=[],i=r(e);!(n=i()).done;){var a=n.value,c=new t;o.push(c),Object.assign(c,a)}return o}}},a.parseConfigMap=function(t){return{parse:function(e){var n={};for(var r in e){var o=new t;n[r]=o,Object.assign(o,e[r])}return n}}},cc._RF.pop()},{}],LabelTip:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"05734FzZrhFxL8w1cRAcdKj","LabelTip");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property,l=(c.menu,c.executeInEditMode);o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).label=null,e.paddingX=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.leftToRight=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=1),this.isAutoDestroy=t,this.node.opacity=0,this.node.x=-cc.winSize.width/2,this.node.y=0,cc.tween(this.node).to(.3,{x:-50,opacity:255},{easing:"sineInOut"}).to(e,{x:50}).to(.3,{x:cc.winSize.width/2},{easing:"sineIn"}).call(this.showFinish.bind(this)).start()},i.init=function(t,e,n,r){return void 0===n&&(n=40),t.addChild(this.node),this.label.fontSize=n,this.label.lineHeight=n,this.label.string=e,r&&(this.node.color=r),this},i.showTipSmallToBig=function(t){void 0===t&&(t=!0),this.isAutoDestroy=t,this.node.opacity=0,this.node.x=0,this.node.y=0,this.node.scale=0,this.tween=cc.tween(this.node).to(.2,{scale:1,opacity:255}).delay(.8).to(.5,{opacity:0}).call(this.showFinish.bind(this)).start()},i.flyUp=function(t,e,n){void 0===n&&(n=!0),this.isAutoDestroy=n,this.node.y=e,this.node.x=t,this.node.opacity=255,cc.tween(this.node).to(.1,{scale:1.1},{easing:cc.easing.sineOut}).to(.1,{scale:1},{easing:cc.easing.sineIn}).to(.7,{y:e+50}).delay(.2).to(.3,{opacity:0}).call(this.showFinish.bind(this)).start()},i.showFinish=function(){this.tween=null,this.isAutoDestroy&&this.destroyLab()},i.destroyLab=function(){this.node.pool?(this.node.pool.push(this.node),this.node.pool=null):(this.node.removeFromParent(),this.node.destroy())},o}(cc.Component),a([u(cc.Label)],o.prototype,"label",void 0),a([u()],o.prototype,"paddingX",void 0),o=a([s,l],o),i.default=o,cc._RF.pop()},{}],LangConst:[function(t,e){"use strict";cc._RF.push(e,"1ea17d1h2hOMpRbf9TY4I0/","LangConst");var n,r=e;(r=n=n||{})[r.ability_title=0]="ability_title",r[r.common_btn_double_get=1]="common_btn_double_get",r[r.common_btn_fail=2]="common_btn_fail",r[r.common_btn_zero=3]="common_btn_zero",r[r.common_buy=4]="common_buy",r[r.common_coin=5]="common_coin",r[r.common_days=6]="common_days",r[r.common_day=7]="common_day",r[r.common_diamond=8]="common_diamond",r[r.common_get=9]="common_get",r[r.common_hour=10]="common_hour",r[r.common_level_up=11]="common_level_up",r[r.common_loading=12]="common_loading",r[r.common_minute=13]="common_minute",r[r.common_month=14]="common_month",r[r.common_per_second=15]="common_per_second",r[r.common_second=16]="common_second",r[r.common_sure=17]="common_sure",r[r.common_use=18]="common_use",r[r.common_year=19]="common_year",r[r.common_level=20]="common_level",r[r.common_free=21]="common_free",r[r.common_ok=22]="common_ok",r[r.common_diamond_not_enough=23]="common_diamond_not_enough",r[r.common_diamond_hint=24]="common_diamond_hint",r[r.common_im_buy=25]="common_im_buy",r[r.common_diamond_title=26]="common_diamond_title",r[r.common_coin_not_enough=27]="common_coin_not_enough",r[r.common_bought=28]="common_bought",r[r.common_double=29]="common_double",r[r.coomon_watch=30]="coomon_watch",r[r.common_ad_load=31]="common_ad_load",r[r.common_free_get=32]="common_free_get",r[r.common_not_eara=33]="common_not_eara",r[r.common_ad_ticket_not_enough=34]="common_ad_ticket_not_enough",r[r.common_not_unlock=35]="common_not_unlock",r[r.common_ad_unlock=36]="common_ad_unlock",r[r.common_finish_get=37]="common_finish_get",r[r.common_open=38]="common_open",r[r.common_remaining_time=39]="common_remaining_time",r[r.common_save=40]="common_save",r[r.common_playerInfo=41]="common_playerInfo",r[r.common_exit=42]="common_exit",r[r.common_back=43]="common_back",r[r.common_think=44]="common_think",r[r.common_merge=45]="common_merge",r[r.common_harvest=46]="common_harvest",r[r.common_cancel=47]="common_cancel",r[r.common_not_enough=48]="common_not_enough",r[r.offlineText=49]="offlineText",r[r.minutesAgo=50]="minutesAgo",r[r.hoursAgo=51]="hoursAgo",r[r.daysAgo=52]="daysAgo",r[r.login_fail_tip=53]="login_fail_tip",r[r.net_connect_fail_tip=54]="net_connect_fail_tip",r[r.exit_game_tip=55]="exit_game_tip",r[r.time_unit_day=56]="time_unit_day",r[r.time_unit_hour=57]="time_unit_hour",r[r.time_unit_minute=58]="time_unit_minute",r[r.time_unit_second=59]="time_unit_second",r[r.common_ad_times_tip=60]="common_ad_times_tip",r[r.common_ad_loading=61]="common_ad_loading",r[r.common_ad_load_fail=62]="common_ad_load_fail",r[r.gold_num_desc=63]="gold_num_desc",r[r.ui_no_mail=64]="ui_no_mail",r[r.ui_no_upgrade_stage=65]="ui_no_upgrade_stage",r[r.ui_idle_desc=66]="ui_idle_desc",r[r.str_grade1=67]="str_grade1",r[r.str_grade2=68]="str_grade2",r[r.str_grade3=69]="str_grade3",r[r.str_grade4=70]="str_grade4",r[r.str_grade5=71]="str_grade5",r[r.str_grade6=72]="str_grade6",r[r.str_grade7=73]="str_grade7",r[r.str_grade8=74]="str_grade8",r[r.str_grade9=75]="str_grade9",r[r.str_grade10=76]="str_grade10",r[r.str_grade11=77]="str_grade11",r[r.costume_max_lv=78]="costume_max_lv",r[r.costume_max_lv_reven=79]="costume_max_lv_reven",r[r.costume_add_new=80]="costume_add_new",r[r.costume_merge_tip_title=81]="costume_merge_tip_title",r[r.costume_return_coin_title=82]="costume_return_coin_title",r[r.costume_return_coin_tip=83]="costume_return_coin_tip",r[r.costume_merge_ani_title=84]="costume_merge_ani_title",r[r.ui_reward_pop_up_next=85]="ui_reward_pop_up_next",r[r.guide_tutorial_B_1=86]="guide_tutorial_B_1",r[r.guide_tutorial_C_1=87]="guide_tutorial_C_1",r[r.guide_tutorial_D_1=88]="guide_tutorial_D_1",r[r.guide_tutorial_E_1=89]="guide_tutorial_E_1",r[r.guide_tutorial_F_1=90]="guide_tutorial_F_1",r[r.guide_tutorial_G_1=91]="guide_tutorial_G_1",r[r.shop_ui_bank_desc=92]="shop_ui_bank_desc",r[r.shop_ui_bank_tip_0=93]="shop_ui_bank_tip_0",r[r.shop_ui_bank_tip_1=94]="shop_ui_bank_tip_1",r[r.shop_ui_bank_bubble=95]="shop_ui_bank_bubble",r[r.ui_remove_ad_desc=96]="ui_remove_ad_desc",r[r.ui_remove_ad_free_money=97]="ui_remove_ad_free_money",r[r.ui_remove_ad_double_buff=98]="ui_remove_ad_double_buff",r[r.ui_remove_ad_offline=99]="ui_remove_ad_offline",r[r.ui_remove_ad_box=100]="ui_remove_ad_box",r[r.ui_remove_ad_buff=101]="ui_remove_ad_buff",r[r.ui_remove_ad_free_gem=102]="ui_remove_ad_free_gem",r[r.ui_box_lv_tip_title=103]="ui_box_lv_tip_title",window.lang=n,cc._RF.pop()},{}],LayerManager:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b9665PItodENKNgtKFX4jKT","LayerManager");var o,i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property;(i=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).layerBg=null,e.effectMovie=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.showChangeSceneEffect=function(){var t=this;return new Promise(function(e){t.effectMovie.active=!0,cc.tween(t.effectMovie.getChildByName("LoadReel")).by(2,{angle:360}).repeatForever().start(),e()})},a.hideChangeSceneEffect=function(){this.effectMovie.active&&(this.effectMovie.getChildByName("LoadReel").stopAllActions(),this.effectMovie.active=!1)},a.onLoad=function(){o.ins=this,cc.game.addPersistRootNode(this.node),cc.game.addPersistRootNode(this.effectMovie),this.effectMovie.active=!1,this.layerBg&&(o.layerBg=cc.instantiate(this.layerBg),o.layerBg.on(cc.Node.EventType.TOUCH_END,o.onTouchBg,this))},i.reset=function(){cc.isValid(o.layerBg)||(o.layerBg=cc.instantiate(this.layerBg),o.layerBg.on(cc.Node.EventType.TOUCH_END,o.onTouchBg,this))},i.onTouchBg=function(){o.curBgView&&o.curBgView.onTouchBg&&o.curBgView.onTouchBg()},i}(cc.Component)).Game_Main=0,i.UI_Main=50,i.UI_Popup=100,i.UI_Tips=150,i.UI_Guide=200,i.UI_High_Tips=250,i.layerBg=null,c([l(cc.Prefab)],i.prototype,"layerBg",void 0),c([l(cc.Node)],i.prototype,"effectMovie",void 0),i=o=c([u],i),a.default=i=o,cc._RF.pop()},{}],LevelDataMsr:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"65a6b4H4FZCKqdSrbas3Uxr","LevelDataMsr");var a,c=t,s=n,u=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.LevelDataList=s.LevelData=s.CONFIG_FILE_DIR=void 0,a=c("CsvDataBase"),c=c("DataMsrBase"),s.CONFIG_FILE_DIR="config/",s.default=function(t){function e(e,n,r,o){var i;return(i=t.call(this,e,r)||this)._class=e,i._levelDataClass=n,i.csvFileName=r,i.levelFileName=o,i.datas={},i}return o(e,t),e.prototype.load=function(){var e=Object.create(null,{load:{get:function(){return t.prototype.load}}});return u(this,void 0,void 0,r().mark(function t(){var n,o,i,a,c,s,u,l,h;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadFile(this.levelFileName);case 2:for(n=t.sent.split(/\n/),o=n[0].split(","),i=n[2].split(","),a=[],c=n.length,s=3;s<c;s++)n[s]&&(u=n[s].split(","),(l=new this._levelDataClass).$parseData(u,o,i),a[u[0]]||(a[u[0]]=[]),a[u[0]].push(l));return t.next=10,e.load.call(this);case 10:for(h in this.datas)this.datas[h].$setLevelDatas(a);case 11:case"end":return t.stop()}},t,this)}))},e}(c.default),s.LevelData=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).levelDataId=null,e.levelDatas=null,e}o(e,t);var n=e.prototype;return n.getData=function(t){return this.levelDatas[t]},n.$setLevelDatas=function(t){this.levelDatas=t[this.levelDataId]},n.getAllData=function(){return this.levelDatas},n.getCount=function(){return this.levelDatas.length},e}(a.CsvDataBase),s.LevelDataList=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.$setLevelDatas=function(t){for(var e in this.datas)this.datas[e].$setLevelDatas(t)},e}(c.CsvDataList),cc._RF.pop()},{}],Limiter:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2b308Z3k9lFBZ13NHb93Sz3","Limiter");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("constants"),s=i("Decorator");a.default=function(t){var e,n;function i(e){var n,o=void 0===e?{}:e,i=o.child,a=void 0===i?null:i,c=o.maxLoop;if(n=t.call(this,{child:a,name:"Limiter",title:"Limit <maxLoop> Activations",properties:{maxLoop:1}})||this,!c)throw"maxLoop parameter in Limiter decorator is an obligatory parameter";return n.maxLoop=c,r(n)}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.open=function(t){t.blackboard.get("i",t.tree.id,this.id)||t.blackboard.set("i",0,t.tree.id,this.id)},a.tick=function(t){if(!this.child)return c.ERROR;var e=t.blackboard.get("i",t.tree.id,this.id);if(e<this.maxLoop){var n=this.child._execute(t);return n!=c.SUCCESS&&n!=c.FAILURE||t.blackboard.set("i",e+1,t.tree.id,this.id),n}return c.FAILURE},i}(s.default),cc._RF.pop()},{}],LineComponent:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"96806W8qGxDfaRv5H9rV9o+","LineComponent");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),c.LineComponent=void 0;var s=a("SwitchFrame"),u=cc._decorator,l=u.ccclass,h=u.property,f=(u.menu,u.executeInEditMode),d=u.playOnFocus;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).node1=null,e.node2=null,e.light=null,e.switchFrame=null,e.pos1=null,e.pos2=null,e._isDraw=!1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s.onLoad=function(){this.node.anchorY=.5,this.node.anchorX=0},s.getRadian2=function(t,e,n,r){return Math.atan2(r-e,n-t)},s.setGray=function(t){this.switchFrame.frameIndex=t?0:1},s.setNode=function(t,e,n){void 0===n&&(n=-1),this.node1=t||this.node1,this.node2=e||this.node2,e=this.node1.parent.convertToWorldSpaceAR(this.node1.position),e=this.node.parent.convertToNodeSpaceAR(e),this.pos2=e,e=this.node2.parent.convertToWorldSpaceAR(this.node2.position),e=this.node.parent.convertToNodeSpaceAR(e),this.pos1=e,this.playAni(n)},s.setPos=function(t,e,n){void 0===n&&(n=-1),this.pos1=t,this.pos2=e,this.playAni(n)},s.setCallback=function(t){this.cb=t},s.playAni=function(t,e){var n,r,o,i=this;void 0===t&&(t=0),this.pos1&&this.pos2&&(n=this.pos2,r=this.pos1,this.node.width=0,o=this.getRadian2(n.x,n.y,r.x,r.y),o=this.node.angle=180*o/Math.PI,Log.trace("\u89d2\u5ea6\uff1a",o),this.node.x=this.pos2.x,this.node.y=this.pos2.y,o=cc.Vec2.distance(n,r),Log.trace("\u7ed8\u5236\uff1a\uff1a\uff1a",o),t<=0?this.node.width=o:(this.light.active=!0,cc.tween(this.node).to(.012*o,{width:cc.Vec2.distance(n,r)}).call(function(){i.light&&(i.light.active=!1),e&&e()}).start()))},s.getY=function(){if(this.pos1&&this.pos2){var t=this.pos2,e=this.pos1;return t=this.getRadian2(t.x,t.y,e.x,e.y),Math.PI,e=this.node.width,this.node.y+Math.sin(t)*e}},s.stopAni=function(){this.node.stopAllActions()},s.removeSelf=function(){this.pos1=null,this.pos2=null,this.stopAni(),this.cb=null,this.light&&(this.light.active=!1)},a=i,(c=[{key:"drawLine",get:function(){return this._isDraw},set:function(t){Log.trace("wtffffff",t),(this._isDraw=t)&&this.setPos(this.node1.position,this.node2.position)}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),i([h(cc.Node)],a.prototype,"node1",void 0),i([h(cc.Node)],a.prototype,"node2",void 0),i([h(cc.Node)],a.prototype,"light",void 0),i([h(s.default)],a.prototype,"switchFrame",void 0),i([h({type:cc.Boolean})],a.prototype,"drawLine",null),a=i([l,f,d],a),c.LineComponent=a,cc._RF.pop()},{}],ListItem:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"225586r5+pOWou7oCsqEfWf","ListItem");var i,a=e,c=n,s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(c,"__esModule",{value:!0});var u=cc._decorator,l=u.ccclass,h=u.property,f=u.disallowMultiple,d=(u.menu,u.executionOrder);(a=i=i||{})[a.NONE=0]="NONE",a[a.TOGGLE=1]="TOGGLE",a[a.SWITCH=2]="SWITCH",a=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.title=null,e.selectedMode=i.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c,s,u=a.prototype;return u.onLoad=function(){var t;this.selectedMode==i.SWITCH&&(t=this.selectedFlag.getComponent(cc.Sprite),this._unselectedSpriteFrame=t.spriteFrame)},u.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},u._registerEvent=function(){this._eventReg||(this.btnCom&&0<this.list.selectedMode&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},u._onSizeChange=function(){this.list._onItemAdaptive(this.node)},u.createEvt=function(t,e,n){if(void 0===n&&(n=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var r=new cc.Component.EventHandler;return r.target=n||t.node,r.component=t.comName,r.handler=e,r}},u.showAni=function(t,e,n){var r,o=this;switch(t){case 0:r=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:r=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:r=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:r=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:r=[cc.scaleTo(.3,.1)]}(e||n)&&r.push(cc.callFunc(function(){if(n){o.list._delSingleItem(o.node);for(var t=o.list.displayData.length-1;0<=t;t--)if(o.list.displayData[t].id==o.listId){o.list.displayData.splice(t,1);break}}e()})),this.node.runAction(cc.sequence(r))},u.onClickThis=function(){this.list.selectedId=this.listId},c=a,(s=[{key:"selected",get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case i.TOGGLE:this.selectedFlag.active=t;break;case i.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}},{key:"btnCom",get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),a}(cc.Component),s([h({type:cc.Sprite})],a.prototype,"icon",void 0),s([h({type:cc.Node})],a.prototype,"title",void 0),s([h({type:cc.Enum(i)})],a.prototype,"selectedMode",void 0),s([h({type:cc.Node,visible:function(){return this.selectedMode>i.NONE}})],a.prototype,"selectedFlag",void 0),s([h({type:cc.SpriteFrame,visible:function(){return this.selectedMode==i.SWITCH}})],a.prototype,"selectedSpriteFrame",void 0),s([h({})],a.prototype,"adaptiveSize",void 0),a=s([l,f(),d(-5001)],a),c.default=a,cc._RF.pop()},{}],ListView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6d7a7XM37tAapePX0BJPPh2","ListView");var c,s,u=t,l=n,h=(s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(l,"__esModule",{value:!0}),l.ListViewBaseLayout=l.ListView=l.ListViewEvent=void 0;var f=u("App"),d=u("ItemRenderer");Object.defineProperty(cc.Node.prototype,"LEFT_TOP",{configurable:!0,get:function(){return cc.v2(this.x+this.width*-this.anchorX,this.y+this.height*(1-this.anchorY))}}),(u=c=c||{})[u.NONE=0]="NONE",u[u.HORIZONTAL=1]="HORIZONTAL",u[u.VERTICAL=2]="VERTICAL",u[u.GRID=3]="GRID",l.ListViewEvent={ITEM_TAP:"ITEM_TAP",ITEM_CREATED:"ITEM_CREATED",ITEM_DATA_CHANGED:"ITEM_DATA_CHANGED",SELECTION_CHANGED:"SELECTION_CHANGED",SELECTION_REACH_MAX:"SELECTION_REACH_MAX"};var p=cc._decorator,y=p.ccclass,v=p.property;p.menu,u=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).viewPort={x:0,y:0,width:0,height:0},e.itemRenderer=null,e.itemRendererInline=null,e.layoutType=c.NONE,e.isMultipleSelect=!1,e.maxMultipleSelectNum=3,e.scrollView=null,e.isVirtualLayout=!1,e.interactable=!0,e.gapX=0,e.gapY=0,e.autoGap=!1,e.autoPadding=!1,e.paddingLeft=0,e.paddingRight=0,e.paddingTop=0,e.paddingBottom=0,e.nodeEmpty=null,e.horizontalCenterInScrollView=!1,e.lazyLoadItem=!1,e.itemScale=1,e.tag="",e.customViews=[],e.itemPool=[],e.items=[],e.dataSource=[],e.cols=0,e.itemWidth=0,e.itemHeight=0,e.initialized=!1,e.selectedIndices=[],e.selectedItem=null,e.selectedItems=[],e.disabledItems=[],e.lastScrollPos=null,e.container=null,e._itemUpdateQueue=[],e.layout=null,e}i(e,t);var n,a,s=e.prototype;return s.onLoad=function(){this.init()},s.start=function(){},s.onDestroy=function(){this.itemPool.forEach(function(t){t.node&&t.node.isValid&&t.node.destroy()}),this.itemPool=[]},s.init=function(){var t=this;if(!this.initialized){switch(this.layoutType){case c.HORIZONTAL:this.layout=new _;break;case c.VERTICAL:this.layout=new b;break;case c.NONE:case c.GRID:this.layout=new w}if(this.container=new cc.Node,this.node.addChild(this.container),this.itemRendererInline&&this.itemRendererInline.getParent()==this.node&&this.itemRendererInline.removeFromParent(!1),this.itemRendererClass=this.itemRendererClass||d.default,this.scrollView){if(this.scrollView.content!=this.node)this.node.on(cc.Node.EventType.POSITION_CHANGED,function(){t.updateViewPort(!0)},this);else{var e=this.scrollView.node.getComponent(cc.Widget);e&&e.updateAlignment(),this.node.anchorX=0,this.node.anchorY=1,this.node.width=Math.max(this.node.width,this.scrollView.node.width);for(var n=this.node.getParent(),r=[];n&&n!=this.scrollView.node;){var o=n.getComponent(cc.Widget);o||((o=n.addComponent(cc.Widget)).left=o.right=o.top=o.bottom=0,o.isAlignLeft=o.isAlignRight=o.isAlignTop=o.isAlignBottom=!0,o.alignMode=cc.Widget.AlignMode.ALWAYS),r.push(o),n=n.getParent()}r.reverse().forEach(function(t){return t.updateAlignment()}),n=this.node.getParent(),this.node.x=-n.width*n.anchorX+this.node.width*this.node.anchorX,this.node.y=n.height*(1-n.anchorY)-this.node.height*(1-this.node.anchorY),this.isVirtualLayout&&(this.viewPort.width=this.scrollView.node.width,this.viewPort.height=this.scrollView.node.height)}this.scrollView.node.on("scrolling",this.onScrollChanged,this),this.scrollView.node.on("scroll-ended",this.onScrollChanged,this),this.scrollView.node.on(cc.Node.EventType.SIZE_CHANGED,function(){t.node.width=t.scrollView.node.width,t.updateViewPort(!0)},this)}else this.isVirtualLayout=!1;this.initialized=!0}},s.updateViewPort=function(t){var e,n;void 0===t&&(t=!1),this.scrollView&&(e=this.scrollView.getScrollOffset(),n=this.node.convertToWorldSpaceAR(this.node.LEFT_TOP.sub(this.node.position)).sub(this.scrollView.content.convertToWorldSpaceAR(this.scrollView.content.LEFT_TOP.sub(this.scrollView.content.position))),this.viewPort.x=e.x-n.x,this.viewPort.y=e.y+n.y,this.viewPort.width=this.scrollView.node.width,this.viewPort.height=this.scrollView.node.height),t&&(this.cols=0,this.autoPadding&&(this.paddingLeft=this.paddingRight=0),this.autoGap&&(this.gapX=0)),this.checkLayoutParam(0<this.items.length?this.items[0].node:null),this.updateLayout(t)},s.onScrollChanged=function(){var t=this.scrollView.getScrollOffset();(!this.lastScrollPos||30<t.sub(this.lastScrollPos).mag())&&(this.updateViewPort(),this.lastScrollPos=t)},s.getItems=function(){return this.items},s.getContentSize=function(){return cc.size(this.node.width,-this.getItemPositionAt(this.dataSource.length-1).y+this.itemHeight+this.paddingBottom)},s.refreshView=function(t){void 0===t&&(t=!1),this.items.forEach(function(e){return e.setData(e.data,t)})},s.updateDataSource=function(t,e){void 0===e&&(e=!1);var n,r=this;if(this.dataSource=t,this.checkLayoutParam(),this.nodeEmpty&&(this.nodeEmpty.active=t.length<=0),this.clearSelection(),this.isVirtualLayout)this.updateLayout(e);else{for(var o=0;o<this.items.length;o++){var i=this.items[o];i.index>=t.length?(this.items.slice(o).forEach(function(t){t.node.removeFromParent(!1),t.recycled=!0,r.itemPool.push(t)}),this.items.splice(o)):i.setData(t[i.index],e),i.onUnselected()}var a=0<this.items.length?this.items[this.items.length-1].index:-1,s=t.length-1-a;if(0<s)for(o=0;o<s;o++){var u=a+o+1;u=this.createItemAt(u,t[u]),this.items.push(u),u.onUnselected()}}this.layout instanceof _&&(this.node.width=this.getItemPositionAt(t.length-1).x+this.itemWidth+this.paddingLeft+this.paddingRight),this.node.height=-this.getItemPositionAt(t.length-1).y+this.itemHeight+this.paddingBottom,this.container.y=this.node.height*(1-this.node.anchorY),this.container.x=this.node.width*-this.node.anchorX,!this.scrollView&&(this.scrollView||this.layoutType!=c.GRID&&this.layoutType!=c.HORIZONTAL)||!this.horizontalCenterInScrollView||this.dataSource.length<this.cols&&(this.scrollView?this.container.x=(this.scrollView.node.width-(this.dataSource.length*this.itemWidth+this.gapX*(this.dataSource.length-1)))/2:this.container.x+=(this.cols-this.dataSource.length)/2*(this.itemWidth-this.gapX/2)-this.paddingLeft),this.scrollView&&this.layoutType==c.VERTICAL&&this.horizontalCenterInScrollView&&(n=(this.scrollView.node.height-this.layout.paddingTop)/(this.itemHeight+this.paddingTop/2+this.paddingBottom/2),this.dataSource.length<n&&(this.scrollView?this.container.y=-(this.scrollView.node.height-(this.dataSource.length*this.itemHeight+this.gapY*(this.dataSource.length-1)))/2+this.paddingTop:this.container.y-=(n-this.dataSource.length)/2*(this.itemHeight-this.gapY/2)-this.paddingTop))},s.clearSelection=function(){var t=this;this.selectedItems.forEach(function(e){var n=t.items.find(function(t){return t.data==e});n&&n.onUnselected()}),this._selectedIndex=-1,this.selectedIndices=[],this.selectedItem=null,this.selectedItems=[],this.node.emit(l.ListViewEvent.SELECTION_CHANGED)},s.select=function(t){var e,n=this;t.length==this.selectedItems.length&&t.every(function(t,e){return t==n.selectedItems[e]})||(e=t.filter(function(t){return n.selectedItems.indexOf(t)<0}),this.selectedItems.filter(function(e){return t.indexOf(e)<0}).forEach(function(t){var e=n.items.find(function(e){return e.data==t});e&&e.onUnselected()}),this.selectedItems=t,this.selectedIndices=this.selectedItems.map(function(t){return n.dataSource.indexOf(t)}),t.length<=1?(this.selectedItem=t[0],this._selectedIndex=this.dataSource.indexOf(t[0])):(this.selectedItem=null,this._selectedIndex=-1),this.refreshView(),e.forEach(function(t){var e=n.items.find(function(e){return e.data==t});e&&e.onSelected()}),this.node.emit(l.ListViewEvent.SELECTION_CHANGED))},s.selectByIndices=function(t){var e,n=this;0==t.length&&this.clearSelection(),t.length==this.selectedIndices.length&&t.every(function(t,e){return t==n.selectedIndices[e]})||(e=t.filter(function(t){return n.selectedIndices.indexOf(t)<0}),this.selectedIndices.filter(function(e){return t.indexOf(e)<0}).forEach(function(t){var e=n.items.find(function(e){return e.index==t});e&&e.onUnselected()}),this.selectedIndices=t,this.selectedItems=this.selectedIndices.map(function(t){return n.dataSource[t]}),t.length<=1?(this.selectedItem=this.selectedItems[0],this._selectedIndex=t[0]):(this.selectedItem=null,this._selectedIndex=-1),this.refreshView(),e.forEach(function(t){var e=n.items.find(function(e){return e.index==t});e&&e.onSelected()}),this.node.emit(l.ListViewEvent.SELECTION_CHANGED))},s.disableSelectByIndices=function(t){this.disabledItems=this.dataSource.filter(function(e,n){return t.include(n)}),this.items.forEach(function(e){t.include(e.index)?e.onDisableSelect():e.onEnableSelect()})},s.disableSelect=function(t){this.disabledItems=t.slice(),this.items.forEach(function(e){t.some(function(t){return t==e.data})?e.onDisableSelect():e.onEnableSelect()})},s.getCoordinateAt=function(t){return this.layout.getItemCoordinateAtAt(t)},s.refreshLayout=function(){this.cols=0,this.autoPadding&&(this.paddingLeft=this.paddingRight=0),this.autoGap&&(this.gapX=0),this.checkLayoutParam(0<this.items.length?this.items[0].node:null),this.updateLayout(!0)},s.updateLayout=function(t){void 0===t&&(t=!1);var e=this;this.checkLayoutParam();var n=cc.rect(this.viewPort.x,this.viewPort.y,this.viewPort.width,this.viewPort.height),r=(n=m(this.layout.getVisibleIndexStartEnd(n.x,n.y,n.width,n.height),2))[0],o=n[1];if(r=r.limit(0,this.dataSource.length-1),o=o.limit(0,this.dataSource.length-1),this.isVirtualLayout){var i=0<this.items.length?this.items[0].index:-1,a=0<this.items.length?this.items[this.items.length-1].index:-1,c=this.items.slice();if(i!=r||a!=o){n=Math.min(r,i).limit(0);for(var s,u,l=Math.max(o,a),h=[],f=[],d=n;d<=l;d++)a<d&&d<r||d<i&&o<d||(d<i&&(s=this.createItemAt(d,this.dataSource[d]),h.push(s)),a<d&&(s=this.createItemAt(d,this.dataSource[d]),f.push(s)),d<r&&(u=c[d-i],this.recycleItem(u)),o<d&&(u=c[d-i],this.recycleItem(u)));h.reverse().forEach(function(t){return e.items.unshift(t)}),f.forEach(function(t){return e.items.push(t)}),this.items.forEach(function(n,r){var o=e.getItemPositionAt(n.index).add(cc.v2(n.node.width*n.node.anchorX,-n.node.height*(1-n.node.anchorY)));n.node.position=o,n.node.zIndex=r;var i=e.dataSource[n.index];e.lazyLoadItem?e.pushItemUpdate(n,i,t):n.setData(i,t),e.selectedItems.some(function(t){return t==i})?n.onSelected():n.onUnselected(),e.disabledItems.some(function(t){return t==i})?n.onDisableSelect():n.onEnableSelect()})}else this.items.forEach(function(n){var r=e.getItemPositionAt(n.index).add(cc.v2(n.node.width*n.node.anchorX,-n.node.height*(1-n.node.anchorY)));n.node.position=r,n.setData(e.dataSource[n.index],t),n.node.active=!0})}else r=0,o=this.dataSource.length-1,t&&this.items.forEach(function(n){var i=e.getItemPositionAt(n.index).add(cc.v2(n.node.width*n.node.anchorX,-n.node.height*(1-n.node.anchorY)));n.node.position=i,n.node.active=n.index>=r&&n.index<=o,n.setData(e.dataSource[n.index],t)})},s.ensureItemInView=function(t,e){void 0===e&&(e=0);var n=(r=m(this.layout.getVisibleIndexStartEnd(this.viewPort.x,this.viewPort.y,this.viewPort.width,this.viewPort.height),2))[0],r=r[1];n<=t&&t<=r||(r=this.getItemPositionAt(t),t=this.node.convertToWorldSpaceAR(this.node.LEFT_TOP.sub(this.node.position)).sub(this.scrollView.content.convertToWorldSpaceAR(this.scrollView.content.LEFT_TOP.sub(this.scrollView.content.position))),r.addSelf(t),this.scrollView.scrollToOffset(cc.v2(r.x,-r.y),e),e||(this.viewPort.x=r.x,this.viewPort.y=-r.y,this.updateLayout()))},s.focusItem=function(t,e,n){void 0===e&&(e=0),t=this.getItemPositionAt(t),n&&t.addSelf(n),n=this.node.convertToWorldSpaceAR(this.node.LEFT_TOP.sub(this.node.position)).sub(this.scrollView.content.convertToWorldSpaceAR(this.scrollView.content.LEFT_TOP.sub(this.scrollView.content.position))),t.addSelf(n),this.scrollView.scrollToOffset(cc.v2(t.x,-t.y),e),e||(this.viewPort.x=t.x,this.viewPort.y=-t.y,this.updateLayout())},s.scrollToItemByPos=function(t,e){void 0===e&&(e=0),this.scrollView.scrollToOffset(cc.v2(t.x,-t.y),e),e||(this.viewPort.x=t.x,this.viewPort.y=-t.y,this.updateLayout())},s.recycleItem=function(t){this.items.splice(this.items.indexOf(t),1),t.node.removeFromParent(!1),t.recycled=!0,this.itemPool.push(t)},s.createItemAt=function(t,e){var n,r=this;0<this.itemPool.length?n=this.itemPool.shift().node:((n=cc.instantiate(this.itemRenderer||this.itemRendererInline)).on(cc.Node.EventType.TOUCH_END,function(t){cc.sys.isNative&&0<t.touch.getID()||r.onItemTap(o)},this),n.scaleX*=this.itemScale,n.scaleY*=this.itemScale);var o=n.getComponent(this.itemRendererClass);((o=o||n.addComponent(this.itemRendererClass)).listView=this).container.addChild(n),this.checkLayoutParam(n);var i=this.getItemPositionAt(t).add(cc.v2(n.width*this.itemScale*n.anchorX,-n.height*this.itemScale*(1-n.anchorY)));return n.position=i,o.index=t,this.lazyLoadItem?this.pushItemUpdate(o,e):o.setData(e),o.recycled=!1,this.node.emit(l.ListViewEvent.ITEM_CREATED,o),o},s.getItemPositionAt=function(t){return this.layout.getItemPositionAt(t)},s.addCustomView=function(t,e){this.checkLayoutParam();var n={width:e.width,height:e.height};this.cols&&e instanceof cc.Node&&(e.removeFromParent(!1),e.position=this.getItemPositionAt(t).add(cc.v2(n.width*e.anchorX,-n.height*(1-e.anchorY))),this.container.addChild(e),this.customViews.push(e)),this.layout.addCustomSpace([t,n]),this.updateLayout(!1)},s.clearCustomView=function(t){void 0===t&&(t=!0),this.customViews.forEach(function(e){e.parent&&e.removeFromParent(t),t&&e.isValid&&e.destroy()}),this.customViews=[],this.layout.clearCustomSpace()},s.pushItemUpdate=function(t,e,n){void 0===n&&(n=!1);var r=this._itemUpdateQueue.slice(1).find(function(e){return e.item==t});r?r.data=e:(this._itemUpdateQueue.push({item:t,data:e,force:n}),1==this._itemUpdateQueue.length&&this.handleItemUpdate())},s.handleItemUpdate=function(){return h(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._itemUpdateQueue[0],t.t0=e,!t.t0){t.next=8;break}return e.item.setData(e.data,e.force),t.next=6,f.default.TimerManager.sleep(.01);case 6:this._itemUpdateQueue.shift(),this.handleItemUpdate();case 8:case"end":return t.stop()}},t,this)}))},s.checkLayoutParam=function(t){var e;this.initialized||this.init(),this.cols||(e=(t=t||cc.instantiate(this.itemRenderer||this.itemRendererInline)).width*this.itemScale,t=t.height*this.itemScale,this.autoGap?(this.cols=Math.floor((this.node.width-this.paddingLeft-this.paddingRight)/e)||1,this.cols&&(this.gapX=(this.node.width-this.paddingLeft-this.paddingRight-this.cols*e)/(this.cols-1))):this.cols=Math.floor((this.node.width-this.paddingLeft-this.paddingRight)/(e+this.gapX))||1,this.autoPadding&&(this.autoGap?(this.gapX=this.node.width/this.cols-e,this.paddingLeft=this.paddingRight=this.gapX/2):this.paddingLeft=this.paddingRight=(this.node.width-this.cols*e-this.gapX*(this.cols-1))/2),this.itemWidth=e,this.itemHeight=t,this.layout.updateParams(e,t,this.cols,this.gapX,this.gapY,this.paddingLeft,this.paddingRight,this.paddingTop,this.paddingBottom))},s.onItemTap=function(t){if(!t.checkSelect(-1==this.selectedIndices.indexOf(t.index)))return!1;var e,n,r=this;this.interactable?(e=t.index,this.disabledItems.include(t.data)||(0<=this.selectedIndices.indexOf(e)?this.isMultipleSelect&&(this.selectedIndices.splice(this.selectedIndices.indexOf(e),1),this.selectedItems.splice(this.selectedItems.indexOf(t.data),1),t.onCancelSelected(),this.node.emit(l.ListViewEvent.SELECTION_CHANGED)):(this.isMultipleSelect?this.selectedIndices.length<this.maxMultipleSelectNum?(this.selectedIndices.push(e),this.selectedItems.push(t.data),this.selectedIndex=e,this.selectedItem=t.data,t.onClickSelected()):this.node.emit(l.ListViewEvent.SELECTION_REACH_MAX):(0<=this.selectedIndex&&(n=this.items.find(function(t){return t.index==r.selectedIndex}))&&n.onCancelSelected(),this.selectedIndices=[e],this.selectedItems=[t.data],this.selectedIndex=e,this.selectedItem=t.data,t.onClickSelected(),this.node.emit(l.ListViewEvent.SELECTION_REACH_MAX)),this.node.emit(l.ListViewEvent.SELECTION_CHANGED))),this.node.emit(l.ListViewEvent.ITEM_TAP,t,e)):this.node.emit(l.ListViewEvent.ITEM_TAP,t,t.index)},n=e,(a=[{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(t){this.isMultipleSelect||(this._selectedIndex=t,this.selectedIndices=[t],this.selectedItem=this.dataSource[t],this.selectedItems=[this.selectedItem])}}])&&o(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),e}(cc.Component),s([v(cc.Prefab)],u.prototype,"itemRenderer",void 0),s([v(cc.Node)],u.prototype,"itemRendererInline",void 0),s([v({type:cc.Enum(c)})],u.prototype,"layoutType",void 0),s([v({})],u.prototype,"isMultipleSelect",void 0),s([v({type:cc.Integer,visible:function(){return this.isMultipleSelect}})],u.prototype,"maxMultipleSelectNum",void 0),s([v(cc.ScrollView)],u.prototype,"scrollView",void 0),s([v({})],u.prototype,"isVirtualLayout",void 0),s([v({})],u.prototype,"interactable",void 0),s([v],u.prototype,"gapX",void 0),s([v],u.prototype,"gapY",void 0),s([v],u.prototype,"autoGap",void 0),s([v],u.prototype,"autoPadding",void 0),s([v],u.prototype,"paddingLeft",void 0),s([v],u.prototype,"paddingRight",void 0),s([v],u.prototype,"paddingTop",void 0),s([v],u.prototype,"paddingBottom",void 0),s([v(cc.Node)],u.prototype,"nodeEmpty",void 0),s([v],u.prototype,"horizontalCenterInScrollView",void 0),s([v],u.prototype,"itemScale",void 0),s([v],u.prototype,"tag",void 0),u=s([y],u),l.ListView=u;var g=function(){function t(){this.itemScale=1,this.spaces=[]}var e=t.prototype;return e.updateParams=function(t,e,n,r,o,i,a,c,s){this.itemWidth=t,this.itemHeight=e,this.cols=n,this.gapX=r,this.gapY=o,this.paddingLeft=i,this.paddingRight=a,this.paddingTop=c,this.paddingBottom=s},e.addCustomSpace=function(t){this.spaces.push(t)},e.clearCustomSpace=function(){this.spaces=[]},e.getItemCoordinateAtAt=function(t){return cc.v2(t%this.cols,Math.floor(t/this.cols))},e.getItemPositionAt=function(){return cc.v2(0,0)},e.getVisibleIndexStartEnd=function(){return[0,0]},t}();function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var _=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.getItemPositionAt=function(t){var e=cc.v2(this.paddingLeft+t*(this.itemWidth+this.gapX),-this.paddingTop);return this.spaces.forEach(function(n){n=(r=m(n,2))[0];var r=r[1];n<=t&&(e.x+=r.width)}),e},n.getVisibleIndexStartEnd=function(t,e,n){var r=this,o=Math.floor((-t-this.paddingLeft)/(this.itemWidth+this.gapX)),i=Math.ceil((-t+n-this.paddingLeft)/(this.itemWidth+this.gapX));return this.spaces.forEach(function(e){e=(a=m(e,2))[0];var a=a[1];e<=o&&(t+=a.width,o=Math.floor((-t-r.paddingLeft)/(r.itemWidth+r.gapX)),i=Math.ceil((-t+n-r.paddingLeft)/(r.itemWidth+r.gapX)))}),[o,i]},e}(l.ListViewBaseLayout=g),b=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.getItemPositionAt=function(t){var e=cc.v2(this.paddingLeft,-(this.paddingTop+t*(this.itemHeight+this.gapY)));return this.spaces.forEach(function(n){n=(r=m(n,2))[0];var r=r[1];n<=t&&(e.y-=r.height)}),e},n.getVisibleIndexStartEnd=function(t,e,n,r){var o=this,i=Math.floor((e-this.paddingTop)/(this.itemHeight+this.gapY)),a=Math.ceil((e+r-this.paddingTop)/(this.itemHeight+this.gapY));return this.spaces.forEach(function(t){t=(n=m(t,2))[0];var n=n[1];t<=i&&(e-=n.height,i=Math.floor((e-o.paddingTop)/(o.itemHeight+o.gapY)),a=Math.ceil((e+r-o.paddingTop)/(o.itemHeight+o.gapY)))}),[i,a]},e}(g),w=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.getItemPositionAt=function(t){var e=t%this.cols,n=Math.floor(t/this.cols),r=cc.v2(this.paddingLeft+e*(this.itemWidth+this.gapX),-(this.paddingTop+n*(this.itemHeight+this.gapY)));return this.spaces.forEach(function(e){e=(n=m(e,2))[0];var n=n[1];e<=t&&(r.y-=n.height)}),r},n.getVisibleIndexStartEnd=function(t,e,n,r){var o=this,i=Math.floor((e-this.paddingTop)/(this.itemHeight+this.gapY))*this.cols,a=Math.ceil((e+r-this.paddingTop)/(this.itemHeight+this.gapY))*this.cols;return this.spaces.forEach(function(t){t=(n=m(t,2))[0];var n=n[1];t<=i&&(e-=n.height,i=Math.floor((e-o.paddingTop)/(o.itemHeight+o.gapY))*o.cols,a=Math.ceil((e+r-o.paddingTop)/(o.itemHeight+o.gapY))*o.cols)}),[i,a]},e}(g);cc._RF.pop()},{}],List:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a9d42WMYBxBFLvSo/jqzMVt","List");var i,a,c,s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0});var h=cc._decorator,f=h.ccclass,d=h.property,p=h.disallowMultiple,y=(h.menu,h.executionOrder),v=h.requireComponent,g=u("ListItem");(u=i=i||{})[u.NODE=1]="NODE",u[u.PREFAB=2]="PREFAB",(u=a=a||{})[u.NORMAL=1]="NORMAL",u[u.ADHERING=2]="ADHERING",u[u.PAGE=3]="PAGE",(u=c=c||{})[u.NONE=0]="NONE",u[u.SINGLE=1]="SINGLE",u[u.MULT=2]="MULT",u=function(t){var e,n;function s(){var e;return(e=t.apply(this,arguments)||this).templateType=i.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=a.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=c.NONE,e.repeatEventSingle=!1,e.selectedEvent=null,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}n=t,(e=s).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var u,l,h=s.prototype;return h.onLoad=function(){this._init()},h.onDestroy=function(){for(this._itemTmp&&this._itemTmp.isValid&&this._itemTmp.destroy(),this.tmpNode&&this.tmpNode.isValid&&this.tmpNode.destroy();this._pool.size();)this._pool.get().destroy()},h.onEnable=function(){this._registerEvent(),this._init()},h.onDisable=function(){this._unregisterEvent()},h._registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.on("touch-up",this._onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on("scroll-began",this._onScrollBegan,this,!0),this.node.on("scroll-ended",this._onScrollEnded,this,!0),this.node.on("scrolling",this._onScrolling,this,!0),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},h._unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.off("touch-up",this._onTouchUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off("scroll-began",this._onScrollBegan,this,!0),this.node.off("scroll-ended",this._onScrollEnded,this,!0),this.node.off("scrolling",this._onScrolling,this,!0),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},h._init=function(){if(!this._inited)if(this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this._scrollView.content,this.content){switch(this._layout=this.content.getComponent(cc.Layout),this._align=this._layout.type,this._resizeMode=this._layout.resizeMode,this._startAxis=this._layout.startAxis,this._topGap=this._layout.paddingTop,this._rightGap=this._layout.paddingRight,this._bottomGap=this._layout.paddingBottom,this._leftGap=this._layout.paddingLeft,this._columnGap=this._layout.spacingX,this._lineGap=this._layout.spacingY,this._colLineNum,this._verticalDir=this._layout.verticalDirection,this._horizontalDir=this._layout.horizontalDirection,this.setTemplateItem(cc.instantiate(this.templateType==i.PREFAB?this.tmpPrefab:this.tmpNode)),this._slideMode!=a.ADHERING&&this._slideMode!=a.PAGE||(this._scrollView.inertia=!1,this._scrollView._onMouseWheel=function(){}),this.virtual||(this.lackCenter=!1),this._lastDisplayData=[],this.displayData=[],this._pool=new cc.NodePool,this._forceUpdate=!1,this._updateCounter=0,this._updateDone=!0,this.curPageNum=0,this.cyclic&&(this._scrollView._processAutoScrolling=this._processAutoScrolling.bind(this),this._scrollView._startBounceBackIfNeeded=function(){return!1}),this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}}}this.content.removeAllChildren(),this._inited=!0}else cc.error(this.node.name+"'s cc_ScrollView unset content!")},h._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=+t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);this._scrollView._autoScrollAttenuate&&(e=(i=e-1)*i*i*i*i+1);var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),r=this._scrollView.getScrollEndedEventTiming(),o=Math.abs(e-1)<=r;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),o&&(this._scrollView._autoScrolling=!1);var i=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(i),o),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},h.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var n=t.getComponent(g.default);switch(!n&&(e.selectedMode=c.NONE),(n=t.getComponent(cc.Widget))&&n.enabled&&(e._needUpdateWidget=!0),e.selectedMode==c.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var r=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((r+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:r=e.content.height-e._topGap-e._bottomGap,e._colLineNum=Math.floor((r+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},h.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},h._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:t=e._customSize?(n=e._getFixedSize(null),e._leftGap+n.val+e._itemSize.width*(e._numItems-n.count)+e._columnGap*(e._numItems-1)+e._rightGap):e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:var n;t=e._customSize?(n=e._getFixedSize(null),e._topGap+n.val+e._itemSize.height*(e._numItems-n.count)+e._lineGap*(e._numItems-1)+e._bottomGap):e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var r=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*r+e._lineGap*(r-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:r=Math.ceil(e._numItems/e._colLineNum),t=e._leftGap+e._itemSize.width*r+e._columnGap*(r-1)+e._rightGap}}var o,i=e.content.getComponent(cc.Layout);i&&(i.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic&&(o=e._sizeType?e.node.height:e.node.width,e._cyclicPos1=0,o-=e._cyclicPos1,e._cyclicNum=Math.ceil(o/e._allItemSizeNoEdge)+1,o=e._sizeType?e._lineGap:e._columnGap,e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+o,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+o*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=o*(e._cyclicNum-1)),e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var a=e._lack&&e.lackCenter||!e.lackSlide?.1:0,c=e._lack?(e._sizeType?e.node.height:e.node.width)-a:e.cyclic?e._cyclicAllItemSize:e._allItemSize;c<0&&(c=0),e._sizeType?e.content.height=c:e.content.width=c},h._onScrolling=function(t){var e=this;return void 0===t&&(t=null),function(t){if(null==e.frameCount&&(e.frameCount=e._updateRate),!e._forceUpdate&&t&&"scroll-ended"!=t.type&&0<e.frameCount)e.frameCount--;else if(e.frameCount=e._updateRate,!e._aniDelRuning){if(e.cyclic){var n=e.content.getPosition();n=e._sizeType?n.y:n.x,t=e._allItemSizeNoEdge+(e._sizeType?e._lineGap:e._columnGap);var r=e._sizeType?cc.v2(0,t):cc.v2(t,0);switch(e._alignCalcType){case 1:n>-e._cyclicPos1?(e.content.x=-e._cyclicPos2,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.sub(r))):n<-e._cyclicPos2&&(e.content.x=-e._cyclicPos1,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.add(r)));break;case 2:n<e._cyclicPos1?(e.content.x=e._cyclicPos2,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.add(r))):n>e._cyclicPos2&&(e.content.x=e._cyclicPos1,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.sub(r)));break;case 3:n<e._cyclicPos1?(e.content.y=e._cyclicPos2,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.add(r))):n>e._cyclicPos2&&(e.content.y=e._cyclicPos1,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.sub(r)));break;case 4:n>-e._cyclicPos1?(e.content.y=-e._cyclicPos2,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.sub(r))):n<-e._cyclicPos2&&(e.content.y=-e._cyclicPos1,e._scrollView.isAutoScrolling()&&(e._scrollView._autoScrollStartPosition=e._scrollView._autoScrollStartPosition.add(r)))}}var o,i,a,c;if(e._calcViewPos(),e._sizeType?(o=e.viewTop,a=e.viewBottom):(i=e.viewRight,c=e.viewLeft),e._virtual){var s;e.displayData=[];var u=0,l=e._numItems-1;if(e._customSize)for(var h=!1;u<=l&&!h;u++)switch(s=e._calcItemPos(u),e._align){case cc.Layout.Type.HORIZONTAL:s.right>=c&&s.left<=i?e.displayData.push(s):0!=u&&0<e.displayData.length&&(h=!0);break;case cc.Layout.Type.VERTICAL:s.bottom<=o&&s.top>=a?e.displayData.push(s):0!=u&&0<e.displayData.length&&(h=!0);break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:s.bottom<=o&&s.top>=a?e.displayData.push(s):0!=u&&0<e.displayData.length&&(h=!0);break;case cc.Layout.AxisDirection.VERTICAL:s.right>=c&&s.left<=i?e.displayData.push(s):0!=u&&0<e.displayData.length&&(h=!0)}}else{var f=e._itemSize.width+e._columnGap,d=e._itemSize.height+e._lineGap;switch(e._alignCalcType){case 1:u=(c+e._leftGap)/f,l=(i+e._rightGap)/f;break;case 2:u=(-i-e._rightGap)/f,l=(-c-e._leftGap)/f;break;case 3:u=(-o-e._topGap)/d,l=(-a-e._bottomGap)/d;break;case 4:u=(a+e._bottomGap)/d,l=(o+e._topGap)/d}for(u=Math.floor(u)*e._colLineNum,l=Math.ceil(l)*e._colLineNum,u<0&&(u=0),--l>=e._numItems&&(l=e._numItems-1);u<=l;u++)e.displayData.push(e._calcItemPos(u))}if(e._delRedundantItem(),e.displayData.length<=0||!e._numItems)e._lastDisplayData=[];else{e.firstListId=e.displayData[0].id,e.displayItemNum=e.displayData.length;var p=e._lastDisplayData.length,y=e.displayItemNum!=p;if(y&&(0<e.frameByFrameRenderNum&&e._lastDisplayData.sort(function(t,e){return t-e}),y=e.firstListId!=e._lastDisplayData[0]||e.displayData[e.displayItemNum-1].id!=e._lastDisplayData[p-1]),e._forceUpdate||y)if(0<e.frameByFrameRenderNum)0<e._numItems?(e._updateDone?e._updateCounter=0:e._doneAfterUpdate=!0,e._updateDone=!1):(e._updateCounter=0,e._updateDone=!0);else{e._lastDisplayData=[];for(var v=0;v<e.displayItemNum;v++)e._createOrUpdateItem(e.displayData[v]);e._forceUpdate=!1}e._calcNearestItem()}}}}(t)},h._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=0<t.x?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(0<t.x?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(0<t.y?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=0<t.y?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},h._calcItemPos=function(t){var e,n,r,o,i,a,c,s;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:var u;return e=this._customSize?(u=this._getFixedSize(t),i=this._leftGap+(this._itemSize.width+this._columnGap)*(t-u.count)+(u.val+this._columnGap*u.count),0<(u=this._customSize[t])?u:this._itemSize.width):(i=this._leftGap+(this._itemSize.width+this._columnGap)*t,this._itemSize.width),a=i+e,this.lackCenter&&(i+=u=this.content.width/2-this._allItemSizeNoEdge/2,a+=u),{id:t,left:i,right:a,x:i+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:var l;return e=this._customSize?(l=this._getFixedSize(t),a=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),0<(l=this._customSize[t])?l:this._itemSize.width):(a=-this._rightGap-(this._itemSize.width+this._columnGap)*t,this._itemSize.width),i=a-e,this.lackCenter&&(i-=l=this.content.width/2-this._allItemSizeNoEdge/2,a-=l),{id:t,right:a,left:i,x:i+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:var h;return n=this._customSize?(h=this._getFixedSize(t),r=-this._topGap-(this._itemSize.height+this._lineGap)*(t-h.count)-(h.val+this._lineGap*h.count),0<(h=this._customSize[t])?h:this._itemSize.height):(r=-this._topGap-(this._itemSize.height+this._lineGap)*t,this._itemSize.height),o=r-n,this.lackCenter&&(r-=h=this.content.height/2-this._allItemSizeNoEdge/2,o-=h),{id:t,top:r,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var f;return n=this._customSize?(f=this._getFixedSize(t),o=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-f.count)+(f.val+this._lineGap*f.count),0<(f=this._customSize[t])?f:this._itemSize.height):(o=this._bottomGap+(this._itemSize.height+this._lineGap)*t,this._itemSize.height),r=o+n,this.lackCenter&&(r+=f=this.content.height/2-this._allItemSizeNoEdge/2,o+=f),{id:t,top:r,bottom:o,x:this._itemTmp.x,y:o+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var d=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s=(o=(r=-this._topGap-(this._itemSize.height+this._lineGap)*d)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:r=(o=this._bottomGap+(this._itemSize.height+this._lineGap)*d)+this._itemSize.height,s=o+this._itemTmp.anchorY*this._itemSize.height}switch(c=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:c+=this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c+=(1-this._itemTmp.anchorX)*this._itemSize.width,c-=(1-this.content.anchorX)*this.content.width,c*=-1}return{id:t,top:r,bottom:o,x:c,y:s};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=(i=this._leftGap+(this._itemSize.width+this._columnGap)*d)+this._itemSize.width,c=i+this._itemTmp.anchorX*this._itemSize.width,c-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:c=(i=(a=-this._rightGap-(this._itemSize.width+this._columnGap)*d)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,c+=(1-this.content.anchorX)*this.content.width}switch(s=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:s-=(1-this._itemTmp.anchorY)*this._itemSize.height,s+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:s-=this._itemTmp.anchorY*this._itemSize.height,s+=this.content.anchorY*this.content.height,s*=-1}return{id:t,left:i,right:a,x:c,y:s}}}},h._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var n={id:t,x:e.x,y:e.y};return this._sizeType?(n.top=e.y+e.height*(1-e.anchorY),n.bottom=e.y-e.height*e.anchorY):(n.left=e.x-e.width*e.anchorX,n.right=e.x+e.width*(1-e.anchorX)),n},h.getItemPos=function(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},h._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,n=0;for(var r in this._customSize)parseInt(r)<t&&(e+=this._customSize[r],n++);return{val:e,count:n}},h._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},h._onScrollEnded=function(){var t=this;if(null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}t._onScrolling(),t._slideMode!=a.ADHERING||t.adhering?t._slideMode==a.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()):t.adhere()},h._onTouchStart=function(t,e){if(!this._scrollView.hasNestedViewGroup(t,e)&&(t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var n=t.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:t.target}},h._onTouchUp=function(){this._scrollPos=null,this._slideMode==a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode==a.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null},h._onTouchCancelled=function(t,e){var n=this;n._scrollView.hasNestedViewGroup(t,e)||t.simulate||(n._scrollPos=null,n._slideMode==a.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==a.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)},h._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},h._onItemAdaptive=function(t){var e;(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height)&&(this._customSize||(this._customSize={}),e=this._sizeType?t.height:t.width,this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3)))))},h._pageAdhere=function(){if(this.cyclic||!(0<this.elasticTop||0<this.elasticRight||0<this.elasticBottom||0<this.elasticLeft)){var t=this._sizeType?this.viewTop:this.viewLeft,e=(this._sizeType?this.node.height:this.node.width)*this.pageDistance;if(Math.abs(this._beganPos-t)>e)switch(this._alignCalcType){case 1:case 4:this._beganPos>t?this.prePage(.5):this.nextPage(.5);break;case 2:case 3:this._beganPos<t?this.prePage(.5):this.nextPage(.5)}else this.elasticTop<=0&&this.elasticRight<=0&&this.elasticBottom<=0&&this.elasticLeft<=0&&this.adhere();this._beganPos=null}},h.adhere=function(){var t,e=this;e.checkInited()&&(0<e.elasticTop||0<e.elasticRight||0<e.elasticBottom||0<e.elasticLeft||(e.adhering=!0,e._calcNearestItem(),t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width),e.scrollTo(e.nearestListId,.7,t)))},h.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var n=this.displayData[e];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(var r=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,o=this._updateCounter;o<r;o++)this._createOrUpdateItem2(o);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)},h._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var n=0<this._pool.size();if((e=n?this._pool.get():cc.instantiate(this._itemTmp))._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),n&&this._needUpdateWidget){var r=e.getComponent(cc.Widget);r&&r.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var o=e.getComponent(g.default);e.listItem=o,o&&(o.listId=t.id,o.list=this,o._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},h._createOrUpdateItem2=function(t){var e,n=this.content.children[t];n?this._forceUpdate&&this.renderEvent&&(n._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t)):((n=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(n),e=n.getComponent(g.default),n.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,t)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},h._updateListItem=function(t){if(t&&this.selectedMode>c.NONE){var e=t.node;switch(this.selectedMode){case c.SINGLE:t.selected=this.selectedId==e._listId;break;case c.MULT:t.selected=0<=this.multSelected.indexOf(e._listId)}}},h._resetItemSize=function(){},h._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),n=this.getItemPos(e._listId);e.setPosition(n.x,n.y)},h.setMultSelected=function(t,e){if(this.checkInited()){var n,r;if(Array.isArray(t)||(t=[t]),null==e)this.multSelected=t;else if(e)for(var o=t.length-1;0<=o;o--)n=t[o],(r=this.multSelected.indexOf(n))<0&&this.multSelected.push(n);else for(var i=t.length-1;0<=i;i--)n=t[i],0<=(r=this.multSelected.indexOf(n))&&this.multSelected.splice(r,1);this._forceUpdate=!0,this._onScrolling()}},h.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++){var r=t[e],o=this.getItemByListId(r);o&&cc.Component.EventHandler.emitEvents([this.renderEvent],o,r%this._actualNumItems)}}},h.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},h.getItemByListId=function(t){for(var e=this.content.childrenCount-1;0<=e;e--){var n=this.content.children[e];if(n._listId==t)return n}},h._getOutsideItem=function(){for(var t,e=[],n=this.content.childrenCount-1;0<=n;n--)t=this.content.children[n],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},h._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;0<=e;e--){var n=t[e];if(!this._scrollItem||n._listId!=this._scrollItem._listId){this._pool.put(n);for(var r=this._lastDisplayData.length-1;0<=r;r--)if(this._lastDisplayData[r]==n._listId){this._lastDisplayData.splice(r,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},h._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},h.aniDelItem=function(t,e,n){var r=this;if(!r.checkInited()||r.cyclic||!r._virtual)return cc.error("This function is not allowed to be called!");if(r._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var o,i=r.getItemByListId(t);if(i){o=i.getComponent(g.default),r._aniDelRuning=!0;var a=r.displayData[r.displayData.length-1].id,s=o.selected;o.showAni(n,function(){var n,o,u,l;if(a<r._numItems-2&&(n=a+1),null!=n?(h=r._calcItemPos(n),r.displayData.push(h),r._virtual?r._createOrUpdateItem(h):r._createOrUpdateItem2(n)):r._numItems--,r.selectedMode==c.SINGLE)s?r._selectedId=-1:0<=r._selectedId-1&&r._selectedId--;else if(r.selectedMode==c.MULT&&r.multSelected.length){var h=r.multSelected.indexOf(t);0<=h&&r.multSelected.splice(h,1);for(var f=r.multSelected.length-1;0<=f;f--)r.multSelected[f]>=t&&r.multSelected[f]--}if(r._customSize){r._customSize[t]&&delete r._customSize[t];var d,p={};for(var y in r._customSize)d=r._customSize[y],p[(y=parseInt(y))-(t<=y?1:0)]=d;r._customSize=p}for(var v=null!=n?n:a;v>=t+1;v--)(i=r.getItemByListId(v))&&(l=r._calcItemPos(v-1),o=[cc.moveTo(.2333,cc.v2(l.x,l.y))],v<=t+1&&(u=!0,o.push(cc.callFunc(function(){r._aniDelRuning=!1,e(t)}))),1<o.length?i.runAction(cc.sequence(o)):i.runAction(o[0]));u||(r._aniDelRuning=!1,e(t))},!0)}else e(t)},h.scrollTo=function(t,e,n,r){void 0===e&&(e=.5),void 0===n&&(n=null),void 0===r&&(r=!1);var o=this;if(o.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=o._numItems&&(t=o._numItems-1),!o._virtual&&o._layout&&o._layout.enabled&&o._layout.updateLayout();var i,a,c=o.getItemPos(t);switch(o._alignCalcType){case 1:i=c.left,i-=null!=n?o.node.width*n:o._leftGap,c=cc.v2(i,0);break;case 2:i=c.right-o.node.width,i+=null!=n?o.node.width*n:o._rightGap,c=cc.v2(i+o.content.width,0);break;case 3:a=c.top,a+=null!=n?o.node.height*n:o._topGap,c=cc.v2(0,-a);break;case 4:a=c.bottom+o.node.height,a-=null!=n?o.node.height*n:o._bottomGap,c=cc.v2(0,-a+o.content.height)}var s=o.content.getPosition();s=Math.abs(o._sizeType?s.y:s.x);var u=o._sizeType?c.y:c.x;.5<Math.abs((null!=o._scrollPos?o._scrollPos:s)-u)&&(o._scrollView.scrollToOffset(c,e),o._scrollToListId=t,o._scrollToEndTime=(new Date).getTime()/1e3+e,o._scrollToSo=o.scheduleOnce(function(){if(o._adheringBarrier||(o.adhering=o._adheringBarrier=!1),o._scrollPos=o._scrollToListId=o._scrollToEndTime=o._scrollToSo=null,r){var e=o.getItemByListId(t);e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},e+.1),e<=0&&o._onScrolling())}},h._calcNearestItem=function(){var t,e,n,r,o,i,a=this;a.nearestListId=null,a._virtual&&a._calcViewPos(),n=a.viewTop,r=a.viewRight,o=a.viewBottom,i=a.viewLeft;for(var c=!1,s=0;s<a.content.childrenCount&&!c;s+=a._colLineNum)if(t=a._virtual?a.displayData[s]:a._calcExistItemPos(s))switch(e=a._sizeType?(t.top+t.bottom)/2:(t.left+t.right)/2,a._alignCalcType){case 1:t.right>=i&&(a.nearestListId=t.id,i>e&&(a.nearestListId+=a._colLineNum),c=!0);break;case 2:t.left<=r&&(a.nearestListId=t.id,r<e&&(a.nearestListId+=a._colLineNum),c=!0);break;case 3:t.bottom<=n&&(a.nearestListId=t.id,n<e&&(a.nearestListId+=a._colLineNum),c=!0);break;case 4:t.top>=o&&(a.nearestListId=t.id,o>e&&(a.nearestListId+=a._colLineNum),c=!0)}if((t=a._virtual?a.displayData[a.displayItemNum-1]:a._calcExistItemPos(a._numItems-1))&&t.id==a._numItems-1)switch(e=a._sizeType?(t.top+t.bottom)/2:(t.left+t.right)/2,a._alignCalcType){case 1:r>e&&(a.nearestListId=t.id);break;case 2:i<e&&(a.nearestListId=t.id);break;case 3:o<e&&(a.nearestListId=t.id);break;case 4:n>e&&(a.nearestListId=t.id)}},h.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},h.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},h.skipPage=function(t,e){if(this.checkInited())return this._slideMode!=a.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=this._numItems||this.curPageNum!=t&&(this.curPageNum=t,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],t),this.scrollTo(t,e)))},h.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var n=cc.instantiate(e._itemTmp);e.content.addChild(n);for(var r=0;r<t;r++)cc.Component.EventHandler.emitEvents([e.renderEvent],n,r),n.height==e._itemSize.height&&n.width==e._itemSize.width||(e._customSize[r]=e._sizeType?n.height:n.width);return Object.keys(e._customSize).length||(e._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),e._customSize}},u=s,(l=[{key:"slideMode",get:function(){return this._slideMode},set:function(t){this._slideMode=t}},{key:"virtual",get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}},{key:"updateRate",get:function(){return this._updateRate},set:function(t){0<=t&&t<=6&&(this._updateRate=t)}},{key:"selectedId",get:function(){return this._selectedId},set:function(t){var e,n=this;switch(n.selectedMode){case c.SINGLE:if(!n.repeatEventSingle&&t==n._selectedId)return;if(e=n.getItemByListId(t),0<=n._selectedId?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=t,e&&(e.getComponent(g.default).selected=!0),0<=n._lastSelectedId&&n._lastSelectedId!=n._selectedId){var r=n.getItemByListId(n._lastSelectedId);r&&(r.getComponent(g.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case c.MULT:if(!(e=n.getItemByListId(t)))return;var o=e.getComponent(g.default);0<=n._selectedId&&(n._lastSelectedId=n._selectedId),n._selectedId=t;var i=!o.selected;o.selected=i;var a=n.multSelected.indexOf(t);i&&a<0?n.multSelected.push(t):!i&&0<=a&&n.multSelected.splice(a,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],e,t%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,i)}}},{key:"numItems",get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=a.PAGE||(e.curPageNum=e.nearestListId);else{var n=e.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),e._delRedundantItem(),(e.firstListId=0)<e.frameByFrameRenderNum){for(var r=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<r;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(var i=0;i<t;i++)e._createOrUpdateItem2(i);e.displayItemNum=t}}}},{key:"scrollView",get:function(){return this._scrollView}}])&&r(u.prototype,l),Object.defineProperty(u,"prototype",{writable:!1}),s}(cc.Component),s([d({type:cc.Enum(i)})],u.prototype,"templateType",void 0),s([d({type:cc.Node,visible:function(){return this.templateType==i.NODE}})],u.prototype,"tmpNode",void 0),s([d({type:cc.Prefab,visible:function(){return this.templateType==i.PREFAB}})],u.prototype,"tmpPrefab",void 0),s([d()],u.prototype,"_slideMode",void 0),s([d({type:cc.Enum(a)})],u.prototype,"slideMode",null),s([d({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==a.PAGE}})],u.prototype,"pageDistance",void 0),s([d({type:cc.Component.EventHandler,visible:function(){return this._slideMode==a.PAGE}})],u.prototype,"pageChangeEvent",void 0),s([d()],u.prototype,"_virtual",void 0),s([d({type:cc.Boolean})],u.prototype,"virtual",null),s([d({visible:function(){var t=this.virtual&&this.slideMode==a.NORMAL;return t||(this.cyclic=!1),t}})],u.prototype,"cyclic",void 0),s([d({visible:function(){return this.virtual}})],u.prototype,"lackCenter",void 0),s([d({visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],u.prototype,"lackSlide",void 0),s([d({type:cc.Integer})],u.prototype,"_updateRate",void 0),s([d({type:cc.Integer,range:[0,6,1],slide:!0})],u.prototype,"updateRate",null),s([d({type:cc.Integer,range:[0,12,1],slide:!0})],u.prototype,"frameByFrameRenderNum",void 0),s([d({type:cc.Component.EventHandler})],u.prototype,"renderEvent",void 0),s([d({type:cc.Enum(c)})],u.prototype,"selectedMode",void 0),s([d({visible:function(){return this.selectedMode==c.SINGLE}})],u.prototype,"repeatEventSingle",void 0),s([d({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>c.NONE}})],u.prototype,"selectedEvent",void 0),s([d({serializable:!1})],u.prototype,"_numItems",void 0),u=s([f,p(),v(cc.ScrollView),y(-5e3)],u),l.default=u,cc._RF.pop()},{}],LoadingController:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1ccec2LpZ1GaKbaDOE8Z6dj","LoadingController");var a,c=t,s=n,u=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0}),s.LoadingConst=void 0;var l=c("App"),h=c("BaseController"),f=c("HotUpdate"),d=c("ViewConst"),p=(c("LayerManager"),c("SceneConst"));(c=a=s.LoadingConst||(s.LoadingConst={}))[c.SetProgress=0]="SetProgress",c[c.AddProgressCompleteCB=1]="AddProgressCompleteCB",c[c.ProgressComplete=2]="ProgressComplete",c[c.SetIsShowBillBoard=3]="SetIsShowBillBoard",s.default=function(t){var e,n;function c(){var e;(e=t.call(this)||this).completeCb=null,e.completeTaget=null,e.hotUPdate=null,l.default.DebugUtils.isOpen(!0),e.loadProgress={gameRes:{cur:0,rate:20},gameZipRes:{cur:0,rate:20},configAndLoadgame:{cur:0,rate:10},preloadRes:{cur:0,rate:20},syncData:{cur:0,rate:10},allCnt:{cur:0,rate:0}};var n=0;for(var r in e.loadProgress)n+=e.loadProgress[r].rate;return e.loadProgress.allCnt.rate=n,l.default.ViewManager.register(0,{prefabName:"LoadingView",zIndex:0,controller:o(e)}),l.default.ViewManager.register(6,{prefabName:"DebugUI",zIndex:250,controller:o(e),isNotShowLoad:!0}),l.default.ViewManager.register(13,{prefabName:"TipView",zIndex:100,controller:o(e)}),l.default.ViewManager.register(5,{prefabName:"ArchiveonMgrView",zIndex:100,controller:o(e)}),l.default.ViewManager.register(14,{prefabName:"TipView",zIndex:250,isNotShowLoad:!0,controller:o(e)}),e.registerFunc(a.SetProgress,e.setProgress,o(e)),e.registerFunc(a.AddProgressCompleteCB,e.setProgress,o(e)),e.registerFunc(a.ProgressComplete,e.onProgressComplete,o(e)),l.default.ViewManager.open(0),e}n=t,(e=c).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var s=c.prototype;return s.onProgressComplete=function(){this.completeCb&&(this.completeCb.call(this.completeTaget),this.completeTaget=this.completeCb=null)},s.onGameStart=function(){l.default.DebugUtils.stop("\u52a0\u8f7d\u65f6\u95f4","\u5f00\u59cb\u8fdb\u5165\u573a\u666f"),l.default.SceneManager.runScene(p.SceneTag.GAME)},s.onAddProgressCompleteCB=function(t,e){this.completeCb=t,this.completeTaget=e},s.setProgress=function(t,e){if(this.loadProgress[e].cur=t,this.loadingView){var n=0;for(var r in this.loadProgress)n+=this.loadProgress[r].cur*this.loadProgress[r].rate;this.loadingView.onProgress(n/this.loadProgress.allCnt.rate)}},s.onLoadView=function(t){return u(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0===t.viewId&&this.loadGame(t);case 1:case"end":return e.stop()}},e,this)}))},s.onOpenView=function(){},s.onCloseView=function(t){return u(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.viewId===d.ViewConst.BillboardView&&this.setProgress(1,"billbord");case 1:case"end":return e.stop()}},e,this)}))},s.loadGame=function(t){return u(this,void 0,void 0,r().mark(function e(){var n,o=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||l.default.ViewManager.getView(0),l.default.DebugUtils.start("\u52a0\u8f7d\u65f6\u95f4"),this.onAddProgressCompleteCB(this.onGameStart,this),this.loadingView=t,this.hotUPdate=cc.director.getScene().getComponentInChildren(f.default),this.loadingView.checkHot(),e.next=8,this.hotUPdate.checkUpdate(function(t,e,n){o.loadingView.onHotProgress(t,e,n)});case 8:return l.default.GameDataMsr.tempData.isCheckUpdate=!0,Log.trace("\u5f00\u59cb\u52a0\u8f7d\u672c\u5730\u5b58\u6863\u6570\u636e!"),l.default.GameDataMsr.init(),cc.log("\u5f00\u59cb\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6"),e.next=14,l.default.ConfigManager.loadAllConfig(function(t,e){o.setProgress(t/e,"configAndLoadgame")},this);case 14:return Log.trace("\u521d\u59cb\u5316\u5e73\u53f0\u7c7b!"),l.default.Platform.init(),Log.trace("\u5f00\u59cb\u8ddf\u670d\u52a1\u5668\u540c\u6b65\u5b58\u6863\u6570\u636e!"),l.default.DebugUtils.start("\u540c\u6b65\u6570\u636e"),e.next=20,l.default.Platform.syncData().then(function(){o.setProgress(1,"syncData")});case 20:return l.default.DebugUtils.stop("\u540c\u6b65\u6570\u636e"),l.default.SaveManage.init(),l.default.DebugUtils.stop("\u52a0\u8f7d\u65f6\u95f4","\u5f00\u59cb\u52a0\u8f7d\u538b\u7f29\u5305"),e.next=25,l.default.Platform.loadZipFile(function(t,e){o.setProgress(t/e,"gameZipRes")});case 25:n=e.sent,l.default.DebugUtils.stop("\u52a0\u8f7d\u65f6\u95f4","\u52a0\u8f7d\u538b\u7f29\u5305\u5b8c\u6bd5"),l.default.SceneManager.preLoadScene(p.SceneTag.GAME,function(t,e){o.setProgress(t/e,"gameRes"),n||o.setProgress(t/e,"gameZipRes")},null),Log.trace("\u5f00\u59cb\u68c0\u67e5\u662f\u5426\u9700\u8981\u66f4\u65b0\u6bcf\u65e5\u6570\u636e!"),l.default.GameDataMsr.loadData(),l.default.SaveManage.checkIsNeedUpdateData(),this.setProgress(1,"preloadRes"),l.default.SaveManage.load(l.default.SoundManager.saveKey);case 27:case"end":return e.stop()}},e,this)}))},c}(h.default),cc._RF.pop()},{}],LoadingView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"814a8gyigxJBZqhyJZjGOPD","LoadingView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("BaseView"),l=i("LoadingController"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).tipNode=null,e.progressBar=null,e.progressLabel=null,e.targetPregress=0,e.curPregress=0,e.versionLab=null,e.isDownHotFile=!1,e.closeType=2,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this),this.curPregress=0,this.targetPregress||(this.targetPregress=.1),this.progressBar.progress=0,this.versionLab.string=c.default.Platform.getVersionStr()},i.showTipNode=function(){var t=this;this.tipNode.active=!0,this.tipNode.on(cc.Node.EventType.TOUCH_END,function(){t.tipNode.active=!1},this)},i.initData=function(){this._tempData=c.default.GameDataMsr.tempData},i.onProgress=function(t){this.targetPregress=t},i.onHotProgress=function(t,e,n){isNaN(t)&&(t=0),this.progressBar.progress=t,this.progressLabel.string=s.GameText.getText(lang.loading_updating)+" "+Math.floor(100*t)+"% ("+(e/1024).toFixed(3)+"KB / "+(n/1024).toFixed(3)+"KB)"},i.checkHot=function(){this.progressLabel.string=s.GameText.getText(lang.loading_check_update)},i.open=function(){this.enabled=!0,this._tempData.isCheckUpdate&&(this.progressLabel.string="0%")},i.update=function(){var t;this._tempData.isCheckUpdate&&(t=this.targetPregress,this.curPregress<t&&(this.curPregress+=.08,this.curPregress>t&&(this.curPregress=t),this.progressBar.progress=this.curPregress,this.progressLabel.string=Math.floor(100*this.curPregress)+"%"),1<=this.curPregress&&(this.applyFunc(l.LoadingConst.ProgressComplete),this.enabled=!1))},i.onTouchAgainGame=function(){cc.audioEngine.stopAll(),cc.game.restart()},o}(u.default),o([d({type:cc.Node})],i.prototype,"tipNode",void 0),o([d(cc.ProgressBar)],i.prototype,"progressBar",void 0),o([d(cc.Label)],i.prototype,"progressLabel",void 0),o([d(cc.Label)],i.prototype,"versionLab",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],LocalizedLabel:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6e81et1+r9EkKx5G8WCL0j5","LocalizedLabel");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("GameText"),u=cc._decorator,l=u.ccclass,h=u.property,f=(u.menu,u.executeInEditMode),d=u.requireComponent;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).label=null,e._debouncedUpdateLabel=null,e._dataID="",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,u=i.prototype;return u.onLoad=function(){this.fetchRender()},u.fetchRender=function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},u.updateLabel=function(){var t;this.label?(t=s.GameText.getTextByStr(this.dataID))&&(this.label.string=t):cc.error("Failed to update localized label, label component is invalid!")},a=i,(c=[{key:"dataID",get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),i([h()],a.prototype,"_dataID",void 0),i([h({})],a.prototype,"dataID",null),a=i([l,f(),d(cc.Label)],a),c.default=a,cc._RF.pop()},{}],LocalizedRich:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f5539Hq2MRDxocOd5FHiQi6","LocalizedRich");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("GameText"),u=cc._decorator,l=u.ccclass,h=u.property,f=(u.menu,u.executeInEditMode),d=u.requireComponent;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).label=null,e._debouncedUpdateLabel=null,e._dataID="",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,u=i.prototype;return u.onLoad=function(){this.fetchRender()},u.fetchRender=function(){var t=this.getComponent(cc.RichText);if(t)return this.label=t,void this.updateLabel()},u.updateLabel=function(){var t;this.label?(t=s.GameText.getTextByStr(this.dataID))&&(this.label.string=t):cc.error("Failed to update localized label, label component is invalid!")},a=i,(c=[{key:"dataID",get:function(){return cc.resources.getDirWithPath("/",cc.Prefab),this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),i([h()],a.prototype,"_dataID",void 0),i([h({})],a.prototype,"dataID",null),a=i([l,d(cc.RichText),f()],a),c.default=a,cc._RF.pop()},{}],LocalizedSprite:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3b0ecj0ciBO2ZCkbW8bh/p7","LocalizedSprite");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("GameText"),s=cc._decorator,u=s.ccclass,l=s.property,h=(s.menu,s.executeInEditMode),f=s.requireComponent;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).sprite=null,e.spriteFrameSet=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.fetchRender()},i.getSpriteFrameByLang=function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language==t)return this.spriteFrameSet[e].spriteFrame},i.updateSprite=function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")},i.fetchRender=function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(c.GameText.curLang)},o}(cc.Component),o([l(cc.Class({name:"SpriteFrameSet",properties:{language:{type:cc.Enum(c.LangEnum),default:0},spriteFrame:cc.SpriteFrame}}))],i.prototype,"spriteFrameSet",void 0),i=o([u,h(),f(cc.Sprite)],i),a.default=i,cc._RF.pop()},{}],Locator:[function(t,e,n){"use strict";cc._RF.push(e,"7e784TGAIROBaJ9z1vqMkNR","Locator");var r,o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.Locator=void 0;var c=i("App"),s=cc._decorator.ccclass;(i=r=function(){function t(){}return t.parse=function(t){cc.assert(t,"locator string is null");var e=t.split(/[.,//,>,#]/g),n=0;return e.map(function(e){var r=t[n-1]||">";return n+=e.length+1,{symbol:r,name:e.trim()}})},t.seekNodeByName=function(t,e){if(!t)return null;if(t.name==e)return t;for(var n=t.children,r=n.length,o=0;o<r;o++){var i=n[o];if(null!=(i=this.seekNodeByName(i,e)))return i}return null},t.locateNode=function(t,e,n){var o=this;r.locating||(this.startTime=Date.now(),this.locating=!0);var i=r.parse(e);cc.assert(i&&i.length);for(var a,s=t,u=0;u<i.length;u++){var l=i[u];switch(l.symbol){case"/":a=s.getChildByName(l.name);break;case".":a=s[l.name];break;case">":a=this.seekNodeByName(s,l.name)}if(!a){s=null;break}s=a}return s&&s.active&&n?(this.locating=!1,c.default.TimerManager.setFrameOut(1,function(){n(null,s)},this)):n&&(Date.now()-this.startTime>this.timeout?(this.locating=!1,n({error:"timeout",locator:e})):c.default.TimerManager.setTimeOut(100,function(){o.locateNode(t,e,n)},this)),s},t.locateNodeSync=function(t,e){var n=this;return new Promise(function(r){n.locateNode(t,e,function(t,e){r({error:t,node:e})})})},t.getNodeFullPath=function(t){for(var e=[],n=t;"GameScene"!==n.name&&e.unshift(n.name),(n=n.parent)&&"Canvas"!==n.name;);return e.join("/")},t}()).timeout=8e3,i=r=o([s],i),a.Locator=i=r,cc._RF.pop()},{}],LoginScene:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e4a0cbKPh5LJJyC1I0//W81","LoginScene");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("BaseScene"),h=a("GameText"),f=a("ControllerConst"),d=a("ADController"),p=a("LoadingController"),y=a("Platform"),v=a("SceneConst"),g=cc._decorator,m=g.ccclass,_=g.property;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).sceneName=v.SceneTag.LOGIN,e.loadingViewPrefab=null,e.SubProjectCfg=null,e.subCfg=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.onEnter=function(){var e=Object.create(null,{onEnter:{get:function(){return t.prototype.onEnter}}});return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.onEnter.call(this),.62<cc.winSize.height/cc.winSize.width&&(this.node.getComponent(cc.Canvas).fitWidth=!0),Log.trace("\u521d\u59cb\u5316\u5e73\u53f0\u7c7b"),y.Platform.init(),t.next=6,h.GameText.init();case 6:this.initModule();case 7:case"end":return t.stop()}},t,this)}))},a.initModule=function(){u.default.ControllerManager.register(f.ControllerConst.Loading,p.default),u.default.ControllerManager.register(f.ControllerConst.AD,d.ADController)},i}(l.default),i([_(cc.Prefab)],a.prototype,"loadingViewPrefab",void 0),i([_(cc.JsonAsset)],a.prototype,"SubProjectCfg",void 0),i([_({type:cc.JsonAsset})],a.prototype,"subCfg",void 0),a=i([m],a),c.default=a,cc._RF.pop()},{}],Log:[function(t,e){"use strict";function n(){n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&r.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function n(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return n("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e(function(e,o){n(t,r,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"17ba85cPTtNpr4XAi4FovZU","Log");var r=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Date.prototype.Format=function(t){var e,n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[e]:("00"+n[e]).substr((""+n[e]).length)));return t};var o=function(){function t(){this.max_size=512e3,this.str="",this.warnStr="",this._date=new Date,this.saveIndex=0,this.maxCache=10;var e=cc.sys.localStorage.getItem("saveIndex");e&&(this.saveIndex=parseInt(e),e="logCache"+this.getCurIndex(),(e=cc.sys.localStorage.getItem(e))&&(this.str=e+"\n\n/--------------------\u767b\u5f55"+this._date.Format("MM-dd hh:mm:ss: ")+"----/")),(t._instance=this).init()}t.getInstance=function(){return this._instance},t.trace=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).log.apply(e,[t].concat(r))},t.warn=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).warn.apply(e,[t].concat(r))},t.error=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=cc).error.apply(e,[t].concat(r))},t.debug=function(){};var e=t.prototype;return e.onOutputArchive=function(t){var e=document.createElement("a");e.download=(new Date).Format("\u9519\u8bef\u65e5\u5fd7-(MM-dd hh:mm:ss)")+".log",e.style.display="none",t=new Blob([JSON.stringify(t,null,4)]),e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},e.sendToNative=function(t){return r(this,void 0,void 0,n().mark(function e(){var r,o,i,a,c;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=cc.sys.localStorage.getItem("bdlm_game"))||(r=Date.now()+""+Math.floor(1e5*Math.random()),cc.sys.localStorage.setItem("bdlm_game",r)),o="/-------------\u7cbe\u7075\u5408\u6210 id:"+r+", pId:"+t+"-----------/",0<=this.saveIndex){for(i=Math.max(this.saveIndex-this.maxCache+1,0);i<=this.saveIndex;i++)a="logCache"+i%this.maxCache,(c=cc.sys.localStorage.getItem(a))&&(o+=c,cc.sys.localStorage.setItem(a,""));this.saveIndex=0}return e.abrupt("return",(this.onOutputArchive(o),this.str="",r));case 5:case"end":return e.stop()}},e,this)}))},e.requestAsync=function(e,n,r){return void 0===r&&(r=1e4),new Promise(function(o,i){var a=new XMLHttpRequest;a.timeout=r,a.onerror=function(t){i(t),i=null},a.ontimeout=function(){i("\u8bf7\u6c42\u8d85\u65f6"),i=null},a.onreadystatechange=function(){var e,n;4==a.readyState&&(e=400<=a.status||0==a.status,n=a.responseText,e?(t.error(a.status),i(a.status)):o(n))},a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(n)})},e.onConnect=function(){this._log("onConnect"),this.isConnect=!0},e.onClose=function(){},e.onError=function(){this._log("onError")},e.onSocketData=function(){},e.initWebSocket=function(){},t.init=function(){},e.init=function(){var e=this;cc.sys.isNative?(jsb.onError(function(n,r,o){return o=JSON.stringify({line:n,err:r,file:o},null,4),t._instance.addLog(o),e.cacheCurLog(),!0}),window.__errorHandler=function(n,r,o){return o=JSON.stringify({file:n,line:r,err:o},null,4),t._instance.addLog(o),e.cacheCurLog(),!0}):(window.onerror=function(n,r,o){return console.log("\u9519\u8bef"),o=JSON.stringify({file:r,line:o,err:n},null,4),t._instance.addLog(o),console.error("\u6355\u6349\u5230\u9519\u8bef",n),e.cacheCurLog(),alert("\u6355\u6349\u5230\u9519\u8bef!!!!!,\u8bf7\u8054\u7cfb\u5f00\u53d1\u8005"),!0},window.addEventListener("unhandledrejection",function(e){return e=JSON.stringify({line:e.reason.message,err:e.reason.stack},null,4),t._instance.addLog(e),cc.error(e),alert("\u6355\u6349\u5230\u9519\u8bef!!!!!,\u8bf7\u8054\u7cfb\u5f00\u53d1\u8005"),!0})),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onShow,this)},e.onHide=function(){this.cacheCurLog()},e.onShow=function(){},e.sendLog=function(t){this._date.setTime(Date.now()),this.requestAsync("https://www.gzqidong.cn/test/SaveLog1.php","info="+encodeURIComponent(this._date.Format("hh:mm:ss: ")+t))},e.getCurIndex=function(){return this.saveIndex%this.maxCache},e.cacheCurLog=function(){console.log("\u7f13\u5b58log"),cc.sys.localStorage.setItem("logCache"+this.getCurIndex(),this.str),cc.sys.localStorage.setItem("saveIndex",this.saveIndex+"")},e.addLog=function(){},t}();window.Log=o,cc._RF.pop()},{}],LvUpBox:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d9468CdJNlGhLvzs/BvF/X5","LvUpBox");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("HoldEvent"),u=i("PanelAni"),l=i("NotificationConst"),h=i("BagController"),f=i("MyBigLong"),d=i("MachineService"),p=i("MapService"),y=cc._decorator,v=y.ccclass,g=y.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).bgNode=null,e.progressBar=null,e.maxNode=null,e.diamondNode=null,e.starListNode=null,e.lvUpBtn=null,e.costLab=null,e.doubleTipBg=null,e.lvLab=null,e.nameLab=null,e.foodValueLab=null,e.timeLab=null,e.panelAni=null,e.machineData=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.node.zIndex=10,this.node.removeFromParent(!1)},i.onTouchLvUpBtn=function(){c.default.SoundManager.playEffect("clickBtn"),d.default.ins.lvUpkMachine(this.machineData.cfg.machine_num-1),this.updateData()},i.updateData=function(){var t=this.machineData;t.attr.isMaxLevel()?(this.lvUpBtn.interactable=!1,this.progressBar.progress=1,this.costLab.string="MAX",this.updateStar(!0)):(this.lvUpBtn.interactable=t.canLevelUp(),this.progressBar.progress=t.attr.getDoubleProgressRate(),this.costLab.string=f.default.toString(t.attr.upgradeCost),this.updateStar(!1)),this.lvLab.string="Lv."+t.attr.level,this.foodValueLab.string=f.default.toString(t.attr.value),this.timeLab.string=t.attr.manufactureTime+"s",this.nameLab.string=t.name},i.onUpdateMoney=function(){this.machineData.attr.isMaxLevel()||(this.lvUpBtn.interactable=this.machineData.canLevelUp())},i.onDisable=function(){c.default.NotificationCenter.removeListener(l.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this)},i.showBox=function(t){var e=this;if(t!=this.machineData){c.default.NotificationCenter.addListener(l.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this),this.machineData=t,this.updateData(),this.node.scale=0;var n=t.getPos();n.y+=0;var r=100+this.node.width/2;t=cc.view.getVisibleSize().width-this.node.width/2-50,n.x<r?this.bgNode.x=80:n.x>t?this.bgNode.x=-80:this.bgNode.x=0,this.node.position=n,this.node.parent||p.default.ins.mapNode.addChild(this.node),this.panelAni.showPanel(),this.doubleTipBg.active=!1}else this.panelAni.hidePanel(function(){e.node.removeFromParent(!1),e.machineData=null})},i.hideBox=function(){var t=this;this.node.parent&&this.panelAni.hidePanel(function(){t.node.removeFromParent(!1),t.machineData=null})},i.updateStar=function(t){void 0===t&&(t=!1);var e,n=this.machineData.attr.getMaxStarNum(),r=this.machineData.attr.getCurStarNum(),o=Math.ceil(r/5),i=t?_:m[o],a=m[0===o?0:o-1],c=5;e=n%5!=0&&Math.floor(n/5)==Math.floor(r/5)?(c=n%5)-n+r:r%5;for(var s=this.starListNode.children,u=0;u<s.length;u++)s[u].children[0].color=u<e?i:a,s[u].active=u<c;this.maxNode.active=t},i.playGetDiamond=function(){var t=this;if(this.diamondNode.active){var e=cc.find("Canvas").getChildByName("DefaultCamera").getComponent(cc.Camera),n=this.diamondNode.convertToWorldSpaceAR(cc.Vec2.ZERO),r=e.getWorldToScreenPoint(n);c.default.NotificationCenter.dispatch(l.NotificationConst.PLAY_MONEY_ANI,h.CostType.diamond,2,r)}this.doubleTipBg.stopAllActions(),this.doubleTipBg.active=!0,this.doubleTipBg.scale=0,cc.tween(this.doubleTipBg).to(.2,{scale:1}).delay(2).call(function(){t.doubleTipBg.active=!1}).start()},o}(cc.Component),o([g({type:cc.Node})],i.prototype,"bgNode",void 0),o([g({type:cc.ProgressBar})],i.prototype,"progressBar",void 0),o([g({type:cc.Node})],i.prototype,"maxNode",void 0),o([g({type:cc.Node})],i.prototype,"diamondNode",void 0),o([g({type:cc.Node})],i.prototype,"starListNode",void 0),o([g({type:s.default})],i.prototype,"lvUpBtn",void 0),o([g({type:cc.Label})],i.prototype,"costLab",void 0),o([g({type:cc.Node})],i.prototype,"doubleTipBg",void 0),o([g({type:cc.Label})],i.prototype,"lvLab",void 0),o([g({type:cc.Label})],i.prototype,"nameLab",void 0),o([g({type:cc.Label})],i.prototype,"foodValueLab",void 0),o([g({type:cc.Label})],i.prototype,"timeLab",void 0),o([g(u.PanelAni)],i.prototype,"panelAni",void 0),i=o([v],i),a.default=i;var m=[cc.color().fromHEX("#FFFFFF"),cc.color().fromHEX("#ffc845"),cc.color().fromHEX("#8fdb52"),cc.color().fromHEX("#6be1f6"),cc.color().fromHEX("#ff6c6c")],_=cc.color().fromHEX("#8fdb52");cc._RF.pop()},{}],MachineAttr:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"09857BO+T9AXbhqeNjl9ZUz","MachineAttr");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0});var u=c("GlobalAttr"),l=c("MyBigLong"),h=c("StageUpgradeService");s.default=function(){function t(){this.cfg=null,this.baseValue=0,this.value=0,this.upgradeCost=0,this.baseUpgradeCost=0,this.installCost=0,this.foodRate=1,this.isUnlock=!1,this.slotCnt=0,this.manufactureTime=0,this.maxLevel=0,this.maxSlot=0,this.data=null,this._slotAddLv=null,this._doubleupLv=null}var e,n,o=t.prototype;return o.init=function(t,e,n,r,o,i){if(this.data=t,this.maxLevel=n,this.maxSlot=r,this.cfg=e,this.baseValue=this.value=l.default.unpackData(e.value),this.baseUpgradeCost=l.default.unpackData(e.upgrade_cost),this.installCost=l.default.unpackData(e.install_cost),this._slotAddLv=o,this._doubleupLv=i,this.calFoodRate(),this.calFoodFinalTime(),this.calCost(),t.lv){this.isUnlock=!0,this.slotCnt=1;for(var a=t.lv,c=t.lv=1;c<a;c++)this.levelUp()}},o.getIdleRate=function(){return this.value*this.slotCnt/(this.manufactureTime+10)},o.calFoodRate=function(){this.foodRate=h.default.ins.menuprofitValue[this.cfg.machine_num]||1;var t=h.default.ins.menuprofitValue[-1];t&&(this.foodRate*=t)},o.calFoodValue=function(){this.value=Math.ceil(this.baseValue*this.foodRate)},o.calCost=function(){this.upgradeCost=Math.ceil(this.baseUpgradeCost*u.default.ins.menuItemUpgradeDiscount)},o.calFoodFinalTime=function(){this.manufactureTime=Math.ceil(this.cfg.manufacture_time*(h.default.ins.fastermenu[this.cfg.machine_num]||1))},o.isDoubleLevel=function(t){return this._doubleupLv.includes(t)},o.isAddSlot=function(t){return this._slotAddLv.includes(t)},o.getDoubleProgressRate=function(){for(var t=this._doubleupLv,e=t.length,n=this.data.lv,r=0;r<e;r++){var o=t[r];if(o>n)return 0===r?n/o:(n-t[r-1])/(o-t[r-1])}},o.isMaxLevel=function(){return this.data.lv>=this.maxLevel},o.unlockSelf=function(){this.isUnlock=!0,this.slotCnt=1,this.data.lv=1},o.levelUp=function(){this.data.lv++;var t=this.isDoubleLevel(this.data.lv);t&&(this.baseValue*=2);var e=Math.max(Math.floor((this.cfg.value_increment-1e3)*this.baseValue/1e3),1);return this.baseValue+=e,e=Math.max(Math.floor((this.cfg.cost_increment-1e3)*this.baseUpgradeCost/1e3),1),this.baseUpgradeCost+=e,this.slotCnt<this.maxSlot&&this.isAddSlot(this.data.lv)&&this.slotCnt++,this.calFoodValue(),this.calCost(),t},o.getCurStarNum=function(){for(var t,e=0,n=r(this._doubleupLv);!(t=n()).done;){var o=t.value;this.level>=o&&e++}return e},o.getMaxStarNum=function(){for(var t,e=0,n=r(this._doubleupLv);!(t=n()).done;){var o=t.value;this.maxLevel>=o&&e++}return e},e=t,(n=[{key:"level",get:function(){return this.data.lv}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],MachineData:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"cda67SLXlFApIpN7w9BoVPE","MachineData");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("GameText"),l=a("Toast"),h=a("RedPoinAnim"),f=a("MachineLvUpAni"),d=a("RoleUnlockAni"),p=a("GameConst"),y=a("MachineAttr"),v=a("CurrencyService"),g=a("MachineService"),m=a("MapService"),_=a("SlotData");c.default=function(){function t(){this.cfg=null,this.menu=null,this.unlockFrameBg=null,this.foodBg=null,this.slots=[],this.unlockSlots=[],this.unlockCnt=0,this.attr=null,this.foodImg=null,this.name="",this.tipNode=null}var e=t.prototype;return e.getPos=function(){var t=this.foodBg.node.position;return t.x+=this.foodBg.node.parent.x,t.y+=this.foodBg.node.parent.y+this.foodBg.node.height/2,t},e.updateMoney=function(){this.attr.isUnlock?this.tipNode.active=this.canLevelUp():this.tipNode.active=this.canUnlock()},e.setMemento=function(t){var e=this.attr=new y.default,n=m.default.ins.define,r=m.default.ins.curCfg;e.init(t,this.cfg,r.machine_max_lv,r.machine_slot_max,r.stage<1e4?n.machine_slot_add_lv:n.event_machine_slot_add_lv,n.machine_value_doubleup_lv);for(var o=this.slots.length,i=0;i<o;i++){var a=this.slots[i],c=e.slotCnt>i;c&&(this.unlockSlots[i]=a,this.unlockCnt=i+1),a.setActive(c)}e.isUnlock?this.foodBg.spriteFrame=this.unlockFrameBg:this.foodImg.node.active=!1,this.foodBg.node.on(cc.Node.EventType.TOUCH_END,this.onTouchUnlock,this),this.updateMoney()},e.onTouchUnlock=function(){(this.attr.isUnlock?g.default.ins.lvUpBox:g.default.ins.machineUnlockBox).showBox(this)},e.canUnlock=function(){return m.default.ins.mapSaveData.money>=this.attr.installCost},e.canLevelUp=function(){return!this.attr.isMaxLevel()&&m.default.ins.mapSaveData.money>=this.attr.upgradeCost},e.unlockSlot=function(t){var e=this,n=this.slots[t];this.unlockCnt=t+1;var o=s.default.NodePoolMsr.cookUnlockAni.pop(),i=o.getComponent(d.default);o.position=n.selfPos,m.default.ins.uiLayer.addChild(o),i.init(function(){n.unlock(),e.unlockSlots.push(n);for(var t,o=r(e.slots);!(t=o()).done;)t.value.updateSiblingIndex();s.default.NotificationCenter.dispatch(p.GameNotificationConst.UNLOCK_SLOT,n)},this)},e.unlock=function(){this.attr.unlockSelf(),this.unlockSlot(0),this.foodImg.node.active=!0,this.foodBg.spriteFrame=this.unlockFrameBg},e.lvUp=function(){if(!this.attr.isMaxLevel()){var t=-this.attr.upgradeCost;if(v.default.ins.checkMoneyEnough(t)){var e=this.attr.levelUp();this.attr.slotCnt>this.unlockCnt&&this.unlockSlot(this.attr.slotCnt-1),v.default.ins.moneyChange(t);var n=this.tipNode.parent,r=s.default.NodePoolMsr.machineLvUpAni.pop();return n.addChild(r),r.getComponent(f.default).playAni(),e}return l.default.launch("\u91d1\u5e01\u4e0d\u8db3!"),!1}l.default.launch("\u5df2\u7ecf\u662f\u6700\u5927\u7b49\u7ea7!")},e.replacBtn=function(t,e){var n=t.getChildByName("FoodOrder");this.unlockFrameBg=n.getComponent(cc.Sprite).spriteFrame,n.parent.addChild(e),e.x=n.x,e.y=n.y,n.destroy();var r=n.children[0];r?r.removeFromParent(!1):r=new cc.Node,e.addChild(r);var o=r.getComponent(cc.Sprite);o=o||r.addComponent(cc.Sprite),this.foodImg=o,this.foodBg=e.getComponent(cc.Sprite),this.tipNode=e.getChildByName("arrow"),this.tipNode.getComponent(h.RedPoinAnim)||this.tipNode.addComponent(h.RedPoinAnim)},e.parse=function(t,e,n){this.replacBtn(t,e),this.menu=n,this.name=u.GameText.getTextByStr(n.name),this.attr=new y.default;for(var r=t.getChildByName("slots"),o=t.x+r.x,i=t.y+r.y,a=-t.width*t.anchorX,c=t.width-t.width*t.anchorX,s=r.children,l=m.default.ins.layer,h=s.length-1;0<=h;h--){var f=s[h],d=new _.default;d.machineData=this;var p=f.children[0];if(d.direction=parseInt(p.name.slice(5)),f.children[1]&&(d.ani=f.children[1].getComponent(cc.Animation),d.ani&&6===d.direction)){var v=d.ani.node;1<v.children.length?v.children[1].scaleX=-1:v.scaleX=-1}d.chefPos=cc.v2(p.x+o+f.x,p.y+i+f.y),d.selfPos=cc.v2(o+f.x,i+f.y),p.destroy();var g=parseInt(f.name.split("_")[1]);this.slots[g]=d,d.stopCook(),d.node=f,d.siblingIndex=h;var b=r.x+f.x;f.getComponent(cc.Sprite)&&(b<a||c<b)?(f.removeFromParent(!1),l.addChild(f),f.x=o+f.x,f.y=i+f.y,d.parentNode=l):d.parentNode=f.parent}},e.getEmpSlot=function(){for(var t,e=r(this.unlockSlots);!(t=e()).done;){var n=t.value;if(!n.isWorking)return n}return null},t}(),cc._RF.pop()},{}],MachineLvUpAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"29044YD+EZFpbsNqFUqrQlL","MachineLvUpAni");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).ani=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.ani.on(cc.Animation.EventType.FINISHED,this.onAniPlayFinish,this)},i.playAni=function(){this.ani.play("work")},i.onAniPlayFinish=function(){c.default.NodePoolMsr.machineLvUpAni.push(this.node)},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],MachineService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6c7a7sH3bxOB5XyQlCJwKoZ","MachineService");var c,s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0});var h=u("App"),f=u("NodePool"),d=u("Toast"),p=u("ControllerConst"),y=u("NotificationConst"),v=u("LvUpBox"),g=u("MachineUnlockBox"),m=u("MachineData"),_=u("GameConst"),b=u("GlobalAttr"),w=u("BaseService"),C=u("CurrencyService"),S=u("MapService"),O=cc._decorator,T=O.ccclass,I=O.property;u=c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).machineDatas=null,e.machineUnlockBox=null,e.lvUpBox=null,e.isIdleRateChange=!0,e.idleRate=0,e.buffAttr=null,e.machineUnlockBtnPool=null,e.saveData=null,e.unlockMachines=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){this.machineUnlockBtnPool=new f.default,c.ins=this},i.onUpdateMoney=function(){for(var t,e=r(this.machineDatas);!(t=e()).done;)t.value.updateMoney()},i.onUpdateEquipCostumeAttr=function(){this.isIdleRateChange=!0},i.onDestroy=function(){h.default.NotificationCenter.removeAll(this)},i.parse=function(t){h.default.NotificationCenter.addListener(_.GameNotificationConst.UPDATE_EQUIP_COSTUME_ATTR,this.onUpdateEquipCostumeAttr,this),this.machineUnlockBtnPool.prefab=S.default.ins.foodBundle.get("MachineUnlockBtn",cc.Prefab),this.machineDatas=[];for(var e=S.default.ins.layer,n=S.default.ins.curCfg.StageMachine,r=S.default.ins.machineMenu,o=t.children.concat(),i=S.default.ins.foodBundle,a=o.length,c=0;c<a;c++){var s=o[c],u=new m.default;u.cfg=n[c],u.parse(s,this.machineUnlockBtnPool.pop(),r[u.cfg.menu_idx]),u.foodImg.spriteFrame=i.get("img/"+u.menu.icon,cc.SpriteFrame),this.machineDatas.push(u),s.removeFromParent(!1),e.addChild(s)}},i.unlockMachine=function(t){this.isIdleRateChange=!0;var e=this.machineDatas[t];e?C.default.ins.checkMoneyEnough(e.attr.installCost)?(e.unlock(),c.ins.unlockMachines.push(e),C.default.ins.moneyChange(-e.attr.installCost),h.default.NotificationCenter.dispatch(_.GameNotificationConst.UNLOCK_MACHINE,e)):d.default.launch("\u91d1\u5e01\u4e0d\u8db3!"):Log.error("\u4e0d\u5b58\u5728\u7684\u89e3\u9501\u5e8f\u53f7:",t)},i.getIdleRate=function(){if(this.isIdleRateChange){this.isIdleRateChange=!1,this.idleRate=0;for(var t=this.machineDatas.length,e=0;e<t;e++)this.machineDatas[e].attr.isUnlock&&(this.idleRate+=this.machineDatas[e].attr.getIdleRate());this.idleRate*=b.default.ins.cookMoneyRate}return this.idleRate},i.calculateIdleMoney=function(t,e){void 0===e&&(e=!1);var n=this.getIdleRate();return e&&b.default.ins.offlineRevenue&&(n*=b.default.ins.offlineRevenue),Math.floor(n*t)},i.lvUpkMachine=function(t){var e=this.machineDatas[t];e?(e.lvUp()&&(this.lvUpBox.playGetDiamond(),1<S.default.ins.curId&&C.default.ins.diamondChange(2)),h.default.NotificationCenter.dispatch(y.NotificationConst.MACHINE_UPDATE,t),this.isIdleRateChange=!0):Log.error("\u4e0d\u5b58\u5728\u7684\u89e3\u9501\u5e8f\u53f7:",t)},i.reCalAllFoodValue=function(){for(var t,e=r(this.machineDatas);!(t=e()).done;){var n=t.value;n.attr.calFoodRate(),n.attr.calFoodValue()}this.isIdleRateChange=!0},i.reCalAllFoodCost=function(){for(var t,e=r(this.machineDatas);!(t=e()).done;){var n=t.value;n.attr.calCost(),n.updateMoney()}},i.reCalFoodValue=function(t){var e=this.machineDatas[t];e.attr.calFoodRate(),e.attr.calFoodValue(),this.isIdleRateChange=!0},i.init=function(){this.buffAttr=b.default.ins.buffAttr;var t=h.default.ControllerManager.getControllerModel(p.ControllerConst.Game);h.default.NotificationCenter.addListener(y.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this);var e=t.getCurMapData();this.saveData=e.machines,this.unlockMachines=[];for(var n=this.machineDatas.length,r=0;r<n;r++){var o=this.machineDatas[r];e.machines[r]||(e.machines[r]={lv:0}),o.setMemento(e.machines[r]),o.attr.isUnlock&&this.unlockMachines.push(o)}},i.destorySelf=function(){h.default.NotificationCenter.removeAll(this),this.lvUpBox.node.removeFromParent(!1),this.machineUnlockBox.node.removeFromParent(!1)},i.isAllMachineMax=function(){for(var t,e=r(this.machineDatas);!(t=e()).done;)if(!t.value.attr.isMaxLevel())return!1;return!0},i.getMachinProgress=function(){for(var t,e=0,n=this.machineDatas.length*this.machineDatas[0].attr.maxLevel,o=r(this.machineDatas);!(t=o()).done;){var i=t.value;i.attr.data&&i.attr.data.lv&&(e+=i.attr.data.lv)}return e/n},i.getMachinAllLvCnt=function(){for(var t,e=0,n=r(this.machineDatas);!(t=n()).done;){var o=t.value;o.attr.data&&o.attr.data.lv&&(e+=o.attr.data.lv)}return e},i.getCurMachineMaxLv=function(){for(var t,e=0,n=r(this.machineDatas);!(t=n()).done;){var o=t.value;o.attr.data&&o.attr.data.lv&&e<o.attr.data.lv&&(e=o.attr.data.lv)}return e},o}(w.default),s([I(g.default)],u.prototype,"machineUnlockBox",void 0),s([I(v.default)],u.prototype,"lvUpBox",void 0),u=c=s([T],u),l.default=u=c,cc._RF.pop()},{}],MachineUnlockBox:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e377190w91ADb7R0RJHQmx9","MachineUnlockBox");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("PanelAni"),u=i("NotificationConst"),l=i("MachineService"),h=i("MapService"),f=cc._decorator,d=f.ccclass,p=f.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).btnLab=null,e.btn=null,e.bgNode=null,e.panelAni=null,e.machineData=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.node.zIndex=10,this.node.removeFromParent(!1)},i.onTouchBtn=function(){c.default.SoundManager.playEffect("clickBtn"),l.default.ins.unlockMachine(this.machineData.cfg.machine_num-1),this.node.removeFromParent(!1),this.machineData=null},i.onUpdateMoney=function(){this.btn.interactable=this.machineData.canUnlock()},i.onDisable=function(){c.default.NotificationCenter.removeListener(u.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this)},i.showBox=function(t){if(t!=this.machineData){c.default.NotificationCenter.addListener(u.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this),this.btn.interactable=t.canUnlock(),this.machineData=t,this.btnLab.string=t.cfg.install_cost,this.node.scale=0;var e=t.getPos();e.y+=0;var n=100+this.node.width/2;t=cc.view.getVisibleSize().width-this.node.width/2-50,e.x<n?this.bgNode.x=60:e.x>t?this.bgNode.x=-60:this.bgNode.x=0,this.node.position=e,this.node.parent||h.default.ins.mapNode.addChild(this.node),this.playShowAni()}else this.playHideAni()},i.playShowAni=function(){this.panelAni.showPanel()},i.playHideAni=function(){var t=this;this.panelAni.hidePanel(function(){t.node.removeFromParent(!1),t.machineData=null})},o}(cc.Component),o([p(cc.Label)],i.prototype,"btnLab",void 0),o([p(cc.Button)],i.prototype,"btn",void 0),o([p(cc.Node)],i.prototype,"bgNode",void 0),o([p(s.PanelAni)],i.prototype,"panelAni",void 0),i=o([d],i),a.default=i,cc._RF.pop()},{}],MailAwardItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4c3dcvc8CNIbZ+/wWYSFZ4b","MailAwardItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("ControllerConst"),u=i("BagConst"),l=i("CostumeConst"),h=i("GameConst"),f=cc._decorator,d=f.ccclass,p=f.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).iconSpr=null,e.num=null,e.bgSpr=null,e.costumeTypeSpr=null,e.arrowList=null,e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.setData=function(t,e){var n=Number(t);this.num.string="x"+e;var r=c.default.ControllerManager.applyFunc(s.ControllerConst.Item,u.BagConst.GET_ITEM,n);if(r.isCostume()){var o=r.getTempCostume();this.costumeTypeSpr.node.active=!0,this.arrowList.active=!0,c.default.CommonUtils.setSpriteFrame(l.getRarityUrlByGrade(o.data.grade),this.bgSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,o.getIcon(),this.iconSpr),c.default.CommonUtils.setSpriteFrameByBundle(h.BundleType.MAP_ICON,o.getTypeIcon(),this.costumeTypeSpr);for(var i=l.getGradeLv(o.data.grade),a=this.arrowList.children,f=0;f<a.length;f++)a[f].active=f<i}else this.costumeTypeSpr.node.active=!1,this.arrowList.active=!1,c.default.CommonUtils.setSpriteFrame(r.getItemPic(),this.iconSpr)},o}(cc.Component),o([p(cc.Sprite)],i.prototype,"iconSpr",void 0),o([p(cc.Label)],i.prototype,"num",void 0),o([p(cc.Sprite)],i.prototype,"bgSpr",void 0),o([p(cc.Sprite)],i.prototype,"costumeTypeSpr",void 0),o([p(cc.Node)],i.prototype,"arrowList",void 0),i=o([d],i),a.default=i,cc._RF.pop()},{}],MailBoxView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"77469SpsB1IYJO9AocVh4K8","MailBoxView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("BaseView"),h=a("Toast"),f=a("NotificationConst"),d=(a("ViewConst"),a("LayerManager"),a("MailAwardItem")),p=a("MailController"),y=cc._decorator,v=y.ccclass,g=y.property;(a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).title=null,e.context=null,e.time=null,e.awardItem=null,e.content=null,e.gainBtn=null,e.delBtn=null,e.bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.open=function(e,n){t.prototype.open.call(this),this.id=e,this.status=n,this.updateView()},a.updateBtnState=function(){switch(this.status){case p.MailStatus.readed:this.gainBtn.active=!0,this.delBtn.active=!1;break;case p.MailStatus.geted:case p.MailStatus.read_get:this.gainBtn.active=!1,this.delBtn.active=!0}},a.updateView=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n,o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.content.removeAllChildren(),t.next=3,this.controller.readMailById(this.id);case 3:if(e=t.sent)if(this.status=e.state,this.updateBtnState(),n=u.default.DateUtils.getTimezoneOffset(),this.title.string=e.title,this.context.string=e.content,n=e.expire_time-n,n=new Date(1e3*n).Format("yyyy-MM-dd   hh:mm"),this.time.string=n,this.awards=e.awards,e.awards.length)for(this.content.active=!0,o=0;o<e.awards.length;o++)this.creatAwardItem(e.awards[o].item,e.awards[o].number);else this.content.active=!1,this.gainBtn.active=!1,this.delBtn.active=!0;case 5:case"end":return t.stop()}},t,this)}))},a.creatAwardItem=function(t,e){var n=cc.instantiate(this.awardItem);this.content.addChild(n),n.getComponent(d.default).setData(t,e)},a.onTouchGet=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.controller.gainAndSenReward(this.id);case 2:if(!t.sent){t.next=6;break}this.gainBtn.active=!1,this.delBtn.active=!0,t.next=7;break;case 6:h.default.launch("\u9886\u53d6\u90ae\u4ef6\u5931\u8d25");case 7:case"end":return t.stop()}},t,this)}))},a.onTouchDel=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.controller.delMailById(this.id);case 2:if(!t.sent){t.next=6;break}u.default.NotificationCenter.dispatch(f.NotificationConst.UPDATE_MAIL_LIST),u.default.ViewManager.close(44),t.next=7;break;case 6:h.default.launch("\u5220\u9664\u90ae\u4ef6\u5931\u8d25");case 7:case"end":return t.stop()}},t,this)}))},i}(l.default)).VIEW_INFO={prefabName:"mail/MailBoxView",zIndex:100,key:44},i([g(cc.Label)],a.prototype,"title",void 0),i([g(cc.Label)],a.prototype,"context",void 0),i([g(cc.Label)],a.prototype,"time",void 0),i([g(cc.Node)],a.prototype,"awardItem",void 0),i([g(cc.Node)],a.prototype,"content",void 0),i([g(cc.Node)],a.prototype,"gainBtn",void 0),i([g(cc.Node)],a.prototype,"delBtn",void 0),a=i([v],a),c.default=a,cc._RF.pop()},{}],MailConst:[function(t,e,n){"use strict";cc._RF.push(e,"2c6542r/cNMDoAtOCmTwMLm","MailConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.MailConst=void 0,(r=r.MailConst||(r.MailConst={}))[r.CREATE_LOCAL_MAIL=0]="CREATE_LOCAL_MAIL",cc._RF.pop()},{}],MailController:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"153f3IYZEhMs4pfIZJHODgc","MailController");var u,l=t,h=n,f=(u=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(h,"__esModule",{value:!0}),h.MailController=h.MailStatus=void 0;var d=l("App"),p=l("BaseController"),y=l("ControllerConst"),v=l("NotificationConst"),g=(l("ViewConst"),l("BagConst")),m=l("GameConst"),_=l("CurrencyService"),b=l("MailBoxView"),w=l("MailConst"),C=l("MailListView");h.MailStatus={new:0,readed:1,read_get:3,geted:2,deleted:4},l=u([l=cc._decorator.ccclass],l=function(t){var e,n;function i(){var e;return(e=t.call(this)||this).saveData=null,e.serverMailData=null,d.default.ViewManager.register1(C.default.VIEW_INFO,c(e)),d.default.ViewManager.register1(b.default.VIEW_INFO,c(e)),d.default.SaveManage.add(c(e),"mail",!1,!0),d.default.SaveManage.load("mail"),e.initServerMailInfo(),e.initFunc(),e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var a=i.prototype;return a.createMemento=function(){return this.saveData},a.setMemento=function(t){t&&t.id?this.saveData=t:this.saveData={id:1,localMailData:{}}},a.initFunc=function(){this.registerFunc(w.MailConst.CREATE_LOCAL_MAIL,this.createLocalMail,this)},a.createLocalMail=function(t,e,n){var r=d.default.DateUtils.secondNow();this.saveData.id++;var o=-this.saveData.id;this.saveData.localMailData[o]={isLocal:!0,id:o,title:t,content:e,expire_time:r+2592e3,state:0,create_time:r,awards:n}},a.updateLocalMail=function(){var t,e=d.default.DateUtils.secondNow();for(t in this.saveData.localMailData)this.saveData.localMailData[t].expire_time<=e&&(this.saveData.localMailData[t]=null)},a.getLocalMail=function(){return this.updateLocalMail(),this.saveData.localMailData},a.initServerMailInfo=function(){return f(this,void 0,void 0,r().mark(function t(){var e,n,i,a,c;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.serverMailData={},e=5;case 2:if(n={code:0,message:"SUCCESS",data:[]},console.log("\u540e\u53f0\u8fd4\u56de\u90ae\u4ef6\u4fe1\u606f\uff1a",n),0!==n.code){t.next=6;break}if(n.data&&n.data.length)for(i=o(n.data);!(a=i()).done;)c=a.value,this.serverMailData[c.id]=c;return t.abrupt("break",7);case 6:if(0<--e){t.next=2;break}case 7:case"end":return t.stop()}},t,this)}))},a.getMailInfo=function(){return f(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.Http.requestAsync(d.default.ConfigManager.gameConf.serverInfos.interface+"/api/emails",{api_token:d.default.GameDataMsr.playerInfo.token},"GET");case 2:return e=t.sent,e=JSON.parse(e),t.abrupt("return",(console.log("\u540e\u53f0\u8fd4\u56de\u90ae\u4ef6\u4fe1\u606f\uff1a",e),e.data&&e.data.length?e.data:null));case 5:case"end":return t.stop()}},t)}))},a.readMailById=function(t){return f(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.serverMailData[t]||!this.serverMailData[t].awards){e.next=2;break}return e.abrupt("return",this.serverMailData[t]);case 2:if(!(n=this.saveData.localMailData[t])){e.next=5;break}return e.abrupt("return",(n.state=1,n));case 5:return e.next=7,d.default.Http.requestAsync(d.default.ConfigManager.gameConf.serverInfos.interface+"/api/email/read/"+t,{api_token:d.default.GameDataMsr.playerInfo.token},"GET");case 7:return o=e.sent,o=JSON.parse(o),e.abrupt("return",0==o.code?(this.serverMailData[o.data.id]=o.data,o.data):null);case 10:case"end":return e.stop()}},e,this)}))},a.gainMailById=function(t){return f(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.saveData.localMailData[t])){e.next=3;break}return e.abrupt("return",(0===n.state||1===n.state)&&(n.state=h.MailStatus.read_get,!0));case 3:return e.next=5,d.default.Http.requestAsync(d.default.ConfigManager.gameConf.serverInfos.interface+"/api/email/receive/"+t,{api_token:d.default.GameDataMsr.playerInfo.token},"GET");case 5:return o=e.sent,e.abrupt("return",0==JSON.parse(o).code&&(this.serverMailData[t].state=h.MailStatus.read_get,!0));case 7:case"end":return e.stop()}},e,this)}))},a.gainAndSenReward=function(t,e){return void 0===e&&(e=!0),f(this,void 0,void 0,r().mark(function n(){var o,i,a,c,s,u,l,f;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((o=this.saveData.localMailData[t]||this.serverMailData[t]).state!=h.MailStatus.read_get&&o.state!=h.MailStatus.geted){n.next=3;break}return n.abrupt("return",null);case 3:if(n.t0=o.awards,n.t0){n.next=8;break}return n.next=7,this.readMailById(o.id);case 7:o=n.sent;case 8:return n.next=10,this.gainMailById(t);case 10:if(n.sent){n.next=12;break}return n.abrupt("return",null);case 12:if(i=[],o.awards)for(a=0;a<o.awards.length;a++)c=Number(o.awards[a].item),s=Number(o.awards[a].number),u=d.default.ControllerManager.applyFunc(y.ControllerConst.Item,g.BagConst.GET_ITEM,c),l=new m.CongratulationData,u.isCostume()?(d.default.ControllerManager.applyFunc(y.ControllerConst.Item,g.BagConst.ADD_TIME,c,s),f=d.default.ControllerManager.applyFunc(y.ControllerConst.Item,g.BagConst.USE_ITEM,c,s),l.data=f[0]):(u.data.itemType==g.ItemType.SUPER_CASH?_.default.ins.diamondChange(s):d.default.ControllerManager.applyFunc(y.ControllerConst.Item,g.BagConst.ADD_TIME,c,s),l.data=u),l.cnt=s,i.push(l);return n.abrupt("return",(e&&d.default.Platform.saveData(),e&&i.length&&d.default.ViewManager.open(31,i),d.default.NotificationCenter.dispatch(v.NotificationConst.UPDATE_MAIL_LIST),i));case 15:case"end":return n.stop()}},n,this)}))},a.delMailById=function(t,e){return void 0===e&&(e=!1),f(this,void 0,void 0,r().mark(function n(){var o,i;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=this.saveData.localMailData[t])){n.next=3;break}return n.abrupt("return",(o.state=4,this.saveData.localMailData[t]=null,this.updateDelMail(),!0));case 3:if(!e){n.next=5;break}return n.abrupt("return",!1);case 5:return n.next=7,d.default.Http.requestAsync(d.default.ConfigManager.gameConf.serverInfos.interface+"/api/email/delete/"+t,{api_token:d.default.GameDataMsr.playerInfo.token},"GET");case 7:return i=n.sent,n.abrupt("return",0==JSON.parse(i).code&&(this.serverMailData[t]&&(this.serverMailData[t]=null),this.updateDelMail(),!0));case 9:case"end":return n.stop()}},n,this)}))},a.delAllMailByReaded=function(){return f(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r().keys(this.serverMailData);case 1:if((t.t1=t.t0()).done){t.next=10;break}if(e=t.t1.value,e=this.serverMailData[e],t.t2=e.state!=h.MailStatus.geted&&e.state!=h.MailStatus.read_get,t.t2){t.next=8;break}return t.next=8,this.delMailById(e.id,!1);case 8:t.next=1;break;case 10:for(n in this.saveData.localMailData)(n=this.saveData.localMailData[n]).state!=h.MailStatus.geted&&n.state!=h.MailStatus.read_get||this.delMailById(n.id,!0);this.updateDelMail();case 12:case"end":return t.stop()}},t,this)}))},a.updateDelMail=function(){var t={};for(var e in this.serverMailData){var n=this.serverMailData[e];n&&(t[e]=n)}for(var r in this.serverMailData=t,this.saveData.localMailData){var o=this.saveData.localMailData[r];o&&(t[r]=o)}this.saveData.localMailData={}},a.gainAllMailReward=function(){return f(this,void 0,void 0,r().mark(function t(){var e,n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=[],t.t0=r().keys(this.saveData.localMailData);case 2:if((t.t1=t.t0()).done){t.next=14;break}if(n=t.t1.value,o=this.saveData.localMailData[n],t.t2=o.state!=h.MailStatus.new&&o.state!=h.MailStatus.readed,t.t2){t.next=12;break}return o.state=h.MailStatus.read_get,t.next=10,this.gainAndSenReward(o.id,!1);case 10:n=t.sent,e=e.concat(n);case 12:t.next=2;break;case 14:t.t3=r().keys(this.serverMailData);case 15:if((t.t4=t.t3()).done){t.next=27;break}if(i=t.t4.value,i=this.serverMailData[i],t.t5=i.state!=h.MailStatus.new&&i.state!=h.MailStatus.readed,t.t5){t.next=25;break}return t.next=22,this.gainAndSenReward(i.id,!1);case 22:if(t.t6=i=t.sent,!t.t6){t.next=25;break}e=e.concat(i);case 25:t.next=15;break;case 27:d.default.Platform.saveData(),d.default.NotificationCenter.dispatch(v.NotificationConst.UPDATE_MAIL_LIST),e.length&&d.default.ViewManager.open(31,e);case 28:case"end":return t.stop()}},t,this)}))},i}(p.default)),h.MailController=l,cc._RF.pop()},{}],MailListView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0068cLl2xBMDIPpqTXfMKVY","MailListView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("BaseView"),h=a("NotificationConst"),f=(a("ViewConst"),a("LayerManager"),a("MaillistItem")),d=cc._decorator,p=d.ccclass,y=d.property;(a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).mailItem=null,e.content=null,e.empty=null,e.bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.open=function(){t.prototype.open.call(this),this.initView(),u.default.NotificationCenter.addListener(h.NotificationConst.UPDATE_MAIL_LIST,this.initView,this)},a.initView=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n,o,i,a,c,s;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(o in this.content.removeAllChildren(),e=!0,n=this.controller.serverMailData)i=n[o],this.creatMailItem(i.id,i.title,i.expire_time,i.create_time,i.state),e=!1;if(a=this.controller.getLocalMail())for(c in a)s=a[c],this.creatMailItem(s.id,s.title,s.expire_time,s.create_time,s.state),e=!1;this.empty.active=e;case 7:case"end":return t.stop()}},t,this)}))},a.creatMailItem=function(t,e,n,r,o){var i=cc.instantiate(this.mailItem);this.content.addChild(i),i.getComponent(f.default).setData(t,e,n,r,o)},a.onDisable=function(){u.default.NotificationCenter.removeListener(h.NotificationConst.UPDATE_MAIL_LIST,this.initView,this)},a.onTouchDel=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.controller.delAllMailByReaded();case 2:this.initView();case 3:case"end":return t.stop()}},t,this)}))},a.onTouchGet=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.controller.gainAllMailReward();case 2:this.initView();case 3:case"end":return t.stop()}},t,this)}))},i}(l.default)).VIEW_INFO={prefabName:"mail/MailListView",zIndex:100,key:45},i([y(cc.Node)],a.prototype,"mailItem",void 0),i([y(cc.Node)],a.prototype,"content",void 0),i([y(cc.Node)],a.prototype,"empty",void 0),a=i([p],a),c.default=a,cc._RF.pop()},{}],MaillistItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c62c2bJdF9CUbKHp0jbtJ32","MaillistItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ReadColor=a.NotReadColor=void 0;var c=i("App"),s=i("SwitchFrame"),u=i("NotificationConst"),l=(i("ViewConst"),i("MailController"));a.NotReadColor=cc.color().fromHEX("#B86860"),a.ReadColor=cc.color().fromHEX("#B6B6B6");var h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).mailIconFrame=null,e.title=null,e.expireTime=null,e.expireTimeOutline=null,e.id=0,e.state=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t,e,n,r,o){c.default.DateUtils.getTimezoneOffset(),this.id=t,this.state=o,this.title.string=e,n=new Date(1e3*n).Format("yyyy-MM-dd"),this.expireTime.string=n,o===l.MailStatus.new?(this.expireTimeOutline.color=a.NotReadColor,this.mailIconFrame.frameIndex=0):(this.expireTimeOutline.color=a.ReadColor,this.mailIconFrame.frameIndex=1)},i.onTouchEmail=function(){console.log("\u53c2\u6570",this.id,this.state),c.default.ViewManager.open(44,this.id,this.state),c.default.NotificationCenter.dispatch(u.NotificationConst.UPDATE_MAIL_LIST)},o}(cc.Component),o([d(s.default)],i.prototype,"mailIconFrame",void 0),o([d(cc.Label)],i.prototype,"title",void 0),o([d(cc.Label)],i.prototype,"expireTime",void 0),o([d(cc.LabelOutline)],i.prototype,"expireTimeOutline",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],MainCat:[function(t,e,n){"use strict";var r;function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8d0d0Ct+UtJhb16Yf7G+vzq","MainCat");var i=t,a=e,c=n;a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=i("CostumeConst"),u=i("GlobalAttr"),l=i("Chef"),h=((r={})[s.CostumeParts.head]={skin:"\u88c5\u5907/\u5e3d\u5b50/hat_",slot1:"head1/maozi",slot2:"head4/maozi",targetAttaName1:"head1/maozi",targetAttaName2:"head4/maozi"},r[s.CostumeParts.body]={skin:"\u88c5\u5907/\u8863\u670d/wear_",slot1:"cat1/lj2",slot2:"cat1/lj",targetAttaName1:"Cat1",targetAttaName2:"Cat1"},r[s.CostumeParts.hand]={skin:"\u88c5\u5907/\u624b\u6301/item_",slot1:"lam1/zhuangbei",slot2:"lam3/zhuangbei",targetAttaName1:"lam1/zhuangbei",targetAttaName2:"lam3/zhuangbei"},r);a=a([cc._decorator.ccclass],a=function(t){var e,n;function r(){var e;return(e=t.apply(this,arguments)||this).selfAttr=null,e.isWaiter=!1,e.curEquMap=Object.create(null),e.skinName="\u88c5\u5907/\u670d\u52a1\u5458/waiter_03",e.defaultAttachment=Object.create(null),e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var i=r.prototype;return i.resetSlot=function(t){var e=this.defaultAttachment[t];if(e)for(var n in e){var r=e[n];r.slot.setAttachment(r.attachment)}},i.updateSlot=function(t){for(var e in h){var n=h[e],r=t[e];if(r){if(!this.curEquMap[e]||this.curEquMap[e]!==r.cfg.idx){this.resetSlot(e),this.curEquMap[e]=r.cfg.idx,this.defaultAttachment[e]=Object.create(null);var o=r.cfg.idx%100,i=n.skin+(o<10?"0"+o:o),a=this.sp.skeletonData.getRuntimeData(),c=this.sp._skeleton.slots,s=a.findSkin(i);for(var u in s.attachments){var l=s.attachments[u];for(var f in l)if("Cat_1"!==f){var d=l[f],p=c[u];p&&(this.defaultAttachment[e][f]={slot:p,attachment:p.getAttachment()},p.setAttachment(d))}}}}else this.resetSlot(e),this.curEquMap[e]=null,this.defaultAttachment[e]=null}},i.getPerfectDishRate=function(){return u.default.ins.perfectDishRate+this.selfAttr.getAttrValue(s.CostumeAbilityType.perfect_dish_rate,0)/100},i.getCookMoneyRate=function(){return u.default.ins.cookMoneyRate},i.calSpeed=function(){var t=u.default.ins,e=this.selfAttr.getAttrValue(s.CostumeAbilityType.move_speed,0)*t.define.crew_move_speed/100;this.isWaiter?this.moveSpeed=e+t.waiterspeed:this.moveSpeed=e+t.chefspeed},i.getInstaCompletedDishRate=function(){return u.default.ins.instaCompletedDishRate+this.selfAttr.getAttrValue(s.CostumeAbilityType.instaCompleted_dish_rate,0)/100},i.getCookSpeedRate=function(){return this.isWaiter?u.default.ins.waiterProductionSpeed+this.selfAttr.getAttrValue(s.CostumeAbilityType.production_speed,0)/100:u.default.ins.chefProductionSpeed+this.selfAttr.getAttrValue(s.CostumeAbilityType.production_speed,0)/100},r}(l.default)),c.default=a,cc._RF.pop()},{}],MapData:[function(t,e,n){"use strict";cc._RF.push(e,"3dc8eEEQzBNnbgFREy0CG6s","MapData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("MapType");o.default=function(){return function(){this.name="",this.bgName="",this.type=i.MapType.angle45,this.mapWidth=0,this.mapHeight=0,this.nodeWidth=0,this.nodeHeight=0,this.roadDataArr=[],this.mapItem=[]}}(),cc._RF.pop()},{}],MapRoadUtils:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"38983rww8xCor2DSeawAfiI","MapRoadUtils");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("MapType"),c=o("Point"),s=o("RoadNode");i.default=function(){function t(){}var e,n,o,i=t.prototype;return i.updateMapInfo=function(t,e,n,r,o){switch(this._mapWidth=t,this._mapHeight=e,this._nodeWidth=n,this._nodeHeight=r,this._halfNodeWidth=Math.floor(this._nodeWidth/2),this._halfNodeHeight=Math.floor(this._nodeHeight/2),this._col=Math.ceil(t/this._nodeWidth),this._row=Math.ceil(e/this._nodeHeight),this._mapType=o,this._mapType){case a.MapType.angle45:this._mapRoad=new u(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight);break;case a.MapType.angle90:this._mapRoad=new l(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight);break;case a.MapType.honeycomb:this._col=2*Math.ceil((this._mapWidth-this._nodeWidth/4)/(this._nodeWidth/4*6)),this._row=Math.ceil((this._mapHeight-this._nodeHeight/2)/this._nodeHeight),this._mapRoad=new h(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight)}},i.getNodeByPixel=function(t,e){return this._mapRoad?this._mapRoad.getNodeByPixel(t,e):new s.default},i.getNodeByDerect=function(t,e){return this._mapRoad?this._mapRoad.getNodeByDerect(t,e):new s.default},i.getNodeByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getNodeByWorldPoint(t,e):new s.default},i.getWorldPointByPixel=function(t,e){return this._mapRoad?this._mapRoad.getWorldPointByPixel(t,e):new c.default},i.getPixelByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getPixelByWorldPoint(t,e):new c.default},i.getDerectByPixel=function(t,e){return this._mapRoad?this._mapRoad.getDerectByPixel(t,e):new c.default},i.getDerectByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getDerectByWorldPoint(t,e):new c.default},i.getPixelByDerect=function(t,e){return this._mapRoad?this._mapRoad.getPixelByDerect(t,e):new c.default},e=t,o=[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}],(n=[{key:"mapWidth",get:function(){return this._mapWidth}},{key:"mapHeight",get:function(){return this._mapHeight}},{key:"nodeWidth",get:function(){return this._nodeWidth}},{key:"nodeHeight",get:function(){return this._nodeHeight}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}},{key:"halfNodeWidth",get:function(){return this._halfNodeWidth}},{key:"halfNodeHeight",get:function(){return this._halfNodeHeight}},{key:"mapType",get:function(){return this._mapType}}])&&r(e.prototype,n),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();var u=function(){function t(t,e,n,r,o,i){this._row=t,this._col=e,this._nodeWidth=n,this._nodeHeight=r,this._halfNodeWidth=o,this._halfNodeHeight=i}var e=t.prototype;return e.getNodeByPixel=function(t,e){var n=this.getWorldPointByPixel(t,e),r=this.getPixelByWorldPoint(n.x,n.y);return t=this.getDerectByPixel(t,e),(e=new s.default).cx=n.x,e.cy=n.y,e.px=r.x,e.py=r.y,e.dx=t.x,e.dy=t.y,e},e.getNodeByDerect=function(t,e){var n=this.getPixelByDerect(t,e),r=this.getWorldPointByPixel(n.x,n.y),o=new s.default;return o.cx=r.x,o.cy=r.y,o.px=n.x,o.py=n.y,o.dx=t,o.dy=e,o},e.getNodeByWorldPoint=function(t,e){return e=this.getPixelByWorldPoint(t,e),this.getNodeByPixel(e.x,e.y)},e.getWorldPointByPixel=function(t,e){var n=Math.ceil(t/this._nodeWidth-.5+e/this._nodeHeight)-1;return e=this._col-1-Math.ceil(t/this._nodeWidth-.5-e/this._nodeHeight),new c.default(n,e)},e.getPixelByWorldPoint=function(t,e){var n=Math.floor((t+1-(e-(this._col-1)))*this._halfNodeWidth);return e=Math.floor((t+1+(e-(this._col-1)))*this._halfNodeHeight),new c.default(n,e)},e.getDerectByPixel=function(t,e){return t=this.getWorldPointByPixel(t,e),e=this.getPixelByWorldPoint(t.x,t.y),t=Math.floor(e.x/this._nodeWidth)-(e.x%this._nodeWidth==0?1:0),e=Math.floor(e.y/this._halfNodeHeight)-1,new c.default(t,e)},e.getDerectByWorldPoint=function(t,e){var n=Math.floor((t-(e-(this._col-1)))/2);return e=t+(e-(this._col-1)),new c.default(n,e)},e.getPixelByDerect=function(t,e){return t=Math.floor((t+e%2)*this._nodeWidth+(1-e%2)*this._halfNodeWidth),e=Math.floor((e+1)*this._halfNodeHeight),new c.default(t,e)},t}(),l=function(){function t(t,e,n,r,o,i){this._row=t,this._col=e,this._nodeWidth=n,this._nodeHeight=r,this._halfNodeWidth=o,this._halfNodeHeight=i}var e=t.prototype;return e.getNodeByPixel=function(t,e){var n=this.getWorldPointByPixel(t,e),r=this.getPixelByWorldPoint(n.x,n.y);return t=this.getDerectByPixel(t,e),(e=new s.default).cx=n.x,e.cy=n.y,e.px=r.x,e.py=r.y,e.dx=t.x,e.dy=t.y,e},e.getNodeByDerect=function(t,e){var n=this.getPixelByDerect(t,e),r=this.getWorldPointByPixel(n.x,n.y),o=new s.default;return o.cx=r.x,o.cy=r.y,o.px=n.x,o.py=n.y,o.dx=t,o.dy=e,o},e.getNodeByWorldPoint=function(t,e){return e=this.getPixelByWorldPoint(t,e),this.getNodeByPixel(e.x,e.y)},e.getWorldPointByPixel=function(t,e){return t=Math.floor(t/this._nodeWidth),e=Math.floor(e/this._nodeHeight),new c.default(t,e)},e.getPixelByWorldPoint=function(t,e){return t=Math.floor((t+1)*this._nodeWidth-this._halfNodeWidth),e=Math.floor((e+1)*this._nodeHeight-this._halfNodeHeight),new c.default(t,e)},e.getDerectByPixel=function(t,e){return t=Math.floor(t/this._nodeWidth),e=Math.floor(e/this._nodeHeight),new c.default(t,e)},e.getDerectByWorldPoint=function(t,e){return new c.default(t,e)},e.getPixelByDerect=function(t,e){return t=Math.floor((t+1)*this._nodeWidth-this._halfNodeWidth),e=Math.floor((e+1)*this._nodeHeight-this._halfNodeHeight),new c.default(t,e)},t}(),h=function(){function t(t,e,n,r,o,i){this._proportion=1.732,this._row=t,this._col=e,this._nodeWidth=n,this._nodeHeight=r,this._halfNodeWidth=o,this._halfNodeHeight=i,this._nwDiv4=this._nodeWidth/4,this._radius=4*this._nwDiv4,this._proportion=2*this._nodeHeight/this._nodeWidth}var e=t.prototype;return e.getNodeByPixel=function(t,e){var n=this.getWorldPointByPixel(t,e);return t=this.getPixelByWorldPoint(n.x,n.y),(e=new s.default).cx=n.x,e.cy=n.y,e.px=t.x,e.py=t.y,e.dx=n.x,e.dy=n.y,e},e.getNodeByDerect=function(t,e){var n=this.getPixelByDerect(t,e),r=new s.default;return r.cx=t,r.cy=e,r.px=n.x,r.py=n.y,r.dx=t,r.dy=e,r},e.getNodeByWorldPoint=function(t,e){return e=this.getPixelByWorldPoint(t,e),this.getNodeByPixel(e.x,e.y)},e.getWorldPointByPixel=function(t,e){var n,r=Math.floor(t/this._nwDiv4),o=Math.floor(r/3),i=(r-1)%6==0||(r-2)%6==0?(n=o,i=Math.floor(e/this._nodeHeight)):(r-4)%6==0||(r-5)%6==0?(n=o,i=e<this._nodeHeight/2?-1:Math.floor((e-this._nodeHeight/2)/this._nodeHeight)):o%2==0?(i=Math.floor(e/this._nodeHeight),this.testPointInHoneycomb(o,i,t,e)?(n=o,i):this.testPointInHoneycomb(o-1,i-1,t,e)?(n=o-1,i-1):(n=o-1,i)):(i=e<this._nodeHeight/2?-1:Math.floor((e-this._nodeHeight/2)/this._nodeHeight),this.testPointInHoneycomb(o,i,t,e)?(n=o,i):this.testPointInHoneycomb(o-1,i,t,e)?(n=o-1,i):(n=o-1,i+1));return new c.default(n,i)},e.testPointInHoneycomb=function(t,e,n,r){var o=2*this._nwDiv4;return e=this.getPixelByWorldPoint(t,e),o-Math.abs(n-e.x)>=Math.abs(r-e.y)/this._proportion},e.getPixelByWorldPoint=function(t,e){var n=Math.floor((2+3*t)/4*this._nodeWidth);return t=Math.floor((e+.5*(1+t%2))*this._nodeHeight),new c.default(n,t)},e.getDerectByPixel=function(t,e){return this.getWorldPointByPixel(t,e)},e.getDerectByWorldPoint=function(t,e){return new c.default(t,e)},e.getPixelByDerect=function(t,e){var n=(2+3*t)/4*this._nodeWidth;return t=(e+.5*(1+t%2))*this._nodeHeight,new c.default(n,t)},t}();cc._RF.pop()},{}],MapService:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"522a1k3hy9HOocGfCIeC7y6","MapService");var i,a,c=t,s=n,u=(a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(s,"__esModule",{value:!0});var l=c("App"),h=c("GridLayer"),f=c("AstarHoneycombRoadSeeker"),d=c("AStarRoadSeeker"),p=c("MapRoadUtils"),y=c("RoadNode"),v=c("RoadPointLayer"),g=c("Toast"),m=c("ControllerConst"),_=c("NotificationConst"),b=(c("ViewConst"),c("PlatformBase"),c("BagConst")),w=c("BuffMgr"),C=c("GameConst"),S=c("GlobalAttr"),O=c("GameView"),T=c("AbilityInfoService"),I=c("BaseService"),E=c("CurrencyService"),x=c("DeskService"),A=c("HelperCatService"),L=c("MachineService"),P=c("OrderService"),M=c("RoleService"),R=c("StageUpgradeService"),N=c("ViewportService"),D=cc._decorator,j=D.ccclass,F=D.property;c=i=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this).curBundle=null,e.foodBundle=null,e.gameView=null,e.mapNode=null,e.layer=null,e.uiLayer=null,e.langLayer=null,e._roadDic={},e.curCfg=null,e.machineMenu=null,e.define=null,e.curId=-1,e.mapSaveData=null,e.loadingTime=0,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c=a.prototype;return c.onLoad=function(){i.ins=this},c.init=function(){},c.desotrySelf=function(){this.layer=null,x.default.ins,A.default.ins.desotrySelf(),w.default.ins.closeRegion(this.curId),L.default.ins.destorySelf(),this.gameView.node.destroyAllChildren(),this.curBundle&&(this.curBundle.releaseAll(),cc.assetManager.removeBundle(this.curBundle),this.curBundle=null),this.mapNode=null,M.default.ins.destroySelf()},c.loadMap=function(t,e){return void 0===e&&(e=0),u(this,void 0,void 0,r().mark(function e(){var n,o,i,a,c,s,u,h,f,d;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mapNode&&this.desotrySelf(),n=t<10?"map_0"+t:"map_"+t,1e4<t&&(n="map_04"),o=n,i="food","test"==versionInfo.packVersion?(o=n,i="food"):o=n,e.next=7,l.default.ResManager.loadDirInBundle(o,"");case 7:return e.next=9,l.default.ResManager.loadDirInBundle(i,"");case 9:return this.curCfg=l.default.ConfigManager.getConfig("StageSet")[t],a="map_icon_1","test"==versionInfo.packVersion&&(a=a),e.next=14,l.default.ResManager.loadBundle(a);case 14:if(this.curId=t,this.define=l.default.ConfigManager.getConfig("Define"),this.machineMenu=l.default.ConfigManager.getConfig("MachineMenu"),this.curBundle=cc.assetManager.getBundle(n),this.foodBundle=cc.assetManager.getBundle("food"),c=this.curBundle.get("map/MapNode",cc.Prefab),s=this.mapNode=cc.instantiate(c),this.gameView.node.addChild(s),s.y=-s.height,N.default.ins.map=s,N.default.ins.initViewportArea(),u=this.curBundle.get("map/MapData",cc.JsonAsset).json){e.next=24;break}return e.abrupt("return",(g.default.launch("\u7f3a\u5c11\u5730\u56fe\u8def\u5f84\u6570\u636e!"),void Log.error("\u7f3a\u5c11\u5730\u56fe\u8def\u5f84\u6570\u636e!")));case 24:this.setMapData(u),w.default.ins.openNewRegion(t),this.parseMap(),h=l.default.ControllerManager.getControllerModel(m.ControllerConst.Game),d=1e4<t?C.EmMapType.FB:C.EmMapType.MAIN,h.data.curMapType===d?(f=h.getCurMapData()).curId!==t?this.mapSaveData=h.resetMapData(t):this.mapSaveData=f:(h.data.curMapType=d,this.mapSaveData=h.getCurMapData()),R.default.ins.init(),P.default.ins.init(),M.default.ins.init(),L.default.ins.init(),x.default.ins.init(),E.default.ins.init(),T.default.ins.init(),A.default.ins.init(),S.default.ins.calAll(),"test"==versionInfo.packVersion&&this.debug(u),l.default.NotificationCenter.dispatch(_.NotificationConst.UPDATE_MONEY),l.default.NotificationCenter.dispatch(_.NotificationConst.ENTER_MAP),(this.loadingTime||l.default.ViewManager.isShow(38))&&(u=l.default.DateUtils.Now()-this.loadingTime,this.loadingTime=0,3e3<=u?l.default.ViewManager.close(38):l.default.TimerManager.doTimer(3e3-u,1,function(){l.default.ViewManager.close(38)},this));case 28:case"end":return e.stop()}},e,this)}))},c.setMapData=function(t){p.default.instance.updateMapInfo(t.mapWidth,t.mapHeight,t.nodeWidth,t.nodeHeight,t.type),this._roadDic={};for(var e=t.roadDataArr.length,n=t.roadDataArr[0].length,r=0;r<e;r++)for(var o=0;o<n;o++){var i=t.roadDataArr[r][o],a=p.default.instance.getNodeByDerect(o,r);a.value=i,this._roadDic[a.cx+"_"+a.cy]=a}2==t.type?this._roadSeeker=new f.default(this._roadDic):this._roadSeeker=new d.default(this._roadDic)},c.parseMap=function(){var t=this.mapNode;this.layer=t.getChildByName("layer");var e=t.getChildByName("bg2");e&&(e.zIndex=4),this.layer.zIndex=3,this.langLayer=new cc.Node,this.langLayer.name="LangLayer",this.langLayer.zIndex=3,t.addChild(this.langLayer),this.uiLayer=new cc.Node,this.uiLayer.name="UILayer",this.uiLayer.zIndex=3,t.addChild(this.uiLayer);var n=t.getChildByName("GridLayer");n&&n.destroy(),S.default.init(),M.default.ins.parse(t),x.default.ins.parse(t),L.default.ins.parse(t.getChildByName("Machines"))},c.getPaths=function(t,e){var n=p.default.instance.getWorldPointByPixel(t.x,t.y),r=(t=p.default.instance.getWorldPointByPixel(e.x,e.y),n=this._roadDic[n.x+"_"+n.y],t=this._roadDic[t.x+"_"+t.y],t=this._roadSeeker.seekPath(n,t),new y.default);return r.px=e.x,r.py=e.y,0<t.length&&t.pop(),t.push(r),t},c.update=function(){this.layer&&this.layer.children.sort(function(t,e){return e.y-t.y})},c.debug=function(t){var e=new cc.Node;this.mapNode.addChild(e,1),e.addComponent(h.default).drawGrid(t.mapWidth,t.mapHeight,t.nodeWidth,t.nodeHeight,t.type);var n=new cc.Node;this.mapNode.addChild(n,2),n.addComponent(v.default).initRoadPointInfo(t),M.default.ins.createTestMan()},c.switchMap=function(){var t=this,e=this.curCfg.clear_reward_suitcasekey_idx,n=this.curCfg.clear_reward_suitcasekey_count,r=this.curId+1,o=l.default.ConfigManager.getConfig("StageSet")[r];if(0<n){l.default.ControllerManager.applyFunc(m.ControllerConst.Item,b.BagConst.ADD_TIME,e,n);var i=l.default.ControllerManager.applyFunc(m.ControllerConst.Item,b.BagConst.GET_ITEM,e),a=new C.CongratulationData;a.iconUrl=i.getItemPic(),a.name=i.getName(),a.cnt=n,a.type=C.CongratulationType.Pass,a.passIcon="stage/"+o.stage_icon,l.default.ViewManager.open(31,[a],1,function(){l.default.ViewManager.open(38,t.curId),t.loadingTime=l.default.DateUtils.Now(),t.loadMap(r,!0)})}else l.default.ViewManager.open(38,this.curId),this.loadingTime=l.default.DateUtils.Now(),this.loadMap(r,!0);l.default.AnalyticMgr.recordState("level",1,r)},c.getCurRegionCfgs=function(){var t,e=l.default.ConfigManager.getConfig("StageSet"),n=this.curCfg.region,r=[];for(t in e)if(e[t].region==n)r.push(e[t]);else if(e[t].region>n)break;return r},a}(I.default),a([F(O.default)],c.prototype,"gameView",void 0),c=i=a([j],c),s.default=c=i,cc._RF.pop()},{}],MapTool:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"fce41yVmPpBr7TL+oBfRXcs","MapTool");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([o=cc._decorator.ccclass],o=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.onLoad=function(){this.destroy()},o}(cc.Component)),i.default=o,cc._RF.pop()},{}],MapType:[function(t,e,n){"use strict";cc._RF.push(e,"0442dYmoIFPk5m4sXXSx8Qu","MapType");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.MapType=void 0,(r=r.MapType||(r.MapType={}))[r.angle45=0]="angle45",r[r.angle90=1]="angle90",r[r.honeycomb=2]="honeycomb",cc._RF.pop()},{}],MathUtils:[function(t,e,n){"use strict";cc._RF.push(e,"c8f04GkdBtLOrpcAdTXD7VY","MathUtils");var r,o=e,i=n;function a(t){return-1<"+-*/()".indexOf(t)}function c(t){switch(t){case"+":case"-":return 1;case"*":case"/":return 2;default:return 0}}Object.defineProperty(i,"__esModule",{value:!0}),i.MathUtils=i.Dir=void 0,(o=r=i.Dir||(i.Dir={}))[o.Top=0]="Top",o[o.TopRight=1]="TopRight",o[o.Right=2]="Right",o[o.BottomRight=3]="BottomRight",o[o.Bottom=4]="Bottom",o[o.BottomLeft=5]="BottomLeft",o[o.Left=6]="Left",o[o.TopLeft=7]="TopLeft",i.MathUtils=function(){function t(){}var e=t.prototype;return e.getAngle=function(t){return 180*t/Math.PI},e.getRadian=function(t){return t/180*Math.PI},e.getRadian2=function(t,e,n,r){return Math.atan2(r-e,n-t)},e.getDistance=function(t,e,n,r){return t=n-t,e=r-e,Math.sqrt(t*t+e*e)},e.computeGameObjDir=function(t,e,n,o){var i;return o=this.getRadian2(t,e,n,o),0==(o=this.getAngle(o))?i=r.Right:90==o?i=r.Bottom:180==o?i=r.Left:-90==o?i=r.Top:0<o&&o<90?i=r.BottomRight:90<o&&o<180?i=r.BottomLeft:-180<o&&o<-90?i=r.TopLeft:-90<o&&o<0&&(i=r.TopRight),i},e.evalRpn=function(t){for(var e=function(t){for(var e,n=t.match(/(\(|\)|\*|\+|\-|\/|\d+\.?\d*)/g),r=[],o=[];0<n.length;){var i=n.shift();if(a(i))if("("==i)r.push(i);else if(")"==i){for(var s=r.pop();"("!=s&&0<r.length;)o.push(s),s=r.pop();if("("!=s)throw"error: unmatched ()"}else{for(;e=r[r.length-1],c(i)<=c(e)&&0<r.length;)o.push(r.pop());r.push(i)}else o.push(parseFloat(i))}if(0<r.length){if(")"==r[r.length-1]||"("==r[r.length-1])throw"error: unmatched ()";for(;0<r.length;)o.push(r.pop())}return o}(t),n=[];0<e.length;){var r=e.shift();if(a(r)){if(n.length<2)throw"unvalid stack length";var o=n.pop(),i=n.pop();n.push(function(t,e){switch(r){case"+":return t+e;case"-":return t-e;case"*":return t*e;case"/":return t/e}}(i,o))}else n.push(r)}if(1!=n.length)throw"unvalid expression";return n[0]},t}(),cc._RF.pop()},{}],MaxTime:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3fb14CErYVAXqmFmUJZK+6O","MaxTime");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("constants"),s=i("Decorator");a.default=function(t){var e,n;function i(e){var n,o=void 0===e?{}:e,i=o.maxTime,a=o.child,c=void 0===a?null:a;if(n=t.call(this,{child:c,name:"MaxTime",title:"Max <maxTime>ms",properties:{maxTime:0}})||this,!i)throw"maxTime parameter in MaxTime decorator is an obligatory parameter";return n.maxTime=i,r(n)}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.open=function(t){var e=(new Date).getTime();t.blackboard.set("startTime",e,t.tree.id,this.id)},a.tick=function(t){if(!this.child)return c.ERROR;var e=(new Date).getTime(),n=t.blackboard.get("startTime",t.tree.id,this.id);return t=this.child._execute(t),e-n>this.maxTime?c.FAILURE:t},i}(s.default),cc._RF.pop()},{}],Md5Util:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5be84hyTeNEDqfWM24qWFt7","Md5Util");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=o("BaseClass");var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=function(t){var e,n;function o(){return t.call(this)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.jiebase64=function(t){for(var e,n,r,i,a=t.length,c=0,s="";c<a;){for(;e=o.base64DecodeChars[255&t.charCodeAt(c++)],c<a&&-1==e;);if(-1==e)break;for(;n=o.base64DecodeChars[255&t.charCodeAt(c++)],c<a&&-1==n;);if(-1==n)break;s+=String.fromCharCode(e<<2|(48&n)>>4);do{if(61==(r=255&t.charCodeAt(c++)))return s}while(r=o.base64DecodeChars[r],c<a&&-1==r);if(-1==r)break;s+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(i=255&t.charCodeAt(c++)))return s}while(i=o.base64DecodeChars[i],c<a&&-1==i);if(-1==i)break;s+=String.fromCharCode((3&r)<<6|i)}return s},o.UrlEncode=function(t){function e(t){return t<10?t:10==t?"A":11==t?"B":12==t?"C":13==t?"D":14==t?"E":15==t?"F":void 0}return function(t){for(var n,r="",o=0;o<t.length;o++)r+="%"+(n="25"==(n=function(t){if(65535<t)return"err!";var n=t-4096*Math.round(t/4096-.5);return t=n-256*Math.round(n/256-.5),""+e(n=Math.round(t/16-.5))+e(t-16*n)}(t.charCodeAt(o)))?"":n);return r}(t)},o.md5=function(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n=2147483648&t,r=2147483648&e,o=(1073741823&t)+(1073741823&e);return(t&=1073741824)&(e&=1073741824)?2147483648^o^n^r:t|e?1073741824&o?3221225472^o^n^r:1073741824^o^n^r:o^n^r}function r(t,r,o,i,a,c,s){return t=n(t,n(n(r&o|~r&i,a),s)),n(e(t,c),r)}function o(t,r,o,i,a,c,s){return t=n(t,n(n(r&i|o&~i,a),s)),n(e(t,c),r)}function i(t,r,o,i,a,c,s){return t=n(t,n(n(r^o^i,a),s)),n(e(t,c),r)}function a(t,r,o,i,a,c,s){return t=n(t,n(n(o^(r|~i),a),s)),n(e(t,c),r)}function c(t){for(var e="",n="",r=0;r<=3;r++)e+=(n="0"+(t>>>8*r&255).toString(16)).substr(n.length-2,2);return e}Array();for(var s,u,l,h,f=function(t){for(var e,n=t.length,r=16*(((r=n+8)-r%64)/64+1),o=Array(r-1),i=0,a=0;a<n;)i=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<i,a++;return o[e=(a-a%4)/4]=o[e]|128<<(i=a%4*8),o[r-2]=n<<3,o[r-1]=n>>>29,o}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):(127<r&&r<2048?e+=String.fromCharCode(r>>6|192):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128)),e+=String.fromCharCode(63&r|128))}return e}(t)),d=1732584193,p=4023233417,y=2562383102,v=271733878,g=0;g<f.length;g+=16)d=r(s=d,u=p,l=y,h=v,f[g+0],7,3614090360),v=r(v,d,p,y,f[g+1],12,3905402710),y=r(y,v,d,p,f[g+2],17,606105819),p=r(p,y,v,d,f[g+3],22,3250441966),d=r(d,p,y,v,f[g+4],7,4118548399),v=r(v,d,p,y,f[g+5],12,1200080426),y=r(y,v,d,p,f[g+6],17,2821735955),p=r(p,y,v,d,f[g+7],22,4249261313),d=r(d,p,y,v,f[g+8],7,1770035416),v=r(v,d,p,y,f[g+9],12,2336552879),y=r(y,v,d,p,f[g+10],17,4294925233),p=r(p,y,v,d,f[g+11],22,2304563134),d=r(d,p,y,v,f[g+12],7,1804603682),v=r(v,d,p,y,f[g+13],12,4254626195),y=r(y,v,d,p,f[g+14],17,2792965006),d=o(d,p=r(p,y,v,d,f[g+15],22,1236535329),y,v,f[g+1],5,4129170786),v=o(v,d,p,y,f[g+6],9,3225465664),y=o(y,v,d,p,f[g+11],14,643717713),p=o(p,y,v,d,f[g+0],20,3921069994),d=o(d,p,y,v,f[g+5],5,3593408605),v=o(v,d,p,y,f[g+10],9,38016083),y=o(y,v,d,p,f[g+15],14,3634488961),p=o(p,y,v,d,f[g+4],20,3889429448),d=o(d,p,y,v,f[g+9],5,568446438),v=o(v,d,p,y,f[g+14],9,3275163606),y=o(y,v,d,p,f[g+3],14,4107603335),p=o(p,y,v,d,f[g+8],20,1163531501),d=o(d,p,y,v,f[g+13],5,2850285829),v=o(v,d,p,y,f[g+2],9,4243563512),y=o(y,v,d,p,f[g+7],14,1735328473),d=i(d,p=o(p,y,v,d,f[g+12],20,2368359562),y,v,f[g+5],4,4294588738),v=i(v,d,p,y,f[g+8],11,2272392833),y=i(y,v,d,p,f[g+11],16,1839030562),p=i(p,y,v,d,f[g+14],23,4259657740),d=i(d,p,y,v,f[g+1],4,2763975236),v=i(v,d,p,y,f[g+4],11,1272893353),y=i(y,v,d,p,f[g+7],16,4139469664),p=i(p,y,v,d,f[g+10],23,3200236656),d=i(d,p,y,v,f[g+13],4,681279174),v=i(v,d,p,y,f[g+0],11,3936430074),y=i(y,v,d,p,f[g+3],16,3572445317),p=i(p,y,v,d,f[g+6],23,76029189),d=i(d,p,y,v,f[g+9],4,3654602809),v=i(v,d,p,y,f[g+12],11,3873151461),y=i(y,v,d,p,f[g+15],16,530742520),d=a(d,p=i(p,y,v,d,f[g+2],23,3299628645),y,v,f[g+0],6,4096336452),v=a(v,d,p,y,f[g+7],10,1126891415),y=a(y,v,d,p,f[g+14],15,2878612391),p=a(p,y,v,d,f[g+5],21,4237533241),d=a(d,p,y,v,f[g+12],6,1700485571),v=a(v,d,p,y,f[g+3],10,2399980690),y=a(y,v,d,p,f[g+10],15,4293915773),p=a(p,y,v,d,f[g+1],21,2240044497),d=a(d,p,y,v,f[g+8],6,1873313359),v=a(v,d,p,y,f[g+15],10,4264355552),y=a(y,v,d,p,f[g+6],15,2734768916),p=a(p,y,v,d,f[g+13],21,1309151649),d=a(d,p,y,v,f[g+4],6,4149444226),v=a(v,d,p,y,f[g+11],10,3174756917),y=a(y,v,d,p,f[g+2],15,718787259),p=a(p,y,v,d,f[g+9],21,3951481745),d=n(d,s),p=n(p,u),y=n(y,l),v=n(v,h);return(c(d)+c(p)+c(y)+c(v)).toLowerCase()},o.md5cycle=function(t,e){var n=t[0],r=t[1],o=t[2],i=t[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+e[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+e[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+e[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+e[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+e[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+e[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+e[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+e[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+e[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+e[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+e[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+e[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+e[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+e[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+e[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+e[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+e[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+e[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+e[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+e[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+e[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+e[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+e[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+e[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+e[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+e[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+e[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+e[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+e[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+e[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+e[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+e[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+e[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+o|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=o+t[2]|0,t[3]=i+t[3]|0},o.hex=function(t){for(var e=0;e<t.length;e+=1)t[e]=o.rhex(t[e]);return t.join("")},o.rhex=function(t){for(var e="",n=0;n<4;n+=1)e+=a[t>>8*n+4&15]+a[t>>8*n&15];return e},o.InitArrayBuffer=function(){o.reset()},o.reset=function(){o._buff=new Uint8Array(0),o._length=0,o._hash=[1732584193,-271733879,-1732584194,271733878]},o.end=function(t){for(var e,n=o._buff,r=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<r;a+=1)i[a>>2]|=n[a]<<(a%4<<3);return o._finish(i,r),e=o.hex(o._hash),t&&(e=o.hexToBinaryString(e)),o.reset(),e},o._finish=function(t,e){var n,r=e;if(t[r>>2]|=128<<(r%4<<3),55<r)for(o.md5cycle(o._hash,t),r=0;r<16;r+=1)t[r]=0;n=(n=8*o._length).toString(16).match(/(.*?)(.{0,8})$/),e=parseInt(n[2],16),n=parseInt(n[1],16)||0,t[14]=e,t[15]=n,o.md5cycle(o._hash,t)},o.hexToBinaryString=function(t){for(var e=[],n=t.length,r=0;r<n-1;r+=2)e.push(parseInt(t.substr(r,2),16));return String.fromCharCode.apply(String,e)},o.hash=function(t,e){return t=o.md51_array(new Uint8Array(t)),t=o.hex(t),e?o.hexToBinaryString(t):t},o.md51_array=function(t){for(var e,n,r,i,a=t.length,c=[1732584193,-271733879,-1732584194,271733878],s=64;s<=a;s+=64)o.md5cycle(c,o.md5blk_array(t.subarray(s-64,s)));for(e=(t=s-64<a?t.subarray(s-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0;s<e;s+=1)n[s>>2]|=t[s]<<(s%4<<3);if(n[s>>2]|=128<<(s%4<<3),55<s)for(o.md5cycle(c,n),s=0;s<16;s+=1)n[s]=0;return i=(i=8*a).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(i[2],16),i=parseInt(i[1],16)||0,n[14]=r,n[15]=i,o.md5cycle(c,n),c},o.md5blk_array=function(t){for(var e=[],n=0;n<64;n+=4)e[n>>2]=t[n]+(t[n+1]<<8)+(t[n+2]<<16)+(t[n+3]<<24);return e},o.append=function(t){var e,n=o.concatenateArrayBuffers(o._buff.buffer,t,!0),r=n.length;for(o._length+=t.byteLength,e=64;e<=r;e+=64)o.md5cycle(o._hash,o.md5blk_array(n.subarray(e-64,e)));o._buff=e-64<r?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0)},o.concatenateArrayBuffers=function(t,e){var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t)),n.set(new Uint8Array(e),t.byteLength),n},o}(o.default);i.default=c,c.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),cc._RF.pop()},{}],MemParallel:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"31375SUlfVDhbPT1NSLXDB9","MemParallel");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("Actions"),c=o("constants"),s=function(t){var e,n;function o(e){return void 0===e&&(e={}),t.call(this,{name:"MemParallel",children:e.children,properties:e.properties,title:e.title||e.name})||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("runningChild",0,t.tree.id,this.id)},i.tick=function(t){for(var e=!1,n=!1,r=t.blackboard.get("runningChild",t.tree.id,this.id);r<this.children.length;r++){var o=this.children[r]._execute(t);if(o===c.SUCCESS)e=!0;else{if(o!==c.FAILURE)return t.blackboard.set("runningChild",r,t.tree.id,this.id),o;n=!0}}return 0===this.properties.type?e?c.SUCCESS:c.FAILURE:n?c.FAILURE:c.SUCCESS},o}(o("Composite").default);i.default=s,a.register(s,"MemParallel"),cc._RF.pop()},{}],MemPriority:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c5503zCcHFOz5iUJ4rckJZB","MemPriority");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("Composite"),c=o("constants");i.default=function(t){var e,n;function o(e){var n=(void 0===e?{}:e).children,r=void 0===n?[]:n;return t.call(this,{children:r,name:"MemPriority"})||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("runningChild",0,t.tree.id,this.id)},i.tick=function(t){for(var e=t.blackboard.get("runningChild",t.tree.id,this.id);e<this.children.length;e++){var n=this.children[e]._execute(t);if(n!==c.FAILURE)return n===c.RUNNING&&t.blackboard.set("runningChild",e,t.tree.id,this.id),n}return c.FAILURE},o}(a.default),cc._RF.pop()},{}],MemSequence:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"377f3+CcCpCyYGkF4ZtP0vl","MemSequence");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Composite");i.default=function(t){var e,n;function o(e){var n=(void 0===e?{}:e).children,r=void 0===n?[]:n;return t.call(this,{name:"MemSequence",children:r})||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("runningChild",0,t.tree.id,this.id)},i.tick=function(t){for(var e=t.blackboard.get("runningChild",t.tree.id,this.id);e<this.children.length;e++){var n=this.children[e]._execute(t);if(n!==a.SUCCESS)return n===a.RUNNING&&t.blackboard.set("runningChild",e,t.tree.id,this.id),n}return a.SUCCESS},o}(c.default),cc._RF.pop()},{}],MessageCenter:[function(t,e,n){"use strict";cc._RF.push(e,"45b00cMBGZH6Ib6YXq5aXdl","MessageCenter");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),(r={})[r.eventTarget=0]="eventTarget",r[r.eventsMap=1]="eventsMap",r[r.captureEventsMap=2]="captureEventsMap",r[r.notifyLevel=3]="notifyLevel",o.default=function(){function t(t){this.notifyLevel=0,this.type=t,ObjectPool.registerClass(i,"MessageVo"),this.dict={},this.notifyLevel=0,this.eVec=new Array,this.lastRunTime=0,this.type}var e=t.prototype;return e.clear=function(){this.dict={},this.eVec.splice(0)},e.addListener=function(t,e,n,r){r=0|+r;var o=-1,i=this.dict[t];null==i?this.dict[t]=i=[]:0!==this.notifyLevel&&(this.dict[t]=i=i.concat());for(var a=0,c=i.length;a<c;a++){if(i[a][0]==e&&i[a][1]==n)return;-1==o&&i[a][2]<r&&(o=a)}return t=[e,n,r],-1!==o?i.splice(o,0,t):i.push(t),t},e.removeListener=function(t,e,n){var r=this.dict[t];if(null!=r){0!==this.notifyLevel&&(this.dict[t]=r=r.concat());for(var o=0,i=r.length;o<i;o++)if(r[o][0]==e&&r[o][1]==n){r.splice(o,1);break}0==r.length&&(this.dict[t]=null,delete this.dict[t])}},e.removeAll=function(t){for(var e=Object.keys(this.dict),n=0,r=e.length;n<r;n++){var o=e[n],i=this.dict[o];0!==this.notifyLevel&&(this.dict[o]=i=i.concat());for(var a=0;a<i.length;a++)i[a][1]==t&&(i.splice(a,1),a--);0==i.length&&(this.dict[o]=null,delete this.dict[o])}},e.dispatch=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null!=this.dict[t]&&((e=ObjectPool.pop("MessageVo")).type=t,e.param=r,0==this.type?this.eVec.push(e):1==this.type?this.dealMsg(e):Log.trace("MessageCenter\u672a\u5b9e\u73b0\u7684\u7c7b\u578b"))},e.run=function(){},e.dealMsg=function(t){var e=this.dict[t.type],n=0,r=e.length,o=null;for(this.notifyLevel++;n<r;){o=e[n];try{o[0].apply(o[1],t.param)}catch(t){Log.error("\u6d88\u606f\u5904\u7406\u51fa\u9519:",t.toString())}n++}this.notifyLevel--,t.dispose(),ObjectPool.push(t)},t}();var i=function(){function t(){this.ObjectPoolKey=null}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();cc._RF.pop()},{}],MidashiPay:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(){a=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,o,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,o)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,i,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,o,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"7e0d5BMUABJBqJIqw195DYI","MidashiPay");var s=t,u=n,l=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0});var h=s("App"),f=function(){function t(){this.isPayBy=!1,this.isShowIosPay=!0,this.env=0,this.localData=null,this.receivedOrders=null;var t=cc.sys.localStorage.getItem("OrderData");this.localData=t?JSON.parse(t):{},cc.sys.os===cc.sys.OS_IOS&&wx.onShow(this.wxGameOnShow.bind(this))}var e,n,o=t.prototype;return o.wxGameOnShow=function(){return l(this,void 0,void 0,a().mark(function t(){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.payResolve&&(this.payResolve(!0),this.payResolve=null);case 1:case"end":return t.stop()}},t,this)}))},o.getOrderDataByPayId=function(t){return this.localData[t]||this.receivedOrders&&this.receivedOrders[t]},o.getNotReceivedOrder=function(t,e){return void 0===t&&(t=5),void 0===e&&(e=2e3),l(this,void 0,void 0,a().mark(function n(){var o,i,c,s,u,l;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.default.Http.post(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/midas/not_received_order.php",{token:h.default.GameDataMsr.playerInfo.token},5,3e3);case 2:if(!(o=n.sent)){n.next=9;break}if(!((i=JSON.parse(o))&&0==i.code&&i.data&&i.data.length)){n.next=9;break}for(this.receivedOrders={},c=r(i.data);!(s=c()).done;)u=s.value,l=h.default.Platform.getProductConfigById(u.gid),this.receivedOrders[l.payId]=u;return n.abrupt("return",i);case 9:if(!(t<=0)){n.next=11;break}return n.abrupt("return",null);case 11:return t--,n.next=14,h.default.TimerManager.sleep(e);case 14:n.next=0;break;case 16:case"end":return n.stop()}},n,this)}))},o.getConfig=function(t){return l(this,void 0,void 0,a().mark(function e(){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.Http.post(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/game_conf/get.php",{key:"payment_switch_"+t},5,1e3);case 2:(n=e.sent)&&0==(r=JSON.parse(n)).code&&(this.isShowIosPay=r.data);case 4:case"end":return e.stop()}},e,this)}))},o.receive=function(t){return l(this,void 0,void 0,a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.Http.post(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/midas/receive.php",{token:h.default.GameDataMsr.playerInfo.token,oid:t},5,2e3);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",JSON.parse(n));case 5:case"end":return e.stop()}},e)}))},o.createOrder=function(t,e){return l(this,void 0,void 0,a().mark(function n(){var r,o,i;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=3;case 1:return n.next=3,h.default.Http.post(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/midas/create.php",{token:h.default.GameDataMsr.playerInfo.token,gid:t,gprice:Math.round(e)},5,2e3);case 3:if(!(o=n.sent)){n.next=8;break}if(!(i=JSON.parse(o))||0!=i.code){n.next=8;break}return n.abrupt("return",i);case 8:return n.next=10,h.default.TimerManager.sleep(3e3);case 10:if(r--){n.next=1;break}case 11:return n.abrupt("return",null);case 12:case"end":return n.stop()}},n)}))},o.pay=function(t,e){var n=this;return new Promise(function(t){wx.requestMidasPayment({mode:"game",currencyType:"CNY",env:n.env,offerId:"1450030214",buyQuantity:e,platform:"android",zoneId:"1",success:function(e){console.warn("\u652f\u4ed8\u6210\u529f:",e),t(!0)},fail:function(e){console.warn("\u652f\u4ed8\u5931\u8d25:",e),t(!1)},complete:function(){}})})},o.deletaLocalData=function(t){delete this.localData[t],cc.sys.localStorage.setItem("AppleOrderData",JSON.stringify(this.localData))},o.payByCustomerServiceConversation=function(t){var e=this;return new Promise(function(n){wx.openCustomerServiceConversation({sendMessageTitle:t.desc,showMessageCard:!0,sendMessagePath:"good_"+t.id,sendMessageImg:"https://wxclient.gzqidong.cn/resource/Upload/resource/1658483721524057267.png",success:function(){e.payResolve=n},fail:function(){n(!1)}})})},o.log=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];1===this.env&&(t=console).log.apply(t,["\u652f\u4ed8:"].concat(n))},o.buy=function(t,e,n,r){return l(this,void 0,void 0,a().mark(function e(){var n,o,i,c,s,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.default.AnalyticMgr.recordInteractionAd(),n=h.default.Platform.getProductConfigByPayString(t),o=10*n.cost,this.env&&(o=10),cc.sys.os!==cc.sys.OS_IOS){e.next=31;break}if(this.isShowIosPay){e.next=6;break}return e.abrupt("return",!1);case 6:if(i=this.receivedOrders&&this.receivedOrders[t],e.t0=i,e.t0){e.next=13;break}return h.default.Platform.saveDataToLocal(),e.next=12,this.getNotReceivedOrder(0,0);case 12:e.t0=i=this.receivedOrders&&this.receivedOrders[t];case 13:if(e.t0){e.next=24;break}return e.next=16,this.payByCustomerServiceConversation(n);case 16:if(e.sent){e.next=18;break}return e.abrupt("return",!1);case 18:return h.default.EasyLoading.showLoadingByTime(20),e.next=21,this.getNotReceivedOrder();case 21:if(e.sent){e.next=23;break}return e.abrupt("return",(h.default.EasyLoading.hideLoading(),!1));case 23:i=this.receivedOrders&&this.receivedOrders[t];case 24:if(!i){e.next=30;break}return e.next=27,this.receive(i.oid);case 27:if(!(c=e.sent)||(delete this.receivedOrders[t],0!=c.code)){e.next=30;break}return e.abrupt("return",(h.default.AnalyticMgr.recordUserBuy(t,i.oid,o/10,2),h.default.EasyLoading.hideLoading(),!0));case 30:return e.abrupt("return",(h.default.EasyLoading.hideLoading(),!1));case 31:if(!(s=this.localData[t])){e.next=36;break}s.retryCnt--,s.retryCnt<=0&&this.deletaLocalData(t),e.next=42;break;case 36:return h.default.Platform.saveDataToLocal(),e.next=39,this.pay(t,o);case 39:if(e.sent){e.next=41;break}return e.abrupt("return",!1);case 41:this.addLocalData({payId:t,googlePayType:r,retryCnt:5});case 42:return e.next=44,this.createOrder(n.id,o);case 44:return u=e.sent,e.abrupt("return",!!u&&(this.deletaLocalData(t),0==u.code&&(h.default.AnalyticMgr.recordUserBuy(t,u.data.oid,o/10,1),!0)));case 46:case"end":return e.stop()}},e,this)}))},o.addLocalData=function(t){this.localData[t.payId]=t,cc.sys.localStorage.setItem("AppleOrderData",JSON.stringify(this.localData))},o.getIsShowIosPay=function(){return cc.sys.os!==cc.sys.OS_IOS||this.isShowIosPay},o.getIsDebug=function(){return!1!==this.isShowIosPay},o.isHaveAnomalyOrder=function(t){return cc.sys.os===cc.sys.OS_IOS?this.receivedOrders&&this.receivedOrders[t]:this.localData&&this.localData[t]},e=t,n=[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}],null&&c(e.prototype,null),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();(u.default=f)._ins=null,cc._RF.pop()},{}],MoneyAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2a1b800jI5IG4yqtvaY4tBA","MoneyAni");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.MoneyAni=void 0;var c=i("App"),s=i("SwitchFrame"),u=i("MyBigLong"),l=i("SoundEffectConst"),h=cc._decorator,f=h.ccclass,d=h.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).moneyAni=null,e.lightAni=null,e.switchFrame=null,e.numLab=null,e.pos=null,e.callBack=null,e.moveTime=.5,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.moneyAni.on(cc.Animation.EventType.FINISHED,this.onMoneyAniFinish,this),this.lightAni.on(cc.Animation.EventType.FINISHED,this.onLightAniFinish,this)},i.playAni=function(t,e,n,r,o){void 0===o&&(o=0),c.default.SoundManager.playEffect(1===e?l.SoundsDefine.GET_COIN1:l.SoundsDefine.GET_COIN2),this.moneyAni.node.active=!0,this.node.scale=1,this.switchFrame.frameIndex=e,this.callBack=r,this.pos=t,this.moveTime=n,o?(this.numLab.node.active=!0,this.numLab.string=u.default.toString(o)):this.numLab.node.active=!1,this.moneyAni.play("work")},i.onMoneyAniFinish=function(){var t=this;cc.tween(this.node).delay(.5).call(function(){t.numLab.node.active=!1}).to(this.moveTime,{position:this.pos,scale:.2}).call(function(){t.node.scale=1,t.moneyAni.node.active=!1,t.lightAni.node.active=!0,t.lightAni.play("work")}).start()},i.onLightAniFinish=function(){this.moneyAni.node.active=!1,this.callBack&&this.callBack(),this.callBack=null},o}(cc.Component),o([d(cc.Animation)],i.prototype,"moneyAni",void 0),o([d(cc.Animation)],i.prototype,"lightAni",void 0),o([d(s.default)],i.prototype,"switchFrame",void 0),o([d(cc.Label)],i.prototype,"numLab",void 0),i=o([f],i),a.MoneyAni=i,cc._RF.pop()},{}],MoneyBar:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d672aY8pnlOrZ2v2+ECr1Qb","MoneyBar");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("NotificationConst"),u=i("IBuff"),l=i("GameConst"),h=i("GlobalAttr"),f=i("MyBigLong"),d=i("MapService"),p=cc._decorator,y=p.ccclass,v=p.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.label=null,e.rateLab=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},i.onTouchEnd=function(){},i.onEnable=function(){c.default.NotificationCenter.addListener(s.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this),c.default.NotificationCenter.addListener(l.GameNotificationConst.UPDATE_BUFF,this.onUpdateBuff,this),this.onUpdateMoney(),this.onUpdateBuff(null,null,"FOOD_SELL_RATE")},i.onUpdateMoney=function(){this.label.string=f.default.toString(d.default.ins.mapSaveData.money)},i.updateContent=function(){},i.onUpdateBuff=function(t,e,n){u.BUFF_TYPE[n]==u.BUFF_TYPE.FOOD_SELL_RATE&&((n=h.default.ins.buffAttr.attr.FOOD_SELL_RATE)&&1<n?(this.rateLab.node.active=!0,this.rateLab.string="x"+h.default.ins.buffAttr.attr.FOOD_SELL_RATE):this.rateLab.node.active=!1)},i.onDisable=function(){c.default.NotificationCenter.removeListener(s.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this),c.default.NotificationCenter.removeListener(l.GameNotificationConst.UPDATE_BUFF,this.onUpdateBuff,this)},o}(cc.Component),o([v(cc.Sprite)],i.prototype,"icon",void 0),o([v(cc.Label)],i.prototype,"label",void 0),o([v(cc.Label)],i.prototype,"rateLab",void 0),i=o([y],i),a.default=i,cc._RF.pop()},{}],MoneyItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d8a6f9dZetD3LcbCh5QrnLe","MoneyItem");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("MyBigLong"),c=o("CurrencyService"),s=o("MachineService"),u=o("ItemBase");i.default=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._name=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setConfData=function(e){t.prototype.setConfData.call(this,e);var n=this.data.money.time;this._name=n?3600<n?e.name.format(n/3600):60<=n?e.name.format(n/60):e.name.format(n):e.name.format(a.default.toString(this.data.money.base))},i.getName=function(){return this._name},i.use=function(t){void 0===t&&(t=1),c.default.ins.moneyChange(this.getCnt()*t)},i.getCnt=function(){return s.default.ins.calculateIdleMoney(this.data.money.time)},i.getDisplayCnt=function(){return a.default.toString(this.getCnt())},o}(u.ItemBase),cc._RF.pop()},{}],MoneyLabel:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c4f47gzkEJDqIAFCYTjGT+R","MoneyLabel");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.MoneyLabel=i.NotEnoughColor=i.EnoughColor=void 0;var c=cc._decorator,s=c.ccclass,u=c.property;i.EnoughColor=cc.color().fromHEX("#8D5301"),i.NotEnoughColor=cc.color().fromHEX("#FF5301"),o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.lab=null,e.outLine=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=o.prototype;return a.onLoad=function(){this.outLine=this.lab.getComponent(cc.LabelOutline)},a.setStyle=function(){},a.setText=function(t){this.lab.string=t},a.setTextColor=function(){},a.setIconGold=function(){},a.setIsEnough=function(t){this.outLine.color=t?i.EnoughColor:i.NotEnoughColor},a.setIconStar=function(){},o}(cc.Component),a([u(cc.Sprite)],o.prototype,"icon",void 0),a([u(cc.Label)],o.prototype,"lab",void 0),o=a([s],o),i.MoneyLabel=o,cc._RF.pop()},{}],MoveComponent:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"896c5uxOlhFF4v7ZbetaXs1","MoveComponent");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.Dir=void 0;var c=i("MapService"),s=i("BaseMan");(i=a.Dir||(a.Dir={}))[i.Bottom=0]="Bottom",i[i.BottomLeft=1]="BottomLeft",i[i.TopLeft=3]="TopLeft",i[i.Left=2]="Left",i[i.Top=4]="Top",i[i.TopRight=5]="TopRight",i[i.Right=6]="Right",i[i.BottomRight=7]="BottomRight",i=o([i=cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).moving=!1,e._nodeIndex=0,e._roadNodeArr=[],e._moveAngle=0,e.man=null,e._cb=null,e._cbTarget=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.man||(this.man=this.getComponent(s.default))},i.update=function(t){var e,n,r,o;this.moving&&(n=(e=this._roadNodeArr[this._nodeIndex]).px-this.node.x,r=e.py-this.node.y,(t=this.man.moveSpeed*t)*t<n*n+r*r?(0==this._moveAngle&&(this._moveAngle=Math.atan2(r,n),o=Math.round((-this._moveAngle+Math.PI)/(Math.PI/4)),this.man.direction=5<o?o-6:o+2),o=Math.cos(this._moveAngle)*t,t=Math.sin(this._moveAngle)*t,this.node.x+=o,this.node.y+=t):(this._moveAngle=0,this._nodeIndex==this._roadNodeArr.length-1?(this.node.x=e.px,this.node.y=e.py,this.stop()):this.walk()))},i.walkByRoad=function(t){this._roadNodeArr=t,this._nodeIndex=0,this._moveAngle=0,this.walk(),this.move()},i.moveTo=function(t,e,n){this._cb=e,this._cbTarget=n,(t=c.default.ins.getPaths(this.node.position,t)).length&&this.walkByRoad(t)},i.walk=function(){this._nodeIndex<this._roadNodeArr.length-1&&this._nodeIndex++},i.move=function(){this.moving=!0,this.man.state=s.CharactorState.run},i.stop=function(){this.moving=!1,this.man.state=s.CharactorState.stand,this._cb&&this._cb.call(this._cbTarget)},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],MovieClip:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"08ec06FlTVLpKlv2KPPXQo3","MovieClip");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).m_sprite=null,e.timer=.1,e.interval=.1,e.texture=null,e.playTimes=0,e.row=4,e.col=4,e.rowIndex=0,e.isAll=!1,e.autoPlayOnLoad=!0,e.autoDestroy=!1,e.begin=0,e.end=0,e.totalFrame=8,e.currentFrame=0,e.currentTimes=0,e.running=!0,e._playIndex=0,e._pieceWidth=0,e._pieceHeight=0,e._bitmapArr=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){0==this.end&&(this.end=this.col),this.rowIndex=this.clamp(this.rowIndex,0,this.row-1),this._pieceWidth=this.texture.width/this.col,this._pieceHeight=this.texture.height/this.row,this.m_sprite=this.getComponent(cc.Sprite),this.m_sprite||(this.m_sprite=this.addComponent(cc.Sprite));for(var t=0;t<this.row;t++){this._bitmapArr[t]=[];for(var e=0;e<this.col;e++)this._bitmapArr[t][e]=new cc.SpriteFrame(this.texture,new cc.Rect(e*this._pieceWidth,t*this._pieceHeight,this._pieceWidth,this._pieceHeight),!1,cc.v2(0,0),new cc.Size(this._pieceWidth,this._pieceHeight))}this.m_sprite.spriteFrame=this._bitmapArr[this.rowIndex][0],this.node.width=this._pieceWidth,this.node.height=this._pieceHeight,this.timer=0,this.running=this.autoPlayOnLoad},i.update=function(t){this.running&&(0==this.playTimes||this.currentTimes!=this.playTimes?(this.timer-=t,this.timer<=0&&(this.timer=this.interval,this.currentFrame=this.currentFrame%this.col,this.playAction(),this.currentFrame++,this.currentFrame==this.col&&(this.isAll?(this.rowIndex++,this.rowIndex==this.row&&(this.currentTimes++,this.node.emit("completeTimes"),0!=this.playTimes&&this.currentTimes==this.playTimes&&(this.node.emit("complete"),this.autoDestroy&&this.node.destroy())),this.rowIndex%=this.row):(this.currentTimes++,this.node.emit("completeTimes"),0!=this.playTimes&&this.currentTimes==this.playTimes&&(this.node.emit("complete"),this.autoDestroy&&this.node.destroy()))))):this.running=!1)},i.playAction=function(){this.rowIndex=this.clamp(this.rowIndex,0,this.row-1),this._playIndex=this._playIndex%(this.end-this.begin)+this.begin,this.m_sprite.spriteFrame=this._bitmapArr[this.rowIndex][this._playIndex],this._playIndex++},i.play=function(){this.running=!0},i.stop=function(){this.running=!1},i.gotoAndPlay=function(t){this.running=!0,this._playIndex=t,this._playIndex=this.clamp(this._playIndex,0,this.col-1)},i.gotoAndStop=function(t){this.running=!1,this._playIndex=t,this._playIndex=this.clamp(this._playIndex,0,this.col-1),this.m_sprite.spriteFrame=this._bitmapArr[this.rowIndex][this._playIndex]},i.clamp=function(t,e,n){return t<e?e:n<t?n:t},o}(cc.Component),a([u(cc.Float)],o.prototype,"interval",void 0),a([u({type:cc.Texture2D})],o.prototype,"texture",void 0),a([u({type:cc.Integer})],o.prototype,"playTimes",void 0),a([u(cc.Integer)],o.prototype,"row",void 0),a([u(cc.Integer)],o.prototype,"col",void 0),a([u(cc.Integer)],o.prototype,"rowIndex",void 0),a([u(cc.Boolean)],o.prototype,"isAll",void 0),a([u(cc.Boolean)],o.prototype,"autoPlayOnLoad",void 0),a([u(cc.Boolean)],o.prototype,"autoDestroy",void 0),a([u()],o.prototype,"begin",void 0),a([u()],o.prototype,"end",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],MyBigLong:[function(t,e,n){"use strict";cc._RF.push(e,"98a3cEuTvRFLLMuTeCbWFyC","MyBigLong");var r=n;Object.defineProperty(r,"__esModule",{value:!0});var o=["","K","M","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at","au","av","aw","ax","ay","az","ba","bb","bc","bd","be","bf","bg","bh","bi","bj","bk","bl","bm","bn","bo","bp","bq","br","bs","bt","bu","bv","bw","bx","by","bz","ca","cb","cc","cd","ce","cf","cg","ch","ci","cj","ck","cl","cm","cn","co","cp","cq","cr","cs","ct","cu","cv","cw","cx","cy","cz"],i=function(){function t(){this.value=0,this._numberStr=""}var e=t.prototype;return e.init=function(e,n){return e instanceof t?this.initByBigNum(e):this.initByNumber(e,n)},e.initByNumber=function(t,e){return this._numberStr="",this.value=t*Math.pow(10,e),this},e.initByBigNum=function(t){return this._numberStr="",this.value=t.value,this},t.create=function(e,n){var r=t.pool.pop();return r=r||new t,e instanceof t?r.initByBigNum(e):r.initByNumber(e,n),r},e.release=function(){t.pool.push(this)},e.divide=function(t){return this.value="number"==typeof t?Math.floor(this.value/t):Math.floor(this.value/t.value),this._numberStr="",this},e.divideBigLong=function(t){return this.value/t.value},e.cmp=function(t){return"number"==typeof t?this.value-t:this.value-t.value},e.add=function(t){return this.value="number"==typeof t?Math.floor(this.value+t):Math.floor(this.value+t.value),this._numberStr="",this},e.sub=function(t){return this.value="number"==typeof t?Math.floor(this.value-t):Math.floor(this.value-t.value),this._numberStr="",this},t.toString=function(t){if(t<1e3)return Math.floor(t)+"";var e=t.toPrecision(3),n=e.split("e+"),r=parseInt(n[1]),i=r%3;return r-=i,i<2?(e=e.replace(".","")).slice(0,1+i)+"."+e.slice(1+i,3)+o[r/3]:e.replace(".","").slice(0,1+i)+o[r/3]},t.unpackData=function(t){var e=t.match(/(-?)([\d.]+)([a-z]{2}|M|K|T|B)?/);return e?e[3]?(t=o.indexOf(e[3]),parseFloat(e[2])*Math.pow(10,3*t)):parseFloat(e[2]):0},e.toString=function(){if(this._numberStr)return this._numberStr;if(this.value<1e3)return this._numberStr=this.value+"";var t=this.value.toPrecision(3),e=t.split("e+"),n=parseInt(e[1]),r=n%3;return n-=r,r<2?(t=t.replace(".",""),this._numberStr=t.slice(0,1+r)+"."+t.slice(1+r,3)+o[n/3]):this._numberStr=t.replace(".","").slice(0,1+r)+o[n/3]},e.multiply=function(t){return this.value="number"==typeof t?Math.floor(this.value*t):Math.floor(this.value*t.value),this._numberStr="",this},e.getMultiplyValue=function(t){var e=0;if((e="number"==typeof t?Math.floor(this.value*t):Math.floor(this.value*t.value))<1e3)return e+"";var n=e.toPrecision(3),r=n.split("e+"),i=parseInt(r[1]),a=i%3;return i-=a,a<2?(n=n.replace(".","")).slice(0,1+a)+"."+n.slice(1+a,3)+o[i/3]:n.replace(".","").slice(0,1+a)+o[i/3]},e.copy=function(){return t.create(this)},e.isZero=function(){return 0===this.value},e.clear=function(){this.value=0,this._numberStr="0"},e.getData=function(){return[this.value]},e.unPackData=function(t){this._numberStr="",this.value=t[0]},t}();r.default=i,i.pool=[],i.tempNum=i.create(0,0),window.MyBigLong=i,cc._RF.pop()},{}],MyPageViewIndicator:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"010e8Uv3VNPE7+T/EoOn3GR","MyPageViewIndicator");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.MyPageViewIndicator=void 0;var c=cc._decorator,s=c.property,u=c.ccclass;o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).selectImg=null,e.noSelecImg=null,e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype._changedState=function(){if(this._indicators.length){for(var t=this._pageView.getCurrentPageIndex(),e=0;e<this._indicators.length;++e)this._indicators[e].getComponent(cc.Sprite).spriteFrame=this.noSelecImg;this._indicators[t].getComponent(cc.Sprite).spriteFrame=this.selectImg}},o}(cc.PageViewIndicator),a([s(cc.SpriteFrame)],o.prototype,"selectImg",void 0),a([s(cc.SpriteFrame)],o.prototype,"noSelecImg",void 0),o=a([u],o),i.MyPageViewIndicator=o,cc._RF.pop()},{}],NGAExecuteFunc:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"921e4BYzdhJH4zlA04cKKyE","NGAExecuteFunc");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return t.target.onExecuteFunc(this.properties.funcName)},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGAExecuteFunc"),cc._RF.pop()},{}],NGAHideMask:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"448b5bXd/xJ64E8sFtmXjQo","NGAHideMask");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return t.target.hideMask(),a.b3.SUCCESS},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGAHideMask"),cc._RF.pop()},{}],NGAHideTip:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"09899/bPRBLqZXlppyNrCwg","NGAHideTip");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return a.default.ViewManager.isShow(15)?(t.target.hideTip(),c.b3.SUCCESS):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAHideTip"),cc._RF.pop()},{}],NGARecodes:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"437e0rzXQ5NxoyZlxLbRUfA","NGARecodes");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(){return a.b3.SUCCESS},o}(a.BaseAction);i.default=c,a.register(c,"NGARecodes"),cc._RF.pop()},{}],NGAScrollView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"dc9fe1oykxIOLJd6EijNqR+","NGAScrollView");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){var e=this,n=this.properties;t.blackboard.set("isFinish",!1,t.tree.id,this.id),t.target.scrollMainView(n.x,n.y,n.scale,n.time,function(){t.blackboard.set("isFinish",!0,t.tree.id,e.id)})},i.tick=function(t){return t.blackboard.get("isFinish",t.tree.id,this.id)?a.b3.SUCCESS:a.b3.RUNNING},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGAScrollView"),cc._RF.pop()},{}],NGASetStep:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"10248mjb95GDqjGe7Dr/7TK","NGASetStep");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return a.default.ViewManager.isShow(15)?(t.target.setStep(this.properties.step),c.b3.SUCCESS):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGASetStep"),cc._RF.pop()},{}],NGAShowArrow:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"42e50E/FFdKEaDdRudTxMQW","NGAShowArrow");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.target.showArrow(this.properties)},i.tick=function(){return a.b3.SUCCESS},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGAShowArrow"),cc._RF.pop()},{}],NGAShowFinger:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"60a00pYayBCmZlNr++C7DWE","NGAShowFinger");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){if(this.properties.isShow){var e=[],n=this.properties.pos.split("|");n&&n.forEach(function(t){t=t.split(","),t=new cc.Vec2(parseInt(t[0])||0,parseInt(t[1])||0),e.push(t)}),t.target.showMapFinger(e,this.properties.fx,this.properties.fy,this.properties.itemId)}else t.target.hideMapFinger()},i.tick=function(){return a.b3.SUCCESS},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGAShowFinger"),cc._RF.pop()},{}],NGAShowMask:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4d858J5jaBN5Jfq5eWoOA6u","NGAShowMask");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setTouchState=function(t,e){t.blackboard.set("state",e,t.tree.id,this.id)},i.open=function(){},i.tick=function(t){var e=this;return a.default.ViewManager.isShow(15)?t.blackboard.get("state",t.tree.id,this.id)?c.b3.SUCCESS:(t.target.showMask(this.properties.opacity),this.properties.args?(t.target.locatorTouchNodeAsync(this.properties,function(){e.setTouchState(t,!0)}),this.setTouchState(t,!1),c.b3.RUNNING):(this.setTouchState(t,!0),c.b3.SUCCESS)):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAShowMask"),cc._RF.pop()},{}],NGAShowSkip:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"fbbfbjXKstE9pVnMimE3Q2o","NGAShowSkip");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return a.default.ViewManager.isShow(15)?(t.target.showSkip(this.properties.isShow),c.b3.SUCCESS):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAShowSkip"),cc._RF.pop()},{}],NGAShowTip:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"9b126YWyShGNoOboCijpvOC","NGAShowTip");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){},i.tick=function(t){return a.default.ViewManager.isShow(15)?(t.target.showTip(this.properties),c.b3.SUCCESS):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAShowTip"),cc._RF.pop()},{}],NGASlide:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2fc58UTMkFKioZDhxjD451v","NGASlide");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){var e=this;t.blackboard.set("isFinish",!1,t.tree.id,this.id);var n=this.properties;if(n.args1&&""!=n.args1&&" "!=n.args1)t.target.slideNode(n.args1,n.args2,n.notificationConst,function(){t.target.slideEnd(),t.blackboard.set("isFinish",!0,t.tree.id,e.id)});else{for(var r=[],o=1;o<100&&n["x"+o]&&n["y"+o];o++)r.push(cc.v2({x:n["x"+o],y:n["y"+o]}));t.target.slideArea(r,n.moveTime,!!n.isLoop,n.notificationConst,function(){t.target.slideEnd(),t.blackboard.set("isFinish",!0,t.tree.id,e.id)})}},i.tick=function(t){return t.blackboard.get("isFinish",t.tree.id,this.id)?a.b3.SUCCESS:a.b3.RUNNING},i.close=function(){},o}(a.BaseAction);i.default=c,a.register(c,"NGASlide"),cc._RF.pop()},{}],NGASpecialAction:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4e18aCPMlBJUJYmgaIuOWdH","NGASpecialAction");var c=t,s=n;Object.defineProperty(s,"__esModule",{value:!0});var u=c("App"),l=c("ControllerConst"),h=c("B3Tree1"),f=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.parseParam=function(t){for(var e,n=[],o=r(t.split("|"));!(e=o()).done;){var i=e.value;"i"===i[0]?n.push(parseInt(i.slice(1))):"f"===i[0]?n.push(parseFloat(i.slice(1))):n.push(i.slice(1))}return n},i.open=function(){var t;"string"==typeof this.properties.controller&&""!=this.properties.controller&&this.properties.key&&(this.properties.param?(t=u.default.ControllerManager).applyFunc2.apply(t,[l.ControllerConst[this.properties.controller],this.properties.key].concat(this.parseParam(this.properties.param))):u.default.ControllerManager.applyFunc2(l.ControllerConst[this.properties.controller],this.properties.key,this.properties.param)),this.properties.notification&&""!==this.properties.notification&&u.default.NotificationCenter.dispatch(this.properties.notification,this.properties.param)},i.tick=function(){return h.b3.SUCCESS},i.close=function(){},o}(h.BaseAction);s.default=f,h.register(f,"NGASpecial"),cc._RF.pop()},{}],NGAWaitTouch:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2c1480/qipO954gGUM/6U+t","NGAWaitTouch");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("first",!0,t.tree.id,this.id)},i.tick=function(t){return a.default.ViewManager.isShow(15)?t.blackboard.get("first",t.tree.id,this.id)?(t.target.waitTouch(this.properties.isForce),this.properties.delayShowSkip&&t.target.showSkip(1,this.properties.delayShowSkip),t.blackboard.set("first",!1,t.tree.id,this.id),c.b3.RUNNING):(t.target.godGuide.reset(),c.b3.SUCCESS):(t.target.openGuideView(),c.b3.RUNNING)},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAWaitTouch"),cc._RF.pop()},{}],NGAWait:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f8d05NclVpClJroZIZZXsV+","NGAWait");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("first",!0,t.tree.id,this.id)},i.tick=function(t){if(!a.default.ViewManager.isShow(15))return t.target.openGuideView(),c.b3.RUNNING;if(t.blackboard.get("first",t.tree.id,this.id)){var e=this.properties;return e.notificationConst||e.delay?t.target.wait(e.delay,e.notificationConst,e.param):t.target.waitTouch(0),this.properties.delayShowSkip&&t.target.showSkip(1,this.properties.delayShowSkip),t.blackboard.set("first",!1,t.tree.id,this.id),c.b3.RUNNING}return t.target.godGuide.reset(),c.b3.SUCCESS},i.close=function(){},o}(c.BaseAction);i.default=s,c.register(s,"NGAWait"),cc._RF.pop()},{}],NGCCheckIsOpen:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"7710bje08tA8r3/UFeEEf0W","NGCCheckIsOpen");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).isAniFinish=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){var e=t.target.checkNewGuideIsOpen(this.properties);t.blackboard.set("isNeedGuide",e,t.tree.id,this.id)},i.tick=function(t){return t.blackboard.get("isNeedGuide",t.tree.id,this.id)?this.child._execute(t):a.b3.FAILURE},i.close=function(t){t.blackboard.set("isNeedGuide",!1,t.tree.id,this.id)},o}(a.BaseDecorator);i.default=c,a.register(c,"NGCCheckIsOpen"),cc._RF.pop()},{}],NGCCheckStep:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1d5dfbk5YpIDJAkjg+4lSin","NGCCheckStep");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("B3Tree1"),c=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){var e=t.target.checkStep(this.properties.step);t.blackboard.set("isNeedGuide",e,t.tree.id,this.id)},i.tick=function(t){return t.blackboard.get("isNeedGuide",t.tree.id,this.id)?this.child._execute(t):a.b3.FAILURE},i.close=function(t){t.blackboard.set("isNeedGuide",!1,t.tree.id,this.id)},o}(a.BaseDecorator);i.default=c,a.register(c,"NGCCheckStep"),cc._RF.pop()},{}],NGSetStory:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"7b9f1JCSHNJZqH+z56DExdU","NGSetStory");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App"),c=(o("ViewConst"),o("B3Tree1")),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("first",!0,t.tree.id,this.id)},i.tick=function(t){return a.default.ViewManager.isShow(15)?t.blackboard.get("first",t.tree.id,this.id)?(this.properties.isShow?t.target.showStory(this.properties):(t.target.hideStory(),t.target.godGuide.reset()),t.blackboard.set("first",!1,t.tree.id,this.id),c.b3.RUNNING):c.b3.SUCCESS:(t.target.openGuideView(),c.b3.RUNNING)},o}(c.BaseAction);i.default=s,c.register(s,"NGSetStory"),cc._RF.pop()},{}],NodePoolMsr:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"ea921/1pltP1IMObeKtfySs","NodePoolMsr");var i,a,c=t,s=n;a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(s,"__esModule",{value:!0});var u=c("App"),l=c("NodePool"),h=cc._decorator,f=h.ccclass,d=h.property;(c=i=function(t){var e,n;function a(){var e;return(e=t.call(this)||this).flyLabel=null,e.itemPool=null,e.baseBtnPool=null,e.tipAniPool=null,e.getCoinEffect=null,e.moneyLabPool=null,e.multiSprMaterial=null,e.passSectionFoodPool=null,e.cookUnlockAni=null,e.catUnlockAni=null,e.machineLvUpAni=null,e.congratulationItem=null,e.catLefttimeProgressPool=null,e.roleLangPool=null,e.fireAniPool=null,e.poolsPromise={},e._handGuidePoolPromise=null,i.instance=r(e),u.default.NodePoolMsr=r(e),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c=a.prototype;return c.onLoad=function(){cc.game.addPersistRootNode(this.node)},c.getPoolByUrl=function(t){return this.poolsPromise[t]||(this.poolsPromise[t]=u.default.ResManager.getResAsync(t,cc.Prefab).then(function(t){var e=new l.default;return e.prefab=t,e}),this.poolsPromise[t])},c.getHandGuidePool=function(){return this._handGuidePoolPromise||(this._handGuidePoolPromise=u.default.ResManager.getResAsync("prefab/view/component/HandGuide",cc.Prefab).then(function(t){var e=new l.default;return e.prefab=t,e}),this._handGuidePoolPromise)},a}(cc.Component)).instance=null,a([d(l.default)],c.prototype,"flyLabel",void 0),a([d(l.default)],c.prototype,"itemPool",void 0),a([d(l.default)],c.prototype,"baseBtnPool",void 0),a([d(l.default)],c.prototype,"tipAniPool",void 0),a([d(l.default)],c.prototype,"getCoinEffect",void 0),a([d(l.default)],c.prototype,"moneyLabPool",void 0),a([d(cc.Material)],c.prototype,"multiSprMaterial",void 0),a([d(l.default)],c.prototype,"passSectionFoodPool",void 0),a([d(l.default)],c.prototype,"cookUnlockAni",void 0),a([d(l.default)],c.prototype,"catUnlockAni",void 0),a([d(l.default)],c.prototype,"machineLvUpAni",void 0),a([d(l.default)],c.prototype,"congratulationItem",void 0),a([d(l.default)],c.prototype,"catLefttimeProgressPool",void 0),a([d(l.default)],c.prototype,"roleLangPool",void 0),a([d(l.default)],c.prototype,"fireAniPool",void 0),c=i=a([f],c),s.default=c=i,cc._RF.pop()},{}],NodePool:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"0d9860ipC5PDYm16xjGrwxF","NodePool");var a=e,c=n,s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(c,"__esModule",{value:!0});var u=cc._decorator,l=u.ccclass,h=u.property;a=function(){function t(){this._pool=[],this.createCnt=0,this.prefab=null}var e=t.prototype;return e.push=function(t){t&&-1===this._pool.indexOf(t)&&(t.active=!1,t.parent&&t.removeFromParent(!1),this._pool.push(t))},e.push2=function(t,e){this._pool.length>=e?(t.removeFromParent(!0),t.destroy()):t&&-1===this._pool.indexOf(t)&&(t.active=!1,t.parent&&t.removeFromParent(!1),this._pool.push(t))},e.pop=function(){if(0===this._pool.length){this.createCnt++;var t=cc.instantiate(this.prefab);return t.pool=this,t}var e=this._pool.pop();return e.active=!0,e},e.clear=function(){for(var t,e=r(this._pool);!(t=e()).done;){var n=t.value;n.isValid&&n.destroy()}this._pool=null},e.init=function(t){this.createCnt+=t;for(var e=0;e<t;++e)this._pool.push(cc.instantiate(this.prefab))},t}(),s([h(cc.Prefab)],a.prototype,"prefab",void 0),a=s([l("NodePool")],a),c.default=a,cc._RF.pop()},{}],NodeStateData:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"a3c73qeTwVLJbhWElBDiD+B","NodeStateData");var c=e,s=n,u=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(s,"__esModule",{value:!0});var l=cc._decorator,h=l.ccclass,f=l.property,d=function(){return this.node&&this._edit};c=function(){function t(){this.nodeState=null,this._node=null,this._edit=!1,this.x=!1,this.y=!1,this.width=!1,this.height=!1,this.scaleX=!1,this.scaleY=!1,this.active=!1,this.angle=!1,this.opacity=!1,this.color=!1,this.frame=!1,this.str=!1,this.lab_o_c=!1}var e,n;return e=t,(n=[{key:"node",get:function(){return this._node},set:function(t){if(t){if(t!==this._node){for(var e,n=r(this.nodeState.nodeList);!(e=n()).done;)if(e.value.node==t)return void cc.warn("\u5df2\u7ecf\u5b58\u5728\u76f8\u540c\u7684\u8282\u70b9,\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0");this._node&&this.nodeState.removeNode(this._node),this._node=t}}else this.nodeState.removeNodeData(this),this.nodeState=null}},{key:"edit",get:function(){return this._edit},set:function(t){this._edit=t}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u([f(cc.Node)],c.prototype,"_node",void 0),u([f({type:cc.Node})],c.prototype,"node",null),u([f()],c.prototype,"_edit",void 0),u([f()],c.prototype,"edit",null),u([f({visible:d})],c.prototype,"x",void 0),u([f({visible:d})],c.prototype,"y",void 0),u([f({visible:d})],c.prototype,"width",void 0),u([f({visible:d})],c.prototype,"height",void 0),u([f({visible:d})],c.prototype,"scaleX",void 0),u([f({visible:d})],c.prototype,"scaleY",void 0),u([f({visible:d})],c.prototype,"active",void 0),u([f({visible:d})],c.prototype,"angle",void 0),u([f({visible:d})],c.prototype,"opacity",void 0),u([f({visible:d})],c.prototype,"color",void 0),u([f({visible:function(){return this.node&&this.node.getComponent(cc.Sprite)&&this._edit}})],c.prototype,"frame",void 0),u([f({visible:function(){return this.node&&this.node.getComponent(cc.Label)&&this._edit}})],c.prototype,"str",void 0),u([f({visible:function(){return this.node&&this.node.getComponent(cc.LabelOutline)&&this._edit}})],c.prototype,"lab_o_c",void 0),c=u([h("NodeStateData")],c),s.default=c,cc._RF.pop()},{}],NodeState:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6909eBOUCVE84NGkIVrGW1K","NodeState");var s,u=t,l=n,h=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};function f(t,e,n){cc.Class.Attr.setClassAttr(t,e,"type","Enum"),cc.Class.Attr.setClassAttr(t,e,"enumList",cc.Enum.getList(n))}Object.defineProperty(l,"__esModule",{value:!0}),s=u("NodeStateData");var d=cc.Enum({"<None>":0}),p=cc._decorator,y=p.ccclass,v=p.property,g=p.executeInEditMode,m=p.menu,_=["x","y","scaleX","scaleY","height","width","active","angle","opacity"];u=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this)._states=[],e._curState="",e.frames=[],e._addState="",e._removeState="",e._tempSaveStr="",e._saveStr="",e.nodeStateCache={},e.nodeStateCache1={},e.realNodeList=[],e._nodeList=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var i,s,u=o.prototype;return u.setState=function(t,e){void 0===e&&(e=0),t!==this._curState&&(this._curState=t,this.switchState(t))},u.onRemoveState=function(){},u.__preload=function(){},u.getFrameId=function(t){for(var e=t._uuid,n=this.frames.length,r=0;r<n;r++)if(this.frames[r]._uuid==e)return e;return this.frames.push(t),e},u._updateAnimEnum=function(){if(this._states.length){for(var t,e={},n=0,o=r(this._states);!(t=o()).done;)e[t.value]=n++;f(this,"curState",cc.Enum(e))}else f(this,"curState",d);Editor.Utils.refreshSelectedInspector("node",this.node.uuid)},u.switchState=function(t){var e=this.nodeStateCache1[t];if(e)for(var n=this.realNodeList,o=n.length,i=0;i<o;i++){var a=e[i];if(a)for(var c in a)if(_.includes(c))n[i][c]=a[c];else switch(c){case"frame":var s=n[i].getComponent(cc.Sprite);if(s)for(var u,l=r(this.frames);!(u=l()).done;){var h=u.value;h._uuid==a.frame&&(s.spriteFrame=h)}break;case"lab_o_c":var f=n[i].getComponent(cc.LabelOutline);f&&(f.color=cc.color(a.lab_o_c));break;case"color":n[i].color=cc.color(a.color);break;case"str":var d=n[i].getComponent(cc.Label);d&&(d.string=a.str)}}},u.save=function(){if(0!=this._states.length){this.realNodeList.length=0;for(var t,e=this.nodeStateCache[this._curState]={},n=r(this._nodeList);!(t=n()).done;){var o=t.value;o&&o.node&&(this.realNodeList.push(o.node),e[o.node.uuid]=this.getSaveData(o))}this.createReleaseData()}else cc.error("\u8bf7\u5148\u6dfb\u52a0\u72b6\u6001")},u.createReleaseData=function(){var t=this.realNodeList,e=new Set,n=t.length,r=this.nodeStateCache1={};for(var o in this.nodeStateCache){r[o]=[];for(var i=0;i<n;i++){var a=this.nodeStateCache[o][t[i].uuid];(r[o][i]=a)&&a.frame&&e.add(a.frame)}}for(var c=this.frames.length-1;-1<c;c--)this.frames[c]&&e.has(this.frames[c]._uuid)||this.frames.splice(c,1);this._tempSaveStr=JSON.stringify(this.nodeStateCache),this._saveStr=JSON.stringify(r)},u.getSaveData=function(t){for(var e,n=t.node,o={},i=r(_);!(e=i()).done;){var a=e.value;t[a]&&(o[a]=n[a])}if(t.str){var c=n.getComponent(cc.Label);c&&(o.str=c.string)}if(t.lab_o_c){var s=n.getComponent(cc.LabelOutline);s&&(o.lab_o_c=s.color.toHEX("rrggbb"))}if(t.color&&(o.color=n.color.toHEX("rrggbb")),t.frame){var u=n.getComponent(cc.Sprite);u&&u.spriteFrame&&(o.frame=this.getFrameId(u.spriteFrame))}return o},u.removeNodeData=function(t){var e=this._nodeList.indexOf(t);-1!==e&&(this._nodeList.splice(e,1),t.node&&this.removeNode(t.node))},u.removeNode=function(t){var e=t.uuid;for(var n in this.nodeStateCache)delete this.nodeStateCache[n][e]},u.addNode=function(){},u.onLoad=function(){this._saveStr&&(this.nodeStateCache1=JSON.parse(this._saveStr))},i=o,(s=[{key:"curState",get:function(){return 0==this._states.length?0:this._states.indexOf(this._curState)},set:function(t){this._states[t]!==this._curState&&(this._curState=this._states[t],this.switchState(this._curState))}},{key:"addState",get:function(){return this._addState},set:function(t){-1<t.indexOf("@")?(t=t.replace("@",""),this._addState="",t&&-1===this._states.indexOf(t)&&(this._states.push(t),1==this._states.length&&(this.curState=0),this._updateAnimEnum())):this._addState=t}},{key:"removeState",get:function(){return this._removeState},set:function(t){var e;-1<t.indexOf("@")?"default"!=(t=t.replace("@",""))&&(this._removeState="",-1<(e=this._states.indexOf(t))&&(this._states.splice(e,1),this._updateAnimEnum(),delete this.nodeStateCache[t],delete this.nodeStateCache1[e],t==this._curState&&(this.curState=0))):this._removeState=t}},{key:"nodeList",get:function(){return this._nodeList},set:function(t){if(this._tempNodeList)for(var e=this._tempNodeList.length,n=0;n<e;n++){var o=this._tempNodeList[n];o&&-1===t.indexOf(o)&&o.node&&this.removeNode(o.node)}for(var i,a=r(t);!(i=a()).done;)i.value.nodeState=this;this._tempNodeList=t.concat()}}])&&a(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),o}(cc.Component),h([v({type:[cc.String],editorOnly:!0})],u.prototype,"_states",void 0),h([v({type:d,editorOnly:!0})],u.prototype,"_curState",void 0),h([v({type:d})],u.prototype,"curState",null),h([v({type:cc.SpriteFrame,visible:!1})],u.prototype,"frames",void 0),h([v({editorOnly:!0})],u.prototype,"_addState",void 0),h([v()],u.prototype,"addState",null),h([v({editorOnly:!0})],u.prototype,"_removeState",void 0),h([v()],u.prototype,"removeState",null),h([v({editorOnly:!0})],u.prototype,"_tempSaveStr",void 0),h([v],u.prototype,"_saveStr",void 0),h([v({type:cc.Node,visible:!1})],u.prototype,"realNodeList",void 0),h([v({type:s.default,editorOnly:!0})],u.prototype,"_nodeList",void 0),h([v({type:s.default})],u.prototype,"nodeList",null),u=h([y,g,m("UI/NodeState")],u),l.default=u,cc._RF.pop()},{}],NotchFix:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5285bEbb9RJWYAJWPY9+ydj","NotchFix");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.onLoad=function(){if(c.default.Platform.checkIsNotch()){var t=this.getComponent(cc.Widget);t.left=40,t.right=40}},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],NotificationConst:[function(t,e,n){"use strict";cc._RF.push(e,"6398et2yq5BmovxiR+bSf/6","NotificationConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationConst=void 0,r.NotificationConst={INIT_GAME:"INIT_GAME",LOGOUT:"logout",INIT_GAME_FINISH:"INIT_GAME_FINISH",UPDATE_USER_INFO:"UPDATE_USER_DATA",UPDATE_MONEY:"UPDATE_MONEY",UPDATE_IDLE:"UPDATE_IDLE",UPDATE_SUPER_CASH:"UPDATE_SUPER_CASH",SYS_OPEN:"SYS_OPEN",SYS_OPEN_END:"SYS_OPEN_END",CHECK_ALL_SYS_OPEN:"CHECK_ALL_SYS_OPEN",CHECK_SYS_OPEN:"CHECK_SYS_OPEN",LUCK_AWARD:"LUCK_AWARD",ADD_EVENT_BUFF:"ADD_EVENT_BUFF",ON_HIDE:"ON_HIDE",ON_SHOW:"ON_SHOW",ON_KEY_BACK:"ON_KEY_BACK",START_GUIDE:"START_GUIDE",END_GUIDE:"END_GUIDE",ADD_AD_NUM:"ADD_AD_NUM",ADD_DAILY_TASK:"ADD_DAILY_TASK",ADD_BOX:"ADD_BOX",ADD_RESIDENTBUFF:"ADD_RESIDENTBUFF",BUY_DIAMOND:"BUY_DIAMOND",GUIDE_RECORDER:"GUIDE_RECORDER",GUIDE_STEP_FINISH:"GUIDE_STEP_FINISH",UPDATE_PASSPOERT_ICON:"UPDATE_PASSPOERT_ICON",UPDATE_GOOGLE_PRODUCT:"UPDATE_GOOGLE_PRODUCT",PLAY_MONEY_ANI:"PLAY_MONEY_ANI",ADD_OPEN_VIEW:"ADD_OPEN_VIEW",PAY_SUCCESS:"pay_success",MACHINE_UPDATE:"machine_update",STAGE_UPGRADE_UPDATE:"stage_upgrade_update",ENTER_MAP:"enter_map",UPDATE_MAIL_LIST:"UPDATE_MAIL_LIST"},cc._RF.pop()},{}],ObjectPool:[function(t,e){"use strict";cc._RF.push(e,"ec294wUtL9EoIZ1Z9TATLEy","ObjectPool");var n=function(){function t(){this._objs=[]}t.registerClass=function(e,n){t._classes[n]=e},t.getObjCnt=function(e){return t._content[e]&&t._content[e].length};var e=t.prototype;return e.pushObj=function(t){this._objs.push(t)},e.popObj=function(){return 0<this._objs.length?this._objs.pop():null},e.clear=function(){for(;0<this._objs.length;)this._objs.pop()},t.pop=function(e){if(t._content[e]||(t._content[e]=[]),(r=t._content[e]).length)return r.pop();var n,r,o=t._classes[e];return 0==(r=arguments.length<=1?0:arguments.length-1)?n=new o:1==r?n=new o(arguments.length<=1?void 0:arguments[1]):2==r?n=new o(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):3==r?n=new o(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]):4==r?n=new o(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4]):5==r&&(n=new o(arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5])),n.ObjectPoolKey=e,n},t.popWithExtraKey=function(e,n){t._content[e]||(t._content[e]=[]);var r,o,i,a=t._content[e];if(a.length)for(var c=0;c<a.length;c++)if(a[c].extraKey==n){r=a[c],a.splice(c,1);break}return r||(o=t._classes[e],0==(i=arguments.length<=2?0:arguments.length-2)?r=new o:1==i?r=new o(arguments.length<=2?void 0:arguments[2]):2==i?r=new o(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3]):3==i?r=new o(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4]):4==i?r=new o(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]):5==i&&(r=new o(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5],arguments.length<=6?void 0:arguments[6])),r.extraKey=n,r.ObjectPoolKey=e),r},t.print=function(){},t.push=function(e){if(null==e)return!1;var n=e.ObjectPoolKey;return!!t._content[n]&&(t._content[n].push(e),!0)},t.clear=function(){t._content={}},t.clearClass=function(e,n){void 0===n&&(n=null);for(var r=t._content[e];r&&r.length;){var o=r.pop();n&&o[n](),o=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,n){var r=t._content[e];if(null!=r)for(var o=0,i=r.length;o<i;o++)r[o][n]()},t}();n._content={},n._classes={},window.ObjectPool=n,cc._RF.pop()},{}],OpenSysAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"eac74/h6jtHcrDFb64e0HCL","OpenSysAni");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("EffectUtils"),l=i("UIImage"),h=i("NotificationConst"),f=i("SystemOpenConst"),d=cc._decorator,p=d.ccclass,y=d.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).ani=null,e.icon=null,e.desc=null,e.boxAni=null,e.isPlaying=!1,e.isMove=!1,e.isMoveFinish=!1,e.tw=null,e.endPosList=[],e.NowItemType=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.icon.node.x=0,this.icon.node.y=0,this.icon.node.scaleX=this.icon.node.scaleY=1,this.boxAni=this.ani.getComponent(cc.Animation),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchTap,this),this.boxAni.on(cc.Animation.EventType.FINISHED,this.onAnimCompleted,this)},i.onAnimCompleted=function(){this.isPlaying&&(this.isPlaying=!1,this.playMoveIcon())},i.onTouchTap=function(){this.isPlaying||(this.isMove||this.isMoveFinish?this.isMove&&!this.isMoveFinish?(this.tw&&(this.tw.stop(),this.tw.removeSelf(),this.tw=null),this.icon.node.x=this.data.pos.x,this.icon.node.y=this.data.pos.y,this.moveCb()):this.close():(c.default.TimerManager.remove(this.playMoveIcon,this),this.playMoveIcon()))},i.close=function(){this.tw&&(this.tw.stop(),this.tw.removeSelf(),this.tw=null),this.node.parent&&this.node.removeFromParent(!1),this.isMoveFinish=!1,this.isMove=!1,this.isPlaying=!1,this.data=null,this.desc.string="",this.icon.node.x=0,this.icon.node.y=0,this.icon.node.scaleX=this.icon.node.scaleY=1,u.default.instance.queueExecutor.finishFunc()},i.playMoveIcon=function(){var t=this;this.isMove=!0,this.tw=cc.tween(this.icon.node).to(1,{x:this.data.pos.x,y:this.data.pos.y,scaleX:.2,scaleY:.2},{easing:cc.easing.quadIn}).call(function(){t.moveCb()}).start()},i.moveCb=function(){this.isMove=!1,this.isMoveFinish=!0,this.data.func&&this.data.func.apply(this.data.obj),this.data.event&&c.default.NotificationCenter.dispatch(this.data.event,this.data.param),c.default.NotificationCenter.dispatch(h.NotificationConst.SYS_OPEN_END,f.OpenTypeConst[this.data.id]),this.close()},i.play=function(t){this.data=t,this.icon.source=t.icon,this.desc.string=s.GameText.getTextByStr("system_title_"+t.id),this.boxAni.play("work"),this.isPlaying=!0},o}(cc.Component),o([y(cc.Node)],i.prototype,"ani",void 0),o([y(l.UIImage)],i.prototype,"icon",void 0),o([y(cc.Label)],i.prototype,"desc",void 0),i=o([p],i),a.default=i,cc._RF.pop()},{}],OrderData:[function(t,e,n){"use strict";cc._RF.push(e,"17099JzRhtCfK8jMGV8JeYn","OrderData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App"),a=r("DeskService"),c=r("CookData");o.default=function(){function t(){this.customer=null,this.machine=null,this.display=null,this.cnt=1,this.cookingCnt=0}var e=t.prototype;return e.canCook=function(){return this.cnt>this.cookingCnt?this.machine.getEmpSlot():null},e.getFoodValue=function(){return this.machine.attr.value},e.finishCook=function(){},e.finishOrder=function(){this.cnt--,this.cookingCnt--,this.cnt?this.display.setCnt(this.cnt):(this.display.destroySelf(),this.display=null,this.customer.exit(this))},e.startCook=function(){var t=this.machine.getEmpSlot();t.startCook(),t.order=this;var e=new c.default;return e.order=this,e.slot=t,e.passSectionData=i.default.RandomUtils.randomArray(a.default.ins.passSectionDatas),e},t}(),cc._RF.pop()},{}],OrderDisplay:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"cf392D4arZL2ZGZDbIIeY8P","OrderDisplay");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([o=cc._decorator.ccclass],o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).food=null,e.cntLab=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.food=this.node.getChildByName("Food").getComponent(cc.Sprite),this.cntLab=this.node.getChildByName("CntLab").getComponent(cc.Label)},i.setData=function(t){this.cntLab.string=t.cnt+"",this.food.spriteFrame=t.machine.foodImg.spriteFrame},i.setCnt=function(t){this.cntLab.string=t+""},i.destroySelf=function(){this.node.pool.push(this.node)},o}(cc.Component)),i.default=o,cc._RF.pop()},{}],OrderService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0a040hVADpEx7+PjIM3YtJX","OrderService");var c,s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0}),l.WaitOrderData=l.OrderDataList=void 0;var h=u("App"),f=u("NodePool"),d=u("OrderData"),p=u("GameConst"),y=u("GlobalAttr"),v=u("BaseService"),g=u("MachineService"),m=u("MapService"),_=cc._decorator.ccclass;c=function(t){var e,n;function r(){var e;return(e=t.apply(this,arguments)||this).orders=null,e.waitOrderList=null,e.orderPool=null,e.globalAttr=null,e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var o=r.prototype;return o.onLoad=function(){c.ins=this},o.init=function(){var t;this.globalAttr=y.default.ins,this.waitOrderList=[],this.orders=((t={})[p.MachineType.type1]=new b,t[p.MachineType.type2]=new b,t),this.orderPool=new f.default,this.orderPool.prefab=m.default.ins.foodBundle.get("Order",cc.Prefab),h.default.NotificationCenter.addListener(p.GameNotificationConst.UNLOCK_SLOT,this.onUnlockSlot,this)},o.onUnlockSlot=function(t){this.orders[t.machineData.cfg.machine_type].checkHasEmp()},o.createOrders=function(t){var e=g.default.ins.unlockMachines;if(e.length){for(var n=h.default.RandomUtils.shuffle(e.concat()).slice(0,t),r=n.length,o=[],i=0;i<r;i++){var a=new d.default;a.machine=n[i],o[i]=a,a.cnt=h.default.RandomUtils.limitInteger(1,a.machine.attr.slotCnt),this.orders[a.machine.cfg.machine_type].addOrder(a)}return o}return[this.createOrder()]},o.createOrder=function(){var t=new d.default;return g.default.ins.unlockMachines.length?(t.machine=h.default.RandomUtils.randomArray(g.default.ins.unlockMachines),t.cnt=h.default.RandomUtils.limitInteger(1,t.machine.attr.slotCnt)):(t.machine=g.default.ins.machineDatas[0],t.cnt=1),this.orders[t.machine.cfg.machine_type].addOrder(t),t},o.finshOrder=function(t){var e=this.orders[t.machine.cfg.machine_type];t.finishOrder(),t.cnt<=0&&e.orders.remove(t)},r}(v.default),c=s([_],c),l.default=c;var b=function(){function t(){this.hasEmp=!1,this.orders=[]}var e=t.prototype;return e.addOrder=function(t){this.orders.push(t),!this.hasEmp&&t.canCook()&&(this.hasEmp=!0)},e.cookOrder=function(){for(var t,e=r(this.orders);!(t=e()).done;){var n=t.value;if(n.canCook()){n.cookingCnt++;var o=n.startCook();return this.checkHasEmp(),o}}return null},e.checkHasEmp=function(){for(var t,e=r(this.orders);!(t=e()).done;)if(t.value.canCook())return this.hasEmp=!0,!0;return this.hasEmp=!1},t}();l.OrderDataList=b,l.WaitOrderData=function(){return function(){this.cb=null,this.target=null}}(),cc._RF.pop()},{}],PanelAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c8ce0aO6IZCxbaDTRQx/82/","PanelAni");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.PanelAni=void 0;var a=cc._decorator,c=a.ccclass;a.menu,o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([c],o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).isPlaying=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.showPanel=function(){this.node.stopAllActions(),cc.tween(this.node).to(.05,{scaleX:1,scaleY:1.1}).to(.2,{scaleX:1.05,scaleY:1},{easing:cc.easing.quadOut}).to(.2,{scaleX:1},{easing:cc.easing.quadOut}).start()},i.hidePanel=function(t){this.isPlaying=!0,this.node.stopAllActions(),cc.tween(this.node).to(.05,{scale:0}).call(function(){t&&t()}).start()},o}(cc.Component)),i.PanelAni=o,cc._RF.pop()},{}],PassSectionData:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"dd406kGPSJM25kjxu3KHBEo","PassSectionData");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("GameUtils"),l=a("MyBigLong"),h=a("DeskService");c.default=function(){function t(){this.chef=null,this.waiter=null,this.passSectionDesk=null,this.foodPos=null,this.cookDatas=[],this.showSpr=null,this.moneyLab=null}var e=t.prototype;return e.addCookData=function(t){if(this.cookDatas.push(t),this.showSpr)this.showSpr.node.active=!0;else{var e=s.default.NodePoolMsr.passSectionFoodPool.pop();e.zIndex=4,this.passSectionDesk.addChild(e),e.position=this.foodPos,e.x-=this.passSectionDesk.x,e.y-=this.passSectionDesk.y,this.showSpr=e.getComponent(cc.Sprite),this.moneyLab=e.getComponentInChildren(cc.Label)}h.default.ins.addCookData(t),this.showSpr.spriteFrame=t.order.display.food.spriteFrame,this.moneyLab.string=l.default.toString(this.getAllMoneyCnt())},e.getAllMoneyCnt=function(){for(var t,e=0,n=r(this.cookDatas);!(t=n()).done;)e+=t.value.foodValue;return e},e.removeCookData=function(t){if(this.cookDatas.remove(t),this.cookDatas.length){var e=this.cookDatas.last();this.moneyLab.string=l.default.toString(this.getAllMoneyCnt()),this.showSpr.spriteFrame=e.order.display.food.spriteFrame}else this.showSpr.node.active=!1},e.parse=function(t){var e=t.x,n=t.y;this.foodPos=t.getChildByName("Foodsprite").position,this.foodPos.x+=e,this.foodPos.y+=n;var r=t.getChildByName("Chef").position;r.x+=e,r.y+=n,this.chef={pos:r,direction:u.getDirection(r,this.foodPos)},(r=t.getChildByName("Cashier").position).x+=e,r.y+=n,this.waiter={pos:r,direction:u.getDirection(r,this.foodPos)}},t}(),cc._RF.pop()},{}],PayConst:[function(t,e,n){"use strict";cc._RF.push(e,"df2d9NO/6NKeZD+T1dqRWB0","PayConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.AppSendEvent=o.PayId=o.BuyType=void 0,(r=o.BuyType||(o.BuyType={}))[r.NONE=0]="NONE",r[r.SIGNIN_LIMIT_GIFT=1]="SIGNIN_LIMIT_GIFT",r[r.MONEY_PART=2]="MONEY_PART",r[r.PASSPORT_MAIN=3]="PASSPORT_MAIN",r[r.PASSPORT_FB=4]="PASSPORT_FB",r[r.RECHARGE=5]="RECHARGE",r[r.ITEM=6]="ITEM",r[r.ACHIEVEMENT=7]="ACHIEVEMENT",(r=o.PayId||(o.PayId={})).ACHIEVEMENT="achievement",r.PASSPORT_ACTIVITY="passport_activity",r.PASSPORT_MAIN="passport_main",r.CLERA_ITEM_ACTIVITY="clear_item_activity",r.THREE_TO_ONE_ACTIVITY="three_to_one_activity",r.AUTO_COLLECT="auto_collect",(o=o.AppSendEvent||(o.AppSendEvent={})).USER_LOGIN="user_login",o.USER_REGEST="user_register",o.USER_BUY="purchase_complete",o.RETAIN="day_retain",cc._RF.pop()},{}],PayIdConst:[function(t,e,n){"use strict";cc._RF.push(e,"03bdamRLB1PKYC1eweGAUxH","PayIdConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.PayIdConst=void 0,r.PayIdConst={part_1:"part_1",part_2:"part_2",part_3:"part_3",part_4:"part_4",passport_main:"passport_main",passport_activity:"passport_activity"},cc._RF.pop()},{}],PlatformBase:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"90db9bUG6NKxIV/BKobCuu3","PlatformBase");var s=t,u=n,l=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.DiamondCostType=u.save_prop_Const=u.LoginDataSaveKey=void 0;var h=s("App"),f=s("GameText"),d=s("Toast"),p=s("NotificationConst"),y=s("ViewConst"),v=s("ADController"),g=s("ADManageBase"),m=s("TipView");u.LoginDataSaveKey={loginCache:"cars"},(s=u.save_prop_Const||(u.save_prop_Const={}))[s.YINDAO_LEVEL=99]="YINDAO_LEVEL",s[s.LEVEL=1]="LEVEL",(s=u.DiamondCostType||(u.DiamondCostType={}))[s.SHOP_NORMAL_BOX=0]="SHOP_NORMAL_BOX",s[s.SHOP_HEIGHT_BOX=1]="SHOP_HEIGHT_BOX",s[s.EQUIPMENT_UPGRADE=2]="EQUIPMENT_UPGRADE",s[s.EQUIPMENT_GRADE_UPGRADE=3]="EQUIPMENT_GRADE_UPGRADE",s[s.ABILITY_UPGRADE=4]="ABILITY_UPGRADE",s[s.BUFF_DOUBLE__RATE_GOLD=5]="BUFF_DOUBLE__RATE_GOLD",s[s.BUFF_FIVE_RATE_GOLD=6]="BUFF_FIVE_RATE_GOLD",s[s.BUFF_FOUR_HOUR_GOLD=7]="BUFF_FOUR_HOUR_GOLD",u.default=function(){function t(){this.loginInfo={},this._videoManage=null,this.compelADVideoManage=null,this.insterTime=0,this.insterFullTime=0,this.msgCache=[],this._playrSpendMoney=0,h.default.Platform=this,h.default.SaveManage.add(this,u.LoginDataSaveKey.loginCache,!1,!1),h.default.SaveManage.load(u.LoginDataSaveKey.loginCache)}var e,n,i=t.prototype;return i.init=function(){this.initProductConfig(),this.initAd(),h.default.AnalyticMgr.sentDayRetain()},i.initProductConfig=function(){var t=h.default.ConfigManager.getConfig("ProductConfig");this._productConfigs={};for(var e,n=o(t);!(e=n()).done;){var r=e.value;this._productConfigs[r.payId]=r}},i.initAccountServer=function(){},i.getProductConfigByPayString=function(t){return this._productConfigs[t]},i.getProductConfigById=function(t){for(var e in this._productConfigs)if((e=this._productConfigs[e]).id==t)return e;return null},i.setEvent=function(){},i.showInteractionAd=function(t){return void 0===t&&(t=v.InterAdType.normal),!0},i.isAutoShowInteractionAd=function(){return!1},i.isGetRemoteRes=function(){return!1},i.isShowDebugUI=function(){return-1<this.getVersionStr().indexOf("debug")||-1<this.getVersionStr().indexOf("test")||-1<this.getVersionStr().indexOf("gm")},i.vibrator=function(t){void 0===t&&(t=0)},i.resetGame=function(){window.location.reload()},i.checkIsNotch=function(){return!1},i.exitGame=function(){this.saveData()},i.cal=function(){},i.initAd=function(){this._videoManage=new g.ADManageBase},i.share=function(){},i.showBanner=function(){},i.hideBanner=function(){},i.showExpressAd=function(){},i.hideExpressAd=function(){},i.showAD=function(){this._videoManage&&this._videoManage.show()},i.showCompelAD=function(){},i.isWXLogin=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}},t)}))},i.startGameRecorder=function(){},i.stopGameRecorder=function(){},i.shareRecorder=function(){},i.jumpToOtherGame=function(){},i.loadZipFile=function(){return Promise.resolve(!1)},i.isCanShare=function(){return!0},i.getPackVersion=function(){return"test"},i.getPackVersionCode=function(){return 9999},i.getDefaultLang=function(){return"0"},i.syncDataCallBack=function(){},i.getServerTime=function(){return l(this,void 0,void 0,r().mark(function t(){var e,n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=3;case 1:return t.prev=1,n=h.default.GameDataMsr.playerInfo,t.next=5,h.default.Http.requestAsync(h.default.ConfigManager.gameConf.serverInfos.interface+"/api/time",{token:n.token});case 5:return o=t.sent,i=JSON.parse(o),t.abrupt("return",(h.default.DateUtils.setServerTime(1e3*i.data.now_time),!0));case 10:return t.prev=10,t.t0=t.catch(1),Log.error("\u83b7\u53d6\u540e\u53f0\u65f6\u95f4\u5931\u8d25",t.t0),t.next=15,h.default.TimerManager.sleep(1e3);case 15:if(--e){t.next=1;break}case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,null,[[1,10]])}))},i.saveDataToLocal=function(){h.default.GameDataMsr.playerInfo.localSaveTime=Math.ceil(h.default.DateUtils.Now()/1e3),h.default.SaveManage.saveAll()},i.saveData=function(){return l(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=h.default.GameDataMsr.playerInfo).localSaveTime=e.saveTime=Math.ceil(h.default.DateUtils.Now()/1e3),e.saveDevice=this.getDeviceId(),e.token,h.default.ConfigManager.gameConf.serverInfos.game,e.token=null,h.default.SaveManage.getAllAutoSaveData(),t.abrupt("return",!1);case 6:case"end":return t.stop()}},t,this)}))},i.showLoginFailTipView=function(){var t=this;return new Promise(function(e){h.default.ViewManager.open(14,{curState:m.TIPSTATE.SURE,leftBtnText:f.GameText.getText(17),leftFunc:function(){e()},leftThisObj:t,tipsStr:f.GameText.getText(53)})})},i.isUseServerSave=function(t,e){return new Promise(function(n){var r=h.default.GameDataMsr.playerInfo;r.godsTotalPower&&r.saveTime?h.default.ViewManager.open(y.ViewConst.SaveSelectView,t,e,r.saveTime,r.godsTotalPower,n):n(!0)})},i.getDeviceId=function(){var t=cc.sys.localStorage.getItem("DEVICEID");return t||(t="wx"+h.default.DateUtils.Now(),cc.sys.localStorage.setItem("DEVICEID",t)),t},i.isShowGameCircle=function(){return!1},i.getUseInfoFinish=function(){},i.getUserSaveData=function(){},i.syncData=function(){return l(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.default.GameDataMsr,t.abrupt("return",(e.tempData.isSyncDataByServer=!0,!0));case 2:case"end":return t.stop()}},t)}))},i.getVersionStr=function(){return"v "+versionInfo.packVersion+"_"+versionInfo.version},i.createMemento=function(){return this.loginInfo||{}},i.getAdTypeNum=function(){return 1},i.getAdState=function(){return this._videoManage.adState},i.setMemento=function(t){this.loginInfo=t||{}},i.getAccountInfoSync=function(){},i.logout=function(){this.loginInfo={},h.default.SaveManage.save(u.LoginDataSaveKey.loginCache)},i.getChannel=function(){return"cjkg"},i.tourist=function(){return l(this,void 0,void 0,r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.loginInfo.token){t.next=2;break}return t.abrupt("return",Promise.resolve({code:0,loginKey:this.loginInfo.token}));case 2:return t.next=4,h.default.Http.requestAsync(h.default.ConfigManager.gameConf.serverInfos.interface+"/api/login/simple",{channel:this.getChannel()},"GET");case 4:return e=t.sent,Log.trace(">>>>>>>>>>>>>>>\u6e38\u5ba2\u767b\u5f55",e),e=JSON.parse(e),t.abrupt("return",(this.loginInfo.playerid=e.data.id,this.loginInfo.token=e.token,h.default.SaveManage.save(u.LoginDataSaveKey.loginCache),h.default.GameDataMsr.isNew=!0,0===e.code?(this.setChannel(e.token),{code:e.code,loginKey:e.token}):{code:e.code,loginKey:null}));case 8:case"end":return t.stop()}},t,this)}))},i.buy=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(d.default.launch("\u652f\u4ed8\u529f\u80fd\u8fd8\u5728\u5f00\u53d1\u4e2d!!!!"),!1));case 1:case"end":return t.stop()}},t)}))},i.getPrice=function(t){return(t=this.getProductConfigByPayString(t))?"\uffe5"+t.cost:null},i.getPriceNum=function(t){return this.getProductConfigByPayString(t).cost},i.getCurrency=function(t){var e;if(!(t=this.getPrice(t)))return"";for(var n,r="",i=o(t);!(n=i()).done&&!("0"<=(e=n.value)&&e<="9"||"."===e);)r+=e;return r},i.getTitle=function(){return""},i.isSignIn=function(){return cc.sys.localStorage.getItem("is_SignIn_Game")},i.signInSuccess=function(t){cc.sys.localStorage.setItem("is_SignIn_Game",t)},i.signInFail=function(){cc.sys.localStorage.removeItem("is_SignIn_Game")},i.googleLogin=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}},t)}))},i.signOut=function(){h.default.EasyLoading.showLoadingByTime(10),this.clearAndResetGame(!0),cc.sys.localStorage.removeItem("is_SignIn_Game"),h.default.EasyLoading.hideLoading()},i.clearAndResetGame=function(t){return void 0===t&&(t=!1),l(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,!e.t0){e.next=4;break}return e.next=4,this.saveData();case 4:h.default.SaveManage.clear(),h.default.SaveManage.clearAllItem(),cc.audioEngine.stopAll(),cc.game.restart();case 8:case"end":return e.stop()}},e,this)}))},i.isHaveAnomalyOrder=function(){return!1},i.getOrderDataByPayId=function(){return null},i.openAppReview=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}},t)}))},i.updatePlayerSpendMoeny=function(){return l(this,void 0,void 0,r().mark(function t(){var e,n,o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isShowDebugUI()&&cc.sys.localStorage.getItem("vipTest")){t.next=17;break}e=3;case 2:return t.prev=2,t.next=5,h.default.Http.requestAsync(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/recharge/total_amount.php",{token:h.default.GameDataMsr.playerInfo.token});case 5:if(n=t.sent,0!==(o=JSON.parse(n)).code){t.next=9;break}return t.abrupt("return",(this.playerSpendMoney=o.data.amount,void(h.default.GameDataMsr.playerInfo.vipRecharge=o.data.amount)));case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(2);case 13:return t.next=15,h.default.TimerManager.sleep(1e3);case 15:if(--e){t.next=2;break}case 16:h.default.TimerManager.doTimer(12e4,1,this.updatePlayerSpendMoeny,this);case 17:case"end":return t.stop()}},t,this,[[2,11]])}))},i.setChannel=function(){},i.recordDiamondCost=function(t,e,n){e=0<e?-e:e,h.default.Http.requestAsync(h.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/money/save.php",{token:h.default.GameDataMsr.playerInfo.token,type:t,money_type:0,money_num:e,item_type:0,item_id:n||0,item_num:1})},i.record=function(t){try{t.token=h.default.GameDataMsr.playerInfo.token}catch(t){Log.error("\u7edf\u8ba1\u51fa\u9519:",t)}},i.getIsShowPay=function(){return!0},i.saveWxUserInfo=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}))},i.isAuthorization=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}},t)}))},i.resumOrder=function(){return l(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}))},e=t,(n=[{key:"playerSpendMoney",get:function(){return this._playrSpendMoney},set:function(t){this._playrSpendMoney+=t,h.default.GameDataMsr.playerInfo.vipRecharge=this._playrSpendMoney,h.default.NotificationCenter.dispatch(p.NotificationConst.PAY_SUCCESS)}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],Platform:[function(t,e,n){"use strict";cc._RF.push(e,"e022c7upZlLkYK0E9cNaiT5","Platform");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.Platform=void 0;var i,a=r("DebugPlatform"),c=r("WxGamePlatform");(function(){if(null==cc._decorator)throw new TypeError("Cannot destructure undefined")})(),(i=o.Platform||(o.Platform={})).init=function(){cc.log("Platform:",cc.sys.platform,cc.sys.os),Log.trace("\u83b7\u53d6\u5230\u5e73\u53f0\u4e3a: "+cc.sys.platform),cc.sys.platform===cc.sys.WECHAT_GAME?i.instance=new c.default:i.instance=new a.default},cc._RF.pop()},{}],PlaySoundInAni:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f10c35X6KlDKr0dmR8ngxlv","PlaySoundInAni");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property;s.menu,i=function(t){var e,n,i,a;function c(){var e;return(e=t.apply(this,arguments)||this)._volnumber=1,e._curChannel=-1,e._audio=null,e._play=!1,e._loop=!1,e}return n=t,(e=c).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n),c.prototype.onLoad=function(){},i=c,(a=[{key:"audio",get:function(){return this._audio},set:function(t){t!=this._audio&&(this._audio=t)&&this._play&&(this._curChannel=cc.audioEngine.play(t,this._loop,this._volnumber))}},{key:"play",get:function(){return this._play},set:function(t){this._play!=t&&((this._play=t)?(0<=this._curChannel&&cc.audioEngine.stop(this._curChannel),this._audio&&(this._curChannel=cc.audioEngine.play(this._audio,this._loop,this._volnumber))):0<=this._curChannel&&(cc.audioEngine.stop(this._curChannel),this._curChannel=-1))}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop!=t&&(this._loop=t,this._play&&this._audio&&(this._curChannel=cc.audioEngine.play(this._audio,t,this._volnumber)))}}])&&r(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),c}(cc.Component),c([l({})],i.prototype,"_volnumber",void 0),c([l({type:cc.AudioClip})],i.prototype,"_audio",void 0),c([l({type:cc.AudioClip})],i.prototype,"audio",null),c([l],i.prototype,"_play",void 0),c([l({})],i.prototype,"play",null),c([l],i.prototype,"_loop",void 0),c([l({})],i.prototype,"loop",null),i=c([u],i),a.default=i,cc._RF.pop()},{}],Point:[function(t,e,n){"use strict";cc._RF.push(e,"520e4cLiBBPLYREzSRGlltJ","Point");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){return function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}}(),cc._RF.pop()},{}],PreviewImg:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d52b1eniYZJu7xy4OwYH8sm","PreviewImg");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;c.menu,o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this)._spriteFrame=null,e}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o}(cc.Sprite),a([u({type:cc.SpriteFrame,editorOnly:!0,override:!0})],o.prototype,"_spriteFrame",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],Priority:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"12822HOVZVF9ZHt3x0rbgL2","Priority");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Composite");i.default=function(t){var e,n;function o(e){var n=(void 0===e?{}:e).children,r=void 0===n?[]:n;return t.call(this,{name:"Priority",children:r})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e]._execute(t);if(n!==a.FAILURE)return n}return a.FAILURE},o}(c.default),cc._RF.pop()},{}],QueueExecutor:[function(t,e,n){"use strict";cc._RF.push(e,"dd443VkrXJOhZIu/kEWrIEv","QueueExecutor");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.QueueExecutor=void 0,r.QueueExecutor=function(){function t(){this._isRuning=!1,this._functions=[]}var e=t.prototype;return e.queueCnt=function(){return this._functions.length},e.getState=function(){return this._isRuning},e.setCallBack=function(t,e){this._callBack=t,this._callBackTarget=e},e.regist=function(t,e,n){this._functions.push([t,e,n]),this.next()},e.start=function(){this.next()},e.finishFunc=function(){this._isRuning=!1,this.next()},e.reset=function(){this._isRuning=!1,this._functions=[]},e.next=function(){var t;this._isRuning||(0==this._functions.length?(this._callBack&&this._callBack.call(this._callBackTarget),this._callBack=null,this._callBackTarget=null):(this._isRuning=!0,(t=this._functions.shift())[0].apply(t[1],t[2])))},t}(),cc._RF.pop()},{}],RandomAction:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1724cDu98JIiYxkXL8pSBNg","RandomAction");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("Actions"),c=o("constants"),s=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(){var t=Math.random()<this.properties.rate;return this.log(this.properties.rate,t),t?c.SUCCESS:c.FAILURE},o}(o("Condition").default);i.default=s,a.register(s,"Random"),cc._RF.pop()},{}],RandomUtils:[function(t,e,n){"use strict";cc._RF.push(e,"b1616QM0npOFKfw56xL47Ip","RandomUtils");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){}var e=t.prototype;return e.limit=function(t,e){return e-=t,t+Math.random()*e},e.limitInteger=function(t,e){return Math.floor(this.limit(t,e+1))},e.randomArray=function(t){return t[Math.floor(Math.random()*t.length)]},e.shuffle=function(t){for(var e=t.length-1;0<=e;e--){var n=Math.floor(Math.random()*(e+1)),r=t[n];t[n]=t[e],t[e]=r}return t},e.randomArrayByWeight=function(t,e){var n=t.length;if(!e)for(var r=e=0;r<n;r++)e+=t[r].weight;for(var o=Math.random()*e,i=0;i<n;i++)if((o-=t[i].weight)<=0)return t[i]},e.judgeSpecialRandom=function(t,e){return e=i.P2C(e),Math.random()<e*(t+1)},t}();var o={},i=function(){function t(e,n){this.times=n=void 0===n?0:n,this.c=0,this.c=t.P2C(e)}return t.prototype.draw=function(){this.times++;var t=Math.random()<this.times*this.c;return t&&(this.times=0),t},t.P2C=function(t){if(o[t])return o[t];if(t<=0)return 0;for(var e=0,n=0,r=t,i=0;;){var a=this.C2P(i=(r+e)/2);if(Math.abs(a-n)<=1e-14)break;t<a?r=i:e=i,n=a}return o[t]=i},t.C2P=function(t){for(var e,n=0,r=0,o=Math.ceil(1/t),i=1;i<=o;i++)r+=e=(1-r)*Math.min(1,t*i),n+=e*i;return 1/n},t}();cc._RF.pop()},{}],RedPoinAnim:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5574dwTp21GIomBB5b2Dbp7","RedPoinAnim");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.RedPoinAnim=void 0;var a=cc._decorator,c=a.ccclass;a.menu,o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([c],o=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onEnable=function(){this.playAni()},i.onDisable=function(){this.node.stopAllActions()},i.playAni=function(){this.node.stopAllActions();var t=cc.tween(this.node).to(.3,{angle:20}).to(.3,{angle:-20});t=cc.tween(this.node).to(.2,{scale:1.1}).repeat(5,t).to(0,{angle:0}).to(.2,{scale:1.2}).to(.2,{scale:1}).delay(3),cc.tween(this.node).repeatForever(t).start()},o}(cc.Component)),i.RedPoinAnim=o,cc._RF.pop()},{}],RedPointMgr:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"90da2pdDCtI7r1w0FJwlsHa","RedPointMgr");var a=n;Object.defineProperty(a,"__esModule",{value:!0}),a.RedPointMgr=void 0;var c=function(){function t(){this.types={},this._observerList={},this._observerGroupMap=new Map,this.types=t.types}var e=t.prototype;return e.next=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this._observerList[t]){this._observerList[t].args=n;for(var o=this._observerList[t].funcs.length,i=0;i<o;i++)this._observerList[t].funcs[i].apply(this._observerList[t].targets[i],n)}else this._observerList[t]={targets:[],funcs:[],args:n}},e.subscribeGroup=function(t,e,n){var o=this;this._observerGroupMap.has(n);for(var i,a=0,c=function(){a=0;for(var i,c=r(t);!(i=c()).done;){var s=i.value;if(o._observerList[s]&&o._observerList[s].args){var u=o._observerList[s].args[0];"number"==typeof u?a+=u:a=u||a}}e.call(n,a)},s=r(t);!(i=s()).done;){var u=i.value;this.subscribe(u,c,null,!1)}this._observerGroupMap.set(n,{types:t,func:c}),c.call(n,!1)},e.unsubscribeGroup=function(t){var e=this._observerGroupMap.get(t);if(e){this._observerGroupMap.delete(t);for(var n=e.types.length,r=0;r<n;r++)this.unsubscribe(e.types[r],e.func,null)}},e.subscribe=function(t,e,n,r){void 0===r&&(r=!0),this._observerList[t]?-1<this._observerList[t].funcs.indexOf(e)&&-1<this._observerList[t].targets.indexOf(n)||(this._observerList[t].funcs.push(e),this._observerList[t].targets.push(n),r&&this._observerList[t].args&&this._observerList[t].args.length&&e.apply(n,this._observerList[t].args)):this._observerList[t]={args:null,targets:[n],funcs:[e]}},e.unsubscribe=function(t,e,n){if(this._observerList[t])for(var r=this._observerList[t],o=r.funcs.length,i=0;i<o;i++)if(r.targets[i]===n&&r.funcs[i]===e){this._observerList[t].funcs.splice(i,1),this._observerList[t].targets.splice(i,1);break}},t}();(a.RedPointMgr=c).types={},cc._RF.pop()},{}],RedpointComponent:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1157cTvDixC1LrmKxIPSmpg","RedpointComponent");var i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("App"),u=a("RedPointMgr"),l=cc._decorator,h=l.ccclass,f=l.property,d=(l.menu,l.executeInEditMode);a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._isMulti=!1,e.types=[],e._type=0,e.numLab=null,e.redNode=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,l=i.prototype;return l.addType=function(){var t;!this.isMulti||(t=Object.keys(u.RedPointMgr.types)[this._type])&&-1===this.types.indexOf(t)&&this.types.push(t)},l.deleteType=function(){var t;!this.isMulti||(t=Object.keys(u.RedPointMgr.types)[this._type])&&this.types.remove(t)},l.onLoad=function(){},l.onEnable=function(){this.types.length&&this.redNode&&(1===this.types.length?s.default.RedPointMgr.subscribe(this.types[0],this.onUpdateRed,this):s.default.RedPointMgr.subscribeGroup(this.types,this.onUpdateRed,this))},l.onDisable=function(){this.types.length&&this.redNode&&(1===this.types.length?s.default.RedPointMgr.unsubscribe(this.types[0],this.onUpdateRed,this):s.default.RedPointMgr.unsubscribeGroup(this))},l.onUpdateRed=function(t){"number"==typeof t?(this.numLab&&(this.numLab.string=t+"",this.numLab.node.active=!0),this.redNode.active=!!t):(this.numLab&&(this.numLab.node.active=!1),this.redNode.active=t)},a=i,(c=[{key:"isMulti",get:function(){return this._isMulti},set:function(t){(this._isMulti=t)||(this.types.length=1)}},{key:"type",get:function(){return this.isMulti?this._type:Object.keys(u.RedPointMgr.types).indexOf(this.types[0])},set:function(t){this.isMulti?this._type=t:this.types[0]=Object.keys(u.RedPointMgr.types)[t]}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),i([f({editorOnly:!0})],a.prototype,"_isMulti",void 0),i([f({})],a.prototype,"isMulti",null),i([f({type:cc.String,readonly:!0,visible:function(){return this.isMulti}})],a.prototype,"types",void 0),i([f({editorOnly:!0})],a.prototype,"_type",void 0),i([f({type:cc.Enum({})})],a.prototype,"type",null),i([f(cc.Label)],a.prototype,"numLab",void 0),i([f(cc.Node)],a.prototype,"redNode",void 0),a=i([h,d],a),c.default=a,cc._RF.pop()},{}],RemoveAdItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d99d1gcYm9J3pPPs87DCtbS","RemoveAdItem");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.RemoveAdItem=void 0;var a=o("App"),c=o("ControllerConst"),s=(o("ADManageBase"),o("ItemBase"));i.RemoveAdItem=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.use=function(t){void 0===t&&(t=0),a.default.ControllerManager.applyFunc(c.ControllerConst.AD,6,!0)},i.setMemento=function(t){this.cnt=t?t.cnt:0},i.createMemento=function(){if(this.cnt)return{cnt:this.cnt}},o}(s.ItemBase),cc._RF.pop()},{}],RepeatUntilFailure:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a5b16/dWiBBGpdqgJ9wJ41K","RepeatUntilFailure");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Decorator");i.default=function(t){var e,n;function o(e){var n,r=void 0===e?{}:e,o=r.maxLoop,i=void 0===o?-1:o,a=r.child,c=void 0===a?null:a;return(n=t.call(this,{child:c,name:"RepeatUntilFailure",title:"Repeat Until Failure",properties:{maxLoop:-1}})||this).maxLoop=i,n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},i.tick=function(t){if(!this.child)return a.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id),n=a.ERROR;(this.maxLoop<0||e<this.maxLoop)&&(n=this.child._execute(t))==a.SUCCESS;)e++;return e=t.blackboard.set("i",e,t.tree.id,this.id),n},o}(c.default),cc._RF.pop()},{}],RepeatUntilSuccess:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"368bd+OugRP4aWVTUDvPeZ5","RepeatUntilSuccess");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Decorator");i.default=function(t){var e,n;function o(e){var n,r=void 0===e?{}:e,o=r.maxLoop,i=void 0===o?-1:o,a=r.child,c=void 0===a?null:a;return(n=t.call(this,{child:c,name:"RepeatUntilSuccess",title:"Repeat Until Success",properties:{maxLoop:-1}})||this).maxLoop=i,n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},i.tick=function(t){if(!this.child)return a.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id),n=a.ERROR;(this.maxLoop<0||e<this.maxLoop)&&(n=this.child._execute(t))==a.FAILURE;)e++;return e=t.blackboard.set("i",e,t.tree.id,this.id),n},o}(c.default),cc._RF.pop()},{}],Repeater:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c9466BLBGdLabwc8ijz6qRJ","Repeater");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Decorator");i.default=function(t){var e,n;function o(e){var n,r=void 0===e?{}:e,o=r.maxLoop,i=void 0===o?-1:o,a=r.child,c=void 0===a?null:a;return(n=t.call(this,{child:c,name:"Repeater",title:"Repeat <maxLoop>x",properties:{maxLoop:-1}})||this).maxLoop=i,n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){t.blackboard.set("i",0,t.tree.id,this.id)},i.tick=function(t){if(!this.child)return a.ERROR;for(var e=t.blackboard.get("i",t.tree.id,this.id),n=a.SUCCESS;(this.maxLoop<0||e<this.maxLoop)&&((n=this.child._execute(t))==a.SUCCESS||n==a.FAILURE);)e++;return t.blackboard.set("i",e,t.tree.id,this.id),n},o}(c.default),cc._RF.pop()},{}],ResManager:[function(t,e,n){"use strict";cc._RF.push(e,"5b098ytN7dCE6XtTO9W1xy+","ResManager");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){this.loadCacheList=Object.create(null)}var e=t.prototype;return e.getResByUrl=function(t){return this.getResById(t)},e.loadResArray=function(t,e,n){return cc.resources.load(t,e,n)},e.loadInBundle=function(t,e,n){var r=this;return new Promise(function(o,i){r.loadBundle(t).then(function(t){t.load(e,n,function(t,e){t?i(t):o(e)})})})},e.loadDirInBundle=function(t,e,n){var r=this;return new Promise(function(o,i){r.loadBundle(t).then(function(t){t.loadDir(e,n,function(t,e){t?i(t):o(e)})})})},e.loadBundle=function(t){var e=cc.assetManager.getBundle(t);return e?Promise.resolve(e):new Promise(function(e,n){cc.assetManager.loadBundle(t,function(t,r){t?n(t):e(r)})})},e.releaseAsset=function(t,e){void 0===e&&(e=cc.SpriteFrame),(e=cc.resources.get(t,e))&&(this.loadCacheList[t]&&delete this.loadCacheList[t],cc.assetManager.releaseAsset(e))},e.getRemoteResAsync=function(t,e){return new Promise(function(n,r){e?cc.resources.load(t,e,function(t,e){t?r(t):n(e)}):cc.resources.load(t,function(t,e){t?r(t):n(e)})})},e.getResAsync=function(t,e){return!e&&this.loadCacheList[t]||(this.loadCacheList[t]=new Promise(function(n,r){e?cc.resources.load(t,e,function(t,e){t?r(t):n(e)}):cc.resources.load(t,function(t,e){t?r(t):n(e)})})),this.loadCacheList[t]},e.getResByUrlAsync=function(t){return new Promise(function(e,n){cc.loader.load(t,function(t,r){t?n(t):e(r)})})},e.getRes=function(t,e){return cc.resources.get(t,e)},e.getResById=function(t){return cc.resources.get(t)},t}(),cc._RF.pop()},{}],ResRecycle:[function(t,e,n){"use strict";cc._RF.push(e,"57646Bq5sxEfIArdF+R1Ur0","ResRecycle");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ResRecycle=void 0;var i=r("App"),a="_global_tag_",c=function(){function t(){this.texturesToClean={},this.assets={},this.urlRef={},this.urlsToClean={},this._isAutoRelease=!1}var e=t.prototype;return e.addUrl=function(t,e){void 0===e&&(e=a),this.urlRef[t]?this.urlRef[t]++:this.urlRef[t]=1,this.urlsToClean[e]?this.urlsToClean[e].includes(t)||this.urlsToClean[e].push(t):this.urlsToClean[e]=[t]},e.decRefByUrl=function(t,e){var n;!this.urlsToClean[e]||-1<(n=this.urlsToClean[e].indexOf(t))&&(this.urlsToClean[e].splice(n,1),this.urlRef[t]--,this.urlRef[t]<=0&&(delete this.urlRef[t],i.default.ResManager.releaseAsset(t,cc.SpriteFrame)))},e.clearUrlByTag=function(t){void 0===t&&(t=a);var e=this.urlsToClean[t];if(e){delete this.urlsToClean[t];for(var n=e.length,r=0;r<n;r++){var o=e[r];this.urlRef[o]--,this.urlRef[o]<=0&&i.default.ResManager.releaseAsset(o,cc.SpriteFrame)}}},e.addRef=function(t){this.assets[t._uuid]?this.assets[t._uuid].refCount++:(t.addRef(),this.assets[t._uuid]={asset:t,refCount:1})},e.clearAssets=function(){for(var t in this.assets)this.assets[t].refCount<=0&&(this.assets[t].asset.decRef(),delete this.assets[t])},e.decRef=function(t){this.assets[t._uuid]&&this.assets[t._uuid].refCount--},e.startAutoRelease=function(){this.clearAssets(),this._isAutoRelease||i.default.TimerManager.doTimer(3e4,0,this.clearAssets,this)},t.getInstance=function(){var e=t.__instance;return e||(t.__instance=new t)},e.destroy=function(){this.cleanupAll(),t.__instance=null},e.addTexture=function(t,e){if(void 0===e&&(e=a),t){var n=this.texturesToClean[e]=this.texturesToClean[e]||{},r=String(t._uuid);n[r]=t,cc.log(1,"add",e,t.loaded,r.substring(0,8))}},e.addSpriteFrame=function(t,e){t&&t.isValid&&(t=t.getTexture())&&this.addTexture(t,e)},e.addSprite=function(t,e){t.spriteFrame&&this.addSpriteFrame(t.spriteFrame,e)},e.addNode=function(t,e){if(t){var n=t.getComponent(cc.Sprite);if(n&&n.isValid){var r=n.spriteFrame;r&&r.isValid&&(n.spriteFrame=null,n.spriteFrame=r,this.addSpriteFrame(r,e))}}},e.removeTexture=function(t,e){if(void 0===e&&(e=a),t&&this.texturesToClean){var n=this.texturesToClean[e];n&&delete n[t._uuid]}},e.removeSpriteFrame=function(t,e){t&&t.isValid&&(t=t.getTexture())&&this.removeTexture(t,e)},e.removeSprite=function(t,e){t.spriteFrame&&this.removeSpriteFrame(t.spriteFrame,e)},e.removeNode=function(t,e){if(t&&(t=t.getComponent(cc.Sprite))&&t.isValid){var n=t.spriteFrame;n&&n.isValid&&this.removeSpriteFrame(n,e)}},e.cleanup=function(t){if(void 0===t&&(t=a),this.texturesToClean){var e=this.texturesToClean[t];if(e){for(var n in e){var r=e[n];r.loaded?(cc.log(2,"clean",t,r.loaded,n.substring(0,8)),this.cleanupImageCache(r)):console.warn(3,"cleanup",t,r.loaded,n.substring(0,8))}delete this.texturesToClean[t]}}},e.cleanupImageCache=function(t){t.loaded=!1,t._image&&(t._cleanupImageCache(),t._image=null),t._texture&&(t._texture.destroy(),t._texture=null)},e.cleanupAll=function(){if(this.texturesToClean){for(var t in this.texturesToClean)this.cleanup(t);this.texturesToClean=null}},t}();o.ResRecycle=c,cc._RF.pop()},{}],RichTextHyperLink:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a40aa474wRHS7Ux7ivlHTkT","RichTextHyperLink");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.menu,a.requireComponent);o=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.jump=function(t,e){e&&"string"==typeof e&&cc.sys.openURL(e)},o}(cc.Component),o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([c,s(cc.RichText)],o),i.default=o,cc._RF.pop()},{}],RoadNode:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"a5569a7KTRDiKGvGCqxNAHv","RoadNode");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){function t(){this._value=0,this._f=0,this._g=0,this._h=0,this._parent=null}var e,n;return t.prototype.toString=function(){return"\u8def\u70b9\u50cf\u7d20\u5750\u6807\uff1a\uff08"+this._px+","+this._py+"),  \u8def\u70b9\u4e16\u754c\u5750\u6807\uff1a\uff08"+this._cx+","+this._cy+"),  \u8def\u70b9\u5e73\u9762\u76f4\u89d2\u5750\u6807\uff1a\uff08"+this._dx+","+this._dy+")"},e=t,(n=[{key:"px",get:function(){return this._px},set:function(t){this._px=t}},{key:"py",get:function(){return this._py},set:function(t){this._py=t}},{key:"cx",get:function(){return this._cx},set:function(t){this._cx=t}},{key:"cy",get:function(){return this._cy},set:function(t){this._cy=t}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"f",get:function(){return this._f},set:function(t){this._f=t}},{key:"g",get:function(){return this._g},set:function(t){this._g=t}},{key:"h",get:function(){return this._h},set:function(t){this._h=t}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],RoadPointLayer:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4d0c4SQMllIKI6Qt5Dy6BST","RoadPointLayer");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("MapType"),u=a("MapRoadUtils"),l=cc._decorator.ccclass;(a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._roadPointDic={},e._roadNodeDic={},e._graphicDic={},e._roadTypeShowDic={},e._type=1,e._gsize=16,e.blockScale=.95,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){this._roadTypeShowDic[0]=!0,this._roadTypeShowDic[1]=!0,this._roadTypeShowDic[2]=!0,this._roadTypeShowDic[3]=!0,this._roadTypeShowDic[4]=!0,this._roadTypeShowDic[5]=!0,this._roadTypeShowDic[6]=!0,this._roadTypeShowDic[7]=!0,this._roadTypeShowDic[8]=!0,this._roadTypeShowDic[9]=!0},a.initRoadPointInfo=function(t){if(this.clear(),t.roadDataArr&&0!=t.roadDataArr.length){for(var e=t.roadDataArr.length,n=t.roadDataArr[0].length,r=0;r<e;r++)for(var o=0;o<n;o++){var i=t.roadDataArr[r][o],a=u.default.instance.getNodeByDerect(o,r);a.value=i,1!=a.value&&(this._roadNodeDic[a.dx+"_"+a.dy]=a)}this.drawRointPoint()}},a.getRoadPointInfo=function(){for(var t=u.default.instance.row,e=u.default.instance.col,n=[],r=0;r<2*t;r++){n[r]=[];for(var o=0;o<e;o++)null==this._roadNodeDic[o+"_"+r]?n[r][o]=1:n[r][o]=this._roadNodeDic[o+"_"+r].value}return n},a.drawRointPoint=function(){var t=u.default.instance.row,e=u.default.instance.col,n=u.default.instance.mapType,r=t/this._gsize;n==s.MapType.angle45&&(r=2*t/this._gsize);for(var o=e/this._gsize,i=0;i<r;i++)for(var a=0;a<o;a++)this.drawGraphic(a,i)},a.drawGraphic=function(t,e,n){var r=this;return void 0===n&&(n=!0),function(e){var o=r.getGraphic(t+"_"+e);n&&o.clear();for(var i=u.default.instance.halfNodeWidth,a=u.default.instance.halfNodeHeight,c=u.default.instance.mapType,s="00ff0050",l=t*r._gsize,h=l+r._gsize,f=(e*=r._gsize)+r._gsize,d=e;d<f;d++)for(var p=l;p<h;p++){var y=r._roadNodeDic[p+"_"+d];y&&r._roadTypeShowDic[y.value]&&(0==y.value?s="#00ff0050":1==y.value?s="#d4d4d450":2==y.value?s="#0000ff50":3==y.value&&(s="#ffff0050"),0==c&&r.draw45AngleMapRoadPoint(o,y,s,i,a),1==c?r.draw90AngleMapRoadPoint(o,y,s,i,a):2==c&&r.drawHoneycombMapRoadPoint(o,y,s,i,a))}}(e)},a.getGraphic=function(t){var e;return this._graphicDic[t]||((e=new cc.Node).parent=this.node,e.position=cc.v2(0,0),e=e.addComponent(cc.Graphics),this._graphicDic[t]=e),this._graphicDic[t]},a.draw45AngleMapRoadPoint=function(t,e,n,r,o){t.fillColor.fromHEX(n),t.moveTo(-r*this.blockScale+e.px,0+e.py),t.lineTo(0+e.px,-o*this.blockScale+e.py),t.lineTo(r*this.blockScale+e.px,0+e.py),t.lineTo(0+e.px,o*this.blockScale+e.py),t.fill()},a.draw90AngleMapRoadPoint=function(t,e,n,r,o){t.fillColor.fromHEX(n),t.rect(-r*this.blockScale+e.px,-o*this.blockScale+e.py,r*this.blockScale*2,o*this.blockScale*2),t.fill()},a.drawHoneycombMapRoadPoint=function(t,e,n){t.fillColor.fromHEX(n);var r=u.default.instance.nodeWidth*this.blockScale,o=u.default.instance.nodeHeight*this.blockScale,i=r/4,a=3*i,c=o/2,s=-2*i;n=-c,t.moveTo(s+i+e.px,n+e.py),t.lineTo(s+a+e.px,n+e.py),t.lineTo(s+r+e.px,c+n+e.py),t.lineTo(s+a+e.px,o+n+e.py),t.lineTo(s+i+e.px,o+n+e.py),t.lineTo(0+s+e.px,c+n+e.py),t.lineTo(s+i+e.px,n+e.py),t.fill()},a.addRoadPoint=function(t){this._roadNodeDic[t.dx+"_"+t.dy]=t;var e=Math.floor(t.dx/this._gsize);t=Math.floor(t.dy/this._gsize),this.drawGraphic(e,t)},a.addRoadPoints=function(t){for(var e,n={},r=0;r<t.length;r++){this._roadNodeDic[t[r].dx+"_"+t[r].dy]=t[r];var o=Math.floor(t[r].dx/this._gsize),i=Math.floor(t[r].dy/this._gsize);n[o+"_"+i]=[o,i]}for(e in n)this.drawGraphic(n[e][0],n[e][1])},a.removeRoadPoint=function(t){null!=this._roadNodeDic[t.dx+"_"+t.dy]&&(this._roadNodeDic[t.dx+"_"+t.dy]=null,delete this._roadNodeDic[t.dx+"_"+t.dy]);var e=Math.floor(t.dx/this._gsize);t=Math.floor(t.dy/this._gsize),this.drawGraphic(e,t)},a.removeRoadPoints=function(t){for(var e,n={},r=0;r<t.length;r++){null!=this._roadNodeDic[t[r].dx+"_"+t[r].dy]&&(this._roadNodeDic[t[r].dx+"_"+t[r].dy]=null,delete this._roadNodeDic[t[r].dx+"_"+t[r].dy]);var o=Math.floor(t[r].dx/this._gsize),i=Math.floor(t[r].dy/this._gsize);n[o+"_"+i]=[o,i]}for(e in n)this.drawGraphic(n[e][0],n[e][1])},a.changeRoadPointStyle=function(){for(var t in this._type++,this._type=this._type%3,this._roadPointDic){var e=this._roadPointDic[t];e&&e.reset(e.node,this._type)}},a.hiddenUnWalkAbleRoadPoint=function(){var t,e;if(o.hiddenUnWalkAble=!o.hiddenUnWalkAble,o.hiddenUnWalkAble)for(t in this._roadPointDic)(e=this._roadPointDic[t])&&1==e.node.value&&e.clear();else for(t in this._roadPointDic)(e=this._roadPointDic[t])&&1==e.node.value&&e.reset(e.node,this._type)},a.clear=function(){for(var t in this._roadPointDic)this._roadPointDic[t].destroy(),this._roadPointDic[t]=null,delete this._roadPointDic[t];for(t in this._graphicDic)this._graphicDic[t]&&(this._graphicDic[t].clear(),this._graphicDic[t].destroy(),this._graphicDic[t]=null,delete this._roadNodeDic[t]);this._roadNodeDic={}},i}(cc.Component)).hiddenUnWalkAble=!1,a=o=i([l],a),c.default=a=o,cc._RF.pop()},{}],RobotMgrView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f2ca91ZhthGvagPWnmp65oB","RobotMgrView");var s,u=t,l=n,h=(s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(l,"__esModule",{value:!0}),l.RobotMgrView=void 0;var f=u("App"),d=u("List"),p=u("BaseView"),y=u("Toast"),v=(u("ViewConst"),u("GameDataMsr")),g=u("TipView"),m=cc._decorator,_=m.ccclass,b=m.property;u=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).IDBox=null,e.itemList=null,e.itemDatas={nextId:11e4,list:[]},e.saveKey="RobotMgr",e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this);var e=cc.sys.localStorage.getItem(this.saveKey);if(e)try{this.itemDatas=JSON.parse(e),this.itemList.numItems=this.itemDatas.list.length}catch(n){this.itemList.numItems=0}this.IDBox.string=this.itemDatas.nextId+""},a.saveData=function(){cc.sys.localStorage.setItem(this.saveKey,JSON.stringify(this.itemDatas))},a.onCreateNew=function(){var t=this.itemDatas.nextId++;this.IDBox.string=this.itemDatas.nextId+"";var e=f.default.SaveManage.getAllAutoSaveData(),n=JSON.parse(e);n[v.GameDataSaveKey.PLAYER_INFO].token="",t={name:"\u673a\u5668\u4eba"+t,ability:1,grade:1,ID:t,archive:n},this.itemDatas.list.push(t),this.itemList.numItems=this.itemDatas.list.length,this.saveData()},a.onImportData=function(t){var e=t.target.getComponentInChildren(cc.EditBox);try{var n=e.string.includes("{")?JSON.parse(e.string):JSON.parse(f.default.StringUtil.unzip(e.string));t:for(var r,i=o(n);!(r=i()).done;){for(var a,c=r.value,s=o(this.itemDatas.list);!(a=s()).done;)if(a.value.name==c.name)continue t;this.itemDatas.list.push(c)}this.itemList.numItems=this.itemDatas.list.length,this.saveData(),y.default.launch("\u5bfc\u5165\u5b8c\u6bd5!")}catch(u){y.default.launch("\u5bfc\u5165\u5931\u8d25!"),Log.error(u)}},a.onSaveRachiveToRobot=function(t,e){var n=this,r=this.itemDatas.list[e];f.default.ViewManager.open(13,{tipsStr:"\u662f\u5426\u5c06\u5f53\u524d\u5b58\u6863\u5b58\u5165ID\u4e3a:("+r.ID+")\u7684\u673a\u5668\u4eba\u300a"+r.name+"\u300b\u4e2d",leftBtnText:"\u786e\u5b9a",hasCloseBtn:!1,curState:g.TIPSTATE.SURE_CANCEL,leftFunc:function(){var t=f.default.SaveManage.getAllAutoSaveData(),e=JSON.parse(t);e[v.GameDataSaveKey.PLAYER_INFO].token="",r.archive=e,n.itemList.numItems=n.itemDatas.list.length,n.saveData(),y.default.launch("\u5b58\u5165\u5b58\u6863\u6210\u529f")},leftThisObj:this,rightBtnText:"\u53d6\u6d88",rightFunc:function(){},rightThisObj:this})},a.importText=function(t){try{for(var e="string"==typeof t.archive?JSON.parse(t.archive):t.archive,n=Object.keys(e),r={},o=0,i=n;o<i.length;o++){var a=i[o];r[a.replace(/[\d]{8}/,"")]=e[a]}var c=(e=r)[v.GameDataSaveKey.PLAYER_INFO],s=f.default.GameDataMsr.playerInfo;c.saveTime=f.default.DateUtils.Now(),c.id=s.id,c.account=s.account,c.nickName=s.nickName,f.default.SaveManage.syncByData(e),f.default.GameDataMsr.playerInfo.token=null,f.default.SaveManage.clearAllItem(),f.default.ViewManager.open(14,{tipsStr:"\u5bfc\u5165\u5b58\u6863\u6210\u529f",hasCloseBtn:!1,curState:g.TIPSTATE.SURE,leftFunc:function(){f.default.Platform.resetGame()},leftThisObj:this})}catch(u){f.default.ViewManager.open(14,{tipsStr:"\u5bfc\u5165\u5b58\u6863\u51fa\u9519",curState:g.TIPSTATE.NO_SURE,hasCloseBtn:!0})}},a.onEditArchiveName=function(t,e){if(this.itemDatas.list[e].name!=t.string){for(var n=this.itemDatas.list.length,r=0;r<n;r++)if(this.itemDatas.list[r].name==t.string)return y.default.launch("\u4fee\u6539\u5931\u8d25,\u5b58\u6863\u540d\u4e0d\u5141\u8bb8\u91cd\u590d"),void(t.string=this.itemDatas.list[e].name);this.itemDatas.list[e].name=t.string,this.saveData()}},a.onEditAbility=function(t,e){t=parseInt(t.string),isNaN(t)||t<1||10<t?y.default.launch("\u8bf7\u8f93\u51651~10\u7684\u6570\u5b57"):(this.itemDatas.list[e].ability=t,this.saveData())},a.onEditGrade=function(t,e){t=parseInt(t.string),isNaN(t)||t<1||10<t?y.default.launch("\u8bf7\u8f93\u51651~10\u7684\u6570\u5b57"):(this.itemDatas.list[e].grade=t,this.saveData())},a.onOutputArchive=function(){var t=this.itemDatas.list,e=document.createElement("a");e.download="\u673a\u5668\u4eba\u5217\u8868.json",e.style.display="none",t=new Blob([JSON.stringify(t,null,4)]),e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},a.onDeleteArchive=function(t,e){e=parseInt(e),this.itemDatas.list.splice(e,1),this.itemList.numItems=this.itemDatas.list.length,this.saveData()},a.onUploadRobotData=function(t,e){return h(this,void 0,void 0,r().mark(function t(){var n=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:f.default.ViewManager.open(13,{tipsStr:"\u662f\u5426\u786e\u5b9a\u4e0a\u4f20\u673a\u5668\u4eba\u6570\u636e",leftBtnText:"\u786e\u5b9a",hasCloseBtn:!1,curState:g.TIPSTATE.SURE_CANCEL,leftFunc:function(){return h(n,void 0,void 0,r().mark(function t(){var n,o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.itemDatas.list[e],o=f.default.ConfigManager.gameConf.serverInfos.game+"/game/explore/createRobot/"+n.ID+"/"+n.grade+"/"+n.ability,n=f.default.StringUtil.zipStr1(JSON.stringify(n)),t.next=5,f.default.Http.requestWithTokenAsync(o,n,f.default.GameDataMsr.playerInfo.token,"GET","json");case 5:0===(null==(n=t.sent)?void 0:n.code)?y.default.launch("\u4e0a\u4f20\u673a\u5668\u4eba\u6570\u636e\u6210\u529f"):(Log.error(n),y.default.launch("\u4e0a\u4f20\u673a\u5668\u4eba\u6570\u636e\u5931\u8d25"));case 7:case"end":return t.stop()}},t,this)}))},leftThisObj:this,rightBtnText:"\u53d6\u6d88",rightFunc:function(){},rightThisObj:this});case 1:case"end":return t.stop()}},t,this)}))},a.onLoadArchive=function(t,e){e=parseInt(e),e=this.itemDatas.list[e],this.importText(e)},a.onRenderItem=function(t,e){var n=this.itemDatas.list[e],r={edit:t.getChildByName("EditBox").getComponent(cc.EditBox),rank:t.getChildByName("AbilityBox").getComponent(cc.EditBox),ability:t.getChildByName("AbilityBox").getComponent(cc.EditBox),loadBtn:t.getChildByName("\u52a0\u8f7d").getComponent(cc.Button),delBtn:t.getChildByName("\u5220\u9664").getComponent(cc.Button),saveBtn:t.getChildByName("\u4fdd\u5b58").getComponent(cc.Button),uploadBtn:t.getChildByName("\u4e0a\u4f20").getComponent(cc.Button)};r.edit.string=n.name,t.getChildByName("IDLab").getComponent(cc.Label).string="ID:"+n.ID,r.loadBtn.clickEvents[0].customEventData=r.delBtn.clickEvents[0].customEventData=r.saveBtn.clickEvents[0].customEventData=r.uploadBtn.clickEvents[0].customEventData=r.edit.editingDidEnded[0].customEventData=r.ability.editingDidEnded[0].customEventData=r.rank.editingDidEnded[0].customEventData=e+""},i}(p.default),s([b(cc.EditBox)],u.prototype,"IDBox",void 0),s([b({type:d.default})],u.prototype,"itemList",void 0),u=s([_],u),l.RobotMgrView=u,cc._RF.pop()},{}],RoleService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"28ec0St9n1CTLlKjKuOwevu","RoleService");var c,s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0});var h=u("App"),f=u("NodePool"),d=u("CostumeController"),p=u("GameConst"),y=u("Car"),v=u("Chef"),g=u("CarAI"),m=u("ChefAI"),_=u("CustomerAI"),b=u("RoleSpeakComponent"),w=u("WaiterAI"),C=u("Customer"),S=u("MainCat"),O=u("Waiter"),T=u("BaseService"),I=u("DeskService"),E=u("MapService"),x=cc._decorator,A=x.ccclass,L=x.property;u=c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).layer=null,e.deskService=null,e.nextTime=0,e.customerPool=null,e.carPool=null,e.chefPool=null,e.waiterPool=null,e.mainCatPool=null,e.chefs=[],e.waiters=[],e.customers=[],e.cars=[],e.testMan=null,e.enter=null,e.exit=null,e.canCreateCar=!0,e.chefspeed=100,e.waiterspeed=100,e.chefCnt=0,e.customerCnt=1,e.waiterCnt=0,e.carCnt=1,e.waiterPosIdx=0,e.chefPosIdx=0,e.rapidCats=null,e.isTalking=!1,e._mainCat=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){(c.ins=this).roleLang=h.default.ConfigManager.getConfig("RoleLang")},i.getNextWaiterPos=function(){return this.waiterPosIdx==this.waiterPosList.length?this.waiterPosList[this.waiterPosIdx-1]:this.waiterPosList[this.waiterPosIdx++]},i.getNextChefPos=function(){return this.chefPosIdx==this.chefPosList.length?this.chefPosList[this.chefPosIdx-1]:this.chefPosList[this.chefPosIdx++]},i.updateChefSpeed=function(){for(var t,e=r(this.chefs);!(t=e()).done;)t.value.calSpeed()},i.updateWaiterSpeed=function(){for(var t,e=r(this.waiters);!(t=e()).done;)t.value.calSpeed()},i.removeEmployee=function(t){this.chefs.remove(t),this.waiters.remove(t),t.node.destroy()},i.tempUpdate=function(t){if(this.nextTime<0){if(this.deskService.empPosList.length){var e=this.deskService.empPosList.pop(),n=this.createCustomer();n.addComponent(_.default),n.posData=e,n.node.position=this.enter,this.layer.addChild(n.node),n.ranSkin(),this.customers.push(n)}this.nextTime=1}else this.nextTime-=t},i.tempCarUpdate=function(t){if(this.nextTime<0){if(this.canCreateCar&&this.cars.length<this.carCnt){var e=this.createCar();e.addComponent(g.default),e.posData=I.default.ins.carPosData.posData,e.carPosData=I.default.ins.carPosData,e.node.position=this.enter,this.layer.addChild(e.node),this.cars.push(e)}this.nextTime=1}else this.nextTime-=t},i.createManCat=function(t,e){var n=this.mainCatPool.pop(),r=n.getComponent(S.default);return void 0!==e&&(r.skinName=e),r.selfAttr=t,1===E.default.ins.curCfg.type?(r.isWaiter=!0,n.addComponent(w.default),this.waiters.push(r),r.basePos=n.position=this.getNextWaiterPos()):(r.basePos=n.position=this.getNextChefPos(),n.addComponent(m.default),this.chefs.push(r)),this.layer.addChild(n),r.calSpeed(),r},i.createRapidCat=function(){var t=this.mainCatPool.pop(),e=this._mainCat=t.getComponent(S.default);e.selfAttr=d.default.ins.getModel().attr,1===E.default.ins.curCfg.type?(e.isWaiter=!0,t.addComponent(w.default),this.waiters.push(e),e.basePos=t.position=this.getNextWaiterPos()):(e.basePos=t.position=this.getNextChefPos(),t.addComponent(m.default),this.chefs.push(e)),this.layer.addChild(t),e.calSpeed()},i.createTestMan=function(){var t=this.mainCatPool.pop().getComponent(S.default);this.testMan=t,this.testMan.node.position=this.enter,this.layer.addChild(this.testMan.node),this.testMan.updateSlot(d.default.ins.getModel().equipItems)},i.createCustomer=function(){return this.customerPool.pop().getComponent(C.default)},i.createCar=function(){return this.carPool.pop().getComponent(y.default)},i.createWaiter=function(t){var e=this.waiterPool.pop(),n=e.getComponent(O.default);return n.calSpeed(),e.addComponent(w.default),n.basePos=e.position=t||this.getNextWaiterPos(),this.layer.addChild(e),this.waiters.push(n),n},i.createChef=function(t){var e=this.chefPool.pop(),n=e.getComponent(v.default);return n.basePos=e.position=t||this.getNextChefPos(),n.calSpeed(),this.layer.addChild(e),n.addComponent(m.default),this.chefs.push(n),n},i.update=function(){},i.parse=function(t){var e=t.getChildByName("CustomerTrans");this.enter=e.getChildByName("EnterTrans").position,this.exit=e.getChildByName("ExitTrans").position,e.destroy();var n=t.getChildByName("CashierSpawnTrans");this.waiterPosList=n.children.map(function(t){return t.position}),n.destroy();var r=t.getChildByName("SpawnTrans");this.chefPosList=r.children.map(function(t){return t.position}),r.destroy()},i.destroySelf=function(){this.chefs=[],this.waiters=[],this.customers=[],this.testMan=null,this._mainCat=null,this.canCreateCar=!0,this.waiterPosIdx=0,this.chefPosIdx=0,this.update=function(){}},i.init=function(){E.default.ins.curCfg.type===p.StageType.CAR?this.update=this.tempCarUpdate:this.update=this.tempUpdate,this.deskService=I.default.ins,this.layer=E.default.ins.layer;var t=E.default.ins.curCfg.type;if(this._mainCat=this.createManCat(d.default.ins.getModel().attr),this.onEquipOrUnEquipCostume(),1===t)for(var e=this.waiterCnt,n=0;n<e;n++)this.createWaiter();else if(2===t||3===t){this.waiterCnt++;for(var r=this.waiterCnt,o=0;o<r;o++)this.createWaiter();r=this.chefCnt;for(var i=0;i<r;i++)this.createChef()}h.default.NotificationCenter.addListener(p.GameNotificationConst.EQUIP_COSTUME,this.onEquipOrUnEquipCostume,this),h.default.NotificationCenter.addListener(p.GameNotificationConst.UNEQUIP_COSTUME,this.onEquipOrUnEquipCostume,this)},i.onEquipOrUnEquipCostume=function(){this._mainCat.updateSlot(d.default.ins.getModel().equipItems),this.testMan&&this.testMan.updateSlot(d.default.ins.getModel().equipItems)},i.getNewMainCat=function(){return this.mainCatPool.pop()},i.removeNewMainCat=function(t){this.mainCatPool.push(t)},i.talkingFinish=function(){this.isTalking=!1},i.showLang=function(t,e){if(this.isTalking)return!1;var n=this.roleLang[e];if(h.default.RandomUtils.limit(0,100)>n.rate)return!1;this.isTalking=!0;var r=h.default.RandomUtils.randomArray(this.roleLang[e].lang),o=h.default.NodePoolMsr.roleLangPool.pop();return E.default.ins.langLayer.addChild(o),o.getComponent(b.RoleSpeakComponent).init(t,r.lang),!0},o}(T.default),s([L(f.default)],u.prototype,"customerPool",void 0),s([L(f.default)],u.prototype,"carPool",void 0),s([L(f.default)],u.prototype,"chefPool",void 0),s([L(f.default)],u.prototype,"waiterPool",void 0),s([L(f.default)],u.prototype,"mainCatPool",void 0),u=c=s([A],u),l.default=u=c,cc._RF.pop()},{}],RoleSpeakComponent:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8f407LK1WBO7b3GUYljsyFS","RoleSpeakComponent");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.RoleSpeakComponent=void 0;var c=i("App"),s=i("RoleService"),u=cc._decorator,l=u.ccclass,h=u.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).langLab=null,e.followNode=null,e.talkTime=3,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.init=function(t,e){this.followNode=t,this.langLab.string=e,this.talkTime=3,this.followNode?(this.node.x=this.followNode.x,this.node.y=this.followNode.y+this.followNode.height+30):(s.default.ins.talkingFinish(),c.default.NodePoolMsr.roleLangPool.push(this.node),this.followNode=null)},i.update=function(t){this.talkTime-=t,this.talkTime<0||!this.followNode||!this.followNode.active?c.default.NodePoolMsr.roleLangPool.push(this.node):(this.node.x=this.followNode.x,this.node.y=this.followNode.y+this.followNode.height+30)},i.onDisable=function(){s.default.ins.talkingFinish(),this.followNode=null},o}(cc.Component),o([h(cc.Label)],i.prototype,"langLab",void 0),i=o([l],i),a.RoleSpeakComponent=i,cc._RF.pop()},{}],RoleUnlockAni:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"68d52AkJYBJU5xKiuFedyAr","RoleUnlockAni");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App"),s=o("SoundEffectConst");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).ani=null,e.cb=null,e.target=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.ani.on(cc.Animation.EventType.FINISHED,this.onAniPlayFinish,this)},i.init=function(t,e){this.cb=t,this.target=e,this.ani.setCurrentTime(0,"work"),this.ani.play("idle"),this.node.once(cc.Node.EventType.TOUCH_END,this.onTouchTap,this)},i.onTouchTap=function(){c.default.SoundManager.playEffect(s.SoundsDefine.UNLOCK),this.ani.play("work")},i.onAniPlayFinish=function(){this.cb.call(this.target),this.cb=this.target=null,this.node.destroy()},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],Runner:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"f4507lF6+BEI7jw6s7gTkhk","Runner");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Action");i.default=function(t){var e,n;function o(){return t.call(this,{name:"Runner"})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(){return a.RUNNING},o}(c.default),cc._RF.pop()},{}],SaveManage:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"0dcf6ElHR9L17mvkU12iDyJ","SaveManage");var a=t,c=n;Object.defineProperty(c,"__esModule",{value:!0}),c.ZHANGAIWU_OPERTYPE=void 0;var s=a("App");c.default=function(){function t(){this.saveKey="",this.gameKey="ZhaXinLaoTie",this.list=[],this.map={},this.isNeedUpdateDayData=!1,this.updateDayDataCaches={},this._saveInfo=null}var e=t.prototype;return e.init=function(){this.add(this,"SaveInfo",!1,!0),this.load("SaveInfo")},e.add=function(t,e,n,r){var o=this;return void 0===n&&(n=!0),void 0===r&&(r=!0),function(r){var i=n?o.saveKey+e:e;if(r={key:e,obj:t,saveKey:i,isAuto:r},o.map[e])for(var a=o.list.length,c=0;c<a;c++)if(o.list[c].saveKey===i){o.list.splice(c,1);break}o.list.push(r),o.map[e]=r}(r)},e.removeByKey=function(t){this.list.remove(this.map[t]),delete this.map[t]},e.removeByObj=function(t){for(var e=this.list.length-1;0<=e;e--)this.list[e].obj==t&&(delete this.map[this.list[e].key],this.list.splice(e,1))},e.setSaveKey=function(t){this.saveKey=t},e.getSaveObj=function(t){return this.map[t]},e.autoSave=function(){for(var t,e=r(this.list);!(t=e()).done;){var n=t.value;n.isAuto&&this.$save(n)}},e.getAllAutoSaveData=function(){for(var t,e={},n=r(this.list);!(t=n()).done;){var o,i=t.value;i.isAuto?(o=this.$save(i),e[i.saveKey]=o):this.$save(i)}return JSON.stringify(e)},e.syncByData=function(t){for(var e in t)cc.sys.localStorage.setItem(e,JSON.stringify(t[e]))},e.saveAll=function(){for(var t,e=r(this.list);!(t=e()).done;){var n=t.value;this.$save(n)}Log.trace("\u5b58\u6863\u6210\u529f!")},e.$save=function(t){var e=t.obj.createMemento(t.key);return e&&"object"==typeof e?cc.sys.localStorage.setItem(t.saveKey,JSON.stringify(e)):cc.sys.localStorage.removeItem(t.saveKey),e},e.save=function(t){(t=this.map[t])&&this.$save(t)},e.clearAllItem=function(){this.list=[],this.map={}},e.clearItem=function(t){(t=this.map[t])&&cc.sys.localStorage.removeItem(t.saveKey)},e.checkIsNeedUpdateData=function(){var t,e;this._saveInfo&&(e=s.default.DateUtils.Now(),t=Math.floor((e-this._saveInfo.timezoneOffset)/1e3/60/60/24),e=Math.floor((t+3)/7),this._saveInfo.week=e,-1!==this._saveInfo.day?t>this._saveInfo.day&&(this._saveInfo.day=t,this.updateDayDataCaches={},this.$updateDayData(t)):this._saveInfo.day=t)},e.clear=function(){for(var t,e=r(this.list);!(t=e()).done;){var n=t.value;cc.sys.localStorage.removeItem(n.saveKey)}},e.$updateDayData=function(t){for(var e,n=r(this.list);!(e=n()).done;){var o=e.value;o.obj.updateDayData&&o.obj.updateDayData(o.key,t),this.updateDayDataCaches[o.key]=!0}this.isNeedUpdateDayData=!0},e.updateWeekData=function(){for(var t,e=r(this.list);!(t=e()).done;){var n=t.value;n.obj.updateWeekData&&n.obj.updateWeekData(n.key)}},e.loadAll=function(){for(var t,e=r(this.list);!(t=e()).done;){var n,o=t.value;o.isAuto&&(n=this.$load(o.saveKey),o.obj.setMemento(n,o.key))}Log.trace("\u52a0\u8f7d\u5b58\u6863\u6210\u529f!")},e.$load=function(t){var e=cc.sys.localStorage.getItem(t);if(e)try{return JSON.parse(e)}catch(a){return cc.sys.localStorage.removeItem(t),Log.error("\u52a0\u8f7d\u672c\u5730\u6587\u4ef6:"+t+", \u89e3\u6790\u7684\u5185\u5bb9:"+e+" \u51fa\u9519!!!!",a),null}return null},e.createMemento=function(){return this._saveInfo},e.setMemento=function(t){var e,n;t?(isNaN(t.timezoneOffset)&&(t.timezoneOffset=6e4*(new Date).getTimezoneOffset()),this._saveInfo=t):(n=s.default.DateUtils.Now(),e=6e4*(new Date).getTimezoneOffset(),t=Math.floor((n-e)/1e3/60/60/24),n=Math.floor((t+3)/7),this._saveInfo={day:t,week:n,timezoneOffset:e}),s.default.DateUtils.setTimezoneOffset(this._saveInfo.timezoneOffset)},e.load=function(t){var e,n=this.map[t];n&&(e=this.$load(n.saveKey),n.obj.setMemento(e,t),this.isNeedUpdateDayData&&!this.updateDayDataCaches[t]&&(this.updateDayDataCaches[t]=!0,n.obj.updateDayData&&n.obj.updateDayData(t,this._saveInfo.day)))},t}(),(c=c.ZHANGAIWU_OPERTYPE||(c.ZHANGAIWU_OPERTYPE={}))[c.CLOSE=0]="CLOSE",c[c.NEED_CLOSE=-1]="NEED_CLOSE",c[c.NEED_OPEN=-2]="NEED_OPEN",c[c.OPEN=-3]="OPEN",c[c.BUY=-4]="BUY",cc._RF.pop()},{}],SceneConst:[function(t,e,n){"use strict";cc._RF.push(e,"b1c0bNCPhVJuqDbk8/md1Lq","SceneConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.SceneTag=void 0,(r=r.SceneTag||(r.SceneTag={})).LOGIN="LoginScene",r.GAME="GameScene",cc._RF.pop()},{}],SceneManager:[function(t,e,n){"use strict";cc._RF.push(e,"d5129+s2UxHK75e5AYI49Hj","SceneManager");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.SceneManager=void 0,r.SceneManager=function(){function t(){this._sceneName="",this.isFirstScene=!0}var e=t.prototype;return e.runScene=function(t,e){this._sceneName=t,cc.director.preloadScene(t,e,this.onScenePreload.bind(this))},e.preLoadScene=function(t,e,n){cc.director.preloadScene(t,e,n)},e.onScenePreload=function(){cc.director.loadScene(this._sceneName)},e.onSceneLoad=function(){this._currScene&&this._currScene.onExit();var t=cc.find("Canvas");this._currScene=t.getComponent(this._sceneName)},e.getCurrScene=function(){return this._currScene},e.getSceneId=function(){return this._sceneName},t}(),cc._RF.pop()},{}],ScrollWithPage:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3521a0+PnJOUaEjabKifi/z","ScrollWithPage");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("ItemRenderer"),s=cc._decorator,u=s.ccclass,l=s.property;s.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemRender=null,e._curPageIdx=0,e._lastPageIdx=0,e.pageTurningSpeed=.3,e.scrollThreshold=.5,e.autoPageTurningThreshold=100,e.pages=null,e.scaleCenterDist=10,e.scaleMin=.7,e.alphaMin=127.5,e.items=[],e.itemsPool=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){var e=this;this.pages=t,this.itemRendererClass=this.itemRendererClass||c.default,this.items.map(function(t){t.removeFromParent(!1),e.itemsPool.push(t)}),this.items=[],this.pages.map(function(t){var n=null;0<e.itemsPool.length?(n=e.itemsPool[0],e.itemsPool.splice(0,1)):n=cc.instantiate(e.itemRender),e.items.push(n),n.y=0,e.content.addChild(n),n.getComponent(e.itemRendererClass).setData(t)}),this.node.width=this.itemRender.width,this.updatePageView()},i.updatePageView=function(){var t=this.content.getComponent(cc.Layout);t&&t.enabled&&t.updateLayout(),t=this.pages.length,this._curPageIdx>=t&&(this._curPageIdx=0===t?0:t-1,this._lastPageIdx=this._curPageIdx)},i.setCurrentPageIndex=function(t){this.scrollToPage(t,void 0)},i.scrollToPage=function(t,e){t<0||t>=this.pages.length||(e=void 0!==e?e:.3,this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0))},i.getCurrentPage=function(){return this._curPageIdx},i.getCurrentPageData=function(){return this.pages[this._curPageIdx]},i.onEnable=function(){this.registerEvent(),t.prototype.onEnable.call(this)},i.onDisable=function(){this.unregisterEvent(),t.prototype.onDisable.call(this)},i._moveOffsetValue=function(t){var e=cc.v2(0,0),n=this.content.getComponent(cc.Layout);return e.x=t*(this.node.width+n.spacingX),e},i.registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on("scroll-ended-with-threshold",this.dispatchPageTurningEvent,this),this.node.on("scrolling",this.onScrolling,this)},i.unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off("scroll-ended-with-threshold",this.dispatchPageTurningEvent,this),this.node.off("scrolling",this.onScrolling,this)},i.getDragDirection=function(t){return 0===t.x?0:0<t.x?1:-1},i.dispatchPageTurningEvent=function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,this.node.emit("page-turning",this))},i.isScrollable=function(t){return Math.abs(t.x)>=this.node.width*this.scrollThreshold},i.isQuicklyScrollable=function(t){return Math.abs(t.x)>this.autoPageTurningThreshold},i.autoScrollToPage=function(){var t=this._startBounceBackIfNeeded(),e=this._touchBeganPosition.sub(this._touchEndPosition);if(t)0!==(r=this.getDragDirection(e))&&(this._curPageIdx=0<r?this.pages.length-1:0);else{var n=this._curPageIdx,r=(t=n+this.getDragDirection(e),this.pageTurningSpeed*Math.abs(n-t));if(t<this.pages.length){if(this.isScrollable(e,n,t))return void this.scrollToPage(t,r);if(e=this._calculateTouchMoveVelocity(),this.isQuicklyScrollable(e))return void this.scrollToPage(t,r)}this.scrollToPage(n,r)}},i._handleReleaseLogic=function(){this.autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent("scroll-ended"))},i._onTouchBegan=function(e,n){this._touchBeganPosition=e.touch.getLocation(),t.prototype._onTouchBegan.call(this,e,n),this.node.emit("startScroll",this)},i._onTouchMoved=function(e,n){t.prototype._onTouchMoved.call(this,e,n)},i._onTouchEnded=function(e,n){this._touchEndPosition=e.touch.getLocation(),t.prototype._onTouchEnded.call(this,e,n)},i._onTouchCancelled=function(e,n){this._touchEndPosition=e.touch.getLocation(),t.prototype._onTouchCancelled.call(this,e,n)},i.emitItems=function(t,e,n,r,o,i){this.items.map(function(a){a.emit(t,e,n,r,o,i)})},i.onScrolling=function(){var t=this;this.items.map(function(e){var n,r,o,i,a;e.isValid&&(a=e.getComponent(t.itemRendererClass),n=t.node.convertToNodeSpaceAR(e.convertToWorldSpaceAR(e.position)),i=t.content.getComponent(cc.Layout),o=(a.data.id-1)*(t.node.width+i.spacingX)-t.content.width/2+t.node.width/2,r=1,a=255,o=Math.abs(n.x-o),i=t.node.width+i.spacingX,a=o<=t.scaleCenterDist?(r=1,255):i<=o?(r=t.scaleMin,t.alphaMin):(r=t.scaleMin+(1-t.scaleMin)/i*(i-o),t.alphaMin+(255-t.alphaMin)/i*(i-o)),e.scale=r,e.opacity=a)})},o}(cc.ScrollView),o([l(cc.Node)],i.prototype,"itemRender",void 0),i=o([u],i),a.default=i,cc._RF.pop()},{}],Sequence:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"69ccdbmAFFIiKro+PddHOqJ","Sequence");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Composite");i.default=function(t){var e,n;function o(e){var n=(void 0===e?{}:e).children,r=void 0===n?[]:n;return t.call(this,{name:"Sequence",children:r})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(t){for(var e=0;e<this.children.length;e++){var n=this.children[e]._execute(t);if(n!==a.SUCCESS)return n}return a.SUCCESS},o}(c.default),cc._RF.pop()},{}],SettingIcon:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"88460fuqe1K26sBFIo0fiQ3","SettingIcon");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App");i=i([(o("ViewConst"),cc._decorator).ccclass],i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.onTouchSetting=function(){c.default.ViewManager.open(8)},o}(cc.Component)),a.default=i,cc._RF.pop()},{}],SettingManager:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"890ba77Ys5FabeZHGjgtNFr","SettingManager");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App");(function(){if(null==cc._decorator)throw new TypeError("Cannot destructure undefined")})(),i.default=function(){function t(){this.saveKey="SettingManager",a.default.SaveManage.add(this,this.saveKey,!1,!0),a.default.SaveManage.load(this.saveKey)}var e,n,o=t.prototype;return o.createMemento=function(){return this._saveData},o.setMemento=function(t){t?this._saveData=t:(this._saveData={autoCollection:1,overlapJudgeInCamp:0,recursionSyntheticInCamp:0,petFiveCompose:0,isBonusOver:0,confirmUse:0,highFrame:1},cc.sys.platform===cc.sys.WECHAT_GAME&&(cc.sys.os===cc.sys.OS_IOS||wx.getSystemInfoSync().benchmarkLevel<20)&&(this._saveData.highFrame=0))},o.save=function(){a.default.SaveManage.save(this.saveKey)},e=t,(n=[{key:"recursionSyntheticInCamp",get:function(){return this._saveData.recursionSyntheticInCamp},set:function(t){this._saveData.recursionSyntheticInCamp=t}},{key:"overlapJudgeInCamp",get:function(){return this._saveData.overlapJudgeInCamp},set:function(t){this._saveData.overlapJudgeInCamp=t}},{key:"autoCollection",get:function(){return this._saveData.autoCollection},set:function(t){this._saveData.autoCollection=t}},{key:"petFiveCompose",get:function(){return this._saveData.petFiveCompose},set:function(t){this._saveData.petFiveCompose=t}},{key:"isBonusOver",get:function(){return this._saveData.isBonusOver},set:function(t){this._saveData.isBonusOver=t}},{key:"confirmUse",get:function(){return this._saveData.confirmUse},set:function(t){this._saveData.confirmUse=t}},{key:"highFrame",get:function(){return this._saveData.highFrame},set:function(t){(this._saveData.highFrame=t)?cc.game.setFrameRate(60):cc.game.setFrameRate(30)}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],SettingView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6c18c89uo9Ni5oFgmjxIkIt","SettingView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=cc._decorator,l=u.ccclass,h=u.property;u.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).versionLab=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){t.prototype.open.call(this)},i.initUI=function(){t.prototype.initUI.call(this),this.versionLab.string="id:"+c.default.GameDataMsr.playerInfo.id+"    "+c.default.Platform.getVersionStr()},o}(s.default),o([h(cc.Label)],i.prototype,"versionLab",void 0),i=o([l],i),a.default=i,cc._RF.pop()},{}],ShockUtils:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"fa9fbcIf3hBX6TqSwagU0cZ","ShockUtils");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("App");i.default=function(){function t(){this.MAP=0,this.SPRITE=1,this.mapPoss=[new cc.Vec2(0,3),new cc.Vec2(0,0),new cc.Vec2(0,-2)],this.spritePoss=[new cc.Vec2(5,-5),new cc.Vec2(-5,5),new cc.Vec2(5,0)],this._shockLength=0,this._shockCount=0,this._rx=0,this._ry=0,this._type=0,this._repeatCount=0}var e,n,o=t.prototype;return o.destroy=function(){this.stop()},o.shock=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===n&&(n=3),this._target||(this._type=t,this._target=e,this._type==this.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==this.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length),this.start(n))},o.start=function(t){void 0===t&&(t=1),this.repeatCount=t,this._shockCount=0,this._target&&(this._type!=this.MAP&&(this._rx=this._target.x),this._ry=this._target.y,a.default.TimerManager.doFrame(1,0,this.onShockEnter,this))},o.stop=function(){this._target&&(this._type!=this.MAP&&(this._target.x=this._rx),this._target.y=this._ry,a.default.TimerManager.remove(this.onShockEnter,this)),this._target=null},o.onShockEnter=function(){var t=this._shockLength*this._repeatCount;this._shockCount>=t?this.stop():(t=this._shockCount%this._shockLength,t=this._shockPoss[t],this._target&&(this._type!=this.MAP&&(this._target.x=this._rx+t.x),this._target.y=this._ry+t.y),this._shockCount++)},e=t,(n=[{key:"repeatCount",get:function(){return this._repeatCount},set:function(t){this._repeatCount=t}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],ShopAdBoxLvTipView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"fa3e3z1pmBAjaM8FiPSfpf6","ShopAdBoxLvTipView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("SwitchFrame"),s=i("BaseView"),u=cc._decorator,l=u.property,h=u.ccclass,f=u.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).item=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(e){t.prototype.open.call(this);var n=e.data.suitcaseUpgrade;this.item.parent.height=110*n.length;for(var r=e.getCurSuitcaseUpgradeCfg().level-1,o=0;o<n.length;o++){var i=null;0===o?i=this.item:(i=cc.instantiate(this.item),this.item.parent.addChild(i)),i.y=110*-o;var a=i.getComponentsInChildren(cc.Label);a[0].string="Lv."+n[o].level,a[1].string=n[o].grade_1+"%",a[2].string=n[o].grade_2+"%",i.getComponent(c.default).frameIndex=r===o?1:0}},o}(s.default),o([l(cc.Node)],i.prototype,"item",void 0),i=o([h,f("view/Shop/ShopAdBoxLvTipView")],i),a.default=i,cc._RF.pop()},{}],ShopBankItem:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"7188eiZmOhGoYrWF+NmXATz","ShopBankItem");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.ShopBankItem=void 0;var u=a("App"),l=a("GameText"),h=a("EffectUtils"),f=a("ControllerConst"),d=a("NotificationConst"),p=(a("ViewConst"),a("BagController")),y=a("GlobalAttr"),v=a("ShopConst"),g=cc._decorator,m=g.property,_=g.ccclass,b=g.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).ani=null,e.arrowAni=null,e.bubbleAni=null,e.targetNode=null,e.diamondLab=null,e.priceLab=null,e.progressBar=null,e.minLab=null,e.maxLab=null,e.btnNode=null,e.tipLab=null,e.isUpgradeView=!1,e.showFullAniTime=0,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.onLoad=function(){this.priceLab&&(this.priceLab.string=u.default.Platform.getPrice("shop_bank"));var t=y.default.ins.define;this.minLab&&(this.minLab.string=""+t.piggybank_purchase_min_count),this.maxLab&&(this.maxLab.string=""+t.piggybank_full_count),this.isUpgradeView&&(u.default.NotificationCenter.addListener(d.NotificationConst.STAGE_UPGRADE_UPDATE,this.onStageUpgradeUpdate,this),u.default.NotificationCenter.addListener(d.NotificationConst.PAY_SUCCESS,this.onPaySuccess,this))},a.onEnable=function(){this.updateUI(),this.arrowAni&&(this.arrowAni.node.active=!1),this.bubbleAni&&(this.bubbleAni.node.children[0].active=!1,this.bubbleAni.node.active=!1),this.showFullAniTime=0},a.onDisable=function(){u.default.NotificationCenter.removeAll(this)},a.onPaySuccess=function(){u.default.TimerManager.doFrame(3,1,this.updateUI,this)},a.onStageUpgradeUpdate=function(t,e){var n=this;if(e){var r=u.default.ViewManager.uiRoot;e=r.convertToNodeSpaceAR(e);var o=this.targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO);o=r.convertToNodeSpaceAR(o),h.default.instance.playMoneyAni(e,o,p.CostType.diamond,r,y.default.ins.define.piggybank_get_count,function(){n.ani&&(u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,v.ShopConst.GET_BANK_DIAMOND)>=y.default.ins.define.piggybank_purchase_min_count?n.updateUI():(n.ani.play("work"),n.ani.once(cc.Animation.EventType.FINISHED,n.updateUI,n)))})}},a.updateUI=function(){var t=u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,v.ShopConst.GET_BANK_DIAMOND);this.diamondLab.string=""+t;var e=y.default.ins.define;this.progressBar.progress=t/e.piggybank_full_count;var n=t>=e.piggybank_purchase_min_count,r=t>=e.piggybank_full_count;this.btnNode.active=n,this.tipLab&&(this.tipLab.node.active=!n||this.isUpgradeView,this.tipLab.string=r?l.GameText.getText(94):l.GameText.getText(93)),t==e.piggybank_full_count?(this.ani.play("full"),this.playFullAni()):this.ani.play("idle")},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,v.ShopConst.BUY_BANK);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.updateUI();case 5:case"end":return t.stop()}},t,this)}))},a.onTouchOpen=function(){u.default.ViewManager.open(41)},a.playFullAni=function(){this.isUpgradeView&&!this.showFullAniTime&&(this.arrowAni.node.active=!0,this.bubbleAni.node.active=!0,this.arrowAni.play("idle"),this.bubbleAni.play("idle")),this.showFullAniTime=5},a.update=function(t){this.isUpgradeView&&(this.showFullAniTime-=t,this.showFullAniTime<=0&&(this.arrowAni.node.active=!1,this.bubbleAni.node.children[0].active=!1,this.bubbleAni.node.active=!1,this.showFullAniTime=0))},i}(cc.Component),i([m(cc.Animation)],a.prototype,"ani",void 0),i([m(cc.Animation)],a.prototype,"arrowAni",void 0),i([m(cc.Animation)],a.prototype,"bubbleAni",void 0),i([m(cc.Node)],a.prototype,"targetNode",void 0),i([m(cc.Label)],a.prototype,"diamondLab",void 0),i([m(cc.Label)],a.prototype,"priceLab",void 0),i([m(cc.ProgressBar)],a.prototype,"progressBar",void 0),i([m(cc.Label)],a.prototype,"minLab",void 0),i([m(cc.Label)],a.prototype,"maxLab",void 0),i([m(cc.Node)],a.prototype,"btnNode",void 0),i([m(cc.Label)],a.prototype,"tipLab",void 0),i([m(cc.Boolean)],a.prototype,"isUpgradeView",void 0),a=i([_,b("view/Shop/ShopBankItem")],a),c.ShopBankItem=a,cc._RF.pop()},{}],ShopBankView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d5c226nqI9PTJlBXtMB3k0N","ShopBankView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.ShopBankView=void 0;var u=a("App"),l=a("BaseView"),h=a("ControllerConst"),f=a("ShopConst"),d=cc._decorator,p=d.ccclass;d.menu,a=i([p],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(){t.prototype.open.call(this)},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,f.ShopConst.BUY_BANK);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.onTouchClose();case 5:case"end":return t.stop()}},t,this)}))},i}(l.default)),c.ShopBankView=a,cc._RF.pop()},{}],ShopBoxItem:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4b149vauHBLronzw1M2NbrV","ShopBoxItem");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.ShopBoxItem=void 0;var u=a("App"),l=a("GameText"),h=a("ControllerConst"),f=(a("ViewConst"),a("ADController"),a("ADManageBase"),a("BagConst")),d=a("ShopConst"),p=a("ShopItem"),y=cc._decorator,v=y.property,g=y.ccclass,m=y.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).title=null,e.descLab=null,e.costIcon=null,e.adBtn=null,e.adLab=null,e.progressBar=null,e.progessLab=null,e.adCoolTimeLab=null,e.adCoolTime=null,e.item=null,e.tempTime=0,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initItem=function(){this.item=u.default.ControllerManager.applyFunc(h.ControllerConst.Item,f.BagConst.GET_ITEM,this.data.cfg.itemId),this.title.string=l.GameText.getTextByStr(this.item.data.name),this.data.cfg.diamond&&(this.costLab.string=this.data.cfg.diamond.toString()),this.updateItem(),this.updateAdState()},a.updateItem=function(){var t,e,n,r;this.data&&this.data.cfg.ad?(n=u.default.ControllerManager.applyFunc(h.ControllerConst.AD,4,7),e=u.default.ControllerManager.applyFunc(h.ControllerConst.AD,3,7),n.freeCnt>=e.freeCnt&&(this.adLab.string=e.adTimes-n.adCnt+"/"+e.adTimes,n.adCnt||(this.data.time=0)),t=this.item.getUseCnt(),n=(e=this.item.getCurSuitcaseUpgradeCfg()).level,this.title.string="Lv."+n+" "+l.GameText.getTextByStr(this.item.data.name)+" ",0<e.upgrade_count?(r=e.upgrade_count,this.progessLab.string=t+" /"+r,this.progressBar.progress=t/r):(this.progessLab.node.active=!1,this.progressBar.progress=1)):this.item&&(this.item.cnt?(this.costIcon.active=!1,this.costLab.string=this.item.cnt+"/1"):(this.costIcon.active=!0,this.costLab.string=this.data.cfg.diamond.toString()),this.descLab)&&(r=this.item.getRuleByKey(f.CostumeItemRuleKey.NORMAL),this.descLab.string=""+(r.cnt-this.item.getSpecialRuleCnt(f.CostumeItemRuleKey.NORMAL)))},a.updateTime=function(){var t=u.default.DateUtils.Now();if(this.adCoolTime){var e=this.adCoolTime-t;e<0&&(e=0,this.adCoolTime=0,this.updateAdState()),this.adCoolTimeLab.string="\u4e0b\u4e00\u6b21\u5e7f\u544a\u5956\u52b1:\n"+u.default.DateUtils.getFormatBySecond(e/1e3,10)}},a.update=function(t){this.adCoolTime&&(this.tempTime-=t,this.tempTime<=0&&(this.tempTime=.5,this.updateTime()))},a.updateAdState=function(){var t,e;this.data.cfg.ad&&(t=u.default.ControllerManager.applyFunc(h.ControllerConst.AD,5,7),u.default.DateUtils.secondNow()<(e=this.data.cfg.ad+this.data.time)&&t?(this.adCoolTime=1e3*e,this.adBtn.node.active=!1,this.adCoolTimeLab.node.active=!0):(this.adBtn.node.active=t,this.adCoolTimeLab.node.active=!1))},a.onTouchUseBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,d.ShopConst.USE,this.data),this.updateItem(),this.updateAdState();case 1:case"end":return t.stop()}},t,this)}))},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.item.cnt){t.next=4;break}u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,d.ShopConst.USE,this.data),t.next=6;break;case 4:return t.next=6,u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,d.ShopConst.BUY,this.data,7);case 6:this.updateItem(),this.updateAdState();case 8:case"end":return t.stop()}},t,this)}))},a.onTouchTip=function(){u.default.ViewManager.open(30,this.item)},i}(p.ShopItem),i([v(cc.Label)],a.prototype,"title",void 0),i([v(cc.Label)],a.prototype,"descLab",void 0),i([v(cc.Node)],a.prototype,"costIcon",void 0),i([v(cc.Button)],a.prototype,"adBtn",void 0),i([v(cc.Label)],a.prototype,"adLab",void 0),i([v(cc.ProgressBar)],a.prototype,"progressBar",void 0),i([v(cc.Label)],a.prototype,"progessLab",void 0),i([v(cc.Label)],a.prototype,"adCoolTimeLab",void 0),a=i([g,m("view/Shop/item/ShopBoxItem")],a),c.ShopBoxItem=a,cc._RF.pop()},{}],ShopBuffItem:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2d68aR8fzpHnKVX/iqLwy6J","ShopBuffItem");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.ShopBuffItem=void 0;var u=a("App"),l=a("GameText"),h=a("AdShareBtnCtr"),f=a("ControllerConst"),d=a("NotificationConst"),p=(a("ViewConst"),a("BagConst")),y=a("BagController"),v=a("BuffMgr"),g=a("MyBigLong"),m=a("ShopConst"),_=a("ShopItem"),b=cc._decorator,w=b.property,C=b.ccclass,S=b.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).title=null,e.descLab=null,e.buffTimeNode=null,e.buffTimeLab=null,e.adShareBtnCtr=null,e.adBtn=null,e.adNode=null,e.coolNode=null,e.coolTimeLab=null,e.costBtn=null,e.adCoolTime=0,e.buffEndTime=0,e.buffIndex=0,e.item=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initItem=function(){var t;this.item=u.default.ControllerManager.applyFunc(f.ControllerConst.Item,p.BagConst.GET_ITEM,this.data.cfg.itemId),u.default.CommonUtils.setSpriteFrame(this.item.getItemPic(),this.icon),this.title.string=l.GameText.getTextByStr(this.item.data.name),this.buffIndex=this.item.data.buff?this.item.data.buff.buffIndex:0,this.data.cfg.ad&&(this.adShareBtnCtr.adType=this.data.cfg.arg0),this.updateBtnState(),this.item.data.buff?this.descLab.string=l.GameText.getTextByStr(this.item.data.desc):(t=this.item.getCnt(),this.node.active=!!t,this.descLab.string=l.GameText.getText(63).format(g.default.toString(t)))},a.updateBtnState=function(){var t;this.data.cfg.ad?(this.adBtn.node.active=!0,this.costBtn.active=!1,t=u.default.DateUtils.secondNow(),t=this.data.time+this.data.cfg.ad>t,this.adBtn.interactable=!t,this.adNode.active=!t,(this.coolNode.active=t)&&(this.adCoolTime=1e3*(this.data.time+this.data.cfg.ad))):(this.adBtn.node.active=!1,this.costBtn.active=!0,this.costLab.string=this.data.cfg.diamond.toString())},a.updateTime=function(){var t=u.default.DateUtils.Now();if(this.buffEndTime){var e=(this.buffEndTime-t)/1e3;e<0?(e=0,this.buffEndTime=0,this.buffTimeLab.node.active=!1,this.buffTimeNode.active=!1):(this.buffTimeLab.node.active=!0,this.buffTimeNode.active=!0,this.buffTimeLab.string=u.default.DateUtils.getFormatBySecond(e,10))}if(this.adCoolTime){var n=(this.adCoolTime-t)/1e3;n<0?(n=0,this.adCoolTime=0,this.updateBtnState()):this.coolTimeLab.string=u.default.DateUtils.getFormatBySecond(n,10)}},a.updateBuffState=function(){var t=v.default.ins.getGlobalBuffByIndex(this.buffIndex);t&&t.buffEndTime&&(this.buffEndTime=t.buffEndTime)},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,m.ShopConst.BUY,this.data,this.adShareBtnCtr.adType);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.updateBuffState(),this.updateBtnState(),this.item.data.buff?u.default.ViewManager.open(31,this.item):(e=this.item.getCnt(),n=this.costBtn.convertToWorldSpaceAR(cc.Vec2.ZERO),u.default.NotificationCenter.dispatch(d.NotificationConst.PLAY_MONEY_ANI,y.CostType.coin,e,n));case 5:case"end":return t.stop()}},t,this)}))},i}(_.ShopItem),i([w(cc.Label)],a.prototype,"title",void 0),i([w(cc.Label)],a.prototype,"descLab",void 0),i([w(cc.Node)],a.prototype,"buffTimeNode",void 0),i([w(cc.Label)],a.prototype,"buffTimeLab",void 0),i([w(h.default)],a.prototype,"adShareBtnCtr",void 0),i([w(cc.Button)],a.prototype,"adBtn",void 0),i([w(cc.Node)],a.prototype,"adNode",void 0),i([w(cc.Node)],a.prototype,"coolNode",void 0),i([w(cc.Label)],a.prototype,"coolTimeLab",void 0),i([w(cc.Node)],a.prototype,"costBtn",void 0),a=i([C,S("view/Shop/item/ShopBuffItem")],a),c.ShopBuffItem=a,cc._RF.pop()},{}],ShopBuffViewIcon:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e434fhpVvdCF6CXpnw7QOpE","ShopBuffViewIcon");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseView"),u=(i("ViewConst"),i("TimeCom")),l=cc._decorator,h=l.property,f=l.ccclass,d=l.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).item=null,e.content=null,e.arrow=null,e.rePoint=null,e.isPlayIng=!1,e.controller=null,e.bgType=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this),this.itemMap=new Map},i.open=function(){t.prototype.open.call(this)},i.updateBuffItem=function(t,e){if(!this.itemMap.has(e.buffIndex)){var n=cc.instantiate(this.item);this.content.addChild(n),n.y=30*this.itemMap.size+50,this.itemMap.set(e.buffIndex,n.getComponent(u.TimeCom)),this.itemMap.get(e.buffIndex).setIcon(t),this.content.height=30*this.itemMap.size+50}this.itemMap.get(e.buffIndex).setTime(e.buffEndTime),this.arrow.active=!0,this.rePoint.active=!1,this.content.active&&this.hideItem()},i.updateTime=function(t){var e=this;this.itemMap&&(this.itemMap.forEach(function(n,r){n.updateTime(t)&&(n.node.removeFromParent(),n.destroy(),e.itemMap.delete(r))}),this.itemMap.size||(this.rePoint.active=!0,this.arrow.active=!1))},i.showItem=function(){var t=this,e=30*this.itemMap.size+48;this.isPlayIng=!0,this.arrow.scaleY=-1,cc.tween(this.arrow).to(.1,{y:e}).call(function(){t.content.active=!0,t.isPlayIng=!1}).start()},i.hideItem=function(){var t=this;this.isPlayIng=!0,this.content.active=!1,this.arrow.scaleY=1,cc.tween(this.arrow).to(.1,{y:48}).call(function(){t.isPlayIng=!1}).start()},i.onTouchIcon=function(){c.default.ViewManager.open(28)},i.onTouchArrow=function(){this.isPlayIng||(this.content.active?this.hideItem():this.showItem())},o}(s.default),o([h(cc.Prefab)],i.prototype,"item",void 0),o([h(cc.Node)],i.prototype,"content",void 0),o([h(cc.Node)],i.prototype,"arrow",void 0),o([h(cc.Node)],i.prototype,"rePoint",void 0),i=o([f,d("view/Shop/ShopBuffViewIcon")],i),a.default=i,cc._RF.pop()},{}],ShopBuffView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8eaf4GPprJGYIGykxornIdd","ShopBuffView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("BaseView"),s=i("ShopConst"),u=i("ShopBuffItem"),l=cc._decorator,h=l.property,f=l.ccclass,d=l.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).content=null,e.item=null,e.controller=null,e.bgType=1,e.shopItems=[],e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this);for(var e=this.controller.model.shopItemDatas[s.ShopType.BUFF],n=0;n<e.length;n++){this.shopItems||(this.shopItems=[]);var r=cc.instantiate(this.item);this.content.addChild(r);var o=r.getComponent(u.ShopBuffItem);o.setData(e[n]),o.showItem(),this.shopItems.push(o)}this.item.destroy()},i.open=function(){t.prototype.open.call(this),this.shopItems.forEach(function(t){t.updateBuffState()})},i.updateTime=function(t){this.shopItems.forEach(function(e){e.updateTime(t)})},o}(c.default),o([h(cc.Node)],i.prototype,"content",void 0),o([h(cc.Node)],i.prototype,"item",void 0),i=o([f,d("view/Shop/ShopBuffView")],i),a.default=i,cc._RF.pop()},{}],ShopConst:[function(t,e,n){"use strict";cc._RF.push(e,"275808xol9Ns6L09/sHSY78","ShopConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ShopConst=o.ShopGiftType=o.ShopType=void 0,(r=o.ShopType||(o.ShopType={}))[r.Diamond=0]="Diamond",r[r.BOX=1]="BOX",r[r.BANK=2]="BANK",r[r.BUFF=3]="BUFF",r[r.GIFT=4]="GIFT",r[r.REMOVE_AD_GIFT=5]="REMOVE_AD_GIFT",r[r.ONCE_GIFT=6]="ONCE_GIFT",(r=o.ShopGiftType||(o.ShopGiftType={}))[r.FIRST_GIFT=0]="FIRST_GIFT",r[r.REMOVE_AD_GIFT=1]="REMOVE_AD_GIFT",r[r.ONCE_GIFT=2]="ONCE_GIFT",(o=o.ShopConst||(o.ShopConst={}))[o.BUY=0]="BUY",o[o.USE=1]="USE",o[o.GET_ITEM_DATA_BY_TYPE=2]="GET_ITEM_DATA_BY_TYPE",o[o.GET_FIRST_GIFT=3]="GET_FIRST_GIFT",o[o.FIRST_GIFT_IS_FINISH=4]="FIRST_GIFT_IS_FINISH",o[o.IS_BUY_REMOVE_AD=5]="IS_BUY_REMOVE_AD",o[o.GET_BANK_DIAMOND=6]="GET_BANK_DIAMOND",o[o.BUY_BANK=7]="BUY_BANK",cc._RF.pop()},{}],ShopContent:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3ec1bj0ijdMRIREKGtTnlob","ShopContent");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0}),u.ShopContent=void 0;var l=s("ShopItem"),h=cc._decorator,f=h.property,d=h.ccclass,p=h.menu;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).itemPre=null,e.content=null,e.items=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.setData=function(t){this.items=[],this.datas=t},i.initContent=function(){if(this.itemPre)for(var t,e=r(this.datas);!(t=e()).done;){var n=t.value,o=cc.instantiate(this.itemPre);this.content.addChild(o);var i=o.getComponent(l.ShopItem);i.setData(n),this.items.push(i)}else for(var a=this.content.children,c=0;c<a.length;c++){var s=a[c].getComponent(l.ShopItem);s&&(s.setData(this.datas[c]),this.items.push(s))}},i.updateUI=function(){for(var t,e=r(this.items);!(t=e()).done;)t.value.updateItem()},i.updateTime=function(t){for(var e,n=r(this.items);!(e=n()).done;)e.value.updateTime(t)},i.showContent=function(){for(var t,e=r(this.items);!(t=e()).done;)t.value.showItem()},i.hideContent=function(){for(var t,e=r(this.items);!(t=e()).done;)t.value.hideItem()},o}(cc.Component),c([f(cc.Prefab)],s.prototype,"itemPre",void 0),c([f(cc.Node)],s.prototype,"content",void 0),s=c([d,p("view/Shop/ShopContent")],s),u.ShopContent=s,cc._RF.pop()},{}],ShopController:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3eed6u8w6dPEKtFJJ9A0Nep","ShopController");var l=t,h=n,f=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(h,"__esModule",{value:!0});var d=l("App"),p=l("BaseController"),y=l("Toast"),v=l("ControllerConst"),g=l("NotificationConst"),m=(l("ViewConst"),l("LayerManager"),l("ADManageBase"),l("BagConst")),_=l("BagController"),b=l("CostumeController"),w=l("BuffMgr"),C=l("GameConst"),S=l("GlobalAttr"),O=l("CurrencyService"),T=l("SystemOpenConst"),I=l("ShopConst"),E=l("ShopModle");h.default=function(t){var e,n;function i(){var e;return(e=t.call(this)||this).shopView=null,e.shopBuffView=null,e.shopBuffViewIcon=null,e.shopOpenBoxView=null,e.shopViewIcon=null,e._model=null,e.neddOpenCnt=4,d.default.ViewManager.register(7,{dir:"shop",prefabName:"ShopView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(28,{dir:"shop",prefabName:"ShopBuffView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(29,{dir:"shop",prefabName:"ShopBuffViewIcon",zIndex:50,controller:s(e)}),d.default.ViewManager.register(30,{dir:"shop",prefabName:"ShopAdBoxLvTipView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(32,{dir:"shop",prefabName:"ShopOpenBoxView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(39,{dir:"shop",prefabName:"ShopViewIcon",zIndex:50,controller:s(e)}),d.default.ViewManager.register(40,{dir:"shop",prefabName:"ShopFirstView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(41,{dir:"shop",prefabName:"ShopBankView",zIndex:100,controller:s(e)}),d.default.ViewManager.register(53,{dir:"shop",prefabName:"ShopRemoveAdView",zIndex:100,controller:s(e)}),e._model=new E.default(s(e)),e._model.init(),e.initModleFunc(),e.initModleEvent(),e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,u(e,n);var a,l,h=i.prototype;return h.initModleFunc=function(){this.registerFunc(I.ShopConst.BUY,this.shopBuy,this),this.registerFunc(I.ShopConst.USE,this.shopUse,this),this.registerFunc(I.ShopConst.GET_FIRST_GIFT,this.getFirstGift,this),this.registerFunc(I.ShopConst.GET_ITEM_DATA_BY_TYPE,this.getItemConfigsBuytype,this),this.registerFunc(I.ShopConst.FIRST_GIFT_IS_FINISH,this.firstGiftIsFinish,this),this.registerFunc(I.ShopConst.IS_BUY_REMOVE_AD,this.isBuyRemoveAd,this),this.registerFunc(I.ShopConst.GET_BANK_DIAMOND,this.getBankDiamond,this),this.registerFunc(I.ShopConst.BUY_BANK,this.buyBank,this)},h.initModleEvent=function(){d.default.NotificationCenter.addListener(g.NotificationConst.INIT_GAME,this.onInitGame,this,200),d.default.NotificationCenter.addListener(C.GameNotificationConst.UPDATE_BUFF,this.onUpdateBuff,this),d.default.NotificationCenter.addListener(C.GameNotificationConst.ADD_ITEM,this.onAddItem,this)},h.onStageUpgradeUpdate=function(){var t=S.default.ins.define;this._model.savaData.bankDiamond+=t.piggybank_get_count,this._model.savaData.bankDiamond>t.piggybank_full_count&&(this._model.savaData.bankDiamond=t.piggybank_full_count)},h.onInitGame=function(){d.default.NotificationCenter.addListener(g.NotificationConst.SYS_OPEN,this.onCheckOpen,this)},h.onCheckOpen=function(t,e){e&&(t==T.OpenTypeConst.BUFF?(d.default.ViewManager.open(29),this.neddOpenCnt--):t==T.OpenTypeConst.SHOP?(d.default.ViewManager.open(39),this.neddOpenCnt--):t==T.OpenTypeConst.FIRST_GIFT?(this.model.isFirstShowFirstGift()&&d.default.ViewManager.open(40),this.neddOpenCnt--):t==T.OpenTypeConst.BANK&&(d.default.NotificationCenter.addListener(g.NotificationConst.STAGE_UPGRADE_UPDATE,this.onStageUpgradeUpdate,this),this.neddOpenCnt--),this.neddOpenCnt||d.default.NotificationCenter.removeListener(g.NotificationConst.SYS_OPEN,this.onCheckOpen,this))},h.onUpdateBuff=function(){for(var t,e=o(this._model.shopItemDatas[I.ShopType.BUFF]);!(t=e()).done;){var n,r=t.value,i=d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.GET_ITEM,r.cfg.itemId);!i.data.buff||(n=w.default.ins.getGlobalBuffByIndex(i.data.buff.buffIndex))&&n.buffEndTime&&this.shopBuffViewIcon&&this.shopBuffViewIcon.updateBuffItem(i.getItemPic(),n)}},h.onAddItem=function(t){for(var e,n=o(this._model.shopItemDatas[I.ShopType.BOX]);!(e=n()).done;)if(t==e.value.cfg.itemId){this.shopViewIcon&&this.shopViewIcon.updateShowIndexs();break}},h.onOpenView=function(t){switch(t.viewId){case 29:this.onUpdateBuff(),this.startTime();break;case 39:this.startTime()}},h.onCloseView=function(t){t.viewId},h.getItemConfigsBuytype=function(t){return this._model.shopItemDatas[t]},h.shopBuy=function(t,e){return f(this,void 0,void 0,r().mark(function n(){var o,i;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=!1,!t.cfg.payId){n.next=7;break}return n.next=4,d.default.Platform.buy(t.cfg.payId);case 4:o=n.sent,n.next=19;break;case 7:if(!t.cfg.ad){n.next=18;break}return n.next=10,d.default.ControllerManager.applyFunc(v.ControllerConst.AD,0,e);case 10:if(n.t0=i=n.sent,!n.t0){n.next=13;break}n.t0=0===i.code;case 13:if(n.t1=n.t0,!n.t1){n.next=16;break}o=!0;case 16:n.next=19;break;case 18:(o=O.default.ins.diamondChange(-t.cfg.diamond))||y.default.launch("\u94bb\u77f3\u4e0d\u8db3\uff01");case 19:if(!o){n.next=31;break}n.t2=(this.model.updateCnt(t),t.shopType),n.next=n.t2===I.ShopType.Diamond?23:n.t2===I.ShopType.BUFF?25:n.t2===I.ShopType.BOX?27:n.t2===I.ShopType.GIFT?29:30;break;case 23:return this.buyDiamond(t),n.abrupt("break",30);case 25:return this.buyBuff(t),n.abrupt("break",30);case 27:return this.buyBox(t),n.abrupt("break",30);case 29:this.buGift(t);case 30:d.default.Platform.saveData();case 31:return n.abrupt("return",o);case 32:case"end":return n.stop()}},n,this)}))},h.buyDiamond=function(t){var e=1;1===t.buyCnt?(O.default.ins.diamondChange(2*t.cfg.diamond),e=2):O.default.ins.diamondChange(t.cfg.diamond);var n=new C.CongratulationData;n.name=t.getName(),n.iconUrl=t.getDiamondIconUrl(),d.default.ViewManager.open(31,n),this.shopView&&this.shopView.playGetCoinAni(_.CostType.diamond,t.cfg.diamond*e)},h.buyBuff=function(t){d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.ADD_TIME,t.cfg.itemId,1,2),t.cfg.diamond&&d.default.AnalyticMgr.recordDiamondCost(t.cfg.arg0,-t.cfg.diamond)},h.buyBox=function(t){d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.ADD_TIME,t.cfg.itemId,1,2);var e=d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.USE_ITEM,t.cfg.itemId);this.shopOpenBoxView?(this.shopOpenBoxView.openBox(e[0]),this.shopView.updateContentUI(I.ShopType.BOX)):d.default.ViewManager.open(32,e[0],t),t.cfg.diamond&&d.default.AnalyticMgr.recordDiamondCost(t.cfg.arg0,-t.cfg.diamond),this.shopViewIcon&&this.shopViewIcon.updateShowIndexs()},h.buGift=function(t){if(t.cfg.shopGift.type!=I.ShopGiftType.FIRST_GIFT){for(var e,n,r=t,i=[],a=o(r.items);!(n=a()).done;){e=n.value;var c=new C.CongratulationData;c.data=e.id,c.cnt=e.cnt,i.push(c),d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.ADD_TIME,e.id,e.cnt)}if(t.cfg.diamond){var s=new C.CongratulationData;s.iconUrl="Texture/itemIcon/diamond_1",s.name="\u94bb\u77f3",s.cnt=t.cfg.diamond,i.push(s),O.default.ins.diamondChange(t.cfg.diamond)}if(r.costumeItemIds)for(var u,l=o(r.costumeItemIds);!(u=l()).done;){var h=u.value,f=new C.CongratulationData;f.data=h,f.cnt=1,i.push(f),d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.ADD_TIME,h,1)}d.default.ViewManager.open(31,i)}this.shopView&&(this.shopView.updateContentUI(I.ShopType.GIFT),this.shopView.updateContentUI(I.ShopType.BOX))},h.buyBank=function(){return f(this,void 0,void 0,r().mark(function t(){var e,n,o;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.Platform.buy("shop_bank");case 2:return(e=t.sent)&&(n=this._model.savaData.bankDiamond,O.default.ins.diamondChange(n),this._model.savaData.bankDiamond=0,(o=new C.CongratulationData).iconUrl="Texture/itemIcon/diamond_1",o.name="\u94bb\u77f3",o.cnt=n,d.default.ViewManager.open(31,o)),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))},h.shopUse=function(t){var e;t.shopType==I.ShopType.BOX&&(e=d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.USE_ITEM,t.cfg.itemId),this.shopOpenBoxView?this.shopOpenBoxView.openBox(e[0]):d.default.ViewManager.open(32,e[0],t),this.shopViewIcon&&this.shopViewIcon.updateShowIndexs(),this.shopView.updateContentUI(I.ShopType.BOX))},h.startTime=function(){d.default.TimerManager.isExists(this.countDownTime,this)||(d.default.TimerManager.doTimer(1e3,0,this.countDownTime,this),this.countDownTime())},h.countDownTime=function(){var t=d.default.DateUtils.Now();this.shopBuffView&&this.shopBuffView.updateTime(t),this.shopBuffViewIcon&&this.shopBuffViewIcon.updateTime(t),this.shopViewIcon&&this.shopViewIcon.updateBubble&&this.shopViewIcon.updateBubble(t)},h.getFirstGift=function(t){if(t.isCanGetFirstGift()){if(1===t.buyCnt){var e=t.costumes[0];b.default.ins.createNewCostume(e.cfg.idx,e.data.grade,e.data.lv),d.default.ViewManager.open(31,e,1)}else if(2===t.buyCnt){O.default.ins.diamondChange(t.cfg.diamond);var n=new C.CongratulationData;n.iconUrl=t.getDiamondIconUrl(),n.name="\u94bb\u77f3",n.cnt=t.cfg.diamond,d.default.ViewManager.open(31,n)}else 3===t.buyCnt&&(d.default.ControllerManager.applyFunc(v.ControllerConst.Item,m.BagConst.ADD_TIME,t.items[0].id,t.items[0].cnt),d.default.ViewManager.open(31,t.items[0].id,t.items[0].cnt));this._model.updateCnt(t)}},h.firstGiftIsFinish=function(){return this.model.shopGiftDatas[I.ShopGiftType.FIRST_GIFT][0].isHideGift()},h.isBuyRemoveAd=function(){return this.model.shopGiftDatas[I.ShopGiftType.REMOVE_AD_GIFT][0].isBuyGift()},h.getBankDiamond=function(){return this._model.savaData.bankDiamond},a=i,(l=[{key:"model",get:function(){return this._model}}])&&c(a.prototype,l),Object.defineProperty(a,"prototype",{writable:!1}),i}(p.default),cc._RF.pop()},{}],ShopFirstGiftIcon:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6b4daQQwo1BKqTYcnlQlifh","ShopFirstGiftIcon");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ShopFirstGiftIcon=void 0;var c=i("App"),s=i("ControllerConst"),u=(i("ViewConst"),i("ShopConst")),l=cc._decorator,h=l.ccclass,f=l.menu;i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){c.default.ControllerManager.applyFunc(s.ControllerConst.Shop,u.ShopConst.FIRST_GIFT_IS_FINISH)&&(this.node.removeFromParent(),this.node.destroy())},i.onTouchIcon=function(){c.default.ViewManager.open(40)},o}(cc.Component),i=o([h,f("view/Shop/ShopFirstGiftIcon")],i),a.ShopFirstGiftIcon=i,cc._RF.pop()},{}],ShopFirstView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"ea191equzFCdY7n3Dccz8hM","ShopFirstView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("GameText"),h=a("BaseView"),f=a("ControllerConst"),d=(a("ViewConst"),a("BagConst")),p=a("CostumeConst"),y=a("GameConst"),v=a("ShopConst"),g=cc._decorator,m=g.property,_=g.ccclass,b=g.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).ani=null,e.costumeTypeIcon=null,e.costumeIcon=null,e.costumeBgSpr=null,e.diamondIconSpr=null,e.diamonNumLab=null,e.itemIconSpr=null,e.itemName=null,e.buyNode=null,e.organiPriceLab=null,e.ratePriceLab=null,e.rateLab=null,e.getBtnArray=[],e.controller=null,e.bgType=1,e.data=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this),this.data=this.controller.model.shopGiftDatas[v.ShopGiftType.FIRST_GIFT][0],this.ani.on(cc.Animation.EventType.FINISHED,this.onAniFinish,this)},a.open=function(){t.prototype.open.call(this),this.updateUI(),this.ani.play("work")},a.updateUI=function(){var t=this.data.costumes[0];u.default.CommonUtils.setSpriteFrame(p.getRarityUrlByGrade(t.data.grade),this.costumeBgSpr),u.default.CommonUtils.setSpriteFrameByBundle(y.BundleType.MAP_ICON,t.getIcon(),this.costumeIcon),u.default.CommonUtils.setSpriteFrameByBundle(y.BundleType.MAP_ICON,t.getTypeIcon(),this.costumeTypeIcon);var e,n=u.default.ControllerManager.applyFunc(f.ControllerConst.Item,d.BagConst.GET_ITEM,this.data.items[0].id);u.default.CommonUtils.setSpriteFrame(n.getItemPic(),this.itemIconSpr),this.itemName.string=n.getName()+"x"+this.data.items[0].cnt,u.default.CommonUtils.setSpriteFrame(this.data.getDiamondIconUrl(),this.diamondIconSpr),this.diamonNumLab.string="\u94bb\u77f3x"+this.data.cfg.diamond,this.data.isBuyGift()?this.buyNode.active=!1:(this.buyNode.active=!0,e=u.default.Platform.getPriceNum(this.data.cfg.payId),this.ratePriceLab.string=e+"\u5143",this.rateLab.string=10*this.data.cfg.rate+"\u6298",this.organiPriceLab.string=Math.ceil(e/this.data.cfg.rate)+"\u5143"),this.updateGetBtnState()},a.updateGetBtnState=function(){for(var t=this.data.buyCnt-1,e=0;e<this.getBtnArray.length;e++){var n=this.getBtnArray[e],r=n.node.getComponentInChildren(cc.Label);e<t?(n.interactable=!1,r.setMaterial(0,n.grayMaterial),r.string=l.GameText.getText(37)):(e==t&&this.data.isCanGetFirstGift()?(n.interactable=!0,r.setMaterial(0,n.normalMaterial)):(n.interactable=!1,r.setMaterial(0,n.grayMaterial)),r.string=l.GameText.getText(9))}},a.onTouchGetBtn=function(){u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,v.ShopConst.GET_FIRST_GIFT,this.data),this.updateGetBtnState()},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(f.ControllerConst.Shop,v.ShopConst.BUY,this.data);case 2:this.updateUI();case 3:case"end":return t.stop()}},t,this)}))},a.onAniFinish=function(){this.ani.play("idle")},a.onTouchCostume=function(){u.default.ViewManager.open(26,this.data.costumes[0])},i}(h.default),i([m(cc.Animation)],a.prototype,"ani",void 0),i([m(cc.Sprite)],a.prototype,"costumeTypeIcon",void 0),i([m(cc.Sprite)],a.prototype,"costumeIcon",void 0),i([m(cc.Sprite)],a.prototype,"costumeBgSpr",void 0),i([m(cc.Sprite)],a.prototype,"diamondIconSpr",void 0),i([m(cc.Label)],a.prototype,"diamonNumLab",void 0),i([m(cc.Sprite)],a.prototype,"itemIconSpr",void 0),i([m(cc.Label)],a.prototype,"itemName",void 0),i([m(cc.Node)],a.prototype,"buyNode",void 0),i([m(cc.Label)],a.prototype,"organiPriceLab",void 0),i([m(cc.Label)],a.prototype,"ratePriceLab",void 0),i([m(cc.Label)],a.prototype,"rateLab",void 0),i([m([cc.Button])],a.prototype,"getBtnArray",void 0),a=i([_,b("view/Shop/ShopFirstView")],a),c.default=a,cc._RF.pop()},{}],ShopGiftContent:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"35820+1B0VHBYKVzc5Cj67k","ShopGiftContent");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0}),u.ShopGiftContent=void 0;var l=s("ShopGiftItem"),h=s("ShopContent"),f=cc._decorator,d=f.property,p=f.ccclass,y=f.menu;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).pageView=null,e.items=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.setData=function(t){this.items=[],this.datas=t},i.initContent=function(){var t=0;if(this.itemPre)for(var e,n=r(this.datas);!(e=n()).done;){var o=e.value;if(o.isShowInShopView()){var i=cc.instantiate(this.itemPre);this.pageView.addPage(i);var a=i.getComponent(l.ShopGiftItem);a.setData(o),this.items.push(a),t++}}t||(this.node.active=!1)},i.updateUI=function(){for(var t=this.items.length-1;0<=t;t--){var e=this.items[t];if(e.isRemove()){this.pageView.removePage(e.node),this.items.remove(e);break}}this.items.length||(this.node.active=!1)},i.showContent=function(){this.content.active=!0;for(var t,e=r(this.items);!(t=e()).done;)t.value.showItem()},i.hideContent=function(){this.content.active=!1},i.onPageView=function(){},o}(h.ShopContent),c([d(cc.PageView)],s.prototype,"pageView",void 0),s=c([p,y("view/Shop/ShopGiftContent")],s),u.ShopGiftContent=s,cc._RF.pop()},{}],ShopGiftItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4b8bakXlclNn7dwyI3prjq6","ShopGiftItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ShopGiftItem=void 0;var c=i("App"),s=i("SwitchFrame"),u=i("ControllerConst"),l=(i("ViewConst"),i("BagConst")),h=i("CostumeBagItem"),f=i("ShopConst"),d=i("ShopItem"),p=i("ShopNormalItem"),y=cc._decorator,v=y.property,g=y.ccclass,m=y.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).bigBg=null,e.huawen=null,e.smallBg=null,e.switchFram=null,e.nameLabelOutLine=null,e.giftNameLab=null,e.rateLab=null,e.organiPriceLab=null,e.diamondItem=null,e.costumeBagItem=null,e.shopNormalItem=null,e.iconSwitchFrame=null,e.data=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.data=t},i.isRemove=function(){return!this.data.isShowInShopView()},i.initItem=function(){this.isShow=!0,this.giftNameLab.string=this.data.getName();var t=c.default.Platform.getPriceNum(this.data.cfg.payId);this.costLab.string=t+"\u5143",this.data.cfg.rate?(this.rateLab.string=10*this.data.cfg.rate+"\u6298",this.organiPriceLab.string=Math.ceil(t/this.data.cfg.rate)+"\u5143"):(this.rateLab.node.parent.active=!1,this.organiPriceLab.node.active=!1,this.costLab.node.y=0);var e,n=this.data.items;this.diamondItem.setData(this.data.getDiamondIconUrl(),""+this.data.cfg.diamond);for(var r=0;r<n.length;r++){0==r?e=this.shopNormalItem:(e=cc.instantiate(this.shopNormalItem),this.shopNormalItem.parent.addChild(e));var o=e.getComponent(p.ShopNormalItem),i=c.default.ControllerManager.applyFunc(u.ControllerConst.Item,l.BagConst.GET_ITEM,n[r].id);i.data.itemType==l.ItemType.REMOVE_AD?o.setData(i.getItemPic(),"NO ADS"):o.setData(i.getItemPic(),""+n[r].cnt)}this.data.costumes?(this.costumeBagItem.setData(this.data.costumes[0]),this.costumeBagItem.node.setSiblingIndex(9)):this.costumeBagItem.node.active=!1;var a=this.data.cfg.shopGift.color;if(a){var s=_[a];this.bigBg.color=c.default.Color.getColorFromHex(s.bgColor),this.huawen.color=c.default.Color.getColorFromHex(s.iconColor),this.nameLabelOutLine.color=c.default.Color.getColorFromHex(s.nameOutLinColor),this.smallBg.color=c.default.Color.getColorFromHex(s.smallBgColor),this.switchFram.frameIndex=s.frameIndex}this.iconSwitchFrame.frameIndex=this.data.giftType==f.ShopGiftType.REMOVE_AD_GIFT?1:0},i.onTouchBuyBtn=function(){this.data.giftType==f.ShopGiftType.FIRST_GIFT?c.default.ViewManager.open(40):this.data.giftType==f.ShopGiftType.REMOVE_AD_GIFT?c.default.ViewManager.open(53,this.data):c.default.ControllerManager.applyFunc(u.ControllerConst.Shop,f.ShopConst.BUY,this.data)},o}(d.ShopItem),o([v(cc.Node)],i.prototype,"bigBg",void 0),o([v(cc.Node)],i.prototype,"huawen",void 0),o([v(cc.Node)],i.prototype,"smallBg",void 0),o([v(s.default)],i.prototype,"switchFram",void 0),o([v(cc.LabelOutline)],i.prototype,"nameLabelOutLine",void 0),o([v(cc.Label)],i.prototype,"giftNameLab",void 0),o([v(cc.Label)],i.prototype,"rateLab",void 0),o([v(cc.Label)],i.prototype,"organiPriceLab",void 0),o([v(p.ShopNormalItem)],i.prototype,"diamondItem",void 0),o([v(h.CostumeBagItem)],i.prototype,"costumeBagItem",void 0),o([v(cc.Node)],i.prototype,"shopNormalItem",void 0),o([v(s.default)],i.prototype,"iconSwitchFrame",void 0),i=o([g,m("view/Shop/item/ShopGiftItem")],i),a.ShopGiftItem=i;var _={yellow:{bgColor:"#fff1a5",nameOutLinColor:"#ecb154",iconColor:"#fde395",smallBgColor:"#fffad4",frameIndex:0},red:{bgColor:"#ffd5d0",nameOutLinColor:"#e17d73",iconColor:"#ffc2bc",smallBgColor:"#ffeadf",frameIndex:1},purple:{bgColor:"#daddff",nameOutLinColor:"#aa83c6",iconColor:"#ceceff",smallBgColor:"#daf2ff",frameIndex:2}};cc._RF.pop()},{}],ShopItemConfig:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}cc._RF.push(e,"1c425W8AexMOI1/eBDvyAyc","ShopItemConfig");var u=t,l=n;Object.defineProperty(l,"__esModule",{value:!0}),l.getShopItemData=l.ShopGiftItemData=l.ShopBoxItemData=l.ShopItemData=void 0;var h=u("App"),f=u("GameText"),d=u("ConfigManager"),p=u("ControllerConst"),y=u("BagConst"),v=u("SystemOpenConst"),g=u("ShopConst"),m=function(){function t(){this.buyCnt=0}var e=t.prototype;return e.parse=function(t){for(var e in t)this[e]=t[e];return this.cfg=t,this.shopType=t.shopType,this},e.parseMutil=function(t){for(var e,n=[],r=a(t.split("|"));!(e=r()).done;){var o=e.value.split(":"),i={id:parseInt(o[0]),cnt:parseInt(o[1])};n.push(i)}return n},e.parseMutil_1=function(t){for(var e,n=[],r=a(t.split("|"));!(e=r()).done;){var o=e.value;n.push(parseInt(o))}return n},e.getDiamondIconUrl=function(){return"Texture/itemIcon/diamond_"+this.cfg.icon},e.getName=function(){return f.GameText.getTextByStr("shop_name_"+this.id)},t}(),_=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e}(l.ShopItemData=m);l.ShopBoxItemData=_;var b=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).items=null,e.costumeItemIds=null,e._costumes=null,e.isSysOpen=!0,e}o(e,t);var n,i,c=e.prototype;return c.parse=function(e){return t.prototype.parse.call(this,e),this.items=this.parseMutil(e.shopGift.items),this.giftType=e.shopGift.type,this},c.parseCostume=function(t){for(var e,n=[],r=[],o=a(t.split("|"));!(e=o()).done;){var i=e.value,c=parseInt(i);r.push(c);var s=h.default.ControllerManager.applyFunc(p.ControllerConst.Item,y.BagConst.GET_ITEM,c);n.push(s.getTempCostume())}n.length&&(this._costumes=n,this.costumeItemIds=r)},c.isCanGetFirstGift=function(){return this.buyCnt&&this.buyCnt<=3&&h.default.DateUtils.isLastDay(this.time,h.default.DateUtils.secondNow())},c.isBuyGift=function(){return 0<this.buyCnt},c.isHideGift=function(){return this.shopType==g.ShopType.GIFT?3<this.buyCnt:0<this.buyCnt},c.isShowInShopView=function(){return h.default.ControllerManager.applyFunc(p.ControllerConst.SystemOpen,v.OpenConst.CHCEK_OPEN,v.OpenTypeConst.FIRST_GIFT)&&!this.buyCnt},n=e,(i=[{key:"costumes",get:function(){var t=this.cfg.shopGift.costumes;return t&&!this._costumes&&this.parseCostume(t),this._costumes}}])&&r(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(m);l.ShopGiftItemData=b,l.getShopItemData=function(t){var e=null;switch(t.shopType){case g.ShopType.REMOVE_AD_GIFT:case g.ShopType.GIFT:case g.ShopType.ONCE_GIFT:e=new b;break;case g.ShopType.BOX:e=new _;break;default:e=new m}return e.parse(t)},d.registerJSONConf("ShopItemConfig","files/shopItem"),d.registerJSONConf("ProductConfig","files/productConfig"),cc._RF.pop()},{}],ShopItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"94adeGCoQNDc757ZswBk65V","ShopItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ShopItem=void 0;var c=i("App"),s=i("ControllerConst"),u=i("ShopConst"),l=cc._decorator,h=l.property,f=l.ccclass,d=l.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).content=null,e.icon=null,e.costLab=null,e.isShow=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.data=t},i.updateItem=function(){},i.initItem=function(){},i.showItem=function(){this.content.active=!0,this.isShow||this.initItem()},i.hideItem=function(){this.content.active=!1},i.updateTime=function(){},i.onTouchBuyBtn=function(){c.default.ControllerManager.applyFunc(s.ControllerConst.Shop,u.ShopConst.BUY,this.data)},i.onTouchUseBtn=function(){},o}(cc.Component),o([h(cc.Node)],i.prototype,"content",void 0),o([h(cc.Sprite)],i.prototype,"icon",void 0),o([h(cc.Label)],i.prototype,"costLab",void 0),i=o([f,d("view/Shop/ShopItem")],i),a.ShopItem=i,cc._RF.pop()},{}],ShopModle:[function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"542a5aBhQBFroinszAM2Eiy","ShopModle");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("BaseModel"),u=i("ShopConst"),l=i("ShopItemConfig");a.default=function(t){var e,n;function i(e){var n;return(n=t.call(this,e)||this).savaData=null,n._saveKey="Shop",n.mothCardDays=31,c.default.SaveManage.add(r(n),n._saveKey,!0,!0),c.default.SaveManage.load(n._saveKey),n}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.init=function(){this.initConfig()},a.initConfig=function(){this.shopItemDatas={},this.shopGiftDatas={};var t=c.default.ConfigManager.getConfig("ShopItemConfig");for(var e in t){var n=t[e];this.shopItemDatas[n.shopType]||(this.shopItemDatas[n.shopType]=[]);var r=l.getShopItemData(n);if((e=this.savaData.record[r.id])?(r.buyCnt=e.cnt,r.time=e.time):r.buyCnt,this.shopItemDatas[n.shopType].push(r),r.shopType==u.ShopType.GIFT){var o=r.cfg.shopGift.type;this.shopGiftDatas[o]||(this.shopGiftDatas[o]=[]),this.shopGiftDatas[o].push(r)}}},a.updateMonthCardTime=function(t){void 0===t&&(t=0)},a.addGiftBuyCnt=function(){},a.updateGiftBuyCnt=function(){},a.getGiftBuyCnt=function(){return 0},a.updateCnt=function(t){var e=this.savaData.record;e[t.id]||(e[t.id]={cnt:0}),e[t.id].cnt++,t.buyCnt=e[t.id].cnt,t.time=e[t.id].time=c.default.DateUtils.secondNow(),t.shopType==u.ShopType.GIFT&&t.cfg.shopGift.type==u.ShopGiftType.FIRST_GIFT&&1===e[t.id].cnt&&(t.time=e[t.id].time=0)},a.isFirstShowFirstGift=function(){var t=this.shopGiftDatas[u.ShopGiftType.FIRST_GIFT][0],e=this.savaData.record;return!e[t.id]&&(e[t.id]={cnt:0},!0)},a.createMemento=function(){return this.savaData},a.setMemento=function(t){this.savaData=t||{record:{},bankDiamond:0}},i}(s.default),cc._RF.pop()},{}],ShopNormalItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8de842e9JZJW7NFniIkjtf9","ShopNormalItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ShopNormalItem=void 0;var c=i("App"),s=cc._decorator,u=s.property,l=s.ccclass,h=s.menu;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).iconSpr=null,e.nameLab=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t,e){this.nameLab.string=e,c.default.CommonUtils.setSpriteFrame(t,this.iconSpr)},i.hide=function(){this.node.active=!1},i.show=function(){this.node.active=!0},o}(cc.Component),o([u(cc.Sprite)],i.prototype,"iconSpr",void 0),o([u(cc.Label)],i.prototype,"nameLab",void 0),i=o([l,h("view/Shop/ShopNormalItem")],i),a.ShopNormalItem=i,cc._RF.pop()},{}],ShopOpenBoxView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"1f820tamcBI058/Nmyfi+Gy","ShopOpenBoxView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0}),c.ShopOpenBoxView=void 0;var u=a("App"),l=a("BaseView"),h=a("ControllerConst"),f=(a("ADController"),a("BagConst")),d=a("CostumeConst"),p=a("GameConst"),y=a("ShopConst"),v=cc._decorator,g=v.ccclass,m=v.property;v.menu,a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.typeIcon=null,e.bgSpr=null,e.nameLab=null,e.ani=null,e.costBtn=null,e.costLab=null,e.costIconNode=null,e.boxList=[],e.itemBase=null,e.data=null,e.isPlaying=!1,e.bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(e,n){t.prototype.open.call(this),this.data=n,this.itemBase=u.default.ControllerManager.applyFunc(h.ControllerConst.Item,f.BagConst.GET_ITEM,this.data.cfg.itemId),this.openBox(e)},a.openBox=function(t){this.bgSpr.node.scale=0,this.bgSpr.node.y=30,this.nameLab.node.active=!1,this.costBtn.parent.active=!1,this.nameLab.string=t.getName(),u.default.CommonUtils.setSpriteFrame(d.getRarityUrlByGrade(t.data.grade),this.bgSpr),u.default.CommonUtils.setSpriteFrameByBundle(p.BundleType.MAP_ICON,t.getIcon(),this.icon),u.default.CommonUtils.setSpriteFrameByBundle(p.BundleType.MAP_ICON,t.getTypeIcon(),this.typeIcon);for(var e=this.data.cfg.icon,n=0;n<this.boxList.length;n++)this.boxList[n].active=n==e;this.ani.once(cc.Animation.EventType.FINISHED,this.onAniFinished,this),this.updateCost(),this.ani.play("work"),this.isPlaying=!0},a.updateCost=function(){this.data.cfg.ad?this.costBtn.active=!1:(this.costBtn.active=!0,this.itemBase.cnt?(this.costIconNode.active=!1,this.costLab.string=this.itemBase.cnt+"/1"):(this.costIconNode.active=!0,this.costLab.string=this.data.cfg.diamond.toString()))},a.onTouchBg=function(){this.isPlaying&&(this.ani.off(cc.Animation.EventType.FINISHED,this.onAniFinished,this),this.boxList[0].parent.y=0,this.onAniFinished())},a.onAniFinished=function(){this.isPlaying=!1,this.costBtn.parent.active=!0,this.nameLab.node.active=!0,cc.tween(this.bgSpr.node).to(.2,{y:300,scale:1}).start(),this.ani.play("idle")},a.onTouchCostBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.itemBase.cnt?u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,y.ShopConst.USE,this.data):u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,y.ShopConst.BUY,this.data,7);case 1:case"end":return t.stop()}},t,this)}))},i}(l.default),i([m(cc.Sprite)],a.prototype,"icon",void 0),i([m(cc.Sprite)],a.prototype,"typeIcon",void 0),i([m(cc.Sprite)],a.prototype,"bgSpr",void 0),i([m(cc.Label)],a.prototype,"nameLab",void 0),i([m(cc.Animation)],a.prototype,"ani",void 0),i([m(cc.Node)],a.prototype,"costBtn",void 0),i([m(cc.Label)],a.prototype,"costLab",void 0),i([m(cc.Node)],a.prototype,"costIconNode",void 0),i([m([cc.Node])],a.prototype,"boxList",void 0),a=i([g],a),c.ShopOpenBoxView=a,cc._RF.pop()},{}],ShopRemoveAdIcon:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"19671HCUklMtpcFK4mBQix6","ShopRemoveAdIcon");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.ShopRemoveAdIcon=void 0;var c=i("App"),s=i("ControllerConst"),u=(i("ViewConst"),i("ShopConst")),l=cc._decorator,h=l.ccclass,f=l.menu;i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){c.default.ControllerManager.applyFunc(s.ControllerConst.Shop,u.ShopConst.IS_BUY_REMOVE_AD)&&(this.node.removeFromParent(),this.node.destroy())},i.onTouchIcon=function(){c.default.ViewManager.open(53)},o}(cc.Component),i=o([h,f("view/Shop/ShopRemoveAdIcon")],i),a.ShopRemoveAdIcon=i,cc._RF.pop()},{}],ShopRemoveAdView:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a6a58bw8/FGGpNyUbYKY6oC","ShopRemoveAdView");var i,a=t,c=n,s=(i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=a("App"),l=a("BaseView"),h=a("ControllerConst"),f=a("BagConst"),d=a("ShopConst"),p=a("ShopNormalItem"),y=cc._decorator,v=y.property,g=y.ccclass,m=y.menu;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).titleLab=null,e.priceLab=null,e.originLab=null,e.diamnodLab=null,e.item=null,e.btn=null,e.finish=null,e.controller=null,e.bgType=1,e.data=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this)},a.open=function(e){t.prototype.open.call(this),e=e||this.controller.model.shopGiftDatas[d.ShopGiftType.REMOVE_AD_GIFT][0],this.data=e,this.titleLab.string=this.data.getName(),e=u.default.Platform.getPriceNum(this.data.cfg.payId),this.priceLab.string=e+"\u5143",this.diamnodLab.string=""+this.data.cfg.diamond,this.data.cfg.rate&&(this.originLab.string=Math.ceil(e/this.data.cfg.rate)+"\u5143");var n=u.default.ControllerManager.applyFunc(h.ControllerConst.Item,f.BagConst.GET_ITEM,this.data.items[1].id);this.item.setData(n.getItemPic(),""+this.data.items[1].cnt),this.btn.active=!this.data.isBuyGift(),this.finish.active=this.data.isBuyGift()},a.onTouchBuyBtn=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.ControllerManager.applyFunc(h.ControllerConst.Shop,d.ShopConst.BUY,this.data);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.closeView();case 5:case"end":return t.stop()}},t,this)}))},i}(l.default),i([v(cc.Label)],a.prototype,"titleLab",void 0),i([v(cc.Label)],a.prototype,"priceLab",void 0),i([v(cc.Label)],a.prototype,"originLab",void 0),i([v(cc.Label)],a.prototype,"diamnodLab",void 0),i([v(p.ShopNormalItem)],a.prototype,"item",void 0),i([v(cc.Node)],a.prototype,"btn",void 0),i([v(cc.Node)],a.prototype,"finish",void 0),a=i([g,m("view/Shop/ShopRemoveAdView")],a),c.default=a,cc._RF.pop()},{}],ShopViewIcon:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"41e436j6n5EHIUoY+yGHuDl","ShopViewIcon");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("App"),h=s("BaseView"),f=s("ControllerConst"),d=(s("ViewConst"),s("ADController"),s("ADManageBase"),s("BagConst")),p=s("ShopConst"),y=cc._decorator,v=y.ccclass,g=y.property,m=y.menu;s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).bubbleNode=null,e.iconSpr=null,e.boxItems=[],e.time=0,e.showIndexArry=null,e.showIndex=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this);for(var e,n=r(l.default.ControllerManager.applyFunc(f.ControllerConst.Shop,p.ShopConst.GET_ITEM_DATA_BY_TYPE,p.ShopType.BOX));!(e=n()).done;){var o=e.value,i=l.default.ControllerManager.applyFunc(f.ControllerConst.Item,d.BagConst.GET_ITEM,o.cfg.itemId);this.boxItems.push(i)}},i.open=function(){t.prototype.open.call(this),this.updateShowIndexs(),this.updateBubble(l.default.DateUtils.Now())},i.updateShowIndexs=function(){var t=[],e=l.default.ControllerManager.applyFunc(f.ControllerConst.AD,4,7),n=l.default.ControllerManager.applyFunc(f.ControllerConst.AD,3,7);(e.freeCnt<n.freeCnt||e.adCnt<n.adTimes)&&t.push(0);for(var r=1;r<this.boxItems.length;r++)this.boxItems[r].cnt&&t.push(r);t.length?(this.bubbleNode.active=!0,this.showIndexArry=t):this.bubbleNode.active=!1},i.updateBubble=function(t){!this.bubbleNode.active||t-this.time<5e3||(this.time=t,this.bubbleNode.active=!0,this.showIndex++,this.showIndex=this.showIndex%this.showIndexArry.length,t=this.showIndexArry[this.showIndex],l.default.CommonUtils.setSpriteFrame(this.boxItems[t].getItemPic(),this.iconSpr))},i.onTouchIcon=function(){l.default.ViewManager.open(7)},o}(h.default),c([g(cc.Node)],s.prototype,"bubbleNode",void 0),c([g(cc.Sprite)],s.prototype,"iconSpr",void 0),s=c([v,m("view/Shop/ShopViewIcon")],s),u.default=s,cc._RF.pop()},{}],ShopView:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"883aeAMjFFE5KPKfb6Jlgnt","ShopView");var c,s=t,u=n,l=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(u,"__esModule",{value:!0});var h=s("App"),f=s("BaseView"),d=s("ShopConst"),p=s("ShopContent"),y=s("EffectUtils"),v=s("BagController"),g=cc._decorator,m=g.property,_=g.ccclass,b=g.menu;c=cc.Class({name:"ShopContenteSet",properties:{shopType:{type:cc.Enum(d.ShopType),default:0},content:p.ShopContent}}),s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).moneyBarList=[],e.scrollView=null,e.widgets=[],e.shopContentes=[],e.controller=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){h.default.Platform.checkIsNotch()&&(this.node.getComponent(cc.Widget).top=60)},i.initUI=function(){t.prototype.initUI.call(this);for(var e,n=this.controller.model.shopItemDatas,o=r(this.shopContentes);!(e=o()).done;){var i=e.value;i.content.setData(n[i.shopType])}h.default.Platform.checkIsNotch()&&this.widgets.forEach(function(t){t.top+=50})},i.open=function(e){var n=this;t.prototype.open.call(this);for(var o,i=r(this.shopContentes);!(o=i()).done;){var a=o.value;this.isShowContent(a.shopType)?a.content.initContent():a.content.node.active=!1}this.onTouchScrollView(),h.default.TimerManager.doTimer(500,1,function(){for(var t=0;t<n.shopContentes.length;t++)if(e==n.shopContentes[t].shopType){n.scrollView.scrollToOffset(cc.v2(0,-n.shopContentes[t].content.node.y),1);break}},this)},i.updateContentUI=function(t){for(var e,n=r(this.shopContentes);!(e=n()).done;){var o=e.value;t==o.shopType&&o.content.updateUI()}},i.updateMonthCard=function(){},i.updateTime=function(){for(var t,e=r(this.shopContentes);!(t=e()).done;){var n=t.value;n.shopType==d.ShopType.BOX&&n.content.updateUI()}},i.playGetCoinAni=function(t,e){void 0===e&&(e=0),t%=v.CostType.coin;var n=this.moneyBarList[t],r=h.default.ViewManager.uiRoot,o=cc.Vec2.ZERO,i=n.convertToWorldSpaceAR(n.getChildByName("icon").position);i=r.convertToNodeSpaceAR(i),y.default.instance.playMoneyAni(o,i,t,r,e)},i.onTouchScrollView=function(){for(var t,e=this.scrollView.getContentPosition().y,n=r(this.shopContentes);!(t=n()).done;){var o=t.value,i=e+o.content.node.y,a=e+(o.content.node.y-o.content.node.height);i<-this.scrollView.node.height||0<a?o.content.hideContent():this.isShowContent(o.shopType)&&o.content.showContent()}},i.isShowContent=function(t){var e=!0;switch(t){case d.ShopType.Diamond:case d.ShopType.GIFT:e=h.default.Platform.getIsShowPay()}return e},o}(f.default),l([m([cc.Node])],s.prototype,"moneyBarList",void 0),l([m(cc.ScrollView)],s.prototype,"scrollView",void 0),l([m([cc.Widget])],s.prototype,"widgets",void 0),l([m(c)],s.prototype,"shopContentes",void 0),s=l([_,b("view/Shop/ShopView")],s),u.default=s,cc._RF.pop()},{}],SkillBtn:[function(t,e){"use strict";cc._RF.push(e,"19a9aeVs3dNT7CGhELdsNY/","SkillBtn"),cc._RF.pop()},{}],SlotData:[function(t,e,n){"use strict";cc._RF.push(e,"5a437oZQARKY6vqV2Fs5HTs","SlotData");var r=n;Object.defineProperty(r,"__esModule",{value:!0});var o={0:"under",2:"left",4:"middle",6:"left"};r.default=function(){function t(){this.chefPos=null,this.selfPos=null,this.direction=0,this.machineData=null,this.isWorking=!1,this.order=null,this.ani=null,this.node=null,this.parentNode=null,this.siblingIndex=0}var e=t.prototype;return e.unlock=function(){this.setActive(!0)},e.setActive=function(t){t?this.node.parent||this.parentNode.addChild(this.node):this.node.parent&&this.node.removeFromParent(!1)},e.startCook=function(){this.isWorking=!0},e.playCookAni=function(){this.ani&&this.ani.play(o[this.direction])},e.stopCook=function(){this.isWorking=!1,this.ani&&(this.ani.stop(),this.ani.setCurrentTime(0,o[this.direction]))},e.updateSiblingIndex=function(){this.node.parent&&this.node.setSiblingIndex(this.siblingIndex)},t}(),cc._RF.pop()},{}],SoundBg:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"722c8rCAA9JfoICLO6Wa8pE","SoundBg");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=o("BaseSound"),i.default=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._currBg="",e._currBg="",e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.stop=function(){cc.audioEngine.stopMusic(),this._currBg=""},i.play=function(t){this._currBg!=t&&(this.stop(),this._currBg=t,(t=this.getSound(t))&&this.playSound(t))},i.playSound=function(t){cc.audioEngine.playMusic(t,!0)},i.setVolume=function(t){this._volume=t,cc.audioEngine.setMusicVolume(t)},i.loadedPlay=function(t){this._currBg==t.name&&this.playSound(t)},i.checkCanClear=function(t){return this._currBg!=t},o}(o.default),cc._RF.pop()},{}],SoundEffectConst:[function(t,e,n){"use strict";cc._RF.push(e,"18aedxeD4JJJJ9UExc3cdXB","SoundEffectConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.FightSoundConst=o.SheepSoundConst=o.SoundsDefine=void 0;var i=function(){};(o.default=i).Bubble="EffectAudio/10_Bubble",i.Harvest="EffectAudio/13_Harvest",i.ItemClick="EffectAudio/14_ItemClick",i.ItemCompose="EffectAudio/15_ItemCompose",i.TileClean="EffectAudio/16_TileClean",i.TileCleanUp="EffectAudio/17_TileCleanUp",i.GetFloat="EffectAudio/21_GetFloat",i.UnlockMap="EffectAudio/28_UnlockMap",i.Compose5="EffectAudio/48_Compose5",i.ComposeCombo="EffectAudio/49_ComposeCombo",i.UsePowerBall="EffectAudio/usePowerBall",i.GetReward="EffectAudio/getReward",i.Collect="audio/EffectAudio/collect",i.Collect_Ore="audio/EffectAudio/collect_ore",i.Unlock="EffectAudio/unlock",(r=o.SoundsDefine||(o.SoundsDefine={})).BG_GROUND="bg",r.CLICK="click",r.EXPLODE="explode",r.GET_ITEM="get_item",r.GET_COIN2="get_coin2",r.GET_COIN1="get_coin1",r.UPGRADE="upgrade",r.USE_SKILL="use_skill",r.MIAOW="miaow",r.UNLOCK="unlock",r.COOK_FINISH="cook_finish";var a=function(){};(o.SheepSoundConst=a).bg="Sheep/sheepbg",a.click="Sheep/sheepclick";var c=function(){};(o.FightSoundConst=c).bg="fight_bg",c.week_fight_bg="fight_week_bg",c.attak="fight/attack",c.beAttacked="fight/beAttacked",c.win="fight/win",c.lose="fight/lose",c.fight_begin="fight/fightBegin",cc._RF.pop()},{}],SoundEffects:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"67079mq6XtOmK+zCsVeZbw8","SoundEffects");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.AUDIO_DIR=void 0,o=o("BaseSound"),i.AUDIO_DIR="audio/",i.default=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._loopSound=new Map,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=o.prototype;return a.play=function(t){return(t=this.getSound(t))?this.playSound(t):null},a.stopLoopEffect=function(t){var e=this._loopSound.get(t);e&&(e.cnt--,e.cnt<=0&&(e.channel&&(cc.audioEngine.stopEffect(e.channel),e.channel=null),this._loopSound.delete(t)))},a.loopPlay=function(t){var e;return this._loopSound.has(t)||((e=this.getLoopSound(t))?(e=cc.audioEngine.playEffect(e,!0),this._loopSound.set(t,{cnt:1,channel:e})):this._loopSound.set(t,{cnt:1,channel:null})),t},a.getLoopSound=function(t){var e=i.AUDIO_DIR+t;return(t=cc.resources.get(e,cc.AudioClip))||cc.resources.load(e,cc.AudioClip,this.onLoopResourceLoadComplete.bind(this)),t},a.onLoopResourceLoadComplete=function(t,e){var n=this._loopSound.get(e.name);n&&!isNaN(n.channel)&&(n.channel=cc.audioEngine.playEffect(e,!0))},a.playSound=function(t){if(t)return cc.audioEngine.playEffect(t,!1)},a.setVolume=function(t){this._volume=t,cc.audioEngine.setEffectsVolume(t)},a.loadedPlay=function(t){this.playSound(t)},a.pauseEffect=function(){cc.audioEngine.pauseAllEffects()},a.resumeEffect=function(){cc.audioEngine.resumeAllEffects()},o}(o.default),cc._RF.pop()},{}],SoundManager:[function(t,e,n){"use strict";cc._RF.push(e,"917e8RJ3WRHjb9pPwbXwk44","SoundManager");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.AUDIO_DIR=void 0;var i=r("App"),a=r("SoundBg"),c=r("SoundEffects");o.AUDIO_DIR="audio/",function(){if(null==cc._decorator)throw new TypeError("Cannot destructure undefined")}();var s=function(){function t(){this.saveKey="SoundManager",this.bgOn=!0,this.effectOn=!0,this.bgVolume=.3,this.effectVolume=.5,this.bg=new a.default,this.effect=new c.default}var e=t.prototype;return e.playEffect=function(t){return this.effectOn?this.effect.play(t):null},e.playLoopEffect=function(t){if(this.effectOn)return this.effect.loopPlay(t)},e.stopLoopEffect=function(t){this.effect.stopLoopEffect(t)},e.playBg=function(t){this.currBg=t,this.bgOn&&(this.bg.play(t),this.isPlaying=!0)},e.stopBg=function(){this.bg.stop(),this.isPlaying=!1},e.setEffectOn=function(t){this.effectOn=t,this.saveData()},e.getEffectStatus=function(){return this.effectOn},e.setBgOn=function(t){this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg(),this.saveData()},e.getBgStatus=function(){return this.bgOn},e.setBgVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.bgVolume=t,this.bg.setVolume(this.bgVolume)},e.getBgVolume=function(){return this.bgVolume},e.setEffectVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.effectVolume=t,this.effect.setVolume(this.effectVolume)},e.getEffectVolume=function(){return this.effectVolume},e.createMemento=function(){return{effectOn:this.effectOn,bgOn:this.bgOn}},e.setMemento=function(t){t?(this.bgOn=t.bgOn,this.effectOn=t.effectOn):(this.bgOn=!0,this.effectOn=!0),this.bg.setVolume(this.bgVolume),this.effect.setVolume(this.effectVolume)},e.pauseMusic=function(){this.bg.stop()},e.resumeMusic=function(){this.bg&&this.currBg&&(this.stopBg(),this.playBg(this.currBg))},e.pauseEffect=function(){this.effect.pauseEffect()},e.resumeEffect=function(){this.effect.resumeEffect()},e.getBgPlayingStatus=function(){return this.isPlaying},e.saveData=function(){i.default.SaveManage.save(this.saveKey)},t}();(o.default=s).CLEAR_TIME=18e4,cc._RF.pop()},{}],StageUpgradeData:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"5cffcCeXWJJz5mfvqQSVUcE","StageUpgradeData");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("GameText"),c=o("GlobalAttr"),s=o("MyBigLong"),u=o("DeskService"),l=o("MachineService"),h=o("MapService"),f=o("StageUpgradeService");i.default=function(){function t(){this.cfg=null,this.cost=0,this._baseCost=0,this._desc="",this.title=""}var e,n,o=t.prototype;return o.init=function(t){this.cfg=t,this._baseCost=s.default.unpackData(t.cost),this.title=a.GameText.getTextByStr("str_title_stage_"+this.cfg.ability_type),this.calCost()},o.calCost=function(){this.cost=Math.ceil(c.default.ins.upgradeDiscount*this._baseCost)},o.canBuy=function(){return h.default.ins.mapSaveData.money>=this.cost},o.getIconUrl=function(){var t="Texture/stageUpgradeIcon/icon_";switch(this.cfg.ability_type){case f.AbilityType.cashirespeed:case f.AbilityType.chefspeed:t+=50;break;case f.AbilityType.menuprofit:case f.AbilityType.fastermenu:t="";break;default:t+=this.cfg.ability_type}return t},o.getFoodImg=function(){return l.default.ins.machineDatas[this.cfg.ability_target-1].foodImg},e=t,(n=[{key:"desc",get:function(){if(!this._desc){var t="";switch(this.cfg.ability_type){case f.AbilityType.menuprofit:t=l.default.ins.machineDatas[this.cfg.ability_target-1].name,this._desc=a.GameText.getTextByStr("stage_upgrade_type_"+this.cfg.ability_type).format(this.cfg.ability_value,a.GameText.getTextByStr(t));break;case f.AbilityType.fastermenu:t=l.default.ins.machineDatas[this.cfg.ability_target-1].name,this._desc=a.GameText.getTextByStr("stage_upgrade_type_"+this.cfg.ability_type).format(a.GameText.getTextByStr(t));break;case f.AbilityType.addcustomer2:this._desc=a.GameText.getTextByStr("stage_upgrade_type_"+this.cfg.ability_type).format(u.default.ins.deskDatas[this.cfg.ability_target].customers.length);break;case f.AbilityType.chefspeed:case f.AbilityType.cashirespeed:this._desc=a.GameText.getTextByStr("stage_upgrade_type_"+this.cfg.ability_type);break;default:this._desc=a.GameText.getTextByStr("stage_upgrade_type_"+this.cfg.ability_type).format(this.cfg.ability_value)}}return this._desc}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],StageUpgradeService:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"8497eDhRPZKfLx1FrpntVOH","StageUpgradeService");var c,s=t,u=n;Object.defineProperty(u,"__esModule",{value:!0}),u.AbilityType=void 0;var l=s("App"),h=s("RedPointMgr"),f=s("Toast"),d=s("NotificationConst"),p=(s("ViewConst"),s("SystemOpenConst")),y=s("RoleUnlockAni"),v=s("StageUpgradeData"),g=s("GameConst"),m=s("GlobalAttr"),_=s("BaseService"),b=s("CurrencyService"),w=s("DeskService"),C=s("MachineService"),S=s("MapService"),O=s("RoleService");h.RedPointMgr.types.StageUpgrade="StageUpgrade";var T,I=cc._decorator.ccclass;(s=c=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).define=null,e.datas=null,e.menuprofitValue=null,e.fastermenu=null,e.saveData=null,e.funMap={},e.isSysOpen=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.onLoad=function(){(c.ins=this).funMap[T.menuprofit]=this.onMenuprofit,this.funMap[T.allmenuprofit]=this.onAllmenuprofit,this.funMap[T.fastermenu]=this.onFastermenu,this.funMap[T.chefspeed]=this.onChefspeed,this.funMap[T.cashirespeed]=this.onCashirespeed,this.funMap[T.addchef]=this.onAddchef,this.funMap[T.addcashire]=this.onAddcashire,this.funMap[T.addcustomer1]=this.onAddcustomer1,this.funMap[T.addcustomer2]=this.onAddcustomer2,this.funMap[T.addcar]=this.onAddcar,this.initEvent()},i.unlockAll=function(){for(var t,e=r(this.datas.concat());!(t=e()).done;){var n=t.value;this.buy(n.cfg.order,!0)}},i.buy=function(t,e,n){void 0===e&&(e=!1);for(var o,i=r(this.datas);!(o=i()).done;){var a=o.value;if(a.cfg.order===t){if(!e&&!b.default.ins.moneyChange(-a.cost))return f.default.launch("\u91d1\u5e01\u4e0d\u8db3!"),!1;this.funMap[a.cfg.ability_type]&&this.funMap[a.cfg.ability_type].call(this,a),this.saveData.push(a.cfg.order),this.datas.remove(a),l.default.NotificationCenter.dispatch(d.NotificationConst.STAGE_UPGRADE_UPDATE,this.datas.length,n);break}}return this.onUpdateMoney(),!0},i.init=function(){var t=O.default.ins;t.chefspeed=100,t.waiterspeed=100,t.chefCnt=0,t.waiterCnt=0,t.customerCnt=1,t.carCnt=1,this.menuprofitValue={},this.fastermenu={},this.datas=[];var e=this.getModel().getCurMapData();e.stageUpgrade||(e.stageUpgrade=[]),this.saveData=e.stageUpgrade;for(var n=S.default.ins.curCfg.StageUpgrade,r=n.length,o=0;o<r;o++){var i=new v.default,a=n[o];i.init(a),e.stageUpgrade.includes(a.order)?this.funMap[a.ability_type]&&this.funMap[a.ability_type].call(this,i,!0):this.datas.push(i)}this.onUpdateMoney()},i.initEvent=function(){l.default.NotificationCenter.addListener(d.NotificationConst.UPDATE_MONEY,this.onUpdateMoney,this),l.default.NotificationCenter.addListener(d.NotificationConst.SYS_OPEN,this.onSysOpen,this)},i.onSysOpen=function(t,e){t==p.OpenTypeConst.STAGE_UPGRADE&&e&&(this.isSysOpen=!0,l.default.NotificationCenter.removeListener(d.NotificationConst.SYS_OPEN,this.onSysOpen,this))},i.onMenuprofit=function(t,e){this.menuprofitValue[t.cfg.ability_target]?this.menuprofitValue[t.cfg.ability_target]*=t.cfg.ability_value:this.menuprofitValue[t.cfg.ability_target]=t.cfg.ability_value,e||C.default.ins.reCalFoodValue(t.cfg.ability_target-1)},i.onFastermenu=function(t,e){this.fastermenu[t.cfg.ability_target]?this.fastermenu[t.cfg.ability_target]*=t.cfg.ability_value/100:this.fastermenu[t.cfg.ability_target]=t.cfg.ability_value/100,e||C.default.ins.machineDatas[t.cfg.ability_target-1].attr.calFoodFinalTime()},i.onAllmenuprofit=function(t,e){this.menuprofitValue[t.cfg.ability_target]?this.menuprofitValue[t.cfg.ability_target]*=t.cfg.ability_value:this.menuprofitValue[t.cfg.ability_target]=t.cfg.ability_value,e||C.default.ins.reCalAllFoodValue()},i.onCashirespeed=function(t,e){O.default.ins.waiterspeed=O.default.ins.waiterspeed*t.cfg.ability_value/100,e||m.default.ins.calWaiterSpeed()},i.onChefspeed=function(t,e){O.default.ins.chefspeed=O.default.ins.chefspeed*t.cfg.ability_value/100,e||m.default.ins.calChefSpeed()},i.onAddcashire=function(t,e){var n=this;if(O.default.ins.waiterCnt+=t.cfg.ability_value,!e)for(var r=S.default.ins.layer,o=function(){var t=l.default.NodePoolMsr.catUnlockAni.pop(),e=t.getComponent(y.default),o=O.default.ins.getNextWaiterPos();t.position=o,r.addChild(t),e.init(function(){var t=O.default.ins.createWaiter(o);O.default.ins.showLang(t.node,g.RoleLangType.OPEN_BOX)},n)},i=0;i<t.cfg.ability_value;i++)o()},i.onAddchef=function(t,e){var n=this;if(O.default.ins.chefCnt+=t.cfg.ability_value,!e)for(var r=S.default.ins.layer,o=function(){var t=l.default.NodePoolMsr.catUnlockAni.pop(),e=t.getComponent(y.default),o=O.default.ins.getNextChefPos();t.position=o,r.addChild(t),e.init(function(){var t=O.default.ins.createChef(o);O.default.ins.showLang(t.node,g.RoleLangType.OPEN_BOX)},n)},i=0;i<t.cfg.ability_value;i++)o()},i.onAddcustomer1=function(){w.default.ins.unlockDesk2()},i.onAddcustomer2=function(t,e){if(e)w.default.ins.unlockDesk(t.cfg.ability_target);else{var n=w.default.ins.deskDatas[t.cfg.ability_target],r=l.default.NodePoolMsr.cookUnlockAni.pop(),o=r.getComponent(y.default),i=n.node.position;r.position=i,S.default.ins.layer.addChild(r),o.init(function(){w.default.ins.unlockDesk(t.cfg.ability_target)},this)}},i.onAddcar=function(t){O.default.ins.carCnt+=t.cfg.ability_value},i.desotrySelf=function(){},i.updateUpgradeDiscount=function(){for(var t,e=r(this.datas);!(t=e()).done;)t.value.calCost();this.onUpdateMoney()},i.onUpdateMoney=function(){for(var t,e=!1,n=S.default.ins.mapSaveData.money,o=r(this.datas);!(t=o()).done;)if(t.value.cost<=n){e=!0;break}l.default.RedPointMgr.next(l.default.RedPointMgr.types.StageUpgrade,e),this.updateTipView()},i.isUnlock=function(t){var e=this.getModel().getCurMapData();return!!e.stageUpgrade&&e.stageUpgrade.includes(t)},i.updateTipView=function(){if(this.isSysOpen&&!(S.default.ins.curId>l.default.ConfigManager.gameConf.game.stageUpgradeTip)){var t=this.datas[0],e=t&&t.canBuy();l.default.ViewManager.isShow(21)?e?l.default.ViewManager.getView(21).updateUI(t):l.default.ViewManager.close(21):e&&l.default.ViewManager.open(21,t)}},o}(_.default)).ins=null,s=c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([I],s),u.default=s=c,(u=T=u.AbilityType||(u.AbilityType={}))[u.menuprofit=101]="menuprofit",u[u.allmenuprofit=102]="allmenuprofit",u[u.fastermenu=201]="fastermenu",u[u.addcustomer1=301]="addcustomer1",u[u.addcustomer2=302]="addcustomer2",u[u.addcar=303]="addcar",u[u.addcashire=401]="addcashire",u[u.addchef=402]="addchef",u[u.cashirespeed=501]="cashirespeed",u[u.chefspeed=502]="chefspeed",cc._RF.pop()},{}],StageUpgradeTipView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"0e185iqilxK8at+76MVm4OA","StageUpgradeTipView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("BaseView"),s=i("StageUpgradeViewItem"),u=cc._decorator,l=u.ccclass,h=u.property;u.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).item=null,e.bgType=0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(e){t.prototype.open.call(this),this.updateUI(e)},i.initUI=function(){t.prototype.initUI.call(this),this.item.isDestroy=!1},i.updateUI=function(t){this.item.setData(t),this.item.show()},o}(c.default),o([h(s.default)],i.prototype,"item",void 0),i=o([l],i),a.default=i,cc._RF.pop()},{}],StageUpgradeViewItem:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"2df3dplCtVO46+GnXlov9Zb","StageUpgradeViewItem");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("SwitchFrame"),u=i("MyBigLong"),l=i("StageUpgradeService"),h=cc._decorator,f=h.ccclass,d=h.property;h.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).content=null,e.titleLab=null,e.descLab=null,e.iconSpr=null,e.costBtn=null,e.costLab=null,e.switchFrame=null,e.data=null,e.isShow=!1,e.isDestroy=!0,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setData=function(t){this.data=t,this.isShow=!1},i.updtaeBtnState=function(){var t=this.data.canBuy();this.costBtn.interactable=t,this.costLab.setMaterial(0,t?this.costBtn.normalMaterial:this.costBtn.grayMaterial)},i.show=function(){var t;this.content.active=!0,this.isShow||(this.isShow=!0,this.titleLab.string=this.data.title,this.descLab.string=this.data.desc,this.costLab.string=u.default.toString(this.data.cost),(t=this.data.getIconUrl())?c.default.CommonUtils.setSpriteFrame(t,this.iconSpr):(this.iconSpr.spriteFrame=this.data.getFoodImg().spriteFrame,this.switchFrame&&(this.switchFrame.node.active=!0,this.data.cfg.ability_type==l.AbilityType.menuprofit?this.switchFrame.frameIndex=0:this.data.cfg.ability_type==l.AbilityType.fastermenu?this.switchFrame.frameIndex=1:this.switchFrame.node.active=!1))),this.updtaeBtnState()},i.hide=function(){this.content.active=!1},i.onTouchCostBtn=function(){var t=this.costBtn.node.convertToWorldSpaceAR(cc.Vec2.ZERO);l.default.ins.buy(this.data.cfg.order,!1,t)&&this.isDestroy&&(this.node.removeFromParent(),this.node.destroy())},o}(cc.Component),o([d(cc.Node)],i.prototype,"content",void 0),o([d(cc.Label)],i.prototype,"titleLab",void 0),o([d(cc.Label)],i.prototype,"descLab",void 0),o([d(cc.Sprite)],i.prototype,"iconSpr",void 0),o([d(cc.Button)],i.prototype,"costBtn",void 0),o([d(cc.Label)],i.prototype,"costLab",void 0),o([d(s.default)],i.prototype,"switchFrame",void 0),i=o([f],i),a.default=i,cc._RF.pop()},{}],StageUpgradeView:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e57a9p+CTlGk6d1GuqWsBTv","StageUpgradeView");var c,s=t,u=n;c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(u,"__esModule",{value:!0});var l=s("App"),h=s("BaseView"),f=s("NotificationConst"),d=s("StageUpgradeService"),p=s("StageUpgradeViewItem"),y=cc._decorator,v=y.ccclass,g=y.property;y.menu,s=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).content=null,e.scrollView=null,e.itemPre=null,e.empty=null,e.items=null,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var i=o.prototype;return i.open=function(){t.prototype.open.call(this)},i.initUI=function(){t.prototype.initUI.call(this),this.initItem()},i.onDisable=function(){l.default.NotificationCenter.removeListener(f.NotificationConst.STAGE_UPGRADE_UPDATE,this.updateUI,this)},i.updateUI=function(t){this.empty.active=!t},i.initItem=function(){for(var t=d.default.ins.datas,e=0;e<t.length;e++){var n=cc.instantiate(this.itemPre);this.content.addChild(n);var r=n.getComponent(p.default);if(r.setData(t[e]),e<6&&r.show(),50<=e)break}t.length?l.default.NotificationCenter.addListener(f.NotificationConst.STAGE_UPGRADE_UPDATE,this.updateUI,this):this.empty.active=!0},i.updateItem=function(){for(var t,e=r(this.content.getComponentsInChildren(p.default));!(t=e()).done;)t.value.updtaeBtnState()},i.onTouchScrollView=function(){for(var t,e=this.content.getComponentsInChildren(p.default),n=this.scrollView.getContentPosition().y,o=r(e);!(t=o()).done;){var i=t.value,a=i.node.y+n,c=i.node.y-i.node.height+n;a<-525||-47<c?i.hide():i.show()}},o}(h.default),c([g(cc.Node)],s.prototype,"content",void 0),c([g(cc.ScrollView)],s.prototype,"scrollView",void 0),c([g(cc.Prefab)],s.prototype,"itemPre",void 0),c([g(cc.Node)],s.prototype,"empty",void 0),s=c([v],s),u.default=s,cc._RF.pop()},{}],StopAutoDeclare:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e603af81JNK9aYJkCJYKgwK","StopAutoDeclare");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass;a.menu,o=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o}(cc.Component),o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([c()],o),i.default=o,cc._RF.pop()},{}],StringParseUtils:[function(t,e,n){"use strict";cc._RF.push(e,"ab848jgSC5J7pbM/rPrxHS5","StringParseUtils");var r=n;Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(){}return t.ArrayParser=function(t){for(var e=[],n=0,r=(t=t.replace(/\s/gi,"")).match(/\[[A-Za-z0-9,]*\]/gi);n<r.length;n++){var o,i=r[n],a=i.substr(1,i.length-2).split(",");for(o in a)NaN!==parseInt(a[o])&&(a[o]=parseInt(a[o]));e.push(a)}return e},t.FuncParser=function(e){var n={funcName:(e=e.replace(/\s/gi,"")).replace(/\(.*\)/gi,""),param:{}},r=e.match(/\w*=(\[[A-Za-z0-9,]*\]|\w*)/gi);if(r)for(var o=0;o<r.length;o++){var i=r[o].split("="),a=parseInt(i[1]);"["==i[1][0]?n.param[i[0]]=t.ArrayParser(i[1])[0]:isNaN(a)?n.param[i[0]]=i[1]:n.param[i[0]]=a}else{var c,s=(r=e.match(/\([0-9]*\)/gi))[0].replace(/\(|\)/gi,"");for(c in r)n.param["param"+c]=parseInt(s)}return n},t.vec2Parser=function(t){return t=t.split(","),new cc.Vec2(parseInt(t[0]),parseInt(t[1]))},t.colorParser=function(t){return t=t.split(","),new cc.Color(parseInt(t[0]),parseInt(t[1]),parseInt(t[2]))},t.defaultNumStringParser=function(t){var e,n={};for(e in t.split("#")){var r=e.split(":");n[parseInt(r[0])]=parseInt(r[1])}return n},t}();r.default=o,cc._RF.pop()},{}],StringUtil:[function(t,e,n){"use strict";cc._RF.push(e,"2850bDcoJ1Lz5y9PsxskX/s","StringUtil");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.StringUtil=void 0;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}String.prototype.format=function(){var t=arguments;return!!this&&this.replace(/\{(\d+)\}/g,function(e,n){return void 0!==t[n]?t[n]:e})},(i.prototype=new Error).name="InvalidCharacterError",r.StringUtil=function(){function t(){}var e=t.prototype;return e.zipStr=function(t){return this.btoa(pako.gzip(t,{to:"string"}))},e.zipStr1=function(t){return pako.gzip(t)},e.unzip=function(t){return t=this.atob(t).split("").map(function(t){return t.charCodeAt(0)}),pako.inflate(new Uint8Array(t),{to:"string"})},e.unzip1=function(t){return pako.inflate(new Uint8Array(t),{to:"string"})},e.stringToHex=function(t){for(var e="",n=0;n<t.length;n++)e+=t.charCodeAt(n).toString(16),e+=",";return e},e.arrayBufferToHex=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,o=0;o<r;o++)e+=n[o].toString(16),e+=",";return e},e.arrayBufferToString=function(t){return String.fromCharCode.apply(null,new Uint8Array(t))},e.translateToInt=function(t){return t.map(function(t){return+t})},e.stringToArrayBuffer=function(t){return t=this.stringToBytes(t),new Uint8Array(t).buffer},e.arrayBufferTableConnect=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r].byteLength;var o=new ArrayBuffer(n),i=new Uint8Array(o);for(n=0,r=0;r<e;r++)for(var a=t[r].byteLength,c=new Uint8Array(t[r]),s=0;s<a;s++)i[n]=c[s],n++;return o},e.arrayBufferConnect=function(t,e){for(var n=new Uint8Array(t),r=new Uint8Array(e),o=n.byteLength,i=r.byteLength,a=(e=new ArrayBuffer(o+i),new Uint8Array(e)),c=0;c<o;c++)a[c]=n[c];for(c=0;c<i;c++)a[o+c]=r[c];return e},e.stringToBytes=function(t){for(var e,n,r=[],o=0;o<t.length;o++){for(e=t.charCodeAt(o),n=[];n.push(255&e),e>>=8;);r=r.concat(n.reverse())}return r},e.bytesToString=function(t){for(var e=t.byteLength,n="",r=0;r<e;r++)n+=String.fromCharCode(255&t[r]);return n},e.stringToInt=function(t){for(var e=0,n=Math.min(4,t.length),r=0;r<n;r++)e+=t.charCodeAt(r)<<8*(3-r);return e},e.intToString=function(t){var e="";return e+=String.fromCharCode(t>>24&255),e+=String.fromCharCode(t>>16&255),(e+=String.fromCharCode(t>>8&255))+String.fromCharCode(255&t)},e.stringToShort=function(t){for(var e=0,n=Math.min(2,t.length),r=0;r<n;r++)e+=t.charCodeAt(r)<<8*(1-r);return e},e.shortToString=function(t){var e="";return(e+=String.fromCharCode(t>>8&255))+String.fromCharCode(255&t)},e.stringToByte=function(t){for(var e=0,n=Math.min(1,t.length),r=0;r<n;r++)e+=t.charCodeAt(r);return e},e.byteToString=function(t){return String.fromCharCode(255&t)},e.hex_string_to_buffer=function(t){var e=[];for(2<=t.length&&"0x"==t.substr(0,2).toLowerCase()&&(t=t.substr(2));0<t.length;)e.unshift(parseInt(t.slice(-2),16)),t=t.slice(0,-2);return new Uint8Array(e).buffer},e.buffer_hex_string=function(t){for(var e=new Uint8Array(t),n=[],r=0;r<e.length;r++){var o=e[r];n.push((o<16?"0":"")+o.toString(16))}return n.join("")},e.buffPositive=function(t){for(var e=new Uint8Array(t),n=e.length,r=0;r<n;r++){var o=Math.pow(2,8)-1-e[r];e[r]=r==n-1?1+o:o}return e.buffer},e.buffer2int=function(t){var e=new Uint8Array(t),n=1,r=[];-1==(n=0<e.length?e[0].toString(2).length<8?1:-1:n)&&(t=this.buffPositive(t));for(var o=0;o<e.length;o++){var i=e[o];r.push((i<16?"0":"")+i.toString(16))}return t=r.join(""),n*parseInt(t,16)},e.buffer2uint=function(t){for(var e=new Uint8Array(t),n=[],r=0;r<e.length;r++){var o=e[r];n.push((o<16?"0":"")+o.toString(16))}return t=n.join(""),parseInt(t,16)},e.encodeUTF8=function(t){for(var e,n="",r=0,o=t.length;r<o;r++)e=t.charCodeAt(r).toString(16),n+="\\u"+new Array(5-e.length).join("0")+e;return n},e.decodeUTF8=function(t){return t.replace(/(\\u)(\w{4}|\w{2})/gi,function(t,e,n){return String.fromCharCode(parseInt(n,16))})},e.utf16ToUtf8=function(t){if(t){for(var e,n=[],r=t.length,o=0;o<r;o++)0<(e=t.charCodeAt(o))&&e<=127?n.push(t.charAt(o)):128<=e&&e<=2047?n.push(String.fromCharCode(192|e>>6&31),String.fromCharCode(128|63&e)):2048<=e&&e<=65535&&n.push(String.fromCharCode(224|e>>12&15),String.fromCharCode(128|e>>6&63),String.fromCharCode(128|63&e));return n.join("")}},e.utf8ToUtf16=function(t){if(t){for(var e,n,r=[],o=t.length,i=0;i<o;i++)(e=[]).push(t.charCodeAt(i)),0==(e[0]>>7&255)?r.push(t.charAt(i)):6==(e[0]>>5&255)?(e.push(t.charCodeAt(++i)),(n=[]).push(31&e[0]),n.push(63&e[1]),r.push(String.fromCharCode(n[0]<<6|n[1]))):14==(e[0]>>4&255)&&(e.push(t.charCodeAt(++i)),e.push(t.charCodeAt(++i)),(n=[]).push(e[0]<<4|e[1]>>2&15),n.push((3&e[1])<<6|63&e[2]),r.push(String.fromCharCode(n[0]<<8|n[1])));return r.join("")}},e.arrayBufferToUtf16=function(t){return this.utf8ToUtf16(this.arrayBufferToString(t))},e.btoa=function(t){for(var e,n,r=String(t),a=0,c=o,s="";r.charAt(0|a)||(c="=",a%1);s+=c.charAt(63&e>>8-a%1*8)){if(255<(n=r.charCodeAt(a+=.75)))throw new i("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return s},e.base64ToUint8=function(t){for(var e=atob(t),n=e.length,r=new Uint8Array(n);n--;)r[n]=e.charCodeAt(n);return r},e.uint8ToBase64=function(t){for(var e="",n=0,r=t.length;n<r;++n)e+=String.fromCharCode(t[n]);return btoa(e)},e.atob=function(t){var e=String(t).replace(/[=]+$/,"");if(e.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,c=0,s="";r=e.charAt(c++);~r&&(n=a%4?64*n+r:r,a++%4)&&(s+=String.fromCharCode(255&n>>(-2*a&6))))r=o.indexOf(r);return s},e.arrayBufferToBytes=function(t){return this.stringToBytes(this.arrayBufferToString(t))},e.strRepeat=function(t,e){return new Array(e+1).join(t)},e.isBase64=function(t){return/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/.test(t)},e.GetLength=function(t){if(!t)return NaN;for(var e,n=0,r=t.length,o=0;o<r;o++)n+=0<(e=t.charCodeAt(o))&&e<=128?1:2;return n},e.CutStr=function(t,e,n){if(void 0===n&&(n="..."),!t)return null;var r=0;if(this.GetLength(t)<=e)return t;for(var o=0;o<t.length;o++){var i=t.charCodeAt(o);if((r+=0<i&&i<=128?1:2)>=e)return t.substr(0,o+1)+n}return t},e.checkIdcard=function(t){var e=new Array("\u9a8c\u8bc1\u901a\u8fc7!","\u8eab\u4efd\u8bc1\u53f7\u7801\u4f4d\u6570\u4e0d\u5bf9!","\u8eab\u4efd\u8bc1\u53f7\u7801\u51fa\u751f\u65e5\u671f\u8d85\u51fa\u8303\u56f4\u6216\u542b\u6709\u975e\u6cd5\u5b57\u7b26!","\u8eab\u4efd\u8bc1\u53f7\u7801\u6821\u9a8c\u9519\u8bef!","\u8eab\u4efd\u8bc1\u5730\u533a\u975e\u6cd5!"),n=(new Array,t.split(""));if(null=={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[parseInt(t.substr(0,2))])return e[4];switch(t.length){case 15:var r=(parseInt(t.substr(6,2))+1900)%4==0||(parseInt(t.substr(6,2))+1900)%100==0&&(parseInt(t.substr(6,2))+1900)%4==0?/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/;return r.test(t)?e[0]:e[2];case 18:return(r=parseInt(t.substr(6,4))%4==0||parseInt(t.substr(6,4))%100==0&&parseInt(t.substr(6,4))%4==0?/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}19[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/).test(t)?(r=7*(parseInt(n[0])+parseInt(n[10]))+9*(parseInt(n[1])+parseInt(n[11]))+10*(parseInt(n[2])+parseInt(n[12]))+5*(parseInt(n[3])+parseInt(n[13]))+8*(parseInt(n[4])+parseInt(n[14]))+4*(parseInt(n[5])+parseInt(n[15]))+2*(parseInt(n[6])+parseInt(n[16]))+ +parseInt(n[7])+6*parseInt(n[8])+3*parseInt(n[9]),"10X98765432".substr(r%11,1)==n[17]?e[0]:e[3]):e[2];default:return e[1]}},t}(),cc._RF.pop()},{}],SubTree:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c7d23Ia+bxD/ZSbETbzP5/6","SubTree");var i=t,a=n;Object.defineProperty(a,"__esModule",{value:!0});var c=i("Actions"),s=i("BaseAction"),u=i("constants"),l=i("BehaviorTree"),h=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).tree=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n),i.setSubTreeLoadFunc=function(t){this.subTreeLoadFunc=t};var a,s,h=i.prototype;return h.loadDataFinish=function(t){this.tree=new l.default,this.tree.load(t,c.Actions)},h.open=function(){},h.tick=function(t){return this.tree?this.tree.tick(t.target,t.blackboard):u.RUNNING},h.interrupt=function(t){var e=t.blackboard.get("openNodes",this.tree.id);if(e){var n=t.tree;t.tree=this.tree;for(var r=0;r<e.length;r++){var o=e[r];o._close(t),o.interrupt&&o.interrupt(t)}t.tree=n}},a=i,(s=[{key:"properties",get:function(){return this._properties},set:function(t){this._properties=t,this._properties.path&&i.subTreeLoadFunc(this)}}])&&r(a.prototype,s),Object.defineProperty(a,"prototype",{writable:!1}),i}(s.default);a.default=h,cc._RF.pop()},{}],Succeeder:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"cb1bdgwJh9K86h39q8MJ9UJ","Succeeder");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Action");i.default=function(t){var e,n;function o(){return t.call(this,{name:"Succeeder"})||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.tick=function(){return a.SUCCESS},o}(c.default),cc._RF.pop()},{}],SuperCashBar:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"632f24FXflCCpi9ONN0VKDf","SuperCashBar");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("NotificationConst"),u=(i("ViewConst"),i("ShopConst")),l=cc._decorator,h=l.ccclass,f=l.property;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).icon=null,e.label=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},i.onTouchEnd=function(){},i.onEnable=function(){c.default.NotificationCenter.addListener(s.NotificationConst.UPDATE_SUPER_CASH,this.onUpdate,this),this.onUpdate()},i.onUpdate=function(){this.label.string=c.default.GameDataMsr.playerInfo.diamond+""},i.onDisable=function(){c.default.NotificationCenter.removeListener(s.NotificationConst.UPDATE_SUPER_CASH,this.onUpdate,this)},i.onTouchAddBtn=function(){c.default.ViewManager.open(7,u.ShopType.Diamond)},o}(cc.Component),o([f(cc.Sprite)],i.prototype,"icon",void 0),o([f(cc.Label)],i.prototype,"label",void 0),i=o([h],i),a.default=i,cc._RF.pop()},{}],SwitchFrame:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"d525cQMDetDT557p7rf1QdS","SwitchFrame");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property,h=(s.menu,s.requireComponent),f=s.executeInEditMode;i=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).fames=[],e._frameIndex=0,e.sprite=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s.onLoad=function(){this.sprite||(this.sprite=this.getComponent(cc.Sprite))},s.start=function(){this.switch(this._frameIndex)},s.switch=function(t){this.sprite&&this.sprite.spriteFrame!==this.fames[t]&&this.fames[t]&&(this.sprite.spriteFrame=this.fames[t]),this._frameIndex=t},a=i,(c=[{key:"frameIndex",get:function(){return this._frameIndex},set:function(t){null==t?this._frameIndex=t:t!==this._frameIndex&&this.switch(t)}},{key:"framNum",get:function(){return this.fames.length}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component),c([l({type:cc.SpriteFrame})],i.prototype,"fames",void 0),c([l()],i.prototype,"frameIndex",null),c([l(cc.Sprite)],i.prototype,"sprite",void 0),i=c([u,h(cc.Sprite),f],i),a.default=i,cc._RF.pop()},{}],SwitchMapView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"5342cq5+FhHvovJ/Ov7NS3L","SwitchMapView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("BaseView"),l=i("ControllerConst"),h=(i("ViewConst"),i("BagConst")),f=i("GameConst"),d=i("MachineService"),p=i("MapService"),y=cc._decorator,v=y.ccclass,g=y.property;y.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).nowIconSpr=null,e.newIconSpr=null,e.nowNameLab=null,e.newNameLab=null,e.rewardNumLab=null,e.conditionRichText=null,e.btn=null,e.btnLab=null,e.rewardNode=null,e.rewardIcon=null,e.mapId=-1,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(){if(t.prototype.open.call(this),this.mapId!=p.default.ins.curId){this.mapId=p.default.ins.curId;var e=p.default.ins.curCfg,n=this.mapId+1;if(0<e.clear_reward_suitcasekey_count){this.rewardNode.active=!0,this.rewardNumLab.string="x"+e.clear_reward_suitcasekey_count;var r=c.default.ControllerManager.applyFunc(l.ControllerConst.Item,h.BagConst.GET_ITEM,e.clear_reward_suitcasekey_idx);c.default.CommonUtils.setSpriteFrame(r.getItemPic(),this.rewardIcon)}else this.rewardNode.active=!1;var o=c.default.ConfigManager.getConfig("StageSet")[n];c.default.CommonUtils.setSpriteFrameByBundle(f.BundleType.MAP_ICON,"stage/"+e.stage_icon,this.nowIconSpr),c.default.CommonUtils.setSpriteFrameByBundle(f.BundleType.MAP_ICON,"stage/"+o.stage_icon,this.newIconSpr),this.newNameLab.string=s.GameText.getTextByStr(o.stage_name),this.nowNameLab.string=s.GameText.getTextByStr(e.stage_name),this.conditionRichText.string="<b><color=#b86860>\u6240\u6709\u5de5\u4f5c\u53f0\u9762\u8fbe\u5230</c><color=#6c9f64>"+e.machine_max_lv+"\u7b49\u7ea7</color><color=#b86860>\uff01\uff01</c></b>",this.updateBtnState()}},i.initUI=function(){t.prototype.initUI.call(this)},i.updateBtnState=function(){var t=d.default.ins.isAllMachineMax();this.btn.interactable=t,this.btnLab.setMaterial(0,t?this.btn.normalMaterial:this.btn.grayMaterial)},i.onTouchBtn=function(){p.default.ins.switchMap(),this.closeView()},i.onTouchWorldMap=function(){c.default.ViewManager.open(54,!0)},o}(u.default),o([g(cc.Sprite)],i.prototype,"nowIconSpr",void 0),o([g(cc.Sprite)],i.prototype,"newIconSpr",void 0),o([g(cc.Label)],i.prototype,"nowNameLab",void 0),o([g(cc.Label)],i.prototype,"newNameLab",void 0),o([g(cc.Label)],i.prototype,"rewardNumLab",void 0),o([g(cc.RichText)],i.prototype,"conditionRichText",void 0),o([g(cc.Button)],i.prototype,"btn",void 0),o([g(cc.Label)],i.prototype,"btnLab",void 0),o([g(cc.Node)],i.prototype,"rewardNode",void 0),o([g(cc.Sprite)],i.prototype,"rewardIcon",void 0),i=o([v],i),a.default=i,cc._RF.pop()},{}],SwithBtnComponent:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"4c36asmWpVAh6W9LS05BicG","SwithBtnComponent");var i,a,c=t,s=n;a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(s,"__esModule",{value:!0}),s.SwitchType=void 0;var u=c("App"),l=c("SwitchFrame");(c=i=s.SwitchType||(s.SwitchType={}))[c.BG_MUSIC=0]="BG_MUSIC",c[c.EFFECT_MUSIC=1]="EFFECT_MUSIC",c[c.INFORM=2]="INFORM",c[c.HIGH_FRAME=3]="HIGH_FRAME",c[c.DEFAULT=4]="DEFAULT";var h=cc._decorator,f=h.ccclass,d=h.property;h.menu,c=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this).switchFrame=null,e.openNode=null,e.closeNode=null,e._switchType="",e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c,s,h=a.prototype;return h.onLoad=function(){this.closeNode||(this.closeNode=this.node.getChildByName("closeNode")),this.openNode||(this.openNode=this.node.getChildByName("openNode")),this.switchFrame||(this.switchFrame=this.node.getComponent(l.default)),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchBtn,this),this.setSwitchType()},h.setSwitchType=function(){switch(this.switchType){case i.BG_MUSIC:this.setBgMusic();break;case i.EFFECT_MUSIC:this.setEffectMusic();break;case i.HIGH_FRAME:this.setHighFrame();break;default:this.setDefault()}},h.setBonus=function(){var t=!!u.default.SettingManager.isBonusOver;this.setSwitchFrame(t),this.setState(t)},h.setState=function(t){this.isOpen=t,this.openNode.active=t,this.closeNode.active=!t},h.setSwitchFrame=function(t){this.switchFrame.frameIndex=t?1:0},h.setBgMusic=function(){var t=u.default.SoundManager.getBgStatus();this.setSwitchFrame(t),this.setState(t)},h.setEffectMusic=function(){var t=u.default.SoundManager.getEffectStatus();this.setSwitchFrame(t),this.setState(t)},h.setAutoWork=function(){var t=!!u.default.SettingManager.autoCollection;this.setSwitchFrame(t),this.setState(t)},h.setCompose=function(){var t=!!u.default.SettingManager.overlapJudgeInCamp;this.setSwitchFrame(t),this.setState(t)},h.setConnect=function(){var t=!!u.default.SettingManager.recursionSyntheticInCamp;this.setSwitchFrame(t),this.setState(t)},h.setPetFive=function(){var t=!!u.default.SettingManager.petFiveCompose;this.setSwitchFrame(t),this.setState(t)},h.setConfirmUse=function(){var t=!!u.default.SettingManager.confirmUse;this.setSwitchFrame(t),this.setState(t)},h.setHighFrame=function(){var t=!!u.default.SettingManager.highFrame;this.setSwitchFrame(t),this.setState(t)},h.setDefault=function(){this.setSwitchFrame(this.isOpen),this.setState(this.isOpen)},h.onTouchBtn=function(t){switch(t.bubbles=!1,this.switchType){case i.BG_MUSIC:u.default.SoundManager.setBgOn(!this.isOpen);break;case i.EFFECT_MUSIC:u.default.SoundManager.setEffectOn(!this.isOpen);break;case i.HIGH_FRAME:u.default.SettingManager.highFrame=this.isOpen?0:1;break;default:this.isOpen=!this.isOpen}this.setSwitchType()},c=a,(s=[{key:"switchType",get:function(){return i[this._switchType]},set:function(t){this._switchType=i[t]}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),a}(cc.Component),a([d(l.default)],c.prototype,"switchFrame",void 0),a([d(cc.Node)],c.prototype,"openNode",void 0),a([d(cc.Node)],c.prototype,"closeNode",void 0),a([d()],c.prototype,"_switchType",void 0),a([d({type:cc.Enum(i)})],c.prototype,"switchType",null),c=a([f],c),s.default=c,cc._RF.pop()},{}],SystemComponent:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"095c24gWrtFE4ERcaFCHYSJ","SystemComponent");var s,u=t,l=n;s=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(l,"__esModule",{value:!0}),l.UI=void 0;var h=u("NotificationConst"),f=u("SystemOpenConst"),d=u("SystemOpenController"),p=u("App"),y=u("GameText"),v=u("EffectUtils"),g=u("Toast"),m=cc._decorator,_=m.ccclass,b=m.property,w=(m.menu,m.executeInEditMode);u=l.UI||(l.UI={}),s([b],(l=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this)._systemIndex="",e.lock=null,e.unlock=null,e.graySprites=[],e.showType=0,e.isPlay=!0,e.isInit=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,c(e,n);var i,s,u=o.prototype;return u.start=function(){var t;this.config=d.default.ins.getConfigByType(this._systemIndex),this.config&&((t=d.default.ins.checkSystemOpen(this.config.index))||(p.default.NotificationCenter.addListener(h.NotificationConst.SYS_OPEN,this.updateSys,this,200),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouch,this)),this.updateSys(this.systemIndex,t,!1))},u.onTouch=function(){this.isOpen||g.default.launch(y.GameText.getTextByStr("system_con_"+this.config.id))},u.onDestroy=function(){p.default.NotificationCenter.removeListener(h.NotificationConst.SYS_OPEN,this.updateSys,this)},u.updateSys=function(t,e,n){var r=this;if(null==e)return p.default.TimerManager.doTimer(500,1,function(){var t=d.default.ins.checkSystemOpen(r.config.index);r.updateSys(r.config.index,t,!1)},this),void this.updateState(t,e);if(t==this.systemIndex)if((this.isOpen=e)&&n&&this.isPlay){if(e&&n&&this.isPlay){p.default.NotificationCenter.removeListener(h.NotificationConst.SYS_OPEN,this.updateSys,this);var o=this.node.convertToWorldSpaceAR(cc.v2(0,0));""!=this.config.pos&&"none"!=this.config.pos&&(i={},p.default.CommonUtils.parsePos(i,this.config.pos,"|"),o.x=p.default.CommonUtils.getPosX1(i,cc.winSize.width,0),o.y=p.default.CommonUtils.getPosY1(i,cc.winSize.height,0));var i={id:this.config.id,icon:this.config.iconSource,desc:this.config.desc,pos:o,func:function(){r.updateState(t,e)},obj:this};v.default.instance.playLockAni(i)}}else this.updateState(t,e)},u.updateState=function(t,e){if(t==this.systemIndex){e&&p.default.NotificationCenter.removeListener(h.NotificationConst.SYS_OPEN,this.updateSys,this);var n=this.node.getComponent(cc.Button);switch(n&&(n.interactable=e),this.showType){case f.ShowTypeConst.LOCK:if(this.lock&&(this.lock.active=!e),this.unlock&&(this.unlock.active=e),this.graySprites.length)for(var o,i=r(this.graySprites);!(o=i()).done;){var a=o.value;e?a.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")):a.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite"))}break;case f.ShowTypeConst.HIDE:this.node.active=e}}},i=o,(s=[{key:"systemIndex",get:function(){return f.OpenTypeConst[this._systemIndex]},set:function(t){this._systemIndex=f.OpenTypeConst[t]}},{key:"state",get:function(){return this.isOpen},set:function(t){this.isOpen=t,this.updateState(this.systemIndex,t)}}])&&a(i.prototype,s),Object.defineProperty(i,"prototype",{writable:!1}),o}(cc.Component)).prototype,"_systemIndex",void 0),s([b({type:cc.Enum(f.OpenTypeConst)})],l.prototype,"systemIndex",null),s([b({type:cc.Node,visible:function(){return this.showType==f.ShowTypeConst.LOCK}})],l.prototype,"lock",void 0),s([b({type:cc.Node})],l.prototype,"unlock",void 0),s([b({type:cc.Sprite,visible:function(){return this.showType==f.ShowTypeConst.LOCK}})],l.prototype,"graySprites",void 0),s([b({type:cc.Enum(f.ShowTypeConst)})],l.prototype,"showType",void 0),s([b({})],l.prototype,"isPlay",void 0),l=s([_,w],l),u.SystemComponent=l,cc._RF.pop()},{}],SystemOpenConfig:[function(t,e,n){"use strict";cc._RF.push(e,"f70682JhohFP7QstyEIT2+M","SystemOpenConfig");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("ConfigManager"),a=r("SystemOpenConst");o.default=function(){function t(){}return t.prototype.parse=function(t){var e=this;for(var n in t)this[n]=t[n];var r=t.open.split("|");return this.openConList=[],r.forEach(function(t){t=t.split("_"),e.openConList.push({type:t[0],value:parseInt(t[1])})}),this.index=a.OpenTypeConst[this.id],this},t}(),i.registerJSONConf("SystemDataManager","files/SystemOpenConfig"),cc._RF.pop()},{}],SystemOpenConst:[function(t,e,n){"use strict";cc._RF.push(e,"57471pQn+JM3IZC4Mv0jZ1O","SystemOpenConst");var r=e,o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.ShowTypeConst=o.OpenTypeConst=o.OpenConst=void 0,(r=o.OpenConst||(o.OpenConst={}))[r.CHCEK_OPEN=0]="CHCEK_OPEN",r[r.CHNAGER_OPEN_STATE=1]="CHNAGER_OPEN_STATE",r[r.GET_OPEN_STATE=2]="GET_OPEN_STATE",r[r.CHCEK_SYSTEM_GUIDE=3]="CHCEK_SYSTEM_GUIDE",r[r.GET_OPEN_CONDITION=4]="GET_OPEN_CONDITION",(r=o.OpenTypeConst||(o.OpenTypeConst={}))[r.MAP=0]="MAP",r[r.STAGE_UPGRADE=1]="STAGE_UPGRADE",r[r.DIAMOND_BAR=2]="DIAMOND_BAR",r[r.ABILITY=3]="ABILITY",r[r.AD_RATE_BUFF=4]="AD_RATE_BUFF",r[r.AD_REWARD=5]="AD_REWARD",r[r.LV_UP_DIAMOND=6]="LV_UP_DIAMOND",r[r.SHOP=7]="SHOP",r[r.BUFF=8]="BUFF",r[r.EQUIPMENT=9]="EQUIPMENT",r[r.FIRST_GIFT=10]="FIRST_GIFT",r[r.BANK=11]="BANK",r[r.MAIL=12]="MAIL",r[r.HELPER=13]="HELPER",r[r.REMOVE_AD=14]="REMOVE_AD",(o=o.ShowTypeConst||(o.ShowTypeConst={}))[o.HIDE=0]="HIDE",o[o.LOCK=1]="LOCK",cc._RF.pop()},{}],SystemOpenController:[function(t,e,n){"use strict";function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6088dg/oq9BB6w1e/mewQIt","SystemOpenController");var u=t,l=n;Object.defineProperty(l,"__esModule",{value:!0});var h=u("App"),f=u("BaseController"),d=u("ControllerConst"),p=u("NotificationConst"),y=u("MachineService"),v=u("MapService"),g=u("StageUpgradeService"),m=u("GuideModel"),_=u("SystemOpenConfig"),b=u("SystemOpenConst"),w=null;l.default=function(t){var e,n;function o(){var e;return(e=t.call(this)||this)._waitOpenList=[],w=c(e),h.default.NotificationCenter.addListener(p.NotificationConst.INIT_GAME,e.init,c(e)),e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var i,u,l=o.prototype;return l.init=function(){if(h.default.NotificationCenter.removeListener(p.NotificationConst.INIT_GAME,this.init,this),!this._configMap){for(var t in this.initConfig(),this._configMap){var e=this._configMap[t];(t=this.checkSystemOpen(e.index,!0))?h.default.NotificationCenter.dispatch(p.NotificationConst.SYS_OPEN,e.index,t):this._waitOpenList.push(e)}this.initSelfEvent(),h.default.NotificationCenter.addListener(p.NotificationConst.CHECK_SYS_OPEN,this.checkSys,this),h.default.NotificationCenter.addListener(p.NotificationConst.GUIDE_STEP_FINISH,this.checkAllSys,this),h.default.NotificationCenter.addListener(p.NotificationConst.STAGE_UPGRADE_UPDATE,this.checkAllSys,this),h.default.NotificationCenter.addListener(p.NotificationConst.ENTER_MAP,this.checkAllSys,this),h.default.NotificationCenter.addListener(p.NotificationConst.MACHINE_UPDATE,this.checkAllSys,this)}},l.initSelfEvent=function(){this.registerFunc(b.OpenConst.CHCEK_OPEN,this.checkSystemOpen,this)},l.initConfig=function(){var t,e=h.default.ConfigManager.getConfig("SystemDataManager");for(t in this._configMap={},e){var n=e[t];n=(new _.default).parse(n),this._configMap[n.id]=n}},l.getConfigByIndex=function(t){if(this._configMap)return t=b.OpenTypeConst[t],this._configMap[t]},l.getConfigByType=function(t){if(this._configMap)return this._configMap[t]},l.checkSystemGuide=function(){},l.checkSystemOpen=function(t){if(!(t=this.getConfigByIndex(t)))return!1;for(var e,n=r(t.openConList);!(e=n()).done;){var o=e.value;switch(o.type){case"i":if(!h.default.Platform.getIsShowPay())return!1;break;case"m":if(!v.default.ins.curCfg)return!1;var i=v.default.ins.curId;if(o.value>i)return!1;if(o.value<i)return!0;break;case"l":if(o.value>y.default.ins.getCurMachineMaxLv())return!1;break;case"u":if(!g.default.ins.isUnlock(o.value))return!1;break;case"d":var a=h.default.GameDataMsr.playerInfo.registerTime/1e3/3600/24;if(i=h.default.DateUtils.Now()/1e3/3600/24,o.value>i-a)return!1;break;case"g":var c=h.default.ControllerManager.applyFunc(d.ControllerConst.Guide,m.GuideConst.CHECK_IS_GUIDE,o.value);if(!(c||(902==o.value&&(c=h.default.ControllerManager.applyFunc(d.ControllerConst.Guide,m.GuideConst.CHECK_IS_GUIDE,400)),c=c||h.default.ControllerManager.applyFunc(d.ControllerConst.Guide,m.GuideConst.CHECK_IS_GUIDE,1))))return!1}}return!0},l.checkAllSys=function(t){void 0===t&&(t=!1);for(var e=this._waitOpenList.length-1;0<=e;e--){var n=this._waitOpenList[e],r=this.checkSystemOpen(n.index,t);r&&(this._waitOpenList.splice(e,1),n.isPlayAni&&t?h.default.NotificationCenter.dispatch(p.NotificationConst.SYS_OPEN,n.index,r,!0):h.default.NotificationCenter.dispatch(p.NotificationConst.SYS_OPEN,n.index,r))}},l.checkSys=function(t,e){void 0===e&&(e=!1),null!=(e=this.checkSystemOpen(t,e))&&h.default.NotificationCenter.dispatch(p.NotificationConst.SYS_OPEN,t,e)},i=o,u=[{key:"ins",get:function(){return w}}],null&&a(i.prototype,null),u&&a(i,u),Object.defineProperty(i,"prototype",{writable:!1}),o}(f.default),cc._RF.pop()},{}],TestPoint:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"09c28xmOm5I052yNDpW2JQt","TestPoint");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){function t(t,e){this._x=t,this._y=e}var e,n,o=t.prototype;return o.equals=function(e){return e instanceof t?this._x==e._x&&this._y==e._y:this._x==e.x&&this._y==e.y},o.clone=function(){return cc.v2(this._x,this._y)},e=t,(n=[{key:"x",get:function(){return this._x},set:function(t){this._x=t,Log.error("\u88ab\u8d4b\u503c\u4e86")}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,Log.error("\u88ab\u8d4b\u503c\u4e86")}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),cc._RF.pop()},{}],TestScene:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"280c9TyyDVOpJdjb4zrgpwb","TestScene");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).debugBtn=null,e.prafab=null,e.isShow=!1,e.tempNode=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.debugBtn.isNotPlayClickBtn=!0},i.dynamicAtlasShowDebug=function(){this.tempNode?(this.tempNode.destroy(),this.tempNode=null):(this.tempNode=cc.instantiate(this.prafab),this.node.addChild(this.tempNode,0))},i.load=function(){cc.assetManager.loadAny},o}(cc.Component),a([u({type:cc.Button})],o.prototype,"debugBtn",void 0),a([u(cc.Prefab)],o.prototype,"prafab",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],TestSort:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"ef0ebY/FW9FWJnHzExDSZHl","TestSort");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property,h=s.playOnFocus,f=s.executeInEditMode;s.menu,i=function(){function t(){this.draw=null,this._RoundMax=100,this._radius=10,this.Pos_6=[]}var e,n,i=t.prototype;return i.Instantiate=function(){},i.onLoad=function(){this.___Start()},i.___Start=function(){this.draw.clear();var t=cc.v2(),e=this.Pos_6;this.Instantiate(t);for(var n=this._RoundMax,r=this._radius,o=1;o<=n;o++){for(var i=0;i<6;i++)e[i]=cc.v2(Math.sin(60*i*Math.PI/180)*r*o,Math.cos(60*i*Math.PI/180)*r*o).addSelf(t),this.Instantiate(e[i]);if(1<o)for(var a=0;a<6;a++)for(var c=e[(a+1)%6].sub(e[a]).normalize(),s=1;s<o;s++){var u=c.mul(r*s).addSelf(e[a]);this.Instantiate(u)}}this.draw.fill()},i.getNextPoint=r().mark(function t(e,n){var o,i,a,c,s,u,l,h,f;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n=-3),t.next=3,e;case 3:o=[],i=this._RoundMax,a=0;case 5:if(!(a<6)){t.next=14;break}if(o[a]=cc.v2(124*Math.sin((60*a+n)*Math.PI/180),124*Math.cos((60*a+n)*Math.PI/180)),t.t0=2<=a&&a<=5,!t.t0){t.next=11;break}return t.next=11,o[a].add(e);case 11:a++,t.next=5;break;case 14:c=2;case 15:if(!(c<=i)){t.next=36;break}s=2;case 17:if(!(s<=5)){t.next=33;break}return u=(s+1)%6,l=o[s].mul(c).addSelf(e),t.next=21,l;case 21:if(5==s){t.next=30;break}h=o[u].sub(o[s]).normalizeSelf(),f=1;case 24:if(!(f<c)){t.next=30;break}return t.next=27,h.mul(124*f).addSelf(l);case 27:f++,t.next=24;break;case 30:s++,t.next=17;break;case 33:c++,t.next=15;break;case 36:return t.abrupt("return",null);case 37:case"end":return t.stop()}},t,this)}),e=t,(n=[{key:"roundMax",get:function(){return this._RoundMax},set:function(t){this._RoundMax=t,this.___Start()}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t,this.___Start()}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),c([l(cc.Graphics)],i.prototype,"draw",void 0),c([l()],i.prototype,"roundMax",null),c([l()],i.prototype,"radius",null),i=c([u,f,h],i),a.default=i,cc._RF.pop()},{}],Tick:[function(t,e,n){"use strict";cc._RF.push(e,"07a11NkCzdPdJikl1MI/Tc3","Tick");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){this.tree=null,this.debug=null,this.target=null,this.blackboard=null,this._openNodes=[],this._nodeCount=0}var e=t.prototype;return e._enterNode=function(t){this._nodeCount++,this._openNodes.push(t)},e._openNode=function(){},e._tickNode=function(){},e._closeNode=function(){this._openNodes.pop()},e._exitNode=function(){},t}(),cc._RF.pop()},{}],TimeCom:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"e71cboQH0ZNupnRoxAkScA4","TimeCom");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0}),a.TimeCom=void 0;var c=i("App"),s=cc._decorator,u=s.property,l=s.ccclass;i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).timeLab=null,e.icon=null,e.endTime=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.setIcon=function(t){c.default.CommonUtils.setSpriteFrame(t,this.icon)},i.setTime=function(t){this.endTime=t},i.updateTime=function(t){var e=this.endTime-t;return e<0&&(e=0),this.timeLab.string=c.default.DateUtils.getFormatBySecond(e/1e3,10),!e},o}(cc.Component),o([u(cc.Label)],i.prototype,"timeLab",void 0),o([u(cc.Sprite)],i.prototype,"icon",void 0),i=o([l],i),a.TimeCom=i,cc._RF.pop()},{}],TimeManager:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}cc._RF.push(e,"a4506KVcfhIjbsrjVmT0wMJ","TimeManager");var o=n;Object.defineProperty(o,"__esModule",{value:!0}),o.TimerHandlerObj=o.TimerManager=void 0,o.TimerManager=function(){function t(){this.isPause=!1,this._lastTime=0,this._handlers=[],ObjectPool.registerClass(i,"TimerHandlerObj"),this._delHandlers=[],this._currTime=this._lastTime=cc.director.getTotalTime(),this._currFrame=0,this._count=0,this._timeScale=1}var e,n,o=t.prototype;return o.reset=function(){this._handlers=[],this._delHandlers=[],this._timeScale=1,this._count=0},o.setTimeScale=function(t){this._timeScale=t},o.onGamePause=function(){},o.onGameResume=function(){},o.onEnterFrame=function(t){for(this._currFrame++,t=Math.min(t,.3),this._currTime+=1e3*t*this._timeScale;this._delHandlers.length;)this.removeHandle(this._delHandlers.pop());for(var e=0;e<this._count;e++){var n=this._handlers[e];if(-1==this._delHandlers.indexOf(n)&&(n.userFrame?this._currFrame:this._currTime)>=n.exeTime){try{n.method.call(n.methodObj,this._currTime-n.dealTime)}catch(t){Log.error(t)}if(n.dealTime=this._currTime,n.exeTime+=n.delay,!n.repeat)if(1<n.repeatCount)n.repeatCount--;else{if(n.complateMethod)try{n.complateMethod.apply(n.complateMethodObj)}catch(t){Log.error(t)}-1==this._delHandlers.indexOf(n)&&this._delHandlers.push(n)}}}return!0},o.removeHandle=function(t){var e=this._handlers.indexOf(t);-1!=e?(this._handlers.splice(e,1),t.clear(),ObjectPool.push(t),this._count--):Log.warn("what????")},o.create=function(t,e,n,r,o,i,a){var c;e<0||n<0||null==r||(this.remove(r,o),(c=ObjectPool.pop("TimerHandlerObj")).userFrame=t,c.repeat=0==n,c.repeatCount=n,c.delay=e,c.method=r,c.methodObj=o,c.complateMethod=i,c.complateMethodObj=a,c.exeTime=e+(t?this._currFrame:this._currTime),c.dealTime=this._currTime,this._handlers.push(c),this._count++)},o.doTimer=function(t,e,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!1,t,e,n,r,o,i)},o.doFrame=function(t,e,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=null),this.create(!0,t,e,n,r,o,i)},o.setTimeOut=function(t,e,n){this.doTimer(t,1,e,n)},o.setFrameOut=function(t,e,n){this.doFrame(t,1,e,n)},o.remove=function(t,e){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==t&&r.methodObj==e&&-1==this._delHandlers.indexOf(r)){this._delHandlers.push(r);break}}},o.sleep=function(t,e){var n=this;return new Promise(function(r){n.doTimer(t,1,r,e)})},o.sleepFrame=function(t,e){var n=this;return new Promise(function(r){n.doFrame(t,1,r,e)})},o.removeAll=function(t){for(var e=0;e<this._count;e++){var n=this._handlers[e];n.methodObj==t&&-1==this._delHandlers.indexOf(n)&&this._delHandlers.push(n)}},o.isExists=function(t,e){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==t&&r.methodObj==e&&-1==this._delHandlers.indexOf(r))return!0}return!1},e=t,(n=[{key:"currFrame",get:function(){return this._currFrame}},{key:"count",get:function(){return this._count}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var i=function(){function t(){this.ObjectPoolKey=null,this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();o.TimerHandlerObj=i,cc._RF.pop()},{}],TipData:[function(t,e,n){"use strict";cc._RF.push(e,"4f449x2pL5CBZpUvLdpg1uO","TipData");var r=t,o=n;Object.defineProperty(o,"__esModule",{value:!0});var i=r("App"),a=r("LabelTip"),c=r("SoundEffectConst"),s=r("GlobalAttr"),u=r("MyBigLong"),l=r("CurrencyService"),h=r("MapService");o.default=function(){function t(t){this.value=0,this.ani=null,this.effect=null,this.isPlaying=!1,this.goldLab=null,this.deskNode=null,this.pos=t}var e=t.prototype;return e.addValue=function(t){if(!this.ani){var e=i.default.NodePoolMsr.tipAniPool.pop();this.deskNode.addChild(e),e.position=this.pos,e.y=this.pos.y+10-this.deskNode.y,e.x-=this.deskNode.x,this.ani=e.getComponent(cc.Animation),e.on(cc.Node.EventType.TOUCH_END,this.onTouchTap,this),this.goldLab=e.getComponentInChildren(cc.Label)}this.isPlaying||0!==this.value||this.ani.play("idle"),this.ani.node.active=!0,this.value+=t,this.goldLab.string=u.default.toString(this.value)},e.onPlayFinish=function(){this.ani.play("idle")},e.onTouchTap=function(){i.default.SoundManager.playEffect(c.SoundsDefine.GET_COIN2),this.ani.stop(),this.ani.node.active=!1;var t=this.value,e=u.default.toString(this.value);1<s.default.ins.moneyRate&&(t=Math.floor(t*s.default.ins.moneyRate),e=u.default.toString(t)),l.default.ins.moneyChange(t),i.default.NodePoolMsr.flyLabel.pop().getComponent(a.default).init(h.default.ins.uiLayer,e,35).flyUp(this.pos.x,this.pos.y+100,!0),this.value=0;var n=i.default.NodePoolMsr.getCoinEffect.pop();n.position=this.pos,h.default.ins.uiLayer.addChild(n)},t}(),cc._RF.pop()},{}],TipView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6492bVG/8pLNpwyivByTGku","TipView");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),c.TIPSTATE=void 0;var s=a("GameText"),u=a("BaseView");(a=o=c.TIPSTATE||(c.TIPSTATE={}))[a.SURE=0]="SURE",a[a.SURE_CANCEL=1]="SURE_CANCEL",a[a.NO_SURE=2]="NO_SURE";var l=cc._decorator,h=l.ccclass,f=l.property;a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).leftBtn=null,e.rightBtn=null,e.descLab=null,e.closeBtn=null,e.titleLab=null,e.leftBtnLab=null,e.rightBtnLab=null,e.closeType=0,e.bgType=1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.initUI=function(){t.prototype.initUI.call(this),this.leftBtnLab=this.leftBtn.target.getChildByName("Label").getComponent(cc.Label),this.rightBtnLab=this.rightBtn.target.getChildByName("Label").getComponent(cc.Label)},a.open=function(e){t.prototype.open.call(this),this.init(e)},a.init=function(t){if(t){switch((this.data=t).curState){case o.SURE:this.rightBtn.node.active=!1,this.leftBtn.node.active=!0;break;case o.SURE_CANCEL:this.rightBtn.node.active=!0,this.leftBtn.node.active=!0;break;case o.NO_SURE:this.rightBtn.node.active=!1,this.leftBtn.node.active=!1;break;default:this.rightBtn.node.active=!1,this.leftBtn.node.active=!0}this.closeBtn.node.active=t.hasCloseBtn,this.leftBtnLab.string=t.leftBtnText||s.GameText.getText(17),this.rightBtnLab.string=t.rightBtnText,this.descLab.string=t.tipsStr,this.titleLab.string=t.title||s.GameText.getText(lang.ui_tip_view_title)}},a.onLeftBtn=function(){this.data.leftFunc&&this.data.leftFunc.apply(this.data.leftThisObj),this.onTouchClose()},a.onRightBtn=function(){this.data.rightFunc&&this.data.rightFunc.apply(this.data.rightThisObj),this.onTouchClose()},i}(u.default),i([f(cc.Button)],a.prototype,"leftBtn",void 0),i([f(cc.Button)],a.prototype,"rightBtn",void 0),i([f(cc.Label)],a.prototype,"descLab",void 0),i([f(cc.Button)],a.prototype,"closeBtn",void 0),i([f(cc.Label)],a.prototype,"titleLab",void 0),a=i([h],a),c.default=a,cc._RF.pop()},{}],Toast:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3f09dLU3iRMNrfEfb1r4dOJ","Toast");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),a("LayerManager");var s=a("App"),u=cc._decorator,l=u.ccclass,h=u.property;a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).bgSp=null,e.msgLab=null,e.msgList=[],e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.launch=function(t,e){void 0===e&&(e=1e3),this.instance.launch(t,e)};var a=i.prototype;return a.onLoad=function(){this.node.zIndex=200,(o.instance=this).node.active=!1,this.node.removeFromParent(!1)},a.launch=function(t,e){void 0===e&&(e=1e3),this.showMsg({msg:t,waitTime:e})},a.checkMsg=function(t){if(!this.curMsg||this.curMsg.msg!=t.msg){for(var e=this.msgList.length,n=0;n<e;n++){var r=this.msgList[n].msg;if(t.msg===r)return}this.msgList.push(t)}},a.showMsg=function(t){var e=this;this.isShow&&this.node.removeFromParent(!0),t&&(this.isShow=!0,this.msgLab.string=t.msg,this.node.parent||s.default.ViewManager.uiRoot.addChild(this.node),this.node.active=!0,this.node.opacity=0,this.tw=cc.tween(this.node).to(.7,{opacity:255},{easing:cc.easing.quadOut}).delay(t.waitTime/1e3).to(.8,{opacity:0},{easing:cc.easing.circIn}).call(function(){e.node.active=!1,e.isShow=!1,e.node.removeFromParent(!0)}).start())},i}(cc.Component),i([h(cc.Sprite)],a.prototype,"bgSp",void 0),i([h(cc.Label)],a.prototype,"msgLab",void 0),a=o=i([l],a),c.default=a=o,cc._RF.pop()},{}],TouchPinch:[function(t,e,n){"use strict";cc._RF.push(e,"bef167ViCNPiL7V/78rAOlu","TouchPinch");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(){this.pinchFirst=null,this.pinchSecond=null,this.startPinchDist=0,this.lastPinchDist=0,this.pinchDist=0,this.pinchCenter=cc.v2()}var e=t.prototype;return e.reset=function(){this.pinchFirst=null,this.pinchSecond=null,this.startPinchDist=0},e.onTouchStart=function(t){this.pinchFirst&&this.pinchFirst.id===t.id?(this.pinchFirst=t,this.pinchSecond=null,this.startPinchDist=0):this.pinchSecond&&this.pinchSecond.id===t.id?(this.pinchFirst=null,this.pinchSecond=t,this.startPinchDist=0):this.pinchFirst?this.pinchSecond||(this.pinchSecond=t,this.startPinchDist=0):(this.pinchFirst=t,this.startPinchDist=0)},e.onTouchEnd=function(t){this.pinchFirst&&this.pinchFirst.id===t.id&&(this.pinchFirst=null),this.pinchSecond&&this.pinchSecond.id===t.id&&(this.pinchSecond=null)},e.onPinch=function(t){if(this.pinchFirst&&this.pinchSecond){if(this.startPinchDist)return this.lastPinchDist=this.pinchDist,this.pinchCenter.x=(this.pinchFirst.screenPos.x+this.pinchSecond.screenPos.x)/2,this.pinchCenter.y=(this.pinchFirst.screenPos.y+this.pinchSecond.screenPos.y)/2,this.pinchDist=cc.Vec2.distance(this.pinchFirst.screenPos,this.pinchSecond.screenPos),t&&t(this.pinchCenter,this.lastPinchDist,this.pinchDist),!0;this.startPinchDist=cc.Vec2.distance(this.pinchFirst.startScreenPos,this.pinchSecond.startScreenPos),this.pinchDist=this.startPinchDist}return!1},t}(),cc._RF.pop()},{}],Toucher:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"a81c3wBW6tMuaqpo0YOQ2dB","Toucher");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).target=null,e.enableTap=!0,e.enableDoubleTap=!1,e.tapDuration=300,e.tapRadius=30,e.enableHold=!1,e.holdDelay=400,e.enablePan=!1,e.enableSwipe=!1,e.swipeDuration=1e3,e.swipeMinDistance=90,e.swipeMaxDistance=1e3,e.enableJoystick=!1,e.joystickRadius=100,e.floatStick=!1,e.disabled=!1,e.onStart=null,e.onMove=null,e.onEnd=null,e.onTap=null,e.onDoubleTap=null,e.holdStart=null,e.holdEnd=null,e.onPan=null,e.onSwipeUp=null,e.onSwipeDown=null,e.onSwipeLeft=null,e.onSwipeRight=null,e.onJoystickChanged=null,e.touchedCount=0,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.init()},i.init=function(){this.statusCache={},this.listenedNodes=[],this.resetStatus(),this.target&&this.registerEvents(this.target)},i.resetStatus=function(){this.statusCache={},this.hooks={}},i.getTouchStatus=function(t){return this.statusCache[t]},i.removeTouchStatus=function(t){delete this.statusCache[t]},i.createTouchStatus=function(t){var e={id:t,event:null,target:null,touchedID:-1,startTime:0,startScreenPos:null,endTime:0,endScreenPos:null,screenPos:null,_holdTimeoutId:null,holding:!1,_prevTapPos:null,_prevTapTime:0,_tapIndex:0,joystick:null};return this.statusCache[t]=e},i.createJoystickStatus=function(){return{x:0,y:0,centerX:0,centerY:0,rotation:0,angle:0,distance:0,radius:this.joystickRadius,pressed:!1}},i.resetEventStatus=function(t){null!==t._holdTimeoutId&&(clearTimeout(t._holdTimeoutId),t._holdTimeoutId=null),t.holding=!1,t.touchedID=-1,t.event=null,t.joystick=null,t.startTime=0,t.startScreenPos=null,t.endTime=0,t.endScreenPos=null,t.screenPos=null},i.registerEvents=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!0),this.listenedNodes.push(t);var o=this.tapRadius*this.tapRadius,i=function(e){if(r.touchedCount++,!0!==r.disabled){var o=e.getID(),i=r.createTouchStatus(o);i.target=t,i.touchedID=e.getID(),i.event=e,i.startTime=Date.now();var a=e.getLocation();i.screenPos=a,i.startScreenPos=a,r.onStart&&r.onStart(a.x,a.y,i),r.enableHold&&r.holdStart&&0<r.holdDelay&&(i._holdTimeoutId=setTimeout(function(){if(r.isValid){var t,n=r.getTouchStatus(o);n&&(t=e.getLocation(),n.screenPos=t,n.holding=!0,r.holdStart(t.x,t.y,n))}},r.holdDelay)),r.enableJoystick&&r.resetJoystick(a.x,a.y,!0,i),n&&e.stopPropagation()}};t.on(cc.Node.EventType.TOUCH_START,i,null,e);var a=function(t){if(!0!==r.disabled){var e,o,i,a=t.getID(),c=r.getTouchStatus(a);c&&(e=(c.event=t).getDeltaX(),o=t.getDeltaY(),0===e&&0===o||(i=t.getLocation(),c.screenPos=i,r.onMove&&r.onMove(i.x,i.y,c),r.enableJoystick&&r.moveJoystick(i.x,i.y,c),r.enablePan&&r.onPan&&r.onPan(i.x,i.y,e,o,c),n&&t.stopPropagation()))}};t.on(cc.Node.EventType.TOUCH_MOVE,a,null,e);var c=function(t){r.touchedCount--;var e=t.getID(),i=r.getTouchStatus(e);if(i)if(i.event=t,null!==i._holdTimeoutId&&(clearTimeout(i._holdTimeoutId),i._holdTimeoutId=null),!0!==r.disabled){var a=Date.now();i.endTime=a;var c=t.getLocation();i.screenPos=c,i.endScreenPos=c,r.onEnd&&r.onEnd(c.x,c.y,i),i.holding&&r.holdEnd&&(i.holding=!1,r.holdEnd(c.x,c.y,i));var s=i.startTime,u=i.startScreenPos,l=a-s,h=c.x-u.x,f=c.y-u.y,d=h*h+f*f,p=!1;if(r.enableDoubleTap&&r.onDoubleTap&&l<r.tapDuration&&d<o&&1===i._tapIndex){var y=s-i._prevTapTime,v=i._prevTapPos.x,g=i._prevTapPos.y,m=u.x-v,_=u.y-g,b=m*m+_*_;y<r.tapDuration&&b<o&&(p=!0,r.onDoubleTap(v,g,i)),i._tapIndex=0}if(i._tapIndex++,r.onTap(u.x,u.y,i),i._prevTapPos=u,r.enableTap&&!p&&r.onTap&&l<r.tapDuration&&d<r.tapRadius*r.tapRadius)i._prevTapTime=a;else if(r.enableSwipe&&l<r.swipeDuration){var w=Math.sqrt(d);if(w>r.swipeMinDistance&&w<r.swipeMaxDistance){var C=Math.abs(f)>Math.abs(h),S=w/l;C&&0<f?r.onSwipeUp&&r.onSwipeUp(S,i):C?r.onSwipeDown&&r.onSwipeDown(S,i):!C&&0<h?r.onSwipeRight&&r.onSwipeRight(S,i):r.onSwipeLeft&&r.onSwipeLeft(S,i),i._tapIndex=0}}r.enableJoystick&&r.resetJoystick(null,null,!1,i),r.removeTouchStatus(e),n&&t.stopPropagation()}else r.removeTouchStatus(e)};t.on(cc.Node.EventType.TOUCH_END,c,null,e),t.on(cc.Node.EventType.TOUCH_CANCEL,c,null,e),this.hooks={start:i,move:a,end:c}},i.registerEventsOnChildren=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!0),t.children.forEach(function(t){r.registerEvents(t,e,n)})},i.resetJoystick=function(t,e,n,r){var o=r.joystick=this.createJoystickStatus();t||0===t?o.centerX=t:t=o.centerX,e||0===e?o.centerY=e:e=o.centerY,o.x=t,o.y=e,o.distance=0,o.angle=0,o.pressed=!!n,this.onJoystickChanged&&this.onJoystickChanged(o,r)},i.moveJoystick=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=n.joystick;if(r){r.x=t,r.y=e,t=r.x-r.centerX,e=r.y-r.centerY;var o=Math.sqrt(t*t+e*e)>>0;if(r.distance=o,o>r.radius){var i=r.radius/o;this.floatStick?(r.centerX=r.x-t*i,r.centerY=r.y-e*i):(r.x=r.centerX+t*i,r.y=r.centerY+e*i),o=r.radius}r.distance=o,t=((e=Math.atan2(e,t))*this.RAD_TO_DEG+360>>0)%360,r.rotation=e,r.angle=t,this.onJoystickChanged&&this.onJoystickChanged(r,n)}},i.clear=function(t){var e=this.hooks;this.listenedNodes.forEach(function(t){t.off(cc.Node.EventType.TOUCH_START,e.start),t.off(cc.Node.EventType.TOUCH_MOVE,e.move),t.off(cc.Node.EventType.TOUCH_END,e.end)}),this.listenedNodes=null,t?(this.statusCache=null,this.hooks=null):this.init()},i.onDestroy=function(){this.clear(!0)},o}(cc.Component),a([u({type:cc.Node,displayName:"Target"})],o.prototype,"target",void 0),a([u({displayName:"Tap"})],o.prototype,"enableTap",void 0),a([u({displayName:"Double Tap"})],o.prototype,"enableDoubleTap",void 0),a([u({displayName:". . Tap Duration"})],o.prototype,"tapDuration",void 0),a([u({displayName:". . Tap Radius"})],o.prototype,"tapRadius",void 0),a([u({displayName:"Hold"})],o.prototype,"enableHold",void 0),a([u({displayName:". . Hold Delay"})],o.prototype,"holdDelay",void 0),a([u({displayName:"Pan"})],o.prototype,"enablePan",void 0),a([u({displayName:"Swipe"})],o.prototype,"enableSwipe",void 0),a([u({displayName:". . Swipe Delay"})],o.prototype,"swipeDuration",void 0),a([u({displayName:". . Swipe min Distance"})],o.prototype,"swipeMinDistance",void 0),a([u({displayName:". . Swipe max Distance"})],o.prototype,"swipeMaxDistance",void 0),a([u({displayName:"Joystick"})],o.prototype,"enableJoystick",void 0),a([u({displayName:". . Joystick Radius"})],o.prototype,"joystickRadius",void 0),a([u({displayName:". . Float Stick"})],o.prototype,"floatStick",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],UIImage:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b72dcG6cVpIB5PgvKz1lFLd","UIImage");var i,a,c=n;a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0}),c.UIImage=void 0;var s=cc._decorator,u=s.ccclass,l=s.property,h=(s.menu,/(\.jpg)$/),f=i=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this)._source=null,e.sourceChanged=!1,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c,s,u=a.prototype;return u.onLoad=function(){this.sourceChanged&&this.parseSource()},u.onEnable=function(){t.prototype.onEnable.call(this),this.sourceChanged&&this.parseSource()},u.$setTexture=function(t){if(t==this.spriteFrame)return!1;this.spriteFrame=t,this.sourceChanged=!1},u.parseSource=function(){var t=this;this.sourceChanged=!1;var e=this._source;if(e&&"string"==typeof e){var n=i.cacheList[e]||cc.resources.get(e,cc.SpriteFrame);if(n)this.$setTexture(n);else if(-1==e.indexOf("http"))cc.resources.load(e,cc.SpriteFrame,function(n,r){e===t._source&&(n?Log.error("\u56fe\u7247\u4e0d\u5b58\u5728:"+e,n):t.$setTexture(r))});else{var r=".png";h.test(e)&&(r=".jpg"),cc.assetManager.loadRemote(e,{ext:r},function(n,r){e===t._source&&(n?Log.error("\u56fe\u7247\u4e0d\u5b58\u5728:"+e,n):(i.cacheList[e]=new cc.SpriteFrame(r),t.$setTexture(i.cacheList[e])))})}}else this.$setTexture(e)},c=a,(s=[{key:"source",get:function(){return this._source},set:function(t){if(""===t)return this._source=t,void(this.spriteFrame=null);t!=this._source&&(this._source=t,this.node&&this.node.activeInHierarchy?this.parseSource():this.sourceChanged=!0)}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),a}(cc.Sprite);f.cacheList={},a([l({type:cc.SpriteFrame})],f.prototype,"_source",void 0),a([l({type:cc.SpriteFrame})],f.prototype,"source",null),i=a([u],f),c.UIImage=i,cc._RF.pop()},{}],ViewAni:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"44475wDucxAV6UMS3UegWnf","ViewAni");var i,a,c=t,s=n;a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(s,"__esModule",{value:!0});var u=c("App"),l=cc._decorator,h=l.ccclass,f=l.property,d=(l.menu,l.executeInEditMode),p=l.executionOrder,y={TopToBottom:{run:function(t,e){var n=cc.tween(t).to(.6,{y:0},{easing:cc.easing.bounceOut});e&&n.call(e),t.y=cc.winSize.height,n.start()},fast:function(t,e){e&&e(),t.y=0}},test:{run:function(t,e){t.y=cc.winSize.height/2-230,t.x=cc.winSize.width/2-15,t.scale=0;var n=cc.tween(t).parallel(cc.tween().bezierTo(.3,t.position,cc.v2(t.x/2,t.y+100),cc.Vec2.ZERO),cc.tween().to(.3,{scale:1},cc.easeExponentialIn()));e&&n.call(e),n.start()},fast:function(t,e){e&&e(),t.y=0}},BottomToTop:{run:function(t,e){var n=cc.tween(t).to(.5,{y:cc.winSize.height},{easing:cc.easing.cubicOut});e&&n.call(e),n.start()},fast:function(t,e){e&&e(),t.y=0}},Enter_BottomToTop:{run:function(t,e){t.y-=cc.winSize.height;var n=cc.tween(t).to(.3,{y:0},{easing:cc.easing.backOut});e&&n.call(e),n.start()},fast:function(t,e){e&&e(),t.y=0}},Exit_CenterToBottom:{run:function(t,e){var n=cc.tween(t).to(.3,{y:-cc.winSize.height},{easing:cc.easing.backOut});e&&n.call(e),n.start()},fast:function(t,e){e&&e(),t.y=0}}},v=i=function(t){var e,n;function a(){var e;return(e=t.apply(this,arguments)||this)._enterAniAsset=null,e._exitAniAsset=null,e._enterTweenName="",e._exitTweenName="",e._ani=null,e.isExiting=!1,e._exitAni=0,e._enterAni=0,e.view=null,e._isFirst=!0,e._curScale=1,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var c,s,l=a.prototype;return l.isExitAni=function(){return(this._exitAniAsset||this._exitTweenName)&&i.isCanPlayAni},l.start=function(){},l.onEnterAnimCompleted=function(){this.view.enterAniFinish()},l.onAnimCompleted=function(){this.isExiting&&(this.isExiting=!1,this.node.parent&&this.node.parent.removeChild(this.node,!1),this.node.active=!1,this.node.scale=this._curScale,u.default.ViewManager.checkIsNeedAddBg(),this.view.onExitAniFinish())},l.onEnter=function(){var t=this;if(this.enabled)if(this._isFirst&&i.isCanPlayAni){var e=this.node.opacity;this.node.opacity=0,u.default.TimerManager.setFrameOut(2,function(){t.node.opacity=e,t.playEnterAni();var n=t.getComponent(cc.Widget);n&&(n.enabled=!1)},this),this._isFirst=!1}else this.playEnterAni();this.isExiting=!1},l.playEnterAni=function(){this._enterAniAsset?(i.isCanPlayAni?this._ani.play(this._enterAniAsset.name):this._ani.play(this._enterAniAsset.name,this._enterAniAsset.duration),this._ani.once(cc.Animation.EventType.FINISHED,this.onEnterAnimCompleted,this)):this._enterTweenName&&y[this._enterTweenName]&&(i.isCanPlayAni?y[this._enterTweenName].run(this.node,this.onEnterAnimCompleted.bind(this)):(y[this._enterTweenName].fast(this.node),this.onEnterAnimCompleted()))},l.onExit=function(){i.isCanPlayAni&&(this.isExiting=!0,this.enabled&&(this._curScale=this.node.scale,this._exitAniAsset?(this._ani.once(cc.Animation.EventType.FINISHED,this.onAnimCompleted,this),this._ani.play(this._exitAniAsset.name)):this._exitTweenName&&y[this._exitTweenName]&&y[this._exitTweenName].run(this.node,this.onAnimCompleted.bind(this))))},l.onLoad=function(){(this._enterAniAsset||this._exitAniAsset)&&(this._ani=this.addComponent(cc.Animation),this._enterAniAsset&&this._ani.addClip(this._enterAniAsset),this._exitAniAsset&&this._ani.addClip(this._exitAniAsset))},c=a,(s=[{key:"exitAni",get:function(){return this._exitAni},set:function(t){this._exitAni!==t&&(this._exitAni=t,this._exitAniAsset=null,this._exitTweenName="",t)&&("string"==typeof(t=i.viewAnis[t])?this._exitTweenName=t:this._exitAniAsset=t)}},{key:"enterAni",get:function(){return this._enterAni},set:function(t){this._enterAni!==t&&(this._enterAni=t,this._enterAniAsset=null,this._enterTweenName="",t)&&("string"==typeof(t=i.viewAnis[t])?this._enterTweenName=t:this._enterAniAsset=t)}}])&&r(c.prototype,s),Object.defineProperty(c,"prototype",{writable:!1}),a}(cc.Component);v.isCanPlayAni=!0,v.viewAnis=null,a([f(cc.AnimationClip)],v.prototype,"_enterAniAsset",void 0),a([f(cc.AnimationClip)],v.prototype,"_exitAniAsset",void 0),a([f()],v.prototype,"_enterTweenName",void 0),a([f()],v.prototype,"_exitTweenName",void 0),a([f({editorOnly:!0})],v.prototype,"_exitAni",void 0),a([f({type:cc.Enum({})})],v.prototype,"exitAni",null),a([f({editorOnly:!0})],v.prototype,"_enterAni",void 0),a([f({type:cc.Enum({})})],v.prototype,"enterAni",null),i=a([h,d,p(-1)],v),s.default=i,cc._RF.pop()},{}],ViewConst:[function(t,e,n){"use strict";cc._RF.push(e,"e3f7czKWMRN+rsILrppTAoF","ViewConst");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.ViewConst=void 0,(r=r.ViewConst||(r.ViewConst={}))[r.Loading=0]="Loading",r[r.Login=1]="Login",r[r.GameMain=2]="GameMain",r[r.Game=3]="Game",r[r.GameUI=4]="GameUI",r[r.ArchiveonMgrView=5]="ArchiveonMgrView",r[r.DebugUI=6]="DebugUI",r[r.ShopView=7]="ShopView",r[r.SettingView=8]="SettingView",r[r.EmailView=9]="EmailView",r[r.EmailInfoView=10]="EmailInfoView",r[r.PlayerInfoView=11]="PlayerInfoView",r[r.LanguageSelectView=12]="LanguageSelectView",r[r.TipView=13]="TipView",r[r.HighTipView=14]="HighTipView",r[r.GuideView=15]="GuideView",r[r.MapView=16]="MapView",r[r.IdleView=17]="IdleView",r[r.QuestGuideView=18]="QuestGuideView",r[r.StageUpgradeView=19]="StageUpgradeView",r[r.SwitchMapView=20]="SwitchMapView",r[r.StageUpgradeTipView=21]="StageUpgradeTipView",r[r.AbilityView=22]="AbilityView",r[r.AdRateBuffView=23]="AdRateBuffView",r[r.AdRewardMoneyView=24]="AdRewardMoneyView",r[r.CostumeBagView=25]="CostumeBagView",r[r.CostumeInfoView=26]="CostumeInfoView",r[r.CostumeMergeView=27]="CostumeMergeView",r[r.ShopBuffView=28]="ShopBuffView",r[r.ShopBuffViewIcon=29]="ShopBuffViewIcon",r[r.ShopAdBoxLvTipView=30]="ShopAdBoxLvTipView",r[r.CongratulationView=31]="CongratulationView",r[r.ShopOpenBoxView=32]="ShopOpenBoxView",r[r.CostumeRefundView=33]="CostumeRefundView",r[r.CotumeUpgradView=34]="CotumeUpgradView",r[r.CostumeMergeTipView=35]="CostumeMergeTipView",r[r.ActivityView=36]="ActivityView",r[r.FbEnterView=37]="FbEnterView",r[r.GameLoadingView=38]="GameLoadingView",r[r.ShopViewIcon=39]="ShopViewIcon",r[r.ShopFirstView=40]="ShopFirstView",r[r.ShopBankView=41]="ShopBankView",r[r.HelperCatInfoView=42]="HelperCatInfoView",r[r.InviteHelperCatView=43]="InviteHelperCatView",r[r.MailBoxView=44]="MailBoxView",r[r.MailListView=45]="MailListView",r[r.CostumeStatisticsView=46]="CostumeStatisticsView",r[r.CostumeMergeAniView=47]="CostumeMergeAniView",r[r.ShopRemoveAdView=48]="ShopRemoveAdView",r[r.CostumeCoinReturnView=49]="CostumeCoinReturnView",r[r.WorldMapView=50]="WorldMapView",cc._RF.pop()},{}],ViewManager:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"02a6dCzC/dDrZl2T7ADa2lM","ViewManager");var o=t,i=n,a=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.ViewManagerEvent=void 0;var c=o("ViewConst"),s=o("LayerManager"),u=o("App"),l=o("BaseView");i.ViewManagerEvent={VIEW_IS_OPEN:"viewIsOpen",VIEW_IS_CLOSE:"viewIsClose"};var h=function(){function t(){this._views={},this._opens={},this._viewCache={},this._viewLoadingCache={},this.uiRoot=null,this.curScene=null}var e=t.prototype;return e.reset=function(){this.uiRoot=cc.find("Canvas"),s.default.reset()},e.clear=function(){this.closeAll(),this._views={}},e.register=function(t,e){null!=e&&(this._views[t]||(this._views[t]=e))},e.register1=function(t,e){null!=t&&(this._views[t.key]||(t.controller=e,this._views[t.key]=t))},e.getViewInfoByController=function(t){var e=[];for(var n in this._views)this._views[n].controller==t&&e.push(n);return e},e.unregister=function(t){this._views[t]&&delete this._views[t]},e.getViewRegisterData=function(t){return this._views[t]},e.removeView=function(t){delete this._viewCache[t],delete this._viewLoadingCache[t],delete this._opens[t],delete this._views[t]},e.hasFullScreenViwe=function(){for(var t in this._opens)if(this._opens[t].isFullScreen())return!0;return!1},e.removeByController=function(){},e.destroy=function(t){var e=this.getView(t);e&&(this.unregister(t),e.destroyView(),delete this._viewCache[t])},e.checkIsNeedAddBg=function(){for(var t=this.uiRoot.children.length-1;1<t;t--){var e=this.uiRoot.children[t].getComponent(l.default);if(e&&1===e.bgType){s.default.layerBg.parent&&s.default.layerBg.parent.removeChild(s.default.layerBg,!1);var n=e.node.getSiblingIndex();return s.default.layerBg.zIndex=e.node.zIndex,this.uiRoot.insertChild(s.default.layerBg,n),s.default.layerBg.active=!0,void(s.default.curBgView=e)}}s.default.layerBg&&s.default.layerBg.parent&&(s.default.layerBg.parent.removeChild(s.default.layerBg,!1),s.default.curBgView=null)},e.getTopView=function(){for(var t=this.uiRoot.children.length-1;0<t;t--)for(var e=this.uiRoot.children[t],n=e.children.length-1;0<=n;n--){var r=e.children[n].getComponent(l.default);if(r)return r}},e.addBg=function(){},e.open=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return a(this,void 0,void 0,r().mark(function e(){var o,a,h,f,d,p;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=this._views[t])){e.next=55;break}if(Log.trace("\u5f00\u542f\u9762\u677f:",o.prefabName),e.t0=o.isScene&&this.curScene,!e.t0){e.next=7;break}return e.next=7,s.default.ins.showChangeSceneEffect();case 7:if(null!=(f=this.getView(t))){e.next=33;break}if(o){e.next=11;break}return e.abrupt("return",void Log.trace("UI_"+t+"\u4e0d\u5b58\u5728"));case 11:if(!this._viewLoadingCache[t]){e.next=13;break}return e.abrupt("return",void Log.warn("\u9762\u677f\u6b63\u5728\u52a0\u8f7d\u9884\u5236\u4f53",t));case 13:if(e.prev=13,this._viewLoadingCache[t]=!0,o.isNotShowLoad||u.default.EasyLoading.showLoadingByTime(20),e.t1=o.preLoadFunc,!e.t1){e.next=20;break}return e.next=20,o.preLoadFunc();case 20:return e.next=22,u.default.ResManager.getResAsync("/prefab/view/"+(o.dir?o.dir+"/":"")+o.prefabName);case 22:if(d=e.sent,o.isNotShowLoad||u.default.EasyLoading.hideLoading(),Log.trace("\u5f00\u542f\u9762\u677f\u5b8c\u6bd5:",o.prefabName),this._viewLoadingCache[t]){e.next=25;break}return e.abrupt("return");case 25:delete this._viewLoadingCache[t],p=cc.instantiate(d),(f=p.getComponent(l.default)).viewId=t,p.zIndex=o.zIndex,f.controller=o.controller,f.node.active=!1,this._viewCache[t]=f,o.controller[o.prefabName[0].toLocaleLowerCase()+o.prefabName.slice(1)]=f,o.controller.onLoadView(f),e.next=33;break;case 30:return e.prev=30,e.t2=e.catch(13),e.abrupt("return",(delete this._viewLoadingCache[t],void Log.error("\u52a0\u8f7d\u8d44\u6e90\u9762\u677f\u51fa\u9519,\u9762\u677fid:"+t+" "+c.ViewConst[t]+"  ",e.t2)));case 33:if(!f.isShow()){e.next=37;break}Log.warn("\u9762\u677f\u5df2\u7ecf\u6253\u5f00\u4e86:",t),(a=f).reOpen.apply(a,n),e.next=54;break;case 37:if((this._opens[t]=f).setVisible(!0),this.addBg(f),o.isScene&&this.curScene&&this.curScene.changeScenePre(),f.addToParent(this.uiRoot),e.t3=f.isInit(),e.t3){e.next=48;break}return e.next=45,f.loadResource();case 45:f.enabled=!0,f.initUI(),f.initData();case 48:return o.isScene&&(this.curScene&&this.closeAll([6,t]),this.curScene=f),e.next=51,(h=f).open.apply(h,n);case 51:o.controller.onOpenView(f),o.isScene&&s.default.ins.hideChangeSceneEffect(),u.default.NotificationCenter.dispatch(i.ViewManagerEvent.VIEW_IS_OPEN,f.viewId);case 54:return e.abrupt("return",f);case 55:case"end":return e.stop()}},e,this,[[13,30]])}))},e.close=function(t){if(this._viewLoadingCache[t])delete this._viewLoadingCache[t];else if(this.isShow(t)){var e=this.getView(t);Log.trace("\u5173\u95ed\u9762\u677f:",e.name);for(var n=this._views[t],r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];delete this._opens[t],e.removeFromParent(),e.close.apply(e,o),n.controller.onCloseView&&n.controller.onCloseView(e)}},e.closeView=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.close.apply(this,[t.viewId].concat(n))},e.getView=function(t){return this._opens[t]||this._viewCache[t]},e.closeAll=function(t){for(var e=0,n=Object.values(this._opens);e<n.length;e++){var r=n[e];t&&-1<t.indexOf(r.viewId)||this.close(r.viewId)}for(var o in this._viewLoadingCache){var i=parseInt(o);t&&-1<t.indexOf(i)||this.close(i)}},e.destoryAllView=function(t){for(var e in this._viewCache){var n=this._viewCache[e];t&&-1<t.indexOf(n.viewId)||this.destoryView(parseInt(e))}this._viewLoadingCache={}},e.destoryView=function(t){if(!this._viewLoadingCache[t]){var e=this._viewCache[t];e&&(e.node&&(e.node.parent&&e.node.removeFromParent(),e.node.isValid&&e.node.destroy()),e.destroyView())}var n=this._views[t];delete n.controller[n.prefabName[0].toLocaleLowerCase()+n.prefabName.slice(1)],delete this._viewCache[t],delete this._viewLoadingCache[t],delete this._opens[t]},e.releaseViewRes=function(t){var e=this._views[t];e&&(this.destoryView(t),u.default.ResManager.releaseAsset("/prefab/view/"+(e.dir?e.dir+"/":"")+e.prefabName,cc.Prefab))},e.currOpenNum=function(){return Object.keys(this._opens).length},e.isShow=function(t){return this._opens[t]},e.isViewLoading=function(t){return this._viewLoadingCache[t]},e.isViewShowOrLoading=function(t){return this._opens[t]||this._viewLoadingCache[t]},t}();(i.default=h).VIEW_IS_OPEN="viewIsOpen",h.VIEW_IS_CLOSE="viewIsClose",cc._RF.pop()},{}],ViewType:[function(t,e,n){"use strict";cc._RF.push(e,"64740AISz9MhbegY1cuPeIx","ViewType");var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.ViewType=void 0,(r=r.ViewType||(r.ViewType={}))[r.SCENE_VIEW=0]="SCENE_VIEW",r[r.FULL_VIEW=1]="FULL_VIEW",r[r.POPUP_VIEW=2]="POPUP_VIEW",cc._RF.pop()},{}],ViewportService:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"66ee3OrV6NDr7mx1WPgv7XX","ViewportService");var o,i,a=t,c=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(c,"__esModule",{value:!0});var s=a("InputHandler"),u=a("MapRoadUtils"),l=a("Viewport"),h=a("MoveComponent"),f=a("BaseService"),d=a("MachineService"),p=a("MapService"),y=a("RoleService"),v=cc._decorator,g=v.ccclass,m=v.property;a=o=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).name="ViewportService",e.cameraNodeName="Main Camera",e.statesLayerChanged=!1,e.entitiesLayer=null,e._cityChildren=null,e.viewport=null,e.handler=null,e.map=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.onLoad=function(){o.ins=this},a.update=function(){},a.lateUpdate=function(){this.viewport.syncView()},a.onDestroy=function(){},a.start=function(){var t=this;this.viewport.setInputHandler(this.handler),this.initEvents(),this.handler.onTap(function(e,n){if(e=cc.v2(e,n),t.viewport.camera.getScreenToWorldPoint(e,e),t.map.convertToNodeSpaceAR(e,e),n=u.default.instance.getNodeByPixel(e.x,e.y),y.default.ins.testMan){var r=p.default.ins.getPaths(y.default.ins.testMan.node.position,e);r&&r.length&&y.default.ins.testMan.getComponent(h.default).walkByRoad(r)}Log.trace("\u5750\u6807:"+n.dx+", "+n.dy),d.default.ins.lvUpBox.hideBox()})},a.initEvents=function(){},a.initViewportArea=function(){var t={left:100,right:this.map.width-100,top:100,bottom:this.map.height-100},e=t.left,n=t.top,r=(r=t.right)-e,o=(o=t.bottom)-n;this.viewport.setOriginalSize(cc.visibleRect.width,cc.visibleRect.height),this.setViewportArea(e,n,r,o,100),Log.trace("cc_winSize.width / this.map.width:",cc.winSize.width/r),this.viewport.scaleTo(cc.winSize.width/r),this.viewport.scrollCenterTo(r/2,o/2)},a.focusOn=function(t){this.focusEntity=t},a.setViewportArea=function(t,e,n,r,o){void 0===o&&(o=0);var i={x:-n/2,y:0},a={x:n/2,y:0},c={x:n/2,y:r},s={x:-n/2,y:r},u=this.viewport.limitLines;u.RT=[i,a],u.RB=[a,c],u.LB=[c,s],u.LT=[s,i],this.viewport.setArea(t,e,n,r)},i}(f.default),i([m(l.default)],a.prototype,"viewport",void 0),i([m(s.default)],a.prototype,"handler",void 0),i([m(cc.Node)],a.prototype,"map",void 0),a=o=i([g],a),c.default=a=o,cc._RF.pop()},{}],Viewport:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"c44cfyixa1ELr1fWNSc2HyD","Viewport");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property;o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this)._tempPos0={x:0,y:0},e.inited=!1,e.size=cc.size(0,0),e.area=cc.rect(-9e9,-9e9,9e9,9e9),e.cameraNode=null,e.camera=null,e.x=0,e.y=0,e.width=1024,e.height=1024,e.scale=1,e.defaultScale=1,e.extBorder=100,e.defaultMinScale=.367,e.photoMinScale=.367,e.minScale=.367,e.maxScale=1.2,e.zoomStep=.05,e.pivotX=0,e.pivotY=0,e.changed=!1,e.delayChange=!1,e.EVENT_CHANGED="VIEWPORT_CHANGED",e.limitLines={LT:null,RT:null,RB:null,LB:null},e.corner={x:0,y:0},e.viewTween=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.minScale=this.defaultMinScale,this.aabb=[],this.eventTarget=new cc.EventTarget},i.start=function(){this.init()},i.init=function(){this.originalSize=cc.size(cc.visibleRect.width,cc.visibleRect.height),this.cameraNode=this.cameraNode||this.node,this.camera=cc.Camera.findCamera(this.node),this.width=this.originalSize.width/this.scale,this.height=this.originalSize.height/this.scale,this.x1=this.area.x,this.y1=this.area.y,this.x2=this.area.x+this.area.width,this.y2=this.area.x+this.area.height,this.pivotX=this.x,this.pivotY=this.y,this.updateAABB(),this.inited=!0,this.changed=!0},i.setOriginalSize=function(t,e){this.originalSize.width=t||cc.visibleRect.width,this.originalSize.height=e||cc.visibleRect.height,this.width=this.originalSize.width/this.scale,this.height=this.originalSize.height/this.scale,this.updateAABB(),this.changed=!0},i.setArea=function(t,e,n,r){this.area.x=t,this.area.y=e,this.area.width=n,this.area.height=r,this.x1=t,this.y1=e,this.x2=t+n,this.y2=e+r},i.moveBy=function(t,e,n){void 0===n&&(n=!1),this.moveTo(this.x+t,this.y+e,n)},i.moveTo=function(t,e,n){void 0===n&&(n=!1),t=Math.max(this.x1,Math.min(t,this.x2-this.width)),e=Math.max(this.y1,Math.min(e,this.y2-this.height)),this.x===t&&this.y===e&&!n||(this.x=t,this.y=e,this.updateAABB(),this.changed=!0)},i.moveCenterTo=function(t,e,n){void 0===n&&(n=!1),t-=this.width/2,e-=this.height/2,this.moveTo(t,e,n)},i.screenToView=function(t,e){return this._tempPos0.x=t/this.scale+this.x,this._tempPos0.y=e/this.scale+this.y,this._tempPos0},i.setPivot=function(t,e){this.pivotX=t,this.pivotY=e},i.setPivotInScreen=function(t,e){this.pivotX=t/this.scale+this.x,this.pivotY=e/this.scale+this.y},i.getScale=function(){return this.scale},i.setScale=function(t,e){var n,r,o;void 0===e&&(e=!1),t=Math.max(this.minScale,Math.min(t,this.maxScale)),this.scale===t&&!e||(this.width=this.originalSize.width/t,this.height=this.originalSize.height/t,n=this.pivotX-this.x,r=this.pivotY-this.y,n*=o=1-this.scale/t,r*=o,this.scale=t,this.changed=!0,this.moveTo(this.x+n,this.y+r,e))},i._zoomInOut=function(t,e,n){if("number"==typeof(this.pivotX=e)&&"number"==typeof n)this.pivotY=n;else{var r=this.x+this.width/2,o=this.y+this.height/2;this.pivotX=r,this.pivotY=o}this.setScale(this.scale+this.zoomStep*(t?1:-1))},i.zoomIn=function(t,e){this._zoomInOut(!0,t,e)},i.zoomOut=function(t,e){this._zoomInOut(!1,t,e)},i.pointLimit=function(t,e){if(!t||!e)return!1;var n=e[0],r=e[1];if(0<=(n.x-t.x)*(r.y-t.y)-(n.y-t.y)*(r.x-t.x))return!1;var o=r.x-n.x;if(e=r.y-n.y,0==o)t.x=n.x;else if(0==e)t.y=n.y;else{var i=e/o,a=-o/e,c=n.y-i*n.x,s=t.y-a*t.x;t.x=(s-c)/(i-a),t.y=i*t.x+c}return!0},i.scrollBy=function(t,e,n,r){void 0===n&&(n=0);var o,i,a=this.x,c=this.y,s=this.width,u=this.height,l=this.limitLines,h=this.corner,f=!1;!f&&(t<0||e<0)&&(o=a,i=c,h.x=o+t,h.y=i+e,f=this.pointLimit(h,l.LT)),!f&&(0<t||e<0)&&(o=a+s,i=c,h.x=o+t,h.y=i+e,f=this.pointLimit(h,l.RT)),!f&&(0<t||0<e)&&(o=a+s,i=c+u,h.x=o+t,h.y=i+e,f=this.pointLimit(h,l.RB)),!f&&(t<0||0<e)&&(o=a,i=c+u,h.x=o+t,h.y=i+e,f=this.pointLimit(h,l.LB)),f&&(t=h.x-o,e=h.y-i),this.scrollTo(a+t,c+e,n,r)},i.scrollTo=function(t,e,n,r){var o=this;void 0===n&&(n=0);var i,a=this;this.viewTween&&(this.viewTween.stop(),this.viewTween=null),0<n?(i={x:a.x,y:a.y},this.viewTween=cc.tween(i).to(n,{x:t,y:e},{onUpdate:function(t){a.moveTo(t.x,t.y),o.delayChange=!0}}).call(function(){o.viewTween=null,r&&r()}).start()):a.moveTo(t,e)},i.scrollCenterTo=function(t,e,n,r){void 0===n&&(n=0),t-=this.width/2,e-=this.height/2,this.scrollTo(t,e,n,r)},i.scaleBy=function(t,e,n){void 0===e&&(e=0),this.scaleTo(this.scale+t,e,n)},i.scaleTo=function(t,e,n){var r,o=this;void 0===e&&(e=0),t=Math.max(this.minScale,Math.min(t,this.maxScale)),this.scale!==t&&(this.viewTween&&(this.viewTween.stop(),this.viewTween=null),0<e?(r={scale:this.scale},this.viewTween=cc.tween(r).to(e,{scale:t},{onUpdate:function(t){o.setScale(t.scale),o.delayChange=!0}}).call(function(){o.viewTween=null,n&&n()}).start()):this.setScale(t))},i.scrollAndScaleTo=function(t,e,n,r,o){var i=this;if(void 0===r&&(r=0),this.setScale(n),n=Math.max(this.minScale,Math.min(n||this.scale,this.maxScale)),this.setPivot(t,e),this.viewTween&&(this.viewTween.stop(),this.viewTween=null),0<r){var a=this.originalSize,c=a.width,s=a.height,u=this.scale,l=(t-this.x)*u,h=(e-this.y)*u,f={dx:l-this.width/2*u,dy:h-this.height/2*u,scale:u},d={dx:0,dy:0,scale:n};this.viewTween=cc.tween(f).to(r,d,{onUpdate:function(n){var r=n.scale,o=i.width=c/r,a=i.height=s/r;i.scale=r;var u=t-n.dx/r;r=e-n.dy/r,i.x=u-o/2,i.y=r-a/2,i.updateAABB(),i.changed=!0,i.delayChange=!0}}).call(function(){i.viewTween=null,o&&o()}).start()}else this.moveCenterTo(t,e)},i.getCenter=function(){var t=this.x+this.width/2,e=this.y+this.height/2;return this._tempPos0.x=t,this._tempPos0.y=e,this._tempPos0},i.updateAABB=function(){var t=this.aabb;t[0]=this.x-this.extBorder,t[1]=this.y-this.extBorder,t[2]=this.x+this.width+this.extBorder,t[3]=this.y+this.height+this.extBorder},i.isVisible=function(t){var e=this.aabb;return e[0]<t[2]&&e[1]<t[3]&&e[2]>t[0]&&e[3]>t[1]},i.isVisiblePoint=function(t,e){var n=this.aabb;return n[0]<t&&n[1]<e&&n[2]>t&&n[3]>e},i.onChanged=function(t,e){void 0===e&&(e=!1),e?this.eventTarget.once(this.EVENT_CHANGED,t):this.eventTarget.on(this.EVENT_CHANGED,t)},i.offChanged=function(t){this.eventTarget.off(this.EVENT_CHANGED,t)},i.syncView=function(t){if(void 0===t&&(t=!1),this.changed||t){var e=this.x+this.width/2,n=-(this.y+this.height/2);this.cameraNode.setPosition(e,n),this.camera.zoomRatio=this.scale,this.changed&&(this.eventTarget.emit(this.EVENT_CHANGED,this),this.changed=!1)}},i.setInputHandler=function(t){var e=this;this.inputHandler&&this.removeInputHandler(),t&&(this.inputHandler=t,this.allowMove=!0,this.allowScale=!0,this._onPan=function(t,n,r,o){var i;e.allowMove&&!e.viewTween&&(i=e.scale,(1<Math.abs(r)||1<Math.abs(o))&&(r*=1.6,o*=1.6),e.scrollBy(-r/i,-o/i))},t.onPan(this._onPan),this._onPinch=function(t,n,r){e.allowScale&&!e.viewTween&&(n=e.scale*r/n,e.setPivotInScreen(t.x,t.y),e.scaleTo(n))},this._onKeyUp=function(t){if(e.allowScale&&!e.viewTween)switch(t.keyCode){case cc.macro.KEY.equal:case cc.macro.KEY["+"]:e.zoomIn();break;case cc.macro.KEY.dash:case cc.macro.KEY["-"]:e.zoomOut()}},t.onKeyUp(this._onKeyUp),this._onMouseWhell=function(t){e.allowScale&&!e.viewTween&&(t=t.getScrollY(),cc.log("onMouseWheel:",t),t<-4?e.zoomIn():4<t&&e.zoomOut())},t.onMouseWheel(this._onMouseWhell))},i.removeInputHandler=function(){var t=this.inputHandler;t&&(this.allowMove=!1,this.allowScale=!1,t.offPan(this._onPan),this._onPan=null,t.offPinch(this._onPinch),this._onPinch=null,t.offKeyUp(this._onKeyUp),this._onKeyUp=null,t.offMouseWheel(this._onMouseWhell),this._onMouseWhell=null,this.inputHandler=null)},o}(cc.Component),a([u(cc.size)],o.prototype,"size",void 0),a([u],o.prototype,"area",void 0),a([u(cc.Node)],o.prototype,"cameraNode",void 0),o=a([s],o),i.default=o,cc._RF.pop()},{}],WaiterAI:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"36616O0ceVOp6SyXPJCS4G/","WaiterAI");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("App"),s=o("SoundEffectConst"),u=o("GameConst"),l=o("DeskService"),h=o("MapService"),f=o("OrderService"),d=o("RoleService"),p=o("BaseMan"),y=o("ChefAI"),v=o("MoveComponent");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).man=null,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){this.man=this.getComponent(p.default),this.move=this.getComponent(v.default),this.orderDataList=f.default.ins.orders[u.MachineType.type1]},i.think=function(){if(l.default.ins.cookDatas.length)return this.cookData=l.default.ins.cookDatas.pop(),this.move.moveTo(this.cookData.passSectionData.waiter.pos),void(this.state=y.AI_STATE.MOVE_TO_SEND_FOOD);if(this.orderDataList.hasEmp){var t=this.cookData=this.orderDataList.cookOrder();return t.init(this.man),this.move.moveTo(t.slot.chefPos),void(this.state=y.AI_STATE.MOVE_TO_COOKING)}if(f.default.ins.waitOrderList.length)return this.waitOrderData=f.default.ins.waitOrderList.pop(),this.move.moveTo(this.waitOrderData.pos),void(this.state=y.AI_STATE.MOVE_TO_ORDERING);this.state!==y.AI_STATE.MOVE_TO_REST&&this.state!==y.AI_STATE.REST&&this.state!==y.AI_STATE.DEEP_REST&&(this.move.moveTo(this.man.basePos),this.state=y.AI_STATE.MOVE_TO_REST)},i.update=function(t){if(this.man.state===p.CharactorState.stand)switch(this.state){case y.AI_STATE.NONE:this.think();break;case y.AI_STATE.DEEP_REST:this.think(),this.state!==y.AI_STATE.DEEP_REST&&d.default.ins.showLang(this.node,u.RoleLangType.WALK_UP);break;case y.AI_STATE.REST:if(this.think(),this.state!==y.AI_STATE.REST)break;this.leftTime-=t,this.leftTime<0&&(this.man.playAni("sleep2"),this.state=y.AI_STATE.DEEP_REST);break;case y.AI_STATE.MOVE_TO_SEND_FOOD:this.move.moveTo(this.cookData.order.customer.posData.staff.pos),this.cookData.passSectionData.removeCookData(this.cookData),this.man.showFood(this.cookData.order.display.food.spriteFrame,this.cookData.foodValue),this.state=y.AI_STATE.SEND_FOOD,this.man.state=p.CharactorState.send_food;break;case y.AI_STATE.MOVE_TO_ORDERING:this.man.direction=this.waitOrderData.direction,this.maxTime=h.default.ins.define.crew_order_time,this.leftTime=0,this.man.progress.progress=this.leftTime/this.maxTime,this.man.progress.node.active=!0,this.state=y.AI_STATE.ORDERING;break;case y.AI_STATE.MOVE_TO_COOKING:this.onMoveToCookingFinish();break;case y.AI_STATE.ORDERING:if(this.leftTime+=t,this.leftTime<this.maxTime){this.man.progress.progress=this.leftTime/this.maxTime;break}this.man.progress.node.active=!1,this.waitOrderData.cb.call(this.waitOrderData.target),this.waitOrderData=null,this.state=y.AI_STATE.NONE,c.default.SoundManager.playEffect(s.SoundsDefine.MIAOW),d.default.ins.showLang(this.node,u.RoleLangType.ORDER_FINISH);break;case y.AI_STATE.COOKING:this.onCooking(t);break;case y.AI_STATE.SEND_FOOD:this.cookData.finishOrder(),this.man.hideFood(),this.cookData=null,this.state=y.AI_STATE.NONE,c.default.SoundManager.playEffect("get_coin2");break;case y.AI_STATE.MOVE_TO_REST:this.moveToRest()}else this.man.state===p.CharactorState.run&&this.state===y.AI_STATE.MOVE_TO_REST&&this.think()},i.onCooking=function(t){this.leftTime+=t,this.leftTime<this.maxTime?this.man.progress.progress=this.leftTime/this.maxTime:(c.default.SoundManager.playEffect(s.SoundsDefine.COOK_FINISH),this.man.progress.node.active=!1,t=this.man.getPerfectDishRate(),this.cookData.finishCook(t&&t>Math.random()),this.orderDataList.checkHasEmp(),this.move.moveTo(this.cookData.order.customer.posData.staff.pos),this.man.showFood(this.cookData.order.display.food.spriteFrame,this.cookData.foodValue),this.man.state=p.CharactorState.send_food,this.state=y.AI_STATE.SEND_FOOD,this.man.removeFire(),d.default.ins.showLang(this.node,u.RoleLangType.MACHINE_FINISH))},o}(y.default)),a.default=i,cc._RF.pop()},{}],Waiter:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"bf57eXFR5pHjIa5aJqud8NW","Waiter");var o=t,i=e,a=n;i=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=o("GlobalAttr"),s=o("Chef");i=i([cc._decorator.ccclass],i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).skinName="\u88c5\u5907/\u670d\u52a1\u5458/waiter_01",e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.calSpeed=function(){this.moveSpeed=c.default.ins.waiterspeed},i.getCookSpeedRate=function(){return c.default.ins.waiterProductionSpeed},o}(s.default)),a.default=i,cc._RF.pop()},{}],Wait:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"58cc3cCNr5KkpgwiRpDqHW3","Wait");var o=t,i=n;Object.defineProperty(i,"__esModule",{value:!0});var a=o("constants"),c=o("Action");i.default=function(t){var e,n;function o(e){var n;return void 0===e&&(e=0),(n=t.call(this,{name:"Wait",title:"Wait <milliseconds>ms",properties:{milliseconds:0}})||this).endTime=e,n}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.open=function(t){var e=(new Date).getTime();t.blackboard.set("startTime",e,t.tree.id,this.id)},i.tick=function(t){return(new Date).getTime()-t.blackboard.get("startTime",t.tree.id,this.id)>this.endTime?a.SUCCESS:a.RUNNING},o}(c.default),cc._RF.pop()},{}],WorldMapView:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"358a31bJIhJNrJeaO5pY7Vt","WorldMapView");var o,i=t,a=n;o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},Object.defineProperty(a,"__esModule",{value:!0});var c=i("App"),s=i("GameText"),u=i("BaseView"),l=(i("ViewConst"),i("GameConst")),h=i("MapService"),f=cc._decorator,d=f.ccclass,p=f.property;f.menu,i=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).scrollView=null,e.mask=null,e.dianContent=null,e.lineContent=null,e.nameBgContent=null,e.nameLabContent=null,e.mapIconContent=null,e.mapId=-1,e.bgType=1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initUI=function(){t.prototype.initUI.call(this)},i.open=function(t){var e=this;void 0===t&&(t=!1),t&&c.default.ViewManager.close(20),this.mask.active=!1,this.mapId=h.default.ins.curId;for(var n=h.default.ins.getCurRegionCfgs(),r=this.mapIconContent.children,o=this.lineContent.children,i=this.dianContent.children,a=this.nameBgContent.children,u=this.nameLabContent.children,f=0,d=0,p=0;p<n.length;p++){var y=n[p],v=parseInt(y.stage);if(v<=this.mapId){i[p].active=!0,u[p].active=!0,a[p].active=!0,u[p].getComponent(cc.Label).string=p+1+"."+s.GameText.getTextByStr(n[p].stage_name);var g=r[p].getComponent(cc.Sprite);c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,"stage/"+n[p].stage_icon,g);var m=r[p].position;d=r[p+1].position.sub(m).len()-25,o[p].width=d,v==this.mapId&&(o[p].width=0,f=p+1)}}if(4<f&&(this.scrollView.content.y=-r[f-1].y-700),t){var _=c.default.ConfigManager.getConfig("Region")[n[0].region+1];cc.tween(o[f-1]).delay(1).to(2,{width:d}).call(function(){i[f].active=!0,u[f].active=!0,a[f].active=!0;var t=r[f].getComponent(cc.Sprite),e=u[f].getComponent(cc.Label);7==f?(e.string=f+"."+s.GameText.getTextByStr(_.region_name),c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,"region/"+_.region_icon,t)):(e.string=f+"."+s.GameText.getTextByStr(n[f].stage_name),c.default.CommonUtils.setSpriteFrameByBundle(l.BundleType.MAP_ICON,"stage/"+n[f].stage_icon,t))}).delay(3).call(function(){h.default.ins.switchMap(),e.closeView()}).start()}},o}(u.default),o([p(cc.ScrollView)],i.prototype,"scrollView",void 0),o([p(cc.Node)],i.prototype,"mask",void 0),o([p(cc.Node)],i.prototype,"dianContent",void 0),o([p(cc.Node)],i.prototype,"lineContent",void 0),o([p(cc.Node)],i.prototype,"nameBgContent",void 0),o([p(cc.Node)],i.prototype,"nameLabContent",void 0),o([p(cc.Node)],i.prototype,"mapIconContent",void 0),i=o([d],i),a.default=i,cc._RF.pop()},{}],WxGameClubButton:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"bf1aeXZN+lJX4/7pVBnLoSH","WxGameClubButton");var o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),o=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a}([o=cc._decorator.ccclass],o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).btn=null,e._init=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.initBtn=function(){var t,e,n,r,o,i;this._init||cc.sys.platform!==cc.sys.WECHAT_GAME||(this._init=!0,t=this.node.getBoundingBoxToWorld(),i=wx.getSystemInfoSync(),e=cc.winSize,n=t.xMin/e.width*i.windowWidth,r=(e.height-t.yMax)/e.height*i.windowHeight,o=t.width/e.width*i.windowWidth,i=t.height/e.height*i.windowHeight,this.btn=wx.createGameClubButton({type:"text",text:"",style:{left:n,top:r,width:o,height:i,lineHeight:0,backgroundColor:"",color:"#3296fa",textAlign:"center",fontSize:16,borderRadius:4}}),this.btn.show())},i.onEnable=function(){this.btn&&this.btn.show()},i.onDisable=function(){this.btn&&this.btn.hide()},i.onDestroy=function(){this.btn&&(this.btn.destroy(),this.btn=null)},o}(cc.Component)),i.default=o,cc._RF.pop()},{}],WxGamePlatform:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"6275alfnidBxYfxW52Jo5wi","WxGamePlatform");var a=t,c=n,s=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.WxgameVideo=void 0;var u=a("App"),l=a("WxMiniGameUtil"),h=(a("ADManageBase"),a("MidashiPay")),f=a("PlatformBase"),d=a("DybAd"),p=a("DybSdk");c.default=function(t){var e,n;function a(){var e;return(e=t.call(this)||this).appid="wx9b25fce9f330f9b6",e.isShare=!1,e.isShareSuccess=!1,e.failedTexts=["\u5956\u52b1\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u597d\u53cb\u8bd5\u8bd5","\u5956\u52b1\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4\u8bd5\u8bd5","\u5956\u52b1\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u7fa4\u8bd5\u8bd5"],e.lastShareTime=-1,e.pay=null,e.isServiceOpen=!0,e.isShowIosPay=!1,e.wxVersion="",e.dybSdk=null,e._isNew=!1,e._launchOptions=wx.getLaunchOptionsSync(),e.systemInfo=wx.getSystemInfoSync(),wx.onMemoryWarning(function(t){IS_AUTO_RELEASE=!0,u.default.ResRecycle.startAutoRelease(),cc.sys.os===cc.sys.OS_IOS?e.record({type:50,tid:0,numinc:1}):e.record({type:50,tid:t&&t.level||1,numinc:1})}),wx.onShow(e.wxGameOnShow.bind(o(e))),l.WxMiniGameUtil.enablePassiveShare(),e.initDybSdk(),e.wxVersion=versionInfo.packVersion.replace(/\./g,"_"),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,i(e,n);var c=a.prototype;return c.isShowGameCircle=function(){return!0},c.initPay=function(){this.pay=new h.default},c.initDybSdk=function(){this.dybSdk=new p.DybSdk},c.getPrice=function(t){return(t=this.getProductConfigByPayString(t))?"\uffe5"+t.cost:null},c.checkIsNotch=function(){return 0<this.systemInfo.safeArea.left||0<this.systemInfo.safeArea.top},c.isShowDebugUI=function(){return this.systemInfo.enableDebug||"devtools"===this.systemInfo.brand},c.vibrator=function(t){void 0===t&&(t=0),wx.vibrateShort({type:"light",success:function(){},fail:function(){},complete:function(){}})},c.getAdKey=function(){return u.default.RandomUtils.randomArray(["adunit-8912a66c11fe595c"])},c.initAd=function(){t.prototype.initAd.call(this);var e=new d.DybAd(this.getAdKey());this._videoManage.setAdObj(e)},c.loadZipFile=function(t){var e=this;return new Promise(function(n){if("windows"!=e.systemInfo.platform&&"mac"!=e.systemInfo.platform){var r=cc.assetManager.cacheManager.cacheDir,o=cc.sys.os===cc.sys.OS_ANDROID?"/a_":"/i_",i=r+o+"file.zip";fsUtils.exists(i,function(e){if(e)n(!1);else{var a=REMOTE_SERVER_ROOT+"/remote/";fsUtils.downloadFile(a+"/"+o+versionInfo.zipVersion+".zip",i,null,function(e){t(e.totalBytesWritten,e.totalBytesExpectedToWrite)},function(t,e){return t?(cc.error("\u4e0b\u8f7dzip\u6587\u4ef6\u5931\u8d25",t),void n(!1)):(console.log("\u5f00\u59cb\u89e3\u538b"),void fsUtils.unzip(e,r,function(t){if(t)n(!1);else{console.log("\u89e3\u538b\u6210\u529f");for(var e=cc.assetManager.cacheManager.cachedFiles,o=Date.now(),i=fsUtils.readJsonSync(r+"/fileList.json"),c=i.length,s=0;s<c;s+=2){var u=a+i[s],l=i[s].split("/")[0];e.add(u,{url:r+"/"+l+"/"+i[s+1],lastTime:o,bundle:l})}n(!0)}}))})}})}else n(!1)})},c.wxGameOnShow=function(t){Log.warn("wxGameOnShow"),this._launchOptions=t,this.isShareSuccess=this.isShare=!1},c.checkRandom=function(){var t=Math.random();return Log.warn("\u5206\u4eab\u6210\u529f\u6982\u7387:",t,.4<t),.4<t},c.loginWx=function(){return new Promise(function(t,e){wx.login({success:function(e){t(e)},fail:function(){e()}})})},c.getAccountInfoSync=function(){return wx.getAccountInfoSync()},c.getSenceCode=function(){var t=this._launchOptions;return null!=t.scene||null!=t.scene?t.scene:-1},c.share=function(t,e){var n=this;return new Promise(function(){n.isShareSuccess=n.isShare=!0;var t="";for(var r in e.paramList)t+=r+"="+e.paramList[r]+"&";t=t.substr(0,t.length-1),n.lastShareTime=Date.now();var o=-1==e.url.indexOf("http")?u.default.ConfigManager.gameConf.serverInfos.interface+"/"+e.url:e.url;wx.shareAppMessage({title:e.title,imageUrl:o,query:t})})},c.getLaunchOptions=function(){var t,e=this._launchOptions,n="",r=0;if(e.query&&e.query.chl){var o=e.query;return{chl:o.chl||u.default.ConfigManager.gameConf.channel,serverid:o.serverid||u.default.ConfigManager.gameConf.serverInfos.serverid,upplayerid:t=o.playerid||"",sourceAppid:n,shareid:r=o.shareType||0}}return e.referrerInfo&&e.referrerInfo.appId&&(n=e.referrerInfo.appId),{chl:u.default.ConfigManager.gameConf.channel,serverid:u.default.ConfigManager.gameConf.serverInfos.serverid,upplayerid:t,sourceAppid:n,shareid:r}},c.getUseInfoFinish=function(t){"string"==typeof t.reg_time?new Date(t.reg_time).getTime():t.reg_time;var e=wx.getAccountInfoSync();if(this._isNew&&"release"===e.miniProgram.envVersion){var n=u.default.ConfigManager.gameConf;t.channel!==n.channel&&u.default.Http.post(n.serverInfos.interface+"/Interface/user/set_channel.php",{token:this.loginInfo.token,channel:n.channel},3)}},c.syncData=function(){var e=Object.create(null,{syncData:{get:function(){return t.prototype.syncData}}});return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=cc.sys.os===cc.sys.OS_IOS,!t.t0){t.next=4;break}return t.next=4,this.getIosPayConfig();case 4:return t.abrupt("return",e.syncData.call(this));case 5:case"end":return t.stop()}},t,this)}))},c.getServiceConfig=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.Http.post(u.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/game_conf/get.php",{key:"server_switch_"+this.wxVersion},5,1e3);case 2:(e=t.sent)&&0==(n=JSON.parse(e)).code&&(this.isServiceOpen=!!n.data);case 4:case"end":return t.stop()}},t,this)}))},c.initAccountServer=function(){var t=wx.getAccountInfoSync(),e=u.default.ConfigManager.getConfig("Server")[this.getServerId()];if("release"===t.miniProgram.envVersion)u.default.ConfigManager.gameConf.serverInfos.interface=e.stat;else{u.default.ConfigManager.gameConf.serverInfos.game=e.games[0].game,u.default.ConfigManager.gameConf.serverInfos.interface=e.stat;var n=u.default.ConfigManager.getServerCacheInfo();n&&(u.default.ConfigManager.gameConf.serverInfos.game=n.game,u.default.ConfigManager.gameConf.serverInfos.interface=n.stat)}},c.initGameServer=function(t){var e=wx.getAccountInfoSync(),n=u.default.ConfigManager.getConfig("Server")[this.getServerId()];if("release"===e.miniProgram.envVersion)if(this.isServiceOpen){u.default.ConfigManager.gameConf.serverInfos.game=n.games[1].game;for(var r=n.games.length-1;1<r;r--){var o=n.games[r];if(o.regTime&&t>o.regTime){u.default.ConfigManager.gameConf.serverInfos.game=o.game,u.default.ConfigManager.gameConf.channel=o.chl,console.log("\u6839\u636e\u6ce8\u518c\u65f6\u95f4\u9009\u62e9\u4e86\u670d\u52a1\u5668:",o);break}}}else u.default.ConfigManager.gameConf.serverInfos.game=n.games[0].game},c.login=function(){var t=this;return this.loginInfo.token?new Promise(function(e){wx.checkSession({success:function(){e({code:0,loginKey:t.loginInfo.token})},fail:function(){e(t.dybSdkLogin())}})}):this.dybSdkLogin()},c.dybSdkLogin=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dybSdk.getDybUserInfo();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",{code:null,loginKey:null});case 5:if(!this.loginInfo.token){t.next=7;break}return t.abrupt("return",Promise.resolve({code:0,loginKey:this.loginInfo.token}));case 7:return t.next=9,u.default.Http.requestAsync(u.default.ConfigManager.gameConf.serverInfos.interface+"/api/login/simple",{code:e,channel:this.getChannel()},"GET");case 9:return n=t.sent,Log.trace(">>>>>>>>>>>>>>>\u6e38\u5ba2\u767b\u5f55",n,e),n=JSON.parse(n),t.abrupt("return",0===n.code?(this.loginInfo.playerid=n.data.id,this.loginInfo.token=n.token,u.default.SaveManage.save(f.LoginDataSaveKey.loginCache),u.default.DateUtils.secondNow()-n.data.reg_time<60&&this.dybSdk.createRole(),{code:n.code,loginKey:n.token}):{code:n.code,loginKey:null});case 13:case"end":return t.stop()}},t,this)}))},c.getServerId=function(){return"elve"},c.wxLogin=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n,o,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loginWx();case 2:return e=t.sent,n=e.code,o=this.getLaunchOptions(),i=this.getSenceCode(),t.next=8,u.default.Http.requestAsync(u.default.ConfigManager.gameConf.serverInfos.interface+"/api/login/weixin",{code:n,channel:o.chl,scene:i});case 8:return i=t.sent,i=JSON.parse(i),t.abrupt("return",0===i.code?(this.loginInfo.unionid=i.session.unionid,this.loginInfo.playerid=i.data.id,this.loginInfo.token=i.token,this.loginInfo.openid=i.session.openid,u.default.SaveManage.save(f.LoginDataSaveKey.loginCache),{code:i.code,loginKey:i.token}):{code:i.code,loginKey:null});case 11:case"end":return t.stop()}},t,this)}))},c.saveWxUserInfo=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=function(t){return s(n,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=3;case 1:return e.prev=1,e.next=4,u.default.Http.requestAsync(u.default.ConfigManager.gameConf.serverInfos.interface+"/Interface/data/save_user_info.php",{token:u.default.GameDataMsr.playerInfo.token,appid:this.appid,userInfo:JSON.stringify(t.userInfo),rawData:t.rawData,signature:t.signature,encryptedData:t.encryptedData,iv:t.iv,cloudID:t.cloudID});case 4:if(o=e.sent,0!==JSON.parse(o).code){e.next=7;break}return e.abrupt("break",15);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("saveUserInfo \u5931\u8d25",e.t0);case 12:return e.next=14,u.default.TimerManager.sleep(1e3);case 14:if(--n){e.next=1;break}case 15:case"end":return e.stop()}},e,this,[[1,9]])}))},wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({withCredentials:!1,success:function(t){if(t){var e=u.default.GameDataMsr.playerInfo;e.nickName=t.userInfo.nickName,e.head=t.userInfo.avatarUrl}},fail:function(){}}):wx.authorize({scope:"scope.userInfo",success:function(){wx.getUserInfo({success:function(t){if(t){var n=u.default.GameDataMsr.playerInfo;n.nickName=t.userInfo.nickName,n.head!=t.userInfo.avatarUrl&&(n.head=t.userInfo.avatarUrl,e(t))}},fail:function(){}})},fail:function(){}})},fail:function(){}});case 2:case"end":return t.stop()}},t)}))},c.buy=function(t){return s(this,void 0,void 0,r().mark(function e(){var n,o;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.default.EasyLoading.showLoading(),n=this.getProductConfigByPayString(t),e.next=4,this.dybSdk.buy(n);case 4:return o=e.sent,e.abrupt("return",(o&&(this.playerSpendMoney=n.cost),u.default.EasyLoading.hideLoading(),o));case 6:case"end":return e.stop()}},e,this)}))},c.resetGame=function(){wx.restartMiniProgram()},c.getIosPayConfig=function(){return s(this,void 0,void 0,r().mark(function t(){var e,n;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.Http.requestAsync(u.default.ConfigManager.gameConf.serverInfos.interface+"/api/config/payment_switch/"+this.wxVersion,{},"GET");case 2:(e=t.sent)&&0==(n=JSON.parse(e)).code&&(this.isShowIosPay=n.data[this.wxVersion]);case 4:case"end":return t.stop()}},t,this)}))},c.getIsShowPay=function(){return cc.sys.os!==cc.sys.OS_IOS||this.isShowIosPay},c.syncDataCallBack=function(){t.prototype.syncDataCallBack.call(this),u.default.AnalyticMgr.dayStatistics(this.appid),this.saveWxUserInfo()},c.isAuthorization=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){wx.getSetting({success:function(e){t(e.authSetting["scope.userInfo"])},fail:function(){t(!1)}})}));case 1:case"end":return t.stop()}},t)}))},c.resumOrder=function(){return s(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u.default.EasyLoading.showLoading(),t.next=3,this.dybSdk.getNotReceivedOrder();case 3:u.default.EasyLoading.hideLoading();case 4:case"end":return t.stop()}},t,this)}))},a}(f.default),c.WxgameVideo=function(){function t(t){this.onLoadAdComplete=null,this.onLoadAdFail=null,this.adState=0,this.id=t}var e=t.prototype;return e.addADLoadSuccessCallBack=function(){this.onLoadAdComplete()},e.addADloadFailCallBack=function(t){cc.log("addADloadFailCallBack error",t),this.onLoadAdFail(t)},e.addADCloesCallBack=function(t){var e={code:1};(t&&t.isEnded||void 0===t)&&(e.code=0),this.onShowAdComplete(e)},e.init=function(){this.initAd()},e.initAd=function(){cc.log("adUnitId:",this.id);var t=this.adVideo=wx.createRewardedVideoAd({adUnitId:this.id,multiton:!0});t.onLoad(this.addADLoadSuccessCallBack.bind(this)),t.onError(this.addADloadFailCallBack.bind(this)),t.onClose(this.addADCloesCallBack.bind(this)),this.adState=1},e.load=function(){return cc.log("\u52a0\u8f7d\u5e7f\u544a"),this.adVideo.load()},e.show=function(){return this.adVideo.show()},t}(),cc._RF.pop()},{}],WxGameUserInfoButton:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"b62a1BiqJpAD43Yy853ag2s","WxGameUserInfoButton");var i=t,a=e,c=n,s=(a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a},function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})});Object.defineProperty(c,"__esModule",{value:!0});var u=i("App");a=a([cc._decorator.ccclass],a=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this).btn=null,e._init=!1,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a=i.prototype;return a.initBtn=function(t,e,n){return void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n=""),s(this,void 0,void 0,r().mark(function o(){var i,a,c,s,l,h,f=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(cc.sys.platform===cc.sys.WECHAT_GAME){r.next=4;break}this.node.active=!1,r.next=14;break;case 4:if(r.t0=this._init,r.t0){r.next=14;break}return this._init=!0,r.next=9,u.default.Platform.isAuthorization();case 9:if(!r.sent){r.next=13;break}this.node.active=!1,r.next=14;break;case 13:this.node.active=!0,i=this.node.getBoundingBoxToWorld(),h=wx.getSystemInfoSync(),a=cc.winSize,c=i.xMin/a.width*h.windowWidth,s=(a.height-i.yMax)/a.height*h.windowHeight,l=i.width/a.width*h.windowWidth,h=i.height/a.height*h.windowHeight,this.btn=wx.createUserInfoButton({type:"text",text:n,style:{left:c,top:s,width:l,height:h,lineHeight:40,backgroundColor:t,color:e,textAlign:"center",fontSize:16,borderRadius:4},withCredentials:!1}),this.btn.onTap(function(t){if(t){var e=u.default.GameDataMsr.playerInfo;e.nickName=t.userInfo.nickName,e.head=t.userInfo.avatarUrl}f.node.active=!1}),this.btn.show();case 14:case"end":return r.stop()}},o,this)}))},a.onEnable=function(){this.btn&&this.btn.show()},a.onDisable=function(){this.btn&&this.btn.hide()},a.onDestroy=function(){this.btn&&(this.btn.destroy(),this.btn=null)},a.onLoad=function(){},a.hideBtn=function(){this.btn&&this.btn.hide()},i}(cc.Component)),c.default=a,cc._RF.pop()},{}],WxMiniGameUtil:[function(t,e,n){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new O(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var h={};function f(){}function d(){}function p(){}var y={};s(y,i,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==e&&n.call(g,i)&&(y=g);var m=p.prototype=f.prototype=Object.create(y);function _(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){r("next",t,a,c)},function(t){r("throw",t,a,c)}):e.resolve(h).then(function(t){u.value=t,a(u)},function(t){return r("throw",t,a,c)})}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e(function(e,o){r(t,n,e,o)})}return o=o?o.then(i,i):i()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,s(m,"constructor",p),s(p,"constructor",d),d.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(b.prototype),s(b.prototype,a,function(){return this}),t.AsyncIterator=b,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new b(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},_(m),s(m,c,"Generator"),s(m,i,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}cc._RF.push(e,"e1412m02NNPKq32gh0l5Kr1","WxMiniGameUtil");var o=t,i=n,a=function(t,e,n,r){return new(n=n||Promise)(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((r=r.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.WxMiniGameUtil=void 0;var c=o("ControllerConst"),s=o("App"),u=o("GamePlatform"),l=function(){function t(){}return t.getSettings=function(){return"undefined"==typeof wx?Promise.resolve(null):null!=t.s_authSetting?Promise.resolve(t.s_authSetting):new Promise(function(e){wx.getSetting({success:function(e){t.s_authSetting=e.authSetting},fail:function(){t.s_authSetting=null},complete:function(){e(t.s_authSetting)}})})},t.checkUserInfoAuth=function(){return a(this,void 0,void 0,r().mark(function e(){var n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSettings();case 2:return n=e.sent,e.abrupt("return",!!n&&!0===n["scope.userInfo"]);case 4:case"end":return e.stop()}},e)}))},t.checkWxFriendInteractionAuth=function(){return a(this,void 0,void 0,r().mark(function e(){var n;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSettings();case 2:return n=e.sent,e.abrupt("return",!!n&&!0===n["scope.WxFriendInteraction"]);case 4:case"end":return e.stop()}},e)}))},t.updateUserInfo=function(t,e){s.default.GameDataMsr.playerInfo.nickName=t,s.default.GameDataMsr.playerInfo.head=e},t.tryGetInfo=function(){return a(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkUserInfoAuth();case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}t.getUserInfo();case 5:case"end":return e.stop()}},e)}))},t.getUserInfo=function(){wx.getUserInfo({success:function(e){e&&t.updateUserInfo(e.userInfo.nickName,e.userInfo.avatarUrl)},fail:function(){}})},t.copyFunc=function(t){wx.setClipboardData({data:t,success:function(){wx.getClipboardData({success:function(){}})}})},t.enablePassiveShare=function(){if("undefined"==typeof wx)return null;wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){var t=s.default.ControllerManager.getControllerModel(c.ControllerConst.AD).getShareData();return{title:t.message,imageUrl:t.image_src,imageUrlId:t.id,query:"fromUser="+u.GamePlatform.getServerUID()}}),wx.onShareTimeline(function(){var t=u.GamePlatform.randomShareData();return{title:t[2],imageUrl:t[0],imageUrlId:t[1],imagePreviewUrl:u.WechatPreviewImageURL,imagePreviewUrlId:u.WechatPreviewImageURLId,query:"fromUser="+u.GamePlatform.getServerUID()}})},t}();i.WxMiniGameUtil=l,l.s_authSetting=null,cc._RF.pop()},{}],ZoomBtn:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"418dcho7HFG+ZT93ZuDiPDB","ZoomBtn");var i=e,a=n,c=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,u=s.ccclass,l=s.property,h=(s.menu,s.executeInEditMode),f=s.playOnFocus;c([l],(i=function(t){var e,n;function i(){var e;return(e=t.apply(this,arguments)||this)._isShow=!0,e._btns=[],e._bgMinHeight=100,e._bgHeight=0,e.contractionBtn=null,e.bgNode=null,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var a,c,s=i.prototype;return s.onLoad=function(){},s.onChildChange=function(){var t=this._btns.length;this._bgHeight=this._bgMinHeight;for(var e=-64,n=0;n<t&&this._btns[n];n++)this._bgHeight+=10+this._btns[n].height,this._btns[n].y=e,this._btns[n].active=!0,e-=10+this._btns[n].height;this._isShow=!0,this.contractionBtn.node.y=40-this._bgHeight,this.bgNode.height=this._bgHeight},s.buttonChange=function(){var t=this;this.contractionBtn.interactable=!1,this._isShow=!this._isShow,this._isShow?(cc.tween(this.bgNode).to(.2,{height:this._bgHeight}).start(),cc.tween(this.contractionBtn.node).to(.2,{angle:180,y:40-this._bgHeight}).start(),function e(n){if(n>t.btns.length-1)t.contractionBtn.interactable=!0;else{var r=t.btns[n];r.active=!0,cc.tween(r).to(.1,{y:r.y-r.height,opacity:255},{easing:cc.easing.sineOut}).call(function(){e(++n)}).start()}}(0)):(cc.tween(this.contractionBtn.node).to(.2,{angle:0,y:40-this._bgMinHeight}).start(),cc.tween(this.bgNode).to(.2,{height:this._bgMinHeight}).start(),function e(n){if(n<0)t.contractionBtn.interactable=!0;else{var r=t.btns[n];cc.tween(r).to(.1,{y:r.y+r.height,opacity:0},{easing:cc.easing.sineOut}).call(function(){e(--n),r.active=!1}).start()}}(this.btns.length-1))},a=i,(c=[{key:"isShow",get:function(){return this._isShow},set:function(){this.buttonChange()}},{key:"btns",get:function(){return this._btns},set:function(t){this._btns=t,this.onChildChange()}}])&&r(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),i}(cc.Component)).prototype,"_isShow",void 0),c([l({})],i.prototype,"isShow",null),c([l()],i.prototype,"_btns",void 0),c([l({type:cc.Node})],i.prototype,"btns",null),c([l],i.prototype,"_bgMinHeight",void 0),c([l],i.prototype,"_bgHeight",void 0),c([l({type:cc.Button})],i.prototype,"contractionBtn",void 0),c([l({type:cc.Node})],i.prototype,"bgNode",void 0),i=c([u,h,f],i),a.default=i,cc._RF.pop()},{}],b3:[function(t,e,n){"use strict";cc._RF.push(e,"567c7RRL2lG/pbup3XxIcS8","b3");var r=t,o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.Repeater=i.RepeatUntilSuccess=i.RepeatUntilFailure=i.MaxTime=i.Limiter=i.Inverter=i.Tick=i.Decorator=i.Condition=i.Composite=i.Blackboard=i.BehaviorTree=i.BaseNode=i.Action=i.Sequence=i.Priority=i.MemSequence=i.MemPriority=i.Wait=i.Succeeder=i.Runner=i.Failer=i.B3Error=i.createUUID=i.CONDITION=i.ACTION=i.DECORATOR=i.COMPOSITE=i.ERROR=i.RUNNING=i.FAILURE=i.SUCCESS=i.VERSION=i.Category=i.STATE=void 0,o=r("B3Error"),i.B3Error=o.default,o=r("Failer"),i.Failer=o.default,o=r("Runner"),i.Runner=o.default,o=r("Succeeder"),i.Succeeder=o.default,o=r("Wait"),i.Wait=o.default;var a=r("B3Functions");Object.defineProperty(i,"createUUID",{enumerable:!0,get:function(){return a.createUUID}}),o=r("MemPriority"),i.MemPriority=o.default,o=r("MemSequence"),i.MemSequence=o.default,o=r("Priority"),i.Priority=o.default,o=r("Sequence"),i.Sequence=o.default;var c=r("constants");Object.defineProperty(i,"ACTION",{enumerable:!0,get:function(){return c.ACTION}}),Object.defineProperty(i,"Category",{enumerable:!0,get:function(){return c.Category}}),Object.defineProperty(i,"COMPOSITE",{enumerable:!0,get:function(){return c.COMPOSITE}}),Object.defineProperty(i,"CONDITION",{enumerable:!0,get:function(){return c.CONDITION}}),Object.defineProperty(i,"DECORATOR",{enumerable:!0,get:function(){return c.DECORATOR}}),Object.defineProperty(i,"ERROR",{enumerable:!0,get:function(){return c.ERROR}}),Object.defineProperty(i,"FAILURE",{enumerable:!0,get:function(){return c.FAILURE}}),Object.defineProperty(i,"RUNNING",{enumerable:!0,get:function(){return c.RUNNING}}),Object.defineProperty(i,"STATE",{enumerable:!0,get:function(){return c.STATE}}),Object.defineProperty(i,"SUCCESS",{enumerable:!0,get:function(){return c.SUCCESS}}),Object.defineProperty(i,"VERSION",{enumerable:!0,get:function(){return c.VERSION}}),o=r("Action"),i.Action=o.default,o=r("BaseNode"),i.BaseNode=o.default,o=r("BehaviorTree"),i.BehaviorTree=o.default,o=r("Blackboard"),i.Blackboard=o.default,o=r("Composite"),i.Composite=o.default,o=r("Condition"),i.Condition=o.default,o=r("Decorator"),i.Decorator=o.default,o=r("Tick"),i.Tick=o.default,o=r("Inverter"),i.Inverter=o.default,o=r("Limiter"),i.Limiter=o.default,o=r("MaxTime"),i.MaxTime=o.default,o=r("Repeater"),i.Repeater=o.default,o=r("RepeatUntilFailure"),i.RepeatUntilFailure=o.default,r=r("RepeatUntilSuccess"),i.RepeatUntilSuccess=r.default,cc._RF.pop()},{}],config:[function(t,e){"use strict";cc._RF.push(e,"33d740IF/FCMZyXq9LouG5L","config"),e.exports={appid:"wx9b25fce9f330f9b6",env:"develop",url:"https://cps.moyangmoyang.com"},cc._RF.pop()},{}],constants:[function(t,e,n){"use strict";cc._RF.push(e,"573a4fcKAlL76Go258HPu6s","constants");var r,o=e,i=n;Object.defineProperty(i,"__esModule",{value:!0}),i.CONDITION=i.ACTION=i.DECORATOR=i.COMPOSITE=i.Category=i.ERROR=i.RUNNING=i.FAILURE=i.SUCCESS=i.STATE=i.VERSION=void 0,i.VERSION="0.2.3",(o=r=i.STATE||(i.STATE={}))[o.NONE=0]="NONE",o[o.SUCCESS=1]="SUCCESS",o[o.FAILURE=2]="FAILURE",o[o.RUNNING=3]="RUNNING",o[o.ERROR=4]="ERROR",i.SUCCESS=r.SUCCESS,i.FAILURE=r.FAILURE,i.RUNNING=r.RUNNING,i.ERROR=r.ERROR,(r=o=i.Category||(i.Category={})).COMPOSITE="composite",r.DECORATOR="decorator",r.ACTION="action",r.CONDITION="condition",r.NONE="",i.COMPOSITE=o.COMPOSITE,i.DECORATOR=o.DECORATOR,i.ACTION=o.ACTION,i.CONDITION=o.CONDITION,cc._RF.pop()},{}],test:[function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}cc._RF.push(e,"3914cq3KNNJTK15RusIfMS9","test");var o=e,i=n,a=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(a=(i<3?o(a):3<i?o(e,n,a):o(e,n))||a);return 3<i&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property,l=c.executeInEditMode,h=c.playOnFocus;c.menu,a([u],(o=function(t){var e,n;function o(){var e;return(e=t.apply(this,arguments)||this).isPreview=!1,e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var i=o.prototype;return i.onLoad=function(){},i.update=function(e){t.prototype.update&&t.prototype.update.call(this,e)},o}(sp.Skeleton)).prototype,"isPreview",void 0),o=a([s,l,h],o),i.default=o,cc._RF.pop()},{}],"wxsdk_v3.17":[function(t,e){"use strict";cc._RF.push(e,"29733m4aGpLTYUTLyVGFLNC","wxsdk_v3.17");var n,r,o,i,a,c,s,u,l,h,f,d,p,y,v,g,m,_,b,w,C,S,O,T,I=t,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function x(t,e){0<t.length?wx.request({url:c+"/api/wx/wx_subscribe",method:"POST",data:{tmpid:t,appid:d,openid:p,sign:y,platform:m},success:function(t){var n,r=t.data.data;for(n in r)wx.setStorageSync(n,r[n]);e({code:1,msg:"\u8ba2\u9605\u6210\u529f",tem_ids:r})},fail:function(t){console.log(t,"rrrrrrrrrr")}}):e({code:0,msg:"\u62d2\u7edd\u8ba2\u9605"})}function A(t){wx.checkSession({success:function(){var e;console.log("\u91cd\u65b0\u83b7\u53d6 success-"+p),p?(e={user:{openid:p,sign:y},shareInfo:g.query},t(e)):T.login(function(e){p?t(e):wx.showModal({title:"\u63d0\u793a",content:"\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u5c0f\u6e38\u620f4"})})},fail:function(){"develop"==s&&console.log("\u91cd\u65b0\u83b7\u53d6openid fail"),T.login(function(e){p?t(e):wx.showModal({title:"\u63d0\u793a",content:"\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u5c0f\u6e38\u620f3"})})}})}function L(t){new Array;for(var e=t.split("&"),n=0;n<e.length;n++){if(""==e[n])return;var r=t.split("=");if("chid"==r[0]||"subchid"==r[0]||"shareid"==r[0]||"sharetype"==r[0])return}return 1}"function"==typeof Symbol&&E(Symbol.iterator),I=I("config"),a="v3.17",s="develop",l="test_sub_channel_id",v={},g={},b=120,C=w=m=y=p=d=h=u=c="",O=S=_=f=0,T={getDybUserInfo:function(t){_=+new Date,"develop"==s&&console.log("----------getDybUserInfo-------------"),A(function(e){T.initData(function(){}),t(e)})},login:function(t){"develop"==s&&console.log(p+"======login========"),wx.login({success:function(e){e={code:e.code,game_appid:d,channel_id:u,sub_channel_id:l,shareid:f,sharetype:h,version:a,gdt:"",platform:m,clue_token:w,click_id:C,ad_id:S,creative_id:O},"develop"==s&&console.log(e,"\u521d\u59cb\u5316\u767b\u9646logins\u6570\u636e"),wx.request({url:c+"/api/wx/get_wx_userinfo",header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",data:e,dataType:"json",success:function(e){var n,r;e.data.code?(r={user:n={openid:e.data.data.openid,sign:e.data.data.sign},shareInfo:g.query},p=e.data.data.openid,y=e.data.data.sign,v=n,wx.setStorageSync("sop_user",n),t(r)):wx.showModal({title:"\u63d0\u793a",content:e.data.msg})},fail:function(t){console.log("\u8c03\u7528\u5931\u8d25",t),wx.showModal({title:"\u63d0\u793a",content:"\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u5c0f\u6e38\u620f1"})}})},fail:function(t){console.log("\u8c03\u7528\u5931\u8d25",t),wx.showModal({title:"\u63d0\u793a",content:"\u767b\u5f55\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u5c0f\u6e38\u620f2"})}})},initData:function(){"develop"==s&&console.log("----------init_Data-------------");var t={};t.openid=p,t.sign=y,t.game_appid=d,t.channel_id=u,t.sub_channel_id=l,t.version=a,t.platform=m,t.clue_token=w,t.click_id=C,wx.request({url:c+"/api/wx/init_data",data:t,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){"develop"==s&&console.log(t.data,"init_data_success"),1==t.data.code&&(b=t.data.data.online_time||60)}})},createRole:function(t,e){console.log("\u83b7\u53d6\u5b57\u8282\u521b\u89d2clue_token",w),"develop"==s&&console.log("----------roleData-------------"),A(function(){var n={openid:p,game_appid:d,sign:y,gdt:"",version:a,platform:m};return null==E(t.server_id)&&""==String(t.server_id)&&"undefined"==String(t.server_id)?void e({code:0,msg:"\u670d\u52a1\u5668ID\u4e0d\u6b63\u786e"}):(n.server_id=t.server_id,null!=E(t.server_name)||""!=String(t.server_name)||"undefined"!=String(t.server_name)?n.server_name=t.server_name:n.server_name="\u9ed8\u8ba4\u533a\u670d",null==E(t.role_name)&&""==String(t.role_name)&&"undefined"==String(t.role_name)?void e({code:0,msg:"\u89d2\u8272\u540d\u79f0\u4e0d\u6b63\u786e"}):(n.role_name=t.role_name,void wx.request({url:c+"/api/wx/create_role",data:n,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e(t.data),1==t.data.code?wx.request({url:c+"/api/wx/role_login",data:n,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},complete:function(){}}):e(t.data)},complete:function(){console.log("finshshow-----"),wx.reportAnalytics("finishShow")}})))})},submitOrder:function(t,e){var n=+new Date;console.log("\u5f00\u59cb\u65f6\u95f4:",n),"develop"==s&&console.log("----------\u63d0\u4ea4\u8ba2\u5355-------------\u652f\u4ed8\u73af\u5883"),A(function(){var r,o;null!=E(t.server_name)&&""!=String(t.server_name)&&"undefined"!=String(t.server_name)?null!=E(t.role_name)&&""!=String(t.role_name)&&"undefined"!=String(t.role_name)?(r={game_appid:d,extra_info:t.extra_info,goods_count:t.goods_count,goods_name:t.goods_name,pay_amount:t.pay_amount,account_id:p,redirect_uri:t.redirect_uri,role_name:t.role_name,server_name:t.server_name,channel_id:u,sub_channel_id:l,order_sn:t.order_sn,sign:y,gdt:"",version:a,platform:m},o=+new Date-n,console.log("request_before",o),wx.request({url:c+"/api/wx/wxgame_create",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:r,success:function(t){var i,a=+new Date-n;"develop"==s&&console.log(t.data,"\u652f\u4ed8\u63a5\u53e3\u8fd4\u56de",a),t.data.code?2==t.data.data.pay_type?wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:t.data.data.order_sn,sendMessagePath:JSON.stringify(r),sendMessageImg:c+"/kefuIcon.png",success:function(t){wx.hideLoading(),e({code:1,msg:"\u652f\u4ed8success \u5ba2\u670d\u56de\u8c03"}),console.log(t,"\u5ba2\u670d\u56de\u8c03")},fail:function(t){wx.hideLoading(),e({code:0,msg:"\u53d6\u6d88\u652f\u4ed8"}),console.log(t,"\u5ba2\u670d\u56de\u8c03fail")}}):1==t.data.data.pay_type?(wx.hideLoading(),wx.navigateToMiniProgram({appId:"wxab2e839b6578e72c",path:"pages/come/come?scene="+t.data.data.id,extraData:{game_appid:d,openid:p},envVersion:"release",success:function(t){wx.hideLoading(),e({code:1,msg:"\u652f\u4ed8success "}),console.log(t,"res")},fail:function(t){wx.hideLoading(),e({code:0,msg:"\u652f\u4ed8dail"}),console.log(t,"fff")},complete:function(){wx.hideLoading()}})):3==t.data.data.pay_type?wx.request({url:c+"/api/wx/native_pay",method:"POST",data:{id:t.data.data.id},header:{"content-type":"application/json"},success:function(t){console.log(t,"sss"),t.data.code&&(t=c+"/"+t.data.data.url,console.log(t),wx.previewImage({current:t,urls:[t,t],success:function(){wx.hideLoading()},fail:function(t){wx.hideLoading(),console.log(t,"prf")},complete:function(t){wx.hideLoading(),console.log(t,"com")}}))}}):4==t.data.data.pay_type?wx.request({url:c+"/api/mini/getUnlimit",method:"POST",data:{scene:t.data.data.id,appid:"wxab2e839b6578e72c"},header:{"content-type":"application/json"},success:function(t){console.log(t,"sss"),t.data.code&&(console.log(c+"/"+t.data.data.url),wx.previewImage({current:c+"/"+t.data.data.url,urls:[c+"/"+t.data.data.url],success:function(){wx.hideLoading()},fail:function(t){wx.hideLoading(),console.log(t,"prf")}}))}}):"android"==m||"windows"==m?wx.requestMidasPayment({mode:t.data.data.param.mode,offerId:t.data.data.param.offerId,currencyType:t.data.data.param.currencyType,platform:t.data.data.param.platform,buyQuantity:t.data.data.param.buyQuantity,success:function(){e({code:1,msg:"\u652f\u4ed8\u6210\u529f"}),"develop"==s&&console.log("\u652f\u4ed8\u6210\u529f\u56de\u8c03\u51fd\u6570");var n=0,r=t.data.data.order_sn,o=setInterval(function(){wx.request({url:c+"/api/wx/wxgame_notify",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{bill_no:r,game_appid:d,account_id:p,sign:y},success:function(t){"develop"==s&&console.log(t.data,"\u652f\u4ed8\u6210\u529f\u67e5\u8be2\u56de\u8c03"),(1==t.data.code||10<n)&&clearInterval(o),n++},complete:function(){30<n&&clearInterval(o)}})},2e3)},fail:function(t){"develop"==s&&console.log("\u652f\u4ed8\u5931\u8d25",t),wx.hideLoading(),e({code:0,msg:"\u652f\u4ed8\u5931\u8d25"});var r=+new Date-n;console.log("fail_time",r),t.request_before=o,t.req_success=a,t.failTime=r,t.appid=d,t.openid=p,wx.request({url:c+"/api/wx/fail_pay",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:t,success:function(){}})}}):(wx.hideLoading(),wx.showModal({title:"\u63d0\u793a",content:"\u8bf7\u4f7f\u7528\u624b\u673a\u5b8c\u6210\u652f\u4ed8",showCancel:!1,cancelColor:"cancelColor"})):(wx.hideLoading(),(i=t.data.data.data)&&90011==i.errcode&&(p="",wx.removeStorageSync("sop_user")),e({code:0,msg:t.data.msg}))},fail:function(){e({code:0,msg:"\u8bf7\u6c42\u5931\u8d25"})}})):e({code:0,msg:"\u7f3a\u5c11\u89d2\u8272\u540d"}):e({code:0,msg:"\u7f3a\u5c11\u670d\u52a1\u5668\u540d"})})},toGameClub:function(t,e){wx.openPage({openlink:t,success:function(t){e(t.errMsg)},fail:function(t){e({code:0,msg:"open gameclub fail!",res:t.errMsg})}})},getUserData:function(t){A(function(){wx.request({url:c+"/api/wx/get_userInfo_data",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{game_appid:d,account_id:p,sign:y},success:function(e){e=e.data,t(1==e.code?e.data:e)},fail:function(t){console.log("getUserData",t)}})})},transfer:function(){wx.request({url:c+"/api/wx/transfer",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{game_appid:d,account_id:p,sign:y,platform:m},success:function(t){t=t.data,console.log(t,"ssssssss"),1==t.code&&wx.showModal({title:"\u8f6c\u79fb\u5927\u798f\u5229",content:"\u5927\u5927\u60a8\u597d\uff0c\u8fd9\u91cc\u770b\u5230\u60a8\u8fd1\u671f\u6e38\u620f\u4f53\u9a8c\u8f83\u4e3a\u6d3b\u8dc3\uff0c\u4f5c\u4e3a\u6211\u4eec\u7684\u5fe0\u5b9e\u73a9\u5bb6\uff0c\u73b0\u63a8\u51faapp\u7248\u672c\uff0c\u8bda\u9080\u60a8\u53c2\u4e0e\u4f53\u9a8c\uff0c\u5207\u6362\u5fae\u4fe1\u4e0d\u518d\u4f1a\u5f71\u54cd\u6e38\u620f\u8fdb\u7a0b\uff0c\u6e38\u620f\u4f53\u9a8c\u66f4\u6d41\u7545\uff0capp\u5fae\u4fe1\u5b9e\u73b0\u53cc\u767b\u5f55\uff0c\u66f4\u6709\u4e13\u5c5e\u798f\u5229\u6d3b\u52a8\u7b49\u7740\u60a8\uff0c\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u5b98\u65b9\u5ba2\u670dQQ\uff1a800821618",confirmText:"\u7acb\u5373\u524d\u5f80",cancelText:"\u6682\u65f6\u8df3\u8fc7",success:function(t){t.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u8f6c\u79fb",sendMessagePath:m,success:function(t){console.log(t,"\u5ba2\u670d\u56de\u8c03")},fail:function(t){console.log(t,"\u5ba2\u670d\u56de\u8c03fail"),wx.showModal({title:"\u8f6c\u79fb\u5927\u798f\u5229",content:"\u5927\u5927\u60a8\u597d\uff0c\u8fd9\u91cc\u770b\u5230\u60a8\u8fd1\u671f\u6e38\u620f\u4f53\u9a8c\u8f83\u4e3a\u6d3b\u8dc3\uff0c\u4f5c\u4e3a\u6211\u4eec\u7684\u5fe0\u5b9e\u73a9\u5bb6\uff0c\u73b0\u63a8\u51faapp\u7248\u672c\uff0c\u8bda\u9080\u60a8\u53c2\u4e0e\u4f53\u9a8c\uff0c\u5207\u6362\u5fae\u4fe1\u4e0d\u518d\u4f1a\u5f71\u54cd\u6e38\u620f\u8fdb\u7a0b\uff0c\u6e38\u620f\u4f53\u9a8c\u66f4\u6d41\u7545\uff0capp\u5fae\u4fe1\u5b9e\u73b0\u53cc\u767b\u5f55\uff0c\u66f4\u6709\u4e13\u5c5e\u798f\u5229\u6d3b\u52a8\u7b49\u7740\u60a8\uff0c\u5982\u6709\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u5b98\u65b9\u5ba2\u670dQQ\uff1a800821618",confirmText:"\u7acb\u5373\u524d\u5f80",cancelText:"\u6682\u65f6\u8df3\u8fc7",success:function(t){t.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u8f6c\u79fb",sendMessagePath:m,success:function(t){console.log(t,"\u5ba2\u670d\u56de\u8c03")},fail:function(t){console.log(t,"\u5ba2\u670d\u56de\u8c03fail")}})):console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})}})):console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})},fail:function(t){console.log("transfer",t)}})},subscribeMsg:function(t,e){var n,r=[],o=[];for(n in t)wx.getStorageSync(t[n])||r.push(t[n]);if(0==r.length)return console.log("\u5df2\u7ecf\u8ba2\u9605"),void e({code:2,msg:"\u5df2\u7ecf\u8ba2\u9605"});var i=[];wx.requestSubscribeMessage({tmplIds:r,success:function(t){if(console.log(t,"success-ssssssss"),"requestSubscribeMessage:ok"==t.errMsg){for(var n in r)wx.getStorageSync(r[n])||("accept"==t[r[n]]?(o.push(r[n]),console.log(o,"upppppppp")):(i.push(r[n]),wx.showModal({title:"\u8ba2\u9605",content:"\u4e3a\u4e86\u53ca\u65f6\u4e86\u89e3\u6e38\u620f\u52a8\u6001,\u8bf7\u8ba2\u9605\u901a\u77e5",cancelColor:"cancelColor",success:function(t){t.confirm?wx.openSetting({withSubscriptions:!0,success:function(t){console.log(t,"openSetting");var e,n=t.subscriptionsSetting.itemSettings;for(e in i)wx.getStorageSync(i[e])||"accept"==n[i[e]]&&(o[r[e]]=r[e])}}):e({code:0,msg:"\u62d2\u7edd\u8ba2\u9605"})}})));x(o,e)}},fail:function(t){console.log(t,"fail"),wx.openSetting({withSubscriptions:!0,success:function(t){console.log(t,"openSetting");var n,i=t.subscriptionsSetting.itemSettings;for(n in r)wx.getStorageSync(r[n])||"accept"==i[r[n]]&&o.push(r[n]);x(o,e)},fail:function(){e({code:0,msg:"\u62d2\u7edd\u8ba2\u9605"})}})}})},onShare:function(t){"develop"==s&&console.log("----------\u8bbe\u7f6e\u8f6c\u53d1-------------"),!t.query||L(t.query)?(wx.showShareMenu({showShareItems:["shareAppMessage","shareTimeline"],withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:t.title,imageUrl:t.imageUrl,query:"subchid="+l+"&sharetype=onshare&shareid="+p+"&"+t.query}})):console.log("query error")},share:function(t){"develop"==s&&console.log("----------\u4e3b\u52a8\u8f6c\u53d1-------------"),A(function(){!t.query||L(t.query)?(wx.showShareMenu({showShareItems:["shareAppMessage","shareTimeline"],withShareTicket:!0}),wx.shareAppMessage({title:t.title,imageUrl:t.imageUrl,query:"subchid="+l+"&sharetype=share&shareid="+p+"&"+t.query})):console.log("query error")})},dot:function(t,e){wx.request({url:c+"/api/wx/dot_record",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{game_appid:d,account_id:p,step:t,sign:y,version:a,platform:m},success:function(t){e(t.data)},fail:function(t){e({code:0,msg:"\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25",res:t})}})},createVideoAd:function(t,e){var n;"develop"==s&&console.log(void 0===r?"undefined":E(r),"typeof(video)"),"object"!=(void 0===r?"undefined":E(r))?("develop"==s&&console.log(o,"typeof(adUnitId11)"),o=t,(r=wx.createRewardedVideoAd({adUnitId:t})).onError(function(t){var n={};"develop"==s&&console.log(t,"----------onError-------------"),n.msg=t.errMsg,n.state="error",n.isEnded=!1,n.res=t,e(n)}),r.onClose(function(t){var n={};T.advertisement("close",function(){}),n.state="close",n.isEnded=t.isEnded,n.msg="\u89c6\u9891\u5e7f\u544a\u5173\u95ed",e(n)}),r.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),r.show().then(function(){T.advertisement("show",function(){}),e({state:"show",msg:"\u89c6\u9891\u5c55\u793a\u6210\u529f",isEnded:!1})}).catch(function(t){var n={code:2,state:"error"};n.msg=t.errMsg,n.isEnded=!1,e(t)})}).catch(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25",t)})):o!=t?("develop"==s&&console.log(o,t,"typeof(new)"),o=t,(n=wx.createRewardedVideoAd({adUnitId:t})).load().then(function(){n.show().then(function(){T.advertisement("show",function(){}),e({state:"show",msg:"\u89c6\u9891\u5c55\u793a\u6210\u529f",isEnded:!1})}).catch(function(t){var n={code:2,state:"error"};n.msg=t.errMsg,n.isEnded=!1,e(t)})}).catch(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u5931\u8d25",t)})):("develop"==s&&console.log(r,"----------createVideoAd-------------"),r.show().then(function(){T.advertisement("show",function(){}),e({state:"show",msg:"\u89c6\u9891\u5c55\u793a\u6210\u529f",isEnded:!1})}).catch(function(t){var n={code:2,state:"error"};n.msg=t.errMsg,n.isEnded=!1,e(t)}))},advertisement:function(t,e){"develop"==s&&console.log(t,"----------\u4e0a\u62a5\u5e7f\u544a-------------"),A(function(){var n="";"show"==t?n=c+"/api/wx/videoClick":"close"==t?n=c+"/api/wx/watch":"share"==t&&(n=c+"/api/wx/share"),wx.request({url:n,data:{openid:p,game_appid:d,sign:y,version:a,platform:m},method:"post",header:{"content-type":"application/x-www-form-urlencoded"},complete:function(t){e(t.data)}})})},gameLevel:function(t,e){var n={};n.openid=p,n.appid=d,n.sign=y,n.level=t,n.version=a,n.platform=m,wx.request({url:c+"/api/wx/game_level",data:n,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},complete:function(t){e(t.data)}})},msg_check:function(t,e){var n={};n.content=t,n.appid=d,n.openid=p,n.version=a,wx.request({url:c+"/api/wx/msg_sec_check",data:n,method:"post",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){e(t.data)}})},img_check:function(t,e){wx.uploadFile({url:c+"/api/v2/img_sec_check",filePath:t,name:"media",formData:{appid:d,openid:p},success:function(t){e(t.data)}})},media_check:function(t,e,n){wx.request({url:c+"/api/v2/media_check",data:{appid:d,media_url:t,type:e},method:"post",header:{"content-type":"application/x-www-form-urlencoded"},success:function(t){n(t.data)}})}},cc.sys.platform===cc.sys.WECHAT_GAME&&(v=wx.getStorageSync("sop_user"),p=v.openid,y=v.sign,console.log("==wxsdk version==",a),s=I.env,c=I.url,d=I.appid,function(){g=wx.getLaunchOptionsSync(),"develop"==s&&console.log(g,"wx.getLaunchOptionsSync(111)");var t=g.query;u=g.scene,C=t.gdt_vid||"",console.log("\u6765\u6e90\u5e7f\u544a\u7684\u5e7f\u544aid\u662f: "+C),w=t.clue_token||"",S=t.ad_id||"",O=t.creative_id||"";var e=g.referrerInfo;t.via?(l=t.via||"test_sub_channel_id",f=t.shareid||0,h=t.sharetype||""):t.subchid?(l=t.subchid||"test_sub_channel_id",f=t.shareid||0,h=t.sharetype||""):e&&"string"==typeof e.extraData&&(e.extraData=JSON.parse(e.extraData),l=e.extraData.subchid,f=e.extraData.shareid||0,h=e.extraData.sharetype||""),n=wx.getSystemInfoSync(),m=n.platform,i=n.SDKVersion}(),wx.onHide(function(){var t;console.log("onhide",_),t=Math.floor((+new Date-_)/1e3),"develop"==s&&console.log("----------timing-------------:",t,b,_),!p||t<b||wx.request({url:c+"/api/wx/online_time",data:{openid:p,game_appid:d,timing:t,sign:y,version:a,platform:m},method:"post",header:{"content-type":"application/x-www-form-urlencoded"},success:function(){_=+new Date}}),_=+new Date}),wx.onShow(function(t){_=+new Date,console.log(JSON.stringify(t),"show");var e=t.referrerInfo;console.log(e,"refer"),e.extraData&&(t=e.extraData,console.log("data-----------",e.appId),"wxab2e839b6578e72c"==e.appId&&("success"==t.pay?wx.showToast({title:"\u6210\u529f",icon:"success",duration:2e3,fail:function(t){console.log(t,"eeeeeee")}}):wx.showToast({title:"\u652f\u4ed8\u5931\u8d25",icon:"error",duration:2e3,fail:function(t){console.log(t,"eeeeeee")}})))}),0<=function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var r=0;r<n;r++){var o=parseInt(t[r]),i=parseInt(e[r]);if(i<o)return 1;if(o<i)return-1}return 0}(i,"2.10.3")&&wx.onAddToFavorites(function(){}),window.dyb=T),cc._RF.pop()},{}]},{},["ADController","ADManageBase","ADModel","AStarRoadSeeker","AbilityInfoData","AbilityInfoService","AbilityView","AbilityViewItem","Action","Actions","AdDataManager","AdRateBuffView","AdRewardConfig","AdRewardConst","AdRewardController","AdRewardModle","AdRewardMoneyView","AdShareBtnCtr","AnalyticMgr","App","ArchiveonMgrView","AstarHoneycombRoadSeeker","Attribute","AttributeBase","AutoReleaseImg","B3Error","B3Functions","B3Tree1","BackgroundAdapter","BagConst","BagController","BagModel","Base64","BaseAction","BaseClass","BaseCondition","BaseController","BaseDecorator","BaseMan","BaseModel","BaseNode","BaseProxy","BaseScene","BaseService","BaseSound","BaseView","BehaviorTree","BezierCurveUtils","Blackboard","BuffConst","BuffDataManager","BuffItem","BuffMgr","CQRcode","Car","CarAI","CatTimeOut","ChangeScaleBySize","Chef","ChefAI","ChefAttr","CocosClass","Color","CommonUtils","Composite","Condition","ConfigManager","CongratulationItem","CongratulationView","ControllerConst","ControllerManager","CookData","CostumeAttr","CostumeBagEquipItem","CostumeBagItem","CostumeBagView","CostumeCoinReturnView","CostumeConst","CostumeController","CostumeInfoView","CostumeItem","CostumeMergeAniView","CostumeMergeItem","CostumeMergeTipItem","CostumeMergeTipView","CostumeMergeView","CostumeModel","CostumeRefundView","CostumeSpecialItem","CostumeStatisticsView","CotumeUpgradView","CountDownLab","CreateCostumeItem","CsvDataBase","CurrencyService","Customer","CustomerAI","DailyCountDownLab","DataGroup","DataMsrBase","DateUtils","DebugPlatform","DebugTree","DebugUI","DebugUtils","Decorator","Decorators","DesignView","DeskService","DiamondShopItem","Draggable","Droppable","DybAd","DybSdk","EasyLoading","EffectUtils","Erasure","Failer","GameConst","GameController","GameDataMsr","GameLoadingView","GameModel","GamePlatform","GameScene","GameText","GameTipsLab","GameUIView","GameUtils","GameView","GlobalAttr","GodArrow","GodGuide","GodText","GridLayer","GuideController","GuideModel","HandGuide","HelperCatBtn","HelperCatData","HelperCatInfoItem","HelperCatInfoView","HelperCatService","HoldEvent","HotUpdate","Http","HuawenMoveAni","IAdObject","IBuff","IRoadSeeker","IdleView","InputHandler","Inverter","InviteHelperCatView","ItemBase","ItemRenderer","JsonCfgBase","LabelTip","LangConst","LayerManager","LevelDataMsr","Limiter","LineComponent","List","ListItem","ListView","LoadingController","LoadingView","LocalizedLabel","LocalizedRich","LocalizedSprite","Locator","Log","LoginScene","LvUpBox","MachineAttr","MachineData","MachineLvUpAni","MachineService","MachineUnlockBox","MailAwardItem","MailBoxView","MailConst","MailController","MailListView","MaillistItem","MainCat","MapData","MapRoadUtils","MapService","MapTool","MapType","MathUtils","MaxTime","Md5Util","MemParallel","MemPriority","MemSequence","MessageCenter","MidashiPay","MoneyAni","MoneyBar","MoneyItem","MoneyLabel","MoveComponent","MovieClip","MyBigLong","MyPageViewIndicator","NGAExecuteFunc","NGAHideMask","NGAHideTip","NGARecodes","NGAScrollView","NGASetStep","NGAShowArrow","NGAShowFinger","NGAShowMask","NGAShowSkip","NGAShowTip","NGASlide","NGASpecialAction","NGAWait","NGAWaitTouch","NGCCheckIsOpen","NGCCheckStep","NGSetStory","NodePool","NodePoolMsr","NodeState","NodeStateData","NotchFix","NotificationConst","ObjectPool","OpenSysAni","OrderData","OrderDisplay","OrderService","PanelAni","PassSectionData","PayConst","PayIdConst","Platform","PlatformBase","PlaySoundInAni","Point","PreviewImg","Priority","QueueExecutor","RandomAction","RandomUtils","RedPoinAnim","RedPointMgr","RedpointComponent","RemoveAdItem","RepeatUntilFailure","RepeatUntilSuccess","Repeater","ResManager","ResRecycle","RichTextHyperLink","RoadNode","RoadPointLayer","RobotMgrView","RoleService","RoleSpeakComponent","RoleUnlockAni","Runner","SaveManage","SceneConst","SceneManager","ScrollWithPage","Sequence","SettingIcon","SettingManager","SettingView","ShockUtils","ShopAdBoxLvTipView","ShopBankItem","ShopBankView","ShopBoxItem","ShopBuffItem","ShopBuffView","ShopBuffViewIcon","ShopConst","ShopContent","ShopController","ShopFirstGiftIcon","ShopFirstView","ShopGiftContent","ShopGiftItem","ShopItem","ShopItemConfig","ShopModle","ShopNormalItem","ShopOpenBoxView","ShopRemoveAdIcon","ShopRemoveAdView","ShopView","ShopViewIcon","SkillBtn","SlotData","SoundBg","SoundEffectConst","SoundEffects","SoundManager","StageUpgradeData","StageUpgradeService","StageUpgradeTipView","StageUpgradeView","StageUpgradeViewItem","StopAutoDeclare","StringParseUtils","StringUtil","SubTree","Succeeder","SuperCashBar","SwitchFrame","SwitchMapView","SwithBtnComponent","SystemComponent","SystemOpenConfig","SystemOpenConst","SystemOpenController","TestPoint","TestScene","TestSort","Tick","TimeCom","TimeManager","TipData","TipView","Toast","TouchPinch","Toucher","UIImage","ViewAni","ViewConst","ViewManager","ViewType","Viewport","ViewportService","Wait","Waiter","WaiterAI","WorldMapView","WxGameClubButton","WxGamePlatform","WxGameUserInfoButton","WxMiniGameUtil","ZoomBtn","b3","config","constants","test","wxsdk_v3.17"]);