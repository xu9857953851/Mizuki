window.__require=function t(e,i,n){function a(o,r){if(!i[o]){if(!e[o]){var d=o.split("/");if(d=d[d.length-1],!e[d]){var s="function"==typeof __require&&__require;if(!r&&s)return s(d,!0);if(l)return l(d,!0);throw new Error("Cannot find module '"+o+"'")}o=d}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){return a(e[o][1][t]||t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var l="function"==typeof __require&&__require,o=0;o<n.length;o++)a(n[o]);return a}({ActivityConfig:[function(t,e,i){"use strict";cc._RF.push(e,"9eca3Cf0dRNn5fwpIMvS4w/","ActivityConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.ActivityBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.TURNTABLE_TIME=4,t.TURNTABLE_CIRCLE_NUM=6,t.ACTIVITY_TYPE={DAILY_SIGN:1,SEVEN_SIGN:2,TURNTABLE:3,ACHIEVE_REWARD:4},t.ACTIVITY_METHOD={DAILY_SIGN:"dailySign",SEVEN_SIGN:"sevenSign",TURNTABLE:"turntable",ACHIEVE_REWARD:"achieveReward"},t.CONFIG=[{id:1,name:"\u6bcf\u65e5\u7b7e\u5230",desc:"\u73a9\u5bb6\u6bcf\u65e5\u7b7e\u5230\u53ef\u4ee5\u83b7\u5f97\u91d1\u5e01\u3001\u7ecf\u9a8c\u3001\u9053\u5177\u7b49\u4e30\u5bcc\u7684\u5956\u52b1",uiPath:"ui/common/common_reward",method:"dailySign",openStatus:!0,rewardParam:{reward:[{itemId:1006,itemCount:10}],desc:"\u5956\u52b1\u4e3a10\u94bb\u77f3"}},{id:2,name:"\u4e03\u65e5\u7b7e\u5230",desc:"\u73a9\u5bb6\u6bcf\u65e5\u7b7e\u5230\u53ef\u4ee5\u83b7\u5f97\u91d1\u5e01\u3001\u7ecf\u9a8c\u3001\u9053\u5177\u7b49\u4e30\u5bcc\u7684\u5956\u52b1",uiPath:"ui/activity/sevenSign/sevenSignIcon",method:"sevenSign",openStatus:!1,rewardParam:{reward:[{day:1,itemId:1006,itemCount:200},{day:2,itemId:1006,itemCount:1500},{day:3,itemId:1006,itemCount:2e3},{day:4,itemId:1006,itemCount:3e3},{day:5,itemId:1006,itemCount:4e3},{day:6,itemId:1006,itemCount:6666},{day:7,itemId:1006,itemCount:8888}],desc:"\u5956\u52b1\u4e3a\u94bb\u77f3"}},{id:3,name:"\u5e78\u8fd0\u8f6c\u76d8",desc:"\u5e78\u8fd0\u8f6c\u76d8\u53ef\u4ee5\u83b7\u5f97\u91d1\u5e01\u3001\u7ecf\u9a8c\u3001\u9053\u5177\u7b49\u4e30\u5bcc\u7684\u5956\u52b1",uiPath:"ui/common/common_reward",method:"turntable",openStatus:!1,rewardParam:{reward:[{pos:1,itemId:1006,itemCount:100,weight:50},{pos:2,itemId:1006,itemCount:200,weight:50},{pos:3,itemId:1001,itemCount:10,weight:20},{pos:4,itemId:1006,itemCount:500,weight:20},{pos:5,itemId:1006,itemCount:1e3,weight:20},{pos:6,itemId:1001,itemCount:50,weight:10},{pos:7,itemId:1006,itemCount:2e3,weight:5},{pos:8,itemId:1001,itemCount:88,weight:1}],intervalTime:3e5,turnCount:3,desc:"\u5956\u52b1\u4e3a10\u94bb\u77f3"}},{id:4,name:"\u6210\u5c31\u5956\u52b1",desc:"\u73a9\u5bb6\u6bcf\u65e5\u7b7e\u5230\u53ef\u4ee5\u83b7\u5f97\u91d1\u5e01\u3001\u7ecf\u9a8c\u3001\u9053\u5177\u7b49\u4e30\u5bcc\u7684\u5956\u52b1",uiPath:"ui/common/common_reward",method:"achieveReward",openStatus:!1,rewardParam:{reward:[{itemId:1006,itemCount:10}],desc:"\u5956\u52b1\u4e3a10\u94bb\u77f3"}}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.ActivityBasic=function(){this.id=null,this.name=null,this.desc=null,this.uiPath=null,this.openStatus=null,this.method=null,this.rewardParam=null},cc._RF.pop()},{}],ActivityCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"344d0yZrNxNW78NZVlk7mwr","ActivityCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/ActivityConfig"),r=t("../config/ItemConfig"),d=t("../config/TaskConfig"),s=t("../manager/AudioManager"),c=t("../manager/SpriteManager"),u=t("../utils/ButtonUtil"),f=t("../utils/DateUtil"),p=t("../utils/RandomUtil"),h=t("../utils/WxSdkUtil"),m=t("./IndexCtrl"),g=t("./PlayerCacheCtrl"),T=t("./TipCtrl"),y=cc._decorator,_=y.ccclass,A=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sevenSignIconNode=null,e.turntableIconNode=null,e.turntableItemPrefab=null,e.dailySignNode=null,e.turntableNode=null,e.sevenSignNode=null,e._needUpdateTurntableTime=!1,e._lastTurnTime=0,e._currTime=0,e._turntableIntervalTime=0,e._lastCheckRedPointTime=0,e}return a(e,t),e.prototype.onEnable=function(){},e.prototype.start=function(){},e.prototype.showDetail=function(t,e){if(null!=e){var i=Number(e);cc.log("\u67e5\u770b\u6d3b\u52a8\u914d\u7f6e,id:",i);var n=o.default.getConfigById(i);if(null!=n){var a=n.method;o.default.ACTIVITY_METHOD.DAILY_SIGN==a||(o.default.ACTIVITY_METHOD.SEVEN_SIGN==a?this.showSevenSign(n):o.default.ACTIVITY_METHOD.TURNTABLE==a?this.showTurntable(n):o.default.ACTIVITY_METHOD.ACHIEVE_REWARD==a&&this.showAchieveReward(n))}else cc.log("\u6d3b\u52a8\u914d\u7f6e\u4e0d\u5b58\u5728,id:",i)}},e.prototype.toSevenSign=function(){s.default.getInstance().playCommonBtn(),this.showDetail(null,String(o.default.ACTIVITY_TYPE.SEVEN_SIGN))},e.prototype.toTurntable=function(){s.default.getInstance().playCommonBtn(),this.showDetail(null,String(o.default.ACTIVITY_TYPE.TURNTABLE))},e.prototype.showSevenSign=function(t){cc.log("\u5c55\u793a\u4e03\u65e5\u7b7e\u5230");var e=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.SEVEN_SIGN);null==e&&(e={day:0,signTime:0});for(var i=e.day%7,n=f.default.getTodayStartTime()>e.signTime,a=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("content"),l=0;l<t.rewardParam.reward.length;l++){var d=a.getChildByName("day"+(l+1)),s=t.rewardParam.reward[l],p=r.default.getConfigById(s.itemId),h=d.getChildByName("itemPic").getComponent(cc.Sprite);c.default.getInstance().setBundleSpriteFrameByName(h,p.srcPath),d.getChildByName("itemCount").getComponent(cc.Label).string="\xd7"+s.itemCount,d.getChildByName("light").active=!(!n||i!=l);var m=!1;l<i&&(m=!0),cc.log("!canSign && i <= playerCanSignDay",!n&&l<=i),cc.log("alreadyReceive:",m),d.getChildByName("alreadyReceive").zIndex=1e3,d.getChildByName("alreadyReceive").active=m}var T=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("closeButton").getComponent(cc.Button);if(u.default._setEvent(this.node,T,"ActivityCtrl","closeView","1"),T.node.active=!0,n){var y=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("confirmButton").getComponent(cc.Button);u.default._setEvent(this.node,y,"ActivityCtrl","receiveSevenSign",""),y.node.active=!0;var _=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("adButton").getComponent(cc.Button);u.default._setEvent(this.node,_,"ActivityCtrl","receiveSevenSignAd",""),_.node.active=!0,this.sevenSignNode.getChildByName("sevenSignView").getChildByName("desc").active=!1}else this.sevenSignNode.getChildByName("sevenSignView").getChildByName("desc").active=!0,(y=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("confirmButton").getComponent(cc.Button)).node.active=!1,(_=this.sevenSignNode.getChildByName("sevenSignView").getChildByName("adButton").getComponent(cc.Button)).node.active=!1;this.sevenSignNode.active=!0},e.prototype.receiveSevenSign=function(){var t=this.getAndSetSevenSign(),e=o.default.getConfigById(o.default.ACTIVITY_TYPE.SEVEN_SIGN);this.sevenSignNode.active=!1,e.rewardParam.reward,this.sendRes([e.rewardParam.reward[t-1]],!1)},e.prototype.receiveSevenSignAd=function(){var t=this;h.default.getInstance().ShowRewardedVideoAd(function(){var e=t.getAndSetSevenSign(),i=o.default.getConfigById(o.default.ACTIVITY_TYPE.SEVEN_SIGN);t.sevenSignNode.active=!1,t.sendRes([i.rewardParam.reward[e-1]],!0),g.default.getInstance().calcPlayerDailyInfo(d.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.getAndSetSevenSign=function(){var t=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.SEVEN_SIGN);null==t&&(t={day:0,signTime:0});var e=t.day%7+1;return t.day=t.day+1,t.signTime=(new Date).getTime(),g.default.getInstance().setPlayerActivityInfo(o.default.ACTIVITY_TYPE.SEVEN_SIGN,t),e},e.prototype.showTurntable=function(t){cc.log("\u5c55\u793a\u5e78\u8fd0\u8f6c\u76d8"),this.turntableNode.getChildByName("turntableView").getChildByName("turntablePoint").angle=0;var e=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.TURNTABLE);null==e&&(e={turnCount:0,lastTurnTime:0}),e.lastTurnTime<f.default.getTodayStartTime()&&(e.turnCount=0);var i=e.turnCount<t.rewardParam.turnCount&&e.lastTurnTime+t.rewardParam.intervalTime<(new Date).getTime(),n=t.rewardParam.reward,a=360/n.length,l=this.turntableNode.getChildByName("turntableView").getChildByName("turntable");l.removeAllChildren();for(var d=0;d<n.length;d++){var s=n[d],p=r.default.getConfigById(s.itemId),h=cc.instantiate(this.turntableItemPrefab),m=h.getChildByName("itemPic").getComponent(cc.Sprite);c.default.getInstance().setBundleSpriteFrameByName(m,p.srcPath),h.getChildByName("itemCount").getComponent(cc.Label).string=s.itemCount;var T=-((s.pos-1)*a+360)%360;h.angle=T%360,h.active=!0,l.addChild(h)}cc.log(e.turnCount,t.rewardParam.turnCount,e.turnCount<t.rewardParam.turnCount);var y=this.turntableNode.getChildByName("turntableView").getChildByName("turnButton").getComponent(cc.Button);i?(cc.log("\u53ef\u4ee5\u8f6c"),u.default._setEvent(this.node,y,"ActivityCtrl","turntableStart","1"),y.node.active=!0,this.turntableNode.getChildByName("turntableView").getChildByName("desc").active=!1):e.turnCount<t.rewardParam.turnCount?(cc.log("\u51b7\u5374\u4e2d"),y.node.active=!1,this.turntableNode.getChildByName("turntableView").getChildByName("desc").active=!0,this._needUpdateTurntableTime=!0,this._turntableIntervalTime=t.rewardParam.intervalTime,this._lastTurnTime=e.lastTurnTime):(cc.log("\u6b21\u6570\u5df2\u8017\u5c3d"),y.node.active=!1,this.turntableNode.getChildByName("turntableView").getChildByName("desc").active=!0,this.turntableNode.getChildByName("turntableView").getChildByName("desc").getComponent(cc.Label).string="\u4eca\u65e5\u8f6c\u76d8\u6b21\u6570\u5df2\u7528\u5b8c");var _=this.turntableNode.getChildByName("turntableView").getChildByName("closeButton").getComponent(cc.Button);u.default._setEvent(this.node,_,"ActivityCtrl","closeView","1"),_.node.active=!0;var A=this.turntableNode.getChildByName("turntableView").getChildByName("confirmButton").getComponent(cc.Button),C=this.turntableNode.getChildByName("turntableView").getChildByName("adButton").getComponent(cc.Button);A.node.active=!1,C.node.active=!1,this.turntableNode.active=!0},e.prototype.turntableStart=function(){var t=this;this.turntableNode.getChildByName("turntableView").getChildByName("turnButton").getComponent(cc.Button).node.active=!1,this.turntableNode.getChildByName("turntableView").getChildByName("closeButton").getComponent(cc.Button).node.active=!1;var e=o.default.getConfigById(o.default.ACTIVITY_TYPE.TURNTABLE),i=p.default.RandomByWeight(e.rewardParam.reward),n=360/e.rewardParam.reward.length,a=((i.pos-1)*n-n/2+360)%360,l=a+n,r=p.default.getRandom(a,l)+360*o.default.TURNTABLE_CIRCLE_NUM;cc.log(i,r),this.setTurntableData();var d=cc.rotateTo(o.default.TURNTABLE_TIME,r).easing(cc.easeCubicActionInOut()),c=this.turntableNode.getChildByName("turntableView").getChildByName("turntablePoint");s.default.getInstance().playTurntable(),c.runAction(cc.sequence(d,cc.callFunc(function(){t.turntableEnd(i.pos)})))},e.prototype.turntableEnd=function(t){s.default.getInstance().playNews();var e=this.turntableNode.getChildByName("turntableView").getChildByName("confirmButton").getComponent(cc.Button);u.default._setEvent(this.node,e,"ActivityCtrl","receiveTurntable",""+t),e.node.active=!0;var i=this.turntableNode.getChildByName("turntableView").getChildByName("adButton").getComponent(cc.Button);u.default._setEvent(this.node,i,"ActivityCtrl","receiveTurntableAd",""+t),i.node.active=!0},e.prototype.receiveTurntable=function(t,e){var i=Number(e),n=o.default.getConfigById(o.default.ACTIVITY_TYPE.TURNTABLE);this.turntableNode.active=!1,this.sendRes([n.rewardParam.reward[i-1]],!1)},e.prototype.receiveTurntableAd=function(t,e){var i=this;h.default.getInstance().ShowRewardedVideoAd(function(){var t=Number(e),n=o.default.getConfigById(o.default.ACTIVITY_TYPE.TURNTABLE);i.turntableNode.active=!1,i.sendRes([n.rewardParam.reward[t-1]],!0),g.default.getInstance().calcPlayerDailyInfo(d.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.setTurntableData=function(){var t=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.TURNTABLE);null==t&&(t={turnCount:0,lastTurnTime:0}),t.turnCount=t.turnCount+1,t.lastTurnTime=(new Date).getTime(),g.default.getInstance().setPlayerActivityInfo(o.default.ACTIVITY_TYPE.TURNTABLE,t)},e.prototype.updateTurntableTime=function(){var t=this._lastTurnTime+this._turntableIntervalTime;cc.log("canTurnTime");var e=(new Date).getTime();if(t>e){var i=Math.ceil((t-e)/1e3);this.turntableNode.getChildByName("turntableView").getChildByName("desc").getComponent(cc.Label).string="\u8fd8\u6709"+i+"\u79d2\u540e\u53ef\u518d\u6b21\u8f6c\u52a8"}else this._needUpdateTurntableTime=!1,this.showTurntable(o.default.getConfigById(o.default.ACTIVITY_TYPE.TURNTABLE))},e.prototype.showAchieveReward=function(){cc.log("\u5c55\u793a\u6210\u5c31\u5956\u52b1"),T.default.getInstance().tip(this.node,"\u529f\u80fd\u6b63\u5728\u5f00\u53d1\u4e2d,\u656c\u8bf7\u671f\u5f85\uff01")},e.prototype.closeView=function(){s.default.getInstance().playCommonBtn(),this.dailySignNode.active=!1,this.sevenSignNode.active=!1,this.turntableNode.active=!1,this._needUpdateTurntableTime=!1},e.prototype.sendRes=function(t,e){if(s.default.getInstance().playGainReward(),null!=t&&t.length>0){for(var i=[],n=0;n<t.length;n++){var a=t[n],l=a.itemCount;e&&(l*=2),i[n]={itemId:a.itemId,itemCount:l}}g.default.getInstance().addPlayerItemList(i),this.node.parent.getComponent(m.default).flushTopResNumLabel()}},e.prototype.update=function(t){this._currTime+=1e3*t,this._checkRedPoint(),this._needUpdateTurntableTime&&this.updateTurntableTime()},e.prototype.close=function(){this.node.active=!1},e.prototype._checkRedPoint=function(){this._lastCheckRedPointTime+1e3>this._currTime||(this._checkSevenSignRedPoint(),this._checkTurntableRedPoint(),this._lastCheckRedPointTime=this._currTime)},e.prototype._checkSevenSignRedPoint=function(){var t=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.SEVEN_SIGN),e=null==t||f.default.getTodayStartTime()>t.signTime,i=this.sevenSignIconNode.getChildByName("redPoint").active;e?i||(this.sevenSignIconNode.getChildByName("redPoint").active=!0):i&&(this.sevenSignIconNode.getChildByName("redPoint").active=!1)},e.prototype._checkTurntableRedPoint=function(){var t=o.default.getConfigById(o.default.ACTIVITY_TYPE.TURNTABLE),e=g.default.getInstance().getPlayerActivityInfo(o.default.ACTIVITY_TYPE.TURNTABLE),i=null==e||e.turnCount<t.rewardParam.turnCount&&e.lastTurnTime+t.rewardParam.intervalTime<(new Date).getTime(),n=this.turntableIconNode.getChildByName("redPoint").active;i?n||(this.turntableIconNode.getChildByName("redPoint").active=!0):n&&(this.turntableIconNode.getChildByName("redPoint").active=!1)},l([A(cc.Node)],e.prototype,"sevenSignIconNode",void 0),l([A(cc.Node)],e.prototype,"turntableIconNode",void 0),l([A(cc.Prefab)],e.prototype,"turntableItemPrefab",void 0),l([A(cc.Node)],e.prototype,"dailySignNode",void 0),l([A(cc.Node)],e.prototype,"turntableNode",void 0),l([A(cc.Node)],e.prototype,"sevenSignNode",void 0),l([_],e)}(cc.Component);i.default=C,cc._RF.pop()},{"../config/ActivityConfig":"ActivityConfig","../config/ItemConfig":"ItemConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","../utils/DateUtil":"DateUtil","../utils/RandomUtil":"RandomUtil","../utils/WxSdkUtil":"WxSdkUtil","./IndexCtrl":"IndexCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl"}],AdBoxCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"7de39A1eEtGcYbUKOEzTfPI","AdBoxCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../utils/PositionUtil"),r=cc._decorator,d=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=23e3,e.currTime=0,e.targetPosIndex=0,e.targetPosList=[[200,200,100],[100,100,100],[0,0,100],[-100,100,100],[-200,200,100],[-350,0,100],[-200,200,100],[-100,100,100],[0,0,100],[100,100,100],[200,200,100],[350,0,100],[200,200,100],[100,100,100],[0,0,100],[-600,0,500]],e}return a(e,t),e.prototype.start=function(){},e.prototype.startFly=function(){this.currTime=0,this.targetPosIndex=0,this.node.setPosition(cc.v2(400,0)),this.node.active=!0},e.prototype.update=function(t){if(this.currTime+=1e3*t,this.currTime>=this.duration)this.node.active=!1;else{var e=this.targetPosList[this.targetPosIndex],i=cc.v2(e[0],e[1]);o.default.calculationDis(this.node.position,i)>this.node.width/2?this._move(t,i):this.targetPosIndex>=this.targetPosList.length-1?this.node.active=!1:this.targetPosIndex+=1}},e.prototype._move=function(t,e){var i=e.subtract(this.node.position).normalize(),n=this.targetPosList[this.targetPosIndex][2];this.node.x+=i.x*n*t,this.node.y+=i.y*n*t},l([d],e)}(cc.Component));i.default=s,cc._RF.pop()},{"../utils/PositionUtil":"PositionUtil"}],AnimationManager:[function(t,e,i){"use strict";cc._RF.push(e,"41233FT+PFKDJEstOehlaz/","AnimationManager");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clips={},e}return a(e,t),e.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},e.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},e.prototype._init=function(){},e.prototype._destroy=function(){},e.prototype.setAnimationClipsByName=function(t,e){return l(this,void 0,void 0,function(){var i;return o(this,function(n){switch(n.label){case 0:return t?Boolean(e)?[4,this.getAnimationClips(e)]:(cc.warn("setAnimationClipsByName address is null"),[2]):[2];case 1:return(i=n.sent())&&cc.isValid(i)&&cc.isValid(i.node)&&i&&(t.defaultClip=i),[2]}})})},e.prototype.getAnimationClipsByName=function(t,e){return l(this,void 0,void 0,function(){return o(this,function(i){switch(i.label){case 0:return t?Boolean(e)?[4,this.getAnimationClips(e)]:(cc.warn("setAnimationClipsByName address is null"),[2]):[2];case 1:return[2,i.sent()]}})})},e.prototype.getAnimationClips=function(t){return l(this,void 0,void 0,function(){var e;return o(this,function(i){switch(i.label){case 0:return(e=this._clips[t])?[2,e]:[4,this.loadAnimationClip(t)];case 1:return[2,i.sent()]}})})},e.prototype.loadAnimationClip=function(t){return l(this,void 0,Promise,function(){var e=this;return o(this,function(){return[2,new Promise(function(i){e._clips[t]?i(e._clips[t]):cc.resources.load(t,cc.AnimationClip,function(n,a){if(n)return cc.warn("loadAnimationClip err",t,n),void i(null);e._clips[t]=a,a.addRef(),i(a)})})]})})},e._instance=null,e}(cc.Component);i.default=r,cc._RF.pop()},{}],AttrLevelConfig:[function(t,e,i){"use strict";cc._RF.push(e,"87559eVLG1O+oKVOAUG8vTy","AttrLevelConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.AttrLevelBasic=void 0;var a=t("./ItemConfig"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t in this.CONFIG){var e=this.CONFIG[t];e.attrKey=t,this.CONFIG_MAP.set(t,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.calcAttrLevelUpCost=function(t,i){var n=Number(a.default.ITEM_CONST.GOLD),l=0;switch(t){case e.ATTR_KEY.ATK_SPEED:case e.ATTR_KEY.CRIT:l=e.ATTR_BASE_COST[t]*i*2;break;default:l=e.ATTR_BASE_COST[t]*i}return{itemId:n,itemCount:l}},t.calcAttrLevelUpAddVal=function(t){var i=0;switch(t){case e.ATTR_KEY.ATK_SPEED:i=.01;break;case e.ATTR_KEY.CRIT:i=.001;break;case e.ATTR_KEY.CRIT_DAMAGE:i=.01;break;default:i=e.ATTR_INIT_VAL[t]}return i},t._calcAttrLevelUpAddValByCommon=function(){},t.ATTR_INIT_VAL={atk:10,def:0,hp:100,hpRestore:7,atkSpeed:1,crit:0,critDamage:1.2},t.ATTR_BASE_COST={atk:10,def:0,hp:7,hpRestore:7,atkSpeed:22,crit:16,critDamage:6},t.ATTR_KEY={ATK:"atk",DEF:"def",HP:"hp",HP_RESTORE:"hpRestore",ATK_SPEED:"atkSpeed",CRIT:"crit",CRIT_DAMAGE:"critDamage"},t.ATTR_MAX_LEVEL={atk:-1,def:-1,hp:-1,hpRestore:-1,atkSpeed:201,crit:1001,critDamage:-1},t.CONFIG={atk:{isShow:!0,openCondition:null,name:"\u653b\u51fb\u529b",picPath:"ui/attr/atkIcon",initVal:e.ATTR_INIT_VAL.atk,valIsPct:!1,maxLevel:e.ATTR_MAX_LEVEL.atk},def:{isShow:!1,openCondition:null,name:"\u9632\u5fa1\u529b",picPath:"ui/attr/defIcon",initVal:e.ATTR_INIT_VAL.def,valIsPct:!1,maxLevel:e.ATTR_MAX_LEVEL.def},hp:{isShow:!0,openCondition:null,name:"\u751f\u547d",picPath:"ui/attr/hpIcon",initVal:e.ATTR_INIT_VAL.hp,valIsPct:!1,maxLevel:e.ATTR_MAX_LEVEL.hp},hpRestore:{isShow:!0,openCondition:null,name:"\u751f\u547d\u6062\u590d",picPath:"ui/attr/hpRestoreIcon",initVal:e.ATTR_INIT_VAL.hpRestore,valIsPct:!1,maxLevel:e.ATTR_MAX_LEVEL.hpRestore},atkSpeed:{isShow:!0,openCondition:null,name:"\u653b\u51fb\u901f\u5ea6",picPath:"ui/attr/atkSpeedIcon",initVal:e.ATTR_INIT_VAL.atkSpeed,valIsPct:!0,maxLevel:e.ATTR_MAX_LEVEL.atkSpeed},crit:{isShow:!0,openCondition:null,name:"\u66b4\u51fb",picPath:"ui/attr/critIcon",initVal:e.ATTR_INIT_VAL.crit,valIsPct:!0,maxLevel:e.ATTR_MAX_LEVEL.crit},critDamage:{isShow:!0,openCondition:null,name:"\u66b4\u51fb\u4f24\u5bb3",picPath:"ui/attr/critDamageIcon",initVal:e.ATTR_INIT_VAL.critDamage,valIsPct:!0,maxLevel:e.ATTR_MAX_LEVEL.critDamage}},t.CONFIG_MAP=new Map,e=n([o],t)}());i.default=r;i.AttrLevelBasic=function(){this.attrKey=null,this.name=null,this.isShow=null,this.openCondition=null,this.initVal=null,this.valIsPct=null,this.picPath=null,this.maxLevel=null},cc._RF.pop()},{"./ItemConfig":"ItemConfig"}],AttrLevelCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"99a9a3YzZNL6qg7tvrVzXjo","AttrLevelCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/AttrLevelConfig"),r=t("../config/ItemConfig"),d=t("../config/ResPathKey"),s=t("../manager/AudioManager"),c=t("../manager/SpriteManager"),u=t("../utils/MathUtil"),f=t("../utils/TxtUtil"),p=t("./MainCtrl"),h=t("./PlayerAttrCtrl"),m=t("./PlayerCacheCtrl"),g=cc._decorator,T=g.ccclass,y=(g.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mainNode=null,e._attrLevelConfig=null,e.STATUS_MENU={INIT:1,NORMAL:2},e._status=e.STATUS_MENU.INIT,e._playerItemCount=0,e._touchFlag=!1,e._touchStartTime=null,e._execAttrLevelUpTime=null,e._isMaxLevel=!1,e}return a(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("levelUp");t.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),t.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},e.prototype.touchStart=function(){this._touchFlag=!0,this._touchStartTime=(new Date).getTime(),this._isMaxLevel||(this.node.getChildByName("select").active=!0)},e.prototype.touchHold=function(){if(this._touchFlag&&null!=this._touchStartTime){var t=(new Date).getTime();t-this._touchStartTime>300&&t-this._execAttrLevelUpTime>100&&(this._attrLevelUp(),this._execAttrLevelUpTime=(new Date).getTime())}},e.prototype.touchEnd=function(){this._touchFlag=!1,this._touchStartTime=null,this._attrLevelUp(),this.node.getChildByName("select").active=!1},e.prototype.start=function(){},e.prototype.update=function(){this._touchFlag&&this.touchHold(),this._status!=this.STATUS_MENU.NORMAL||this._playerItemCount==m.default.getInstance().getPlayerGoldNum()||this._isMaxLevel||(this._playerItemCount=m.default.getInstance().getPlayerGoldNum(),this._updateAttrLevelInfo())},e.prototype.init=function(t,e){this._mainNode=t,this._attrLevelConfig=e,this.node.getChildByName("attrName").getComponent(cc.Label).string=this._attrLevelConfig.name;var i=this.node.getChildByName("attrPic").getComponent(cc.Sprite);c.default.getInstance().setBundleSpriteFrameByName(i,this._attrLevelConfig.picPath),this._updateAttrLevelInfo(!0),this.node.active=!0,this._status=this.STATUS_MENU.NORMAL},e.prototype._updateAttrLevelInfo=function(t){void 0===t&&(t=!1);var e=m.default.getInstance().getPlayerAttrLevelInfo(this._attrLevelConfig.attrKey).level,i=this.node.getChildByName("attrLevel").getComponent(cc.Label);i.string!="Lv."+e&&(i.string="Lv."+e);var n=h.default.getInstance()[this._attrLevelConfig.attrKey],a=this.node.getChildByName("attrVal").getComponent(cc.Label);a.string!=(this._attrLevelConfig.valIsPct?u.default.parsePctPlus(n):n)&&(a.string=this._attrLevelConfig.valIsPct?u.default.parsePctPlus(n):f.default.parseTxt(String(n)));var l=o.default.calcAttrLevelUpCost(this._attrLevelConfig.attrKey,e),s=this.node.getChildByName("levelUp").getComponent(cc.Button),p=s.node.getChildByName("Background").getChildByName("cost"),g=s.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label);if(-1!=this._attrLevelConfig.maxLevel&&e>=this._attrLevelConfig.maxLevel)0==s.interactable&&(s.interactable=!0),c.default.getInstance().setBundleSpriteFrameByName(s.node.getChildByName("Background").getComponent(cc.Sprite),d.default.BUTTON_BLUE),p.active=!1,g.lineHeight=40,g.fontSize=30,g.string="\u5df2\u6ee1\u7ea7",g.node.setPosition(cc.v2(0,0)),this._isMaxLevel=!0;else{var T=r.default.getConfigById(l.itemId);if(t){var y=p.getChildByName("itemPic").getComponent(cc.Sprite);c.default.getInstance().setBundleSpriteFrameByName(y,T.srcPath)}p.getChildByName("itemCount").getComponent(cc.Label).string=f.default.parseTxt(String(l.itemCount)),p.active=!0,m.default.getInstance().checkPlayerItem([l])?0==s.interactable&&(s.interactable=!0):1==s.interactable&&(s.interactable=!1)}},e.prototype._attrLevelUp=function(){cc.log("\u5c5e\u6027\u5347\u7ea7\uff1a");var t=m.default.getInstance().getPlayerAttrLevelInfo(this._attrLevelConfig.attrKey);if(!(-1!=this._attrLevelConfig.maxLevel&&t.level>=this._attrLevelConfig.maxLevel)){var e=o.default.calcAttrLevelUpCost(this._attrLevelConfig.attrKey,t.level);if(m.default.getInstance().costPlayerItem(e.itemId,e.itemCount)){s.default.getInstance().playLevelUp(),t.level+=1,t.attrVal+=o.default.calcAttrLevelUpAddVal(this._attrLevelConfig.attrKey,t.level),m.default.getInstance().setPlayerAttrLevelInfo(this._attrLevelConfig.attrKey,t),h.default.getInstance().calcPlayerAttr();var i=this._mainNode.getComponent(p.default);i&&i.attrLevelUpEvent()}}},l([T],e)}(cc.Component));i.default=y,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/ItemConfig":"ItemConfig","../config/ResPathKey":"ResPathKey","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/MathUtil":"MathUtil","../utils/TxtUtil":"TxtUtil","./MainCtrl":"MainCtrl","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl"}],AudioManager:[function(t,e,i){"use strict";cc._RF.push(e,"81527WbGmRGmKrbsnuXWy31","AudioManager");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=t("../ctrl/PlayerCacheCtrl"),o=t("../config/ResPathKey"),r=function(){function t(){this._audios={},this.bgmAudioId=null}return t.getInstance=function(){return this._instance||(this._instance=new t,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._init=function(){},t.prototype._destroy=function(){},t.prototype.playBgm=function(){return n(this,void 0,void 0,function(){return a(this,function(){return this.playBundleAudio(o.default.BGM,!0,"bgm"),[2]})})},t.prototype.playCommonBtn=function(t){return void 0===t&&(t=!1),n(this,void 0,void 0,function(){return a(this,function(){return this.playBundleAudio(o.default.COMMON_BUTTON,t),[2]})})},t.prototype.playLevelUp=function(t){return void 0===t&&(t=!1),n(this,void 0,void 0,function(){return a(this,function(){return this.playBundleAudio(o.default.COMMON_LEVEL_UP,t),[2]})})},t.prototype.playLoading=function(t){return void 0===t&&(t=!1),n(this,void 0,void 0,function(){return a(this,function(){return this.playAudio(o.default.LOADING,t),[2]})})},t.prototype.playBeHit=function(t){return void 0===t&&(t=!1),n(this,void 0,void 0,function(){return a(this,function(){return this.playBundleAudio(o.default.MONSTER_BE_HIT,t),[2]})})},t.prototype.playGeneralAtk=function(t){return void 0===t&&(t=!1),n(this,void 0,void 0,function(){return a(this,function(){return this.playBundleAudio(o.default.GENERAL_ATK,t),[2]})})},t.prototype.playBossComming=function(e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){return a(this,function(){return t.getInstance().playBundleAudio(o.default.BOSS_COMMING,!1),[2]})})},t.prototype.playCall=function(e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){return a(this,function(){return t.getInstance().playBundleAudio(o.default.CALL,!1),[2]})})},t.prototype.playGainReward=function(e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){return a(this,function(){return t.getInstance().playBundleAudio(o.default.GAIN_REWARD,!1),[2]})})},t.prototype.playTurntable=function(e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){return a(this,function(){return t.getInstance().playBundleAudio(o.default.TURNTABLE,!1),[2]})})},t.prototype.playNews=function(e){return void 0===e&&(e=!1),n(this,void 0,void 0,function(){return a(this,function(){return t.getInstance().playBundleAudio(o.default.NEWS,!1),[2]})})},t.prototype.playSkillAudio=function(e,i){return void 0===i&&(i=!1),n(this,void 0,void 0,function(){return a(this,function(){return null==e?[2]:(t.getInstance().playBundleAudio(e,!1),[2])})})},t.prototype.playAudio=function(t,e,i){return void 0===i&&(i="audio"),n(this,void 0,void 0,function(){var n;return a(this,function(a){switch(a.label){case 0:return l.default.getInstance().getPlayerSettingInfo()[i]?[4,this.getAudioClip(t)]:[2];case 1:return null==(n=a.sent())?[2]:(cc.audioEngine.play(n,e,1),[2])}})})},t.prototype.playBundleAudio=function(t,e,i){return void 0===i&&(i="audio"),n(this,void 0,void 0,function(){var n,o;return a(this,function(a){switch(a.label){case 0:return l.default.getInstance().getPlayerSettingInfo()[i]?[4,this.loadBundleAudioClip(t)]:[2];case 1:return null==(n=a.sent())?[2]:(o=cc.audioEngine.play(n,e,1),"bgm"==i&&(this.bgmAudioId=o),[2])}})})},t.prototype.stopBgm=function(){return n(this,void 0,void 0,function(){return a(this,function(){return cc.audioEngine.stop(this.bgmAudioId),[2]})})},t.prototype.stopAllAudio=function(){return n(this,void 0,void 0,function(){return a(this,function(){return cc.audioEngine.stopAll(),[2]})})},t.prototype.initAllAudioClip=function(){return n(this,void 0,void 0,function(){return a(this,function(){return this.loadBundleAudioClip(o.default.BGM),this.loadBundleAudioClip(o.default.CALL),this.loadBundleAudioClip(o.default.GENERAL_ATK),this.loadBundleAudioClip(o.default.MONSTER_BE_HIT),this.loadBundleAudioClip(o.default.COMMON_LEVEL_UP),this.loadBundleAudioClip(o.default.BOSS_COMMING),this.loadBundleAudioClip(o.default.COMMON_BUTTON),this.loadBundleAudioClip(o.default.GAIN_REWARD),this.getAudioClip(o.default.LOADING),[2]})})},t.prototype.getAudioClip=function(t,e){return void 0===e&&(e=""),n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){e._audios[t]?i(e._audios[t]):cc.resources.load(t,cc.AudioClip,function(n,a){if(n)return cc.log("getObjectNode err",n),void i(null);e._audios[t]=a,a.addRef(),i(a)})})]})})},t.prototype.loadBundleAudioClip=function(t){return n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){if(e._audios[t])i(e._audios[t]);else{var n=cc.assetManager.getBundle("fenbao");if(!n)return cc.warn("fenbao\u5206\u5305\u8fd8\u6ca1\u52a0\u8f7d,\u56fe\u7247\u8def\u5f84",t),void i(null);n.load(t,cc.AudioClip,function(n,a){if(n)return cc.warn("loadSpriteFrame err",t,n),void i(null);e._audios[t]=a,a.addRef(),i(a)})}})]})})},t._instance=null,t}();i.default=r,cc._RF.pop()},{"../config/ResPathKey":"ResPathKey","../ctrl/PlayerCacheCtrl":"PlayerCacheCtrl"}],BossBaseSkill:[function(t,e,i){"use strict";cc._RF.push(e,"4c88fAVeI5AcYXbt9twXi9n","BossBaseSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atk=null,e.passNum=0,e.alreadyPassNum=0,e.durationTime=0,e.speed=null,e.createTime=0,e.currTime=0,e.exsitTime=0,e.atkIntervalTime=0,e.sameAtkNum=0,e.atkXDir=1,e.dir=null,e.dirX=null,e.dirY=null,e.initAngle=null,e.lastHitTime=0,e.prepareTime=0,e}return a(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.createTime=(new Date).getTime(),this.initProp(t)},e.prototype.initProp=function(t){this.atk=t.atk,this.passNum=t.passNum,this.durationTime=t.durationTime,this.speed=t.speed,this.dirX=t.dirX,this.dirY=t.dirY,this.atkIntervalTime=t.atkIntervalTime,this.atkXDir=t.atkXDir,this.sameAtkNum=t.sameAtkNum,this.initAngle=t.initAngle,this.prepareTime=t.prepareTime},e.prototype.update=function(t){this.currTime+=t,this.exsitTime+=t,-1!=this.durationTime&&1e3*this.exsitTime>this.durationTime||-1!=this.passNum&&this.alreadyPassNum>=this.passNum?this.node.destroy():(this.updateDir(),this.move(t))},e.prototype.updateDir=function(){},e.prototype.move=function(){},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],BossConfig:[function(t,e,i){"use strict";cc._RF.push(e,"791b2zv1YtOSauGMfX09JB7","BossConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.BossBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.MOVE_TYPE={NONE:0,RUN:1},t.CONFIG=[{id:1,name:"boss1",desc:"",uiPath:"",animationPath:"",atk:15,def:5,hp:100,crit:0,speed:0,width:200,height:200,moveType:0,moveParam:null,skillList:[{skill:"1_1",beginTime:0},{skill:"2_2",beginTime:3},{skill:"3_2",beginTime:6},{skill:"4_3",beginTime:9}]},{id:2,name:"boss2",desc:"",uiPath:"",animationPath:"",atk:30,def:15,hp:200,crit:0,speed:0,width:250,height:250,moveType:0,moveParam:null,skillList:[{skill:"4_3",beginTime:0}]},{id:3,name:"boss3",desc:"",uiPath:"",animationPath:"",atk:50,def:25,hp:400,crit:0,speed:0,width:300,height:300,moveType:0,moveParam:null,skillList:[{skill:"4_3",beginTime:0}]},{id:4,name:"boss4",desc:"",uiPath:"",animationPath:"",atk:70,def:35,hp:600,crit:0,speed:0,width:300,height:300,moveType:0,moveParam:null,skillList:[{skill:"4_3",beginTime:0}]},{id:5,name:"boss5",desc:"",uiPath:"",animationPath:"",atk:120,def:50,hp:1e3,crit:0,speed:0,width:300,height:300,moveType:0,moveParam:null,skillList:[{skill:"4_3",beginTime:10},{skill:"2_1",beginTime:0},{skill:"3_2",beginTime:0}]}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.BossBasic=function(){this.id=null,this.name=null,this.desc=null,this.uiPath=null,this.animationPath=null,this.atk=null,this.def=null,this.hp=null,this.crit=null,this.speed=null,this.width=null,this.height=null,this.moveType=null,this.moveParam=null,this.skillList=null},cc._RF.pop()},{}],BossCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"eba3aWdmR5MpLRLcnDZO5Ox","BossCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("./FightCtrl"),s=cc._decorator,c=s.ccclass,u=s.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.blood=null,e._canAtk=!0,e.lastAtkTime=null,e.lastBeAtkTime=null,e.isAlive=!1,e.isFreeze=!1,e.id=null,e.hp=null,e.currHp=null,e.speed=null,e.atk=null,e.def=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.init=function(t){this.initProp(t)},e.prototype.initProp=function(t){this.isAlive=!0,this.isFreeze=!1,this.hp=t.hp,this.currHp=t.hp,this.speed=t.speed,this.atk=t.atk,this.def=t.def,this.resetBoold()},e.prototype.beHit=function(t){if(!(t<=0)){var e=1;t>this.def&&(e=t-this.def),this.costHp(e)}},e.prototype.costHp=function(t){this.isAlive&&(t<=0||(t>this.currHp&&(t=this.currHp),this.currHp=this.currHp-t,this.resetBoold(),0==this.currHp&&(this.isAlive=!1,this.notifyBossDie())))},e.prototype.notifyBossDie=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(){return(t=this.node.parent.parent.getComponent(d.default))&&t.bossDie(),[2]})})},e.prototype.resetBoold=function(){var t=this.currHp/this.hp;t!=this.blood.progress&&(this.blood.progress=t)},e.prototype.update=function(t){this.isAlive&&(this.isFreeze||this.move(t))},e.prototype.move=function(){},l([u({type:cc.Node,tooltip:"BOSS\u8282\u70b9"})],e.prototype,"body",void 0),l([u({type:cc.ProgressBar,tooltip:"BOSS\u8840\u6761"})],e.prototype,"blood",void 0),l([c],e)}(cc.Component);i.default=f,cc._RF.pop()},{"./FightCtrl":"FightCtrl"}],BossSkillConfig:[function(t,e,i){"use strict";cc._RF.push(e,"776a2tg97BOPbgwBMqTlV1z","BossSkillConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.BossSkillLevelBasic=i.BossSkillBasic=void 0;var a=cc._decorator.ccclass,l=function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t in e.CONFIG)for(var i=0;i<this.CONFIG[t].list.length;i++){var n=this.CONFIG[t].list[i];this.CONFIG_MAP.set(n.id,n)}},t.getTypeLength=function(t){return null==this.CONFIG[t]?0:this.CONFIG[t].list.length},t.getTypeName=function(t){return null==this.CONFIG[t]?0:this.CONFIG[t].list[0].name},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getConfigByTypeAndLevel=function(t,e){return this.CONFIG_MAP.get(t+"_"+e)},t.LIMIT_TYPE={NO_LIMIT:0,LEVEL_LIMIE:1,ONLY_LIMIT:2},t.EXEC_TYPE={NORMAL:1,PROP:2,RES:3},t.ROTATION_TYPE={NONE:1,PLAYER_DIR:2},t.FOLLOW_TYPE={NONE:0,FOLLOW:1},t.CONFIG={1:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"1_1",atk:5,cdTime:1500,durationTime:5e3,passNum:1,num:5,type:1,parentType:1,level:1,atkRange:{w:16,h:16,type:1},speed:400,intervalTime:100,atkIntervalTime:0,name:"\u76f4\u7ebf\u5b50\u5f39",desc:"\u4e00\u6b21\u4e94\u53d1",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}}]},2:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:1,list:[{id:"2_1",atk:5,cdTime:2e3,durationTime:5e3,passNum:1,num:2,type:2,parentType:1,level:1,atkRange:{w:16,h:16,type:1},speed:400,intervalTime:100,atkIntervalTime:0,name:"\u76f4\u7ebf\u8ffd\u8e2a\u5b50\u5f39",desc:"\u4e00\u6b21\u4e24\u53d1",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}},{id:"2_2",atk:5,cdTime:1800,durationTime:5e3,passNum:1,num:3,type:2,parentType:1,level:2,atkRange:{w:16,h:16,type:1},speed:400,intervalTime:100,atkIntervalTime:0,name:"\u76f4\u7ebf\u8ffd\u8e2a\u5b50\u5f39",desc:"\u4e00\u6b21\u4e09\u53d1",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}},{id:"2_3",atk:5,cdTime:3e3,durationTime:5e3,passNum:1,num:3,type:2,parentType:1,level:3,atkRange:{w:64,h:64,type:1},speed:400,intervalTime:300,atkIntervalTime:0,name:"\u76f4\u7ebf\u8ffd\u8e2a\u5b50\u5f39",desc:"\u4e00\u6b21\u4e94\u53d1\u5927\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}}]},3:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"3_1",atk:5,cdTime:5e3,durationTime:5e3,passNum:1,num:2,type:3,parentType:1,level:1,atkRange:{w:16,h:16,type:1},diffuse:{status:!0,dirX:[-.4,0,.4],num:3,angleList:[0,0,0]},speed:400,intervalTime:100,atkIntervalTime:0,name:"\u6563\u5c04\u5b50\u5f39",desc:"\u4e09\u6b21\u4e09\u53d1\u7684\u6563\u5c04\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}},{id:"3_2",atk:5,cdTime:1e4,durationTime:5e3,passNum:1,num:5,type:3,parentType:1,level:2,atkRange:{w:16,h:16,type:1},diffuse:{status:!0,dirX:[-.4,-.2,0,.2,.4],num:5,angleList:[0,0,0,0,0]},speed:400,intervalTime:300,atkIntervalTime:0,name:"\u6563\u53d1\u5b50\u5f39",desc:"\u4e94\u6b21\u65e0\u6cd5\u7684\u6563\u5c04\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}}]},4:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"4_1",atk:1,cdTime:15e3,prepareTime:1e3,durationTime:5e3,passNum:-1,num:1,type:4,parentType:1,level:1,atkRange:{w:50,h:1e3,type:1},speed:400,intervalTime:100,atkIntervalTime:1e3,name:"\u6301\u7eed\u6027\u5b50\u5f39",desc:"\u4e00\u53d1\u6301\u7eed\u6027\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}},{id:"4_2",atk:1,cdTime:15e3,prepareTime:1e3,durationTime:5e3,passNum:-1,num:1,type:4,parentType:1,level:2,atkRange:{w:50,h:1e3,type:1,offsetY:-500},diffuse:{status:!0,dirX:[-.4,0,.4],angleList:[-115,-90,-65],num:3},speed:400,intervalTime:100,atkIntervalTime:1e3,name:"\u6301\u7eed\u6027\u5b50\u5f39",desc:"\u4e09\u53d1\u6563\u5c04\u7684\u6301\u7eed\u6027\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}},{id:"4_3",atk:1,cdTime:15e3,prepareTime:1e3,durationTime:5e3,passNum:-1,num:1,type:4,parentType:1,level:3,atkRange:{w:50,h:1e3,type:1,offsetY:-500},diffuse:{status:!0,dirX:[-.4,-0,2,0,.2,.4],angleList:[-125,-105,-90,-75,-55],num:5},speed:400,intervalTime:100,atkIntervalTime:1e3,name:"\u6301\u7eed\u6027\u5b50\u5f39",desc:"\u4e09\u53d1\u6563\u5c04\u7684\u6301\u7eed\u6027\u5b50\u5f39",picRes:"ui/fight/skill/bossSkill/bullet/1",sameAtkNum:0,skillParam:{}}]}},t.CONFIG_MAP=new Map,e=n([a],t)}();i.default=l;i.BossSkillBasic=function(){this.limitType=null,this.execType=null,this.rotationType=null,this.baseWeight=null,this.followType=null};i.BossSkillLevelBasic=function(){this.id=null,this.type=null,this.level=null,this.name=null,this.desc=null,this.picRes=null,this.atk=null,this.cdTime=null,this.prepareTime=null,this.durationTime=null,this.passNum=null,this.num=null,this.parentType=null,this.speed=null,this.intervalTime=null,this.atkIntervalTime=null,this.sameAtkNum=null,this.atkRange={w:null,h:null,type:null,offsetX:!0,offsetY:!0},this.skillParam={},this.diffuse=null},cc._RF.pop()},{}],ButtonUtil:[function(t,e,i){"use strict";cc._RF.push(e,"62374yVdW9P0IwN0j2aYse9","ButtonUtil");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e._setEvent=function(t,e,i,n,a){if(e){e.clickEvents=[];var l=new cc.Component.EventHandler;l.target=t,l.component=i,l.handler=n,l.customEventData=a,e.clickEvents.push(l)}},e._delEvent=function(t){t&&(t.clickEvents=[])},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],CacheKey:[function(t,e,i){"use strict";cc._RF.push(e,"02193ysTB1PXobv6UR5l3/c","CacheKey");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.FIGHT_ID="FIGHT_ID",t.CREATE_TIME="CREATE_TIME",t.GUIDE="GUIDE",t.PLAYER_CHAPTER_INFO="PLAYER_CHAPTER_INFO",t.PASS_FIGHT="PASS_FIGHT",t.SYS_SETTING="SYS_SETTING",t.PLAYER_LEVEL="PLAYER_LEVEL",t.PLAYER_EXP="PLAYER_EXP",t.PLAYER_LAST_GAIN_EXP_TIME="PLAYER_LAST_GAIN_EXP_TIME",t.PLAYER_LAST_GAIN_VIGOUR_TIME="PLAYER_LAST_GAIN_VIGOUR_TIME",t.PLAYER_LEVEL_UP_FAILED_TIME="PLAYER_LEVEL_UP_FAILED_TIME",t.PLAYER_ITEM="PLAYER_ITEM",t.PLAYER_ACTIVITY_INFO="PLAYER_ACTIVITY_INFO",t.PLAYER_GENERAL="PLAYER_GENERAL",t.PLAYER_SKILL="PLAYER_SKILL",t.PLAYER_SKILL_EQUIP="PLAYER_SKILL_EQUIP",t.PLAYER_PET="PLAYER_PET",t.PLAYER_PET_EQUIP="PLAYER_PET_EQUIP",t.DAILY_REWARD_INFO="DAILY_REWARD_INFO",t.ATTAINMENT_REWARD_INFO="ATTAINMENT_REWARD_INFO",t.KILL_COUNT="KILL_COUNT",t.ALIVE_TIME="ALIVE_TIME",t.PLAYER_ATTR_LEVEL_INFO="PLAYER_ATTR_LEVEL_INFO",t.AUTO_SKILL="AUTO_SKILL",t.PLAYER_CALL_INFO="PLAYER_CALL_INFO",t.PLAYER_AD_BOX="PLAYER_AD_BOX",t.PLAYER_CHALLENGE_INFO="PLAYER_CHALLENGE_INFO",t.PLAYER_TASK_INFO="PLAYER_TASK_INFO",t.PLAYER_DAILY_TASK_INFO="PLAYER_DAILY_TASK_INFO",t.PLAYER_DAILY_INFO="PLAYER_DAILY_INFO",t.PLAYER_SETTING_INFO="PLAYER_SETTING_INFO",t.Player_CDK_INFO="Player_CDK_INFO",n([l],t)}());i.default=o,cc._RF.pop()},{}],CacheUtil:[function(t,e,i){"use strict";cc._RF.push(e,"9a4fcQFRwBFkYfzA7I+PMS+","CacheUtil");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return a(e,t),i=e,e.getInstance=function(){return this._instance||(this._instance=new i,this._instance._init()),this._instance},e.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},e.prototype._init=function(){},e.prototype._destroy=function(){},e.prototype.set=function(t,e){cc.sys.localStorage.setItem(t,e)},e.prototype.get=function(t){return cc.sys.localStorage.getItem(t)},e.prototype.getNumber=function(t){var e=this.get(t);return Number(e)},e.prototype.getObject=function(t){var e=this.get(t);return null==e||""==e?null:JSON.parse(e)},e.prototype.remove=function(t){cc.sys.localStorage.removeItem(t)},e.prototype.clear=function(){cc.sys.localStorage.clear()},e._instance=null,i=l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],CallConfig:[function(t,e,i){"use strict";cc._RF.push(e,"4f3faCGqstEC7ys1yy4feN1","CallConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.CallBasic=i.CallLevelBasic=i.CallTypeBasic=i.GradeBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}this.loadCallLevelConfigMap(),this.loadCallTypeConfigMap()},t.loadCallLevelConfigMap=function(){for(var t=0;t<this.CALL_LEVEL_CONFIG.length;t++){var e=this.CALL_LEVEL_CONFIG[t];this.CALL_LEVEL_CONFIG_MAP.set(e.level,e)}},t.loadCallTypeConfigMap=function(){for(var t=0;t<this.CALL_TYPE_CONFIG.length;t++){var e=this.CALL_TYPE_CONFIG[t];this.CALL_TYPE_CONFIG_MAP.set(e.type,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getGradeConfig=function(t){return null==this.GRADE_CONFIG["GRADE"+t]?null:this.GRADE_CONFIG["GRADE"+t]},t.getCallLevelConfig=function(t){return this.CALL_LEVEL_CONFIG_MAP.get(t)},t.getCallTypeConfig=function(t){return this.CALL_TYPE_CONFIG_MAP.get(t)},t.CALL_FUNCTION={SKILL:1,PET:2},t.GRADE_CONFIG={GRADE1:{grade:1,name:"\u666e\u901a",color:"#e7decd",pic:"ui/call/colorBox/1"},GRADE2:{grade:1,name:"\u9ad8\u7ea7",color:"#b2e74b",pic:"ui/call/colorBox/2"},GRADE3:{grade:1,name:"\u7a00\u6709",color:"#17b3ec",pic:"ui/call/colorBox/3"},GRADE4:{grade:1,name:"\u53f2\u8bd7",color:"#c013e4",pic:"ui/call/colorBox/4"},GRADE5:{grade:1,name:"\u4f20\u8bf4",color:"#f1b44d",pic:"ui/call/colorBox/5"},GRADE6:{grade:1,name:"\u795e\u8bdd",color:"#45debb",pic:"ui/call/colorBox/6"},GRADE7:{grade:1,name:"\u8d85\u795e",color:"#f11003",pic:"ui/call/colorBox/7"}},t.CALL_LEVEL_CONFIG=[{level:1,oddsList:[1,0,0,0,0,0,0],levelUpExp:0},{level:2,oddsList:[.75,.25,0,0,0,0,0],levelUpExp:30},{level:3,oddsList:[.47,.43,.1,0,0,0,0],levelUpExp:80},{level:4,oddsList:[.19,.56,.23,.02,0,0,0],levelUpExp:150},{level:5,oddsList:[.2,.45,.28,.06,.01,0,0],levelUpExp:400},{level:6,oddsList:[.18,.31,.37,.12,.015,.005,0],levelUpExp:1e3},{level:7,oddsList:[.17,.22,.34,.24,.02,.009,.001],levelUpExp:2e3},{level:8,oddsList:[.066,.18,.29,.414,.03,.015,.005],levelUpExp:3e3},{level:9,oddsList:[.06,.1,.22,.54,.05,.02,.01],levelUpExp:5e3},{level:10,oddsList:[.05,.05,.1,.65,.07,.05,.03],levelUpExp:8e3}],t.CONFIG=[{id:1,name:"\u6280\u80fd",desc:"    \u7528\u4e8e\u53ec\u5524\u6280\u80fd\u3002",spine:"animation/call/call_skill/callSkill",openStatus:!0,showAdButton:!0},{id:2,name:"\u5ba0\u7269",desc:"    \u7528\u4e8e\u53ec\u5524\u5ba0\u7269\u3002",spine:"animation/call/call_pet/callPet",openStatus:!0,showAdButton:!0}],t.CALL_TYPE_CONFIG=[{type:1,count:10,name:"\u53ec\u552410\u6b21",itemId:1006,itemCount:550},{type:2,count:30,name:"\u53ec\u552430\u6b21",itemId:1006,itemCount:1500}],t.CONFIG_MAP=new Map,t.CALL_LEVEL_CONFIG_MAP=new Map,t.CALL_TYPE_CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.GradeBasic=function(){this.grade=null,this.name=null,this.color=null,this.pic=null};i.CallTypeBasic=function(){this.type=null,this.count=null,this.name=null,this.itemId=null,this.itemCount=null};i.CallLevelBasic=function(){this.level=null,this.oddsList=null,this.levelUpExp=null};i.CallBasic=function(){this.id=null,this.name=null,this.desc=null,this.spine=null,this.openStatus=null,this.showAdButton=null},cc._RF.pop()},{}],CallCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"febb19P9KZKHYLcv9NjucpM","CallCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/CallConfig"),r=t("../config/PetConfig"),d=t("../config/SkillConfig"),s=t("../config/TaskConfig"),c=t("../manager/AudioManager"),u=t("../manager/SpriteManager"),f=t("../utils/ButtonUtil"),p=t("../utils/MathUtil"),h=t("../utils/RandomUtil"),m=t("../utils/TxtUtil"),g=t("../utils/WxSdkUtil"),T=t("./call/CallFunctionCtrl"),y=t("./IndexCtrl"),_=t("./PlayerCacheCtrl"),A=cc._decorator,C=A.ccclass,R=A.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.callInfoContentNode=null,e.callInfoPrefab=null,e.gradeOddsContentNode=null,e.gradeOddsPrefab=null,e.diamondNumLabel=null,e.callResultContentNode=null,e.callResultPrefab=null,e._currCallId=0,e._currShowOddsCallId=0,e._currShowOddsCallLevel=0,e._callInfoList=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this._init()},e.prototype._init=function(){this.flushDiamondNum(),this._initCallInfoList()},e.prototype._initCallInfoList=function(){this.callInfoContentNode.removeAllChildren();for(var t=0;t<o.default.CONFIG.length;t++){var e=o.default.CONFIG[t];e.openStatus&&this._initCallInfo(e)}},e.prototype._initCallInfo=function(t){var e=cc.instantiate(this.callInfoPrefab),i={id:t.id,node:e};this._callInfoList.push(i),e.getComponent(T.default).init(this.node,t),this.callInfoContentNode.addChild(e)},e.prototype.start=function(){},e.prototype.leftCallLevelOdds=function(){this._currShowOddsCallLevel<=1||this.showOddsView(this._currShowOddsCallId,this._currShowOddsCallLevel-1)},e.prototype.rightCallLevelOdds=function(){this._currShowOddsCallLevel>=o.default.CALL_LEVEL_CONFIG.length||this.showOddsView(this._currShowOddsCallId,this._currShowOddsCallLevel+1)},e.prototype.showOddsView=function(t,e){void 0===e&&(e=null),c.default.getInstance().playCommonBtn(),this._currShowOddsCallId=t,this.gradeOddsContentNode.removeAllChildren();var i=this.node.getChildByName("oddsView").getChildByName("view");null==e&&(e=_.default.getInstance().getPlayerCallInfo(t).level),this._currShowOddsCallLevel=e,i.getChildByName("leftButton").active=!0,i.getChildByName("rightButton").active=!0,this._currShowOddsCallLevel<=1?i.getChildByName("leftButton").active=!1:this._currShowOddsCallLevel>=o.default.CALL_LEVEL_CONFIG.length&&(i.getChildByName("rightButton").active=!1),i.getChildByName("callLevel").getChildByName("level").getComponent(cc.Label).string=""+e;for(var n=o.default.getCallLevelConfig(e).oddsList,a=0;a<n.length;a++){var l=n[a],r=o.default.getGradeConfig(a+1),d=cc.instantiate(this.gradeOddsPrefab);u.default.getInstance().setBundleSpriteFrameByName(d.getChildByName("colorBox").getComponent(cc.Sprite),r.pic);var s=d.getChildByName("gradeName").getComponent(cc.Label),f=d.getChildByName("odds").getComponent(cc.Label);s.node.color=(new cc.Color).fromHEX(r.color),s.string=r.name,f.node.color=(new cc.Color).fromHEX(r.color),f.string=p.default.parsePct(l),d.active=!0,this.gradeOddsContentNode.addChild(d)}this.node.getChildByName("oddsView").active=!0},e.prototype.closeOddsView=function(){c.default.getInstance().playCommonBtn(),this.node.getChildByName("oddsView").active=!1},e.prototype.call=function(t,e){var i=this,n=String(e).split("_"),a=Number(n[0]),l=Number(n[1]);if(3==l)g.default.getInstance().ShowRewardedVideoAd(function(){i._execCall(a,5),_.default.getInstance().calcPlayerDailyInfo(s.default.DAILY_TASK_CONDITION_TYPE.AD,1)});else{var r=o.default.getCallTypeConfig(l),d={itemId:r.itemId,itemCount:r.itemCount};if(!_.default.getInstance().checkPlayerItem([d]))return;if(!_.default.getInstance().costPlayerItem(d.itemId,d.itemCount))return;this._execCall(a,r.count)}this.flushDiamondNum();var c=this.node.getChildByName("callResultView").getChildByName("view").getChildByName("button"),u=c.getChildByName("single").getComponent(cc.Button);this._dealCallButton(a,u,1);var f=c.getChildByName("multiple").getComponent(cc.Button);this._dealCallButton(a,f,2)},e.prototype._dealCallButton=function(t,e,i){var n=o.default.getCallTypeConfig(i);if(_.default.getInstance().checkPlayerItem([{itemId:n.itemId,itemCount:n.itemCount}])){var a=t+"_"+i;f.default._setEvent(this.node,e,"CallCtrl","call",a),e.interactable=!0}else e.interactable=!1;e.node.getChildByName("Background").getChildByName("cost").getChildByName("itemCount").getComponent(cc.Label).string=n.itemCount+"",e.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n.name},e.prototype._execCall=function(t,e){var i=this;c.default.getInstance().playCall();for(var n=_.default.getInstance().getPlayerCallInfo(t),a=n.level,l=o.default.getCallLevelConfig(a).oddsList,f=[],p=0;p<l.length;p++)f.push({grade:p+1,weight:l[p]});var m=[];for(p=0;p<e;p++){var g=h.default.RandomByWeight(f).grade,T=[];if(t==o.default.CALL_FUNCTION.SKILL?T=d.default.getConfigByGrade(g):t==o.default.CALL_FUNCTION.PET&&(T=r.default.getConfigByGrade(g)),0!=T.length){var y=T[h.default.getRandom(0,T.length)];m.push(y)}}if(0!=m.length){this.node.getChildByName("callResultView").getChildByName("view").getChildByName("button").active=!1,this.callResultContentNode.removeAllChildren();var A=function(e){var n=m[e];C.scheduleOnce(function(){var a=cc.instantiate(i.callResultPrefab),l=null,s=null;if(t==o.default.CALL_FUNCTION.SKILL){var c=d.default.getConfigById(n);l=c.pic,s=o.default.getGradeConfig(c.grade)}else if(t==o.default.CALL_FUNCTION.PET){var f=r.default.getConfigById(n);l=f.pic,s=o.default.getGradeConfig(f.grade)}u.default.getInstance().setBundleSpriteFrameByName(a.getComponent(cc.Sprite),s.pic),u.default.getInstance().setBundleSpriteFrameByName(a.getChildByName("pic").getComponent(cc.Sprite),l),a.active=!0,i.callResultContentNode.addChild(a),e==m.length-1&&(i.node.getChildByName("callResultView").getChildByName("view").getChildByName("button").active=!0)},.06*e)},C=this;for(p=0;p<m.length;p++)A(p);this.node.getChildByName("callResultView").active=!0,t==o.default.CALL_FUNCTION.SKILL?this.gainSkill(m):t==o.default.CALL_FUNCTION.PET&&this.gainPet(m),_.default.getInstance().calcPlayerDailyInfo(s.default.DAILY_TASK_CONDITION_TYPE.CALL,e),this.addCallExp(n,e)}},e.prototype.gainSkill=function(t){if(null!=t&&0!=t.length)for(var e=0;e<t.length;e++){var i=t[e],n=_.default.getInstance().getPlayerSkillInfoById(i);null==n?_.default.getInstance().playerGetSkill(i):(n.exp+=1,_.default.getInstance().editPlayerSkillInfo(i,n))}},e.prototype.gainPet=function(t){if(null!=t&&0!=t.length)for(var e=0;e<t.length;e++){var i=t[e],n=_.default.getInstance().getPlayerPetInfoById(i);null==n?_.default.getInstance().playerGetPet(i):(n.exp+=1,_.default.getInstance().editPlayerPetInfo(i,n))}},e.prototype.addCallExp=function(t,e){t.exp+=e,this.callLevelUp(t),_.default.getInstance().setPlayerCallInfo(t.id,t)},e.prototype.callLevelUp=function(t){if(t.level<o.default.CALL_LEVEL_CONFIG.length){var e=o.default.getCallLevelConfig(t.level+1);t.exp>=e.levelUpExp&&(t.exp-=e.levelUpExp,t.level+=1,this.callLevelUp(t))}},e.prototype.closeCallResultView=function(){c.default.getInstance().playCommonBtn(),this.node.getChildByName("callResultView").active=!1},e.prototype.close=function(){c.default.getInstance().playCommonBtn(),this.node.active=!1,this.node.parent.parent.getComponent(y.default).flushTopResNumLabel()},e.prototype.flushDiamondNum=function(){var t=_.default.getInstance().getPlayerDiamondNum();this.diamondNumLabel.string=m.default.parseTxt(t+"")},e.prototype.tempButton=function(){var t=[];t.push({itemId:1003,itemCount:1e5}),t.push({itemId:1006,itemCount:1e5}),_.default.getInstance().addPlayerItemList(t),this.flushDiamondNum()},l([R({type:cc.Node,tooltip:"\u53ec\u5524\u529f\u80fd\u5185\u5bb9\u8282\u70b9"})],e.prototype,"callInfoContentNode",void 0),l([R({type:cc.Prefab,tooltip:"\u53ec\u5524\u4fe1\u606f\u9884\u5236\u4f53"})],e.prototype,"callInfoPrefab",void 0),l([R({type:cc.Node,tooltip:"\u53ec\u5524\u6982\u7387\u5185\u5bb9\u8282\u70b9"})],e.prototype,"gradeOddsContentNode",void 0),l([R({type:cc.Prefab,tooltip:"\u54c1\u9636\u6982\u7387\u9884\u5236\u4f53"})],e.prototype,"gradeOddsPrefab",void 0),l([R({type:cc.Label,tooltip:"\u94bb\u77f3\u6570\u91cf"})],e.prototype,"diamondNumLabel",void 0),l([R({type:cc.Node,tooltip:"\u53ec\u5524\u7ed3\u679c\u5185\u5bb9\u8282\u70b9"})],e.prototype,"callResultContentNode",void 0),l([R({type:cc.Prefab,tooltip:"\u54c1\u9636\u7ed3\u679c\u9884\u5236\u4f53"})],e.prototype,"callResultPrefab",void 0),l([C],e)}(cc.Component);i.default=I,cc._RF.pop()},{"../config/CallConfig":"CallConfig","../config/PetConfig":"PetConfig","../config/SkillConfig":"SkillConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","../utils/MathUtil":"MathUtil","../utils/RandomUtil":"RandomUtil","../utils/TxtUtil":"TxtUtil","../utils/WxSdkUtil":"WxSdkUtil","./IndexCtrl":"IndexCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./call/CallFunctionCtrl":"CallFunctionCtrl"}],CallFunctionCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"55929+U8YtJK5yloLqXcgPS","CallFunctionCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/CallConfig"),s=t("../../utils/ButtonUtil"),c=t("../../utils/SpineUtil"),u=t("../CallCtrl"),f=t("../PlayerCacheCtrl"),p=cc._decorator,h=p.ccclass,m=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._callNode=null,e._callConfig=null,e._playerDiamondNum=0,e._lastCheckDiamondTime=0,e._checkDiamondIntervalTime=200,e._nowTime=0,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this._nowTime+=1e3*t,this._lastCheckDiamondTime+this._checkDiamondIntervalTime<this._nowTime&&f.default.getInstance().getPlayerDiamondNum()!=this._playerDiamondNum&&(this._lastCheckDiamondTime=this._nowTime,this._playerDiamondNum=f.default.getInstance().getPlayerDiamondNum(),this.updateNode())},e.prototype.init=function(t,e){return o(this,void 0,void 0,function(){var i,n;return r(this,function(a){switch(a.label){case 0:return this._callNode=t,this._callConfig=e,i=this.node.getChildByName("spine").getComponent(sp.Skeleton),n=i,[4,c.default.getInstance().getBundleSkeletonData(this._callConfig.spine)];case 1:return n.skeletonData=a.sent(),c.default.getInstance().playSpineAni(i,null,"start",!0,!1),this.updateNode(),this.node.active=!0,[2]}})})},e.prototype.showOddsView=function(){this._callNode.getComponent(u.default).showOddsView(this._callConfig.id)},e.prototype.updateNode=function(){var t=f.default.getInstance().getPlayerCallInfo(this._callConfig.id);this.node.getChildByName("top").getChildByName("title").getComponent(cc.Label).string=this._callConfig.name,this.node.getChildByName("top").getChildByName("level").getComponent(cc.Label).string="\u7b49\u7ea7 "+t.level;var e=d.default.CALL_LEVEL_CONFIG.length,i=this.node.getChildByName("top").getChildByName("expProgress").getChildByName("bar").getComponent(cc.Sprite);if(t.level>=e)this.node.getChildByName("top").getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7",i.fillRange=1;else{var n=d.default.getCallLevelConfig(t.level+1);this.node.getChildByName("top").getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string=t.exp+"/"+n.levelUpExp,i.fillRange=t.exp/n.levelUpExp}s.default._setEvent(this.node,this.node.getChildByName("top").getChildByName("odds").getComponent(cc.Button),"CallFunctionCtrl","showOddsView","");var a=this.node.getChildByName("button").getChildByName("single").getComponent(cc.Button);this.dealCallButton(a,1);var l=this.node.getChildByName("button").getChildByName("multiple").getComponent(cc.Button);this.dealCallButton(l,2);var o=this.node.getChildByName("button").getChildByName("ad").getComponent(cc.Button);this._callConfig.showAdButton?(s.default._setEvent(this.node,o,"CallFunctionCtrl","call","3"),o.node.active=!0):o.node.active=!1},e.prototype.dealCallButton=function(t,e){var i=d.default.getCallTypeConfig(e);f.default.getInstance().checkPlayerItem([{itemId:i.itemId,itemCount:i.itemCount}])?(s.default._setEvent(this.node,t,"CallFunctionCtrl","call",e+""),t.interactable=!0):t.interactable=!1,t.node.getChildByName("Background").getChildByName("cost").getChildByName("itemCount").getComponent(cc.Label).string=i.itemCount+"",t.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=i.name},e.prototype.call=function(t,e){cc.log(".....",e);var i=this._callNode.getComponent(u.default);if(i){var n=this._callConfig.id+"_"+Number(e);i.call(null,n),this.updateNode()}},l([h],e)}(cc.Component));i.default=m,cc._RF.pop()},{"../../config/CallConfig":"CallConfig","../../utils/ButtonUtil":"ButtonUtil","../../utils/SpineUtil":"SpineUtil","../CallCtrl":"CallCtrl","../PlayerCacheCtrl":"PlayerCacheCtrl"}],CdkConfig:[function(t,e,i){"use strict";cc._RF.push(e,"e94e6xqkEdLM6gzkZ4OJcid","CdkConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.CdkBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.cdk,e)}},t.getConfigByCdk=function(t){return this.CONFIG_MAP.get(t)},t.CONFIG=[{cdk:"yzjd666",reward:{itemId:1006,itemCount:666}},{cdk:"yzjd888",reward:{itemId:1006,itemCount:888}},{cdk:"zporty10011000000",reward:{itemId:1001,itemCount:1e6}},{cdk:"zporty10031000000",reward:{itemId:1003,itemCount:1e6}},{cdk:"zporty10061000000",reward:{itemId:1006,itemCount:1e6}}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.CdkBasic=function(){this.cdk=null,this.reward=null},cc._RF.pop()},{}],ChallengeConfig:[function(t,e,i){"use strict";cc._RF.push(e,"663051dCCdMca59yQhyGYSm","ChallengeConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.ChallengeBasic=i.ChallengeLevelBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getLevelConfig=function(t,e){var i=this.CONFIG_MAP.get(t);return null==i?null:i.levelConfig[e-1]},t.CALL_FUNCTION={DIAMOND:1,GOLD:2,GENERAL_EXP:3},t.CONFIG=[{id:1,name:"\u94bb\u77f3\u526f\u672c",desc:"\u94bb\u77f3\u526f\u672c\uff0c\u6311\u6218\u6210\u529f\u53ef\u83b7\u5f97\u5927\u91cf\u94bb\u77f3\uff01",labelPic:"ui/item/item_1006",openStatus:!0,dailyCount:2,adCount:2,levelConfig:[{level:1,chapterId:1000001,reward:{itemId:1006,itemCount:500}},{level:2,chapterId:1000002,reward:{itemId:1006,itemCount:510}},{level:3,chapterId:1000003,reward:{itemId:1006,itemCount:520}},{level:4,chapterId:1000004,reward:{itemId:1006,itemCount:530}},{level:5,chapterId:1000005,reward:{itemId:1006,itemCount:540}},{level:6,chapterId:1000006,reward:{itemId:1006,itemCount:550}},{level:7,chapterId:1000007,reward:{itemId:1006,itemCount:560}},{level:8,chapterId:1000008,reward:{itemId:1006,itemCount:570}},{level:9,chapterId:1000009,reward:{itemId:1006,itemCount:580}},{level:10,chapterId:1000010,reward:{itemId:1006,itemCount:600}},{level:11,chapterId:1000011,reward:{itemId:1006,itemCount:610}}]},{id:2,name:"\u91d1\u5e01\u526f\u672c",desc:"\u91d1\u5e01\u526f\u672c\uff0c\u6311\u6218\u6210\u529f\u53ef\u83b7\u5f97\u5927\u91cf\u91d1\u5e01\uff01",labelPic:"ui/item/item_1003",openStatus:!0,dailyCount:2,adCount:2,levelConfig:[{level:1,chapterId:2000001,reward:{itemId:1003,itemCount:1e3}},{level:2,chapterId:2000002,reward:{itemId:1003,itemCount:1e4}},{level:3,chapterId:2000003,reward:{itemId:1003,itemCount:1e5}},{level:4,chapterId:2000004,reward:{itemId:1003,itemCount:1e6}},{level:5,chapterId:2000005,reward:{itemId:1003,itemCount:5e6}},{level:6,chapterId:2000006,reward:{itemId:1003,itemCount:1e7}},{level:7,chapterId:2000007,reward:{itemId:1003,itemCount:5e7}},{level:8,chapterId:2000008,reward:{itemId:1003,itemCount:1e8}},{level:9,chapterId:2000009,reward:{itemId:1003,itemCount:1e8}},{level:10,chapterId:2000010,reward:{itemId:1003,itemCount:1e9}},{level:11,chapterId:2000011,reward:{itemId:1003,itemCount:1e10}}]},{id:3,name:"\u7ecf\u9a8c\u526f\u672c",desc:"\u7ecf\u9a8c\u526f\u672c\uff0c\u6311\u6218\u6210\u529f\u53ef\u83b7\u5f97\u5927\u91cf\u89d2\u8272\u7ecf\u9a8c\uff01",labelPic:"ui/item/item_1001",openStatus:!0,dailyCount:2,adCount:2,levelConfig:[{level:1,chapterId:3000001,reward:{itemId:1001,itemCount:10}},{level:2,chapterId:3000002,reward:{itemId:1001,itemCount:20}},{level:3,chapterId:3000003,reward:{itemId:1001,itemCount:30}},{level:4,chapterId:3000004,reward:{itemId:1001,itemCount:40}},{level:5,chapterId:3000005,reward:{itemId:1001,itemCount:50}},{level:6,chapterId:3000006,reward:{itemId:1001,itemCount:80}},{level:7,chapterId:3000007,reward:{itemId:1001,itemCount:100}},{level:8,chapterId:3000008,reward:{itemId:1001,itemCount:150}},{level:9,chapterId:3000009,reward:{itemId:1001,itemCount:200}},{level:10,chapterId:3000010,reward:{itemId:1001,itemCount:250}},{level:11,chapterId:3000011,reward:{itemId:1001,itemCount:300}}]}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.ChallengeLevelBasic=function(){this.level=null,this.chapterId=null,this.reward=null};i.ChallengeBasic=function(){this.id=null,this.name=null,this.desc=null,this.labelPic=null,this.openStatus=null,this.dailyCount=null,this.adCount=null,this.levelConfig=null},cc._RF.pop()},{}],ChallengeCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"4d73bwqwb5DdYOWR0YMrLkb","ChallengeCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/ChallengeConfig"),r=t("../config/ItemConfig"),d=t("../config/ResPathKey"),s=t("../config/TaskConfig"),c=t("../manager/AudioManager"),u=t("../manager/SpriteManager"),f=t("../utils/ButtonUtil"),p=t("../utils/DateUtil"),h=t("../utils/TxtUtil"),m=t("../utils/WxSdkUtil"),g=t("./challenge/ChallengeFunctionCtrl"),T=t("./MainCtrl"),y=t("./PlayerCacheCtrl"),_=cc._decorator,A=_.ccclass,C=_.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.challengeInfoContentNode=null,e.challengeInfoPrefab=null,e._currTime=0,e._enterChallengeTime=0,e._challengeInfoList=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this._init()},e.prototype._init=function(){this._checkChallengeCount(),this._initChallengeInfoList()},e.prototype._checkChallengeCount=function(){for(var t=0;t<o.default.CONFIG.length;t++){var e=o.default.CONFIG[t],i=y.default.getInstance().getPlayerChallengeInfo(e.id);i.updateTime<p.default.getTodayStartTime()&&(i.updateTime=(new Date).getTime(),i.count+=e.dailyCount,i.adCount<e.adCount&&(i.adCount=e.adCount),y.default.getInstance().setPlayerChallengeInfo(e.id,i))}},e.prototype._initChallengeInfoList=function(){this.challengeInfoContentNode.removeAllChildren(),this._challengeInfoList=[];for(var t=0;t<o.default.CONFIG.length;t++){var e=o.default.CONFIG[t];e.openStatus&&this._initChallengeInfo(e)}},e.prototype._initChallengeInfo=function(t){var e=cc.instantiate(this.challengeInfoPrefab),i={id:t.id,node:e};this._challengeInfoList.push(i),e.getComponent(g.default).init(this.node,t),this.challengeInfoContentNode.addChild(e)},e.prototype.start=function(){},e.prototype.update=function(t){this._currTime+=1e3*t},e.prototype.close=function(){c.default.getInstance().playCommonBtn(),this.node.active=!1},e.prototype.showChallengeDetailSwitch=function(t,e){var i=String(e).split("_"),n=Number(i[0]),a=Number(i[1]);this.showChallengeDetail(n,a)},e.prototype.showChallengeDetail=function(t,e){var i=o.default.getConfigById(t);if(null!=i){var n=o.default.getLevelConfig(t,e);if(null!=n){var a=n.reward.itemId,l=r.default.getConfigById(a);if(null!=l){c.default.getInstance().playCommonBtn();var s=this.node.getChildByName("challengeDetail").getChildByName("view");s.getChildByName("top").getChildByName("name").getComponent(cc.Label).string=i.name,u.default.getInstance().setBundleSpriteFrameByName(s.getChildByName("top").getChildByName("pic").getComponent(cc.Sprite),i.labelPic),s.getChildByName("levelInfo").getChildByName("levelBox").getChildByName("level").getComponent(cc.Label).string=""+e;var p=y.default.getInstance().getPlayerChallengeInfo(t),m=s.getChildByName("levelInfo").getChildByName("leftButton");e-1>0?(m.active=!0,f.default._setEvent(this.node,m.getComponent(cc.Button),"ChallengeCtrl","showChallengeDetailSwitch",t+"_"+(e-1))):m.active=!1;var g=s.getChildByName("levelInfo").getChildByName("rightButton");e+1<=p.level&&e+1<=i.levelConfig.length?(f.default._setEvent(this.node,g.getComponent(cc.Button),"ChallengeCtrl","showChallengeDetailSwitch",t+"_"+(e+1)),g.active=!0):g.active=!1,u.default.getInstance().setBundleSpriteFrameByName(s.getChildByName("reward").getChildByName("itemPic").getComponent(cc.Sprite),l.srcPath);var T=n.reward.itemCount;s.getChildByName("reward").getChildByName("itemCount").getComponent(cc.Label).string=h.default.parseTxt(String(T));var _=p.count,A=p.adCount,C=s.getChildByName("enterButton").getComponent(cc.Button);C.interactable=!0,0==_?0==A?(C.interactable=!1,this.node.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string="0/"+i.dailyCount,u.default.getInstance().setBundleSpriteFrameByName(s.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.KEY)):(u.default.getInstance().setBundleSpriteFrameByName(C.node.getChildByName("Background").getComponent(cc.Sprite),d.default.BUTTON_YELLOW),u.default.getInstance().setBundleSpriteFrameByName(s.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.AD),f.default._setEvent(this.node,C,"ChallengeCtrl","enter",t+"_"+e+"_2"),s.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string=A+"/"+i.adCount):(u.default.getInstance().setBundleSpriteFrameByName(C.node.getChildByName("Background").getComponent(cc.Sprite),d.default.BUTTON_GREEN),u.default.getInstance().setBundleSpriteFrameByName(s.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.KEY),f.default._setEvent(this.node,C,"ChallengeCtrl","enter",t+"_"+e+"_1"),s.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string=_+"/"+i.dailyCount),this.node.getChildByName("challengeDetail").active=!0}}}},e.prototype.enter=function(t,e){var i=this,n=String(e).split("_"),a=Number(n[0]),l=Number(n[1]),o=Number(n[2]);c.default.getInstance().playCommonBtn();var r=y.default.getInstance().getPlayerChallengeInfo(a);if(1==o){if(r.adCount<0)return;r.count-=1,y.default.getInstance().setPlayerChallengeInfo(a,r),this.execEnter(a,l)}else if(2==o){if(r.adCount<0)return;m.default.getInstance().ShowRewardedVideoAd(function(){r.adCount-=1,y.default.getInstance().setPlayerChallengeInfo(a,r),i.execEnter(a,l),y.default.getInstance().calcPlayerDailyInfo(s.default.DAILY_TASK_CONDITION_TYPE.AD,1)})}},e.prototype.execEnter=function(t,e){this.updateChallengeNode(t),this.closeChallengeDetail();var i=this.node.parent.parent.getChildByName("main").getComponent(T.default);i&&i.enterChallenge(t,e),this._enterChallengeTime=this._currTime,this.node.getChildByName("bottom").active=!1,this.node.getChildByName("challengeView").getChildByName("pageView").active=!1,this.node.getChildByName("challengeView").getChildByName("fighting").active=!0},e.prototype.cancelFight=function(){if(!(this._currTime-this._enterChallengeTime<1500)){c.default.getInstance().playCommonBtn();var t=this.node.parent.parent.getChildByName("main").getComponent(T.default);t&&t.cancelChallenge(),this.challengeOver()}},e.prototype.challengeOver=function(){this.node.getChildByName("challengeView").getChildByName("fighting").active=!1,this.node.getChildByName("bottom").active=!0,this.node.getChildByName("challengeView").getChildByName("pageView").active=!0},e.prototype.closeChallengeDetail=function(){c.default.getInstance().playCommonBtn(),this.node.getChildByName("challengeDetail").active=!1},e.prototype.updateChallengeNode=function(t){for(var e=0;e<this._challengeInfoList.length;e++){var i=this._challengeInfoList[e];if(i.id==t){i.node.getComponent(g.default).updateNode();break}}},l([C({type:cc.Node,tooltip:"\u6311\u6218\u526f\u672c\u5185\u5bb9\u8282\u70b9"})],e.prototype,"challengeInfoContentNode",void 0),l([C({type:cc.Prefab,tooltip:"\u6311\u6218\u526f\u672c\u9884\u5236\u4f53"})],e.prototype,"challengeInfoPrefab",void 0),l([A],e)}(cc.Component);i.default=R,cc._RF.pop()},{"../config/ChallengeConfig":"ChallengeConfig","../config/ItemConfig":"ItemConfig","../config/ResPathKey":"ResPathKey","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","../utils/DateUtil":"DateUtil","../utils/TxtUtil":"TxtUtil","../utils/WxSdkUtil":"WxSdkUtil","./MainCtrl":"MainCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./challenge/ChallengeFunctionCtrl":"ChallengeFunctionCtrl"}],ChallengeFunctionCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"ca0d0W6ybtPY4PXlv2ZN+Xu","ChallengeFunctionCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/ResPathKey"),s=t("../../manager/SpriteManager"),c=t("../../utils/ButtonUtil"),u=t("../CallCtrl"),f=t("../ChallengeCtrl"),p=t("../PlayerCacheCtrl"),h=cc._decorator,m=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._challengeNode=null,e._challengeConfig=null,e._playerDiamondNum=0,e._lastCheckDiamondTime=0,e._checkDiamondIntervalTime=200,e._nowTime=0,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.init=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(){return this._challengeNode=t,this._challengeConfig=e,this.node.getChildByName("name").getComponent(cc.Label).string=this._challengeConfig.name,this.node.getChildByName("desc").getComponent(cc.Label).string=this._challengeConfig.desc,s.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("pic").getComponent(cc.Sprite),this._challengeConfig.labelPic),this.updateNode(),this.node.active=!0,[2]})})},e.prototype.showOddsView=function(){this._challengeNode.getComponent(u.default).showOddsView(this._challengeConfig.id)},e.prototype.updateNode=function(){var t=p.default.getInstance().getPlayerChallengeInfo(this._challengeConfig.id),e=t.count,i=t.adCount,n=this.node.getChildByName("enterButton").getComponent(cc.Button);n.interactable=!0,0==e?0==i?(n.interactable=!1,this.node.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string="0/"+this._challengeConfig.dailyCount,s.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.KEY)):(s.default.getInstance().setBundleSpriteFrameByName(n.node.getChildByName("Background").getComponent(cc.Sprite),d.default.BUTTON_YELLOW),s.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.AD),c.default._setEvent(this.node,n,"ChallengeFunctionCtrl","enter","2"),this.node.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string=i+"/"+this._challengeConfig.adCount):(s.default.getInstance().setBundleSpriteFrameByName(n.node.getChildByName("Background").getComponent(cc.Sprite),d.default.BUTTON_GREEN),s.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("countBg").getChildByName("pic").getComponent(cc.Sprite),d.default.KEY),c.default._setEvent(this.node,n,"ChallengeFunctionCtrl","enter","1"),this.node.getChildByName("countBg").getChildByName("count").getComponent(cc.Label).string=e+"/"+this._challengeConfig.dailyCount)},e.prototype.enter=function(){var t=this._challengeNode.getComponent(f.default);if(t){var e=p.default.getInstance().getPlayerChallengeInfo(this._challengeConfig.id);t.showChallengeDetail(this._challengeConfig.id,e.level)}},l([m],e)}(cc.Component));i.default=g,cc._RF.pop()},{"../../config/ResPathKey":"ResPathKey","../../manager/SpriteManager":"SpriteManager","../../utils/ButtonUtil":"ButtonUtil","../CallCtrl":"CallCtrl","../ChallengeCtrl":"ChallengeCtrl","../PlayerCacheCtrl":"PlayerCacheCtrl"}],ChapterConfig:[function(t,e,i){"use strict";cc._RF.push(e,"d38fb9OeFRG75KVN4ebNyFt","ChapterConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.ChapterBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getMonsterIdListByBatch=function(t,e){return this.CONFIG_MAP.get(t).monsterBatch[e]},t.hasNextChapter=function(t){return null!=this.CONFIG_MAP.get(t+1)},t.getAdBoxReward=function(t){return{itemId:this.AD_BOX_CONFIG.itemId,itemCount:this.AD_BOX_CONFIG.itemCount*t}},t.AD_BOX_CONFIG={itemId:1006,itemCount:10,intervalTime:25e3,dailyCount:10},t.CONFIG=[{id:1,name:"\u8bd5\u70bc\u573a1-1",desc:"",monsterBatch:[[1,1],[1,1,1,1],[1,1,1,1,1],[1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1001],reward:[{itemId:1003,itemCount:5}],minuteReward:[{itemId:1003,itemCount:2}]},{id:2,name:"\u8bd5\u70bc\u573a1-2",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1001],reward:[{itemId:1003,itemCount:6}],minuteReward:[{itemId:1003,itemCount:2}]},{id:3,name:"\u8bd5\u70bc\u573a1-3",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1001],reward:[{itemId:1003,itemCount:7}],minuteReward:[{itemId:1003,itemCount:3}]},{id:4,name:"\u8bd5\u70bc\u573a1-4",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1001],reward:[{itemId:1003,itemCount:8}],minuteReward:[{itemId:1003,itemCount:4}]},{id:5,name:"\u8bd5\u70bc\u573a1-5",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1001],reward:[{itemId:1003,itemCount:9}],minuteReward:[{itemId:1003,itemCount:5}]},{id:6,name:"\u8bd5\u70bc\u573a1-6",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1001],reward:[{itemId:1003,itemCount:10}],minuteReward:[{itemId:1003,itemCount:6}]},{id:7,name:"\u8bd5\u70bc\u573a1-7",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1001],reward:[{itemId:1003,itemCount:12}],minuteReward:[{itemId:1003,itemCount:7}]},{id:8,name:"\u8bd5\u70bc\u573a1-8",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1001],reward:[{itemId:1003,itemCount:15}],minuteReward:[{itemId:1003,itemCount:8}]},{id:9,name:"\u8bd5\u70bc\u573a1-9",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1001],reward:[{itemId:1003,itemCount:20}],minuteReward:[{itemId:1003,itemCount:9}]},{id:10,name:"\u8bd5\u70bc\u573a1-10",desc:"",monsterBatch:[[1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1001],reward:[{itemId:1003,itemCount:25}],minuteReward:[{itemId:1003,itemCount:10}]},{id:11,name:"\u8bd5\u70bc\u573a2-1",desc:"",monsterBatch:[[2,2],[2,2,2],[2,2,2,2,2],[2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1002],reward:[{itemId:1003,itemCount:150}],minuteReward:[{itemId:1003,itemCount:200}]},{id:12,name:"\u8bd5\u70bc\u573a2-2",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1002],reward:[{itemId:1003,itemCount:160}],minuteReward:[{itemId:1003,itemCount:220}]},{id:13,name:"\u8bd5\u70bc\u573a2-3",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1002],reward:[{itemId:1003,itemCount:170}],minuteReward:[{itemId:1003,itemCount:230}]},{id:14,name:"\u8bd5\u70bc\u573a2-4",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1002],reward:[{itemId:1003,itemCount:170}],minuteReward:[{itemId:1003,itemCount:240}]},{id:15,name:"\u8bd5\u70bc\u573a2-5",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1002],reward:[{itemId:1003,itemCount:180}],minuteReward:[{itemId:1003,itemCount:250}]},{id:16,name:"\u8bd5\u70bc\u573a2-6",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1002],reward:[{itemId:1003,itemCount:180}],minuteReward:[{itemId:1003,itemCount:260}]},{id:17,name:"\u8bd5\u70bc\u573a2-7",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1002],reward:[{itemId:1003,itemCount:190}],minuteReward:[{itemId:1003,itemCount:270}]},{id:18,name:"\u8bd5\u70bc\u573a2-8",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1002],reward:[{itemId:1003,itemCount:190}],minuteReward:[{itemId:1003,itemCount:280}]},{id:19,name:"\u8bd5\u70bc\u573a2-9",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1002],reward:[{itemId:1003,itemCount:200}],minuteReward:[{itemId:1003,itemCount:290}]},{id:20,name:"\u8bd5\u70bc\u573a2-10",desc:"",monsterBatch:[[2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2,2,2],[2,2,2,2,2,2,2,2,2,2]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1002],reward:[{itemId:1003,itemCount:200}],minuteReward:[{itemId:1003,itemCount:300}]},{id:21,name:"\u8bd5\u70bc\u573a3-1",desc:"",monsterBatch:[[3,3],[3,3,3,3],[3,3,3,3,3],[3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1003],reward:[{itemId:1003,itemCount:500}],minuteReward:[{itemId:1003,itemCount:300}]},{id:22,name:"\u8bd5\u70bc\u573a3-2",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1003],reward:[{itemId:1003,itemCount:550}],minuteReward:[{itemId:1003,itemCount:320}]},{id:23,name:"\u8bd5\u70bc\u573a3-3",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1003],reward:[{itemId:1003,itemCount:600}],minuteReward:[{itemId:1003,itemCount:330}]},{id:24,name:"\u8bd5\u70bc\u573a3-4",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1003],reward:[{itemId:1003,itemCount:650}],minuteReward:[{itemId:1003,itemCount:340}]},{id:25,name:"\u8bd5\u70bc\u573a3-5",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1003],reward:[{itemId:1003,itemCount:700}],minuteReward:[{itemId:1003,itemCount:350}]},{id:26,name:"\u8bd5\u70bc\u573a3-6",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1003],reward:[{itemId:1003,itemCount:750}],minuteReward:[{itemId:1003,itemCount:360}]},{id:27,name:"\u8bd5\u70bc\u573a3-7",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1003],reward:[{itemId:1003,itemCount:800}],minuteReward:[{itemId:1003,itemCount:370}]},{id:28,name:"\u8bd5\u70bc\u573a3-8",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1003],reward:[{itemId:1003,itemCount:850}],minuteReward:[{itemId:1003,itemCount:380}]},{id:29,name:"\u8bd5\u70bc\u573a3-9",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1003],reward:[{itemId:1003,itemCount:900}],minuteReward:[{itemId:1003,itemCount:390}]},{id:30,name:"\u8bd5\u70bc\u573a3-10",desc:"",monsterBatch:[[3,3,3,3],[3,3,3,3,3,3],[3,3,3,3,3,3,3,3],[3,3,3,3,3,3,3,3,3,3]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1003],reward:[{itemId:1003,itemCount:1e3}],minuteReward:[{itemId:1003,itemCount:400}]},{id:31,name:"\u8bd5\u70bc\u573a4-1",desc:"",monsterBatch:[[4,4],[4,4,4,4],[4,4,4,4,4],[4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1004],reward:[{itemId:1003,itemCount:2e3}],minuteReward:[{itemId:1003,itemCount:400}]},{id:32,name:"\u8bd5\u70bc\u573a4-2",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1004],reward:[{itemId:1003,itemCount:2100}],minuteReward:[{itemId:1003,itemCount:420}]},{id:33,name:"\u8bd5\u70bc\u573a4-3",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1004],reward:[{itemId:1003,itemCount:2200}],minuteReward:[{itemId:1003,itemCount:430}]},{id:34,name:"\u8bd5\u70bc\u573a4-4",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1004],reward:[{itemId:1003,itemCount:2300}],minuteReward:[{itemId:1003,itemCount:440}]},{id:35,name:"\u8bd5\u70bc\u573a4-5",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1004],reward:[{itemId:1003,itemCount:2500}],minuteReward:[{itemId:1003,itemCount:450}]},{id:36,name:"\u8bd5\u70bc\u573a4-6",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1004],reward:[{itemId:1003,itemCount:2600}],minuteReward:[{itemId:1003,itemCount:460}]},{id:37,name:"\u8bd5\u70bc\u573a4-7",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1004],reward:[{itemId:1003,itemCount:2700}],minuteReward:[{itemId:1003,itemCount:470}]},{id:38,name:"\u8bd5\u70bc\u573a4-8",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1004],reward:[{itemId:1003,itemCount:2800}],minuteReward:[{itemId:1003,itemCount:480}]},{id:39,name:"\u8bd5\u70bc\u573a4-9",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1004],reward:[{itemId:1003,itemCount:2900}],minuteReward:[{itemId:1003,itemCount:490}]},{id:40,name:"\u8bd5\u70bc\u573a4-10",desc:"",monsterBatch:[[4,4,4,4],[4,4,4,4,4,4],[4,4,4,4,4,4,4,4],[4,4,4,4,4,4,4,4,4,4]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1004],reward:[{itemId:1003,itemCount:3e3}],minuteReward:[{itemId:1003,itemCount:500}]},{id:41,name:"\u8bd5\u70bc\u573a5-1",desc:"",monsterBatch:[[5,5],[5,5,5,5],[5,5,5,5,5],[5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1005],reward:[{itemId:1003,itemCount:5e3}],minuteReward:[{itemId:1003,itemCount:500}]},{id:42,name:"\u8bd5\u70bc\u573a5-2",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1005],reward:[{itemId:1003,itemCount:5100}],minuteReward:[{itemId:1003,itemCount:520}]},{id:43,name:"\u8bd5\u70bc\u573a5-3",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1005],reward:[{itemId:1003,itemCount:5200}],minuteReward:[{itemId:1003,itemCount:530}]},{id:44,name:"\u8bd5\u70bc\u573a5-4",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1005],reward:[{itemId:1003,itemCount:5300}],minuteReward:[{itemId:1003,itemCount:540}]},{id:45,name:"\u8bd5\u70bc\u573a5-5",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1005],reward:[{itemId:1003,itemCount:5400}],minuteReward:[{itemId:1003,itemCount:550}]},{id:46,name:"\u8bd5\u70bc\u573a5-6",desc:"",monsterBatch:[[5,5],[5,3,5],[5,5,5,5],[5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1005],reward:[{itemId:1003,itemCount:5500}],minuteReward:[{itemId:1003,itemCount:560}]},{id:47,name:"\u8bd5\u70bc\u573a5-7",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1005],reward:[{itemId:1003,itemCount:5600}],minuteReward:[{itemId:1003,itemCount:570}]},{id:48,name:"\u8bd5\u70bc\u573a5-8",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1005],reward:[{itemId:1003,itemCount:5700}],minuteReward:[{itemId:1003,itemCount:580}]},{id:49,name:"\u8bd5\u70bc\u573a5-9",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1005],reward:[{itemId:1003,itemCount:5800}],minuteReward:[{itemId:1003,itemCount:590}]},{id:50,name:"\u8bd5\u70bc\u573a5-10",desc:"",monsterBatch:[[5,5,5,5],[5,5,5,5,5,5],[5,5,5,5,5,5,5,5],[5,5,5,5,5,5,5,5,5,5]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1005],reward:[{itemId:1003,itemCount:6e3}],minuteReward:[{itemId:1003,itemCount:600}]},{id:51,name:"\u8bd5\u70bc\u573a6-1",desc:"",monsterBatch:[[6,6],[6,6,6,6],[6,6,6,6,6],[6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1006],reward:[{itemId:1003,itemCount:7e3}],minuteReward:[{itemId:1003,itemCount:600}]},{id:52,name:"\u8bd5\u70bc\u573a6-2",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1006],reward:[{itemId:1003,itemCount:7e3}],minuteReward:[{itemId:1003,itemCount:620}]},{id:53,name:"\u8bd5\u70bc\u573a6-3",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1006],reward:[{itemId:1003,itemCount:7100}],minuteReward:[{itemId:1003,itemCount:630}]},{id:54,name:"\u8bd5\u70bc\u573a6-4",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1006],reward:[{itemId:1003,itemCount:7200}],minuteReward:[{itemId:1003,itemCount:640}]},{id:55,name:"\u8bd5\u70bc\u573a6-5",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1006],reward:[{itemId:1003,itemCount:7300}],minuteReward:[{itemId:1003,itemCount:650}]},{id:56,name:"\u8bd5\u70bc\u573a6-6",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1006],reward:[{itemId:1003,itemCount:7400}],minuteReward:[{itemId:1003,itemCount:660}]},{id:57,name:"\u8bd5\u70bc\u573a6-7",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1006],reward:[{itemId:1003,itemCount:7500}],minuteReward:[{itemId:1003,itemCount:670}]},{id:58,name:"\u8bd5\u70bc\u573a6-8",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1006],reward:[{itemId:1003,itemCount:7600}],minuteReward:[{itemId:1003,itemCount:680}]},{id:59,name:"\u8bd5\u70bc\u573a6-9",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1006],reward:[{itemId:1003,itemCount:7700}],minuteReward:[{itemId:1003,itemCount:690}]},{id:60,name:"\u8bd5\u70bc\u573a6-10",desc:"",monsterBatch:[[6,6,6,6],[6,6,6,6,6,6],[6,6,6,6,6,6,6,6],[6,6,6,6,6,6,6,6,6,6]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1006],reward:[{itemId:1003,itemCount:7800}],minuteReward:[{itemId:1003,itemCount:700}]},{id:61,name:"\u8bd5\u70bc\u573a7-1",desc:"",monsterBatch:[[7,7],[7,7,7,7],[7,7,7,7,7],[7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1007],reward:[{itemId:1003,itemCount:1e4}],minuteReward:[{itemId:1003,itemCount:700}]},{id:62,name:"\u8bd5\u70bc\u573a7-2",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1007],reward:[{itemId:1003,itemCount:11e3}],minuteReward:[{itemId:1003,itemCount:720}]},{id:63,name:"\u8bd5\u70bc\u573a7-3",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1007],reward:[{itemId:1003,itemCount:12e3}],minuteReward:[{itemId:1003,itemCount:730}]},{id:64,name:"\u8bd5\u70bc\u573a7-4",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1007],reward:[{itemId:1003,itemCount:13e3}],minuteReward:[{itemId:1003,itemCount:740}]},{id:65,name:"\u8bd5\u70bc\u573a7-5",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1007],reward:[{itemId:1003,itemCount:14e3}],minuteReward:[{itemId:1003,itemCount:750}]},{id:66,name:"\u8bd5\u70bc\u573a7-6",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1007],reward:[{itemId:1003,itemCount:15e3}],minuteReward:[{itemId:1003,itemCount:760}]},{id:67,name:"\u8bd5\u70bc\u573a7-7",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1007],reward:[{itemId:1003,itemCount:16e3}],minuteReward:[{itemId:1003,itemCount:770}]},{id:68,name:"\u8bd5\u70bc\u573a7-8",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1007],reward:[{itemId:1003,itemCount:17e3}],minuteReward:[{itemId:1003,itemCount:780}]},{id:69,name:"\u8bd5\u70bc\u573a7-9",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1007],reward:[{itemId:1003,itemCount:18e3}],minuteReward:[{itemId:1003,itemCount:790}]},{id:70,name:"\u8bd5\u70bc\u573a7-10",desc:"",monsterBatch:[[7,7,7,7],[7,7,7,7,7,7],[7,7,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1007],reward:[{itemId:1003,itemCount:2e4}],minuteReward:[{itemId:1003,itemCount:800}]},{id:71,name:"\u8bd5\u70bc\u573a8-1",desc:"",monsterBatch:[[8,8],[8,8,8,8],[8,8,8,8,8],[8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1008],reward:[{itemId:1003,itemCount:41e3}],minuteReward:[{itemId:1003,itemCount:800}]},{id:72,name:"\u8bd5\u70bc\u573a8-2",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1008],reward:[{itemId:1003,itemCount:42e3}],minuteReward:[{itemId:1003,itemCount:820}]},{id:73,name:"\u8bd5\u70bc\u573a8-3",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1008],reward:[{itemId:1003,itemCount:43e3}],minuteReward:[{itemId:1003,itemCount:830}]},{id:74,name:"\u8bd5\u70bc\u573a8-4",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1008],reward:[{itemId:1003,itemCount:44e3}],minuteReward:[{itemId:1003,itemCount:840}]},{id:75,name:"\u8bd5\u70bc\u573a8-5",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1008],reward:[{itemId:1003,itemCount:45e3}],minuteReward:[{itemId:1003,itemCount:850}]},{id:76,name:"\u8bd5\u70bc\u573a8-6",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1008],reward:[{itemId:1003,itemCount:46e3}],minuteReward:[{itemId:1003,itemCount:860}]},{id:77,name:"\u8bd5\u70bc\u573a8-7",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1008],reward:[{itemId:1003,itemCount:47e3}],minuteReward:[{itemId:1003,itemCount:870}]},{id:78,name:"\u8bd5\u70bc\u573a8-8",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1008],reward:[{itemId:1003,itemCount:48e3}],minuteReward:[{itemId:1003,itemCount:880}]},{id:79,name:"\u8bd5\u70bc\u573a8-9",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1008],reward:[{itemId:1003,itemCount:49e3}],minuteReward:[{itemId:1003,itemCount:890}]},{id:80,name:"\u8bd5\u70bc\u573a8-10",desc:"",monsterBatch:[[8,8,8,8],[8,8,8,8,8,8],[8,8,8,8,8,8,8,8],[8,8,8,8,8,8,8,8,8,8]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1008],reward:[{itemId:1003,itemCount:5e4}],minuteReward:[{itemId:1003,itemCount:900}]},{id:81,name:"\u8bd5\u70bc\u573a9-1",desc:"",monsterBatch:[[9,9],[9,9,9,9],[9,9,9,9,9],[9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1009],reward:[{itemId:1003,itemCount:81e3}],minuteReward:[{itemId:1003,itemCount:900}]},{id:82,name:"\u8bd5\u70bc\u573a9-2",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1009],reward:[{itemId:1003,itemCount:82e3}],minuteReward:[{itemId:1003,itemCount:910}]},{id:83,name:"\u8bd5\u70bc\u573a9-3",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1009],reward:[{itemId:1003,itemCount:83e3}],minuteReward:[{itemId:1003,itemCount:920}]},{id:84,name:"\u8bd5\u70bc\u573a9-4",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1009],reward:[{itemId:1003,itemCount:84e3}],minuteReward:[{itemId:1003,itemCount:930}]},{id:85,name:"\u8bd5\u70bc\u573a9-5",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1009],reward:[{itemId:1003,itemCount:85e3}],minuteReward:[{itemId:1003,itemCount:940}]},{id:86,name:"\u8bd5\u70bc\u573a9-6",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1009],reward:[{itemId:1003,itemCount:86e3}],minuteReward:[{itemId:1003,itemCount:950}]},{id:87,name:"\u8bd5\u70bc\u573a9-7",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1009],reward:[{itemId:1003,itemCount:87e3}],minuteReward:[{itemId:1003,itemCount:970}]},{id:88,name:"\u8bd5\u70bc\u573a9-8",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1009],reward:[{itemId:1003,itemCount:88e3}],minuteReward:[{itemId:1003,itemCount:980}]},{id:89,name:"\u8bd5\u70bc\u573a9-9",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1009],reward:[{itemId:1003,itemCount:89e3}],minuteReward:[{itemId:1003,itemCount:990}]},{id:90,name:"\u8bd5\u70bc\u573a9-10",desc:"",monsterBatch:[[9,9,9,9],[9,9,9,9,9,9],[9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1009],reward:[{itemId:1003,itemCount:9e4}],minuteReward:[{itemId:1003,itemCount:1e3}]},{id:91,name:"\u8bd5\u70bc\u573a10-1",desc:"",monsterBatch:[[10,10],[10,10,10,10],[10,10,10,10,10],[10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1010],reward:[{itemId:1003,itemCount:12e4}],minuteReward:[{itemId:1003,itemCount:900}]},{id:92,name:"\u8bd5\u70bc\u573a10-2",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1010],reward:[{itemId:1003,itemCount:13e4}],minuteReward:[{itemId:1003,itemCount:910}]},{id:93,name:"\u8bd5\u70bc\u573a10-3",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1010],reward:[{itemId:1003,itemCount:14e4}],minuteReward:[{itemId:1003,itemCount:920}]},{id:94,name:"\u8bd5\u70bc\u573a10-4",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1010],reward:[{itemId:1003,itemCount:15e4}],minuteReward:[{itemId:1003,itemCount:930}]},{id:95,name:"\u8bd5\u70bc\u573a10-5",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1010],reward:[{itemId:1003,itemCount:16e4}],minuteReward:[{itemId:1003,itemCount:940}]},{id:96,name:"\u8bd5\u70bc\u573a10-6",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1010],reward:[{itemId:1003,itemCount:17e4}],minuteReward:[{itemId:1003,itemCount:950}]},{id:97,name:"\u8bd5\u70bc\u573a10-7",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1010],reward:[{itemId:1003,itemCount:18e4}],minuteReward:[{itemId:1003,itemCount:970}]},{id:98,name:"\u8bd5\u70bc\u573a10-8",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1010],reward:[{itemId:1003,itemCount:19e4}],minuteReward:[{itemId:1003,itemCount:980}]},{id:99,name:"\u8bd5\u70bc\u573a10-9",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1010],reward:[{itemId:1003,itemCount:2e5}],minuteReward:[{itemId:1003,itemCount:990}]},{id:100,name:"\u8bd5\u70bc\u573a10-10",desc:"",monsterBatch:[[10,10,10,10],[10,10,10,10,10,10],[10,10,10,10,10,10,10,10],[10,10,10,10,10,10,10,10,10,10]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1010],reward:[{itemId:1003,itemCount:2e5}],minuteReward:[{itemId:1003,itemCount:1e3}]},{id:101,name:"\u8bd5\u70bc\u573a11-1",desc:"",monsterBatch:[[11,11],[11,11,11,11],[11,11,11,11,11],[11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1011],reward:[{itemId:1003,itemCount:5e5}],minuteReward:[{itemId:1003,itemCount:900}]},{id:102,name:"\u8bd5\u70bc\u573a11-2",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.6,boss:[1011],reward:[{itemId:1003,itemCount:55e4}],minuteReward:[{itemId:1003,itemCount:910}]},{id:103,name:"\u8bd5\u70bc\u573a11-3",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.7,boss:[1011],reward:[{itemId:1003,itemCount:6e5}],minuteReward:[{itemId:1003,itemCount:920}]},{id:104,name:"\u8bd5\u70bc\u573a11-4",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.8,boss:[1011],reward:[{itemId:1003,itemCount:65e4}],minuteReward:[{itemId:1003,itemCount:930}]},{id:105,name:"\u8bd5\u70bc\u573a11-5",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1.9,boss:[1011],reward:[{itemId:1003,itemCount:7e5}],minuteReward:[{itemId:1003,itemCount:940}]},{id:106,name:"\u8bd5\u70bc\u573a11-6",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2,boss:[1011],reward:[{itemId:1003,itemCount:75e4}],minuteReward:[{itemId:1003,itemCount:950}]},{id:107,name:"\u8bd5\u70bc\u573a11-7",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.2,boss:[1011],reward:[{itemId:1003,itemCount:75e4}],minuteReward:[{itemId:1003,itemCount:970}]},{id:108,name:"\u8bd5\u70bc\u573a11-8",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.4,boss:[1011],reward:[{itemId:1003,itemCount:8e5}],minuteReward:[{itemId:1003,itemCount:980}]},{id:109,name:"\u8bd5\u70bc\u573a11-9",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:2.8,boss:[1011],reward:[{itemId:1003,itemCount:85e4}],minuteReward:[{itemId:1003,itemCount:990}]},{id:110,name:"\u8bd5\u70bc\u573a11-10",desc:"",monsterBatch:[[11,11,11,11],[11,11,11,11,11,11],[11,11,11,11,11,11,11,11],[11,11,11,11,11,11,11,11,11,11]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:3,boss:[1011],reward:[{itemId:1003,itemCount:1e6}],minuteReward:[{itemId:1003,itemCount:1e3}]},{id:1000001,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea61",desc:"",monsterBatch:[[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1001],reward:null,minuteReward:null},{id:1000002,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea62",desc:"",monsterBatch:[[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1002],reward:null,minuteReward:null},{id:1000003,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea63",desc:"",monsterBatch:[[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1003],reward:null,minuteReward:null},{id:1000004,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea64",desc:"",monsterBatch:[[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1004],reward:null,minuteReward:null},{id:1000005,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea65",desc:"",monsterBatch:[[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1005],reward:null,minuteReward:null},{id:1000006,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea66",desc:"",monsterBatch:[[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1006],reward:null,minuteReward:null},{id:1000007,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea67",desc:"",monsterBatch:[[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1007],reward:null,minuteReward:null},{id:1000008,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea68",desc:"",monsterBatch:[[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1008],reward:null,minuteReward:null},{id:1000009,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea69",desc:"",monsterBatch:[[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1009],reward:null,minuteReward:null},{id:1000010,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea610",desc:"",monsterBatch:[[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1010],reward:null,minuteReward:null},{id:1000011,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea611",desc:"",monsterBatch:[[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1011],reward:null,minuteReward:null},{id:2000001,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea61",desc:"",monsterBatch:[[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1001],reward:null,minuteReward:null},{id:2000002,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea62",desc:"",monsterBatch:[[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1002],reward:null,minuteReward:null},{id:2000003,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea63",desc:"",monsterBatch:[[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1003],reward:null,minuteReward:null},{id:2000004,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea64",desc:"",monsterBatch:[[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1004],reward:null,minuteReward:null},{id:2000005,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea65",desc:"",monsterBatch:[[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1005],reward:null,minuteReward:null},{id:2000006,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea66",desc:"",monsterBatch:[[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1006],reward:null,minuteReward:null},{id:1000007,name:"\u94bb\u77f3\u526f\u672c-\u96be\u5ea67",desc:"",monsterBatch:[[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1007],reward:null,minuteReward:null},{id:2000008,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea68",desc:"",monsterBatch:[[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1008],reward:null,minuteReward:null},{id:2000009,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea69",desc:"",monsterBatch:[[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1009],reward:null,minuteReward:null},{id:2000010,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea610",desc:"",monsterBatch:[[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1010],reward:null,minuteReward:null},{id:2000011,name:"\u91d1\u5e01\u526f\u672c-\u96be\u5ea611",desc:"",monsterBatch:[[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1011],reward:null,minuteReward:null},{id:3000001,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea61",desc:"",monsterBatch:[[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001],[1001]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1001],reward:null,minuteReward:null},{id:3000002,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea62",desc:"",monsterBatch:[[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002],[1002]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1002],reward:null,minuteReward:null},{id:3000003,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea63",desc:"",monsterBatch:[[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003],[1003]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1003],reward:null,minuteReward:null},{id:3000004,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea64",desc:"",monsterBatch:[[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004],[1004]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1004],reward:null,minuteReward:null},{id:3000005,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea65",desc:"",monsterBatch:[[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005],[1005]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1005],reward:null,minuteReward:null},{id:3000006,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea66",desc:"",monsterBatch:[[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006],[1006]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1006],reward:null,minuteReward:null},{id:3000007,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea67",desc:"",monsterBatch:[[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007],[1007]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1007],reward:null,minuteReward:null},{id:3000008,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea68",desc:"",monsterBatch:[[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008],[1008]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1008],reward:null,minuteReward:null},{id:3000009,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea69",desc:"",monsterBatch:[[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009],[1009]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1009],reward:null,minuteReward:null},{id:3000010,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea610",desc:"",monsterBatch:[[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010],[1010]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1010],reward:null,minuteReward:null},{id:3000011,name:"\u7ecf\u9a8c\u526f\u672c-\u96be\u5ea611",desc:"",monsterBatch:[[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011],[1011]],monsterSpecialAttrAddRate:1,monsterBaseAttrAddRate:1,boss:[1011],reward:null,minuteReward:null}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.ChapterBasic=function(){this.id=null,this.name=null,this.desc=null,this.monsterBatch=null,this.boss=null,this.reward=null,this.minuteReward=null,this.monsterBaseAttrAddRate=null,this.monsterSpecialAttrAddRate=null},cc._RF.pop()},{}],CloneUtil:[function(t,e,i){"use strict";cc._RF.push(e,"7dbdfpxOFNGgpCM7wdrLLUd","CloneUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}var e;return e=t,t.isArr=function(t){return"[object Array]"==Object.prototype.toString.call(t)},t.deepClone=function(t,i){var n=i||{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&("object"==typeof t[a]&&null!==t[a]?(n[a]=e.isArr(t[a])?[]:{},e.deepClone(t[a],n[a])):n[a]=t[a]);return n},e=n([l],t)}());i.default=o,cc._RF.pop()},{}],CollisitionManager:[function(t,e,i){"use strict";cc._RF.push(e,"233ecoTrTlBb7ZNFyTMXdNp","CollisitionManager");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=o.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gravity=cc.v2(0,0),e.is_debug=!1,e}return a(e,t),e.prototype.onLoad=function(){this.enableCollisition()},e.prototype.start=function(){},e.prototype.enableCollisition=function(){var t=cc.director.getCollisionManager();t.enabled=!0,cc.log(t.enabled),this.is_debug?(t.enabledDebugDraw=!0,t.enabledDrawBoundingBox=!0):(t.enabledDebugDraw=!1,t.enabledDrawBoundingBox=!1)},e.prototype.enablePhysics=function(){if(cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=this.gravity,this.is_debug){var t=cc.PhysicsManager.DrawBits;cc.director.getPhysicsManager().debugDrawFlags=t.e_pairBit|t.e_centerOfMassBit|t.e_jointBit|t.e_shapeBit}else cc.director.getPhysicsManager().debugDrawFlags=0},l([d(cc.Vec2)],e.prototype,"gravity",void 0),l([d],e.prototype,"is_debug",void 0),l([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}],CommonConfig:[function(t,e,i){"use strict";cc._RF.push(e,"60c1eF7XBhKy40bxBVak7Gz","CommonConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.UNLOCK_STATUS={LOCK:0,UNLOCK:1},t.USE_STATUS={UNUSED:0,USED:1},t.ENABLE_STATUS={DISABLED:0,ENABLED:1},n([l],t)}());i.default=o,cc._RF.pop()},{}],CommonCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"3960cV6HxpK5Ib1npMQJk1s","CommonCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onEnable=function(){},e.prototype.start=function(){},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],CurrentTimeCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"b07c2b2HSBNG64VXuaNWekS","CurrentTimeCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../config/ActivityConfig"),s=t("../config/AttrLevelConfig"),c=t("../config/BossConfig"),u=t("../config/BossSkillConfig"),f=t("../config/CallConfig"),p=t("../config/CdkConfig"),h=t("../config/ChallengeConfig"),m=t("../config/ChapterConfig"),g=t("../config/FightConfig"),T=t("../config/GeneralConfig"),y=t("../config/GeneralSkillConfig"),_=t("../config/ItemConfig"),A=t("../config/MonsterConfig"),C=t("../config/PetConfig"),R=t("../config/PlayerFightSkillConfig"),I=t("../config/PlayerLevelConfig"),v=t("../config/SceneKey"),k=t("../config/SkillConfig"),K=t("../config/TaskConfig"),E=t("../manager/AudioManager"),N=t("../utils/SpineUtil"),S=t("../utils/WxSdkUtil"),P=t("./PlayerCacheCtrl"),b=cc._decorator,B=b.ccclass,L=b.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingProgress=null,e.enterGameTip=null,e._loadingTime=1e4,e._time=0,e._enterGame=!1,e._loadingSuccess=!1,e}return a(e,t),e.prototype.onLoad=function(){S.default.getInstance().showShareMenu(),S.default.getInstance().createGameClubButton(),this._init()},e.prototype.update=function(t){this._enterGame&&(this._time+=1e3*t,this._flushProgress())},e.prototype.enterGame=function(){this._enterGame||(this.enterGameTip.active=!1,this.loadingProgress.node.active=!0,this._enterGame=!0,E.default.getInstance().playLoading(),this._loadConfig(),this._loadBundle())},e.prototype._flushProgress=function(){var t=Math.ceil(this._time/this._loadingTime*100)/100;t!=this.loadingProgress.progress&&(this._loadingSuccess||t>=1||(this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=t,this.loadingProgress.node.getChildByName("num").getComponent(cc.Label).string=Math.floor(100*t)+"%",this.loadingProgress.node.getChildByName("tip").getComponent(cc.Label).string="\u6b63\u5728\u52a0\u8f7d\u8d44\u6e90\u5305..."))},e.prototype._init=function(){this.enterGameTip.active=!0,this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=0,this.loadingProgress.node.active=!1},e.prototype._loadConfig=function(){f.default.loadConfigMap(),h.default.loadConfigMap(),s.default.loadConfigMap(),K.default.loadConfigMap(),y.default.loadConfigMap(),T.default.loadConfigMap(),m.default.loadConfigMap(),A.default.loadConfigMap(),k.default.loadConfigMap(),C.default.loadConfigMap(),_.default.loadConfigMap(),I.default.loadConfigMap(),g.default.loadConfigMap(),u.default.loadConfigMap(),c.default.loadConfigMap(),R.default.loadConfigMap(),d.default.loadConfigMap(),T.default.loadConfigMap(),p.default.loadConfigMap(),P.default.getInstance()},e.prototype._loadBundle=function(){var t=this;cc.assetManager.loadBundle("fenbao",function(){return o(t,void 0,void 0,function(){return r(this,function(){return cc.log("\u5206\u5305\u52a0\u8f7d\u5b8c\u6210..."),this._initAnimation(),cc.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210..."),E.default.getInstance().initAllAudioClip(),this._loadingSuccess=!0,this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=1,this.loadingProgress.node.getChildByName("num").getComponent(cc.Label).string="100%",this.loadingProgress.node.getChildByName("tip").getComponent(cc.Label).string="\u52a0\u8f7d\u5b8c\u6210",cc.director.loadScene(v.default.INDEX),[2]})})})},e.prototype._initAnimation=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(){for(t=0;t<T.default.CONFIG.length;t++)T.default.CONFIG[t].spine&&N.default.getInstance().loadBundleSkeletonData(T.default.CONFIG[t].spine);return[2]})})},l([L({type:cc.ProgressBar,tooltip:"loading\u8fdb\u5ea6\u6761"})],e.prototype,"loadingProgress",void 0),l([L({type:cc.Node,tooltip:"\u70b9\u51fb\u8fdb\u5165\u6e38\u620f"})],e.prototype,"enterGameTip",void 0),l([B],e)}(cc.Component);i.default=O,cc._RF.pop()},{"../config/ActivityConfig":"ActivityConfig","../config/AttrLevelConfig":"AttrLevelConfig","../config/BossConfig":"BossConfig","../config/BossSkillConfig":"BossSkillConfig","../config/CallConfig":"CallConfig","../config/CdkConfig":"CdkConfig","../config/ChallengeConfig":"ChallengeConfig","../config/ChapterConfig":"ChapterConfig","../config/FightConfig":"FightConfig","../config/GeneralConfig":"GeneralConfig","../config/GeneralSkillConfig":"GeneralSkillConfig","../config/ItemConfig":"ItemConfig","../config/MonsterConfig":"MonsterConfig","../config/PetConfig":"PetConfig","../config/PlayerFightSkillConfig":"PlayerFightSkillConfig","../config/PlayerLevelConfig":"PlayerLevelConfig","../config/SceneKey":"SceneKey","../config/SkillConfig":"SkillConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../utils/SpineUtil":"SpineUtil","../utils/WxSdkUtil":"WxSdkUtil","./PlayerCacheCtrl":"PlayerCacheCtrl"}],DailyTaskCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"e3fddJE5mJITbMp7lM+v26b","DailyTaskCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/ItemConfig"),s=t("../../config/ResPathKey"),c=t("../../config/TaskConfig"),u=t("../../manager/AudioManager"),f=t("../../manager/SpriteManager"),p=t("../../utils/ButtonUtil"),h=t("../../utils/DateUtil"),m=t("../../utils/WxSdkUtil"),g=t("../PlayerCacheCtrl"),T=cc._decorator,y=T.ccclass,_=(T.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._taskNode=null,e._dailyTaskConfig=null,e._currTime=0,e._lastCheckTime=0,e._currCompleteCount=0,e.SORT={COMPLETE:1,NOT_COMPLETE:2,RECEIVE:3},e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){this._currTime+=1e3*t,this.check()},e.prototype.check=function(){this._lastCheckTime+1500>this._currTime||(this.updateNode(),this._lastCheckTime=this._currTime)},e.prototype.init=function(t,e){return o(this,void 0,void 0,function(){var i,n;return r(this,function(){return this._taskNode=t,this._dailyTaskConfig=e,i=this._dailyTaskConfig.reward,null==(n=d.default.getConfigById(i.itemId))?[2]:(f.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("reward").getChildByName("itemPic").getComponent(cc.Sprite),n.srcPath),this.node.getChildByName("reward").getChildByName("itemCount").getComponent(cc.Label).string=i.itemCount+"",this.updateNode(),this.node.active=!0,[2])})})},e.prototype.updateNode=function(){var t=g.default.getInstance().getPlayerDailyTaskInfo(this._dailyTaskConfig.id),e=null!=t&&t.lastReceiveTime>h.default.getTodayStartTime(),i=this.getCompleteCount(),n=this.node.getChildByName("completeProgress").getChildByName("bar").getComponent(cc.Sprite),a=this.node.getChildByName("completeProgress").getChildByName("complete"),l=this.node.getChildByName("receiveButton").getComponent(cc.Button),o=l.node.getChildByName("Background").getComponent(cc.Sprite),r=l.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label),d=s.default.DAILY_TASK_NOT_COMPLETE,c=1,u="",m=!1,T=s.default.BUTTON_GREEN,y=this._dailyTaskConfig.desc,_=!1,A=!1,C=s.default.EXP_PROGESSS_BAR;e?(l.interactable=!1,this.node.getChildByName("mark").active=!0,u="\u5df2\u9886\u53d6"):(this.node.getChildByName("mark").active=!1,l.interactable=!1,u="\u9886\u53d6\u5956\u52b1",this._dailyTaskConfig.isAd?(T=s.default.AD_BUTTON_LONG,p.default._setEvent(this.node,l,"DailyTaskCtrl","receiveReward","2"),u=""):p.default._setEvent(this.node,l,"DailyTaskCtrl","receiveReward","1"),i>=this._dailyTaskConfig.condition.count?(l.interactable=!0,d=s.default.DAILY_TASK_COMPLETE,A=!0,C=s.default.YELLOW_PROGESSS_BAR,m=!0):(_=!0,l.interactable=!1,c=i/this._dailyTaskConfig.condition.count)),n.fillRange=c,f.default.getInstance().setBundleSpriteFrameByName(o,T),f.default.getInstance().setBundleSpriteFrameByName(n,C),a.active=A,r.string=u,l.node.getChildByName("redPoint").active=m,this.node.getChildByName("desc").getComponent(cc.Label).string=y+"("+(_?i:this._dailyTaskConfig.condition.count)+"/"+this._dailyTaskConfig.condition.count+")",f.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),d)},e.prototype.getCompleteCount=function(){var t=this._dailyTaskConfig.condition.type,e=g.default.getInstance().getPlayerDailyInfo();return t==c.default.DAILY_TASK_CONDITION_TYPE.GOLD_CHALLENGE?e.goldChallengeCount:t==c.default.DAILY_TASK_CONDITION_TYPE.DIAMOND_CHALLENGE?e.diamondChallengeCount:t==c.default.DAILY_TASK_CONDITION_TYPE.GENERAL_EXP_CHALLENGE?e.generalExpChallengeCount:t==c.default.DAILY_TASK_CONDITION_TYPE.CALL?e.callCount:t==c.default.DAILY_TASK_CONDITION_TYPE.AD?e.adCount:t==c.default.DAILY_TASK_CONDITION_TYPE.KILL?e.killCount:t==c.default.DAILY_TASK_CONDITION_TYPE.CHAPTER?e.chapterCount:0},e.prototype.checkComplete=function(){return this.getCompleteCount()>=this._dailyTaskConfig.condition.count},e.prototype.checkCanReceive=function(){var t=g.default.getInstance().getPlayerDailyTaskInfo(this._dailyTaskConfig.id);return!(null!=t&&t.lastReceiveTime>h.default.getTodayStartTime())&&this.getCompleteCount()>=this._dailyTaskConfig.condition.count},e.prototype.getSort=function(){var t=g.default.getInstance().getPlayerDailyTaskInfo(this._dailyTaskConfig.id);return null!=t&&t.lastReceiveTime>h.default.getTodayStartTime()?this.SORT.RECEIVE:this.getCompleteCount()>=this._dailyTaskConfig.condition.count?this.SORT.COMPLETE:this.SORT.NOT_COMPLETE},e.prototype.receiveReward=function(t,e){var i=this,n=Number(e),a=g.default.getInstance().getPlayerDailyTaskInfo(this._dailyTaskConfig.id);null!=a&&a.lastReceiveTime>h.default.getTodayStartTime()||this.checkComplete()&&(1==n?this.execReceiveReward(a):2==n&&m.default.getInstance().ShowRewardedVideoAd(function(){g.default.getInstance().calcPlayerDailyInfo(c.default.DAILY_TASK_CONDITION_TYPE.AD,1),i.execReceiveReward(a)}))},e.prototype.execReceiveReward=function(t){var e=this._dailyTaskConfig.reward;g.default.getInstance().addPlayerItem(e.itemId,e.itemCount),u.default.getInstance().playGainReward(),null==t&&(t={}),t.lastReceiveTime=(new Date).getTime(),g.default.getInstance().setPlayerDailyTaskInfo(this._dailyTaskConfig.id,t),this.updateNode()},l([y],e)}(cc.Component));i.default=_,cc._RF.pop()},{"../../config/ItemConfig":"ItemConfig","../../config/ResPathKey":"ResPathKey","../../config/TaskConfig":"TaskConfig","../../manager/AudioManager":"AudioManager","../../manager/SpriteManager":"SpriteManager","../../utils/ButtonUtil":"ButtonUtil","../../utils/DateUtil":"DateUtil","../../utils/WxSdkUtil":"WxSdkUtil","../PlayerCacheCtrl":"PlayerCacheCtrl"}],DamageCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"8fe58nwHVFKG4WkqiyMZ1Mx","DamageCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("./TipCtrl"),r=cc._decorator,d=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=400,e.currTime=0,e.label=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.currTime=0,this.label=this.node.getComponent(cc.Label),this.label.string=t,this.label.fontSize=38,this.label.lineHeight=38,this.node.zIndex=100,this.node.active=!0,this.node.opacity=255},e.prototype.update=function(t){if(this.currTime+=1e3*t,this.currTime>=this.duration)return this.node.setPosition(cc.v2(0,0)),o.default.getInstance().recoverDamageNode(this.node.parent,this.node),void(this.node.active=!1);this.node.y+=1,this.node.opacity-=.5,this.currTime<=100?(this.label.fontSize+=.2,this.label.lineHeight+=.2):(this.label.fontSize-=.2,this.label.lineHeight-=.2)},l([d],e)}(cc.Component));i.default=s,cc._RF.pop()},{"./TipCtrl":"TipCtrl"}],DateUtil:[function(t,e,i){"use strict";cc._RF.push(e,"2f08fSb/URMI5vrxj4/uoPD","DateUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.getTodayStartTime=function(){return new Date((new Date).setHours(0,0,0,0)).getTime()},t.getTodayEndTime=function(){return 0},t.isToday=function(t){var e=new Date(t),i=new Date;return e.setHours(0,0,0,0)==i.setHours(0,0,0,0)},t.currentTime=function(){return new Promise(function(t,e){var i=new XMLHttpRequest;i.open("GET","https://www.96p.net/58p/getTime.php",!0),i.onload=function(){i.status>=200&&i.status<300?t(i.responseText):e("\u8bf7\u6c42\u5931\u8d25: "+i.status)},i.onerror=function(){return e(i.statusText)},i.send()})},n([l],t)}());i.default=o,cc._RF.pop()},{}],DurationLineSkill:[function(t,e,i){"use strict";cc._RF.push(e,"bff8cnc78BNfKPqVYe+dqHE","DurationLineSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../PlayerCtrl"),r=t("./BossBaseSkill"),d=cc._decorator,s=d.ccclass,c=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.move=function(){},e.prototype.onCollisionStay=function(t){var e=t.node.parent.getComponent(o.default);if(e){if(!e.isAlive)return;if(-1!=this.passNum&&this.alreadyPassNum>=this.passNum)return;if(this.prepareTime>1e3*this.currTime)return;if(this.lastHitTime+this.atkIntervalTime>1e3*this.currTime)return;this.lastHitTime=1e3*this.currTime,this.alreadyPassNum+=1,cc.log("\u653b\u51fb\u5230\u73a9\u5bb6\u4e86"),e.beHit(this.atk)}},l([s],e)}(r.default));i.default=c,cc._RF.pop()},{"../PlayerCtrl":"PlayerCtrl","./BossBaseSkill":"BossBaseSkill"}],ExecSkillCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"9039dULgVlJ+4KF0DHhQu4O","ExecSkillCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/AttrLevelConfig"),s=t("../../config/SkillConfig"),c=t("../../manager/AudioManager"),u=t("../../utils/PositionUtil"),f=t("../../utils/SpineUtil"),p=t("../MainCtrl"),h=t("../MonsterCtrl"),m=cc._decorator,g=m.ccclass,T=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mainNode=null,e._mainCtrl=null,e._targetNode=null,e._monsterNodeList=null,e._skillConfig=null,e._skillLevelConfig=null,e._spSkeleton=null,e._generalAttr=null,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e}return a(e,t),e.prototype.start=function(){},e.prototype.update=function(t){if(this._status==this.STATUS_MENU.NORMAL){if(this.checkNextTargetNode(),!this._mainCtrl.generalIsAlive||null==this._targetNode||!this._targetNode.isValid)return this._status,this.STATUS_MENU.FINISH,this.node.active=!1,void this.destroy();if(this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SKY_SINGLE||this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SKY_RANGE)this._skyAtk();else{var e=this.node.parent.convertToNodeSpaceAR(this._targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO));if(u.default.calculationDis(this.node.position,e)>this._targetNode.width/2+this._skillConfig.atkRange)return void this._move(t,e);this._atk()}}},e.prototype._move=function(t,e){var i=e.subtract(this.node.position).normalize();this.node.x+=i.x*this._skillConfig.speed*t,this.node.y+=i.y*this._skillConfig.speed*t},e.prototype._atk=function(){f.default.getInstance().playSpineAni(this._spSkeleton,null,s.default.SKILL_SPINE_ANIMATION_NAME.ATK,!1,!1),this._status=this.STATUS_MENU.FINISH},e.prototype.checkNextTargetNode=function(){if(null==this._targetNode||!this._targetNode.isValid){if(0==this._mainCtrl._monsterList.length)return void(this._targetNode=null);this._targetNode=this._mainCtrl._monsterList[0].node}},e.prototype.init=function(t,e,i){this._mainNode=i,this._mainCtrl=i.getComponent(p.default),this._skillConfig=t,this._skillLevelConfig=e,this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){var t,e,i=this;return r(this,function(n){switch(n.label){case 0:return 0==this._mainCtrl._monsterList.length?(this.node.destroy(),[2]):(this._targetNode=this._mainCtrl._monsterList[0].node,this._generalAttr=this._mainCtrl._generalConfig,this.playExecAudio(),this._skillConfig.spine?(t=this.node.getComponent(sp.Skeleton),this._spSkeleton=t,e=t,[4,f.default.getInstance().getBundleSkeletonData(this._skillConfig.spine)]):[3,2]);case 1:e.skeletonData=n.sent(),s.default.SKILL_ATK_TYPE.SKY_SINGLE!=this._skillConfig.atkType&&s.default.SKILL_ATK_TYPE.SKY_RANGE!=this._skillConfig.atkType&&f.default.getInstance().playSpineAni(t,null,s.default.SKILL_SPINE_ANIMATION_NAME.RUN,!0,!1),n.label=2;case 2:return this._spSkeleton.setEventListener(function(t,e){switch(e.data.name){case"hit1":i._atkFrame()}}),this.node.scaleX=this._skillConfig.mainScale.x,this.node.scaleY=this._skillConfig.mainScale.y,this.node.x+=this._skillConfig.initGenPos.x,this.node.y+=this._skillConfig.initGenPos.y,this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]}})})},e.prototype._skyAtk=function(){var t=this;if(this._status=this.STATUS_MENU.FINISH,this._targetNode.isValid&&this._targetNode.getComponent(h.default)._isAlive){if(f.default.getInstance().playSpineAni(this._spSkeleton,null,s.default.SKILL_SPINE_ANIMATION_NAME.START,!0,!1),this.playAtkAudio(),null!=this._mainCtrl._monsterList&&0!=this._mainCtrl._monsterList.length){var e=this._mainCtrl._monsterList[0].node,i=this.node.parent.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO));this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SKY_SINGLE?e.getComponent(h.default)._isAlive&&this.node.setPosition(cc.v2(i.x,i.y+2*this.node.height)):this.node.setPosition(cc.v2(i.x,i.y));for(var n=0;n<this._mainCtrl._monsterList.length;n++){var a=(e=this._mainCtrl._monsterList[n].node).getComponent(h.default);if(a){var l=1;d.default.ATTR_KEY.ATK==this._skillLevelConfig.skillAttrKey&&(l=this._skillLevelConfig.skillAttrRate);var o=Math.floor(this._generalAttr.atk*l);if(a.beHit(o,!1),this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SKY_SINGLE)break}}}var r=650;this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SKY_SINGLE&&(r=250),setTimeout(function(){t.node.isValid&&t.node.destroy()},r)}else this.node.destroy()},e.prototype._atkFrame=function(){var t=this;if(null!=this._mainCtrl._monsterList){this.playAtkAudio();for(var e=0;e<this._mainCtrl._monsterList.length;e++){var i=this._mainCtrl._monsterList[e].node,n=this.node.parent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.Vec2.ZERO)),a=u.default.calculationDis(this.node.position,n);if(i.isValid&&a<this.node.width/2+2*this._skillConfig.atkRange){var l=i.getComponent(h.default);if(l){var o=1;d.default.ATTR_KEY.ATK==this._skillLevelConfig.skillAttrKey&&(o=this._skillLevelConfig.skillAttrRate);var r=Math.floor(this._generalAttr.atk*o);if(l.beHit(r,!1),this._skillConfig.atkType==s.default.SKILL_ATK_TYPE.SHORT_SINGLE)break}}}}setTimeout(function(){null!=t.node&&t.node.isValid&&t.node.destroy()},500)},e.prototype.playExecAudio=function(){null!=this._skillConfig.execAudio&&c.default.getInstance().playSkillAudio(this._skillConfig.execAudio)},e.prototype.playAtkAudio=function(){null!=this._skillConfig.atkAudio&&c.default.getInstance().playSkillAudio(this._skillConfig.atkAudio)},l([g],e)}(cc.Component));i.default=T,cc._RF.pop()},{"../../config/AttrLevelConfig":"AttrLevelConfig","../../config/SkillConfig":"SkillConfig","../../manager/AudioManager":"AudioManager","../../utils/PositionUtil":"PositionUtil","../../utils/SpineUtil":"SpineUtil","../MainCtrl":"MainCtrl","../MonsterCtrl":"MonsterCtrl"}],FightConfig:[function(t,e,i){"use strict";cc._RF.push(e,"2dd7fKwCv1F4oERrX/Jwt47","FightConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.FightBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getJoinCostById=function(t){return this.CONFIG_MAP.get(t).cost},t.CONFIG=[{id:1,name:"\u5c0f\u5154\u7cbe",desc:"\u5c0f\u5154\u7cbe\u840c\u840c\u54d2\uff0c\u6ca1\u4ec0\u4e48\u6740\u4f24\u529b",bossId:1,reward:[{itemId:1002,itemCount:500},{itemId:1003,itemCount:500}],mapPic:"ui/fight/map/fight_map_1",cost:{itemId:1003,itemCount:10},srcPath:"",level:"\u70bc\u6c14\u671f\u521d\u671f"},{id:2,name:"\u9ed1\u5ca9\u732a",desc:"\u9ed1\u5ca9\u732a\u5177\u6709\u9ad8\u989d\u751f\u547d\u529b",bossId:2,reward:[{itemId:1002,itemCount:1e3},{itemId:1003,itemCount:1e3}],mapPic:"ui/fight/map/fight_map_1",cost:{itemId:1003,itemCount:100},srcPath:"",level:"\u70bc\u6c14\u671f\u4e2d\u671f"},{id:3,name:"\u6697\u5f71\u732b\u5996",desc:"\u6697\u5f71\u732b\u5996\u5177\u6709\u9ad8\u989d\u653b\u51fb\u529b",bossId:3,reward:[{itemId:1002,itemCount:5e3},{itemId:1003,itemCount:5e3}],mapPic:"ui/fight/map/fight_map_1",cost:{itemId:1003,itemCount:1e3},srcPath:"",level:"\u70bc\u6c14\u671f\u540e\u671f"},{id:4,name:"\u55dc\u8840\u8759\u8760",desc:"\u55dc\u8840\u8759\u8760\u62e5\u6709\u6781\u9ad8\u7684\u653b\u51fb\u529b",bossId:4,reward:[{itemId:1002,itemCount:1e4},{itemId:1003,itemCount:1e4}],mapPic:"ui/fight/map/fight_map_1",cost:{itemId:1003,itemCount:2e3},srcPath:"",level:"\u70bc\u6c14\u671f\u5706\u6ee1"},{id:5,name:"\u94f6\u6708\u5996\u72fc",desc:"\u94f6\u6708\u5996\u72fc\u7684\u5229\u722a\u5177\u5907\u9ad8\u989d\u653b\u51fb\u529b",bossId:5,reward:[{itemId:1002,itemCount:2e4},{itemId:1003,itemCount:2e4}],mapPic:"ui/fight/map/fight_map_1",cost:{itemId:1003,itemCount:4e3},srcPath:"",level:"\u7b51\u57fa\u671f\u521d\u671f"}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.FightBasic=function(){this.id=null,this.name=null,this.desc=null,this.bossId=null,this.reward=null,this.mapPic=null,this.cost=null,this.srcPath=null,this.level=null},cc._RF.pop()},{}],FightCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"6bdc5YGCINGgpd+0FovAEl9","FightCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/BossConfig"),s=t("../../config/BossSkillConfig"),c=t("../../config/CacheKey"),u=t("../../config/FightConfig"),f=t("../../config/ItemConfig"),p=t("../../config/PlayerFightSkillConfig"),h=t("../../config/SceneKey"),m=t("../../config/SkillConfig"),g=t("../../config/TaskConfig"),T=t("../../manager/SpriteManager"),y=t("../../utils/ButtonUtil"),_=t("../../utils/CacheUtil"),A=t("../../utils/MathUtil"),C=t("../../utils/WxSdkUtil"),R=t("../PlayerCacheCtrl"),I=t("../TipCtrl"),v=t("./BossCtrl"),k=t("./bossSkill/BossBaseSkill"),K=t("./bossSkill/DurationLineSkill"),E=t("./bossSkill/SingleLineSkill"),N=t("./PlayerCtrl"),S=t("./playerSkill/PlayerFightBaseSkill"),P=t("./playerSkill/PlayerFixSkill"),b=t("./playerSkill/PlayerSingleLineSkill"),B=cc._decorator,L=B.ccclass,O=B.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.boss=null,e.map=null,e.pauseNode=null,e.playerDieNode=null,e.settlementNode=null,e.reviveButton=null,e.itemPrefab=null,e.singleLinePrefab=null,e.durationLinePrefab=null,e.playerSingleLinePrefab=null,e.playerFixPrefab=null,e._isPrepare=!0,e._prepareTip="\u51c6\u5907\u6218\u6597",e._canReviveCount=3,e._roomCreateTime=(new Date).getTime(),e._nowTime=(new Date).getTime(),e._roomTime=0,e._startFightTime=3,e._fightConfig=null,e._gameOver=!1,e._bossHp=0,e._bossConfig=null,e._bossSkillInfo={},e._playerFightSkillInfo={},e._isPause=!1,e}return a(e,t),e.prototype.onLoad=function(){var t=_.default.getInstance().get(c.default.FIGHT_ID);this.loadFightConfig(Number(t)),this.loadPlayer()},e.prototype.start=function(){},e.prototype.loadPlayer=function(){this.player.getComponent(N.default).initPlayer(),this.loadPlayerSkill()},e.prototype.loadFightConfig=function(t){this._fightConfig=u.default.getConfigById(t),this.loadMapPic(),this.loadBoss(),_.default.getInstance().remove(c.default.FIGHT_ID)},e.prototype.loadMapPic=function(){return o(this,void 0,void 0,function(){return r(this,function(){return T.default.getInstance().setBundleSpriteFrameByName(this.map.getComponent(cc.Sprite),this._fightConfig.mapPic),[2]})})},e.prototype.update=function(t){this._gameOver||this.player.getComponent(N.default).isAlive&&(this.checkPrepare(),this._nowTime=(new Date).getTime(),this._roomTime+=t,this._roomTime>=this._startFightTime&&(this._isPrepare&&(this._isPrepare=!1),this.checkBossSkill(),this.checkPlayerSkill()))},e.prototype.checkPrepare=function(){if(this._isPrepare){var t=this._startFightTime-this._roomTime;if(!(Math.ceil(t)<=0)){var e=Math.ceil(t)+"\u79d2\u540e\u5f00\u59cb\u6218\u6597";this._prepareTip!=e&&(this._prepareTip=e,I.default.getInstance().tip(this.node,this._prepareTip))}}},e.prototype.showPause=function(){!this.player.getComponent(N.default).isAlive||this._gameOver||this._isPause||(this._isPause=!0,this.pauseNode.zIndex=1e3,this.pauseNode.active=!0,cc.director.pause())},e.prototype.adRevive=function(){var t=this;C.default.getInstance().ShowRewardedVideoAd(function(){t.revive(),R.default.getInstance().calcPlayerDailyInfo(g.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.revive=function(){this._canReviveCount<=0||(this._canReviveCount-=1,this._gameOver=!1,this.playerDieNode.active=!1,this.player.getComponent(N.default).revive(),cc.director.resume())},e.prototype.showSettlement=function(){this.pauseNode.active=!1,this.playerDieNode.active=!1,this.showReward("\u901a\u5173\u5956\u52b1",this._fightConfig.reward),cc.director.pause()},e.prototype.playerDie=function(){if(this._gameOver=!0,this.playerDieNode.active=!0,this.playerDieNode.zIndex=1e3,0==this._canReviveCount)this.reviveButton.node.active=!1;else{var t="\u590d\u6d3b("+this._canReviveCount+")";this.reviveButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t}cc.director.pause()},e.prototype.continueFight=function(){this._isPause=!1,this.pauseNode.active=!1,cc.director.resume()},e.prototype.closeFight=function(){cc.director.loadScene(h.default.INDEX),this.node.destroy(),cc.director.resume()},e.prototype.bossDie=function(){this._gameOver=!0,R.default.getInstance().editPassFight(this._fightConfig.id),this.showSettlement()},e.prototype.loadPlayerSkill=function(){var t=R.default.getInstance().getPlayerSkillInfo();for(var e in t){var i=m.default.getConfigById(Number(e));if(null!=i&&null!=i.fightSkill){var n=i.fightSkill.toString().split("_"),a=n[0],l=Number(n[1]),o=p.default.CONFIG[a],r=p.default.getConfigByTypeAndLevel(a,l),d={id:r.id,type:r.type,level:r.level,num:r.num,passNum:r.passNum,durationTime:r.durationTime,cdTime:r.cdTime,atk:r.atk,atkRange:r.atkRange,lastAtkTime:0,speed:r.speed,intervalTime:r.intervalTime,parentType:r.parentType,atkIntervalTime:r.atkIntervalTime,name:r.name,desc:r.desc,picRes:r.picRes,sameAtkNum:r.sameAtkNum,skillParam:r.skillParam,followType:o.followType,diffuse:r.diffuse};this._playerFightSkillInfo[r.type+""]=d}}},e.prototype.getGenPlayerFightSkill=function(){var t=[];for(var e in this._playerFightSkillInfo)if(s.default.EXEC_TYPE.NORMAL==s.default.CONFIG[e].execType&&Object.prototype.hasOwnProperty.call(this._playerFightSkillInfo,e)){var i=this._playerFightSkillInfo[e];(0==i.lastAtkTime||i.lastAtkTime+i.cdTime<this._nowTime)&&(i.lastAtkTime=this._nowTime,t.push(i))}return t},e.prototype.checkPlayerSkill=function(){var t=this.getGenPlayerFightSkill();if(t.length>0)for(var e=0;e<t.length;e++)this.createPlayerSkill(t[e])},e.prototype.createPlayerSkill=function(t){return o(this,void 0,void 0,function(){var e,i,n,a,l,o=this;return r(this,function(){for(e=t.num,i=t.intervalTime,n=function(e){a.scheduleOnce(function(){o.createPlayerSkillNode(t,e-1)},(e-1)*i/1e3)},a=this,l=1;l<=e;l++)n(l);return[2]})})},e.prototype.createPlayerSkillNode=function(t){var e=0,i=cc.v2(0,1),n=i.x,a=i.y,l=1,o=[0];null!=t.diffuse&&t.diffuse.status&&(l=t.diffuse.num,o=t.diffuse.angle);for(var r=0;r<l;r++){e=o[r],n=(i=cc.v2(o[r],-1)).x;var d=null,s=S.default;if(1==t.type||2==t.type?(s=b.default,d=cc.instantiate(this.playerSingleLinePrefab)):3==t.type&&(s=P.default,d=cc.instantiate(this.playerFixPrefab),this.player.getComponent(N.default).updateNobeHitTime((new Date).getTime()+t.durationTime)),t.followType==p.default.FOLLOW_TYPE.FOLLOW){var c=this.boss.getChildByName("body").convertToNodeSpaceAR(this.node.position),u=this.player.getChildByName("body").convertToNodeSpaceAR(this.node.position),f=A.default.getDir(c,u);0==f.x&&0==f.y||(i=f,n=f.x,a=f.y)}var h={atk:t.atk+this.player.getComponent(N.default).playerInfo.atk,passNum:t.passNum,speed:t.speed,durationTime:t.durationTime,dir:i,dirX:n,dirY:a,atkIntervalTime:t.atkIntervalTime,sameAtkNum:t.sameAtkNum,atkXDir:1,initAngle:e};if(d.getComponent(s).init(h),d.width=t.atkRange.w,d.height=t.atkRange.h,1==t.atkRange.type)d.getComponent(cc.BoxCollider).size.width=t.atkRange.w,d.getComponent(cc.BoxCollider).size.height=t.atkRange.h;else{if(2!=t.atkRange.type)return;d.getComponent(cc.CircleCollider).radius=t.atkRange.w/2}var m=cc.v2(0,0);if(1==t.parentType)m=this.node.convertToNodeSpaceAR(this.player.convertToWorldSpaceAR(cc.Vec2.ZERO)),this.node.addChild(d);else{if(2!=t.parentType)return void d.destroy();this.player.addChild(d)}m.x+=0,m.y+=0,d.setPosition(m),d.active=!0}},e.prototype.loadBoss=function(){if(this._bossConfig=d.default.getConfigById(this._fightConfig.bossId),null!=this._bossConfig){this.boss.getComponent(v.default).init(this._bossConfig),this.setSprite(this.boss.getChildByName("body").getComponent(cc.Sprite),this._bossConfig.uiPath),this.boss.getChildByName("body").width=this._bossConfig.width,this.boss.getChildByName("body").height=this._bossConfig.height;var t=this.boss.getChildByName("body").getComponent(cc.BoxCollider);t.size.width=this._bossConfig.width,t.size.height=this._bossConfig.height,this.loadBossSkill()}else this.closeFight()},e.prototype.setSprite=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,T.default.getInstance().setSpriteFrameByName(t,e)];case 1:return i.sent(),[2]}})})},e.prototype.setAnimation=function(){return o(this,void 0,void 0,function(){return r(this,function(){return[2]})})},e.prototype.loadBossSkill=function(){var t=this._bossConfig.skillList;if(null!=t&&0!=t.length)for(var e=0;e<t.length;e++){var i=t[e],n=i.skill,a=null==i.beginTime?0:Number(i.beginTime),l=n.toString().split("_"),o=l[0],r=Number(l[1]),d=s.default.CONFIG[o],c=s.default.getConfigByTypeAndLevel(o,r),u={beginTime:a,id:c.id,type:c.type,level:c.level,num:c.num,passNum:c.passNum,durationTime:c.durationTime,cdTime:c.cdTime,atk:c.atk,atkRange:c.atkRange,lastAtkTime:0,speed:c.speed,intervalTime:c.intervalTime,parentType:c.parentType,atkIntervalTime:c.atkIntervalTime,name:c.name,desc:c.desc,picRes:c.picRes,sameAtkNum:c.sameAtkNum,skillParam:c.skillParam,followType:d.followType,diffuse:c.diffuse,prepareTime:c.prepareTime};this._bossSkillInfo[c.type+""]=u}},e.prototype.getGenBossSkill=function(){var t=[];for(var e in this._bossSkillInfo)if(s.default.EXEC_TYPE.NORMAL==s.default.CONFIG[e].execType&&Object.prototype.hasOwnProperty.call(this._bossSkillInfo,e)){var i=this._bossSkillInfo[e];if(this._roomTime-this._startFightTime<i.beginTime)continue;(0==i.lastAtkTime||i.lastAtkTime+i.cdTime<this._nowTime)&&(i.lastAtkTime=this._nowTime,t.push(i))}return t},e.prototype.checkBossSkill=function(){var t=this.getGenBossSkill();if(t.length>0)for(var e=0;e<t.length;e++)this.createBossSkill(t[e])},e.prototype.createBossSkill=function(t){return o(this,void 0,void 0,function(){var e,i,n,a,l,o=this;return r(this,function(){for(e=t.num,i=t.intervalTime,n=function(e){a.scheduleOnce(function(){o.createBossSkillNode(t,e-1)},(e-1)*i/1e3)},a=this,l=1;l<=e;l++)n(l);return[2]})})},e.prototype.createBossSkillNode=function(t){var e=cc.v2(0,-1),i=e.x,n=e.y,a=1,l=[0],o=[0];null!=t.diffuse&&t.diffuse.status&&(a=t.diffuse.num,l=t.diffuse.dirX,o=t.diffuse.angleList);for(var r=0;r<a;r++){i=(e=cc.v2(l[r],-1)).x;var d=null,c=k.default;if(1==t.type||2==t.type||3==t.type?(c=E.default,d=cc.instantiate(this.singleLinePrefab)):4==t.type&&(c=K.default,d=cc.instantiate(this.durationLinePrefab)),t.followType==s.default.FOLLOW_TYPE.FOLLOW){var u=this.boss.getChildByName("body").convertToNodeSpaceAR(this.node.position),f=this.player.getChildByName("body").convertToNodeSpaceAR(this.node.position),p=A.default.getDir(f,u);0==p.x&&0==p.y||(e=p,i=p.x,n=p.y)}var h={atk:t.atk+this._bossConfig.atk,passNum:t.passNum,speed:t.speed,durationTime:t.durationTime,dir:e,dirX:i,dirY:n,atkIntervalTime:t.atkIntervalTime,sameAtkNum:t.sameAtkNum,atkXDir:1,initAngle:0,prepareTime:t.prepareTime};if(d.getComponent(c).init(h),d.width=t.atkRange.w,d.height=t.atkRange.h,1==t.atkRange.type)d.getComponent(cc.BoxCollider).size.width=t.atkRange.w,d.getComponent(cc.BoxCollider).size.height=t.atkRange.h,t.atkRange.offsetY&&(d.getComponent(cc.BoxCollider).offset.y=t.atkRange.offsetY);else{if(2!=t.atkRange.type)return;d.getComponent(cc.CircleCollider).radius=t.atkRange.w/2}var m=cc.v2(0,0);if(1==t.parentType)m=this.node.convertToNodeSpaceAR(this.boss.getChildByName("body").convertToWorldSpaceAR(cc.Vec2.ZERO)),this.node.addChild(d);else{if(2!=t.parentType)return void d.destroy();this.boss.addChild(d)}m.x+=0,m.y+=0,this.setSkillAngle(d,o[r],0,0),d.setPosition(m),d.active=!0}},e.prototype.setSkillAngle=function(t,e,i,n){var a=180*Math.atan2(i,n)/Math.PI;a-=-90,t.angle=a+e},e.prototype.showReward=function(t,e){this.settlementNode.zIndex=1e3,this.settlementNode.getChildByName("settlementView").getChildByName("title").getComponent(cc.Label).string=t;var i=this.settlementNode.getChildByName("settlementView").getChildByName("itemPageView").getChildByName("view").getChildByName("content");i.removeAllChildren();for(var n=0;n<e.length;n++){var a=e[n],l=a.itemId,o=a.itemCount,r=f.default.getConfigById(l),d=cc.instantiate(this.itemPrefab),s=d.getChildByName("pic").getComponent(cc.Sprite);T.default.getInstance().setBundleSpriteFrameByName(s,r.srcPath),d.getChildByName("itemCount").getComponent(cc.Label).string=""+o,i.addChild(d),d.active=!0}var c=this.settlementNode.getChildByName("settlementView").getChildByName("confirmButton").getComponent(cc.Button);y.default._setEvent(this.node,c,"FightCtrl","confirmReward","1");var u=this.settlementNode.getChildByName("settlementView").getChildByName("adButton").getComponent(cc.Button);y.default._setEvent(this.node,u,"FightCtrl","adReward","1"),this.settlementNode.active=!0},e.prototype.adReward=function(){var t=this;C.default.getInstance().ShowRewardedVideoAd(function(){t.sendRes(!0),R.default.getInstance().calcPlayerDailyInfo(g.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.confirmReward=function(){this.sendRes(!1)},e.prototype.sendRes=function(t){var e=this._fightConfig.reward;if(null!=e&&e.length>0){if(t)for(var i=0;i<e.length;i++){var n=e[i];n.itemCount*=2,e[i]=n}R.default.getInstance().addPlayerItemList(e)}this.closeFight()},l([O({type:cc.Node,tooltip:"\u73a9\u5bb6\u8282\u70b9"})],e.prototype,"player",void 0),l([O({type:cc.Node,tooltip:"boss\u8282\u70b9"})],e.prototype,"boss",void 0),l([O({type:cc.Node,tooltip:"\u573a\u666f\u8282\u70b9"})],e.prototype,"map",void 0),l([O({type:cc.Node,tooltip:"\u6682\u505c\u754c\u9762\u8282\u70b9"})],e.prototype,"pauseNode",void 0),l([O({type:cc.Node,tooltip:"\u73a9\u5bb6\u6b7b\u4ea1\u8282\u70b9"})],e.prototype,"playerDieNode",void 0),l([O({type:cc.Node,tooltip:"\u7ed3\u7b97\u8282\u70b9"})],e.prototype,"settlementNode",void 0),l([O({type:cc.Button,tooltip:"\u590d\u6d3b\u6309\u94ae"})],e.prototype,"reviveButton",void 0),l([O({type:cc.Prefab,tooltip:"\u5956\u52b1\u7269\u54c1\u9884\u5236\u4f53"})],e.prototype,"itemPrefab",void 0),l([O({type:cc.Prefab,tooltip:"boss\u5355\u4e2a\u76f4\u7ebf\u5b50\u5f39\u9884\u5236\u4f53"})],e.prototype,"singleLinePrefab",void 0),l([O({type:cc.Prefab,tooltip:"boss\u6301\u7eed\u6027\u76f4\u7ebf\u5b50\u5f39\u9884\u5236\u4f53"})],e.prototype,"durationLinePrefab",void 0),l([O({type:cc.Prefab,tooltip:"\u73a9\u5bb6\u5355\u4e2a\u76f4\u7ebf\u5b50\u5f39\u9884\u5236\u4f53"})],e.prototype,"playerSingleLinePrefab",void 0),l([O({type:cc.Prefab,tooltip:"\u73a9\u5bb6\u56fa\u5b9a\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"playerFixPrefab",void 0),l([L],e)}(cc.Component);i.default=w,cc._RF.pop()},{"../../config/BossConfig":"BossConfig","../../config/BossSkillConfig":"BossSkillConfig","../../config/CacheKey":"CacheKey","../../config/FightConfig":"FightConfig","../../config/ItemConfig":"ItemConfig","../../config/PlayerFightSkillConfig":"PlayerFightSkillConfig","../../config/SceneKey":"SceneKey","../../config/SkillConfig":"SkillConfig","../../config/TaskConfig":"TaskConfig","../../manager/SpriteManager":"SpriteManager","../../utils/ButtonUtil":"ButtonUtil","../../utils/CacheUtil":"CacheUtil","../../utils/MathUtil":"MathUtil","../../utils/WxSdkUtil":"WxSdkUtil","../PlayerCacheCtrl":"PlayerCacheCtrl","../TipCtrl":"TipCtrl","./BossCtrl":"BossCtrl","./PlayerCtrl":"PlayerCtrl","./bossSkill/BossBaseSkill":"BossBaseSkill","./bossSkill/DurationLineSkill":"DurationLineSkill","./bossSkill/SingleLineSkill":"SingleLineSkill","./playerSkill/PlayerFightBaseSkill":"PlayerFightBaseSkill","./playerSkill/PlayerFixSkill":"PlayerFixSkill","./playerSkill/PlayerSingleLineSkill":"PlayerSingleLineSkill"}],FightListCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"2e4a5zGEe5Ai4TuuSrQ/oBA","FightListCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/ItemConfig"),r=t("../utils/ButtonUtil"),d=t("./PlayerCacheCtrl"),s=t("./TipCtrl"),c=t("../config/FightConfig"),u=t("../utils/CacheUtil"),f=t("../config/CacheKey"),p=t("../config/SceneKey"),h=t("../manager/SpriteManager"),m=cc._decorator,g=m.ccclass,T=m.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fightContentNode=null,e.fightInfoPrefab=null,e}return a(e,t),e.prototype.onEnable=function(){this.initFightList()},e.prototype.start=function(){},e.prototype.initFightList=function(){this.fightContentNode.removeAllChildren();for(var t=d.default.getInstance().getPassFight(),e=0;e<c.default.CONFIG.length;e++){var i=c.default.CONFIG[e];null!=i&&this.initFight(i,t)}},e.prototype.initFight=function(t,e){cc.log("\u6e32\u67d3\u6311\u6218\u5173\u5361\u4fe1\u606f \u6311\u6218\u5173\u5361ID\uff1a%s",t.id);var i=cc.instantiate(this.fightInfoPrefab);i.getChildByName("name").getComponent(cc.Label).string=t.name,i.getChildByName("desc").getComponent(cc.Label).string=t.desc;var n=i.getChildByName("pic").getChildByName("pic").getComponent(cc.Sprite);h.default.getInstance().setBundleSpriteFrameByName(n,t.srcPath),i.getChildByName("pic").getChildByName("level").getComponent(cc.Label).string=t.level;var a=i.getChildByName("join").getComponent(cc.Button),l=i.getChildByName("join").getChildByName("Background").getChildByName("Label").getComponent(cc.Label);if(t.id<=e)l.string="\u5df2\u5b8c\u6210",a.interactable=!1,i.getChildByName("cost").active=!1;else if(t.id==e+1){var d=c.default.getJoinCostById(t.id),s=o.default.getConfigById(d.itemId),u=i.getChildByName("cost").getChildByName("pic").getComponent(cc.Sprite);h.default.getInstance().setBundleSpriteFrameByName(u,s.srcPath);var f=i.getChildByName("cost").getChildByName("itemCount").getComponent(cc.Label);f.string=""+d.itemCount,f.node.active=!0,r.default._setEvent(this.node,a,"FightListCtrl","join",t.id+"")}else l.string="\u672a\u89e3\u9501",a.interactable=!1,i.getChildByName("cost").active=!1;this.fightContentNode.addChild(i),i.active=!0},e.prototype.join=function(t,e){if(null!=e){var i=Number(e);if(null!=c.default.getConfigById(i)){var n=c.default.getJoinCostById(i);d.default.getInstance().costPlayerItem(n.itemId,n.itemCount)?(u.default.getInstance().set(f.default.FIGHT_ID,i),cc.director.loadScene(p.default.FIGHT)):s.default.getInstance().tip(this.node,"\u5f53\u524d\u3010"+o.default.getConfigById(Number(n.itemId)).name+"\u3011\u4e0d\u8db3\u4ee5\u8fdb\u884c\u6311\u6218")}else cc.log("\u6311\u6218\u5173\u5361\u914d\u7f6e\u4e0d\u5b58\u5728,id:",i)}},l([T(cc.Node)],e.prototype,"fightContentNode",void 0),l([T(cc.Prefab)],e.prototype,"fightInfoPrefab",void 0),l([g],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../config/CacheKey":"CacheKey","../config/FightConfig":"FightConfig","../config/ItemConfig":"ItemConfig","../config/SceneKey":"SceneKey","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","../utils/CacheUtil":"CacheUtil","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl"}],GeneralConfig:[function(t,e,i){"use strict";cc._RF.push(e,"77787XpKiBHdLgQI5uCe4+R","GeneralConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.GeneralBasic=void 0;var a=t("../manager/UnlockManager"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.hasNextLevel=function(t){return t<this.LEVEL_UP_EXP_CONFIG.length},t.getLevelUpExp=function(t){return t>=this.LEVEL_UP_EXP_CONFIG.length?-1:this.LEVEL_UP_EXP_CONFIG[t]},t.SPINE_ANIMATION_NAME={ATK:"attack",DIE:"die",HIT:"hit",RUN:"run",STAND:"stand"},t.LEVEL_UP_EXP_CONFIG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],t.CONFIG=[{id:1,name:"\u52c7\u58eb",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_01/general_01",atkFrameTime:1,iconPic:"ui/txt/C",unlockCondition:{type:a.default.UNLOCK_TYPE.FREE},skill:{initSkill:101,levelSkill:{10:1,25:11,50:21,75:12,100:22},fixedSkill:{20:201}}},{id:2,name:"\u5200\u7537",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:{x:0,y:-50},spine:"animation/general/general_12/general_12",atkFrameTime:1.8,iconPic:"ui/txt/B",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:1e3}},skill:{initSkill:112,levelSkill:{1:1,10:1,25:11,50:21,75:12,100:22},fixedSkill:{20:201}}},{id:3,name:"\u5b54\u4e00\u51e1",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_02/general_02",atkFrameTime:1,iconPic:"ui/txt/B",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:1e3}},skill:{initSkill:102,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:4,name:"\u7206\u70b8\u5934",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_03/general_03",atkFrameTime:1,iconPic:"ui/txt/A",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:2e3}},skill:{initSkill:107,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:5,name:"\u70ae\u7237",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_04/general_04",atkFrameTime:1,iconPic:"ui/txt/A",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:2e3}},skill:{initSkill:108,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:6,name:"\u9f99\u5973",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_05/general_05",atkFrameTime:1,iconPic:"ui/txt/S",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:2500}},skill:{initSkill:103,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:7,name:"\u5fcd\u8005",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:null,spine:"animation/general/general_06/general_06",atkFrameTime:1,iconPic:"ui/txt/S",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:2500}},skill:{initSkill:104,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:8,name:"\u5973\u730e\u4eba",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.55,y:.55},listPos:{x:0,y:-50},spine:"animation/general/general_07/general_07",atkFrameTime:1,iconPic:"ui/txt/SS",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:3e3}},skill:{initSkill:105,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:9,name:"\u65f6\u95f4\u535a\u58eb",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.65,y:.65},listPos:null,spine:"animation/general/general_08/general_08",atkFrameTime:1,iconPic:"ui/txt/SS",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:3e3}},skill:{initSkill:106,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:10,name:"\u5fb7\u9c81\u4f0a",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.65,y:.65},listPos:null,spine:"animation/general/general_09/general_09",atkFrameTime:1,iconPic:"ui/txt/SSS",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:5e3}},skill:{initSkill:109,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:11,name:"\u706d\u4e16\u5996\u72d0",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.65,y:.65},listPos:null,spine:"animation/general/general_10/general_10",atkFrameTime:2,iconPic:"ui/txt/SSS",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:5e3}},skill:{initSkill:110,levelSkill:{1:1,10:11,25:21,50:2,75:12,100:22},fixedSkill:{20:201}}},{id:12,name:"\u96f7\u9706\u5973\u7687",desc:"",mainScale:{x:-.5,y:.5},listScale:{x:-.65,y:.65},listPos:null,spine:"animation/general/general_11/general_11",atkFrameTime:1,iconPic:"ui/txt/SSS",unlockCondition:{type:a.default.UNLOCK_TYPE.ITEM,content:{itemId:1006,itemCount:5e3}},skill:{initSkill:111,levelSkill:{1:1,5:11,8:21,10:12,25:22,50:2,75:13,100:23},fixedSkill:{20:201}}}],t.CONFIG_MAP=new Map,n([o],t)}());i.default=r;i.GeneralBasic=function(){this.id=null,this.name=null,this.desc=null,this.mainScale=null,this.listScale=null,this.listPos=null,this.spine=null,this.atkFrameTime=null,this.iconPic=null,this.unlockCondition=null,this.skill=null},cc._RF.pop()},{"../manager/UnlockManager":"UnlockManager"}],GeneralCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"e9aa9s+W7lHLrjWsSoKJMVu","GeneralCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../config/ItemConfig"),s=t("../utils/ButtonUtil"),c=t("./PlayerCacheCtrl"),u=t("../config/GeneralConfig"),f=t("../config/ResPathKey"),p=t("./TipCtrl"),h=t("../manager/UnlockManager"),m=t("../utils/WxSdkUtil"),g=t("./IndexCtrl"),T=t("../utils/SpineUtil"),y=t("./MainCtrl"),_=t("../config/GeneralSkillConfig"),A=t("./generalSkill/GeneralLevelSkillCtrl"),C=t("./PlayerAttrCtrl"),R=t("../manager/SpriteManager"),I=t("../manager/AudioManager"),v=t("../config/TaskConfig"),k=cc._decorator,K=k.ccclass,E=k.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.generalListContent=null,e.generalInfoPrefab=null,e.chooseGeneralInfo=null,e.chooseGeneralLevelInfo=null,e.chooseGeneralLevelSkillContent=null,e.chooseGeneralFixedSkillNode=null,e.generalLevelSkillPrefab=null,e.useButton=null,e.levelUpButton=null,e.unlockButton=null,e.generalExpNode=null,e._currSelectNodeName=null,e._currGeneralAnimation=1,e._generalInfoList=[],e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this._init()},e.prototype.start=function(){},e.prototype._init=function(){cc.log("_init\u521d\u59cb\u5316..."),this.flushInfo(),this._generalInfoList=[],this._initGeneralInfoList()},e.prototype._initGeneralInfoList=function(){return o(this,void 0,void 0,function(){var t,e,i;return r(this,function(){for(this.generalListContent.removeAllChildren(),t=c.default.getInstance().getPlayerUseGeneral(),cc.log(t),e=0;e<u.default.CONFIG.length;e++)i=u.default.CONFIG[e],this._initGeneralInfo(i,c.default.getInstance().getPlayerGeneralById(i.id),t==i.id);return this._currSelectNodeName||(this._currSelectNodeName=c.default.getInstance().getPlayerUseGeneral()),this.chooseGeneral(null,this._currSelectNodeName),[2]})})},e.prototype._initGeneralInfo=function(t,e,i){return o(this,void 0,void 0,function(){var n,a,l,o,d;return r(this,function(r){switch(r.label){case 0:return n=cc.instantiate(this.generalInfoPrefab),this._generalInfoList.push(n),this.generalListContent.addChild(n),n.getChildByName("name").getComponent(cc.Label).string=t.name,a=n.getChildByName("icon").getComponent(cc.Sprite),R.default.getInstance().setBundleSpriteFrameByName(a,t.iconPic),l=n.getChildByName("general").getComponent(sp.Skeleton),o=l,[4,T.default.getInstance().getBundleSkeletonData(t.spine)];case 1:return o.skeletonData=r.sent(),n.getChildByName("general").scaleX=t.listScale.x,n.getChildByName("general").scaleY=t.listScale.y,n.getChildByName("general").y-=n.getChildByName("general").height/4,t.listPos&&(n.getChildByName("general").x=t.listPos.x,n.getChildByName("general").y=t.listPos.y),d=n.getComponent(cc.Sprite),e?(n.getChildByName("level").getComponent(cc.Label).string=e.level+"\u7ea7",R.default.getInstance().setBundleSpriteFrameByName(d,f.default.GENERAL_BROWN_BOX)):(n.getChildByName("level").active=!1,n.getChildByName("lock").active=!0,R.default.getInstance().setBundleSpriteFrameByName(d,f.default.GENERAL_GRAY_BOX)),i&&(n.getChildByName("using").active=!0),s.default._setEvent(this.node,n.getComponent(cc.Button),"GeneralCtrl","chooseGeneral",t.id+""),n.active=!0,[2]}})})},e.prototype._updateGeneralInfo=function(t,e,i){return o(this,void 0,void 0,function(){var n;return r(this,function(){return n=t.getComponent(cc.Sprite),e?(t.getChildByName("level").active=!0,t.getChildByName("lock").active=!1,t.getChildByName("level").getComponent(cc.Label).string=e.level+"\u7ea7",R.default.getInstance().setBundleSpriteFrameByName(n,f.default.GENERAL_BROWN_BOX)):(t.getChildByName("level").active=!1,t.getChildByName("lock").active=!0,R.default.getInstance().setBundleSpriteFrameByName(n,f.default.GENERAL_GRAY_BOX)),i&&(t.getChildByName("using").active=!0),[2]})})},e.prototype._updateGeneralSkillInfo=function(){return o(this,void 0,void 0,function(){var t,e,i;return r(this,function(){return t=Number(this._currSelectNodeName),e=u.default.getConfigById(t),i=c.default.getInstance().getPlayerGeneralById(t),this._updateGeneralLevelSkillInfo(e,null==i?0:i.level),this._updateGeneralFixedSkillInfo(e),[2]})})},e.prototype._updateGeneralLevelSkillInfo=function(t,e){this.chooseGeneralLevelSkillContent.removeAllChildren();var i=t.skill.levelSkill,n=0;for(var a in i){var l=i[a],o=_.default.getConfigById(l);if(null!=o){var r=cc.instantiate(this.generalLevelSkillPrefab);r.getComponent(A.default).init(o,Number(a),e,n),this.chooseGeneralLevelSkillContent.addChild(r),n+=1}}},e.prototype._updateGeneralFixedSkillInfo=function(t){var e=t.skill.initSkill,i=_.default.getConfigById(e);null!=i&&(this.chooseGeneralFixedSkillNode.getChildByName("skillName").getComponent(cc.Label).string=i.name,this.chooseGeneralFixedSkillNode.getChildByName("skillDesc").getComponent(cc.Label).string=i.desc,R.default.getInstance().setBundleSpriteFrameByName(this.chooseGeneralFixedSkillNode.getChildByName("skillPicBg").getChildByName("pic").getComponent(cc.Sprite),i.pic))},e.prototype.close=function(){I.default.getInstance().playCommonBtn(),this.node.active=!1},e.prototype.chooseGeneral=function(t,e){return o(this,void 0,void 0,function(){var t,i,n,a,l,o,f,p,m,g,y,_,A;return r(this,function(r){switch(r.label){case 0:return null==e?[2]:(t=Number(e),cc.log("chooseGeneral:",t),null==(i=u.default.getConfigById(t))?[2]:(this._currSelectNodeName&&(cc.log("chooseGeneral:\u53d6\u6d88\u4e4b\u524d\u9009\u4e2d\u7684\u8282\u70b9",this._currSelectNodeName),this._generalInfoList[Number(this._currSelectNodeName)-1].getChildByName("select").active=!1),this._generalInfoList[Number(e)-1].getChildByName("select").active=!0,this._currSelectNodeName=String(e),n=this.chooseGeneralInfo.getChildByName("general").getComponent(sp.Skeleton),a=n,[4,T.default.getInstance().getBundleSkeletonData(i.spine)]));case 1:return a.skeletonData=r.sent(),T.default.getInstance().playSpineAni(n,null,u.default.SPINE_ANIMATION_NAME.STAND,!0,!1),this._currGeneralAnimation=1,this.chooseGeneralInfo.getChildByName("general").scaleX=1.4*i.listScale.x,this.chooseGeneralInfo.getChildByName("general").scaleY=1.4*i.listScale.y,this.chooseGeneralInfo.getChildByName("general").y=-this.chooseGeneralInfo.getChildByName("general").height/3-(null!=i.listPos?i.listPos.y/3:0),l=this.chooseGeneralInfo.getChildByName("icon").getComponent(cc.Sprite),R.default.getInstance().setBundleSpriteFrameByName(l,i.iconPic),this.chooseGeneralInfo.getChildByName("name").getComponent(cc.Label).string=i.name,o=this._getGeneralExp(),(f=c.default.getInstance().getPlayerGeneralById(t))?(this.chooseGeneralLevelInfo.getChildByName("lockDesc").active=!1,this.chooseGeneralLevelInfo.getChildByName("levelBg").active=!0,this.chooseGeneralLevelInfo.getChildByName("exp").active=!0,this.chooseGeneralLevelInfo.getChildByName("levelBg").getChildByName("level").getComponent(cc.Label).string="\u7b49\u7ea7"+f.level,p=this.chooseGeneralLevelInfo.getChildByName("exp").getComponent(cc.ProgressBar),u.default.hasNextLevel(f.level)?(m=u.default.getLevelUpExp(f.level),p.progress=o/m,this.chooseGeneralLevelInfo.getChildByName("exp").getChildByName("label").getComponent(cc.Label).string=o+"/"+m):(p.progress=1,this.chooseGeneralLevelInfo.getChildByName("exp").getChildByName("label").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7")):(this.chooseGeneralLevelInfo.getChildByName("levelBg").active=!1,this.chooseGeneralLevelInfo.getChildByName("exp").active=!1,this.chooseGeneralLevelInfo.getChildByName("lockDesc").active=!0),this._updateGeneralSkillInfo(),this.unlockButton.node.active=!1,this.useButton.node.active=!1,this.levelUpButton.node.active=!1,f?(this.useButton.node.active=!0,this.levelUpButton.node.active=!0,c.default.getInstance().getPlayerUseGeneral()==t?(this.useButton.interactable=!1,this.useButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5df2\u51fa\u6218"):(this.useButton.interactable=!0,this.useButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u51fa\u6218",s.default._setEvent(this.node,this.useButton,"GeneralCtrl","useGeneral",i.id+"")),u.default.hasNextLevel(f.level)?o<u.default.getLevelUpExp(f.level)?(this.levelUpButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5f3a\u5316",this.levelUpButton.interactable=!1):(this.levelUpButton.interactable=!0,this.levelUpButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5f3a\u5316",s.default._setEvent(this.node,this.levelUpButton,"GeneralCtrl","levelUpGeneral",i.id+"")):(this.levelUpButton.interactable=!1,this.levelUpButton.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7")):(this.unlockButton.node.active=!0,s.default._setEvent(this.node,this.unlockButton,"GeneralCtrl","unlockGeneral",i.id+""),i.unlockCondition.type==h.default.UNLOCK_TYPE.ITEM&&(g=i.unlockCondition.content,y=d.default.getConfigById(g.itemId),_=this.unlockButton.node.getChildByName("Background").getChildByName("cost"),A=_.getChildByName("itemPic").getComponent(cc.Sprite),R.default.getInstance().setBundleSpriteFrameByName(A,y.srcPath),_.getChildByName("itemCount").getComponent(cc.Label).string=g.itemCount+"")),[2]}})})},e.prototype.useGeneral=function(t,e){var i=Number(e);if(c.default.getInstance().getPlayerGeneralById(i))if(i!=c.default.getInstance().getPlayerUseGeneral()){I.default.getInstance().playCommonBtn(),c.default.getInstance().playerUseGeneral(i),this._initGeneralInfoList(),this.node.active=!1;var n=this.node.parent.parent.getChildByName("main").getComponent(y.default);n&&n.fightOverEvent(!0)}else cc.log("\u5f53\u524d\u89d2\u8272\u6b63\u5728\u51fa\u6218\u4e2d");else cc.log("\u5931\u8d25\uff0c\u672a\u62e5\u6709\u8be5\u89d2\u8272")},e.prototype.levelUpGeneral=function(t,e){var i=Number(e),n=c.default.getInstance().getPlayerGeneralById(i);if(n)if(u.default.hasNextLevel(n.level)){var a=u.default.getLevelUpExp(n.level);if(this._getGeneralExp()<a)p.default.getInstance().tip(this.node,"\u672a\u6ee1\u8db3\u6761\u4ef6");else{I.default.getInstance().playLevelUp(),n.level=n.level+1,c.default.getInstance().costPlayerItem(Number(d.default.ITEM_CONST.EXP),a),c.default.getInstance().editPlayerGeneral(i,n);var l=c.default.getInstance().getPlayerUseGeneral();this._updateGeneralInfo(this._generalInfoList[i-1],n,l==i),this.chooseGeneral(null,i),C.default.getInstance().calcPlayerAttr(),this.flushInfo()}}else p.default.getInstance().tip(this.node,"\u8be5\u89d2\u8272\u5df2\u6ee1\u7ea7");else cc.log("\u5931\u8d25\uff0c\u672a\u62e5\u6709\u8be5\u89d2\u8272")},e.prototype.unlockGeneral=function(t,e){var i=Number(e);if(c.default.getInstance().getPlayerGeneralById(i))cc.log("\u5931\u8d25\uff0c\u5df2\u62e5\u6709\u8be5\u89d2\u8272");else{var n=u.default.getConfigById(i).unlockCondition;if(h.default.getInstance().unlock(n.type,n.content)){I.default.getInstance().playCommonBtn(),c.default.getInstance().playerGetGeneral(i);var a=c.default.getInstance().getPlayerGeneralById(i);this._updateGeneralInfo(this._generalInfoList[i-1],a,!1),this.chooseGeneral(null,i),C.default.getInstance().calcPlayerAttr();var l=this.node.parent.parent.getChildByName("main").getComponent(y.default);l&&l.flushInfo()}else{var o=h.default.getInstance().getUnlockDesc(n.type,n.content);p.default.getInstance().tipWithColor(this.node,o,"#ffffff")}}},e.prototype._getGeneralExp=function(){return c.default.getInstance().getPlayerItemNum(Number(d.default.ITEM_CONST.EXP))},e.prototype.getGeneralExpByAd=function(t,e){var i=this;m.default.getInstance().ShowRewardedVideoAd(function(){var t=[{itemId:Number(d.default.ITEM_CONST.EXP),itemCount:Number(e)}];c.default.getInstance().addPlayerItemList(t),i.chooseGeneral(null,i._currSelectNodeName),i.node.parent.parent.getComponent(g.default).showReward("\u83b7\u5f97\u5956\u52b1",t),c.default.getInstance().calcPlayerDailyInfo(v.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.changeGeneralAnimation=function(){switch(this._currGeneralAnimation>=3?this._currGeneralAnimation=1:this._currGeneralAnimation+=1,this._currGeneralAnimation){case 1:T.default.getInstance().playSpineAni(this.chooseGeneralInfo.getChildByName("general").getComponent(sp.Skeleton),null,u.default.SPINE_ANIMATION_NAME.STAND,!0,!1);break;case 2:T.default.getInstance().playSpineAni(this.chooseGeneralInfo.getChildByName("general").getComponent(sp.Skeleton),null,u.default.SPINE_ANIMATION_NAME.RUN,!0,!1);break;case 3:T.default.getInstance().playSpineAni(this.chooseGeneralInfo.getChildByName("general").getComponent(sp.Skeleton),null,u.default.SPINE_ANIMATION_NAME.ATK,!0,!1)}},e.prototype.flushInfo=function(){this.generalExpNode.getComponent(cc.Label).string=this._getGeneralExp()+""},l([E({type:cc.Node,tooltip:"\u89d2\u8272\u5217\u8868\u7236\u8282\u70b9"})],e.prototype,"generalListContent",void 0),l([E({type:cc.Prefab,tooltip:"\u89d2\u8272\u4fe1\u606f\u9884\u5236\u4f53"})],e.prototype,"generalInfoPrefab",void 0),l([E({type:cc.Node,tooltip:"\u9009\u4e2d\u7684\u89d2\u8272\u4fe1\u606f"})],e.prototype,"chooseGeneralInfo",void 0),l([E({type:cc.Node,tooltip:"\u9009\u4e2d\u7684\u89d2\u8272\u7b49\u7ea7\u4fe1\u606f"})],e.prototype,"chooseGeneralLevelInfo",void 0),l([E({type:cc.Node,tooltip:"\u9009\u4e2d\u89d2\u8272\u7684\u7b49\u7ea7\u6280\u80fd\u5185\u5bb9\u8282\u70b9"})],e.prototype,"chooseGeneralLevelSkillContent",void 0),l([E({type:cc.Node,tooltip:"\u9009\u4e2d\u89d2\u8272\u7684\u56fa\u5b9a\u6280\u80fd\u8282\u70b9"})],e.prototype,"chooseGeneralFixedSkillNode",void 0),l([E({type:cc.Prefab,tooltip:"\u89d2\u8272\u7b49\u7ea7\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"generalLevelSkillPrefab",void 0),l([E({type:cc.Button,tooltip:"\u4f7f\u7528\u6309\u94ae"})],e.prototype,"useButton",void 0),l([E({type:cc.Button,tooltip:"\u5f3a\u5316\u6309\u94ae"})],e.prototype,"levelUpButton",void 0),l([E({type:cc.Button,tooltip:"\u83b7\u5f97\u6309\u94ae"})],e.prototype,"unlockButton",void 0),l([E({type:cc.Node,tooltip:"\u89d2\u8272\u7ecf\u9a8c\u8282\u70b9"})],e.prototype,"generalExpNode",void 0),l([K],e)}(cc.Component);i.default=N,cc._RF.pop()},{"../config/GeneralConfig":"GeneralConfig","../config/GeneralSkillConfig":"GeneralSkillConfig","../config/ItemConfig":"ItemConfig","../config/ResPathKey":"ResPathKey","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../manager/UnlockManager":"UnlockManager","../utils/ButtonUtil":"ButtonUtil","../utils/SpineUtil":"SpineUtil","../utils/WxSdkUtil":"WxSdkUtil","./IndexCtrl":"IndexCtrl","./MainCtrl":"MainCtrl","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl","./generalSkill/GeneralLevelSkillCtrl":"GeneralLevelSkillCtrl"}],GeneralInitSkill:[function(t,e,i){"use strict";cc._RF.push(e,"3b57fgA7NBJFZmcj7SvPH05","GeneralInitSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/GeneralSkillConfig"),s=t("../../utils/PositionUtil"),c=t("../../utils/RandomUtil"),u=t("../../utils/SpineUtil"),f=t("../MonsterCtrl"),p=cc._decorator,h=p.ccclass,m=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._targetNode=null,e._mainCtrl=null,e._monsterCtrl=null,e._generalSkillConfig=null,e._generalAttr=null,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e}return a(e,t),e.prototype.start=function(){},e.prototype.update=function(t){if(this._status==this.STATUS_MENU.NORMAL){if(this.checkNextTargetNode(),!this._mainCtrl.generalIsAlive||null==this._targetNode||!this._targetNode.isValid)return this._status,this.STATUS_MENU.FINISH,this.node.active=!1,void this.destroy();var e=this.node.parent.convertToNodeSpaceAR(this._targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO));e.y=e.y+this._targetNode.height/4;var i=s.default.calculationDis(this.node.position,e),n=.35*this._targetNode.width;if(this._generalSkillConfig.type==d.default.SKILL_TYPE_MENU.LINE&&(n=.35*this._targetNode.width+this.node.height/2,cc.log(n)),i>n)return void this._move(t,e);this._atk()}},e.prototype.checkNextTargetNode=function(){if(null==this._targetNode||!this._targetNode.isValid){if(0==this._mainCtrl._monsterList.length)return void(this._targetNode=null);this._targetNode=this._mainCtrl._monsterList[0].node}},e.prototype._move=function(t,e){this._generalSkillConfig.type==d.default.SKILL_TYPE_MENU.LINE&&(this.node.scaleY+=.11);var i=e.subtract(this.node.position).normalize();this.node.x+=i.x*this._generalSkillConfig.speed*t,this.node.y+=i.y*this._generalSkillConfig.speed*t},e.prototype._atk=function(){this._status,this.STATUS_MENU.FINISH;var t=this._targetNode.getComponent(f.default);if(t){var e=c.default.random(this._generalAttr.crit),i=this._generalAttr.atk;e&&(i=Math.ceil(this._generalAttr.atk*this._generalAttr.critDamage)),t.beHit(i,e)}this.node.destroy()},e.prototype.init=function(t,e,i,n){this._generalSkillConfig=t,this._targetNode=e,this._generalAttr=i,this._mainCtrl=n,this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){var t,e;return r(this,function(i){switch(i.label){case 0:return this._generalSkillConfig.spine?(t=this.node.getComponent(sp.Skeleton),e=t,[4,u.default.getInstance().getBundleSkeletonData(this._generalSkillConfig.spine)]):[3,2];case 1:e.skeletonData=i.sent(),u.default.getInstance().playSpineAni(t,null,d.default.SKILL_ANIMATION_NAME.START,!0,!1),i.label=2;case 2:return this._generalSkillConfig.type==d.default.SKILL_TYPE_MENU.LINE&&(this.node.angle=90),this.node.scaleX=this._generalSkillConfig.scaleX,this.node.scaleY=this._generalSkillConfig.scaleY,this.node.x+=this._generalSkillConfig.initGenPos.x,this.node.y+=this._generalSkillConfig.initGenPos.y,this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]}})})},l([h],e)}(cc.Component));i.default=m,cc._RF.pop()},{"../../config/GeneralSkillConfig":"GeneralSkillConfig","../../utils/PositionUtil":"PositionUtil","../../utils/RandomUtil":"RandomUtil","../../utils/SpineUtil":"SpineUtil","../MonsterCtrl":"MonsterCtrl"}],GeneralLevelSkillCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"a4a84V9MsNHJZbbHVhAIL+B","GeneralLevelSkillCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../../config/ResPathKey"),r=t("../../manager/SpriteManager"),d=t("../../utils/ButtonUtil"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._firstTipNodePosX=225,e._oneSpacingX=80,e._showTipStartTime=0,e._showTipStatus=!1,e}return a(e,t),e.prototype.start=function(){},e.prototype.update=function(){this._showTipStatus&&(new Date).getTime()-this._showTipStartTime>3e3&&this.closeTip()},e.prototype.init=function(t,e,i,n){var a=i>=Number(e),l=this.node.getChildByName("pic").getComponent(cc.Sprite);r.default.getInstance().setBundleSpriteFrameByName(l,t.pic),a?(r.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),o.default.GENERAL_BROWN_BOX),this.node.getChildByName("level").active=!1):(r.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),o.default.GENERAL_GRAY_BOX),this.node.getChildByName("level").getComponent(cc.Label).string="\u7b49\u7ea7"+e,this.node.getChildByName("level").active=!0);var s=this.node.getComponent(cc.Button);d.default._setEvent(this.node,s,"GeneralLevelSkillCtrl","showTip",null);var c=this.node.getChildByName("tip"),u=c.getComponent(cc.Button);d.default._setEvent(this.node,u,"GeneralLevelSkillCtrl","closeTip",null),c.getChildByName("skillName").getComponent(cc.Label).string=t.name,c.getChildByName("desc").getComponent(cc.Label).string=e>i?"\u8fbe\u5230"+e+"\u7ea7\u89e3\u9501":"\u5df2\u89e3\u9501",c.x=this._firstTipNodePosX-this._oneSpacingX*n,this.node.active=!0},e.prototype.showTip=function(){this._showTipStartTime=(new Date).getTime(),this._showTipStatus=!0,this.node.getChildByName("tip").active=!0,this.node.getChildByName("tipPoint").active=!0},e.prototype.closeTip=function(){this._showTipStatus=!1,this.node.getChildByName("tip").active=!1,this.node.getChildByName("tipPoint").active=!1},l([c],e)}(cc.Component));i.default=u,cc._RF.pop()},{"../../config/ResPathKey":"ResPathKey","../../manager/SpriteManager":"SpriteManager","../../utils/ButtonUtil":"ButtonUtil"}],GeneralSkillConfig:[function(t,e,i){"use strict";cc._RF.push(e,"c1a1br5RFdMgoiDIkmCzSZu","GeneralSkillConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.GeneralSkillBasic=void 0;var a=t("./AttrLevelConfig"),l=cc._decorator.ccclass,o=function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.SKILL_ANIMATION_NAME={START:"start"},t.SKILL_TYPE_MENU={NORMAL:1,EFFECT:2,LINE:3},t.EFFECT_TYPE_MENU={RES_RATE_ADD:1,ATTR_NUM_ADD:2,ATTR_RATE_ADD:3},t.CONFIG=[{id:1,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u91d1\u5e01\u52a0\u6210+2%",desc:"\u91d1\u5e01\u52a0\u6210+2%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/item/item_1003",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.RES_RATE_ADD,itemId:1003,addCount:.02}},{id:2,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u91d1\u5e01\u52a0\u6210+3%",desc:"\u91d1\u5e01\u52a0\u6210+3%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/item/item_1003",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.RES_RATE_ADD,itemId:1003,addCount:.03}},{id:3,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u91d1\u5e01\u52a0\u6210+5%",desc:"\u91d1\u5e01\u52a0\u6210+5%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/item/item_1003",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.RES_RATE_ADD,itemId:1003,addCount:.05}},{id:4,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u91d1\u5e01\u52a0\u6210+7%",desc:"\u91d1\u5e01\u52a0\u6210+7%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/item/item_1003",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.RES_RATE_ADD,itemId:1003,addCount:.07}},{id:5,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u91d1\u5e01\u52a0\u6210+10%",desc:"\u91d1\u5e01\u52a0\u6210+10%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/item/item_1003",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.RES_RATE_ADD,itemId:1003,addCount:.1}},{id:11,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u751f\u547d+10%",desc:"\u751f\u547d+10%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/hpIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.HP,addCount:.1}},{id:12,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u751f\u547d+20%",desc:"\u751f\u547d+20%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/hpIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.HP,addCount:.2}},{id:13,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u751f\u547d+100%",desc:"\u751f\u547d+100%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/hpIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.HP,addCount:1}},{id:21,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+5%",desc:"\u653b\u51fb\u529b+5%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.05}},{id:22,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+10%",desc:"\u653b\u51fb\u529b+10%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.1}},{id:23,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+20%",desc:"\u653b\u51fb\u529b+20%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.2}},{id:24,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+40%",desc:"\u653b\u51fb\u529b+40%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.4}},{id:25,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+60%",desc:"\u653b\u51fb\u529b+60%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.6}},{id:26,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+80%",desc:"\u653b\u51fb\u529b+80%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:.8}},{id:27,type:e.SKILL_TYPE_MENU.EFFECT,name:"\u653b\u51fb\u529b+100%",desc:"\u653b\u51fb\u529b+100%",width:0,height:0,speed:0,scaleX:1,scaleY:1,pic:"ui/attr/atkIcon",spine:null,initGenPos:null,script:"",effect:{type:e.EFFECT_TYPE_MENU.ATTR_RATE_ADD,attrKey:a.default.ATTR_KEY.ATK,addCount:1}},{id:101,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u96f7\u7535\u5251\u6c14",desc:"\u91ca\u653e\u96f7\u7535\u5251\u6c14\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:.5,scaleY:.5,pic:"ui/skill/generalInitSkill/skill_01/01",spine:"animation/skill/generalInitSkill/skill_01/skill_01",initGenPos:{x:100,y:30},script:"",effect:null},{id:102,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u5251\u6c14",desc:"\u91ca\u653e\u5251\u6c14\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-1,scaleY:1,pic:"ui/skill/generalInitSkill/skill_02/01",spine:"animation/skill/generalInitSkill/skill_02/skill_02",initGenPos:{x:10,y:40},script:"",effect:null},{id:103,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u9f99\u73e0",desc:"\u91ca\u653e\u9f99\u73e0\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-1,scaleY:1,pic:"ui/skill/generalInitSkill/skill_03/01",spine:"animation/skill/generalInitSkill/skill_03/skill_03",initGenPos:{x:50,y:50},script:"",effect:null},{id:104,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u706d\u5996\u65a9",desc:"\u91ca\u653e\u706d\u5996\u65a9\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-1.2,scaleY:1.2,pic:"ui/skill/generalInitSkill/skill_04/01",spine:"animation/skill/generalInitSkill/skill_04/skill_04",initGenPos:{x:50,y:40},script:"",effect:null},{id:105,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u5149\u7bad",desc:"\u91ca\u653e\u5149\u7bad\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-.3,scaleY:.3,pic:"ui/skill/generalInitSkill/skill_05/01",spine:"animation/skill/generalInitSkill/skill_05/skill_05",initGenPos:{x:50,y:50},script:"",effect:null},{id:106,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u65f6\u95f4\u4e4b\u529b",desc:"\u91ca\u653e\u65f6\u95f4\u4e4b\u529b\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-.5,scaleY:.5,pic:"ui/skill/generalInitSkill/skill_06/01",spine:"animation/skill/generalInitSkill/skill_06/skill_06",initGenPos:{x:50,y:40},script:"",effect:null},{id:107,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u7231\u5fc3",desc:"\u91ca\u653e\u7231\u5fc3\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-1,scaleY:1,pic:"ui/skill/generalInitSkill/skill_07/01",spine:"animation/skill/generalInitSkill/skill_07/skill_07",initGenPos:{x:30,y:25},script:"",effect:null},{id:108,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u70ae\u5f39",desc:"\u91ca\u653e\u70ae\u5f39\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-.35,scaleY:.35,pic:"ui/skill/generalInitSkill/skill_08/01",spine:"animation/skill/generalInitSkill/skill_08/skill_08",initGenPos:{x:30,y:30},script:"",effect:null},{id:109,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u80fd\u91cf\u6ce2",desc:"\u91ca\u653e\u80fd\u91cf\u6ce2\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-1,scaleY:1,pic:"ui/skill/generalInitSkill/skill_09/01",spine:"animation/skill/generalInitSkill/skill_09/skill_09",initGenPos:{x:40,y:30},script:"",effect:null},{id:110,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u5996\u706b",desc:"\u91ca\u653e\u5996\u706b\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:-.9,scaleY:.9,pic:"ui/skill/generalInitSkill/skill_10/01",spine:"animation/skill/generalInitSkill/skill_10/skill_10",initGenPos:{x:40,y:60},script:"",effect:null},{id:111,type:e.SKILL_TYPE_MENU.LINE,name:"\u96f7\u9706\u4e4b\u529b",desc:"\u91ca\u653e\u96f7\u9706\u4e4b\u529b\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:500,scaleX:-.9,scaleY:.9,pic:"ui/skill/generalInitSkill/skill_11/01",spine:"animation/skill/generalInitSkill/skill_11/skill_11",initGenPos:{x:80,y:50},script:"",effect:null},{id:112,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u5200\u6c14",desc:"\u91ca\u653e\u5200\u6c14\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:500,scaleX:.9,scaleY:.9,pic:"ui/skill/generalInitSkill/skill_12/01",spine:"animation/skill/generalInitSkill/skill_12/skill_12",initGenPos:{x:80,y:50},script:"",effect:null},{id:201,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u51b0\u6676",desc:"\u91ca\u653e\u51b0\u6676\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:.75,scaleY:.75,pic:"ui/skill/petSkill/pet_skill_01/01",spine:"animation/skill/petSkill/pet_skill_01/pet_skill_01",initGenPos:{x:30,y:50},script:"",effect:null},{id:202,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u51b0\u6676",desc:"\u91ca\u653e\u51b0\u6676\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:.75,scaleY:.75,pic:"ui/skill/petSkill/pet_skill_01/01",spine:"animation/skill/petSkill/pet_skill_01/pet_skill_01",initGenPos:{x:20,y:20},script:"",effect:null},{id:205,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u5bfc\u5f39",desc:"\u91ca\u653e\u5bfc\u5f39\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:450,scaleX:.5,scaleY:.5,pic:"ui/skill/petSkill/pet_skill_05/01",spine:"animation/skill/petSkill/pet_skill_05/pet_skill_05",initGenPos:{x:40,y:20},script:"",effect:null},{id:207,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u51b0\u7130",desc:"\u91ca\u653e\u51b0\u7130\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:500,scaleX:.65,scaleY:.65,pic:"ui/skill/petSkill/pet_skill_07/01",spine:"animation/skill/petSkill/pet_skill_07/pet_skill_07",initGenPos:{x:100,y:30},script:"",effect:null},{id:208,type:e.SKILL_TYPE_MENU.NORMAL,name:"\u96f7\u7535",desc:"\u91ca\u653e\u96f7\u7535\uff0c\u8fdc\u7a0b\u653b\u51fb\u654c\u4eba",width:20,height:20,speed:500,scaleX:.65,scaleY:.65,pic:"ui/skill/petSkill/pet_skill_08/01",spine:"animation/skill/petSkill/pet_skill_08/pet_skill_08",initGenPos:{x:100,y:30},script:"",effect:null}],t.CONFIG_MAP=new Map,n([l],t)}();i.default=o;i.GeneralSkillBasic=function(){this.id=null,this.type=null,this.name=null,this.desc=null,this.width=null,this.height=null,this.speed=null,this.scaleX=null,this.scaleY=null,this.initGenPos=null,this.pic=null,this.spine=null,this.script=null,this.effect=null},cc._RF.pop()},{"./AttrLevelConfig":"AttrLevelConfig"}],GlobalConfig:[function(t,e,i){"use strict";cc._RF.push(e,"aa20b3s/hRG1b+qo37CI7D0","GlobalConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.IS_TEST=!1,t.CLEAR_BEFORE_TIME=17061984e5,t.ATTACK_CD_TIME=30,t.ATTACK_CRIT_RATE=2,t.VIGOUR_RECORVEY_TIME=3e5,t.VIGOUR_MAX_NUM=35,t.ENTER_FIGHT_COST_VIGOUR_NUM=5,t.ATTACK_REVIVE_COUNT=3,t.ATTACK_REVIVE_TITLE="\u60a8\u5df2\u88ab\u51fb\u8d25",t.ATTACK_REVIVE_CONTENT="\u53ef\u901a\u8fc7\u4fee\u70bc\u529f\u6cd5\u63d0\u5347\u81ea\u6211",n([l],t)}());i.default=o,cc._RF.pop()},{}],GlobalCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"9b49ekIDUxGVoOdcTGWuFx5","GlobalCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../ctrl/PlayerCacheCtrl"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastGainExpTime=null,e.checkPlayerGainExpInterval=3e3,e.lastCheckPlayerGainExpTime=0,e}var i;return a(e,t),i=e,e.getInstance=function(){return this._instance||(this._instance=new i,this._instance._init()),this._instance},e.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},e.prototype._init=function(){this._initConfig(),this._initAnimation()},e.prototype._initConfig=function(){},e.prototype._initAnimation=function(){return o(this,void 0,void 0,function(){return r(this,function(){return[2]})})},e.prototype._destroy=function(){},e.prototype.start=function(){},e.prototype.update=function(){},e.prototype.checkPlayerGainExp=function(){var t=(new Date).getTime();d.default.getInstance().getPlayerGainExpTime()<t&&d.default.getInstance().addPlayerExp(1),this.lastCheckPlayerGainExpTime=t},e._instance=null,i=l([c],e)}(cc.Component));i.default=u,cc._RF.pop()},{"../ctrl/PlayerCacheCtrl":"PlayerCacheCtrl"}],IndexCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"9f38e0YsKdIZpuk2EtOcRhn","IndexCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/GlobalConfig"),r=t("../config/ItemConfig"),d=t("../manager/AudioManager"),s=t("../manager/SpriteManager"),c=t("../utils/ButtonUtil"),u=t("../utils/TxtUtil"),f=t("./PlayerCacheCtrl"),p=cc._decorator,h=p.ccclass,m=p.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.generalFunctionNode=null,e.skillFunctionNode=null,e.petFunctionNode=null,e.challengeFunctionNode=null,e.callFunctionNode=null,e.goldNumLabel=null,e.diamondNumLabel=null,e.rewardNode=null,e.itemPrefab=null,e}return a(e,t),e.prototype.start=function(){},e.prototype.toFunction=function(t,e){d.default.getInstance().playCommonBtn(),this.allFunctionHidden(),1==e?this.toGeneralFunction():2==e?this.toSkillFunction():3==e?this.toPetFunction():4==e?this.toChallengeFunction():5==e&&this.toCallFunction()},e.prototype.closeFunction=function(){this.allFunctionHidden()},e.prototype.allFunctionHidden=function(){this.generalFunctionNode.active=!1,this.skillFunctionNode.active=!1,this.petFunctionNode.active=!1,this.challengeFunctionNode.active=!1,this.callFunctionNode.active=!1},e.prototype.toGeneralFunction=function(){this.generalFunctionNode.active=!0},e.prototype.toSkillFunction=function(){this.skillFunctionNode.active=!0},e.prototype.toPetFunction=function(){this.petFunctionNode.active=!0},e.prototype.toChallengeFunction=function(){this.challengeFunctionNode.active=!0},e.prototype.toCallFunction=function(){this.callFunctionNode.active=!0},e.prototype.onEnable=function(){this.flushTopResNumLabel()},e.prototype.flushTopResNumLabel=function(){this.goldNumLabel.string=u.default.parseTxt(f.default.getInstance().getPlayerGoldNum()+""),this.diamondNumLabel.string=u.default.parseTxt(f.default.getInstance().getPlayerItemNum(Number(r.default.ITEM_CONST.DIAMOND))+"")},e.prototype.showReward=function(t,e){this.rewardNode.getChildByName("reward").getChildByName("title").getComponent(cc.Label).string=t;var i=this.rewardNode.getChildByName("reward").getChildByName("itemPageView").getChildByName("view").getChildByName("content");i.removeAllChildren();for(var n=0;n<e.length;n++){var a=e[n],l=a.itemId,o=a.itemCount,d=r.default.getConfigById(l),u=cc.instantiate(this.itemPrefab),f=u.getChildByName("pic").getComponent(cc.Sprite);s.default.getInstance().setBundleSpriteFrameByName(f,d.srcPath),u.getChildByName("itemCount").getComponent(cc.Label).string=""+o,i.addChild(u),u.active=!0}var p=this.rewardNode.getChildByName("reward").getChildByName("confirmButton").getComponent(cc.Button);c.default._setEvent(this.node,p,"IndexCtrl","confirmTip","1"),this.rewardNode.active=!0},e.prototype.confirmTip=function(t,e){null!=e&&1==Number(e)&&(this.rewardNode.active=!1)},e.prototype.testAddRes=function(t,e){if(o.default.IS_TEST){var i=e.toString().split("_");f.default.getInstance().addPlayerItem(Number(i[0]),Number(i[1])),this.flushTopResNumLabel()}},l([m(cc.Node)],e.prototype,"generalFunctionNode",void 0),l([m(cc.Node)],e.prototype,"skillFunctionNode",void 0),l([m(cc.Node)],e.prototype,"petFunctionNode",void 0),l([m(cc.Node)],e.prototype,"challengeFunctionNode",void 0),l([m(cc.Node)],e.prototype,"callFunctionNode",void 0),l([m(cc.Label)],e.prototype,"goldNumLabel",void 0),l([m(cc.Label)],e.prototype,"diamondNumLabel",void 0),l([m(cc.Node)],e.prototype,"rewardNode",void 0),l([m(cc.Prefab)],e.prototype,"itemPrefab",void 0),l([h],e)}(cc.Component);i.default=g,cc._RF.pop()},{"../config/GlobalConfig":"GlobalConfig","../config/ItemConfig":"ItemConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","../utils/TxtUtil":"TxtUtil","./PlayerCacheCtrl":"PlayerCacheCtrl"}],ItemConfig:[function(t,e,i){"use strict";cc._RF.push(e,"e438fcbcmRBkoMQ0cZiAeqI","ItemConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.ItemBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.ITEM_CONST={EXP:"1001",SKILL_EXP:"1002",GOLD:"1003",SHOU_JING:"1004",VIGOUR:"1005",DIAMOND:"1006"},t.CONFIG=[{id:1001,name:"\u89d2\u8272\u7ecf\u9a8c",desc:"    \u7528\u4e8e\u63d0\u5347\u89d2\u8272\u7b49\u7ea7\uff0c\u53ef\u901a\u8fc7\u8bd5\u70bc\u573a\u548c\u6d3b\u52a8\u83b7\u5f97\u3002",srcPath:"ui/item/item_1001",backpackShow:!0},{id:1002,name:"\u529f\u6cd5\u7ecf\u9a8c",desc:"    \u7528\u4e8e\u63d0\u5347\u529f\u6cd5\u7b49\u7ea7\uff0c\u53ef\u901a\u8fc7\u8bd5\u70bc\u573a\u83b7\u5f97\u3002",srcPath:"ui/item/item_1002",backpackShow:!0},{id:1003,name:"\u91d1\u5e01",desc:"    \u901a\u7528\u8d27\u5e01\uff0c\u7528\u4e8e\u65e5\u5e38\u7684\u5404\u79cd\u6d88\u8017\u3002",srcPath:"ui/item/item_1003",backpackShow:!0},{id:1004,name:"\u517d\u6676",desc:"    \u7528\u4e8e\u5ba0\u7269\u7684\u5404\u79cd\u6d88\u8017\u3002",srcPath:"ui/item/item_1004",backpackShow:!0},{id:1005,name:"\u4f53\u529b",desc:"    \u7528\u4e8e\u6311\u6218\u5173\u5361/\u526f\u672c/\u573a\u666f\u7684\u5404\u79cd\u6d88\u8017\u3002",srcPath:"ui/item/item_1004",backpackShow:!0},{id:1006,name:"\u94bb\u77f3",desc:"    \u7528\u4e8e\u6e38\u620f\u4e2d\u7684\u7279\u6b8a\u6d88\u8017\uff0c\u53ef\u901a\u8fc7\u6d3b\u52a8\u83b7\u5f97\u3002",srcPath:"ui/item/item_1006",backpackShow:!0}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.ItemBasic=function(){this.id=null,this.name=null,this.desc=null,this.srcPath=null,this.backpackShow=null},cc._RF.pop()},{}],ItemInfo:[function(t,e,i){"use strict";cc._RF.push(e,"2de7eTfpXJBBbRUk7LfUsea","ItemInfo"),Object.defineProperty(i,"__esModule",{value:!0}),i.ItemInfo=void 0;var n=cc._decorator,a=(n.ccclass,n.property,function(){this.itemId=null,this.itemCount=null});i.ItemInfo=a,cc._RF.pop()},{}],ItemPicCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"95cfdqewkdI4pArPhQGlRWf","ItemPicCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../manager/SpriteManager"),s=t("../../utils/PositionUtil"),c=t("../MainCtrl"),u=cc._decorator,f=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mainNode=null,e._itemConfig=null,e._itemCount=0,e._targetNode=null,e._initPosX=null,e._initPosY=null,e._speed=550,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e}return a(e,t),e.prototype.start=function(){},e.prototype.update=function(t){if(this._status==this.STATUS_MENU.NORMAL){var e=this.node.parent.convertToNodeSpaceAR(this._targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO));if(s.default.calculationDis(this.node.position,e)>this._targetNode.width/2)return void this._move(t,e);this._addPlayerItem()}},e.prototype._move=function(t,e){var i=e.subtract(this.node.position).normalize();this.node.x+=i.x*this._speed*t,this.node.y+=i.y*this._speed*t},e.prototype._addPlayerItem=function(){this.node.active=!1,this._status=this.STATUS_MENU.FINISH;var t=this._mainNode.getComponent(c.default);t?t.itemPicNodeRecovery(this.node):this.node.destroy()},e.prototype.init=function(t,e,i,n,a,l){this._mainNode=t,this._itemConfig=e,this._targetNode=l,this._initPosX=n,this._initPosY=a,this._itemCount=i,this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(){return this._itemConfig.srcPath&&(t=this.node.getComponent(cc.Sprite),d.default.getInstance().setBundleSpriteFrameByName(t,this._itemConfig.srcPath)),this.node.setPosition(cc.v2(this._initPosX,this._initPosY)),this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]})})},l([f],e)}(cc.Component));i.default=p,cc._RF.pop()},{"../../manager/SpriteManager":"SpriteManager","../../utils/PositionUtil":"PositionUtil","../MainCtrl":"MainCtrl"}],JoystickCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"a3959vQFKxHW6nRFhnHMU/y","JoystickCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=o.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigBody=null,e.smallBody=null,e.maxCircleRadius=0,e.minCircleRadius=0,e.dir=cc.v2(0,0),e._bigBodyInitPos=cc.v2(0,0),e._touchID=0,e}return a(e,t),e.prototype.onLoad=function(){this._bigBodyInitPos=cc.v2(this.bigBody.position.x,this.bigBody.position.y)},e.prototype.onDestroy=function(){},e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.on_stick_move,this),this.node.on(cc.Node.EventType.TOUCH_START,this.on_stick_start,this),this.node.on(cc.Node.EventType.TOUCH_END,this.on_stick_end,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.on_stick_end,this)},e.prototype.distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},e.prototype.distance1=function(t,e){var i=cc.v2(t.x-e.x,t.y-e.y);return Math.sqrt(i.x*i.x+i.y*i.y)},e.prototype.on_stick_start=function(t){this.bigBody.active||(this.bigBody.active=!0);var e=this.node.convertToNodeSpaceAR(t.getLocation());this.bigBody.setPosition(e),this.smallBody.setPosition(0,0),this._touchID=t.getID()},e.prototype.on_stick_move=function(t){if(this._touchID==t.getID()){var e=t.getLocation(),i=t.getStartLocation(),n=cc.Vec2.distance(e,i),a=Math.atan2(e.y-i.y,e.x-i.x);if(n<=this.minCircleRadius)this.smallBody.setPosition(this._bigBodyInitPos);else if(this.dir.x=(e.x-i.x)/n,this.dir.y=(e.y-i.y)/n,n<=this.maxCircleRadius){var l=this.bigBody.convertToNodeSpaceAR(e);this.smallBody.setPosition(l)}else n<=this.minCircleRadius||(this.smallBody.x=Math.cos(a)*this.maxCircleRadius,this.smallBody.y=Math.sin(a)*this.maxCircleRadius)}},e.prototype.on_stick_end=function(t){this._touchID==t.getID()&&(this.bigBody.active&&(this.bigBody.active=!1),this.bigBody.setPosition(this._bigBodyInitPos),this.smallBody.setPosition(0,0),this.dir=cc.v2(0,0))},l([d(cc.Node)],e.prototype,"bigBody",void 0),l([d(cc.Node)],e.prototype,"smallBody",void 0),l([d({type:cc.Integer,tooltip:"\u5c0f\u5706\u6700\u5927\u79fb\u52a8\u534a\u5f84"})],e.prototype,"maxCircleRadius",void 0),l([d({type:cc.Integer,tooltip:"\u5c0f\u5706\u6700\u5c0f\u79fb\u52a8\u534a\u5f84"})],e.prototype,"minCircleRadius",void 0),l([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}],LabelCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"74a547hH6pAgbfg0Ji/llWa","LabelCtrl");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},l=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(){function t(){this.oneTimeNum=50,this.needGenLabel=[]}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._init=function(){},t.prototype._destroy=function(){},t.prototype.getGenLabel=function(){var t=[],e=this.oneTimeNum;if(this.needGenLabel.length<e&&(e=this.needGenLabel.length),0==e)return t;for(var i=0;i<e;i++)t.push(this.needGenLabel.shift());return t},t.prototype.add=function(t,e,i){return a(this,void 0,void 0,function(){var n;return l(this,function(){return n={pos:t,content:e,color:i},this.needGenLabel.push(n),[2]})})},t._instance=null,e=n([r],t)}());i.default=d,cc._RF.pop()},{}],LoadingCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"4842bAIZIdA4Zqd+Y1Ylssj","LoadingCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../config/ActivityConfig"),s=t("../config/AttrLevelConfig"),c=t("../config/BossConfig"),u=t("../config/BossSkillConfig"),f=t("../config/CallConfig"),p=t("../config/CdkConfig"),h=t("../config/ChallengeConfig"),m=t("../config/ChapterConfig"),g=t("../config/FightConfig"),T=t("../config/GeneralConfig"),y=t("../config/GeneralSkillConfig"),_=t("../config/ItemConfig"),A=t("../config/MonsterConfig"),C=t("../config/PetConfig"),R=t("../config/PlayerFightSkillConfig"),I=t("../config/PlayerLevelConfig"),v=t("../config/SceneKey"),k=t("../config/SkillConfig"),K=t("../config/TaskConfig"),E=t("../manager/AudioManager"),N=t("../utils/SpineUtil"),S=t("../utils/WxSdkUtil"),P=t("../utils/DateUtil"),b=t("./PlayerCacheCtrl"),B=cc._decorator,L=B.ccclass,O=B.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingProgress=null,e.enterGameTip=null,e._loadingTime=1e4,e._time=0,e._enterGame=!1,e._loadingSuccess=!1,e}return a(e,t),e.prototype.onLoad=function(){S.default.getInstance().showShareMenu(),S.default.getInstance().createGameClubButton(),P.default.currentTime(),this._init()},e.prototype.update=function(t){this._enterGame&&(this._time+=1e3*t,this._flushProgress())},e.prototype.enterGame=function(){this._enterGame||(this.enterGameTip.active=!1,this.loadingProgress.node.active=!0,this._enterGame=!0,E.default.getInstance().playLoading(),this._loadConfig(),this._loadBundle())},e.prototype._flushProgress=function(){var t=Math.ceil(this._time/this._loadingTime*100)/100;t!=this.loadingProgress.progress&&(this._loadingSuccess||t>=1||(this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=t,this.loadingProgress.node.getChildByName("num").getComponent(cc.Label).string=Math.floor(100*t)+"%",this.loadingProgress.node.getChildByName("tip").getComponent(cc.Label).string="\u6b63\u5728\u52a0\u8f7d\u8d44\u6e90\u5305..."))},e.prototype._init=function(){this.enterGameTip.active=!0,this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=0,this.loadingProgress.node.active=!1},e.prototype._loadConfig=function(){f.default.loadConfigMap(),h.default.loadConfigMap(),s.default.loadConfigMap(),K.default.loadConfigMap(),y.default.loadConfigMap(),T.default.loadConfigMap(),m.default.loadConfigMap(),A.default.loadConfigMap(),k.default.loadConfigMap(),C.default.loadConfigMap(),_.default.loadConfigMap(),I.default.loadConfigMap(),g.default.loadConfigMap(),u.default.loadConfigMap(),c.default.loadConfigMap(),R.default.loadConfigMap(),d.default.loadConfigMap(),T.default.loadConfigMap(),p.default.loadConfigMap(),b.default.getInstance()},e.prototype._loadBundle=function(){var t=this;cc.assetManager.loadBundle("fenbao",function(){return o(t,void 0,void 0,function(){return r(this,function(){return cc.log("\u5206\u5305\u52a0\u8f7d\u5b8c\u6210..."),this._initAnimation(),cc.log("\u89d2\u8272\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210..."),E.default.getInstance().initAllAudioClip(),this._loadingSuccess=!0,this.loadingProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=1,this.loadingProgress.node.getChildByName("num").getComponent(cc.Label).string="100%",this.loadingProgress.node.getChildByName("tip").getComponent(cc.Label).string="\u52a0\u8f7d\u5b8c\u6210",cc.director.loadScene(v.default.INDEX),[2]})})})},e.prototype._initAnimation=function(){return o(this,void 0,void 0,function(){var t;return r(this,function(){for(t=0;t<T.default.CONFIG.length;t++)T.default.CONFIG[t].spine&&N.default.getInstance().loadBundleSkeletonData(T.default.CONFIG[t].spine);return[2]})})},l([O({type:cc.ProgressBar,tooltip:"loading\u8fdb\u5ea6\u6761"})],e.prototype,"loadingProgress",void 0),l([O({type:cc.Node,tooltip:"\u70b9\u51fb\u8fdb\u5165\u6e38\u620f"})],e.prototype,"enterGameTip",void 0),l([L],e)}(cc.Component);i.default=w,cc._RF.pop()},{"../config/ActivityConfig":"ActivityConfig","../config/AttrLevelConfig":"AttrLevelConfig","../config/BossConfig":"BossConfig","../config/BossSkillConfig":"BossSkillConfig","../config/CallConfig":"CallConfig","../config/CdkConfig":"CdkConfig","../config/ChallengeConfig":"ChallengeConfig","../config/ChapterConfig":"ChapterConfig","../config/FightConfig":"FightConfig","../config/GeneralConfig":"GeneralConfig","../config/GeneralSkillConfig":"GeneralSkillConfig","../config/ItemConfig":"ItemConfig","../config/MonsterConfig":"MonsterConfig","../config/PetConfig":"PetConfig","../config/PlayerFightSkillConfig":"PlayerFightSkillConfig","../config/PlayerLevelConfig":"PlayerLevelConfig","../config/SceneKey":"SceneKey","../config/SkillConfig":"SkillConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../utils/DateUtil":"DateUtil","../utils/SpineUtil":"SpineUtil","../utils/WxSdkUtil":"WxSdkUtil","./PlayerCacheCtrl":"PlayerCacheCtrl"}],MainCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"b8fa8+efu1MBL3fMTQGhvOu","MainCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("./GlobalCtrl"),s=t("./PlayerCacheCtrl"),c=t("../config/AttrLevelConfig"),u=t("../config/ItemConfig"),f=t("./MonsterCtrl"),p=t("../config/GeneralConfig"),h=t("./TipCtrl"),m=t("./PlayerAttrCtrl"),g=t("../config/ChapterConfig"),T=t("../config/MonsterConfig"),y=t("../config/GeneralSkillConfig"),_=t("./generalSkill/GeneralInitSkill"),A=t("./res/ItemPicCtrl"),C=t("./AttrLevelCtrl"),R=t("../utils/SpineUtil"),I=t("../config/ResPathKey"),v=t("../config/SkillConfig"),k=t("./generalSkill/MainSkillCtrl"),K=t("../manager/SpriteManager"),E=t("../manager/UnlockManager"),N=t("../config/PetConfig"),S=t("./pet/MainPetCtrl"),P=t("../manager/AudioManager"),b=t("../utils/TxtUtil"),B=t("../utils/WxSdkUtil"),L=t("./AdBoxCtrl"),O=t("../utils/DateUtil"),w=t("../config/ChallengeConfig"),Y=t("./ChallengeCtrl"),M=t("../config/TaskConfig"),U=t("../config/CdkConfig"),F=cc._decorator,D=F.ccclass,G=F.property,x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attrContentNode=null,e.attrInfoPrefab=null,e.chapterName=null,e.qiliu=null,e.bossEnd=null,e.bossComing=null,e.bossComingLeftNode=null,e.bossComingRightNode=null,e.fightBg1=null,e.fightBg2=null,e.chapterProgress=null,e.battlegroundNode=null,e.battlegroundLeftNode=null,e.battlegroundRightNode=null,e.monsterPrefab=null,e.generalInitSkillPrefab=null,e.generalNode=null,e.levelUpSpineNode=null,e.goldResNode=null,e.diamondResNode=null,e.goldResNumLabel=null,e.diamondResNumLabel=null,e.itemPicPrefab=null,e.totalPower=null,e.mainSkillContentNode=null,e.mainSkillPrefab=null,e.mainPetContentNode=null,e.mainPetPrefab=null,e.autoSkillButton=null,e.adBoxNode=null,e.adBoxInfoNode=null,e.challengeRewardNode=null,e.settingNode=null,e.generalBloodProgressBarSprite=null,e._currTime=0,e._lastGenMonsterTime=0,e._chapterConfig=null,e._playerChapterInfo=null,e._isChallenge=!1,e._challengeReward=null,e._challengeMonsterBatch=null,e._challengeConfig=null,e._challengeLevelConfig=null,e._needGenMonsterList=[],e._generalSpSkeleton=null,e._generalInitSkill=null,e._monsterList=[],e._generalConfig=null,e._monsterGenId=1,e._attrLevelNodeList=[],e._itemPicNodeList=[],e._monsterNodeList=[],e._bossComingGeneralSpine=null,e._bossComingBossSpine=null,e._mainSkillInfoList=[],e._mainPetInfoList=[],e._generalInfo={currHp:0,genInitSkillIntervalTime:1e3,lastGenInitSkillTime:0,lastHpRestoreTime:0},e.generalIsAlive=!0,e.FIGHT_SETTING={START_FIGHT_TIME:2e3,GEN_MONSTER_INTERVAL_TIME:250},e.GENERAL_STATUS={INIT:0,NORAML:1},e.FIGHT_STATUS={INIT:0,READY:1,NORAML:2,FINISH:3,BG_RUN:4,WATING_RESET:5},e.BG_RUN_TIME=2,e.CHALLENGE_BG_RUN_TIME=.75,e._startBgRunTime=0,e.canExecSkill=!1,e._showLevelUpNodeTime=0,e._lastCheckAdBoxTime=0,e._fightInfo={generalId:null,generalStatus:e.GENERAL_STATUS.INIT,status:e.FIGHT_STATUS.INIT,isBoss:!1},e._itemPicPosList=[[0,0],[-25,-25],[0,25],[25,0]],e._chapterProgressBarFillRange=[0,.33,.575,.825,1],e._chapterProgressPointX=[-85,-34,15,63,110],e}var i;return a(e,t),i=e,e.prototype.onLoad=function(){d.default.getInstance(),O.default.currentTime()},e.prototype.start=function(){},e.prototype.onEnable=function(){this.initAudio(),this.init()},e.prototype.init=function(){this.initNode(),this.initSpine(),this._loadMainSkillList(),this._loadMainPetList(),this.initAttrList(),this.fightOverEvent(!0)},e.prototype.initNode=function(){this.generalBloodProgressBarSprite=this.generalNode.getChildByName("blood").getChildByName("bar").getComponent(cc.Sprite)},e.prototype.initSpine=function(){return o(this,void 0,void 0,function(){var t,e,i,n,a,l;return r(this,function(o){switch(o.label){case 0:return t=this.qiliu.getComponent(sp.Skeleton),e=t,[4,R.default.getInstance().getBundleSkeletonData(I.default.SPINE_QILIU)];case 1:return e.skeletonData=o.sent(),i=this.bossComing.getComponent(sp.Skeleton),n=i,[4,R.default.getInstance().getBundleSkeletonData(I.default.SPINE_BOSS_COMING)];case 2:return n.skeletonData=o.sent(),a=i,[4,R.default.getInstance().getBundleSkeletonData(I.default.SPINE_BOSS_COMING)];case 3:return a.skeletonData=o.sent(),l=t,[4,R.default.getInstance().getBundleSkeletonData(I.default.SPINE_QILIU)];case 4:return l.skeletonData=o.sent(),[2]}})})},e.prototype.initAttrList=function(){for(var t in this.attrContentNode.removeAllChildren(),c.default.CONFIG){var e=c.default.getConfigById(t);e.isShow&&this.initAttr(e)}},e.prototype.initAttr=function(t){var e=cc.instantiate(this.attrInfoPrefab);e.getComponent(C.default).init(this.node,t),this.attrContentNode.addChild(e,1,t.attrKey),this._attrLevelNodeList.push(e)},e.prototype.attrLevelUpEvent=function(){this._showLevelUpNodeTime=this._currTime+500,this.loadGeneralAttr(),this.flushInfo()},e.prototype.update=function(t){if(this._currTime+=1e3*t,this._showLevelUpNodeTime>this._currTime?this.levelUpSpineNode.active||(this.levelUpSpineNode.active=!0):this.levelUpSpineNode.active&&(this.levelUpSpineNode.active=!1),this.checkAdBox(),this._fightInfo.generalStatus==this.GENERAL_STATUS.NORAML){if(!(this._currTime<this.FIGHT_SETTING.START_FIGHT_TIME)){if(this.FIGHT_STATUS.NORAML==this._fightInfo.status){if(!this.generalIsAlive)return;this._genMonster(),this._checkMonsterAllDie(),this._checkGeneralAtk(),this._checkGeneralHpRestore()}this.FIGHT_STATUS.FINISH==this._fightInfo.status&&(this._isChallenge?this.challengeFightFinish():this.fightFinish()),this.FIGHT_STATUS.BG_RUN==this._fightInfo.status&&this._bgRun(t)}}else this.generalMoveToFightPos()},e.prototype.checkAdBox=function(){if(!(this._lastCheckAdBoxTime+1e3>this._currTime)){var t=(new Date).getTime(),e=s.default.getInstance().getPlayerAdBoxInfo(),i=g.default.AD_BOX_CONFIG;e.lastShowTime+i.intervalTime>=t||e.receiveCount>=i.dailyCount||(this.adBoxNode.getComponent(L.default).startFly(),e.lastShowTime=t,s.default.getInstance().setPlayerAdBoxInfo(e))}},e.prototype.showAdBoxInfo=function(){P.default.getInstance().playCommonBtn(),this.adBoxNode.active=!1;var t=this.adBoxInfoNode.getChildByName("view"),e=g.default.AD_BOX_CONFIG,i=u.default.getConfigById(e.itemId);K.default.getInstance().setBundleSpriteFrameByName(t.getChildByName("reward").getChildByName("pic").getComponent(cc.Sprite),i.srcPath);var n=g.default.getAdBoxReward(s.default.getInstance().getPlayerChapterInfo().chapterId);t.getChildByName("reward").getChildByName("itemCount").getComponent(cc.Label).string=n.itemCount+"",this.adBoxInfoNode.active=!0},e.prototype.closeAdBoxInfo=function(){P.default.getInstance().playCommonBtn(),this.adBoxInfoNode.active=!1},e.prototype.receiveAdBox=function(){var t=this;B.default.getInstance().ShowRewardedVideoAd(function(){var e=g.default.getAdBoxReward(s.default.getInstance().getPlayerChapterInfo().chapterId);P.default.getInstance().playGainReward(),s.default.getInstance().addPlayerItemList([e]);var i=s.default.getInstance().getPlayerAdBoxInfo();i.lastReceiveTime<O.default.getTodayStartTime()?i.receiveCount=1:i.receiveCount+=1,i.lastReceiveTime=(new Date).getTime(),s.default.getInstance().setPlayerAdBoxInfo(i),t.flushInfo(),t.closeAdBoxInfo(),s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.AD,1)})},e.prototype.resetFight=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=null),this._fightInfo.status=this.FIGHT_STATUS.INIT,this._generalInfo.lastGenInitSkillTime=0,this._monsterGenId=1,this._monsterList=[],this._needGenMonsterList=[],this.battlegroundLeftNode.removeAllChildren(),this.battlegroundRightNode.removeAllChildren(),this._loadChapter(e),this._loadMonster(),t&&this._loadPlayer(),this._loadChapterProgress(!1),this.bossComing.active&&(this.bossComing.active=!1),this._fightInfo.status=this.FIGHT_STATUS.NORAML,this.canExecSkill=!0},e.prototype._loadChapter=function(t){var e,i=s.default.getInstance().getPlayerChapterInfo();e=t?g.default.getConfigById(t):g.default.getConfigById(i.chapterId),this._chapterConfig=e,this._playerChapterInfo=i,this._isChallenge=null!=t;var n=this._chapterConfig.name;this._isChallenge&&(n=this._challengeMonsterBatch+1+"/"+this._chapterConfig.monsterBatch.length),this.chapterName.string=n},e.prototype._loadMonster=function(){var t=null;this._isChallenge?t=this._chapterConfig.monsterBatch[this._challengeMonsterBatch]:this._playerChapterInfo.batch<this._chapterConfig.monsterBatch.length?(this._fightInfo.isBoss=!1,t=this._chapterConfig.monsterBatch[this._playerChapterInfo.batch]):(this._fightInfo.isBoss=!0,t=this._chapterConfig.boss);for(var e=0;e<t.length;e++){var i=t[e],n=T.default.getConfigById(i);this._needGenMonsterList.push(n)}},e.prototype._loadChapterProgress=function(t){this._isChallenge?this.chapterProgress.node.active=!1:t?this.chapterProgress.node.active=!1:(this.chapterProgress.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=this._chapterProgressBarFillRange[this._playerChapterInfo.batch],this.chapterProgress.node.getChildByName("point").x=this._chapterProgressPointX[this._playerChapterInfo.batch],this.chapterProgress.node.active=!0)},e.prototype._loadPlayer=function(){this._fightInfo.generalId=s.default.getInstance().getPlayerUseGeneral(),this._loadGeneral()},e.prototype._genMonster=function(){if(!(this._lastGenMonsterTime+this.FIGHT_SETTING.GEN_MONSTER_INTERVAL_TIME>=this._currTime||this._needGenMonsterList.length<=0)){var t=this._needGenMonsterList.pop(),e=cc.instantiate(this.monsterPrefab);this.battlegroundRightNode.addChild(e),e.getComponent(f.default).init(t,this._fightInfo.isBoss?cc.v2(0,0):T.default.getRandomPosition(),this.generalNode,this._monsterGenId,this._chapterConfig.monsterBaseAttrAddRate,this._chapterConfig.monsterSpecialAttrAddRate),this._monsterList.push({monsterId:this._monsterGenId,node:e}),this._monsterGenId+=1,this._lastGenMonsterTime=this._currTime}},e.prototype._checkMonsterAllDie=function(){this._needGenMonsterList.length+this._monsterList.length==0&&(this._fightInfo.status=this.FIGHT_STATUS.FINISH)},e.prototype._checkGeneralHpRestore=function(){if(!(this._generalInfo.lastHpRestoreTime+1e3>this._currTime)){var t=this._generalConfig.hpRestore;this._generalInfo.currHp+t>this._generalConfig.hp&&(t=this._generalConfig.hp-this._generalInfo.currHp),t>0&&(this._generalInfo.currHp+=t,this._resetGeneralBlood()),this._generalInfo.lastHpRestoreTime=this._currTime}},e.prototype._checkGeneralAtk=function(){this._generalInfo.lastGenInitSkillTime+this._generalInfo.genInitSkillIntervalTime>this._currTime||0!=this._monsterList.length&&(this._playerGeneralAnimation(null,p.default.SPINE_ANIMATION_NAME.ATK,!1,!1),this._generalInfo.lastGenInitSkillTime=this._currTime)},e.prototype._genGeneralInitSkill=function(){if(0!=this._monsterList.length){P.default.getInstance().playGeneralAtk();var t=this._monsterList[0].node,e=cc.instantiate(this.generalInitSkillPrefab);e.addComponent(_.default).init(this._generalInitSkill,t,this._generalConfig,this.node.getComponent(i)),this.battlegroundLeftNode.addChild(e)}},e.prototype.monsterDie=function(t){if(0!=this._monsterList.length)for(var e=0;e<this._monsterList.length;e++)if(this._monsterList[e].monsterId==t){var i=this._monsterList[e].node,n=this.node.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.Vec2.ZERO));return this._calcReward(n.x,n.y),this._monsterList.splice(e,1),void s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.KILL,1)}},e.prototype._calcReward=function(t,e){return o(this,void 0,void 0,function(){var i,n,a,l;return r(this,function(){return this._isChallenge?[2]:(i=this._chapterConfig.reward)&&0!=i.length?(n=i[0],a=n.itemCount,this._fightInfo.isBoss&&(a*=4),(l=u.default.getConfigById(n.itemId))&&(s.default.getInstance().addPlayerItem(n.itemId,a),this.showReward(l,a,t,e,1)),[2]):[2]})})},e.prototype.showReward=function(t,e,i,n,a){var l=this;this.flushInfo();for(var o=function(o){r.scheduleOnce(function(){var r=l._itemPicNodeList.pop();r||(r=cc.instantiate(l.itemPicPrefab),l.node.addChild(r));var d=i+l._itemPicPosList[o][0],s=n+l._itemPicPosList[o][1],c=1==a?l.goldResNode:l.diamondResNode;r.getComponent(A.default).init(l.node,t,e,d,s,c)},.2)},r=this,d=0;d<this._itemPicPosList.length;d++)o(d)},e.prototype.flushInfo=function(){this.goldResNumLabel.string=b.default.parseTxt(s.default.getInstance().getPlayerGoldNum()+""),this.diamondResNumLabel.string=b.default.parseTxt(s.default.getInstance().getPlayerDiamondNum()+"")},e.prototype.itemPicNodeRecovery=function(t){this._itemPicNodeList.push(t)},e.prototype.challengeFightFinish=function(){if(this._fightInfo.status=this.FIGHT_STATUS.WATING_RESET,this.generalIsAlive)if(this._challengeMonsterBatch==this._chapterConfig.monsterBatch.length-1){h.default.getInstance().tipWithColor(this.node,"\u6311\u6218\u6210\u529f","#ffffff"),P.default.getInstance().playGainReward(),s.default.getInstance().addPlayerItem(this._challengeReward.itemId,this._challengeReward.itemCount),this.calcChallengeCount(),this.showCallengeRewardNode(),this.flushInfo();var t=s.default.getInstance().getPlayerChallengeInfo(this._challengeConfig.id);this._challengeLevelConfig.level==t.level&&t.level<this._challengeConfig.levelConfig.length&&(t.level+=1,s.default.getInstance().setPlayerChallengeInfo(this._challengeConfig.id,t)),this.notifyChallengeOver(),this.fightOverEvent(!0,null)}else this._fightInfo.status=this.FIGHT_STATUS.BG_RUN,this._startBgRunTime=this._currTime,this.canExecSkill=!1,this._playerGeneralAnimation(null,p.default.SPINE_ANIMATION_NAME.RUN,!0,!1),this.battlegroundRightNode.removeAllChildren(),R.default.getInstance().playSpineAni(this.qiliu.getComponent(sp.Skeleton),null,"start",!0,!1),this._challengeMonsterBatch+=1;else h.default.getInstance().tipWithColor(this.node,"\u6311\u6218\u5931\u8d25","#ffffff"),this.notifyChallengeOver(),this.fightOverEvent(!0,null)},e.prototype.calcChallengeCount=function(){this._challengeConfig.id==w.default.CALL_FUNCTION.GOLD?s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.GOLD_CHALLENGE,1):this._challengeConfig.id==w.default.CALL_FUNCTION.DIAMOND?s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.DIAMOND_CHALLENGE,1):this._challengeConfig.id==w.default.CALL_FUNCTION.GENERAL_EXP&&s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.GENERAL_EXP_CHALLENGE,1)},e.prototype.notifyChallengeOver=function(){this.node.parent.getChildByName("middle").getChildByName("challenge").getComponent(Y.default).challengeOver()},e.prototype.fightFinish=function(){var t=this;if(this._fightInfo.status=this.FIGHT_STATUS.WATING_RESET,this.generalIsAlive){var e=g.default.hasNextChapter(this._playerChapterInfo.chapterId);if(this._fightInfo.isBoss){if(e&&this._fightInfo.isBoss)return h.default.getInstance().tipWithColor(this.battlegroundNode,"\u80dc\u5229","#ffffff"),this.clearAllSkillCd(),this._playerChapterInfo.chapterId=this._playerChapterInfo.chapterId+1,this._playerChapterInfo.batch=0,s.default.getInstance().editPlayerChapterInfo(this._playerChapterInfo),this.fightOverEvent(!0,null),void s.default.getInstance().calcPlayerDailyInfo(M.default.DAILY_TASK_CONDITION_TYPE.CHAPTER,1)}else this._playerChapterInfo.batch=this._playerChapterInfo.batch+1,s.default.getInstance().editPlayerChapterInfo(this._playerChapterInfo);if(this._fightInfo.status=this.FIGHT_STATUS.BG_RUN,this._startBgRunTime=this._currTime,this.canExecSkill=!1,this._playerGeneralAnimation(null,p.default.SPINE_ANIMATION_NAME.RUN,!0,!1),this.battlegroundRightNode.removeAllChildren(),R.default.getInstance().playSpineAni(this.qiliu.getComponent(sp.Skeleton),null,"start",!0,!1),this._playerChapterInfo.batch==this._chapterConfig.monsterBatch.length){this.bossComing.active=!0,this.bossComing.getComponent(sp.Skeleton),this.clearAllSkillCd(),P.default.getInstance().playBossComming();var i=this.bossComingLeftNode.getComponent(sp.Skeleton);i.skeletonData=this._bossComingGeneralSpine,this.bossComingLeftNode.y=-this.bossComingLeftNode.height/4,R.default.getInstance().playSpineAni(i,null,p.default.SPINE_ANIMATION_NAME.RUN,!0,!1);var n=this.bossComingRightNode.getComponent(sp.Skeleton);n.skeletonData=this._bossComingBossSpine,this.bossComingRightNode.y=-this.bossComingRightNode.height/4,R.default.getInstance().playSpineAni(n,null,p.default.SPINE_ANIMATION_NAME.RUN,!0,!1),R.default.getInstance().playSpineAni(this.bossComing.getComponent(sp.Skeleton),function(){t.bossComing.active&&(t.bossComing.active=!1)},"start",!1,!1)}this._checkUnlock()}else this._fightInfo.status=this.FIGHT_STATUS.WATING_RESET,this._fightInfo.isBoss?this._playerChapterInfo.batch-=1:(this._playerChapterInfo.chapterId=this._playerChapterInfo.chapterId-1==0?1:this._playerChapterInfo.chapterId-1,this._playerChapterInfo.batch=0),this.fightOverEvent(!0,null)},e.prototype.fightOverEvent=function(t,e){var i=this;void 0===e&&(e=null),this.bossEnd.active=!0,R.default.getInstance().playSpineAni(this.bossEnd.getComponent(sp.Skeleton),function(){i._fightInfo.generalStatus=i.GENERAL_STATUS.INIT,i.generalNode.setPosition(cc.v2(-500,0)),i.bossEnd.active=!1,i.resetFight(t,e)},"start",!1,!1)},e.prototype._bgRun=function(t){var e=this._isChallenge?this.CHALLENGE_BG_RUN_TIME:this.BG_RUN_TIME;if(this._currTime-this._startBgRunTime>=1e3*e){this.qiliu.getComponent(sp.Skeleton).animation=null;var i=!0;(this._isChallenge||0!=this._playerChapterInfo.batch&&this._playerChapterInfo.batch!=this._chapterConfig.monsterBatch.length)&&(i=!1);var n=this._isChallenge?this._chapterConfig.id:null;this.resetFight(i,n)}this.fightBg1.x<=-this.fightBg1.width&&(this.fightBg1.x=0),this.fightBg2.x<=0&&(this.fightBg2.x=this.fightBg2.width),this.fightBg1.x-=250*t,this.fightBg2.x-=250*t},e.prototype._checkUnlock=function(){this._checkSkillEquipPosUnlock(),this._checkPetEquipPosUnlock()},e.prototype._checkSkillEquipPosUnlock=function(){var t=s.default.getInstance().getPlayerSkillEquipInfo();for(var e in t){var i=t[e],n=Number(e);if(i.lockStatus==v.default.EQUIP_POS_STATUS.LOCK){var a=v.default.getEquipPosUnlockCondition(n);E.default.getInstance().unlock(a.type,a.content)&&(i.lockStatus=v.default.EQUIP_POS_STATUS.UNLOCK,s.default.getInstance().editPlayerSkillEquipInfo(n,i))}}},e.prototype._checkPetEquipPosUnlock=function(){var t=s.default.getInstance().getPlayerPetEquipInfo();for(var e in t){var i=t[e],n=Number(e);if(i.lockStatus==N.default.EQUIP_POS_STATUS.LOCK){var a=N.default.getEquipPosUnlockCondition(n);E.default.getInstance().unlock(a.type,a.content)&&(i.lockStatus=N.default.EQUIP_POS_STATUS.UNLOCK,s.default.getInstance().editPlayerPetEquipInfo(n,i))}}},e.prototype._loadGeneral=function(){return o(this,void 0,void 0,function(){var t,e,i,n,a=this;return r(this,function(l){switch(l.label){case 0:return t=p.default.getConfigById(this._fightInfo.generalId),e={shortRange:!0,atkRange:10,spine:t.spine,atkFrameTime:t.atkFrameTime},this._generalConfig=e,this.loadGeneralAttr(),this._generalInfo.currHp=this._generalConfig.hp,this.generalIsAlive=!0,this._resetGeneralBlood(),this._generalSpSkeleton=this.generalNode.getChildByName("general").getComponent(sp.Skeleton),i=this._generalSpSkeleton,[4,R.default.getInstance().getBundleSkeletonData(this._generalConfig.spine)];case 1:return i.skeletonData=l.sent(),this._playerGeneralAnimation(null,p.default.SPINE_ANIMATION_NAME.RUN,!0,!1),this._generalSpSkeleton.setEventListener(function(t,e){switch(e.data.name){case"hit1":a._genGeneralInitSkill()}}),this.generalNode.getChildByName("blood").active=!0,this.generalNode.getChildByName("general").scaleX=t.mainScale.x,this.generalNode.getChildByName("general").scaleY=t.mainScale.y,this.generalNode.active=!0,this._loadGeneralSkill(t.skill.initSkill),this._bossComingGeneralSpine=this._generalSpSkeleton.skeletonData,n=this,[4,R.default.getInstance().getBundleSkeletonData(T.default.getConfigById(this._chapterConfig.boss[0]).spine)];case 2:return n._bossComingBossSpine=l.sent(),[2]}})})},e.prototype._loadMainSkillList=function(){this.mainSkillContentNode.removeAllChildren();var t=s.default.getInstance().getPlayerSkillEquipInfo();for(var e in t){var i=t[e];this._loadMainSkill(i)}this._updateAutoSkill()},e.prototype.clearAllSkillCd=function(){if(0!=this._mainSkillInfoList.length)for(var t=0;t<this._mainSkillInfoList.length;t++)this._mainSkillInfoList[t].node.getComponent(k.default).clearCdTime()},e.prototype._loadMainPetList=function(){this.mainPetContentNode.removeAllChildren();var t=s.default.getInstance().getPlayerPetEquipInfo();for(var e in t){var i=t[e];this._loadMainPet(i)}},e.prototype.switchAutoSkill=function(){P.default.getInstance().playCommonBtn();var t=s.default.getInstance().getAutoSkill();s.default.getInstance().setAutoSkill(!t),this._updateAutoSkill()},e.prototype._updateAutoSkill=function(){var t=s.default.getInstance().getAutoSkill(),e=I.default.AUTO_SKILL_DISABLED;t&&(e=I.default.AUTO_SKILL_ENABLED),K.default.getInstance().setBundleSpriteFrameByName(this.autoSkillButton.node.getChildByName("Background").getComponent(cc.Sprite),e)},e.prototype._loadMainSkill=function(t){var e=cc.instantiate(this.mainSkillPrefab),i={pos:t.pos,node:e};this._mainSkillInfoList.push(i),e.getComponent(k.default).init(t,this.node),this.mainSkillContentNode.addChild(e)},e.prototype._loadMainPet=function(t){var e=cc.instantiate(this.mainPetPrefab),i={pos:t.pos,node:e};this._mainPetInfoList.push(i),e.getComponent(S.default).init(t,this.node),this.mainPetContentNode.addChild(e)},e.prototype._playerGeneralAnimation=function(t,e,i,n){if(void 0===t&&(t=null),void 0===e&&(e=""),void 0===i&&(i=!1),void 0===n&&(n=!0),null!=this._generalSpSkeleton){var a=1;switch(e){case p.default.SPINE_ANIMATION_NAME.ATK:a=this._generalConfig.atkSpeed;break;case p.default.SPINE_ANIMATION_NAME.RUN:a=1.5}this._generalSpSkeleton.timeScale=a,R.default.getInstance().playSpineAni(this._generalSpSkeleton,t,e,i,n)}},e.prototype._loadGeneralSkill=function(t){var e=y.default.getConfigById(t);this._generalInitSkill=e},e.prototype.loadGeneralAttr=function(){null!=this._generalConfig.hp&&m.default.getInstance().hp-this._generalConfig.hp>0&&(this._generalInfo.currHp+=m.default.getInstance().hp-this._generalConfig.hp),this._generalConfig.atk=m.default.getInstance().atk,this._generalConfig.def=m.default.getInstance().def,this._generalConfig.hp=m.default.getInstance().hp,this._generalConfig.hpRestore=m.default.getInstance().hpRestore,this._generalConfig.speed=m.default.getInstance().speed,this._generalConfig.atkSpeed=m.default.getInstance().atkSpeed,this._generalConfig.crit=m.default.getInstance().crit,this._generalConfig.critDamage=m.default.getInstance().critDamage,this._generalInfo.genInitSkillIntervalTime=this._generalConfig.atkFrameTime/this._generalConfig.atkSpeed*1e3,this.resetTotalPower()},e.prototype.generalMoveToFightPos=function(){this.generalNode.x>=-180?(this._playerGeneralAnimation(null,p.default.SPINE_ANIMATION_NAME.STAND,!0,!1),this._fightInfo.generalStatus=this.GENERAL_STATUS.NORAML):this.generalNode.x+=6},e.prototype.generalBeHit=function(t,e){var i=this;void 0===e&&(e=!1),this.generalIsAlive&&(this._generalInfo.currHp=this._generalInfo.currHp-t,h.default.getInstance().damageWithColor(this.generalNode,b.default.parseTxt(String(Math.ceil(t))),e?"#ff4747":null,cc.v2(0,this.generalNode.getChildByName("general").height/2)),this._resetGeneralBlood(),this._generalInfo.currHp<=0&&(this.canExecSkill=!1,this.generalIsAlive=!1,this.generalNode.getChildByName("blood").active=!1,h.default.getInstance().tipWithColor(this.battlegroundNode,"\u60a8\u5df2\u88ab\u654c\u4eba\u6253\u8d25","#ffffff"),this.clearAllSkillCd(),this._playerGeneralAnimation(function(){i._fightInfo.status=i.FIGHT_STATUS.FINISH},p.default.SPINE_ANIMATION_NAME.DIE,!1,!1)))},e.prototype._resetGeneralBlood=function(){this.generalBloodProgressBarSprite.fillRange=this._generalInfo.currHp/this._generalConfig.hp},e.prototype.resetTotalPower=function(){this.totalPower.string=b.default.parseTxt(""+m.default.getInstance().totalPower)},e.prototype.initAudio=function(){P.default.getInstance().playBgm()},e.prototype.enterChallenge=function(t,e){void 0===e&&(e=1);var i=w.default.getConfigById(t);if(null!=i){var n=w.default.getLevelConfig(t,e);if(null!=n){var a=g.default.getConfigById(n.chapterId);null!=a&&(this._challengeConfig=i,this._challengeLevelConfig=n,this._challengeReward=n.reward,this._challengeMonsterBatch=0,h.default.getInstance().tipWithColor(this.battlegroundNode,"\u8fdb\u5165"+i.name,"#ffffff"),this.clearAllSkillCd(),this.fightOverEvent(!0,a.id))}}},e.prototype.cancelChallenge=function(){this._isChallenge&&(h.default.getInstance().tipWithColor(this.node,"\u60a8\u9003\u8dd1\u4e86!","#ffffff"),this.fightOverEvent(!0,null))},e.prototype.showCallengeRewardNode=function(){var t=u.default.getConfigById(this._challengeReward.itemId);if(null!=t){var e=this._challengeReward.itemCount,i=this.challengeRewardNode.getChildByName("view");K.default.getInstance().setBundleSpriteFrameByName(i.getChildByName("reward").getChildByName("pic").getComponent(cc.Sprite),t.srcPath),i.getChildByName("reward").getChildByName("itemCount").getComponent(cc.Label).string=b.default.parseTxt(String(e)),this.challengeRewardNode.active=!0}},e.prototype.closeCallengeRewardNode=function(){P.default.getInstance().playCommonBtn(),this.challengeRewardNode.active=!1},e.prototype.showSettingView=function(){P.default.getInstance().playCommonBtn(),this.initSettingView(),this.settingNode.active=!0},e.prototype.settingSwitch=function(t,e){var i=Number(e),n=s.default.getInstance().getPlayerSettingInfo();1==i?(n.bgm=!n.bgm,n.bgm?P.default.getInstance().playBgm():P.default.getInstance().stopBgm()):2==i&&(n.audio=!n.audio),s.default.getInstance().setPlayerSettingInfo(n),this.showSettingView()},e.prototype.initSettingView=function(){var t=s.default.getInstance().getPlayerSettingInfo(),e=I.default.SWITCH_CLOSE;t.bgm&&(e=I.default.SWITCH_OPEN);var i=I.default.SWITCH_CLOSE;t.audio&&(i=I.default.SWITCH_OPEN);var n=this.settingNode.getChildByName("view").getChildByName("content").getChildByName("bgm").getChildByName("switch").getComponent(cc.Sprite),a=this.settingNode.getChildByName("view").getChildByName("content").getChildByName("audio").getChildByName("switch").getComponent(cc.Sprite);K.default.getInstance().setBundleSpriteFrameByName(n,e),K.default.getInstance().setBundleSpriteFrameByName(a,i)},e.prototype.closeSettingView=function(){P.default.getInstance().playCommonBtn(),this.settingNode.active=!1},e.prototype.showCdkView=function(){P.default.getInstance().playCommonBtn();var t=this.settingNode.getChildByName("view").getChildByName("cdk");t.getChildByName("view").getChildByName("input").getComponent(cc.EditBox).string="",t.active=!0},e.prototype.closeCdkView=function(){P.default.getInstance().playCommonBtn(),this.settingNode.getChildByName("view").getChildByName("cdk").active=!1},e.prototype.confirmCdk=function(){var t=this.settingNode.getChildByName("view").getChildByName("cdk"),e=t.getChildByName("view").getChildByName("input").getComponent(cc.EditBox).string;if(""!=e){var i=U.default.getConfigByCdk(e);if(null!=i){var n=s.default.getInstance().getPlayerCdkInfo(e);if(null==n){var a=i.reward,l=u.default.getConfigById(a.itemId);null!=l?(P.default.getInstance().playGainReward(),s.default.getInstance().addPlayerItem(a.itemId,a.itemCount),h.default.getInstance().tipWithColor(t,"\u5151\u6362\u6210\u529f!\u83b7\u5f97"+l.name+"\xd7"+a.itemCount,"#ffffff"),n={cdk:e,time:(new Date).getTime()},s.default.getInstance().setPlayerCdkInfo(e,n),this.flushInfo()):h.default.getInstance().tipWithColor(t,"\u5151\u6362\u7801\u7269\u54c1\u5f02\u5e38,\u8bf7\u8054\u7cfb\u5ba2\u670d!","#ffffff")}else h.default.getInstance().tipWithColor(t,"\u60a8\u5df2\u4f7f\u7528\u8fc7\u8be5\u5151\u6362\u7801!","#ffffff")}else h.default.getInstance().tipWithColor(t,"\u5151\u6362\u7801\u4e0d\u6b63\u786e!","#ffffff")}else h.default.getInstance().tipWithColor(t,"\u8bf7\u8f93\u5165\u5151\u6362\u7801!","#ffffff")},l([G({type:cc.Node,tooltip:"\u5c5e\u6027\u4fe1\u606f\u5217\u8868"})],e.prototype,"attrContentNode",void 0),l([G({type:cc.Prefab,tooltip:"\u5c5e\u6027\u4fe1\u606f\u9884\u5236\u4f53"})],e.prototype,"attrInfoPrefab",void 0),l([G({type:cc.Label,tooltip:"\u7ae0\u8282\u540d\u79f0"})],e.prototype,"chapterName",void 0),l([G({type:cc.Node,tooltip:"\u6c14\u6d41"})],e.prototype,"qiliu",void 0),l([G({type:cc.Node,tooltip:"BOSS\u7ed3\u675f\u63d0\u793a"})],e.prototype,"bossEnd",void 0),l([G({type:cc.Node,tooltip:"BOSS\u6765\u88ad\u63d0\u793a"})],e.prototype,"bossComing",void 0),l([G({type:cc.Node,tooltip:"boss\u6765\u88ad\u5de6\u8fb9\u4eba\u7269"})],e.prototype,"bossComingLeftNode",void 0),l([G({type:cc.Node,tooltip:"boss\u6765\u88ad\u53f3\u8fb9\u602a\u7269"})],e.prototype,"bossComingRightNode",void 0),l([G({type:cc.Node,tooltip:"\u6218\u6597\u80cc\u666f1"})],e.prototype,"fightBg1",void 0),l([G({type:cc.Node,tooltip:"\u6218\u6597\u80cc\u666f2"})],e.prototype,"fightBg2",void 0),l([G({type:cc.ProgressBar,tooltip:"\u7ae0\u8282\u8fdb\u5ea6\u6761"})],e.prototype,"chapterProgress",void 0),l([G({type:cc.Node,tooltip:"\u6218\u6597\u533a\u57df"})],e.prototype,"battlegroundNode",void 0),l([G({type:cc.Node,tooltip:"\u6218\u6597\u533a\u57df-\u5de6\u8fb9"})],e.prototype,"battlegroundLeftNode",void 0),l([G({type:cc.Node,tooltip:"\u6218\u6597\u533a\u57df-\u53f3\u8fb9"})],e.prototype,"battlegroundRightNode",void 0),l([G({type:cc.Prefab,tooltip:"\u602a\u7269\u9884\u5236\u4f53"})],e.prototype,"monsterPrefab",void 0),l([G({type:cc.Prefab,tooltip:"\u89d2\u8272\u521d\u59cb\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"generalInitSkillPrefab",void 0),l([G({type:cc.Node,tooltip:"\u89d2\u8272\u8282\u70b9"})],e.prototype,"generalNode",void 0),l([G({type:cc.Node,tooltip:"\u5347\u7ea7\u5149\u6548\u8282\u70b9"})],e.prototype,"levelUpSpineNode",void 0),l([G({type:cc.Node,tooltip:"\u91d1\u5e01\u8d44\u6e90\u8282\u70b9"})],e.prototype,"goldResNode",void 0),l([G({type:cc.Node,tooltip:"\u94bb\u77f3\u8d44\u6e90\u8282\u70b9"})],e.prototype,"diamondResNode",void 0),l([G({type:cc.Label,tooltip:"\u91d1\u5e01\u8d44\u6e90\u6570\u91cf"})],e.prototype,"goldResNumLabel",void 0),l([G({type:cc.Label,tooltip:"\u94bb\u77f3\u8d44\u6e90\u6570\u91cf"})],e.prototype,"diamondResNumLabel",void 0),l([G({type:cc.Prefab,tooltip:"\u8d44\u6e90\u56fe\u7247\u9884\u5236\u4f53"})],e.prototype,"itemPicPrefab",void 0),l([G({type:cc.Label,tooltip:"\u603b\u6218\u529b"})],e.prototype,"totalPower",void 0),l([G({type:cc.Node,tooltip:"\u88c5\u5907\u6280\u80fd\u7684\u5185\u5bb9\u8282\u70b9"})],e.prototype,"mainSkillContentNode",void 0),l([G({type:cc.Prefab,tooltip:"\u88c5\u5907\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"mainSkillPrefab",void 0),l([G({type:cc.Node,tooltip:"\u88c5\u5907\u5ba0\u7269\u7684\u5185\u5bb9\u8282\u70b9"})],e.prototype,"mainPetContentNode",void 0),l([G({type:cc.Prefab,tooltip:"\u88c5\u5907\u5ba0\u7269\u9884\u5236\u4f53"})],e.prototype,"mainPetPrefab",void 0),l([G({type:cc.Button,tooltip:"\u81ea\u52a8\u6280\u80fd\u5f00\u5173\u6309\u94ae"})],e.prototype,"autoSkillButton",void 0),l([G({type:cc.Node,tooltip:"\u5e7f\u544a\u7bb1\u8282\u70b9"})],e.prototype,"adBoxNode",void 0),l([G({type:cc.Node,tooltip:"\u5e7f\u544a\u7bb1\u4fe1\u606f\u8282\u70b9"})],e.prototype,"adBoxInfoNode",void 0),l([G({type:cc.Node,tooltip:"\u526f\u672c\u901a\u5173\u5956\u52b1"})],e.prototype,"challengeRewardNode",void 0),l([G({type:cc.Node,tooltip:"\u8bbe\u7f6e\u754c\u9762\u8282\u70b9"})],e.prototype,"settingNode",void 0),i=l([D],e)}(cc.Component);i.default=x,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/CdkConfig":"CdkConfig","../config/ChallengeConfig":"ChallengeConfig","../config/ChapterConfig":"ChapterConfig","../config/GeneralConfig":"GeneralConfig","../config/GeneralSkillConfig":"GeneralSkillConfig","../config/ItemConfig":"ItemConfig","../config/MonsterConfig":"MonsterConfig","../config/PetConfig":"PetConfig","../config/ResPathKey":"ResPathKey","../config/SkillConfig":"SkillConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../manager/UnlockManager":"UnlockManager","../utils/DateUtil":"DateUtil","../utils/SpineUtil":"SpineUtil","../utils/TxtUtil":"TxtUtil","../utils/WxSdkUtil":"WxSdkUtil","./AdBoxCtrl":"AdBoxCtrl","./AttrLevelCtrl":"AttrLevelCtrl","./ChallengeCtrl":"ChallengeCtrl","./GlobalCtrl":"GlobalCtrl","./MonsterCtrl":"MonsterCtrl","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl","./generalSkill/GeneralInitSkill":"GeneralInitSkill","./generalSkill/MainSkillCtrl":"MainSkillCtrl","./pet/MainPetCtrl":"MainPetCtrl","./res/ItemPicCtrl":"ItemPicCtrl"}],MainPetCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"f0d79p0BL5LrqavEtb61xqx","MainPetCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/PetConfig"),s=t("../MainCtrl"),c=t("../PlayerCacheCtrl"),u=t("../../utils/SpineUtil"),f=t("../generalSkill/PetSkillCtrl"),p=t("../../config/GeneralSkillConfig"),h=cc._decorator,m=h.ccclass,g=h.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.petSkillPrefab=null,e._mainPetEquipInfo={pos:0,petId:null,level:null,lockStatus:null},e._mainNode=null,e._mainCtrl=null,e._spSkeleton=null,e._nowTime=0,e._checkUpdateMainPetIntervalTime=300,e._lastCheckUpdateMainPetTime=0,e._lastAtkTime=0,e._atkIntervalTime=0,e._isRunning=!1,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e._petConfig=null,e._petSkillConfig=null,e._petLevelConfig=null,e}return a(e,t),e.prototype.start=function(){},e.prototype._checkUpdateMainSKill=function(){if(!(this._lastCheckUpdateMainPetTime+this._checkUpdateMainPetIntervalTime>this._nowTime)){var t=c.default.getInstance().getPlayerPetEquipInfoByPos(this._mainPetEquipInfo.pos),e=c.default.getInstance().getPlayerPetInfoById(t.petId);t.petId!=this._mainPetEquipInfo.petId||t.lockStatus!=this._mainPetEquipInfo.lockStatus?this.updateMainPet(t):null!=t.petId&&e.level!=this._mainPetEquipInfo.level&&this.updateMainPet(t),this._lastCheckUpdateMainPetTime=this._nowTime}},e.prototype.update=function(t){if(this._nowTime+=1e3*t,this._status==this.STATUS_MENU.NORMAL){if(this._checkUpdateMainSKill(),null==this._petConfig)return;this._mainCtrl._monsterList.length>0&&this._mainCtrl.canExecSkill?this._checkAtk():this._isRunning||this._playePetAnimation(null,d.default.PET_SPINE_ANIMATION_NAME.RUN,!0,!1)}},e.prototype._checkAtk=function(){this._lastAtkTime+this._atkIntervalTime>this._nowTime||(this._playePetAnimation(null,d.default.PET_SPINE_ANIMATION_NAME.ATK,!1,!1),this._lastAtkTime=this._nowTime)},e.prototype.init=function(t,e){this._mainPetEquipInfo.pos=t.pos,this._mainPetEquipInfo.petId=t.petId,this._mainPetEquipInfo.lockStatus=t.lockStatus,this._mainNode=e,this._mainCtrl=e.getComponent(s.default),this._spSkeleton=this.node.getComponent(sp.Skeleton),this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){return r(this,function(){return this.updateMainPet(this._mainPetEquipInfo),this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]})})},e.prototype.updateMainPet=function(t){return o(this,void 0,void 0,function(){var e,i,n,a,l,o=this;return r(this,function(r){switch(r.label){case 0:return this._mainPetEquipInfo.pos=t.pos,this._mainPetEquipInfo.petId=t.petId,this._mainPetEquipInfo.lockStatus=t.lockStatus,this._mainPetEquipInfo.level=null,this._petLevelConfig=null,this._petConfig=null,this._petSkillConfig=null,this.node.getChildByName("shadow").active=!1,this._spSkeleton.skeletonData=null,d.default.EQUIP_POS_STATUS.LOCK==this._mainPetEquipInfo.lockStatus?[3,2]:null==(e=this._mainPetEquipInfo.petId)?[3,2]:(i=d.default.getConfigById(e),n=this._spSkeleton,[4,u.default.getInstance().getBundleSkeletonData(i.spine)]);case 1:n.skeletonData=r.sent(),this._spSkeleton.setEventListener(function(t,e){switch(e.data.name){case"hit1":o.atkFrame(null,null)}}),this.node.getChildByName("shadow").active=!0,a=c.default.getInstance().getPlayerPetInfoById(e),this._mainPetEquipInfo.level=a.level,this._petLevelConfig=d.default.getLevelConfig(e,a.level),this._petConfig=i,this._petSkillConfig=p.default.getConfigById(this._petConfig.initSkill),this._atkIntervalTime=this._petConfig.atkFrameTime/this._petLevelConfig.atkSpeed*1e3,this.node.scaleX=i.mainScale.x,this.node.scaleY=i.mainScale.y,l=d.default.getEquipPosMainInitPos(this._mainPetEquipInfo.pos),this.node.x=l.x,this.node.y=l.y,r.label=2;case 2:return[2]}})})},e.prototype.atkFrame=function(){if(0!=this._mainCtrl._monsterList.length){var t=this._mainCtrl._monsterList[0].node,e={x:this.node.position.x,y:this.node.position.y};if(null!=this._petLevelConfig){var i=cc.instantiate(this.petSkillPrefab);i.getComponent(f.default).init(this._petSkillConfig,t,this._mainCtrl,this._petLevelConfig.atkRate,e),this._mainCtrl.battlegroundLeftNode.addChild(i)}}},e.prototype._playePetAnimation=function(t,e,i,n){void 0===t&&(t=null),void 0===e&&(e=""),void 0===i&&(i=!1),void 0===n&&(n=!0);var a=1;switch(e){case d.default.PET_SPINE_ANIMATION_NAME.STAND:this._isRunning=!1;break;case d.default.PET_SPINE_ANIMATION_NAME.RUN:a=1,this._isRunning=!0;break;default:this._isRunning=!1}this._spSkeleton.timeScale=a,u.default.getInstance().playSpineAni(this._spSkeleton,t,e,i,n)},l([g({type:cc.Prefab,tooltip:"\u5ba0\u7269\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"petSkillPrefab",void 0),l([m],e)}(cc.Component);i.default=T,cc._RF.pop()},{"../../config/GeneralSkillConfig":"GeneralSkillConfig","../../config/PetConfig":"PetConfig","../../utils/SpineUtil":"SpineUtil","../MainCtrl":"MainCtrl","../PlayerCacheCtrl":"PlayerCacheCtrl","../generalSkill/PetSkillCtrl":"PetSkillCtrl"}],MainSkillCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"482aeDYdKRCT6A/CoQHBi6g","MainSkillCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/ResPathKey"),s=t("../../config/SkillConfig"),c=t("../../manager/SpriteManager"),u=t("../../manager/UnlockManager"),f=t("../../utils/ButtonUtil"),p=t("../IndexCtrl"),h=t("../MainCtrl"),m=t("../PlayerCacheCtrl"),g=t("../TipCtrl"),T=t("./ExecSkillCtrl"),y=cc._decorator,_=y.ccclass,A=y.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.execSkillPrefab=null,e._mainSkillEquipInfo={pos:0,skillId:null,level:null,lockStatus:null},e._mainNode=null,e._mainCtrl=null,e._nowTime=0,e._updateSkillCdTime=1e4,e._cdTime=0,e._checkUpdateMainSkillIntervalTime=300,e._lastCheckUpdateMainSkillTime=0,e._checkUpdateCdIntervalTime=100,e._lastCheckUpdateCdTime=0,e._checkAutoSkillIntervalTime=100,e._lastCheckAutoSkillTime=0,e._speed=300,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e._skillConfig=null,e._skillLevelConfig=null,e}return a(e,t),e.prototype.start=function(){},e.prototype._checkUpdateMainSKill=function(){if(!(this._lastCheckUpdateMainSkillTime+this._checkUpdateMainSkillIntervalTime>this._nowTime)){var t=m.default.getInstance().getPlayerSkillEquipInfoByPos(this._mainSkillEquipInfo.pos),e=m.default.getInstance().getPlayerSkillInfoById(t.skillId);t.skillId!=this._mainSkillEquipInfo.skillId||t.lockStatus!=this._mainSkillEquipInfo.lockStatus?(cc.log("\u6280\u80fdID\u6216\u4f4d\u7f6e\u9501\u6709\u66f4\u65b0...."),this.updateMainSkill(t,!0)):null!=t.skillId&&e.level!=this._mainSkillEquipInfo.level&&(cc.log("\u53ea\u662f\u6280\u80fd\u7b49\u7ea7\u66f4\u65b0\uff0c\u65e0\u9700\u8fdb\u5165cd...."),this.updateMainSkill(t,!1)),this._lastCheckUpdateMainSkillTime=this._nowTime}},e.prototype.update=function(t){if(this._nowTime+=1e3*t,this._status==this.STATUS_MENU.NORMAL){if(this._checkUpdateMainSKill(),this._cdTime>this._nowTime)return this.node.getChildByName("cdProgress").active||(this.node.getChildByName("cdProgress").active=!0),void this._checkUpdateCdProgress();this.node.getChildByName("cdProgress").active&&(this.node.getChildByName("cdProgress").active=!1),this._checkAutoSkill()}},e.prototype._checkAutoSkill=function(){null!=this._skillLevelConfig&&m.default.getInstance().getAutoSkill()&&this.execSkill(null,null)},e.prototype._checkUpdateCdProgress=function(){this._lastCheckUpdateCdTime+this._checkUpdateCdIntervalTime>this._nowTime||(this.node.getChildByName("cdProgress").getChildByName("bar").getComponent(cc.Sprite).fillRange=(this._cdTime-this._nowTime)/(1e3*this._skillLevelConfig.cdTime),this._lastCheckUpdateCdTime=this._nowTime)},e.prototype.init=function(t,e){this._mainSkillEquipInfo.pos=t.pos,this._mainSkillEquipInfo.skillId=t.skillId,this._mainSkillEquipInfo.lockStatus=t.lockStatus,this._mainNode=e,this._mainCtrl=e.getComponent(h.default),this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){return r(this,function(){return this.updateMainSkill(this._mainSkillEquipInfo),this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]})})},e.prototype.updateMainSkill=function(t,e){if(void 0===e&&(e=!1),this._mainSkillEquipInfo.pos=t.pos,this._mainSkillEquipInfo.skillId=t.skillId,this._mainSkillEquipInfo.lockStatus=t.lockStatus,this._mainSkillEquipInfo.level=null,this._skillLevelConfig=null,this._skillConfig=null,s.default.EQUIP_POS_STATUS.LOCK==this._mainSkillEquipInfo.lockStatus)c.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),d.default.BOX_DISABLED),this.node.getChildByName("lock").active=!0,this.node.getChildByName("pic").active=!1,f.default._setEvent(this.node,this.node.getComponent(cc.Button),"MainSkillCtrl","showUnlockTip","");else{this.node.getChildByName("lock").active=!1;var i=this._mainSkillEquipInfo.skillId;if(null!=i){this.node.getChildByName("pic").active=!0;var n=s.default.getConfigById(i);c.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),d.default.BOX_DISABLED),c.default.getInstance().setBundleSpriteFrameByName(this.node.getChildByName("pic").getComponent(cc.Sprite),n.pic),f.default._setEvent(this.node,this.node.getComponent(cc.Button),"MainSkillCtrl","execSkill","");var a=m.default.getInstance().getPlayerSkillInfoById(i);this._mainSkillEquipInfo.level=a.level,this._skillLevelConfig=s.default.getLevelConfig(i,a.level),this._skillConfig=n}else this.node.getChildByName("pic").active=!1,c.default.getInstance().setBundleSpriteFrameByName(this.node.getComponent(cc.Sprite),d.default.BOX_EQUIP),f.default._setEvent(this.node,this.node.getComponent(cc.Button),"MainSkillCtrl","showSkillView","")}e&&(this.clearCdTime(),this.cd())},e.prototype.clearCdTime=function(){this._cdTime=0},e.prototype.cd=function(){null!=this._skillLevelConfig&&(this._cdTime=this._nowTime+1e3*this._skillLevelConfig.cdTime)},e.prototype.execSkill=function(){if(this._mainCtrl.canExecSkill&&0!=this._mainCtrl._monsterList.length&&!(this._cdTime>=this._nowTime)){var t=cc.instantiate(this.execSkillPrefab);t.getComponent(T.default).init(this._skillConfig,this._skillLevelConfig,this._mainNode),this._mainCtrl.battlegroundLeftNode.addChild(t),this.cd()}},e.prototype.showUnlockTip=function(){var t=s.default.getEquipPosUnlockCondition(this._mainSkillEquipInfo.pos),e=u.default.getInstance().getUnlockDesc(t.type,t.content);g.default.getInstance().tipWithColor(this._mainNode,e,"#ffffff")},e.prototype.showSkillView=function(){var t=this._mainNode.parent.getComponent(p.default);t&&t.toFunction(null,"2")},l([A({type:cc.Prefab,tooltip:"\u91ca\u653e\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"execSkillPrefab",void 0),l([_],e)}(cc.Component);i.default=C,cc._RF.pop()},{"../../config/ResPathKey":"ResPathKey","../../config/SkillConfig":"SkillConfig","../../manager/SpriteManager":"SpriteManager","../../manager/UnlockManager":"UnlockManager","../../utils/ButtonUtil":"ButtonUtil","../IndexCtrl":"IndexCtrl","../MainCtrl":"MainCtrl","../PlayerCacheCtrl":"PlayerCacheCtrl","../TipCtrl":"TipCtrl","./ExecSkillCtrl":"ExecSkillCtrl"}],MathUtil:[function(t,e,i){"use strict";cc._RF.push(e,"55205Aco3VByKRM/lrn4MDO","MathUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./TxtUtil"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}return t.parsePct=function(t){return t>0?Math.round(1e4*t)/100+"%":"0%"},t.parsePctPlus=function(t){return t>0?t>=1?a.default.parseTxt(String(Math.floor(Math.round(1e4*t)/100)))+"%":Math.floor(Math.round(1e4*t))/100+"%":"0%"},t.getXy=function(t,e,i,n){var a=t+i*Math.sin(n*Math.PI/180);return[e+i*Math.cos(n*Math.PI/180),a]},t.getXyToZero=function(t,e){return this.getXy(0,0,t,e)},t.getDir=function(t,e){return e.subtract(t).normalize()},n([o],t)}());i.default=r,cc._RF.pop()},{"./TxtUtil":"TxtUtil"}],MineCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"690a7ZmNk1Ol6CTZuRNjU4G","MineCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/ItemConfig"),r=t("../utils/ButtonUtil"),d=t("./PlayerCacheCtrl"),s=t("./PlayerAttrCtrl"),c=t("../manager/SpriteManager"),u=cc._decorator,f=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelName=null,e.atk=null,e.def=null,e.hp=null,e.crit=null,e.itemName=null,e.itemDesc=null,e.itemPrefab=null,e.itemContentNode=null,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.flushAll()},e.prototype.start=function(){},e.prototype.flushAll=function(){this.flushPlayerAttr(),this.flushPlayerItem()},e.prototype.flushPlayerAttr=function(){this.levelName.string=s.default.getInstance().levelName,this.atk.string=""+s.default.getInstance().atk,this.def.string=""+s.default.getInstance().def,this.hp.string=""+s.default.getInstance().hp,this.crit.string=s.default.getInstance().crit+"%"},e.prototype.flushPlayerItem=function(){this.itemContentNode.removeAllChildren();var t=d.default.getInstance().getPlayerItemList(),e=!0;for(var i in t){var n=o.default.CONFIG_MAP.get(Number(i));null!=n&&n.backpackShow&&(t[i]<=0||(this.initItem(n,t[i],e),e=!1))}},e.prototype.initItem=function(t,e,i){var n=cc.instantiate(this.itemPrefab),a=n.getChildByName("pic").getComponent(cc.Sprite);c.default.getInstance().setBundleSpriteFrameByName(a,t.srcPath),n.getChildByName("itemCount").getComponent(cc.Label).string=""+e;var l=n.getComponent(cc.Button);r.default._setEvent(this.node,l,"MineCtrl","chooseItem",t.id+""),this.itemContentNode.addChild(n),n.active=!0,i&&(this.itemName.string=t.name,this.itemDesc.string=t.desc)},e.prototype.chooseItem=function(t,e){if(null!=e){var i=o.default.CONFIG_MAP.get(Number(e));null!=i&&(this.itemName.string=i.name,this.itemDesc.string=i.desc)}},e.prototype.testGetSkill=function(t,e){if(null!=e){var i=String(e).split(","),n=Number(i[0]),a=Number(i[1]);null!=o.default.getConfigById(n)&&(d.default.getInstance().addPlayerItem(n,a),this.flushPlayerItem())}},l([p(cc.Label)],e.prototype,"levelName",void 0),l([p(cc.Label)],e.prototype,"atk",void 0),l([p(cc.Label)],e.prototype,"def",void 0),l([p(cc.Label)],e.prototype,"hp",void 0),l([p(cc.Label)],e.prototype,"crit",void 0),l([p(cc.Label)],e.prototype,"itemName",void 0),l([p(cc.Label)],e.prototype,"itemDesc",void 0),l([p(cc.Prefab)],e.prototype,"itemPrefab",void 0),l([p(cc.Node)],e.prototype,"itemContentNode",void 0),l([f],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../config/ItemConfig":"ItemConfig","../manager/SpriteManager":"SpriteManager","../utils/ButtonUtil":"ButtonUtil","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl"}],MonsterConfig:[function(t,e,i){"use strict";cc._RF.push(e,"f17c8lBe+BCwL3SNypLrbdP","MonsterConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.MonsterBasic=void 0;var a=t("../utils/RandomUtil"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}return t.getRandomPosition=function(){var t=a.default.getRandom(0,this.GEN_POSITIONS.length-1),e=this.GEN_POSITIONS[t];return cc.v2(e[0],e[1])},t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.GEN_POSITIONS=[[0,0],[25,25],[-25,25],[25,-25],[-25,-25],[35,35],[-35,35],[35,-35],[-35,-35],[40,40],[-40,40],[40,-40],[-40,-40]],t.CONFIG=[{id:1,name:"\u65e0\u5934\u9a91\u58eb",desc:"",scale:.5,spine:"animation/monster/monster_01/monster_01",shortRange:!0,atkTime:1,atkRange:120,atk:10,def:0,hp:20,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:2,name:"\u72c2\u66b4\u5de8\u718a",desc:"",scale:.5,spine:"animation/monster/monster_02/monster_02",shortRange:!0,atkRange:120,atkTime:2,atk:100,def:0,hp:400,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:3,name:"\u8fdc\u53e4\u98de\u9f99",desc:"",scale:.5,spine:"animation/monster/monster_03/monster_03",shortRange:!0,atkRange:120,atkTime:1,atk:1e3,def:0,hp:4e3,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:4,name:"\u9b45\u8702",desc:"",scale:.5,spine:"animation/monster/monster_04/monster_04",shortRange:!0,atkRange:120,atkTime:1,atk:4e3,def:0,hp:1e4,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:5,name:"\u751f\u5316\u91d1\u521a",desc:"",scale:.5,spine:"animation/monster/monster_05/monster_05",shortRange:!0,atkRange:120,atkTime:1,atk:1e4,def:0,hp:4e4,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:6,name:"\u6697\u9ed1\u9b54\u9f99",desc:"",scale:.5,spine:"animation/monster/monster_06/monster_06",shortRange:!0,atkRange:120,atkTime:1,atk:3e4,def:0,hp:1e5,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:7,name:"\u72ec\u811a\u602a",desc:"",scale:.5,spine:"animation/monster/monster_07/monster_07",shortRange:!0,atkRange:120,atkTime:1,atk:1e5,def:0,hp:3e5,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:8,name:"\u517d\u738b",desc:"",scale:.5,spine:"animation/monster/monster_08/monster_08",shortRange:!0,atkRange:120,atkTime:1,atk:5e5,def:0,hp:1e6,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:9,name:"\u9ca8\u9c7c",desc:"",scale:.5,spine:"animation/monster/monster_09/monster_09",shortRange:!0,atkRange:120,atkTime:1,atk:1e6,def:0,hp:1e7,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:10,name:"\u7fbd\u9b54",desc:"",scale:.5,spine:"animation/monster/monster_10/monster_10",shortRange:!0,atkRange:120,atkTime:1,atk:5e6,def:0,hp:1e8,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:11,name:"\u9b54\u706f",desc:"",scale:.5,spine:"animation/monster/monster_11/monster_11",shortRange:!0,atkRange:120,atkTime:1,atk:1e7,def:0,hp:1e9,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1001,name:"\u65e0\u5934\u9a91\u58eb_boss",desc:"",scale:.75,spine:"animation/monster/monster_01/monster_01",shortRange:!0,atkRange:150,atkTime:1,atk:50,def:0,hp:200,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1002,name:"\u72c2\u66b4\u5de8\u718a_boss",desc:"",scale:.75,spine:"animation/monster/monster_02/monster_02",shortRange:!0,atkRange:150,atkTime:2,atk:800,def:0,hp:6e3,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1003,name:"\u8fdc\u53e4\u98de\u9f99_boss",desc:"",scale:.75,spine:"animation/monster/monster_03/monster_03",shortRange:!0,atkRange:150,atkTime:1,atk:8e3,def:0,hp:5e4,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1004,name:"\u51b0\u4e4b\u7cbe\u7075_boss",desc:"",scale:.75,spine:"animation/monster/monster_04/monster_04",shortRange:!0,atkRange:120,atkTime:1,atk:2e4,def:0,hp:2e5,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1005,name:"\u751f\u5316\u91d1\u521a_boss",desc:"",scale:.75,spine:"animation/monster/monster_05/monster_05",shortRange:!0,atkRange:150,atkTime:1,atk:3e4,def:0,hp:5e5,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1006,name:"\u6697\u9ed1\u9b54\u9f99_boss",desc:"",scale:.75,spine:"animation/monster/monster_06/monster_06",shortRange:!0,atkRange:150,atkTime:1,atk:2e5,def:0,hp:1e6,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1007,name:"\u72ec\u811a\u602a_boss",desc:"",scale:.75,spine:"animation/monster/monster_07/monster_07",shortRange:!0,atkRange:150,atkTime:1,atk:5e5,def:0,hp:3e6,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1008,name:"\u517d\u738b_boss",desc:"",scale:.75,spine:"animation/monster/monster_08/monster_08",shortRange:!0,atkRange:150,atkTime:1,atk:1e6,def:0,hp:1e7,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1009,name:"\u9ca8\u9c7c_boss",desc:"",scale:.75,spine:"animation/monster/monster_09/monster_09",shortRange:!0,atkRange:150,atkTime:1,atk:1e7,def:0,hp:1e8,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1010,name:"\u7fbd\u9b54_boss",desc:"",scale:.75,spine:"animation/monster/monster_10/monster_10",shortRange:!0,atkRange:150,atkTime:1,atk:1e8,def:0,hp:1e9,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2},{id:1011,name:"\u9b54\u706f_boss",desc:"",scale:.75,spine:"animation/monster/monster_11/monster_11",shortRange:!0,atkRange:150,atkTime:1,atk:1e9,def:0,hp:1e10,hpRestore:0,atkSpeed:1,speed:100,crit:0,critDamage:2}],t.CONFIG_MAP=new Map,n([o],t)}());i.default=r;i.MonsterBasic=function(){this.id=null,this.name=null,this.desc=null,this.scale=null,this.spine=null,this.shortRange=null,this.atkTime=null,this.atkRange=null,this.atk=null,this.def=null,this.hp=null,this.hpRestore=null,this.speed=null,this.atkSpeed=null,this.crit=null,this.critDamage=null},cc._RF.pop()},{"../utils/RandomUtil":"RandomUtil"}],MonsterCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"fec8fx1+/NFxrFLq7grcEOM","MonsterCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../manager/AudioManager"),s=t("../utils/RandomUtil"),c=t("../utils/SpineUtil"),u=t("../utils/TxtUtil"),f=t("./MainCtrl"),p=t("./TipCtrl"),h=cc._decorator,m=h.ccclass,g=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bloodProgressBarSprite=null,e.mainCtrl=null,e.generalNode=null,e._monsterId=null,e._currTime=0,e._existTime=0,e._createTime=0,e._lastAtkTime=0,e._currHp=0,e._isAlive=!0,e._isRunning=!1,e._spSkeleton=null,e._lastHpRestoreTime=null,e._monsterConfig={atk:0,def:0,hp:0,hpRestore:0,crit:0,critDamage:2,speed:20,atkSpeed:1,atkTime:1,shortRange:!0,atkRange:10,scale:0,spine:null},e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e.ANIMATION_NAME_MENU={RUN:"run",ATK:"attack",DIE:"die",HIT:"hit"},e._status=e.STATUS_MENU.INIT,e}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(t){if(this._currTime+=1e3*t,this._status!=this.STATUS_MENU.FINISH)if(this._isAlive){if(null!=this.mainCtrl&&this.mainCtrl.generalIsAlive&&this._status==this.STATUS_MENU.NORMAL){if(this._checkHpRestore(),this.node.convertToNodeSpaceAR(this.generalNode.convertToWorldSpaceAR(cc.Vec2.ZERO)).x+this._monsterConfig.atkRange<0)return void this._run(t);this._atk()}}else this._die()},e.prototype.init=function(t,e,i,n,a,l){return void 0===i&&(i=null),void 0===a&&(a=1),void 0===l&&(l=1),o(this,void 0,void 0,function(){var o,d=this;return r(this,function(r){switch(r.label){case 0:return i&&(this.generalNode=i),this.mainCtrl=this.generalNode.parent.parent.parent.getComponent(f.default),this._monsterId=n,this._monsterConfig.atk=t.atk*a,this._monsterConfig.def=t.def*a,this._monsterConfig.hp=t.hp*a,this._monsterConfig.hpRestore=t.hpRestore*a,this._monsterConfig.crit=t.crit*a,this._monsterConfig.atkSpeed=t.atkSpeed*l,this._monsterConfig.critDamage=t.critDamage*a,this._monsterConfig.atkTime=t.atkTime/t.atkSpeed,this._monsterConfig.speed=t.speed*l,this._monsterConfig.scale=t.scale,this._monsterConfig.spine=t.spine,this._monsterConfig.shortRange=t.shortRange,this._monsterConfig.atkRange=t.atkRange,this._currHp=this._monsterConfig.hp,this.node.scaleX=this._monsterConfig.scale,this.node.scaleY=this._monsterConfig.scale,this.node.setPosition(e),this.node.zIndex=-this.node.y,[4,c.default.getInstance().getBundleSkeletonData(this._monsterConfig.spine)];case 1:return o=r.sent(),this._spSkeleton=this.node.getComponent(sp.Skeleton),this._spSkeleton.skeletonData=o,this.bloodProgressBarSprite=this.node.getChildByName("blood").getChildByName("bar").getComponent(cc.Sprite),this._spSkeleton.setEventListener(function(t,e){switch(e.data.name){case"hit1":d.frame_atk()}}),this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]}})})},e.prototype._run=function(t){var e=this.node.getPosition(),i=-this._monsterConfig.speed*t,n=e.x+=i;this.node.setPosition(cc.v2(n,e.y)),this.node.position.x-=t*this._monsterConfig.speed,this._isRunning||(this._isRunning=!0,c.default.getInstance().playSpineAni(this._spSkeleton,null,this.ANIMATION_NAME_MENU.RUN,!0,!1))},e.prototype._atk=function(){this._lastAtkTime+this._monsterConfig.atkTime/this._monsterConfig.atkSpeed*1e3>this._currTime||(this._lastAtkTime=this._currTime,this._monsterConfig.shortRange&&c.default.getInstance().playSpineAni(this._spSkeleton,null,this.ANIMATION_NAME_MENU.ATK,!1,!1))},e.prototype.frame_atk=function(){var t=this.generalNode.parent.parent.parent.getComponent(f.default);if(t){var e=s.default.random(this._monsterConfig.crit),i=this._monsterConfig.atk;e&&(i=Math.ceil(this._monsterConfig.atk*this._monsterConfig.critDamage)),t.generalBeHit(i,e)}},e.prototype._die=function(){var t=this;this._status=this.STATUS_MENU.FINISH;var e=this.generalNode.parent.parent.parent.getComponent(f.default);e&&e.monsterDie(this._monsterId),this.node.getChildByName("blood").active=!1,c.default.getInstance().playSpineAni(this._spSkeleton,function(){t.node.destroy()},this.ANIMATION_NAME_MENU.DIE,!1,!1)},e.prototype.beHit=function(t,e){if(this._isAlive&&!(t<=0)){d.default.getInstance().playBeHit(),this._currHp-=t,this._currHp<=0&&(this._isAlive=!1);var i=cc.v2(this.node.getPosition().x,this.node.getPosition().y+this.node.height/2);p.default.getInstance().damageWithColor(this.node.parent,u.default.parseTxt(String(t)),e?"#ff4747":null,i),this._resetBlood()}},e.prototype._checkHpRestore=function(){if(!(this._lastHpRestoreTime+1e3>this._currTime)){var t=this._monsterConfig.hpRestore;this._currHp+t>this._monsterConfig.hp&&(t=this._monsterConfig.hp-this._currHp),t>0&&(this._currHp+=t,this._resetBlood()),this._lastHpRestoreTime=this._currTime}},e.prototype._resetBlood=function(){if(null!=this.bloodProgressBarSprite){var t=this._currHp/this._monsterConfig.hp;t!=this.bloodProgressBarSprite.fillRange&&(this.bloodProgressBarSprite.fillRange=t)}},l([m],e)}(cc.Component));i.default=g,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../utils/RandomUtil":"RandomUtil","../utils/SpineUtil":"SpineUtil","../utils/TxtUtil":"TxtUtil","./MainCtrl":"MainCtrl","./TipCtrl":"TipCtrl"}],ObjectManager:[function(t,e,i){"use strict";cc._RF.push(e,"6e151j8hRBBL7rLIq4PAP+r","ObjectManager");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){this._prefabs={}}return t.getInstance=function(){return this._instance||(this._instance=new t,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._init=function(){},t.prototype._destroy=function(){},t.prototype.getObjectPrefab=function(t,e){return void 0===e&&(e=""),n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){e._prefabs[t]?i(e._prefabs[t]):cc.resources.load(t,cc.Prefab,function(n,a){if(n)return cc.log("getObjectNode err",n),void i(null);e._prefabs[t]=a,a.addRef(),i(a)})})]})})},t._instance=null,t}();i.default=l,cc._RF.pop()},{}],PetConfig:[function(t,e,i){"use strict";cc._RF.push(e,"196b3DijEhE0LIYAu0ZZ7ak","PetConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.PetBasic=i.PetLevelBasic=i.PetEquipPosBasic=void 0;var a=t("./AttrLevelConfig"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}this.loadEquipPosConfigMap()},t.loadEquipPosConfigMap=function(){for(var t=0;t<this.EQUIP_POS_CONFIG.length;t++){var e=this.EQUIP_POS_CONFIG[t];this.EQUIP_POS_CONFIG_MAP.set(e.pos,e)}},t.getLevelUpCost=function(t){return e.LEVEL_UP_COST_CONFIG[t]},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getMaxLevel=function(t){return this.CONFIG_MAP.get(t).levelConfig.length},t.getLevelConfig=function(t,e){return e=0==e?0:e-1,this.CONFIG_MAP.get(t).levelConfig[e]},t.getEquipPosUnlockCondition=function(t){return this.EQUIP_POS_CONFIG_MAP.get(t).unlockCondition},t.getEquipPosMainInitPos=function(t){return this.EQUIP_POS_CONFIG_MAP.get(t).mainInitPos},t.getConfigByGrade=function(t){for(var e=[],i=0;i<this.CONFIG.length;i++){var n=this.CONFIG[i];n.grade==t&&e.push(n.id)}return e},t.EQUIP_POS_STATUS={LOCK:0,UNLOCK:1},t.PET_SPINE_ANIMATION_NAME={RUN:"run",ATK:"attack",ATK2:"attack2",STAND:"stand"},t.PET_ATK_TYPE={SHORT_SINGLE:1,SHORT_RANGE:2,LONG_SINGLE:3,LONG_RANGE:4},t.EQUIP_POS_CONFIG=[{pos:1,unlockCondition:{type:4,content:15},mainInitPos:{x:-80,y:100}},{pos:2,unlockCondition:{type:4,content:25},mainInitPos:{x:-105,y:10}},{pos:3,unlockCondition:{type:4,content:35},mainInitPos:{x:-130,y:-80}},{pos:4,unlockCondition:{type:4,content:45},mainInitPos:{x:40,y:100}},{pos:5,unlockCondition:{type:4,content:55},mainInitPos:{x:-15,y:-80}}],t.PET_EQUIP_MAX_NUM=e.EQUIP_POS_CONFIG.length,t.EQUIP_STATUS_MENU={UN_EQUIP:0,EQUIP:1},t.LEVEL_UP_COST_CONFIG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],t.FORMAT_KEY={NUM:"[num]",ATKRATE:"[atkRate]"},t.CONFIG=[{id:1001,grade:1,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,name:"\u51b0\u4e4b\u7cbe\u7075",desc:"\u51b0\u4e4b\u7cbe\u7075",atkFrameTime:1,pic:"ui/pet/pet_02/1",spine:"animation/pet/pet_02/pet_02",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:201,levelConfig:[{atkRate:.1,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.01},{atkRate:.2,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.02},{atkRate:.3,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.04},{atkRate:.4,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.06},{atkRate:.5,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.08},{atkRate:.6,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{atkRate:.7,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.12},{atkRate:.85,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.14},{atkRate:.9,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.16},{atkRate:.9,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.18},{atkRate:.95,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.22},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.24},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.26},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.28},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.32},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.34},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.36},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.38},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.42},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.44},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.46},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.48},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.52},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.54},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.56},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.58},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.65},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.72},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.75},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.85},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.95},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1}]},{id:2001,grade:2,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u5c0f\u8c46\u82bd",desc:"\u5c0f\u8c46\u82bd",pic:"ui/pet/pet_06/1",spine:"animation/pet/pet_06/pet_06",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:201,levelConfig:[{atkRate:.15,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.05},{atkRate:.25,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{atkRate:.35,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.15},{atkRate:.45,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{atkRate:.55,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{atkRate:.65,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{atkRate:.85,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.35},{atkRate:.85,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{atkRate:.9,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.45},{atkRate:.9,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{atkRate:.95,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.3},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.7},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.9},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.1},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.6},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.7},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.9},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3}]},{id:3001,grade:3,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u5c0f\u7eff\u9b54",desc:"\u5c0f\u7eff\u9b54",pic:"ui/pet/pet_01/1",spine:"animation/pet/pet_01/pet_01",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:202,levelConfig:[{atkRate:.1,atkSpeed:.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{atkRate:.2,atkSpeed:.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.15},{atkRate:.3,atkSpeed:.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{atkRate:.4,atkSpeed:.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{atkRate:.5,atkSpeed:.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.35},{atkRate:.6,atkSpeed:.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.45},{atkRate:.7,atkSpeed:.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.55},{atkRate:.85,atkSpeed:.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.65},{atkRate:.9,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.75},{atkRate:.9,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.85},{atkRate:.95,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.6},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.4},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.6},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.2},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.4},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.6},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.8},{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6}]},{id:4001,grade:4,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u6811\u7cbe",desc:"\u6811\u7cbe",pic:"ui/pet/pet_04/1",spine:"animation/pet/pet_04/pet_04",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:202,levelConfig:[{atkRate:.5,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{atkRate:.8,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{atkRate:.3,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{atkRate:.4,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{atkRate:.5,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{atkRate:.6,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{atkRate:.7,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{atkRate:.85,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{atkRate:.9,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{atkRate:.9,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.6},{atkRate:.95,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.4},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9.2},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9.8},{atkRate:1,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10.2}]},{id:5001,grade:5,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u673a\u75321\u53f7",desc:"\u673a\u75321\u53f7",pic:"ui/pet/pet_03/1",spine:"animation/pet/pet_03/pet_03",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:202,levelConfig:[{atkRate:.85,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{atkRate:.9,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.25},{atkRate:.95,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{atkRate:1,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{atkRate:1.1,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{atkRate:1.2,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{atkRate:1.3,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{atkRate:1.4,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4},{atkRate:1.5,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5},{atkRate:1.6,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:11},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:14},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:16},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:17},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:19},{atkRate:1.8,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:20}]},{id:6001,grade:6,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u673a\u5173\u5c0f\u5b50",desc:"\u673a\u5173\u5c0f\u5b50",pic:"ui/pet/pet_05/1",spine:"animation/pet/pet_05/pet_05",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:205,levelConfig:[{atkRate:1,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{atkRate:1.05,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{atkRate:1.1,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{atkRate:1.15,atkSpeed:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{atkRate:1.2,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.2},{atkRate:1.25,atkSpeed:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6},{atkRate:1.3,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6.8},{atkRate:1.4,atkSpeed:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7.4},{atkRate:1.5,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{atkRate:1.6,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:16.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:19.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:21},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:22.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:24},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:25.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:27},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:28.5},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:30},{atkRate:1.7,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:32}]},{id:7001,grade:7,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1.5,name:"\u708e\u9b54",desc:"\u708e\u9b54",pic:"ui/pet/pet_07/1",spine:"animation/pet/pet_07/pet_07",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:207,levelConfig:[{atkRate:1.5,atkSpeed:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{atkRate:1.55,atkSpeed:1.15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{atkRate:1.65,atkSpeed:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{atkRate:1.75,atkSpeed:1.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{atkRate:1.85,atkSpeed:1.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:21},{atkRate:1.95,atkSpeed:1.35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:24},{atkRate:2,atkSpeed:1.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:27},{atkRate:2.1,atkSpeed:1.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:30},{atkRate:2.2,atkSpeed:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:33},{atkRate:2.3,atkSpeed:1.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:36},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:40},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:44},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:48},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:52},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:56},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:60},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:64},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:68},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:72},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:76},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:82},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:86},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:92},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:96},{atkRate:2.4,atkSpeed:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:100}]},{id:7002,grade:7,atkType:e.PET_ATK_TYPE.SHORT_SINGLE,atkFrameTime:1,name:"\u96f7\u795e",desc:"\u96f7\u795e",pic:"ui/pet/pet_08/1",spine:"animation/pet/pet_08/pet_08",mainScale:{x:-.3,y:.3},listScale:{x:1,y:1},initSkill:208,levelConfig:[{atkRate:1.5,atkSpeed:.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{atkRate:1.55,atkSpeed:.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{atkRate:1.65,atkSpeed:.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{atkRate:1.75,atkSpeed:.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{atkRate:1.85,atkSpeed:.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:21},{atkRate:1.95,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:24},{atkRate:2,atkSpeed:.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:27},{atkRate:2.1,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:30},{atkRate:2.2,atkSpeed:.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:33},{atkRate:2.3,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:36},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:40},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:44},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:48},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:52},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:56},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:60},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:64},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:68},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:72},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:76},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:82},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:86},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:92},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:96},{atkRate:2.4,atkSpeed:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:100}]}],t.CONFIG_MAP=new Map,t.EQUIP_POS_CONFIG_MAP=new Map,e=n([o],t)}());i.default=r;i.PetEquipPosBasic=function(){this.pos=null,this.unlockCondition=null,this.mainInitPos=null};i.PetLevelBasic=function(){this.atkRate=null,this.atkSpeed=null,this.addAttrKey=null,this.addRate=null};i.PetBasic=function(){this.id=null,this.atkType=null,this.atkFrameTime=null,this.grade=null,this.name=null,this.desc=null,this.pic=null,this.spine=null,this.mainScale=null,this.listScale=null,this.initSkill=null,this.levelConfig=null},cc._RF.pop()},{"./AttrLevelConfig":"AttrLevelConfig"}],PetCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"5e143tKOc5BirqHirbFhM3+","PetCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../config/AttrLevelConfig"),s=t("../config/ResPathKey"),c=t("../config/PetConfig"),u=t("../manager/SpriteManager"),f=t("../manager/UnlockManager"),p=t("../utils/ButtonUtil"),h=t("../utils/MathUtil"),m=t("./MainCtrl"),g=t("./PlayerAttrCtrl"),T=t("./PlayerCacheCtrl"),y=t("./TipCtrl"),_=t("../config/CallConfig"),A=t("../manager/AudioManager"),C=t("../utils/TxtUtil"),R=cc._decorator,I=R.ccclass,v=R.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.petListContentNode=null,e.petEquipListContentNode=null,e.petPrefab=null,e.petEquipPrefab=null,e.callButton=null,e.batchLevelUpButton=null,e.petDetailNode=null,e.effectValLabel=null,e.levelUpResultContentNode=null,e.levelUpResultPrefab=null,e._petInfoList=[],e._petEquipInfoList=[],e}return a(e,t),e.prototype.onEnable=function(){this._init()},e.prototype.start=function(){},e.prototype._init=function(){this._checkPetEquipPosUnlock(),this._initPetList(),this._initPetEquipList(),this._updatePetAllEffect()},e.prototype._checkPetEquipPosUnlock=function(){var t=T.default.getInstance().getPlayerPetEquipInfo();for(var e in t){var i=t[e],n=Number(e);if(i.lockStatus==c.default.EQUIP_POS_STATUS.LOCK){var a=c.default.getEquipPosUnlockCondition(n);f.default.getInstance().unlock(a.type,a.content)&&(i.lockStatus=c.default.EQUIP_POS_STATUS.UNLOCK,T.default.getInstance().editPlayerPetEquipInfo(n,i))}}},e.prototype._initPetList=function(){this.petListContentNode.removeAllChildren(),this._petInfoList=[];for(var t=0;t<c.default.CONFIG.length;t++){var e=c.default.CONFIG[t];this._initPet(e)}this._checkBatchLevelUp()},e.prototype._initPet=function(t){return o(this,void 0,void 0,function(){var e,i,n;return r(this,function(){return e=cc.instantiate(this.petPrefab),i={petId:t.id,node:e},this._petInfoList.push(i),n=_.default.getGradeConfig(t.grade),u.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),n.pic),u.default.getInstance().setBundleSpriteFrameByName(e.getChildByName("pic").getComponent(cc.Sprite),t.pic),p.default._setEvent(this.node,e.getComponent(cc.Button),"PetCtrl","showDetailView",t.id+""),this._updatePetNode(t.id,e),e.active=!0,this.petListContentNode.addChild(e),[2]})})},e.prototype._updateAllPetNode=function(){for(var t=0;t<this._petInfoList.length;t++){var e=this._petInfoList[t];this._updatePetNode(e.petId,e.node)}},e.prototype._updatePetNode=function(t,e){var i=T.default.getInstance().getPlayerPetInfoById(t),n=c.default.getConfigById(t),a=0,l=0;i?(e.getChildByName("lock").active=!1,e.getChildByName("level").getComponent(cc.Label).string=""+i.level,e.getChildByName("level").active=!0,a=i.exp,l=i.level,i.equip==c.default.EQUIP_STATUS_MENU.EQUIP?(e.getChildByName("equip").active=!1,e.getChildByName("equipTip").active=!0):(e.getChildByName("equipTip").active=!1,e.getChildByName("equip").active=!0,p.default._setEvent(this.node,e.getChildByName("equip").getComponent(cc.Button),"PetCtrl","equipPet",t+""))):(e.getChildByName("lock").active=!0,e.getChildByName("level").active=!1,e.getChildByName("equipTip").active=!1,e.getChildByName("equip").active=!1);var o=c.default.getLevelUpCost(l),r=e.getChildByName("expProgress").getChildByName("bar").getComponent(cc.Sprite);l>=n.levelConfig.length?(r.fillRange=1,e.getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7"):(r.fillRange=a/o,e.getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string=a+"/"+o)},e.prototype._initPetEquipList=function(){this.petEquipListContentNode.removeAllChildren(),this._petEquipInfoList=[];for(var t=c.default.PET_EQUIP_MAX_NUM,e=0;e<t;e++){var i=e+1;this._initPetEquip(i)}},e.prototype._initPetEquip=function(t){var e=cc.instantiate(this.petEquipPrefab),i={pos:t,node:e};this._petEquipInfoList.push(i),this._updatePetEquipNode(t,e),e.active=!0,this.petEquipListContentNode.addChild(e)},e.prototype._updatePetAllEffect=function(){var t=T.default.getInstance().getPlayerPetInfo();if(null!=t){var e=0;for(var i in t){var n=t[i].level;e+=c.default.getLevelConfig(Number(i),n).addRate}cc.log("\u5ba0\u7269\u603b\u62e5\u6709\u6548\u679c\uff1a",e),this.effectValLabel.string="\u653b\u51fb\u529b+"+h.default.parsePctPlus(e)}},e.prototype._updateAllPetEquipNode=function(){for(var t=0;t<this._petEquipInfoList.length;t++){var e=this._petEquipInfoList[t];this._updatePetEquipNode(e.pos,e.node)}},e.prototype._updatePetEquipNode=function(t,e){var i=T.default.getInstance().getPlayerPetEquipInfoByPos(t);if(i.lockStatus==c.default.EQUIP_POS_STATUS.UNLOCK)if(null!=i.petId){var n=i.petId;e.getChildByName("lock").active=!1,e.getChildByName("pic").active=!0,e.getChildByName("level").active=!0,e.getChildByName("cancelEquip").active=!0,p.default._setEvent(this.node,e.getChildByName("cancelEquip").getComponent(cc.Button),"PetCtrl","notEquipPet",n+"");var a=c.default.getConfigById(n),l=_.default.getGradeConfig(a.grade);u.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),l.pic),u.default.getInstance().setBundleSpriteFrameByName(e.getChildByName("pic").getComponent(cc.Sprite),a.pic);var o=T.default.getInstance().getPlayerPetInfoById(n);e.getChildByName("level").getComponent(cc.Label).string=o.level,p.default._setEvent(this.node,e.getComponent(cc.Button),"PetCtrl","showDetailView",a.id+"")}else e.getChildByName("pic").active=!1,e.getChildByName("level").active=!1,e.getChildByName("cancelEquip").active=!1,e.getChildByName("lock").active=!1,u.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),s.default.BOX_EQUIP),p.default._delEvent(e.getComponent(cc.Button));else e.getChildByName("pic").active=!1,e.getChildByName("level").active=!1,e.getChildByName("cancelEquip").active=!1,e.getChildByName("lock").active=!0,u.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),s.default.BOX_DISABLED),p.default._setEvent(this.node,e.getComponent(cc.Button),"PetCtrl","showUnlockTip",t+"")},e.prototype._checkBatchLevelUp=function(){var t=T.default.getInstance().getPlayerPetInfo();if(null!=t){var e=0;for(var i in t){var n=Number(i);this._checkLevelUp(c.default.getConfigById(n),T.default.getInstance().getPlayerPetInfoById(n))&&(e+=1)}this.batchLevelUpButton.interactable=e>0}},e.prototype._checkLevelUp=function(t,e){if(null==t||null==e)return!1;if(!(e.level+1>t.levelConfig.length)){var i=c.default.getLevelUpCost(e.level);if(!(e.exp<i))return!0}},e.prototype.ad=function(t,e){var i=Number(e);null==T.default.getInstance().getPlayerPetInfoById(i)&&T.default.getInstance().playerGetPet(i),this._updateAllPetNode(),this._updateAllPetEquipNode(),this._updatePetAllEffect()},e.prototype.batchLevelUp=function(){var t=T.default.getInstance().getPlayerPetInfo();if(null!=t){var e=[];for(var i in t){var n=Number(i),a=this.levelUp(null,n,!0);null!=a&&e.push(a)}A.default.getInstance().playLevelUp(),this._updatePetAllEffect(),this._checkBatchLevelUp(),this.showLevelUpResult(e)}},e.prototype.levelUp=function(t,e,i){void 0===i&&(i=!1);var n="string"==typeof e,a=c.default.getConfigById(Number(e));if(null!=a){var l=T.default.getInstance().getPlayerPetInfoById(e);if(null!=l&&this._checkLevelUp(a,l)){var o=l.level,r=c.default.getLevelUpCost(l.level);l.level+=1,l.exp-=r,T.default.getInstance().editPlayerPetInfo(e,l),i?this.levelUp(t,e,i):A.default.getInstance().playLevelUp(),n&&this.showDetailView(null,Number(e)),this._updateAllPetNode(),this._updateAllPetEquipNode(),g.default.getInstance().calcPlayerAttr();var d=this.node.parent.parent.getChildByName("main").getComponent(m.default);return d&&d.loadGeneralAttr(),{petId:e,startLevel:o,endLevel:T.default.getInstance().getPlayerPetInfoById(e).level}}}},e.prototype.close=function(){A.default.getInstance().playCommonBtn(),this.node.active=!1},e.prototype.showDetailView=function(t,e){if(null!=e){var i=Number(e),n=c.default.getConfigById(i);if(null!=n){A.default.getInstance().playCommonBtn();var a=T.default.getInstance().getPlayerPetInfoById(i),l=this.petDetailNode.getChildByName("detailView");l.getChildByName("name").getComponent(cc.Label).string=n.name;var o=_.default.getGradeConfig(n.grade);l.getChildByName("grade").getComponent(cc.Label).string=o.name,l.getChildByName("grade").color=(new cc.Color).fromHEX(o.color),u.default.getInstance().setBundleSpriteFrameByName(l.getChildByName("picBg").getComponent(cc.Sprite),o.pic),u.default.getInstance().setBundleSpriteFrameByName(l.getChildByName("picBg").getChildByName("pic").getComponent(cc.Sprite),n.pic);var r=0,s=0;null==a?l.getChildByName("lock").active=!0:(l.getChildByName("lock").active=!1,r=a.level,s=a.exp),l.getChildByName("levelInfo").getChildByName("levelBg").getChildByName("level").getComponent(cc.Label).string="\u7b49\u7ea7"+r;var f=l.getChildByName("levelInfo").getChildByName("exp").getChildByName("bar").getComponent(cc.Sprite);if(r>=n.levelConfig.length)f.fillRange=1,l.getChildByName("levelInfo").getChildByName("exp").getChildByName("num").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7";else{var m=c.default.getLevelUpCost(r);f.fillRange=s/m,l.getChildByName("levelInfo").getChildByName("exp").getChildByName("num").getComponent(cc.Label).string=s+"/"+m}var y=c.default.getLevelConfig(i,r);l.getChildByName("descView").getChildByName("atkInfo").getChildByName("atk").getComponent(cc.Label).string=C.default.parseTxt(Math.ceil(g.default.getInstance().atk*y.atkRate)+""),l.getChildByName("descView").getChildByName("atkSpeedInfo").getChildByName("atkSpeed").getComponent(cc.Label).string=h.default.parsePctPlus(y.atkSpeed),l.getChildByName("descView").getChildByName("effectBg").getChildByName("attrName").getComponent(cc.Label).string=d.default.getConfigById(y.addAttrKey).name,l.getChildByName("descView").getChildByName("effectBg").getChildByName("attrVal").getComponent(cc.Label).string="+"+h.default.parsePctPlus(y.addRate),this._checkLevelUp(n,a)?(p.default._setEvent(this.node,l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button),"PetCtrl","levelUp",i+""),l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button).interactable=!0):l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button).interactable=!1;var R=l.getChildByName("button").getChildByName("equip").getComponent(cc.Button),I=R.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label);null==n||null==a?(l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!1,I.string="\u88c5\u5907"):a.equip==c.default.EQUIP_STATUS_MENU.EQUIP?(I.string="\u89e3\u9664",l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!0,p.default._setEvent(this.node,R,"PetCtrl","notEquipPet",n.id+"")):(I.string="\u88c5\u5907",l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!0,p.default._setEvent(this.node,R,"PetCtrl","equipPet",n.id+"")),this.petDetailNode.active=!0}}},e.prototype.showUnlockTip=function(t,e){var i=Number(e),n=c.default.getEquipPosUnlockCondition(i),a=f.default.getInstance().getUnlockDesc(n.type,n.content);y.default.getInstance().tipWithColor(this.node,a,"#ffffff")},e.prototype.equipPet=function(t,e){var i=0,n=T.default.getInstance().getPlayerPetEquipInfo();if(null!=n){for(var a in n){var l=n[a];if(l.lockStatus==c.default.EQUIP_POS_STATUS.UNLOCK&&null==l.petId){i=l.pos;break}}if(0!=i){A.default.getInstance().playCommonBtn();var o=Number(e),r=T.default.getInstance().getPlayerPetEquipInfoByPos(i);r.petId=o,T.default.getInstance().editPlayerPetEquipInfo(i,r);var d=T.default.getInstance().getPlayerPetInfoById(o);d.equip=c.default.EQUIP_STATUS_MENU.EQUIP,T.default.getInstance().editPlayerPetInfo(o,d),this.closeDetailView(),this._updateAllPetNode(),this._updateAllPetEquipNode(),this._updatePetAllEffect()}else y.default.getInstance().tipWithColor(this.node,"\u5f53\u524d\u6ca1\u6709\u7a7a\u95f2\u4f4d\u7f6e\u53ef\u4ee5\u88c5\u5907","#ffffff")}},e.prototype.notEquipPet=function(t,e){var i=Number(e),n=T.default.getInstance().getPlayerPetInfoById(i);if(null!=n&&n.equip!=c.default.EQUIP_STATUS_MENU.UN_EQUIP){A.default.getInstance().playCommonBtn(),n.equip=c.default.EQUIP_STATUS_MENU.UN_EQUIP,T.default.getInstance().editPlayerPetInfo(i,n);var a=T.default.getInstance().getPlayerPetEquipInfo();for(var l in a){var o=a[l];if(o.lockStatus==c.default.EQUIP_POS_STATUS.UNLOCK&&o.petId==i){o.petId=null,T.default.getInstance().editPlayerPetEquipInfo(Number(l),o);break}}this.closeDetailView(),this._updateAllPetNode(),this._updateAllPetEquipNode(),this._updatePetAllEffect()}},e.prototype.closeDetailView=function(){A.default.getInstance().playCommonBtn(),this.petDetailNode.active=!1},e.prototype.toCallFunction=function(){A.default.getInstance().playCommonBtn(),this.node.active=!1,this.node.parent.getChildByName("call").active=!0},e.prototype.showLevelUpResult=function(t){if(cc.log("showLevelUpResult -> levelUpResult",t),!(null==t||t.length<=0)){this.levelUpResultContentNode.removeAllChildren();for(var e=0;e<t.length;e++){var i=t[e],n=i.petId,a=i.startLevel,l=i.endLevel,o=c.default.getConfigById(n),r=_.default.getGradeConfig(o.grade),d=cc.instantiate(this.levelUpResultPrefab);u.default.getInstance().setBundleSpriteFrameByName(d.getComponent(cc.Sprite),r.pic),u.default.getInstance().setBundleSpriteFrameByName(d.getChildByName("pic").getComponent(cc.Sprite),o.pic),d.getChildByName("levelInfo").getChildByName("leftLevel").getComponent(cc.Label).string=a+"",d.getChildByName("levelInfo").getChildByName("rightLevel").getComponent(cc.Label).string=l+"",d.active=!0,this.levelUpResultContentNode.addChild(d)}this.node.getChildByName("levelUpDetail").active=!0}},e.prototype.closeLevelUpResult=function(){this.node.getChildByName("levelUpDetail").active=!1},l([v({type:cc.Node,tooltip:"\u5ba0\u7269\u5217\u8868\u5185\u5bb9\u8282\u70b9"})],e.prototype,"petListContentNode",void 0),l([v({type:cc.Node,tooltip:"\u5ba0\u7269\u88c5\u5907\u5217\u8868\u5185\u5bb9\u8282\u70b9"})],e.prototype,"petEquipListContentNode",void 0),l([v({type:cc.Prefab,tooltip:"\u5ba0\u7269\u9884\u5236\u4f53"})],e.prototype,"petPrefab",void 0),l([v({type:cc.Prefab,tooltip:"\u5ba0\u7269\u88c5\u5907\u9884\u5236\u4f53"})],e.prototype,"petEquipPrefab",void 0),l([v({type:cc.Button,tooltip:"\u53ec\u5524\u5ba0\u7269\u6309\u94ae"})],e.prototype,"callButton",void 0),l([v({type:cc.Button,tooltip:"\u6279\u91cf\u5f3a\u5316\u6309\u94ae"})],e.prototype,"batchLevelUpButton",void 0),l([v({type:cc.Node,tooltip:"\u8be6\u7ec6\u4fe1\u606f\u8282\u70b9"})],e.prototype,"petDetailNode",void 0),l([v({type:cc.Label,tooltip:"\u62e5\u6709\u6548\u679c"})],e.prototype,"effectValLabel",void 0),l([v({type:cc.Node,tooltip:"\u5f3a\u5316\u7ed3\u679c\u5185\u5bb9\u8282\u70b9"})],e.prototype,"levelUpResultContentNode",void 0),l([v({type:cc.Prefab,tooltip:"\u5f3a\u5316\u7ed3\u679c\u9884\u5236\u4f53"})],e.prototype,"levelUpResultPrefab",void 0),l([I],e)}(cc.Component);i.default=k,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/CallConfig":"CallConfig","../config/PetConfig":"PetConfig","../config/ResPathKey":"ResPathKey","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../manager/UnlockManager":"UnlockManager","../utils/ButtonUtil":"ButtonUtil","../utils/MathUtil":"MathUtil","../utils/TxtUtil":"TxtUtil","./MainCtrl":"MainCtrl","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl"}],PetSkillCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"2529fgDXQRBr7wZxRBIhrS9","PetSkillCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../../config/GeneralSkillConfig"),s=t("../../utils/PositionUtil"),c=t("../../utils/RandomUtil"),u=t("../../utils/SpineUtil"),f=t("../MonsterCtrl"),p=cc._decorator,h=p.ccclass,m=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._mainCtrl=null,e._targetNode=null,e._generalSkillConfig=null,e._generalAttr=null,e._atkRate=0,e._genPos=null,e.STATUS_MENU={INIT:0,READY:1,NORMAL:2,FINISH:3},e._status=e.STATUS_MENU.INIT,e}return a(e,t),e.prototype.start=function(){},e.prototype.update=function(t){if(this._status==this.STATUS_MENU.NORMAL){if(!this._targetNode.isValid)return this._status,this.STATUS_MENU.FINISH,this.node.active=!1,void this.destroy();var e=this.node.parent.convertToNodeSpaceAR(this._targetNode.convertToWorldSpaceAR(cc.Vec2.ZERO));if(e.y=e.y+this._targetNode.height/4,s.default.calculationDis(this.node.position,e)>.35*this._targetNode.width)return void this._move(t,e);this._atk()}},e.prototype._move=function(t,e){var i=e.subtract(this.node.position).normalize();this.node.x+=i.x*this._generalSkillConfig.speed*t,this.node.y+=i.y*this._generalSkillConfig.speed*t},e.prototype._atk=function(){this._status,this.STATUS_MENU.FINISH;var t=this._targetNode.getComponent(f.default);if(t){var e=c.default.random(this._generalAttr.crit),i=this._generalAttr.atk;e&&(i=Math.ceil(this._generalAttr.atk*this._generalAttr.critDamage)),t.beHit(i,e)}this.node.destroy()},e.prototype.init=function(t,e,i,n,a){this._generalSkillConfig=t,this._targetNode=e,this._mainCtrl=i,this._atkRate=n,this._genPos=a,this._generalAttr=i._generalConfig,this._init()},e.prototype._init=function(){return o(this,void 0,void 0,function(){var t,e;return r(this,function(i){switch(i.label){case 0:return this._generalSkillConfig.spine?(t=this.node.getComponent(sp.Skeleton),e=t,[4,u.default.getInstance().getBundleSkeletonData(this._generalSkillConfig.spine)]):[3,2];case 1:e.skeletonData=i.sent(),u.default.getInstance().playSpineAni(t,null,d.default.SKILL_ANIMATION_NAME.START,!0,!1),i.label=2;case 2:return this.node.scaleX=this._generalSkillConfig.scaleX,this.node.scaleY=this._generalSkillConfig.scaleY,this.node.x+=this._genPos.x+this._generalSkillConfig.initGenPos.x,this.node.y+=this._genPos.y+this._generalSkillConfig.initGenPos.y,this.node.active=!0,this._status=this.STATUS_MENU.NORMAL,[2]}})})},l([h],e)}(cc.Component));i.default=m,cc._RF.pop()},{"../../config/GeneralSkillConfig":"GeneralSkillConfig","../../utils/PositionUtil":"PositionUtil","../../utils/RandomUtil":"RandomUtil","../../utils/SpineUtil":"SpineUtil","../MonsterCtrl":"MonsterCtrl"}],PlatformUtil:[function(t,e,i){"use strict";cc._RF.push(e,"4589eS1bRJBYrGeGTfcCtil","PlatformUtil");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return a(e,t),i=e,e.getPlatform=function(){return"undefined"!=typeof wx?i.Platform.wx:i.Platform.h5},e.Platform={wx:1,h5:2},i=l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],PlayerAttrCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"cb8cbG7/lFPLb2pOPwn0fzg","PlayerAttrCtrl");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./PlayerCacheCtrl"),l=t("../config/SkillConfig"),o=t("../config/AttrLevelConfig"),r=t("../config/GeneralConfig"),d=t("../config/GeneralSkillConfig"),s=t("../config/PetConfig"),c=cc._decorator,u=c.ccclass,f=(c.property,function(){function t(){this.levelName="\u672a\u77e5",this.atk=0,this.def=0,this.hp=0,this.hpRestore=0,this.crit=0,this.critDamage=0,this.speed=0,this.atkSpeed=0,this.itemAddRate={},this.totalPower=0,this.baseAtk=0,this.baseDef=0,this.baseHp=0,this.baseHpRestore=0,this.baseCrit=0,this.baseCritDamage=0,this.baseSpeed=0,this.baseAtkSpeed=0}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._destroy=function(){},t.prototype._init=function(){this.calcPlayerAttr()},t.prototype.calcPlayerAttr=function(){this.resetAttr(),this.calcPlayerAttrLevel(),this.calcGeneralLevelSkill(),this.calcPlayerSkillAttr(),this.calcPlayerPetAttr(),this.calcTotalPower(),cc.log("\u6700\u7ec8\u89d2\u8272\u7684\u5c5e\u6027,\u603b\u6218\u529b\uff1a\u3010%s\u3011,\u653b\u51fb\u529b\uff1a%s,\u9632\u5fa1\uff1a%s\uff0c\u751f\u547d\uff1a%s\uff0c\u751f\u547d\u6062\u590d\uff1a%s\uff0c\u653b\u51fb\u901f\u5ea6\uff1a%s\uff0c\u79fb\u901f\uff1a%s\uff0c\u66b4\u51fb\u7387\uff1a%s\uff0c\u66b4\u51fb\u4f24\u5bb3\uff1a%s\uff0c\u8d44\u6e90\u52a0\u6210\uff1a",this.totalPower,this.atk,this.def,this.hp,this.hpRestore,this.atkSpeed,this.speed,this.crit,this.critDamage,this.itemAddRate)},t.prototype.resetAttr=function(){this.levelName="\u672a\u77e5",this.atk=0,this.def=0,this.hp=0,this.hpRestore=0,this.crit=0,this.critDamage=0,this.speed=0,this.atkSpeed=0,this.itemAddRate={},this.totalPower=0},t.prototype.calcPlayerAttrLevel=function(){this.baseAtk=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.ATK).attrVal,this.baseDef=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.DEF).attrVal,this.baseHp=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.HP).attrVal,this.baseHpRestore=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.HP_RESTORE).attrVal,this.baseAtkSpeed=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.ATK_SPEED).attrVal,this.baseCrit=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.CRIT).attrVal,this.baseCritDamage=a.default.getInstance().getPlayerAttrLevelInfo(o.default.ATTR_KEY.CRIT_DAMAGE).attrVal,this.atk=this.baseAtk,this.def=this.baseDef,this.hp=this.baseHp,this.hpRestore=this.baseHpRestore,this.atkSpeed=this.baseAtkSpeed,this.crit=this.baseCrit,this.critDamage=this.baseCritDamage},t.prototype.calcGeneralLevelSkill=function(){cc.log("\u8ba1\u7b97\u89d2\u8272\u7b49\u7ea7\u6280\u80fd\u52a0\u6210.....");var t=0,e=0,i=0,n=0,l=0,s=0,c=0,u={},f=a.default.getInstance().getPlayerGeneral();for(var p in f){var h=f[p],m=Number(p),g=r.default.getConfigById(m);if(null!=g.skill&&null!=g.skill.levelSkill){var T=g.skill.levelSkill;for(var y in T){var _=T[y],A=d.default.getConfigById(_);if(null!=A&&h.level>=Number(y)&&null!=A.effect){var C=A.effect.addCount;if(A.effect.type==d.default.EFFECT_TYPE_MENU.RES_RATE_ADD)null==u[""+A.effect.itemId]&&(u[""+A.effect.itemId]=0),u[""+A.effect.itemId]+=C;else if(A.effect.type==d.default.EFFECT_TYPE_MENU.ATTR_RATE_ADD)switch(A.effect.attrKey){case o.default.ATTR_KEY.ATK:t+=C;break;case o.default.ATTR_KEY.DEF:i+=C;break;case o.default.ATTR_KEY.HP:e+=C;break;case o.default.ATTR_KEY.HP_RESTORE:n+=C;break;case o.default.ATTR_KEY.CRIT:l+=C;break;case o.default.ATTR_KEY.CRIT_DAMAGE:s+=C;break;case o.default.ATTR_KEY.ATK_SPEED:c+=C}}}}}cc.log("\u89d2\u8272\u6280\u80fd\u5c5e\u6027\u52a0\u6210,\u653b\u51fb\u529b\uff1a%s,\u9632\u5fa1\uff1a%s\uff0c\u751f\u547d\uff1a%s\uff0c\u751f\u547d\u6062\u590d\uff1a%s\uff0c\u653b\u51fb\u901f\u5ea6\uff1a%s\uff0c\u79fb\u901f\uff1a%s\uff0c\u66b4\u51fb\u7387\uff1a%s\uff0c\u66b4\u51fb\u4f24\u5bb3\uff1a%s\uff0c\u8d44\u6e90\u52a0\u6210\uff1a",t,i,e,n,c,0,l,s,u),this.calcExtAttrAddd(t,i,e,n,c,0,l,s,u)},t.prototype.calcExtAttrAddd=function(t,e,i,n,a,l,o,r,d){if(this.atk+=Math.ceil(this.baseAtk*t),this.def+=Math.ceil(this.baseDef*e),this.hp+=Math.ceil(this.baseHp*i),this.speed+=Math.ceil(this.baseSpeed*l),this.hpRestore+=n,this.atkSpeed+=a,this.crit+=o,this.critDamage+=r,null!=d)for(var s in d)null==this.itemAddRate[s]&&(this.itemAddRate[s]=0),this.itemAddRate[s]+=d[s]},t.prototype.calcTotalPower=function(){this.totalPower=this.atk+this.def+this.hp+this.hpRestore,this.totalPower*=this.atkSpeed,this.totalPower*=this.critDamage,this.totalPower*=1+10*this.crit,this.totalPower=Math.ceil(this.totalPower)},t.prototype.calcPlayerSkillAttr=function(){var t=a.default.getInstance().getPlayerSkillInfo();if(null!=t){var e=0;for(var i in t){var n=t[i].level;e+=l.default.getLevelConfig(Number(i),n).addRate}this.calcExtAttrAddd(e,0,0,0,0,0,0,0,null)}},t.prototype.calcPlayerPetAttr=function(){var t=a.default.getInstance().getPlayerPetInfo();if(null!=t){var e=0;for(var i in t){var n=t[i].level;e+=s.default.getLevelConfig(Number(i),n).addRate}this.calcExtAttrAddd(e,0,0,0,0,0,0,0,null)}},t._instance=null,e=n([u],t)}());i.default=f,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/GeneralConfig":"GeneralConfig","../config/GeneralSkillConfig":"GeneralSkillConfig","../config/PetConfig":"PetConfig","../config/SkillConfig":"SkillConfig","./PlayerCacheCtrl":"PlayerCacheCtrl"}],PlayerCacheCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"cd287aWO19JorzMdVWN2is/","PlayerCacheCtrl");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../utils/CacheUtil"),l=t("../config/CacheKey"),o=t("../config/CommonConfig"),r=t("../config/GlobalConfig"),d=t("../config/ItemConfig"),s=t("../config/PlayerLevelConfig"),c=t("../config/AttrLevelConfig"),u=t("../config/GeneralConfig"),f=t("../manager/UnlockManager"),p=t("./PlayerAttrCtrl"),h=t("../config/SkillConfig"),m=t("../config/PetConfig"),g=t("../config/CallConfig"),T=t("../config/ChallengeConfig"),y=t("../utils/DateUtil"),_=t("../config/TaskConfig"),A=cc._decorator,C=A.ccclass,R=(A.property,function(){function t(){this.createTime=null,this.guide=null,this.playerChatperInfo=null,this.passFight=null,this.sysSetting=null,this.playerExp=0,this.playerLevel=0,this.lastGainExpTime=0,this.lastGainVigourTime=0,this.playerLevelUpFailedTime=0,this.playerItem=null,this.playerGeneralInfo=null,this.playerSkillInfo=null,this.playerPetInfo=null,this.playerSkillEquipInfo=null,this.playerPetEquipInfo=null,this.dailyRewardInfo=null,this.attainmentRewardInfo=null,this.killCount=0,this.aliveTime=0,this.activityInfo=null,this.attrLevelInfo=null,this.autoSkill=null,this.playerCallInfo=null,this.playerAdBoxInfo=null,this.playerChallengeInfo=null,this.playerTaskInfo=null,this.playerDailyTaskInfo=null,this.playerDailyInfo=null,this.playerSettingInfo=null,this.playerCdkInfo=null}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._init=function(){var t=a.default.getInstance().getNumber(l.default.CREATE_TIME);cc.log("\u521b\u5efa\u65f6\u95f4\uff1a",t),0==t?(t=(new Date).getTime(),a.default.getInstance().set(l.default.CREATE_TIME,t)):t<=r.default.CLEAR_BEFORE_TIME&&(this.clearCache(),t=(new Date).getTime(),a.default.getInstance().set(l.default.CREATE_TIME,t));var e=a.default.getInstance().getNumber(l.default.GUIDE);cc.log("\u65b0\u624b\u5f15\u5bfc\u6b65\u9aa4\uff1a",e),0==e&&(e=0,a.default.getInstance().set(l.default.GUIDE,e));var i=a.default.getInstance().getObject(l.default.SYS_SETTING);cc.log("\u7cfb\u7edf\u8bbe\u7f6e\uff1a",i),null==i&&(i={audioStatus:!0,audioVolume:.5,damageTextStatus:!0},a.default.getInstance().set(l.default.SYS_SETTING,JSON.stringify(i)));var n=a.default.getInstance().getObject(l.default.PLAYER_CHAPTER_INFO);cc.log("\u73a9\u5bb6\u5173\u5361\u4fe1\u606f",n),null==n&&(n={chapterId:1,batch:0},a.default.getInstance().set(l.default.PLAYER_CHAPTER_INFO,JSON.stringify(n)));var o=a.default.getInstance().getNumber(l.default.PASS_FIGHT);cc.log("\u901a\u5173\u7684\u6311\u6218\u5173\u5361",o),0==o&&(o=0,a.default.getInstance().set(l.default.PASS_FIGHT,o));var d=a.default.getInstance().getNumber(l.default.PLAYER_LEVEL);cc.log("\u9636\u7ea7\uff1a",d),null==d&&(d=0,a.default.getInstance().set(l.default.PLAYER_LEVEL,d));var s=a.default.getInstance().getNumber(l.default.PLAYER_EXP);cc.log("\u73a9\u5bb6\u7ecf\u9a8c\uff1a",s),null==s&&(s=0,a.default.getInstance().set(l.default.PLAYER_EXP,s));var c=a.default.getInstance().getNumber(l.default.PLAYER_LAST_GAIN_EXP_TIME);cc.log("\u73a9\u5bb6\u4e0a\u6b21\u83b7\u53d6\u6bcf\u5206\u949f\u7ecf\u9a8c\u65f6\u95f4\uff1a",c),null==c&&(c=0,a.default.getInstance().set(l.default.PLAYER_LAST_GAIN_EXP_TIME,c));var u=a.default.getInstance().getNumber(l.default.PLAYER_LAST_GAIN_VIGOUR_TIME);cc.log("\u73a9\u5bb6\u4e0a\u6b21\u83b7\u53d6\u4f53\u529b\u65f6\u95f4\uff1a",u),null==u&&(u=0,a.default.getInstance().set(l.default.PLAYER_LAST_GAIN_VIGOUR_TIME,u));var f=a.default.getInstance().getNumber(l.default.PLAYER_LEVEL_UP_FAILED_TIME);cc.log("\u73a9\u5bb6\u7a81\u7834\u5931\u8d25\u65f6\u95f4\uff1a",f),null==f&&(f=0,a.default.getInstance().set(l.default.PLAYER_LEVEL_UP_FAILED_TIME,f));var p=a.default.getInstance().getObject(l.default.PLAYER_ITEM);cc.log("\u73a9\u5bb6\u7269\u54c1\u4fe1\u606f",p),null==p&&(p={},a.default.getInstance().set(l.default.PLAYER_ITEM,JSON.stringify(p)));var h=a.default.getInstance().getObject(l.default.PLAYER_ACTIVITY_INFO);cc.log("\u73a9\u5bb6\u6d3b\u52a8\u4fe1\u606f",h),null==h&&(h={},a.default.getInstance().set(l.default.PLAYER_ACTIVITY_INFO,JSON.stringify(h)));var m=a.default.getInstance().getObject(l.default.PLAYER_SKILL);cc.log("\u73a9\u5bb6\u6280\u80fd\u4fe1\u606f",m),null==m&&(m={},a.default.getInstance().set(l.default.PLAYER_SKILL,JSON.stringify(m)));var g=a.default.getInstance().getObject(l.default.PLAYER_SKILL_EQUIP);cc.log("\u73a9\u5bb6\u6280\u80fd\u88c5\u5907\u4fe1\u606f",g),null==g&&(g=this.initPlayerSkillEquipInfo(),a.default.getInstance().set(l.default.PLAYER_SKILL_EQUIP,JSON.stringify(g)));var T=a.default.getInstance().getObject(l.default.PLAYER_PET);cc.log("\u73a9\u5bb6\u4f19\u4f34\u4fe1\u606f",T),null==T&&(T={},a.default.getInstance().set(l.default.PLAYER_PET,JSON.stringify(T)));var y=a.default.getInstance().getObject(l.default.PLAYER_PET_EQUIP);cc.log("\u73a9\u5bb6\u4f19\u4f34\u88c5\u5907\u4fe1\u606f",y),null==y&&(y=this.initPlayerPetEquipInfo(),a.default.getInstance().set(l.default.PLAYER_PET_EQUIP,JSON.stringify(y)));var _=a.default.getInstance().getObject(l.default.DAILY_REWARD_INFO);cc.log("\u73a9\u5bb6\u6bcf\u65e5\u5956\u52b1\u9886\u53d6\u4fe1\u606f",_),null==_&&(_={rewardTime:0,rewardCount:0},a.default.getInstance().set(l.default.DAILY_REWARD_INFO,JSON.stringify(_)));var A=a.default.getInstance().getObject(l.default.ATTAINMENT_REWARD_INFO);cc.log("\u73a9\u5bb6\u6210\u5c31\u5956\u52b1\u9886\u53d6\u4fe1\u606f",A),null==A&&(A={},a.default.getInstance().set(l.default.ATTAINMENT_REWARD_INFO,JSON.stringify(A)));var C=a.default.getInstance().getNumber(l.default.KILL_COUNT);cc.log("\u603b\u51fb\u6740\u6570\u91cf\uff1a",C),null==C&&(C=0,a.default.getInstance().set(l.default.KILL_COUNT,C));var R=a.default.getInstance().getNumber(l.default.ALIVE_TIME);cc.log("\u603b\u5b58\u6d3b\u65f6\u95f4\uff1a",R),null==R&&(R=0,a.default.getInstance().set(l.default.ALIVE_TIME,R));var I=a.default.getInstance().getObject(l.default.PLAYER_ATTR_LEVEL_INFO);cc.log("\u73a9\u5bb6\u5c5e\u6027\u7b49\u7ea7\u4fe1\u606f",I),null==I&&(I=this.initPlayerAttrLevelInfo(),a.default.getInstance().set(l.default.PLAYER_ATTR_LEVEL_INFO,JSON.stringify(I)));var v=a.default.getInstance().getObject(l.default.PLAYER_GENERAL);cc.log("\u73a9\u5bb6\u89d2\u8272\u4fe1\u606f",v),null==v&&(v=this.initPlayerGeneralInfo(),a.default.getInstance().set(l.default.PLAYER_GENERAL,JSON.stringify(v)));var k=a.default.getInstance().getObject(l.default.AUTO_SKILL);cc.log("\u73a9\u5bb6\u662f\u5426\u81ea\u52a8\u91ca\u653e\u6280\u80fd",k),null==k&&(k=!0,a.default.getInstance().set(l.default.AUTO_SKILL,k));var K=a.default.getInstance().getObject(l.default.PLAYER_CALL_INFO);cc.log("\u73a9\u5bb6\u53ec\u5524\u4fe1\u606f",K),null==K&&(K=this.initPlayerCallInfo(),a.default.getInstance().set(l.default.PLAYER_CALL_INFO,JSON.stringify(K)));var E=a.default.getInstance().getObject(l.default.PLAYER_AD_BOX);cc.log("\u73a9\u5bb6\u5e7f\u544a\u7bb1\u4fe1\u606f",E),null==E&&(E={lastShowTime:0,lastReceiveTime:0,receiveCount:0},a.default.getInstance().set(l.default.PLAYER_AD_BOX,JSON.stringify(E))),this.playerChallengeInfo=a.default.getInstance().getObject(l.default.PLAYER_CHALLENGE_INFO),this.initPlayerChallengeInfo();var N=a.default.getInstance().getObject(l.default.PLAYER_TASK_INFO);cc.log("\u73a9\u5bb6\u4efb\u52a1\u4fe1\u606f",N),null==N&&(N={taskId:1},a.default.getInstance().set(l.default.PLAYER_TASK_INFO,JSON.stringify(N)));var S=a.default.getInstance().getObject(l.default.PLAYER_DAILY_TASK_INFO);cc.log("\u73a9\u5bb6\u6bcf\u65e5\u4efb\u52a1\u4fe1\u606f",S),null==S&&(S={},a.default.getInstance().set(l.default.PLAYER_DAILY_TASK_INFO,JSON.stringify(S)));var P=a.default.getInstance().getObject(l.default.PLAYER_DAILY_INFO);cc.log("\u73a9\u5bb6\u6bcf\u65e5\u4fe1\u606f",P),null==P&&(P=this.resetPlayerDailyInfo(),a.default.getInstance().set(l.default.PLAYER_DAILY_INFO,JSON.stringify(P)));var b=a.default.getInstance().getObject(l.default.PLAYER_SETTING_INFO);cc.log("\u73a9\u5bb6\u8bbe\u7f6e\u4fe1\u606f",b),null==b&&(b=this.initPlayerSettingInfo(),a.default.getInstance().set(l.default.PLAYER_SETTING_INFO,JSON.stringify(b)));var B=a.default.getInstance().getObject(l.default.Player_CDK_INFO);cc.log("\u73a9\u5bb6\u5151\u6362\u7801\u4fe1\u606f",B),null==B&&(B={},a.default.getInstance().set(l.default.Player_CDK_INFO,JSON.stringify(B))),this.createTime=t,this.guide=e,this.playerChatperInfo=n,this.passFight=o,this.sysSetting=i,this.playerExp=s,this.playerLevel=d,this.lastGainExpTime=c,this.lastGainVigourTime=u,this.playerLevelUpFailedTime=f,this.playerItem=p,this.playerSkillInfo=m,this.playerPetInfo=T,this.dailyRewardInfo=_,this.attainmentRewardInfo=A,this.killCount=C,this.aliveTime=R,this.activityInfo=h,this.attrLevelInfo=I,this.playerGeneralInfo=v,this.playerSkillEquipInfo=g,this.playerPetEquipInfo=y,this.autoSkill=k,this.playerCallInfo=K,this.playerAdBoxInfo=E,this.playerTaskInfo=N,this.playerDailyTaskInfo=S,this.playerDailyInfo=P,this.playerSettingInfo=b,this.playerCdkInfo=B},t.prototype._destroy=function(){},t.prototype.clearCache=function(){a.default.getInstance().remove(l.default.PLAYER_PET),a.default.getInstance().remove(l.default.PLAYER_PET_EQUIP),a.default.getInstance().remove(l.default.PLAYER_SKILL),a.default.getInstance().remove(l.default.PLAYER_SKILL_EQUIP),cc.log("\u6e05\u9664\u7f13\u5b58...")},t.prototype.editPlayerChapterInfo=function(t){this.playerChatperInfo=t,this.setPlayerChatperInfo()},t.prototype.getPlayerChapterInfo=function(){return this.playerChatperInfo},t.prototype.setPlayerChatperInfo=function(){a.default.getInstance().set(l.default.PLAYER_CHAPTER_INFO,JSON.stringify(this.playerChatperInfo))},t.prototype.editPassFight=function(t){this.passFight=t,this.setPassFight()},t.prototype.getPassFight=function(){return this.passFight},t.prototype.setPassFight=function(){a.default.getInstance().set(l.default.PASS_FIGHT,this.passFight)},t.prototype.getSysSetting=function(){return this.sysSetting},t.prototype.editAudioStatus=function(t){this.sysSetting.audioStatus=t,this.setSysSetting()},t.prototype.editDamageTextStatus=function(t){this.sysSetting.damageTextStatus=t,this.setSysSetting()},t.prototype.editAudioVolume=function(t){this.sysSetting.audioVolume=t,this.setSysSetting()},t.prototype.setSysSetting=function(){a.default.getInstance().set(l.default.SYS_SETTING,JSON.stringify(this.sysSetting))},t.prototype.addPlayerExp=function(t){var e=null;1==t&&(e=this.playerGainExpByOneMinute()),null!=e&&(cc.log("\u589e\u52a0\u73a9\u5bb6\u7ecf\u9a8c\uff1a",e),this.playerExp+=e,this.setPlayerExp(),this.setPlayerGainExpTime())},t.prototype.playerGainExpByOneMinute=function(){},t.prototype.costPlayerExp=function(t){this.playerExp-=t,this.setPlayerExp()},t.prototype.setPlayerExp=function(){a.default.getInstance().set(l.default.PLAYER_EXP,this.playerExp)},t.prototype.getPlayerExp=function(){return this.playerExp},t.prototype.addPlayerLevel=function(t){null!=s.default.getConfigByLevel(this.playerLevel+t)?(this.playerLevel+=t,this.setPlayerLevel()):cc.log("\u73a9\u5bb6\u5347\u7ea7\u5931\u8d25,{}\u7684\u9636\u7ea7\u914d\u7f6e\u627e\u4e0d\u5230",this.playerLevel+t)},t.prototype.setPlayerLevel=function(){a.default.getInstance().set(l.default.PLAYER_LEVEL,this.playerLevel)},t.prototype.getPlayerLevel=function(){return this.playerLevel},t.prototype.setPlayerGainExpTime=function(){this.lastGainExpTime=(new Date).getTime(),a.default.getInstance().set(l.default.PLAYER_LAST_GAIN_EXP_TIME,this.lastGainExpTime)},t.prototype.getPlayerGainExpTime=function(){return this.lastGainExpTime+6e4},t.prototype.recoveryVigour=function(){var t=(new Date).getTime();if(!(this.getPlayerGainVigourTime()>t)){var e=0;e=0==this.lastGainVigourTime?1:Math.floor((t-this.lastGainVigourTime)/r.default.VIGOUR_RECORVEY_TIME),this.getPlayerVigourNum()+e>r.default.VIGOUR_MAX_NUM&&(e=r.default.VIGOUR_MAX_NUM-this.getPlayerVigourNum()),this.addPlayerItem(Number(d.default.ITEM_CONST.VIGOUR),e),this.setPlayerGainVigourTime(t)}},t.prototype.setPlayerGainVigourTime=function(t){this.lastGainVigourTime=t,a.default.getInstance().set(l.default.PLAYER_LAST_GAIN_VIGOUR_TIME,this.lastGainVigourTime)},t.prototype.getPlayerGainVigourTime=function(){return this.lastGainVigourTime+r.default.VIGOUR_RECORVEY_TIME},t.prototype.setPlayerLevelUpFailedTime=function(){this.playerLevelUpFailedTime=(new Date).getTime(),a.default.getInstance().set(l.default.PLAYER_LEVEL_UP_FAILED_TIME,this.playerLevelUpFailedTime)},t.prototype.getPlayerRecoveryTime=function(){},t.prototype.addPlayerItemList=function(t){for(var e=0;e<t.length;e++){var i=t[e];this.addPlayerItem(i.itemId,i.itemCount)}return!0},t.prototype.addPlayerItem=function(t,e){if(cc.log("\u589e\u52a0\u73a9\u5bb6\u7269\u54c1,itemId:%s , itemCount:%s",t,e),e<0)return cc.log("\u6570\u91cf\u5c0f\u4e8e0"),!1;if(null==d.default.getConfigById(t))return cc.log("%s\u7684\u7269\u54c1\u914d\u7f6e\u4e0d\u5b58\u5728",t),!1;var i=p.default.getInstance().itemAddRate;null!=i&&null!=i[""+t]&&(e+=Math.ceil(e*i[""+t]));var n=0;return null!=this.playerItem[t+""]&&(n=this.playerItem[t+""]),this.playerItem[t+""]=n+e,this.setPlayerItem(),!0},t.prototype.costPlayerItem=function(t,e){if(cc.log("\u51cf\u5c11\u73a9\u5bb6\u7269\u54c1,itemId:%s , itemCount:%s",t,e),e<0)return cc.log("\u6570\u91cf\u5c0f\u4e8e0"),!1;if(null==d.default.getConfigById(t))return cc.log("%s\u7684\u7269\u54c1\u914d\u7f6e\u4e0d\u5b58\u5728",t),!1;var i=0;return null!=this.playerItem[t+""]&&(i=this.playerItem[t+""]),e>i?(cc.log("\u51cf\u5c11\u6570\u91cf\uff1a%s,\u62e5\u6709\u6570\u91cf\uff1a%s",e,i),!1):(this.playerItem[t+""]=i-e,this.setPlayerItem(),!0)},t.prototype.getPlayerDiamondNum=function(){var t=0;return null!=this.playerItem[d.default.ITEM_CONST.DIAMOND]&&(t=this.playerItem[d.default.ITEM_CONST.DIAMOND]),t},t.prototype.setPlayerItem=function(){a.default.getInstance().set(l.default.PLAYER_ITEM,JSON.stringify(this.playerItem))},t.prototype.getPlayerGoldNum=function(){var t=0;return null!=this.playerItem[d.default.ITEM_CONST.GOLD]&&(t=this.playerItem[d.default.ITEM_CONST.GOLD]),t},t.prototype.getPlayerShouJingNum=function(){var t=0;return null!=this.playerItem[d.default.ITEM_CONST.SHOU_JING]&&(t=this.playerItem[d.default.ITEM_CONST.SHOU_JING]),t},t.prototype.getPlayerVigourNum=function(){var t=0;return null!=this.playerItem[d.default.ITEM_CONST.VIGOUR]?t=this.playerItem[d.default.ITEM_CONST.VIGOUR]:(t=r.default.VIGOUR_MAX_NUM,this.playerItem[d.default.ITEM_CONST.VIGOUR]=t,this.setPlayerItem()),t},t.prototype.getPlayerItemList=function(){return this.playerItem},t.prototype.getPlayerItemNum=function(t){var e=0;return null!=this.playerItem[t+""]&&(e=this.playerItem[t+""]),e},t.prototype.checkPlayerItem=function(t){if(null==t||t.length<=0)return!0;for(var e=0;e<t.length;e++){var i=t[e],n=this.playerItem[i.itemId+""];if(null==n||n<i.itemCount)return!1}return!0},t.prototype.initPlayerGeneralInfo=function(){for(var t={},e=!0,i=0;i<u.default.CONFIG.length;i++){var n=u.default.CONFIG[i];n.unlockCondition.type==f.default.UNLOCK_TYPE.FREE&&(t[""+n.id]={id:n.id,level:1,exp:0,useStatus:e?o.default.USE_STATUS.USED:o.default.USE_STATUS.UNUSED},e&&(e=!1))}return t},t.prototype.playerGetGeneral=function(t){this.playerGeneralInfo[""+t]={id:t,level:1,exp:0,useStatus:o.default.USE_STATUS.UNUSED},this.setPlayerGeneral()},t.prototype.getPlayerGeneral=function(){return this.playerGeneralInfo},t.prototype.getPlayerGeneralById=function(t){return this.playerGeneralInfo[t+""]},t.prototype.getPlayerUseGeneral=function(){for(var t in this.playerGeneralInfo){var e=this.playerGeneralInfo[t];if(o.default.USE_STATUS.USED==e.useStatus)return e.id}return 1},t.prototype.editPlayerGeneral=function(t,e){this.playerGeneralInfo[""+t]=e,this.setPlayerGeneral()},t.prototype.playerUseGeneral=function(t){for(var e in this.playerGeneralInfo){var i=this.playerGeneralInfo[e],n=o.default.USE_STATUS.UNUSED;i.id==t&&(n=o.default.USE_STATUS.USED),this.playerGeneralInfo[e].useStatus=n}this.setPlayerGeneral()},t.prototype.setPlayerGeneral=function(){a.default.getInstance().set(l.default.PLAYER_GENERAL,JSON.stringify(this.playerGeneralInfo))},t.prototype.getPlayerSkillInfo=function(){return this.playerSkillInfo},t.prototype.getPlayerSkillInfoById=function(t){return this.playerSkillInfo[t+""]},t.prototype.getPlayerSkillLevelById=function(t){var e=this.playerSkillInfo[t+""],i=0;return null!=e&&(i=e.level),i},t.prototype.playerGetSkill=function(t){var e={id:t,level:1,exp:0,equip:h.default.EQUIP_STATUS_MENU.UN_EQUIP};this.playerSkillInfo[t+""]=e,this.setPlayerSkillInfo()},t.prototype.editPlayerSkillInfo=function(t,e){this.playerSkillInfo[t+""]=e,this.setPlayerSkillInfo()},t.prototype.setPlayerSkillInfo=function(){a.default.getInstance().set(l.default.PLAYER_SKILL,JSON.stringify(this.playerSkillInfo))},t.prototype.getPlayerSkillEquipInfo=function(){return this.playerSkillEquipInfo},t.prototype.getPlayerSkillEquipInfoByPos=function(t){return this.playerSkillEquipInfo[t+""]},t.prototype.initPlayerSkillEquipInfo=function(){for(var t=h.default.SKILL_EQUIP_MAX_NUM,e={},i=0;i<t;i++){var n=i+1;e[n+""]={pos:n,skillId:null,lockStatus:h.default.EQUIP_POS_STATUS.LOCK}}return e},t.prototype.editPlayerSkillEquipInfo=function(t,e){this.playerSkillEquipInfo[t+""]=e,this.setPlayerSkillEquipInfo()},t.prototype.setPlayerSkillEquipInfo=function(){a.default.getInstance().set(l.default.PLAYER_SKILL_EQUIP,JSON.stringify(this.playerSkillEquipInfo))},t.prototype.getPlayerPetInfo=function(){return this.playerPetInfo},t.prototype.getPlayerPetInfoById=function(t){return this.playerPetInfo[t+""]},t.prototype.getPlayerPetLevelById=function(t){var e=this.playerPetInfo[t+""],i=0;return null!=e&&(i=e.level),i},t.prototype.playerGetPet=function(t){var e={id:t,level:1,exp:0,equip:m.default.EQUIP_STATUS_MENU.UN_EQUIP};this.playerPetInfo[t+""]=e,this.setPlayerPetInfo()},t.prototype.editPlayerPetInfo=function(t,e){this.playerPetInfo[t+""]=e,this.setPlayerPetInfo()},t.prototype.setPlayerPetInfo=function(){a.default.getInstance().set(l.default.PLAYER_PET,JSON.stringify(this.playerPetInfo))},t.prototype.getPlayerPetEquipInfo=function(){return this.playerPetEquipInfo},t.prototype.getPlayerPetEquipInfoByPos=function(t){return this.playerPetEquipInfo[t+""]},t.prototype.initPlayerPetEquipInfo=function(){for(var t=m.default.PET_EQUIP_MAX_NUM,e={},i=0;i<t;i++){var n=i+1;e[n+""]={pos:n,petId:null,lockStatus:m.default.EQUIP_POS_STATUS.LOCK}}return e},t.prototype.editPlayerPetEquipInfo=function(t,e){this.playerPetEquipInfo[t+""]=e,this.setPlayerPetEquipInfo()},t.prototype.setPlayerPetEquipInfo=function(){a.default.getInstance().set(l.default.PLAYER_PET_EQUIP,JSON.stringify(this.playerPetEquipInfo))},t.prototype.getDailyRewardInfo=function(){return this.dailyRewardInfo},t.prototype.setDailyRewardInfo=function(t){this.dailyRewardInfo=t,a.default.getInstance().set(l.default.DAILY_REWARD_INFO,JSON.stringify(this.dailyRewardInfo))},t.prototype.getAttainmentRewardInfo=function(){return this.attainmentRewardInfo},t.prototype.setAttainmentRewardInfo=function(t){this.attainmentRewardInfo=t,a.default.getInstance().set(l.default.ATTAINMENT_REWARD_INFO,JSON.stringify(this.attainmentRewardInfo))},t.prototype.getKillCount=function(){return this.killCount},t.prototype.setKillCount=function(t){this.killCount=t,a.default.getInstance().set(l.default.KILL_COUNT,this.killCount)},t.prototype.getAliveTime=function(){return this.aliveTime},t.prototype.setAliveTime=function(t){this.aliveTime=t,a.default.getInstance().set(l.default.ALIVE_TIME,this.aliveTime)},t.prototype.getPlayerActivityInfo=function(t){return this.activityInfo[t+""]},t.prototype.setPlayerActivityInfo=function(t,e){this.activityInfo[""+t]=e,a.default.getInstance().set(l.default.PLAYER_ACTIVITY_INFO,JSON.stringify(this.activityInfo))},t.prototype.initPlayerAttrLevelInfo=function(){var t={};for(var e in c.default.CONFIG)cc.log("attrKey/attrVal",e,c.default.ATTR_INIT_VAL[e]),t[e]={level:1,attrVal:c.default.ATTR_INIT_VAL[e]};return t},t.prototype.getPlayerAttrLevelInfo=function(t){return this.attrLevelInfo[t]},t.prototype.setPlayerAttrLevelInfo=function(t,e){this.attrLevelInfo[t]=e,a.default.getInstance().set(l.default.PLAYER_ATTR_LEVEL_INFO,JSON.stringify(this.attrLevelInfo))},t.prototype.getAutoSkill=function(){return Boolean(this.autoSkill)},t.prototype.setAutoSkill=function(t){this.autoSkill=t,a.default.getInstance().set(l.default.AUTO_SKILL,t)},t.prototype.initPlayerCallInfo=function(){for(var t={},e=0;e<g.default.CONFIG.length;e++){var i=g.default.CONFIG[e];t[""+i.id]={id:i.id,level:1,exp:0}}return t},t.prototype.getPlayerCallInfo=function(t){return this.playerCallInfo[""+t]},t.prototype.setPlayerCallInfo=function(t,e){this.playerCallInfo[""+t]=e,a.default.getInstance().set(l.default.PLAYER_CALL_INFO,JSON.stringify(this.playerCallInfo))},t.prototype.getPlayerAdBoxInfo=function(){return this.playerAdBoxInfo},t.prototype.setPlayerAdBoxInfo=function(t){this.playerAdBoxInfo=t,a.default.getInstance().set(l.default.PLAYER_AD_BOX,JSON.stringify(this.playerAdBoxInfo))},t.prototype.initPlayerChallengeInfo=function(){null==this.playerChallengeInfo&&(this.playerChallengeInfo={});for(var t=0;t<T.default.CONFIG.length;t++){var e=T.default.CONFIG[t];null==this.playerChallengeInfo[""+e.id]&&(this.playerChallengeInfo[""+e.id]={id:e.id,level:1,updateTime:0,count:0,adCount:0})}a.default.getInstance().set(l.default.PLAYER_CHALLENGE_INFO,JSON.stringify(this.playerChallengeInfo))},t.prototype.getPlayerChallengeInfo=function(t){return this.playerChallengeInfo[""+t]},t.prototype.setPlayerChallengeInfo=function(t,e){this.playerChallengeInfo[""+t]=e,a.default.getInstance().set(l.default.PLAYER_CHALLENGE_INFO,JSON.stringify(this.playerChallengeInfo))},t.prototype.getPlayerTaskId=function(){return this.playerTaskInfo.taskId},t.prototype.setPlayerTaskId=function(t){this.playerTaskInfo.taskId=t,a.default.getInstance().set(l.default.PLAYER_TASK_INFO,JSON.stringify(this.playerTaskInfo))},t.prototype.getPlayerDailyTaskInfo=function(t){return this.playerDailyTaskInfo[""+t]},t.prototype.setPlayerDailyTaskInfo=function(t,e){this.playerDailyTaskInfo[""+t]=e,a.default.getInstance().set(l.default.PLAYER_DAILY_TASK_INFO,JSON.stringify(this.playerDailyTaskInfo))},t.prototype.resetPlayerDailyInfo=function(){return{resetTime:(new Date).getTime(),goldChallengeCount:0,diamondChallengeCount:0,generalExpChallengeCount:0,killCount:0,chapterCount:0,adCount:0,callCount:0}},t.prototype.calcPlayerDailyInfo=function(t,e){if(!(e<=0)){var i=this.getPlayerDailyInfo();t==_.default.DAILY_TASK_CONDITION_TYPE.GOLD_CHALLENGE?i.goldChallengeCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.DIAMOND_CHALLENGE?i.diamondChallengeCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.GENERAL_EXP_CHALLENGE?i.generalExpChallengeCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.KILL?i.killCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.CALL?i.callCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.AD?i.adCount+=e:t==_.default.DAILY_TASK_CONDITION_TYPE.CHAPTER&&(i.chapterCount+=e),this.setPlayerDailyInfo(i)}},t.prototype.getPlayerDailyInfo=function(){return this.playerDailyInfo.resetTime<y.default.getTodayStartTime()&&(this.playerDailyInfo=this.resetPlayerDailyInfo(),this.setPlayerDailyInfo(this.playerDailyInfo)),this.playerDailyInfo},t.prototype.setPlayerDailyInfo=function(t){this.playerDailyInfo=t,a.default.getInstance().set(l.default.PLAYER_DAILY_INFO,JSON.stringify(this.playerDailyInfo))},t.prototype.initPlayerSettingInfo=function(){return{bgm:!0,audio:!0}},t.prototype.getPlayerSettingInfo=function(){return this.playerSettingInfo},t.prototype.setPlayerSettingInfo=function(t){this.playerSettingInfo=t,a.default.getInstance().set(l.default.PLAYER_SETTING_INFO,JSON.stringify(this.playerSettingInfo))},t.prototype.getPlayerCdkInfo=function(t){return this.playerCdkInfo[t]},t.prototype.setPlayerCdkInfo=function(t,e){this.playerCdkInfo[t]=e,a.default.getInstance().set(l.default.Player_CDK_INFO,JSON.stringify(this.playerCdkInfo))},t._instance=null,e=n([C],t)}());i.default=R,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/CacheKey":"CacheKey","../config/CallConfig":"CallConfig","../config/ChallengeConfig":"ChallengeConfig","../config/CommonConfig":"CommonConfig","../config/GeneralConfig":"GeneralConfig","../config/GlobalConfig":"GlobalConfig","../config/ItemConfig":"ItemConfig","../config/PetConfig":"PetConfig","../config/PlayerLevelConfig":"PlayerLevelConfig","../config/SkillConfig":"SkillConfig","../config/TaskConfig":"TaskConfig","../manager/UnlockManager":"UnlockManager","../utils/CacheUtil":"CacheUtil","../utils/DateUtil":"DateUtil","./PlayerAttrCtrl":"PlayerAttrCtrl"}],PlayerCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"c7458AfEeRHTavh+vJbLPWm","PlayerCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../PlayerAttrCtrl"),r=t("./FightCtrl"),d=t("./JoystickCtrl"),s=cc._decorator,c=s.ccclass,u=s.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.control=null,e.boold=null,e.isAlive=!1,e._maxMoveWidth=0,e._maxMoveHeight=0,e._showDamageEndTime=0,e._lastRecoveryHpTime=0,e._notBeHitLimitTime=3e3,e._notBeHitTime=0,e.playerInfo={atk:0,def:0,hp:0,crit:0,currHp:0},e}return a(e,t),e.prototype.onLoad=function(){this._maxMoveWidth=this.node.parent.getContentSize().width/2-this.node.getContentSize().width/2,this._maxMoveHeight=this.node.parent.getContentSize().height/2-this.node.getContentSize().height/2},e.prototype.start=function(){},e.prototype.update=function(t){this.move(t)},e.prototype.initPlayer=function(){this.isAlive=!0,o.default.getInstance().calcPlayerAttr(),this.playerInfo={atk:o.default.getInstance().atk,def:o.default.getInstance().def,hp:o.default.getInstance().hp,crit:o.default.getInstance().crit,currHp:o.default.getInstance().hp}},e.prototype.revive=function(){this.isAlive=!0,this.playerInfo.currHp=this.playerInfo.hp,this._notBeHitTime=(new Date).getTime()+this._notBeHitLimitTime,this.resetBoold()},e.prototype.updateNobeHitTime=function(t){this._notBeHitTime>t||(this._notBeHitTime=t)},e.prototype.beHit=function(t){if(!(t<=0||this._notBeHitTime>(new Date).getTime())){var e=this.playerInfo.def,i=1;t>e&&(i=t-e),this.costHp(i)}},e.prototype.costHp=function(t){if(cc.log("costHp",t),cc.log("playerInfo",this.playerInfo),this.isAlive&&!(t<=0)){var e=this.playerInfo.currHp;if(t>e&&(t=e),this.playerInfo.currHp=e-t,this.showDamageNode(),this.resetBoold(),this.playerInfo.currHp<=0){this.isAlive=!1;var i=this.node.parent.parent.getComponent(r.default);cc.log(this.node),cc.log(i),i&&i.playerDie()}}},e.prototype.resetBoold=function(){var t=this.playerInfo.currHp/this.playerInfo.hp;t!=this.boold.progress&&(this.boold.progress=t)},e.prototype.showDamageNode=function(){},e.prototype.checkHideDamageNode=function(){},e.prototype.move=function(t){if(0!==this.control.dir.x||0!==this.control.dir.y){var e=350*this.control.dir.x*t,i=350*this.control.dir.y*t;(this.node.position.x+e>=this._maxMoveWidth||this.node.position.x+e<=-this._maxMoveWidth)&&(e=0),(this.node.position.y+i>=this._maxMoveHeight||this.node.position.y+i<=-this._maxMoveHeight)&&(i=0);var n=this.node.position.x+=e,a=this.node.position.y+=i;this.node.setPosition(cc.v2(n,a))}},l([u({type:d.default,tooltip:"\u6447\u6746"})],e.prototype,"control",void 0),l([u({type:cc.ProgressBar,tooltip:"\u73a9\u5bb6\u8840\u6761"})],e.prototype,"boold",void 0),l([c],e)}(cc.Component);i.default=f,cc._RF.pop()},{"../PlayerAttrCtrl":"PlayerAttrCtrl","./FightCtrl":"FightCtrl","./JoystickCtrl":"JoystickCtrl"}],PlayerFightBaseSkill:[function(t,e,i){"use strict";cc._RF.push(e,"adca00p8v1MXJWcslJiKzn6","PlayerFightBaseSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atk=null,e.passNum=0,e.alreadyPassNum=0,e.durationTime=0,e.speed=null,e.createTime=0,e.currTime=0,e.exsitTime=0,e.atkIntervalTime=0,e.sameAtkNum=0,e.atkXDir=1,e.dir=null,e.dirX=null,e.dirY=null,e.initAngle=null,e.atkMonsterInfo={},e}return a(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.createTime=(new Date).getTime(),this.initProp(t)},e.prototype.initProp=function(t){this.atk=t.atk,this.passNum=t.passNum,this.durationTime=t.durationTime,this.speed=t.speed,this.dirX=t.dirX,this.dirY=t.dirY,this.atkIntervalTime=t.atkIntervalTime,this.atkXDir=t.atkXDir,this.sameAtkNum=t.sameAtkNum,this.initAngle=t.initAngle},e.prototype.update=function(t){this.currTime+=t,this.exsitTime+=t,-1!=this.durationTime&&1e3*this.exsitTime>this.durationTime||-1!=this.passNum&&this.alreadyPassNum>=this.passNum?this.node.destroy():(this.updateDir(),this.move(t))},e.prototype.updateDir=function(){},e.prototype.move=function(){},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],PlayerFightSkillConfig:[function(t,e,i){"use strict";cc._RF.push(e,"ae654DVmpdNG7MhTD+6bhlV","PlayerFightSkillConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerFightSkillLevelBasic=i.PlayerFightSkillBasic=void 0;var a=cc._decorator.ccclass,l=function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t in e.CONFIG)for(var i=0;i<this.CONFIG[t].list.length;i++){var n=this.CONFIG[t].list[i];this.CONFIG_MAP.set(n.id,n)}},t.getTypeLength=function(t){return null==this.CONFIG[t]?0:this.CONFIG[t].list.length},t.getTypeName=function(t){return null==this.CONFIG[t]?0:this.CONFIG[t].list[0].name},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getConfigByTypeAndLevel=function(t,e){return this.CONFIG_MAP.get(t+"_"+e)},t.LIMIT_TYPE={NO_LIMIT:0,LEVEL_LIMIE:1,ONLY_LIMIT:2},t.EXEC_TYPE={NORMAL:1,PROP:2,RES:3},t.ROTATION_TYPE={NONE:1,PLAYER_DIR:2},t.FOLLOW_TYPE={NONE:0,FOLLOW:1},t.CONFIG={1:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"1_1",atk:1,cdTime:1500,durationTime:5e3,passNum:1,num:2,type:1,parentType:1,level:1,atkRange:{w:16,h:16,type:1},diffuse:null,speed:400,intervalTime:200,atkIntervalTime:0,name:"\u5fa1\u5251",desc:"\u4e0d\u95f4\u65ad\u653b\u51fb",picRes:"ui/fight/skill/playerSkill/bullet/1",sameAtkNum:0,skillParam:{}}]},2:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"2_1",atk:1,cdTime:1e3,durationTime:5e3,passNum:1,num:1,type:2,parentType:1,level:1,atkRange:{w:16,h:16,type:1},diffuse:{status:!0,angle:[-.4,0,.4],num:3},speed:400,intervalTime:200,atkIntervalTime:0,name:"\u5fa1\u5251",desc:"\u4e09\u53d1\u6563\u5c04",picRes:"ui/fight/skill/playerSkill/bullet/2",sameAtkNum:0,skillParam:{}}]},3:{limitType:1,execType:1,rotationType:2,baseWeight:2,followType:0,list:[{id:"3_1",atk:1,cdTime:1e4,durationTime:3e3,passNum:1,num:1,type:3,parentType:2,level:1,atkRange:{w:80,h:80,type:2},speed:400,intervalTime:200,atkIntervalTime:0,name:"\u865a\u5316",desc:"\u865a\u5316\u81ea\u8eab,\u8eb2\u907f\u4f24\u5bb3,\u7b80\u79f0\u65e0\u654c",picRes:"ui/fight/skill/playerSkill/bullet/3",sameAtkNum:0,skillParam:{}}]}},t.CONFIG_MAP=new Map,e=n([a],t)}();i.default=l;i.PlayerFightSkillBasic=function(){this.limitType=null,this.execType=null,this.rotationType=null,this.baseWeight=null,this.followType=null};i.PlayerFightSkillLevelBasic=function(){this.id=null,this.type=null,this.level=null,this.name=null,this.desc=null,this.picRes=null,this.atk=null,this.cdTime=null,this.durationTime=null,this.passNum=null,this.num=null,this.parentType=null,this.speed=null,this.intervalTime=null,this.atkIntervalTime=null,this.sameAtkNum=null,this.atkRange={w:null,h:null,type:null},this.skillParam={},this.diffuse=null},cc._RF.pop()},{}],PlayerFixSkill:[function(t,e,i){"use strict";cc._RF.push(e,"9b8c7IbXbhG9L2j/Aq6oSAj","PlayerFixSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("./PlayerFightBaseSkill"),r=cc._decorator,d=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.move=function(){},l([d],e)}(o.default));i.default=s,cc._RF.pop()},{"./PlayerFightBaseSkill":"PlayerFightBaseSkill"}],PlayerLevelConfig:[function(t,e,i){"use strict";cc._RF.push(e,"d5fddoVSvFDiI+MHbnOpTg3","PlayerLevelConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerLevelBasic=void 0;var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.level,e)}},t.getConfigByLevel=function(t){return t>this.CONFIG.length?null:this.CONFIG[t]},t.CONFIG=[{level:0,name:"\u65e0\u540d\u4e4b\u8f88",atk:3,def:1,hp:10,crit:0,speed:130,hpRecovery:2,levelUpCost:500,adGain:1e3},{level:1,name:"\u521d\u5165\u6c5f\u6e56",atk:6,def:2,hp:20,crit:0,speed:130,hpRecovery:2,levelUpCost:1e3,adGain:1e3},{level:2,name:"2",atk:8,def:8,hp:220,crit:0,speed:130,hpRecovery:2,levelUpCost:2e3,adGain:2e3},{level:3,name:"3",atk:10,def:10,hp:230,crit:0,speed:130,hpRecovery:2,levelUpCost:3e3,adGain:3e3},{level:4,name:"4",atk:12,def:12,hp:240,crit:0,speed:130,hpRecovery:2,levelUpCost:4e3,adGain:4e3},{level:5,name:"5",atk:15,def:15,hp:250,crit:0,speed:130,hpRecovery:2,levelUpCost:5e3,adGain:5e3},{level:6,name:"6",atk:18,def:18,hp:260,crit:0,speed:130,hpRecovery:2,levelUpCost:6e3,adGain:5e3},{level:7,name:"7",atk:21,def:21,hp:270,crit:0,speed:130,hpRecovery:3,levelUpCost:7e3,adGain:5e3},{level:8,name:"8",atk:24,def:24,hp:280,crit:0,speed:130,hpRecovery:3,levelUpCost:8e3,adGain:5e3},{level:9,name:"9",atk:27,def:27,hp:290,crit:0,speed:130,hpRecovery:3,levelUpCost:9e3,adGain:5e3},{level:10,name:"10",atk:30,def:30,hp:300,crit:0,speed:130,hpRecovery:3,levelUpCost:1e4,adGain:5e3},{level:11,name:"11",atk:33,def:33,hp:310,crit:0,speed:130,hpRecovery:3,levelUpCost:11e3,adGain:5500},{level:12,name:"12",atk:36,def:36,hp:320,crit:0,speed:130,hpRecovery:3,levelUpCost:12e3,adGain:6e3},{level:13,name:"13",atk:39,def:39,hp:330,crit:0,speed:130,hpRecovery:3,levelUpCost:13e3,adGain:6500},{level:14,name:"14",atk:42,def:42,hp:340,crit:0,speed:130,hpRecovery:3,levelUpCost:14e3,adGain:7e3},{level:15,name:"15",atk:45,def:45,hp:350,crit:0,speed:130,hpRecovery:3,levelUpCost:15e3,adGain:7500},{level:16,name:"16",atk:48,def:48,hp:360,crit:0,speed:130,hpRecovery:3,levelUpCost:16e3,adGain:8e3},{level:17,name:"17",atk:51,def:51,hp:370,crit:0,speed:130,hpRecovery:3,levelUpCost:17e3,adGain:8e3},{level:18,name:"18",atk:54,def:54,hp:380,crit:0,speed:130,hpRecovery:4,levelUpCost:18e3,adGain:8e3},{level:19,name:"19",atk:57,def:57,hp:390,crit:0,speed:130,hpRecovery:4,levelUpCost:19e3,adGain:8e3},{level:20,name:"20",atk:60,def:60,hp:400,crit:0,speed:130,hpRecovery:4,levelUpCost:2e4,adGain:8e3},{level:21,name:"21",atk:63,def:63,hp:410,crit:0,speed:130,hpRecovery:4,levelUpCost:21e3,adGain:8e3},{level:22,name:"22",atk:66,def:66,hp:420,crit:0,speed:130,hpRecovery:4,levelUpCost:22e3,adGain:8e3},{level:23,name:"23",atk:69,def:69,hp:430,crit:0,speed:130,hpRecovery:4,levelUpCost:23e3,adGain:8e3},{level:24,name:"24",atk:72,def:72,hp:440,crit:0,speed:130,hpRecovery:4,levelUpCost:24e3,adGain:1e4},{level:25,name:"25",atk:75,def:75,hp:450,crit:0,speed:130,hpRecovery:4,levelUpCost:25e3,adGain:1e4},{level:26,name:"26",atk:78,def:78,hp:460,crit:0,speed:130,hpRecovery:4,levelUpCost:26e3,adGain:1e4},{level:27,name:"27",atk:81,def:81,hp:470,crit:0,speed:130,hpRecovery:5,levelUpCost:27e3,adGain:1e4},{level:28,name:"28",atk:84,def:84,hp:480,crit:0,speed:130,hpRecovery:5,levelUpCost:28e3,adGain:14e3},{level:29,name:"29",atk:87,def:87,hp:500,crit:0,speed:130,hpRecovery:5,levelUpCost:29e3,adGain:14e3},{level:30,name:"30",atk:90,def:90,hp:520,crit:0,speed:130,hpRecovery:5,levelUpCost:3e4,adGain:14e3},{level:31,name:"31",atk:100,def:100,hp:540,crit:0,speed:130,hpRecovery:5,levelUpCost:31e3,adGain:15e3},{level:32,name:"32",atk:110,def:110,hp:550,crit:0,speed:130,hpRecovery:5,levelUpCost:32e3,adGain:15500},{level:33,name:"33",atk:120,def:120,hp:570,crit:0,speed:130,hpRecovery:5,levelUpCost:33e3,adGain:16e3},{level:34,name:"34",atk:130,def:130,hp:590,crit:0,speed:130,hpRecovery:5,levelUpCost:34e3,adGain:16500},{level:35,name:"35",atk:140,def:140,hp:610,crit:0,speed:130,hpRecovery:6,levelUpCost:35e3,adGain:17e3},{level:36,name:"36",atk:150,def:150,hp:630,crit:0,speed:130,hpRecovery:6,levelUpCost:36e3,adGain:17500},{level:37,name:"37",atk:160,def:160,hp:650,crit:0,speed:130,hpRecovery:6,levelUpCost:37e3,adGain:18e3},{level:38,name:"38",atk:170,def:170,hp:670,crit:0,speed:130,hpRecovery:6,levelUpCost:38e3,adGain:18500},{level:39,name:"39",atk:180,def:180,hp:690,crit:0,speed:130,hpRecovery:6,levelUpCost:39e3,adGain:19e3},{level:40,name:"40",atk:190,def:190,hp:710,crit:0,speed:130,hpRecovery:7,levelUpCost:4e4,adGain:19500}],t.CONFIG_MAP=new Map,n([l],t)}());i.default=o;i.PlayerLevelBasic=function(){this.level=null,this.name=null,this.atk=null,this.def=null,this.hp=null,this.crit=null,this.hpRecovery=null,this.levelUpCost=null,this.adGain=null},cc._RF.pop()},{}],PlayerSingleLineSkill:[function(t,e,i){"use strict";cc._RF.push(e,"d4242mQRhFN3bsRWflVcu+6","PlayerSingleLineSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../BossCtrl"),r=t("./PlayerFightBaseSkill"),d=cc._decorator,s=d.ccclass,c=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.move=function(t){var e=this.node.getPosition(),i=this.speed*this.dirX*t,n=this.speed*this.dirY*t,a=e.x+=i,l=e.y+=n;this.node.setPosition(cc.v2(a,l))},e.prototype.onCollisionEnter=function(t){var e=t.node.parent.getComponent(o.default);if(e){if(!e.isAlive)return;if(-1!=this.passNum&&this.alreadyPassNum>=this.passNum)return;this.alreadyPassNum+=1,e.beHit(this.atk)}},l([s],e)}(r.default));i.default=c,cc._RF.pop()},{"../BossCtrl":"BossCtrl","./PlayerFightBaseSkill":"PlayerFightBaseSkill"}],PositionUtil:[function(t,e,i){"use strict";cc._RF.push(e,"b7ed0909zhPqZbVPYIEF7GY","PositionUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.calculationDis=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},t.calcListTopPosition=function(t,e,i,n){return-(i/2*e+i/2*n-t/2)},n([l],t)}());i.default=o,cc._RF.pop()},{}],RandomUtil:[function(t,e,i){"use strict";cc._RF.push(e,"a7e74gLenBBPI7r+Las/NdG","RandomUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.RandomByWeight=function(t){for(var e=t.reduce(function(t,e){return t+e.weight},0),i=Math.random()*e,n=0;n<t.length;n++)if((i-=Number(t[n].weight))<=0)return t[n]},t.random=function(t){return Math.random()<t},t.getRandom=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t.getRandomPlus=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},n([l],t)}());i.default=o,cc._RF.pop()},{}],ResPathKey:[function(t,e,i){"use strict";cc._RF.push(e,"a9df7N771NP55v1HxrwWH2B","ResPathKey");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,l=a.ccclass,o=(a.property,function(){function t(){}return t.NAV_DISABLED="ui/common/nav_disabled",t.NAV_ENABLED="ui/common/nav_enabled",t.NAV_FIGHT_ENABLED="ui/index/fight",t.NAV_ACTIVITY_ENABLED="ui/index/activity",t.NAV_SKILL_ENABLED="ui/index/skill",t.NAV_BACKPACK_ENABLED="ui/index/backpack",t.NAV_GENERAL_ENABLE="ui/index/general",t.NAV_CLOSE="ui/index/close",t.TIP_PREFAB="prefab/tip",t.DAMAGE_PREFAB="prefab/common/damage",t.GENERAL_BROWN_BOX="ui/general/brownBox",t.GENERAL_GRAY_BOX="ui/general/grayBox",t.BUTTON_BLUE="ui/button/blueButton",t.BUTTON_GREEN="ui/button/greenButton",t.BUTTON_YELLOW="ui/button/yellowButton",t.AUTO_SKILL_ENABLED="ui/button/autoSkillEnabled",t.AUTO_SKILL_DISABLED="ui/button/autoSkillDisabled",t.YELLOW_PROGESSS_BAR="ui/progress/yellowProgressBar1",t.EXP_PROGESSS_BAR="ui/progress/expProgressBar",t.SPINE_QILIU="animation/common/qiliu/qiliu",t.SPINE_BOSS_COMING="animation/common/bossComing/bossComing",t.BOX_EQUIP="ui/call/colorBox/0",t.BOX_DISABLED="ui/call/colorBox/disabled",t.AD="ui/ad/ad",t.AD_BUTTON_LONG="ui/ad/blue_ad_1",t.KEY="ui/icon/key",t.DAILY_TASK_NOT_COMPLETE="ui/task/dailyTaskNotComplete",t.DAILY_TASK_COMPLETE="ui/task/dailyTaskComplete",t.SWITCH_OPEN="ui/button/switch_open",t.SWITCH_CLOSE="ui/button/switch_close",t.BGM="audio/bgm/gameBgm",t.GENERAL_ATK="audio/fight/generalAtk",t.MONSTER_BE_HIT="audio/fight/beHit",t.CALL="audio/call/call",t.COMMON_LEVEL_UP="audio/levelUp/commonLevelUp",t.BOSS_COMMING="audio/fight/warning",t.COMMON_BUTTON="audio/button/commonButton",t.LOADING="audio/loading/loading",t.GAIN_REWARD="audio/task/taskReward",t.TURNTABLE="audio/common/turntable",t.NEWS="audio/common/news",t.SKILL_06="audio/skill/06",n([l],t)}());i.default=o,cc._RF.pop()},{}],SceneKey:[function(t,e,i){"use strict";cc._RF.push(e,"2e79eJJwwhMyZk6ZPNei8rW","SceneKey");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator.ccclass,l=function(){function t(){}return t.LOADING="loading",t.INDEX="index",t.FIGHT="fight",n([a],t)}();i.default=l,cc._RF.pop()},{}],SingleLineSkill:[function(t,e,i){"use strict";cc._RF.push(e,"dac7037zS5HVI/lYcX4Ppoy","SingleLineSkill");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../PlayerCtrl"),r=t("./BossBaseSkill"),d=cc._decorator,s=d.ccclass,c=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.move=function(t){var e=this.node.getPosition(),i=this.speed*this.dirX*t,n=this.speed*this.dirY*t,a=e.x+=i,l=e.y+=n;this.node.setPosition(cc.v2(a,l))},e.prototype.onCollisionEnter=function(t){var e=t.node.parent.getComponent(o.default);if(e){if(!e.isAlive)return;if(-1!=this.passNum&&this.alreadyPassNum>=this.passNum)return;this.alreadyPassNum+=1,e.beHit(this.atk)}},l([s],e)}(r.default));i.default=c,cc._RF.pop()},{"../PlayerCtrl":"PlayerCtrl","./BossBaseSkill":"BossBaseSkill"}],SkillConfig:[function(t,e,i){"use strict";cc._RF.push(e,"76d47IdcCZMP6g190ABOzT5","SkillConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.SkillBasic=i.SkillLevelBasic=i.SkillEquipPosBasic=void 0;var a=t("./AttrLevelConfig"),l=cc._decorator,o=l.ccclass,r=(l.property,function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}this.loadEquipPosConfigMap()},t.loadEquipPosConfigMap=function(){for(var t=0;t<this.EQUIP_POS_CONFIG.length;t++){var e=this.EQUIP_POS_CONFIG[t];this.EQUIP_POS_CONFIG_MAP.set(e.pos,e)}},t.getLevelUpCost=function(t){return e.LEVEL_UP_COST_CONFIG[t]},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getMaxLevel=function(t){return this.CONFIG_MAP.get(t).levelConfig.length},t.getLevelConfig=function(t,e){return e=0==e?0:e-1,this.CONFIG_MAP.get(t).levelConfig[e]},t.getEquipPosUnlockCondition=function(t){return this.EQUIP_POS_CONFIG_MAP.get(t).unlockCondition},t.getConfigByGrade=function(t){for(var e=[],i=0;i<this.CONFIG.length;i++){var n=this.CONFIG[i];n.grade==t&&e.push(n.id)}return e},t.EQUIP_POS_STATUS={LOCK:0,UNLOCK:1},t.SKILL_SPINE_ANIMATION_NAME={RUN:"run",ATK:"attack",ATK2:"attack2",START:"start"},t.SKILL_ATK_TYPE={SHORT_SINGLE:1,SHORT_RANGE:2,LONG_SINGLE:3,LONG_RANGE:4,SKY_SINGLE:5,SKY_RANGE:6},t.EQUIP_POS_CONFIG=[{pos:1,unlockCondition:{type:4,content:11}},{pos:2,unlockCondition:{type:4,content:21}},{pos:3,unlockCondition:{type:4,content:31}},{pos:4,unlockCondition:{type:4,content:41}},{pos:5,unlockCondition:{type:4,content:51}},{pos:6,unlockCondition:{type:4,content:61}}],t.SKILL_EQUIP_MAX_NUM=e.EQUIP_POS_CONFIG.length,t.EQUIP_STATUS_MENU={UN_EQUIP:0,EQUIP:1},t.LEVEL_UP_COST_CONFIG=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100],t.FORMAT_KEY={NUM:"[num]",ATKRATE:"[atkRate]"},t.CONFIG=[{id:1001,grade:1,atkType:e.SKILL_ATK_TYPE.SHORT_SINGLE,atkRange:0,name:"\u91ce\u72fc\u731b\u51fb",desc:"\u3010\u5355\u4f53\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u53ea\u91ce\u72fc\uff0c\u6bcf\u53ea\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_01/1",spine:"animation/skill/skill/skill_01/skill_01",execAudio:"audio/skill/exec_01",atkAudio:null,mainScale:{x:-.35,y:.35},listScale:{x:1,y:1},initGenPos:{x:-400,y:-50},levelConfig:[{cdTime:17,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.05},{cdTime:16,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.15},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.35},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.45},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.55},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.65},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.75},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.85},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.95},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.05},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.3},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.7},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.9},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.95},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.05,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.05},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.15},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.25},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.35},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.45},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5}],speed:580},{id:1002,grade:1,atkType:e.SKILL_ATK_TYPE.SKY_RANGE,atkRange:0,name:"\u9f99\u5377\u98ce",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u4e2a\u9f99\u5377\u98ce\uff0c\u6bcf\u4e2a\u9f99\u5377\u98ce\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_08/1",spine:"animation/skill/skill/skill_08/skill_08",execAudio:"audio/skill/exec_02",atkAudio:null,mainScale:{x:-3,y:3},listScale:{x:1,y:1},initGenPos:{x:-400,y:-50},levelConfig:[{cdTime:17,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.05},{cdTime:16,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.15},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.05,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.35},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.45},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.55},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.65},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.75},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.85},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{cdTime:6.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.95},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.05},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.05,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.3},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.7},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.9},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.95},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.55,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.05},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.1},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.65,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.15},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.25},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.85,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.35},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.45},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5}],speed:0},{id:2001,grade:2,atkType:e.SKILL_ATK_TYPE.SHORT_RANGE,atkRange:0,name:"\u91ce\u72fc\u731b\u51fb(\u53d8\u5f02)",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u53ea\u53d8\u5f02\u91ce\u72fc\uff0c\u6bcf\u53ea\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_02/1",spine:"animation/skill/skill/skill_02/skill_02",execAudio:"audio/skill/exec_01",atkAudio:null,mainScale:{x:-.35,y:.35},listScale:{x:1,y:1},initGenPos:{x:-400,y:100},levelConfig:[{cdTime:17,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{cdTime:16,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.1},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.1},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.1},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.3},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.4},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.5},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.6},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.7},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.9},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5}],speed:450},{id:2002,grade:2,atkType:e.SKILL_ATK_TYPE.SHORT_RANGE,atkRange:100,name:"\u5927\u7b28\u718a",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u53ea\u5927\u7b28\u718a\uff0c\u6bcf\u53ea\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_07/1",spine:"animation/skill/skill/skill_07/skill_07",execAudio:null,atkAudio:"audio/skill/atk_03",mainScale:{x:-.6,y:.6},listScale:{x:1,y:1},initGenPos:{x:-400,y:0},levelConfig:[{cdTime:17,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.1},{cdTime:16,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.2},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.75,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.3},{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.95,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.5},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.7},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.9},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.2},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.1},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.1},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.3},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.1},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.3},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.4},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.5},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.6},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.7},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.9},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5}],speed:450},{id:3001,grade:3,atkType:e.SKILL_ATK_TYPE.SHORT_RANGE,atkRange:0,name:"\u963f\u63d0\u4e9a",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u4f4d\u963f\u63d0\u4e9a\uff0c\u6bcf\u4f4d\u9020\u62102\u6b21"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_03/1",spine:"animation/skill/skill/skill_03/skill_03",execAudio:null,atkAudio:"audio/skill/atk_04",mainScale:{x:-.5,y:.5},listScale:{x:1,y:1},initGenPos:{x:-400,y:0},levelConfig:[{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.25},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.4},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.8},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:1.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.8},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.8},{cdTime:9.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:11},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:11.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:14},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:14.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:16.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:17},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:17.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18}],speed:450},{id:4001,grade:4,atkType:e.SKILL_ATK_TYPE.SKY_RANGE,atkRange:0,name:"\u5de8\u86d9\u538b\u9876",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u53ea\u5de8\u86d9\uff0c\u6bcf\u53ea\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_05/1",spine:"animation/skill/skill/skill_05/skill_05",execAudio:null,atkAudio:"audio/skill/atk_03",mainScale:{x:-.75,y:.75},listScale:{x:1,y:1},initGenPos:{x:0,y:0},levelConfig:[{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.35},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.55},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.1},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.2},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{cdTime:9.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{cdTime:9.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.2},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:11},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:7.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:14},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:8.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:16},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:9.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:17},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:10,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:10.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:19},{cdTime:8.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:11,addAttrKey:a.default.ATTR_KEY.ATK,addRate:20},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:11.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:21},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:12,addAttrKey:a.default.ATTR_KEY.ATK,addRate:22}],speed:450},{id:5001,grade:5,atkType:e.SKILL_ATK_TYPE.SKY_SINGLE,atkRange:0,name:"\u9634\u96f7",desc:"\u3010\u5355\u4f53\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u6761\u9634\u96f7\uff0c\u6bcf\u6761\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_04/1",spine:"animation/skill/skill/skill_04/skill_04",execAudio:null,atkAudio:"audio/skill/atk_06",mainScale:{x:1.8,y:1.8},listScale:{x:1,y:1},initGenPos:{x:0,y:0},levelConfig:[{cdTime:15,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.4},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.1,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.6},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:.8},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:1.5},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3.5},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4.5},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5.5},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:11,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:13,addAttrKey:a.default.ATTR_KEY.ATK,addRate:13},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:14},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:17,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:19,addAttrKey:a.default.ATTR_KEY.ATK,addRate:16},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:21,addAttrKey:a.default.ATTR_KEY.ATK,addRate:17},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:23,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:19},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:27,addAttrKey:a.default.ATTR_KEY.ATK,addRate:20},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:29,addAttrKey:a.default.ATTR_KEY.ATK,addRate:21},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:31,addAttrKey:a.default.ATTR_KEY.ATK,addRate:22},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:33,addAttrKey:a.default.ATTR_KEY.ATK,addRate:23},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:24},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:37,addAttrKey:a.default.ATTR_KEY.ATK,addRate:25},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:39,addAttrKey:a.default.ATTR_KEY.ATK,addRate:26},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:41,addAttrKey:a.default.ATTR_KEY.ATK,addRate:27},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:43,addAttrKey:a.default.ATTR_KEY.ATK,addRate:28},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:29},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:50,addAttrKey:a.default.ATTR_KEY.ATK,addRate:30}],speed:450},{id:6001,grade:6,atkType:e.SKILL_ATK_TYPE.SHORT_RANGE,atkRange:100,name:"\u9b54\u795e\u964d\u4e34",desc:"\u3010\u8303\u56f4\u6280\u80fd\u3011\u53ec\u5524"+e.FORMAT_KEY.NUM+"\u4f4d\u9b54\u795e\uff0c\u6bcf\u4f4d\u9b54\u795e\u9020\u6210"+e.FORMAT_KEY.ATKRATE+"\u653b\u51fb\u529b\u7684\u4f24\u5bb3",pic:"ui/skill/skill/skill_06/1",spine:"animation/skill/skill/skill_06/skill_06",execAudio:"audio/skill/exec_07",atkAudio:null,mainScale:{x:-.5,y:.5},listScale:{x:1,y:1},initGenPos:{x:-400,y:150},levelConfig:[{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2},{cdTime:14,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:2.5},{cdTime:13,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:3},{cdTime:12,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:4},{cdTime:11,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:2.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:5},{cdTime:10,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:6},{cdTime:9,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.3,addAttrKey:a.default.ATTR_KEY.ATK,addRate:7},{cdTime:8,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:8},{cdTime:7,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:3.9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:9},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.2,addAttrKey:a.default.ATTR_KEY.ATK,addRate:10},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.5,addAttrKey:a.default.ATTR_KEY.ATK,addRate:11},{cdTime:6,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:4.8,addAttrKey:a.default.ATTR_KEY.ATK,addRate:12},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:6,addAttrKey:a.default.ATTR_KEY.ATK,addRate:15},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:7,addAttrKey:a.default.ATTR_KEY.ATK,addRate:18},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:9,addAttrKey:a.default.ATTR_KEY.ATK,addRate:20},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:11,addAttrKey:a.default.ATTR_KEY.ATK,addRate:22},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:13,addAttrKey:a.default.ATTR_KEY.ATK,addRate:25},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:15,addAttrKey:a.default.ATTR_KEY.ATK,addRate:28},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:17,addAttrKey:a.default.ATTR_KEY.ATK,addRate:30},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:19,addAttrKey:a.default.ATTR_KEY.ATK,addRate:32},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:21,addAttrKey:a.default.ATTR_KEY.ATK,addRate:35},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:23,addAttrKey:a.default.ATTR_KEY.ATK,addRate:38},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:25,addAttrKey:a.default.ATTR_KEY.ATK,addRate:40},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:27,addAttrKey:a.default.ATTR_KEY.ATK,addRate:42},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:29,addAttrKey:a.default.ATTR_KEY.ATK,addRate:45},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:31,addAttrKey:a.default.ATTR_KEY.ATK,addRate:48},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:33,addAttrKey:a.default.ATTR_KEY.ATK,addRate:50},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:35,addAttrKey:a.default.ATTR_KEY.ATK,addRate:52},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:37,addAttrKey:a.default.ATTR_KEY.ATK,addRate:55},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:39,addAttrKey:a.default.ATTR_KEY.ATK,addRate:58},{cdTime:5.5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:41,addAttrKey:a.default.ATTR_KEY.ATK,addRate:60},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:43,addAttrKey:a.default.ATTR_KEY.ATK,addRate:62},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:45,addAttrKey:a.default.ATTR_KEY.ATK,addRate:65},{cdTime:5,num:1,skillAttrKey:a.default.ATTR_KEY.ATK,skillAttrRate:50,addAttrKey:a.default.ATTR_KEY.ATK,addRate:68}],speed:550}],t.CONFIG_MAP=new Map,t.EQUIP_POS_CONFIG_MAP=new Map,e=n([o],t)}());i.default=r;i.SkillEquipPosBasic=function(){this.pos=null,this.unlockCondition=null};i.SkillLevelBasic=function(){this.cdTime=null,this.num=null,this.skillAttrKey=null,this.skillAttrRate=null,this.addAttrKey=null,this.addRate=null};i.SkillBasic=function(){this.id=null,this.atkType=null,this.atkRange=null,this.grade=null,this.name=null,this.desc=null,this.pic=null,this.spine=null,this.execAudio=null,this.atkAudio=null,this.mainScale=null,this.listScale=null,this.initGenPos=null,this.levelConfig=null,this.speed=null},cc._RF.pop()},{"./AttrLevelConfig":"AttrLevelConfig"}],SkillCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"7823aB22GZAD6HdIeI1W7ja","SkillCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("../config/AttrLevelConfig"),s=t("../config/CallConfig"),c=t("../config/ResPathKey"),u=t("../config/SkillConfig"),f=t("../manager/AudioManager"),p=t("../manager/SpriteManager"),h=t("../manager/UnlockManager"),m=t("../utils/ButtonUtil"),g=t("../utils/MathUtil"),T=t("./MainCtrl"),y=t("./PlayerAttrCtrl"),_=t("./PlayerCacheCtrl"),A=t("./TipCtrl"),C=cc._decorator,R=C.ccclass,I=C.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skillListContentNode=null,e.skillEquipListContentNode=null,e.skillPrefab=null,e.skillEquipPrefab=null,e.callButton=null,e.batchLevelUpButton=null,e.skillDetailNode=null,e.effectValLabel=null,e.levelUpResultContentNode=null,e.levelUpResultPrefab=null,e._skillInfoList=[],e._skillEquipInfoList=[],e}return a(e,t),e.prototype.onEnable=function(){this._init()},e.prototype.start=function(){},e.prototype._init=function(){this._checkSkillEquipPosUnlock(),this._initSkillList(),this._initSkillEquipList(),this._updateSkillAllEffect()},e.prototype._checkSkillEquipPosUnlock=function(){var t=_.default.getInstance().getPlayerSkillEquipInfo();for(var e in t){var i=t[e],n=Number(e);if(i.lockStatus==u.default.EQUIP_POS_STATUS.LOCK){var a=u.default.getEquipPosUnlockCondition(n);h.default.getInstance().unlock(a.type,a.content)&&(i.lockStatus=u.default.EQUIP_POS_STATUS.UNLOCK,_.default.getInstance().editPlayerSkillEquipInfo(n,i))}}},e.prototype._initSkillList=function(){this.skillListContentNode.removeAllChildren(),this._skillInfoList=[];for(var t=0;t<u.default.CONFIG.length;t++){var e=u.default.CONFIG[t];this._initSkill(e)}this._checkBatchLevelUp()},e.prototype._initSkill=function(t){return o(this,void 0,void 0,function(){var e,i,n;return r(this,function(){return e=cc.instantiate(this.skillPrefab),i={skillId:t.id,node:e},this._skillInfoList.push(i),n=s.default.getGradeConfig(t.grade),p.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),n.pic),p.default.getInstance().setBundleSpriteFrameByName(e.getChildByName("pic").getComponent(cc.Sprite),t.pic),m.default._setEvent(this.node,e.getComponent(cc.Button),"SkillCtrl","showDetailView",t.id+""),this._updateSkillNode(t.id,e),e.active=!0,this.skillListContentNode.addChild(e),[2]})})},e.prototype._updateAllSkillNode=function(){for(var t=0;t<this._skillInfoList.length;t++){var e=this._skillInfoList[t];this._updateSkillNode(e.skillId,e.node)}},e.prototype._updateSkillNode=function(t,e){var i=_.default.getInstance().getPlayerSkillInfoById(t),n=u.default.getConfigById(t),a=0,l=0;i?(e.getChildByName("lock").active=!1,e.getChildByName("level").getComponent(cc.Label).string=""+i.level,e.getChildByName("level").active=!0,a=i.exp,l=i.level,i.equip==u.default.EQUIP_STATUS_MENU.EQUIP?(e.getChildByName("equip").active=!1,e.getChildByName("equipTip").active=!0):(e.getChildByName("equipTip").active=!1,e.getChildByName("equip").active=!0,m.default._setEvent(this.node,e.getChildByName("equip").getComponent(cc.Button),"SkillCtrl","equipSkill",t+""))):(e.getChildByName("lock").active=!0,e.getChildByName("level").active=!1,e.getChildByName("equipTip").active=!1,e.getChildByName("equip").active=!1);var o=e.getChildByName("expProgress").getChildByName("bar").getComponent(cc.Sprite);if(l>=n.levelConfig.length)o.fillRange=1,e.getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7";else{var r=u.default.getLevelUpCost(l);o.fillRange=a/r,e.getChildByName("expProgress").getChildByName("num").getComponent(cc.Label).string=a+"/"+r}},e.prototype._initSkillEquipList=function(){this.skillEquipListContentNode.removeAllChildren(),this._skillEquipInfoList=[];for(var t=u.default.SKILL_EQUIP_MAX_NUM,e=0;e<t;e++){var i=e+1;this._initSkillEquip(i)}},e.prototype._initSkillEquip=function(t){var e=cc.instantiate(this.skillEquipPrefab),i={pos:t,node:e};this._skillEquipInfoList.push(i),this._updateSkillEquipNode(t,e),e.active=!0,this.skillEquipListContentNode.addChild(e)},e.prototype._updateSkillAllEffect=function(){var t=_.default.getInstance().getPlayerSkillInfo();if(null!=t){var e=0;for(var i in t){var n=t[i].level;e+=u.default.getLevelConfig(Number(i),n).addRate}this.effectValLabel.string="\u653b\u51fb\u529b+"+g.default.parsePctPlus(e)}},e.prototype._updateAllSkillEquipNode=function(){for(var t=0;t<this._skillEquipInfoList.length;t++){var e=this._skillEquipInfoList[t];this._updateSkillEquipNode(e.pos,e.node)}},e.prototype._updateSkillEquipNode=function(t,e){var i=_.default.getInstance().getPlayerSkillEquipInfoByPos(t);if(i.lockStatus==u.default.EQUIP_POS_STATUS.UNLOCK)if(null!=i.skillId){var n=i.skillId;e.getChildByName("lock").active=!1,e.getChildByName("pic").active=!0,e.getChildByName("level").active=!0,e.getChildByName("cancelEquip").active=!0,m.default._setEvent(this.node,e.getChildByName("cancelEquip").getComponent(cc.Button),"SkillCtrl","notEquipSkill",n+"");var a=u.default.getConfigById(n),l=s.default.getGradeConfig(a.grade);p.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),l.pic),p.default.getInstance().setBundleSpriteFrameByName(e.getChildByName("pic").getComponent(cc.Sprite),a.pic);var o=_.default.getInstance().getPlayerSkillInfoById(n);e.getChildByName("level").getComponent(cc.Label).string=o.level,m.default._setEvent(this.node,e.getComponent(cc.Button),"SkillCtrl","showDetailView",a.id+"")}else e.getChildByName("pic").active=!1,e.getChildByName("level").active=!1,e.getChildByName("cancelEquip").active=!1,e.getChildByName("lock").active=!1,p.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),c.default.BOX_EQUIP),m.default._delEvent(e.getComponent(cc.Button));else e.getChildByName("pic").active=!1,e.getChildByName("level").active=!1,e.getChildByName("cancelEquip").active=!1,e.getChildByName("lock").active=!0,p.default.getInstance().setBundleSpriteFrameByName(e.getComponent(cc.Sprite),c.default.BOX_DISABLED),m.default._setEvent(this.node,e.getComponent(cc.Button),"SkillCtrl","showUnlockTip",t+"")},e.prototype._checkBatchLevelUp=function(){var t=_.default.getInstance().getPlayerSkillInfo();if(null!=t){var e=0;for(var i in t){var n=Number(i);this._checkLevelUp(u.default.getConfigById(n),_.default.getInstance().getPlayerSkillInfoById(n))&&(e+=1)}this.batchLevelUpButton.interactable=e>0}},e.prototype._checkLevelUp=function(t,e){if(null==t||null==e)return!1;if(!(e.level+1>t.levelConfig.length)){var i=u.default.getLevelUpCost(e.level);if(!(e.exp<i))return!0}},e.prototype.ad=function(t,e){var i=Number(e);null==_.default.getInstance().getPlayerSkillInfoById(i)&&_.default.getInstance().playerGetSkill(i),this._updateAllSkillNode(),this._updateAllSkillEquipNode(),this._updateSkillAllEffect()},e.prototype.batchLevelUp=function(){var t=_.default.getInstance().getPlayerSkillInfo();if(null!=t){var e=[];for(var i in t){var n=Number(i),a=this.levelUp(null,n,!0);null!=a&&e.push(a)}f.default.getInstance().playLevelUp(),this._updateSkillAllEffect(),this._checkBatchLevelUp(),this.showLevelUpResult(e)}},e.prototype.levelUp=function(t,e,i){void 0===i&&(i=!1);var n="string"==typeof e,a=u.default.getConfigById(Number(e));if(null!=a){var l=_.default.getInstance().getPlayerSkillInfoById(e);if(null!=l){if(this._checkLevelUp(a,l)){var o=l.level,r=u.default.getLevelUpCost(l.level);l.level+=1,l.exp-=r,_.default.getInstance().editPlayerSkillInfo(e,l),i?this.levelUp(t,e,i):f.default.getInstance().playLevelUp(),n&&this.showDetailView(null,Number(e)),this._updateAllSkillNode(),this._updateAllSkillEquipNode(),y.default.getInstance().calcPlayerAttr();var d=this.node.parent.parent.getChildByName("main").getComponent(T.default);return d&&d.loadGeneralAttr(),{skillId:e,startLevel:o,endLevel:_.default.getInstance().getPlayerSkillInfoById(e).level}}cc.log("\u4e0d\u6ee1\u8db3\u5f3a\u5316\u6761\u4ef6")}else cc.log("\u672a\u62e5\u6709\u8be5\u6280\u80fd")}},e.prototype.close=function(){f.default.getInstance().playCommonBtn(),this.node.active=!1},e.prototype.showDetailView=function(t,e){if(null!=e){var i=Number(e),n=u.default.getConfigById(i);if(null!=n){f.default.getInstance().playCommonBtn();var a=_.default.getInstance().getPlayerSkillInfoById(i),l=this.skillDetailNode.getChildByName("detailView");l.getChildByName("name").getComponent(cc.Label).string=n.name;var o=s.default.getGradeConfig(n.grade);l.getChildByName("grade").getComponent(cc.Label).string=o.name,l.getChildByName("grade").color=(new cc.Color).fromHEX(o.color),p.default.getInstance().setBundleSpriteFrameByName(l.getChildByName("picBg").getComponent(cc.Sprite),o.pic),p.default.getInstance().setBundleSpriteFrameByName(l.getChildByName("picBg").getChildByName("pic").getComponent(cc.Sprite),n.pic);var r=0,c=0;null==a?l.getChildByName("lock").active=!0:(l.getChildByName("lock").active=!1,r=a.level,c=a.exp),l.getChildByName("levelInfo").getChildByName("levelBg").getChildByName("level").getComponent(cc.Label).string="\u7b49\u7ea7"+r;var h=l.getChildByName("levelInfo").getChildByName("exp").getChildByName("bar").getComponent(cc.Sprite);if(r>=n.levelConfig.length)h.fillRange=1,l.getChildByName("levelInfo").getChildByName("exp").getChildByName("num").getComponent(cc.Label).string="\u5df2\u6ee1\u7ea7";else{var T=u.default.getLevelUpCost(r);h.fillRange=c/T,l.getChildByName("levelInfo").getChildByName("exp").getChildByName("num").getComponent(cc.Label).string=c+"/"+T}var y=u.default.getLevelConfig(i,r),A=n.desc;A=(A=A.replace(u.default.FORMAT_KEY.NUM,y.num+"")).replace(u.default.FORMAT_KEY.ATKRATE,g.default.parsePctPlus(y.skillAttrRate)),l.getChildByName("descView").getChildByName("desc").getComponent(cc.Label).string=A,l.getChildByName("descView").getChildByName("cdInfo").getChildByName("cdTime").getComponent(cc.Label).string=y.cdTime+"\u79d2",l.getChildByName("descView").getChildByName("effectBg").getChildByName("attrName").getComponent(cc.Label).string=d.default.getConfigById(y.addAttrKey).name,l.getChildByName("descView").getChildByName("effectBg").getChildByName("attrVal").getComponent(cc.Label).string="+"+g.default.parsePctPlus(y.addRate),this._checkLevelUp(n,a)?(cc.log("\u53ef\u4ee5\u5f3a\u5316...."),m.default._setEvent(this.node,l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button),"SkillCtrl","levelUp",i+""),l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button).interactable=!0):l.getChildByName("button").getChildByName("levelUp").getComponent(cc.Button).interactable=!1;var C=l.getChildByName("button").getChildByName("equip").getComponent(cc.Button),R=C.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label);null==n||null==a?(l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!1,R.string="\u88c5\u5907"):a.equip==u.default.EQUIP_STATUS_MENU.EQUIP?(R.string="\u89e3\u9664",l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!0,m.default._setEvent(this.node,C,"SkillCtrl","notEquipSkill",n.id+"")):(R.string="\u88c5\u5907",l.getChildByName("button").getChildByName("equip").getComponent(cc.Button).interactable=!0,m.default._setEvent(this.node,C,"SkillCtrl","equipSkill",n.id+"")),this.skillDetailNode.active=!0}}},e.prototype.showUnlockTip=function(t,e){var i=Number(e),n=u.default.getEquipPosUnlockCondition(i),a=h.default.getInstance().getUnlockDesc(n.type,n.content);A.default.getInstance().tipWithColor(this.node,a,"#ffffff")},e.prototype.equipSkill=function(t,e){cc.log("equipSkill...",e);var i=0,n=_.default.getInstance().getPlayerSkillEquipInfo();if(null!=n){for(var a in n){var l=n[a];if(l.lockStatus==u.default.EQUIP_POS_STATUS.UNLOCK&&null==l.skillId){i=l.pos;break}}if(cc.log("\u7a7a\u95f2\u6280\u80fd\u88c5\u5907\u4f4d\u7f6e\uff1a",i),0!=i){f.default.getInstance().playCommonBtn();var o=Number(e),r=_.default.getInstance().getPlayerSkillEquipInfoByPos(i);r.skillId=o,_.default.getInstance().editPlayerSkillEquipInfo(i,r);var d=_.default.getInstance().getPlayerSkillInfoById(o);d.equip=u.default.EQUIP_STATUS_MENU.EQUIP,_.default.getInstance().editPlayerSkillInfo(o,d),this.closeDetailView(),this._updateAllSkillNode(),this._updateAllSkillEquipNode(),this._updateSkillAllEffect()}else A.default.getInstance().tipWithColor(this.node,"\u5f53\u524d\u6ca1\u6709\u7a7a\u95f2\u4f4d\u7f6e\u53ef\u4ee5\u88c5\u5907","#ffffff")}},e.prototype.notEquipSkill=function(t,e){cc.log("notEquipSkill..",e);var i=Number(e),n=_.default.getInstance().getPlayerSkillInfoById(i);if(null!=n&&n.equip!=u.default.EQUIP_STATUS_MENU.UN_EQUIP){f.default.getInstance().playCommonBtn(),n.equip=u.default.EQUIP_STATUS_MENU.UN_EQUIP,_.default.getInstance().editPlayerSkillInfo(i,n);var a=_.default.getInstance().getPlayerSkillEquipInfo();for(var l in a){var o=a[l];if(o.lockStatus==u.default.EQUIP_POS_STATUS.UNLOCK&&o.skillId==i){o.skillId=null,_.default.getInstance().editPlayerSkillEquipInfo(Number(l),o);break}}this.closeDetailView(),this._updateAllSkillNode(),this._updateAllSkillEquipNode(),this._updateSkillAllEffect()}},e.prototype.closeDetailView=function(){f.default.getInstance().playCommonBtn(),this.skillDetailNode.active=!1},e.prototype.toCallFunction=function(){f.default.getInstance().playCommonBtn(),this.node.active=!1,this.node.parent.getChildByName("call").active=!0},e.prototype.showLevelUpResult=function(t){if(cc.log("showLevelUpResult -> levelUpResult",t),!(null==t||t.length<=0)){this.levelUpResultContentNode.removeAllChildren();for(var e=0;e<t.length;e++){var i=t[e],n=i.skillId,a=i.startLevel,l=i.endLevel,o=u.default.getConfigById(n),r=s.default.getGradeConfig(o.grade),d=cc.instantiate(this.levelUpResultPrefab);p.default.getInstance().setBundleSpriteFrameByName(d.getComponent(cc.Sprite),r.pic),p.default.getInstance().setBundleSpriteFrameByName(d.getChildByName("pic").getComponent(cc.Sprite),o.pic),d.getChildByName("levelInfo").getChildByName("leftLevel").getComponent(cc.Label).string=a+"",d.getChildByName("levelInfo").getChildByName("rightLevel").getComponent(cc.Label).string=l+"",d.active=!0,this.levelUpResultContentNode.addChild(d)}this.node.getChildByName("levelUpDetail").active=!0}},e.prototype.closeLevelUpResult=function(){this.node.getChildByName("levelUpDetail").active=!1},l([I({type:cc.Node,tooltip:"\u6280\u80fd\u5217\u8868\u5185\u5bb9\u8282\u70b9"})],e.prototype,"skillListContentNode",void 0),l([I({type:cc.Node,tooltip:"\u6280\u80fd\u88c5\u5907\u5217\u8868\u5185\u5bb9\u8282\u70b9"})],e.prototype,"skillEquipListContentNode",void 0),l([I({type:cc.Prefab,tooltip:"\u6280\u80fd\u9884\u5236\u4f53"})],e.prototype,"skillPrefab",void 0),l([I({type:cc.Prefab,tooltip:"\u6280\u80fd\u88c5\u5907\u9884\u5236\u4f53"})],e.prototype,"skillEquipPrefab",void 0),l([I({type:cc.Button,tooltip:"\u53ec\u5524\u6280\u80fd\u6309\u94ae"})],e.prototype,"callButton",void 0),l([I({type:cc.Button,tooltip:"\u6279\u91cf\u5f3a\u5316\u6309\u94ae"})],e.prototype,"batchLevelUpButton",void 0),l([I({type:cc.Node,tooltip:"\u8be6\u7ec6\u4fe1\u606f\u8282\u70b9"})],e.prototype,"skillDetailNode",void 0),l([I({type:cc.Label,tooltip:"\u62e5\u6709\u6548\u679c"})],e.prototype,"effectValLabel",void 0),l([I({type:cc.Node,tooltip:"\u5f3a\u5316\u7ed3\u679c\u5185\u5bb9\u8282\u70b9"})],e.prototype,"levelUpResultContentNode",void 0),l([I({type:cc.Prefab,tooltip:"\u5f3a\u5316\u7ed3\u679c\u9884\u5236\u4f53"})],e.prototype,"levelUpResultPrefab",void 0),l([R],e)}(cc.Component);i.default=v,cc._RF.pop()},{"../config/AttrLevelConfig":"AttrLevelConfig","../config/CallConfig":"CallConfig","../config/ResPathKey":"ResPathKey","../config/SkillConfig":"SkillConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../manager/UnlockManager":"UnlockManager","../utils/ButtonUtil":"ButtonUtil","../utils/MathUtil":"MathUtil","./MainCtrl":"MainCtrl","./PlayerAttrCtrl":"PlayerAttrCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./TipCtrl":"TipCtrl"}],SpineUtil:[function(t,e,i){"use strict";cc._RF.push(e,"6c8d4QeDrJNJKewZSo5Mw36","SpineUtil");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){this._skeletonDatas={},this._superior={},this._soldierBundle=null}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype._isNull=function(t){return null==t||null==t},t.prototype._getSkeletonData=function(t,e){return this._skeletonDatas[t]?(this._addSuperiorData(t,e),this._skeletonDatas[t]):null},t.prototype._addSuperiorData=function(t,e){this._isNull(this._superior[e])&&(this._superior[e]={}),this._isNull(this._superior[e][t])&&(this._superior[e][t]=!0)},t.prototype._checkSuperior=function(t){var e=[];if(this._isNull(this._superior[t]))return e;for(var i in this._superior[t]){var n=!1;for(var a in this._superior)if(a!=t){for(var l in this._superior[a])if(l==i){n=!0;break}if(n)break}n||e.push(i)}return e},t.prototype._checkPathSuperior=function(t,e){var i=[];if(this._isNull(this._superior[e]))return i;var n=!1;for(var a in this._superior)if(a!=e)for(var l in this._superior[a])if(l==t){n=!0;break}return n||i.push(t),i},t.prototype.preloadSkeletonData=function(t,e,i){var n=this;if(this._skeletonDatas[t])return this._addSuperiorData(t,e),void i(t+"*@*"+e);cc.resources.load(t,sp.SkeletonData,function(a,l){if(a)return cc.log("loadSkeletonData err",a),void i(t+"*@*"+e);n._skeletonDatas[t]=l,n._addSuperiorData(t,e),l.addRef(),i(t+"*@*"+e)})},t.prototype.loadBundleSkeletonData=function(t,e){return void 0===e&&(e=""),n(this,void 0,Promise,function(){var i=this;return a(this,function(){return[2,new Promise(function(n){if(i._skeletonDatas[t])return i._addSuperiorData(t,e),void n(i._skeletonDatas[t]);cc.assetManager.getBundle("fenbao").load(t,sp.SkeletonData,function(a,l){a?n(null):(i._skeletonDatas[t]=l,i._addSuperiorData(t,e),l.addRef(),n(l))})})]})})},t.prototype.loadSkeletonData=function(t,e){return void 0===e&&(e=""),n(this,void 0,Promise,function(){var i=this;return a(this,function(){return[2,new Promise(function(n){if(i._skeletonDatas[t])return cc.log("loadskeletonData have ",t),i._addSuperiorData(t,e),void n(i._skeletonDatas[t]);cc.resources.load(t,sp.SkeletonData,function(a,l){if(a)return cc.warn("loadskeletonData err",a),void n(null);i._skeletonDatas[t]=l,i._addSuperiorData(t,e),l.addRef(),n(l)})})]})})},t.prototype.getBundleSkeletonData=function(t,e){return void 0===e&&(e=""),n(this,void 0,void 0,function(){var i;return a(this,function(n){switch(n.label){case 0:return[4,this.loadBundleSkeletonData(t,e)];case 1:return(i=n.sent())?[2,i]:[4,this.loadSkeletonData(t,e)];case 2:return[2,n.sent()]}})})},t.prototype.getSkeletonData=function(t,e){return void 0===e&&(e=""),n(this,void 0,void 0,function(){var i;return a(this,function(n){switch(n.label){case 0:return(i=this._getSkeletonData(t,e))?[2,i]:[4,this.loadSkeletonData(t,e)];case 1:return[2,n.sent()]}})})},t.prototype.playSpineAni=function(t,e,i,n,a){void 0===e&&(e=null),void 0===i&&(i=""),void 0===n&&(n=!1),void 0===a&&(a=!0),null!=t&&t.isValid?i?(t.isAnimationCached()||t.clearTracks(),t.setToSetupPose(),t.setAnimation(0,i,n),t.setCompleteListener(function(){a&&(t.node.active=!1),null!=e&&e()})):cc.warn("spine \u52a8\u753b\u540d\u4e3a\u7a7a",t.skeletonData.name,t.node.name):cc.warn("spine \u52a8\u753b\u4e3a\u7a7a",i)},t.prototype.playSpineAniByStart=function(t,e,i,n,a,l){if(void 0===e&&(e=null),void 0===i&&(i=""),void 0===n&&(n=0),void 0===a&&(a=!1),void 0===l&&(l=!0),null!=t&&t.isValid)if(i){t.isAnimationCached()||t.clearTracks(),t.setToSetupPose();var o=t.setAnimation(0,i,a);!o&&t.isAnimationCached()&&(o=t.getCurrent(0)),o.animationStart=n<=0||n>=1?Math.random():n,t.setCompleteListener(function(){o.animationStart=0,l&&(t.node.active=!1),null!=e&&e()})}else cc.warn("spine \u52a8\u753b\u540d\u4e3a\u7a7a",t.node.name);else cc.warn("spine \u52a8\u753b\u4e3a\u7a7a",i)},t.prototype.clearObject=function(t,e){var i=this._checkPathSuperior(t,e);this._superior[e]&&this._superior[e][t]&&delete this._superior[e][t];for(var n=0;n<i.length;++n)this._skeletonDatas[i[n]]&&(this._skeletonDatas[i[n]].decRef(),delete this._skeletonDatas[i[n]])},t.prototype.clearSuperiorObject=function(t){var e=this._checkSuperior(t);this._superior[t]&&delete this._superior[t];for(var i=0;i<e.length;++i)this._skeletonDatas[e[i]]&&(this._skeletonDatas[e[i]].decRef(),delete this._skeletonDatas[e[i]])},t.prototype.clearAllSuperiorObject=function(){for(var t in this._superior)this.clearSuperiorObject(t),delete this._superior[t]},t._instance=null,t}();i.default=l,cc._RF.pop()},{}],SpriteManager:[function(t,e,i){"use strict";cc._RF.push(e,"bfa0ehGNApMZYBtvvSCh32M","SpriteManager");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){this._spriteFrames={}}return t.getInstance=function(){return this._instance||(this._instance=new t,this._instance._init()),this._instance},t.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},t.prototype._init=function(){},t.prototype._destroy=function(){},t.prototype.setBundleSpriteFrameByName=function(t,e){return n(this,void 0,void 0,function(){var i;return a(this,function(n){switch(n.label){case 0:return t?Boolean(e)?[4,this.getBundleSpriteFrame(e)]:(cc.warn("setSpriteFrameByName spriteFrameName is null"),[2]):[2];case 1:return i=n.sent(),t&&cc.isValid(t)&&cc.isValid(t.node)&&i&&(t.spriteFrame=i),[2]}})})},t.prototype.getBundleSpriteFrame=function(t){return n(this,void 0,void 0,function(){var e;return a(this,function(i){switch(i.label){case 0:return(e=this._spriteFrames[t])?[2,e]:[4,this.loadBundleSpriteFrame(t)];case 1:return[2,i.sent()]}})})},t.prototype.loadBundleSpriteFrame=function(t){return n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){if(e._spriteFrames[t])i(e._spriteFrames[t]);else{var n=cc.assetManager.getBundle("fenbao");if(!n)return cc.warn("fenbao\u5206\u5305\u8fd8\u6ca1\u52a0\u8f7d,\u56fe\u7247\u8def\u5f84",t),void i(null);n.load(t,cc.SpriteFrame,function(n,a){if(n)return cc.warn("loadSpriteFrame err",t,n),void i(null);e._spriteFrames[t]=a,a.addRef(),i(a)})}})]})})},t.prototype.setSpriteFrameByName=function(t,e){return n(this,void 0,void 0,function(){var i;return a(this,function(n){switch(n.label){case 0:return t?Boolean(e)?[4,this.getSpriteFrame(e)]:(cc.warn("setSpriteFrameByName spriteFrameName is null"),[2]):[2];case 1:return i=n.sent(),t&&cc.isValid(t)&&cc.isValid(t.node)&&i&&(t.spriteFrame=i),[2]}})})},t.prototype.getSpriteFrame=function(t){return n(this,void 0,void 0,function(){var e;return a(this,function(i){switch(i.label){case 0:return(e=this._spriteFrames[t])?[2,e]:[4,this.loadSpriteFrame(t)];case 1:return[2,i.sent()]}})})},t.prototype.loadSpriteFrame=function(t){return n(this,void 0,Promise,function(){var e=this;return a(this,function(){return[2,new Promise(function(i){e._spriteFrames[t]?i(e._spriteFrames[t]):cc.resources.load(t,cc.SpriteFrame,function(n,a){if(n)return cc.warn("loadSpriteFrame err",t,n),void i(null);e._spriteFrames[t]=a,a.addRef(),i(a)})})]})})},t._instance=null,t}();i.default=l,cc._RF.pop()},{}],SpriteUtil:[function(t,e,i){"use strict";cc._RF.push(e,"31d5b7Vv7NMmIPK3L0eg2FA","SpriteUtil");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e._addSpritePic=function(t,e){t.spriteFrame=null,t&&e&&""!=e&&cc.assetManager.resources.load(e,cc.SpriteFrame,function(e,i){t.spriteFrame=i})},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],TaskConfig:[function(t,e,i){"use strict";cc._RF.push(e,"a164dl4WdZLfYNo6cfuDLhd","TaskConfig");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0}),i.TaskBasic=i.DailyTaskBasic=void 0;var a=t("./AttrLevelConfig"),l=t("./ChallengeConfig"),o=cc._decorator,r=o.ccclass,d=(o.property,function(){function t(){}var e;return e=t,t.loadConfigMap=function(){for(var t=0;t<this.CONFIG.length;t++){var e=this.CONFIG[t];this.CONFIG_MAP.set(e.id,e)}this.loadDailyTaskConfigMap()},t.loadDailyTaskConfigMap=function(){for(var t=0;t<this.DAILY_TASK_CONFIG.length;t++){var e=this.DAILY_TASK_CONFIG[t];this.DAILY_TASK_CONFIG_MAP.set(e.id,e)}},t.getConfigById=function(t){return this.CONFIG_MAP.get(t)},t.getDailyTaskConfigById=function(t){return this.DAILY_TASK_CONFIG_MAP.get(t)},t.hastNextTask=function(t){return t+1<this.CONFIG.length},t.TASK_CONDITION_TYPE={ATTR_LEVEL:1,CHAPTER_LEVEL:2,CHALLENGE_LEVEL:3},t.DAILY_TASK_CONDITION_TYPE={GOLD_CHALLENGE:1,DIAMOND_CHALLENGE:2,CALL:3,AD:4,KILL:5,CHAPTER:6,GENERAL_EXP_CHALLENGE:7},t.DAILY_TASK_CONFIG=[{id:1,desc:"\u5b8c\u6210\u94bb\u77f3\u526f\u672c",isAd:!1,condition:{type:e.DAILY_TASK_CONDITION_TYPE.DIAMOND_CHALLENGE,count:1},reward:{itemId:1006,itemCount:100}},{id:2,desc:"\u5b8c\u6210\u94bb\u77f3\u526f\u672c",isAd:!1,condition:{type:e.DAILY_TASK_CONDITION_TYPE.DIAMOND_CHALLENGE,count:2},reward:{itemId:1006,itemCount:200}},{id:3,isAd:!1,desc:"\u5b8c\u6210\u91d1\u5e01\u526f\u672c",condition:{type:e.DAILY_TASK_CONDITION_TYPE.GOLD_CHALLENGE,count:1},reward:{itemId:1006,itemCount:100}},{id:4,isAd:!1,desc:"\u5b8c\u6210\u91d1\u5e01\u526f\u672c",condition:{type:e.DAILY_TASK_CONDITION_TYPE.GOLD_CHALLENGE,count:2},reward:{itemId:1006,itemCount:200}},{id:5,isAd:!1,desc:"\u5b8c\u6210\u7ecf\u9a8c\u526f\u672c",condition:{type:e.DAILY_TASK_CONDITION_TYPE.GENERAL_EXP_CHALLENGE,count:1},reward:{itemId:1006,itemCount:100}},{id:6,isAd:!1,desc:"\u5b8c\u6210\u7ecf\u9a8c\u526f\u672c",condition:{type:e.DAILY_TASK_CONDITION_TYPE.GENERAL_EXP_CHALLENGE,count:2},reward:{itemId:1006,itemCount:200}},{id:7,isAd:!1,desc:"\u53ec\u5524",condition:{type:e.DAILY_TASK_CONDITION_TYPE.CALL,count:10},reward:{itemId:1006,itemCount:100}},{id:8,isAd:!1,desc:"\u53ec\u5524",condition:{type:e.DAILY_TASK_CONDITION_TYPE.CALL,count:20},reward:{itemId:1006,itemCount:200}},{id:9,isAd:!1,desc:"\u5b8c\u6210\u5173\u5361",condition:{type:e.DAILY_TASK_CONDITION_TYPE.CHAPTER,count:5},reward:{itemId:1006,itemCount:100}},{id:10,isAd:!1,desc:"\u5b8c\u6210\u5173\u5361",condition:{type:e.DAILY_TASK_CONDITION_TYPE.CHAPTER,count:10},reward:{itemId:1006,itemCount:200}},{id:11,isAd:!1,desc:"\u51fb\u8d25\u654c\u4eba",condition:{type:e.DAILY_TASK_CONDITION_TYPE.KILL,count:100},reward:{itemId:1006,itemCount:100}},{id:12,isAd:!1,desc:"\u51fb\u8d25\u654c\u4eba",condition:{type:e.DAILY_TASK_CONDITION_TYPE.KILL,count:200},reward:{itemId:1006,itemCount:200}},{id:13,isAd:!0,desc:"\u51fb\u8d25\u654c\u4eba",condition:{type:e.DAILY_TASK_CONDITION_TYPE.KILL,count:200},reward:{itemId:1006,itemCount:200}},{id:14,isAd:!1,desc:"\u51fb\u8d25\u654c\u4eba",condition:{type:e.DAILY_TASK_CONDITION_TYPE.KILL,count:500},reward:{itemId:1006,itemCount:250}},{id:15,isAd:!1,desc:"\u51fb\u8d25\u654c\u4eba",condition:{type:e.DAILY_TASK_CONDITION_TYPE.KILL,count:1e3},reward:{itemId:1006,itemCount:500}},{id:16,isAd:!1,desc:"\u89c2\u770b\u5e7f\u544a",condition:{type:e.DAILY_TASK_CONDITION_TYPE.AD,count:1},reward:{itemId:1006,itemCount:200}},{id:17,isAd:!1,desc:"\u89c2\u770b\u5e7f\u544a",condition:{type:e.DAILY_TASK_CONDITION_TYPE.AD,count:2},reward:{itemId:1006,itemCount:500}},{id:18,isAd:!1,desc:"\u89c2\u770b\u5e7f\u544a",condition:{type:e.DAILY_TASK_CONDITION_TYPE.AD,count:5},reward:{itemId:1006,itemCount:1500}},{id:19,isAd:!1,desc:"\u89c2\u770b\u5e7f\u544a",condition:{type:e.DAILY_TASK_CONDITION_TYPE.AD,count:10},reward:{itemId:1006,itemCount:3e3}}],t.CONFIG=[{id:1,name:"\u4efb\u52a11",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u52302\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:2},reward:{itemId:1006,itemCount:10}},{id:2,name:"\u4efb\u52a12",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:5},reward:{itemId:1006,itemCount:20}},{id:3,name:"\u4efb\u52a13",desc:"\u751f\u547d\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:5},reward:{itemId:1006,itemCount:20}},{id:4,name:"\u4efb\u52a14",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a1-2",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:2},reward:{itemId:1006,itemCount:20}},{id:5,name:"\u4efb\u52a15",desc:"\u751f\u547d\u6062\u590d\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP_RESTORE,level:5},reward:{itemId:1006,itemCount:20}},{id:6,name:"\u4efb\u52a16",desc:"\u66b4\u51fb\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT,level:5},reward:{itemId:1006,itemCount:20}},{id:7,name:"\u4efb\u52a17",desc:"\u66b4\u51fb\u4f24\u5bb3\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT_DAMAGE,level:5},reward:{itemId:1006,itemCount:20}},{id:8,name:"\u4efb\u52a18",desc:"\u653b\u51fb\u901f\u5ea6\u5f3a\u5316\u52305\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK_SPEED,level:5},reward:{itemId:1006,itemCount:20}},{id:9,name:"\u4efb\u52a19",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a1-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:3},reward:{itemId:1006,itemCount:25}},{id:10,name:"\u4efb\u52a110",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a1-5",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:5},reward:{itemId:1006,itemCount:25}},{id:11,name:"\u4efb\u52a111",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea61",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:1},reward:{itemId:1006,itemCount:25}},{id:12,name:"\u4efb\u52a112",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea61",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:1},reward:{itemId:1006,itemCount:25}},{id:13,name:"\u4efb\u52a113",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u523015\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:15},reward:{itemId:1006,itemCount:25}},{id:14,name:"\u4efb\u52a114",desc:"\u751f\u547d\u5f3a\u5316\u523015\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:15},reward:{itemId:1006,itemCount:25}},{id:15,name:"\u4efb\u52a115",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u523050\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:50},reward:{itemId:1006,itemCount:25}},{id:16,name:"\u4efb\u52a116",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a1-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:8},reward:{itemId:1006,itemCount:25}},{id:17,name:"\u4efb\u52a117",desc:"\u751f\u547d\u6062\u590d\u5f3a\u5316\u523015\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP_RESTORE,level:15},reward:{itemId:1006,itemCount:25}},{id:18,name:"\u4efb\u52a118",desc:"\u66b4\u51fb\u5f3a\u5316\u523010\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT,level:10},reward:{itemId:1006,itemCount:25}},{id:19,name:"\u4efb\u52a119",desc:"\u66b4\u51fb\u4f24\u5bb3\u5f3a\u5316\u523015\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT_DAMAGE,level:15},reward:{itemId:1006,itemCount:25}},{id:20,name:"\u4efb\u52a120",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a2-1",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:11},reward:{itemId:1006,itemCount:30}},{id:21,name:"\u4efb\u52a121",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u523080\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:80},reward:{itemId:1006,itemCount:30}},{id:22,name:"\u4efb\u52a122",desc:"\u751f\u547d\u5f3a\u5316\u523050\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:50},reward:{itemId:1006,itemCount:30}},{id:23,name:"\u4efb\u52a123",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a2-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:13},reward:{itemId:1006,itemCount:30}},{id:24,name:"\u4efb\u52a124",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a2-5",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:15},reward:{itemId:1006,itemCount:35}},{id:25,name:"\u4efb\u52a125",desc:"\u653b\u51fb\u5f3a\u5316\u5230100\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:100},reward:{itemId:1006,itemCount:35}},{id:26,name:"\u4efb\u52a126",desc:"\u751f\u547d\u5f3a\u5316\u523080\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:80},reward:{itemId:1006,itemCount:35}},{id:27,name:"\u4efb\u52a127",desc:"\u66b4\u51fb\u4f24\u5bb3\u5f3a\u5316\u523035\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT_DAMAGE,level:35},reward:{itemId:1006,itemCount:35}},{id:28,name:"\u4efb\u52a128",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a2-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:18},reward:{itemId:1006,itemCount:40}},{id:29,name:"\u4efb\u52a129",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea62",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:2},reward:{itemId:1006,itemCount:40}},{id:30,name:"\u4efb\u52a130",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea62",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:2},reward:{itemId:1006,itemCount:40}},{id:31,name:"\u4efb\u52a131",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u5230150\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:150},reward:{itemId:1006,itemCount:40}},{id:32,name:"\u4efb\u52a132",desc:"\u751f\u547d\u5f3a\u5316\u5230100\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:100},reward:{itemId:1006,itemCount:40}},{id:33,name:"\u4efb\u52a133",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a2-10",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:20},reward:{itemId:1006,itemCount:50}},{id:34,name:"\u4efb\u52a134",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a3-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:23},reward:{itemId:1006,itemCount:50}},{id:35,name:"\u4efb\u52a135",desc:"\u653b\u51fb\u5f3a\u5316\u5230180\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:180},reward:{itemId:1006,itemCount:55}},{id:36,name:"\u4efb\u52a136",desc:"\u751f\u547d\u5f3a\u5316\u5230120\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:120},reward:{itemId:1006,itemCount:55}},{id:37,name:"\u4efb\u52a137",desc:"\u66b4\u51fb\u4f24\u5bb3\u5f3a\u5316\u523050\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.CRIT_DAMAGE,level:50},reward:{itemId:1006,itemCount:55}},{id:38,name:"\u4efb\u52a138",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a3-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:28},reward:{itemId:1006,itemCount:60}},{id:39,name:"\u4efb\u52a139",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea63",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:3},reward:{itemId:1006,itemCount:80}},{id:40,name:"\u4efb\u52a140",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea63",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:3},reward:{itemId:1006,itemCount:80}},{id:41,name:"\u4efb\u52a141",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u5230250\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:250},reward:{itemId:1006,itemCount:80}},{id:42,name:"\u4efb\u52a142",desc:"\u751f\u547d\u5f3a\u5316\u5230180\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:180},reward:{itemId:1006,itemCount:80}},{id:43,name:"\u4efb\u52a143",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a3-10",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:30},reward:{itemId:1006,itemCount:90}},{id:44,name:"\u4efb\u52a144",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a4-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:33},reward:{itemId:1006,itemCount:95}},{id:45,name:"\u4efb\u52a145",desc:"\u653b\u51fb\u5f3a\u5316\u5230300\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:300},reward:{itemId:1006,itemCount:95}},{id:46,name:"\u4efb\u52a146",desc:"\u751f\u547d\u5f3a\u5316\u5230200\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:200},reward:{itemId:1006,itemCount:95}},{id:47,name:"\u4efb\u52a147",desc:"\u751f\u547d\u6062\u590d\u5f3a\u5316\u5230\u523080\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP_RESTORE,level:80},reward:{itemId:1006,itemCount:95}},{id:48,name:"\u4efb\u52a148",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a4-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:38},reward:{itemId:1006,itemCount:100}},{id:49,name:"\u4efb\u52a149",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea64",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:4},reward:{itemId:1006,itemCount:110}},{id:50,name:"\u4efb\u52a150",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea64",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:4},reward:{itemId:1006,itemCount:110}},{id:51,name:"\u4efb\u52a151",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u5230650\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:650},reward:{itemId:1006,itemCount:150}},{id:52,name:"\u4efb\u52a152",desc:"\u751f\u547d\u5f3a\u5316\u5230300\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:300},reward:{itemId:1006,itemCount:150}},{id:53,name:"\u4efb\u52a153",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a4-10",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:40},reward:{itemId:1006,itemCount:150}},{id:54,name:"\u4efb\u52a154",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a5-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:43},reward:{itemId:1006,itemCount:150}},{id:55,name:"\u4efb\u52a155",desc:"\u653b\u51fb\u5f3a\u5316\u5230800\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:800},reward:{itemId:1006,itemCount:200}},{id:56,name:"\u4efb\u52a156",desc:"\u751f\u547d\u5f3a\u5316\u5230500\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:500},reward:{itemId:1006,itemCount:200}},{id:57,name:"\u4efb\u52a157",desc:"\u751f\u547d\u6062\u590d\u5f3a\u5316\u5230\u5230200\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP_RESTORE,level:200},reward:{itemId:1006,itemCount:200}},{id:58,name:"\u4efb\u52a158",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a5-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:48},reward:{itemId:1006,itemCount:200}},{id:59,name:"\u4efb\u52a159",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea65",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:5},reward:{itemId:1006,itemCount:200}},{id:60,name:"\u4efb\u52a160",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea65",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:5},reward:{itemId:1006,itemCount:200}},{id:61,name:"\u4efb\u52a161",desc:"\u653b\u51fb\u529b\u5f3a\u5316\u52301100\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:1100},reward:{itemId:1006,itemCount:300}},{id:62,name:"\u4efb\u52a162",desc:"\u751f\u547d\u5f3a\u5316\u5230800\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:800},reward:{itemId:1006,itemCount:300}},{id:63,name:"\u4efb\u52a163",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a5-10",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:50},reward:{itemId:1006,itemCount:300}},{id:64,name:"\u4efb\u52a164",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a6-3",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:53},reward:{itemId:1006,itemCount:300}},{id:65,name:"\u4efb\u52a165",desc:"\u653b\u51fb\u5f3a\u5316\u52301300\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.ATK,level:1300},reward:{itemId:1006,itemCount:300}},{id:66,name:"\u4efb\u52a166",desc:"\u751f\u547d\u5f3a\u5316\u52301000\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP,level:1e3},reward:{itemId:1006,itemCount:300}},{id:67,name:"\u4efb\u52a167",desc:"\u751f\u547d\u6062\u590d\u5f3a\u5316\u5230\u5230500\u7ea7",condition:{type:e.TASK_CONDITION_TYPE.ATTR_LEVEL,attrKey:a.default.ATTR_KEY.HP_RESTORE,level:500},reward:{itemId:1006,itemCount:300}},{id:68,name:"\u4efb\u52a168",desc:"\u901a\u8fc7\u8bd5\u70bc\u573a6-8",condition:{type:e.TASK_CONDITION_TYPE.CHAPTER_LEVEL,chapterId:58},reward:{itemId:1006,itemCount:300}},{id:69,name:"\u4efb\u52a169",desc:"\u901a\u8fc7\u91d1\u5e01\u526f\u672c\u96be\u5ea66",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.GOLD,level:6},reward:{itemId:1006,itemCount:300}},{id:70,name:"\u4efb\u52a170",desc:"\u901a\u8fc7\u94bb\u77f3\u526f\u672c\u96be\u5ea66",condition:{type:e.TASK_CONDITION_TYPE.CHALLENGE_LEVEL,challengeId:l.default.CALL_FUNCTION.DIAMOND,level:6},reward:{itemId:1006,itemCount:300}}],t.CONFIG_MAP=new Map,t.DAILY_TASK_CONFIG_MAP=new Map,n([r],t)}());i.default=d;i.DailyTaskBasic=function(){this.id=null,this.isAd=null,this.desc=null,this.condition=null,this.reward=null};i.TaskBasic=function(){this.id=null,this.name=null,this.desc=null,this.condition=null,this.reward=null},cc._RF.pop()},{"./AttrLevelConfig":"AttrLevelConfig","./ChallengeConfig":"ChallengeConfig"}],TaskCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"a5662jIBzVNzbD3cgAZXq1U","TaskCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../config/ItemConfig"),r=t("../config/TaskConfig"),d=t("../manager/AudioManager"),s=t("../manager/SpriteManager"),c=t("../utils/TxtUtil"),u=t("./IndexCtrl"),f=t("./MainCtrl"),p=t("./PlayerCacheCtrl"),h=t("./task/DailyTaskCtrl"),m=cc._decorator,g=m.ccclass,T=m.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelTaskNode=null,e.dailyTaskIconNode=null,e.dailyTaskNode=null,e.dailyTaskContentNode=null,e.dailyTaskPrefab=null,e._dailyTaskInfoList=[],e._taskConfig=null,e._taskComplete=!1,e._lastCheckLevelTaskTime=0,e._lastCheckDailyTaskTime=0,e._currTime=0,e._labelColor={NOT_COMPLETE:"#ffffff",NOT_COMPLETE_LINE:"#000000",COMPLETE:"#ffea7e",COMPLE_LINE:"#473323"},e}return a(e,t),e.prototype.onEnable=function(){this.init()},e.prototype.update=function(t){this._currTime+=1e3*t,this.checkLevelTaskComplete(),this.checkDailyTaskComplete()},e.prototype.init=function(){this.initLevelTask(),this._initDailyTaskList()},e.prototype.initLevelTask=function(){var t=p.default.getInstance().getPlayerTaskId();this.loadLevelTask(t)},e.prototype.loadLevelTask=function(t){this._taskComplete=!1;var e=r.default.getConfigById(t);if(null==e)return this.levelTaskNode.active=!1,void(this._taskConfig=null);this._taskConfig=e,this.updateLevelTaskView(),this.levelTaskNode.active=!0},e.prototype.updateLevelTaskView=function(){if(null!=this._taskConfig){var t=this._taskConfig.reward,e=t.itemId,i=o.default.getConfigById(e);if(null!=i){var n=t.itemCount,a=this.levelTaskNode.getChildByName("level").getComponent(cc.Label),l=this.levelTaskNode.getChildByName("desc").getComponent(cc.Label),r=this.levelTaskNode.getChildByName("reward").getChildByName("itemCount").getComponent(cc.Label),d=this.levelTaskNode.getChildByName("level").getComponent(cc.LabelOutline),u=this.levelTaskNode.getChildByName("desc").getComponent(cc.LabelOutline),f=this.levelTaskNode.getChildByName("reward").getChildByName("itemCount").getComponent(cc.LabelOutline),p=this.levelTaskNode.getChildByName("redPoint"),h=this.levelTaskNode.getChildByName("light"),m=null,g=null;this._taskComplete?(m=this._labelColor.COMPLETE,g=this._labelColor.COMPLE_LINE,a.string="\u9886\u53d6\u5956\u52b1",p.active=!0,h.active=!0):(m=this._labelColor.NOT_COMPLETE,g=this._labelColor.NOT_COMPLETE_LINE,a.string=this._taskConfig.name,p.active=!1,h.active=!1),a.node.color=(new cc.Color).fromHEX(m),l.node.color=(new cc.Color).fromHEX(m),r.node.color=(new cc.Color).fromHEX(m),d.color=(new cc.Color).fromHEX(g),u.color=(new cc.Color).fromHEX(g),f.color=(new cc.Color).fromHEX(g),l.string=this._taskConfig.desc,r.string=c.default.parseTxt(String(n)),s.default.getInstance().setBundleSpriteFrameByName(this.levelTaskNode.getChildByName("reward").getChildByName("itemPic").getComponent(cc.Sprite),i.srcPath)}}},e.prototype.checkLevelTaskComplete=function(){if(null!=this._taskConfig&&!(this._taskComplete||this._lastCheckLevelTaskTime+500>this._currTime)){var t=this._taskConfig.condition.type,e=!1;t==r.default.TASK_CONDITION_TYPE.ATTR_LEVEL?e=this.checkLevelTaskCompleteByAttrLevel():t==r.default.TASK_CONDITION_TYPE.CHAPTER_LEVEL?e=this.checkLevelTaskCompleteByChapterLevel():t==r.default.TASK_CONDITION_TYPE.CHALLENGE_LEVEL&&(e=this.checkLevelTaskCompleteByChallengeLevel()),e&&(this._taskComplete=!0,this.updateLevelTaskView()),this._lastCheckLevelTaskTime=this._currTime}},e.prototype.checkDailyTaskComplete=function(){if(null!=this._dailyTaskInfoList&&0!=this._dailyTaskInfoList.length&&!(this._lastCheckDailyTaskTime+500>this._currTime)){for(var t=this.dailyTaskIconNode.getChildByName("redPoint"),e=!1,i=0;i<this._dailyTaskInfoList.length;i++)this._dailyTaskInfoList[i].node.getComponent(h.default).checkCanReceive()&&(e=!0);e?t.active||(t.active=!0):t.active&&(t.active=!1),this._lastCheckDailyTaskTime=this._currTime}},e.prototype.checkLevelTaskCompleteByAttrLevel=function(){var t=this._taskConfig.condition.attrKey,e=this._taskConfig.condition.level;return p.default.getInstance().getPlayerAttrLevelInfo(t).level>=e},e.prototype.checkLevelTaskCompleteByChapterLevel=function(){var t=this._taskConfig.condition.chapterId;return p.default.getInstance().getPlayerChapterInfo().chapterId>t},e.prototype.checkLevelTaskCompleteByChallengeLevel=function(){var t=this._taskConfig.condition.challengeId,e=this._taskConfig.condition.level;return p.default.getInstance().getPlayerChallengeInfo(t).level>e},e.prototype.receiveLevelTask=function(){if(this._taskComplete){var t=this._taskConfig.reward,e=t.itemId,i=o.default.getConfigById(e);if(null!=i){var n=t.itemCount;p.default.getInstance().addPlayerItem(e,n);var a=this.node.convertToNodeSpaceAR(this.levelTaskNode.convertToWorldSpaceAR(cc.Vec2.ZERO)),l=this.node.getComponent(f.default);d.default.getInstance().playGainReward(),l.showReward(i,n,a.x,a.y,2);var r=this._taskConfig.id+1;p.default.getInstance().setPlayerTaskId(r),this.loadLevelTask(r)}}else if(null!=this._taskConfig){var s=this._taskConfig.condition.type;this.toFuntion(s)}},e.prototype.toFuntion=function(t){t==r.default.TASK_CONDITION_TYPE.ATTR_LEVEL?this.node.parent.getComponent(u.default).allFunctionHidden():t==r.default.TASK_CONDITION_TYPE.CHAPTER_LEVEL?this.node.parent.getComponent(u.default).allFunctionHidden():t==r.default.TASK_CONDITION_TYPE.CHALLENGE_LEVEL&&this.node.parent.getComponent(u.default).toFunction(null,"4")},e.prototype._initDailyTaskList=function(){this._dailyTaskInfoList=[],this.dailyTaskContentNode.removeAllChildren(),this.dailyTaskNode.active=!0;for(var t=0;t<r.default.DAILY_TASK_CONFIG.length;t++){var e=r.default.DAILY_TASK_CONFIG[t];this._initDailyTask(e)}this.dailyTaskNode.active=!1},e.prototype._initDailyTask=function(t){var e=cc.instantiate(this.dailyTaskPrefab),i={id:t.id,node:e};this._dailyTaskInfoList.push(i),e.getComponent(h.default).init(this.node,t),this.dailyTaskContentNode.addChild(e)},e.prototype.showDailyTaskView=function(){d.default.getInstance().playCommonBtn(),this.dailyTaskNode.active=!0;for(var t=[],e=0;e<this._dailyTaskInfoList.length;e++){var i={sort:(n=this._dailyTaskInfoList[e].node).getComponent(h.default).getSort(),node:n};t.push(i)}for(t.sort(function(t,e){return t.sort-e.sort}),this.dailyTaskContentNode.removeAllChildren(),e=0;e<t.length;e++){var n=t[e].node;this.dailyTaskContentNode.addChild(n),n.getComponent(h.default).updateNode()}},e.prototype.closeDailyTaskView=function(){d.default.getInstance().playCommonBtn(),this.dailyTaskNode.active=!1},l([T({type:cc.Node,tooltip:"\u6210\u957f\u4efb\u52a1\u754c\u9762"})],e.prototype,"levelTaskNode",void 0),l([T({type:cc.Node,tooltip:"\u6bcf\u65e5\u4efb\u52a1Icon"})],e.prototype,"dailyTaskIconNode",void 0),l([T({type:cc.Node,tooltip:"\u6bcf\u65e5\u4efb\u52a1\u8282\u754c\u9762"})],e.prototype,"dailyTaskNode",void 0),l([T({type:cc.Node,tooltip:"\u6bcf\u65e5\u4efb\u52a1\u5185\u5bb9\u8282\u70b9"})],e.prototype,"dailyTaskContentNode",void 0),l([T({type:cc.Prefab,tooltip:"\u6bcf\u65e5\u4efb\u52a1\u9884\u5236\u4f53"})],e.prototype,"dailyTaskPrefab",void 0),l([g],e)}(cc.Component);i.default=y,cc._RF.pop()},{"../config/ItemConfig":"ItemConfig","../config/TaskConfig":"TaskConfig","../manager/AudioManager":"AudioManager","../manager/SpriteManager":"SpriteManager","../utils/TxtUtil":"TxtUtil","./IndexCtrl":"IndexCtrl","./MainCtrl":"MainCtrl","./PlayerCacheCtrl":"PlayerCacheCtrl","./task/DailyTaskCtrl":"DailyTaskCtrl"}],TipCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"6df3b0VU8xEX5AwUnUkyTND","TipCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o},o=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(a,l){function o(t){try{d(n.next(t))}catch(e){l(e)}}function r(t){try{d(n.throw(t))}catch(e){l(e)}}function d(t){var e;t.done?a(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(o,r)}d((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(t){return function(e){return d([t,e])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(r){l=[6,r],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var d=t("./TipLabelCtrl"),s=t("../config/ResPathKey"),c=t("../manager/ObjectManager"),u=t("./DamageCtrl"),f=cc._decorator,p=f.ccclass,h=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.damageNodeList=[],e}var i;return a(e,t),i=e,e.getInstance=function(){return this._instance||(this._instance=new i,this._instance._init()),this._instance},e.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},e.prototype._init=function(){},e.prototype._destroy=function(){},e.prototype.tipWithColor=function(t,e,i,n){return void 0===n&&(n=null),o(this,void 0,void 0,function(){var a,l,o;return r(this,function(r){switch(r.label){case 0:return a=1e3,[4,c.default.getInstance().getObjectPrefab(s.default.TIP_PREFAB)];case 1:return l=r.sent(),o=cc.instantiate(l),i&&(o.color=(new cc.Color).fromHEX(i)),n&&o.setPosition(n),o.getComponent(d.default).init(e,a),o.zIndex=100,t.addChild(o),o.active=!0,[2]}})})},e.prototype.tip=function(t,e){return o(this,void 0,void 0,function(){return r(this,function(){return this.tipWithColor(t,e,null),[2]})})},e.prototype.damageWithColor=function(t,e,i,n){return void 0===n&&(n=null),o(this,void 0,void 0,function(){var a,l;return r(this,function(o){switch(o.label){case 0:return[4,c.default.getInstance().getObjectPrefab(s.default.DAMAGE_PREFAB)];case 1:return a=o.sent(),null==(l=this.damageNodeList.pop())&&(l=cc.instantiate(a)),t.addChild(l),l.color=i?(new cc.Color).fromHEX(i):(new cc.Color).fromHEX("#ffffff"),n&&l.setPosition(n),l.getComponent(u.default).init(e),[2]}})})},e.prototype.recoverDamageNode=function(t,e){t.removeChild(e),this.damageNodeList.push(e)},e._instance=null,i=l([p],e)}(cc.Component));i.default=h,cc._RF.pop()},{"../config/ResPathKey":"ResPathKey","../manager/ObjectManager":"ObjectManager","./DamageCtrl":"DamageCtrl","./TipLabelCtrl":"TipLabelCtrl"}],TipLabelCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"19533nDcBdHM6H+KSoCrN8O","TipLabelCtrl");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=null,e.currTime=0,e}return a(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e){this.duration=e,this.node.getComponent(cc.Label).string=t},e.prototype.update=function(t){if(this.currTime+=1e3*t,this.currTime>=this.duration)this.node.destroy();else{var e=this.node.getPosition().x,i=this.node.getPosition().y+1;this.node.setPosition(cc.v2(e,i))}},l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],TxtUtil:[function(t,e,i){"use strict";cc._RF.push(e,"87e9dGxz8RDCJHw0gsf2WVU","TxtUtil");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,r=o.ccclass,d=(o.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.parseTxt=function(t){var e=t.length;if(e<=3)return t;var i=Math.floor((e-1)/3),n=e%3;n=0==n?3:n;for(var a="",l=0;l<n;l++)a+=t[l];return a+=".",a+=t[n],(a+=t[n+1])+this.UNITS[i]},e.UNITS=["","K","M","B","T","aa","bb","cc","dd","ee","ff","gg","hh","ii","jj","kk","ll","mm","nn","oo","pp","qq","rr","ss","tt","uu","vv","ww","xx","yy","zz"],l([r],e)}(cc.Component));i.default=d,cc._RF.pop()},{}],UnlockManager:[function(t,e,i){"use strict";cc._RF.push(e,"87502E5Ch1L4IwTk7nYAMYJ","UnlockManager");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var l=t("../ctrl/PlayerCacheCtrl"),o=t("../config/ItemConfig"),r=t("../config/PlayerLevelConfig"),d=t("../config/ChapterConfig"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._clips={},e}return a(e,t),e.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},e.destroyInstance=function(){this._instance&&(this._instance._destroy(),delete this._instance,this._instance=null)},e.prototype._init=function(){},e.prototype._destroy=function(){},e.prototype.getUnlockDesc=function(t,i){return t==e.UNLOCK_TYPE.FREE?this.getUnlockDescByFree(i):t==e.UNLOCK_TYPE.ITEM?this.getUnlockDescByItem(i):t==e.UNLOCK_TYPE.ADVERT?this.getUnlockDescByAdvert(i):t==e.UNLOCK_TYPE.PLAYER_LEVEL?this.getUnlockDescByPlayerLevel(i):t==e.UNLOCK_TYPE.CHAPTER?this.getUnlockDescByChapter(i):"\u65e0"},e.prototype.getUnlockDescByFree=function(){return"\u514d\u8d39\u83b7\u5f97"},e.prototype.getUnlockDescByItem=function(t){if(null==t||null==t.itemId||null==t.itemCount)return"\u6682\u4e0d\u53ef\u83b7\u53d6";var e=t.itemId,i=t.itemCount;return"\u6d88\u8017"+o.default.getConfigById(e).name+"*"+i+"\u53ef\u83b7\u5f97"},e.prototype.getUnlockDescByAdvert=function(t){return null==t||t<=1?"\u89c2\u770b\u5e7f\u544a\u540e\u53ef\u83b7\u5f97":"\u89c2\u770b"+t+"\u6b21\u5e7f\u544a\u540e\u53ef\u83b7\u5f97"},e.prototype.getUnlockDescByPlayerLevel=function(t){var e=Number(t),i=r.default.getConfigByLevel(e);return null==i?"\u6682\u4e0d\u53ef\u83b7\u53d6":"\u73a9\u5bb6\u9636\u7ea7\u5230\u8fbe"+i.name+"\u540e\u53ef\u83b7\u5f97"},e.prototype.getUnlockDescByChapter=function(t){var e=Number(t),i=d.default.getConfigById(e);return null==i?"\u6682\u4e0d\u53ef\u83b7\u53d6":"\u901a\u8fc7"+i.name+"\u540e\u53ef\u89e3\u9501"},e.prototype.unlock=function(t,i){return t==e.UNLOCK_TYPE.FREE?this.unlockByFree(i):t==e.UNLOCK_TYPE.ITEM?this.unlockByItem(i):t==e.UNLOCK_TYPE.ADVERT?this.unlockByAdvert(i):t==e.UNLOCK_TYPE.PLAYER_LEVEL?this.unlockByPlayerLevel(i):t==e.UNLOCK_TYPE.CHAPTER&&this.unlockByChapter(i)},e.prototype.unlockByFree=function(){return!0},e.prototype.unlockByItem=function(t){if(null==t||null==t.itemId||null==t.itemCount)return!1;var e=t.itemId,i=t.itemCount;return l.default.getInstance().costPlayerItem(e,i)},e.prototype.unlockByAdvert=function(){return!0},e.prototype.unlockByPlayerLevel=function(t){var e=Number(t);return l.default.getInstance().getPlayerLevel()>=e},e.prototype.unlockByChapter=function(t){var e=Number(t);return l.default.getInstance().getPlayerChapterInfo().chapterId>=e},e.UNLOCK_TYPE={FREE:0,ITEM:1,ADVERT:2,PLAYER_LEVEL:3,CHAPTER:4},e._instance=null,e}(cc.Component);i.default=s,cc._RF.pop()},{"../config/ChapterConfig":"ChapterConfig","../config/ItemConfig":"ItemConfig","../config/PlayerLevelConfig":"PlayerLevelConfig","../ctrl/PlayerCacheCtrl":"PlayerCacheCtrl"}],WxAdUtil:[function(t,e,i){"use strict";var n,a,l;cc._RF.push(e,"b9239BQSftCB7wa4I6g/TOh","WxAdUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.WxAdItem=i.WxAdUnitIdEnum=i.WxAdTypeEnum=i.WxAdPosEnum=void 0,function(t){t[t.WX_AD_POS_CENTER=0]="WX_AD_POS_CENTER",t[t.WX_AD_POS_BOTTOM=1]="WX_AD_POS_BOTTOM",t[t.WX_AD_POS_TOP=2]="WX_AD_POS_TOP",t[t.WX_AD_POS_LEFT=3]="WX_AD_POS_LEFT",t[t.WX_AD_POS_RIGHT=4]="WX_AD_POS_RIGHT",t[t.WX_AD_POS_CENTER_BOTTOM=5]="WX_AD_POS_CENTER_BOTTOM"}(n=i.WxAdPosEnum||(i.WxAdPosEnum={})),function(t){t[t.WX_AD_TYPE_BANNER=1]="WX_AD_TYPE_BANNER",t[t.WX_AD_TYPE_REWARD=3]="WX_AD_TYPE_REWARD"}(a=i.WxAdTypeEnum||(i.WxAdTypeEnum={})),function(t){t[t.Test=0]="Test",t[t.MeirijingxuanJinbi1=10]="MeirijingxuanJinbi1",t[t.MeirijingxuanJinbi2=11]="MeirijingxuanJinbi2",t[t.MeirijingxuanJinbi3=12]="MeirijingxuanJinbi3",t[t.ZantingBanner=50]="ZantingBanner"}(l=i.WxAdUnitIdEnum||(i.WxAdUnitIdEnum={}));var o=function(){function t(t,e,i,l,o,r){var d=this;switch(void 0===r&&(r=n.WX_AD_POS_CENTER),this.loaded=!1,this.unitId=t,this.adId=e,this.adName=i,this.adDesc=l,o){case a.WX_AD_TYPE_REWARD:this.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:this.unitId}),this.rewardedVideoAd.onLoad(function(){console.log("\u6fc0\u52b1\u5e7f\u544a onLoad OK"),d.loaded=!0});break;case a.WX_AD_TYPE_BANNER:var s=this.GetTopAndLeft(r);this.bannerVideoAd=wx.createBannerAd({adUnitId:t,adIntervals:30,style:{left:s.left,top:s.top,width:300,height:80}}),this.bannerVideoAd.onLoad(function(){console.log("banner\u5e7f\u544a onLoad OK"),d.loaded=!0})}}return t.prototype.GetTopAndLeft=function(t){var e=wx.getSystemInfoSync(),i=e.screenWidth,a=e.screenHeight,l=0,o=0;switch(t){case n.WX_AD_POS_CENTER_BOTTOM:l=a-110,o=i/2-150}return{top:l,left:o}},t}();i.WxAdItem=o;var r=function(){function t(){var t;this.AdUnitIdMap=((t={})[l.MeirijingxuanJinbi1]=new o("adunit-48bfc187bc01e6f8",l.MeirijingxuanJinbi1,"\u6bcf\u65e5\u5956\u52b11","\u70b9\u51fb\u6bcf\u65e5\u5956\u52b11",a.WX_AD_TYPE_REWARD),t[l.MeirijingxuanJinbi2]=new o("adunit-48bfc187bc01e6f8",l.MeirijingxuanJinbi2,"\u6bcf\u65e5\u5956\u52b12","\u70b9\u51fb\u6bcf\u65e5\u5956\u52b12",a.WX_AD_TYPE_REWARD),t[l.MeirijingxuanJinbi3]=new o("adunit-48bfc187bc01e6f8",l.MeirijingxuanJinbi3,"\u6bcf\u65e5\u5956\u52b13","\u70b9\u51fb\u6bcf\u65e5\u5956\u52b13",a.WX_AD_TYPE_REWARD),t[l.ZantingBanner]=new o("adunit-dfca1ebf175ea37d",l.ZantingBanner,"\u6682\u505c\u754c\u9762","\u70b9\u51fb\u6682\u505c\u51fa\u73b0\u7684Banner",a.WX_AD_TYPE_BANNER,n.WX_AD_POS_CENTER_BOTTOM),t),this.OnShowRewardedVideoAdFail=null,this.OnShowRewardedVideoAdSuccess=null}return Object.defineProperty(t,"Instance",{get:function(){return null==t._instance&&(t._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.ShowBannerVideoAd=function(t){console.log("\u5c55\u793abanner"),t.bannerVideoAd.show()},t.prototype.HideBannerVideoAd=function(t){console.log("\u5173\u95edbanner"),t.bannerVideoAd.hide()},t.prototype.ShowRewardedVideoAd=function(t){var e=this;t.rewardedVideoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),t.rewardedVideoAd.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891 "+t),null!=e.OnShowRewardedVideoAdFail&&(e.OnShowRewardedVideoAdFail(),e.OnShowRewardedVideoAdFail=null)}),t.rewardedVideoAd.show().catch(function(){t.rewardedVideoAd.load().then(function(){return t.rewardedVideoAd.show()}).catch(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25,\u53ef\u80fd\u662f\u6ca1\u52a0\u8f7d\u51fa\u6765"),null!=e.OnShowRewardedVideoAdFail&&(e.OnShowRewardedVideoAdFail(),e.OnShowRewardedVideoAdFail=null)})}),t.rewardedVideoAd.onClose(function(t){if(!(t&&t.isEnded||void 0===t))return console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u64ad\u653e\u4e2d\u9014\u9000\u51fa"),void(null!=e.OnShowRewardedVideoAdFail&&(e.OnShowRewardedVideoAdFail(),e.OnShowRewardedVideoAdFail=null));console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u64ad\u653e\u5b8c\u6bd5"),null!=e.OnShowRewardedVideoAdSuccess&&(e.OnShowRewardedVideoAdSuccess(),e.OnShowRewardedVideoAdSuccess=null)})},t}();i.default=r,cc._RF.pop()},{}],WxSdkUtil:[function(t,e,i){"use strict";cc._RF.push(e,"4e3d4bCRPRFPayeKsqmY8nK","WxSdkUtil");var n=this&&this.__decorate||function(t,e,i,n){var a,l=arguments.length,o=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(o=(l<3?a(o):l>3?a(e,i,o):a(e,i))||o);return l>3&&o&&Object.defineProperty(e,i,o),o};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../utils/PlatformUtil"),l=t("./WxAdUtil"),o=cc._decorator,r=o.ccclass,d=(o.property,function(){function t(){this._userInfo=null}var e;return e=t,t.getInstance=function(){return this._instance||(this._instance=new e,this._instance._init()),this._instance},t.prototype._init=function(){},t.prototype.ShowRewardedVideoAd=function(t,e,i){switch(void 0===e&&(e=function(){}),void 0===i&&(i=!1),a.default.getPlatform()){case a.default.Platform.wx:l.default.Instance.OnShowRewardedVideoAdFail=function(){e&&e()},l.default.Instance.OnShowRewardedVideoAdSuccess=function(){t&&t()};var n=l.WxAdUnitIdEnum.MeirijingxuanJinbi1;i&&(n=l.WxAdUnitIdEnum.MeirijingxuanJinbi2),l.default.Instance.ShowRewardedVideoAd(l.default.Instance.AdUnitIdMap[n]);break;default:cc.log("\u89c2\u770b\u5e7f\u544a"),t()}},t.prototype.ShowBanner=function(){switch(a.default.getPlatform()){case a.default.Platform.wx:l.default.Instance.ShowBannerVideoAd(l.default.Instance.AdUnitIdMap[l.WxAdUnitIdEnum.ZantingBanner])}},t.prototype.HideBanner=function(){switch(a.default.getPlatform()){case a.default.Platform.wx:l.default.Instance.HideBannerVideoAd(l.default.Instance.AdUnitIdMap[l.WxAdUnitIdEnum.ZantingBanner])}},t.prototype.getSetting=function(){switch(console.log("\u83b7\u53d6\u4fe1\u606f"),a.default.getPlatform()){case a.default.Platform.wx:wx.getSetting({success:function(t){var e=this;if(t.authSetting["scope.userInfo"])wx.getUserInfo({success:function(t){console.log("\u4e2a\u4eba\u4fe1\u606f1",t);var e=t.userInfo;this._userInfo=e}});else{var i=wx.getSystemInfoSync().safeArea;wx.createUserInfoButton({type:"text",text:"\u6388\u6743\u767b\u5f55",style:{left:i.left,top:i.top-i.height/2-25,width:i.width,height:50,lineHeight:50,backgroundColor:"#90ef62",color:"#ffffff",textAlign:"center",fontSize:20,borderRadius:5}}).onTap(function(t){var i=t.userInfo;t&&i&&(e._userInfo=i,console.log("\u4e2a\u4eba\u4fe1\u606f2",t))})}}})}},t.prototype.postMessage=function(t){switch(a.default.getPlatform()){case a.default.Platform.wx:wx.getOpenDataContext().postMessage({score:t,dayTime:(new Date).getTime()})}},t.prototype.updataFriendList=function(){switch(a.default.getPlatform()){case a.default.Platform.wx:wx.getOpenDataContext().postMessage({})}},t.prototype.navigateToMiniProgram=function(t){switch(a.default.getPlatform()){case a.default.Platform.wx:wx.navigateToMiniProgram({appId:t,path:"page/index/index?id=123",extraData:{foo:"bar"},envVersion:"develop",success:function(){}})}},t.prototype.createGameClubButton=function(){switch(a.default.getPlatform()){case a.default.Platform.wx:wx.createGameClubButton({icon:"light",style:{left:10,top:250,width:30,height:30}})}},t.prototype.showShareMenu=function(){a.default.getPlatform()==a.default.Platform.wx&&(console.log("\u5fae\u4fe1\u5e73\u53f0\uff0c\u6253\u5f00\u5206\u4eab\u6743\u9650"),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(){},fail:function(){}}))},t._instance=null,e=n([r],t)}());i.default=d,cc._RF.pop()},{"../utils/PlatformUtil":"PlatformUtil","./WxAdUtil":"WxAdUtil"}]},{},["ActivityConfig","AttrLevelConfig","BossConfig","BossSkillConfig","CacheKey","CallConfig","CdkConfig","ChallengeConfig","ChapterConfig","CommonConfig","FightConfig","GeneralConfig","GeneralSkillConfig","GlobalConfig","ItemConfig","MonsterConfig","PetConfig","PlayerFightSkillConfig","PlayerLevelConfig","ResPathKey","SceneKey","SkillConfig","TaskConfig","ActivityCtrl","AdBoxCtrl","AttrLevelCtrl","CallCtrl","ChallengeCtrl","CommonCtrl","CurrentTimeCtrl","DamageCtrl","FightListCtrl","GeneralCtrl","GlobalCtrl","IndexCtrl","LabelCtrl","LoadingCtrl","MainCtrl","MineCtrl","MonsterCtrl","PetCtrl","PlayerAttrCtrl","PlayerCacheCtrl","SkillCtrl","TaskCtrl","TipCtrl","TipLabelCtrl","CallFunctionCtrl","ChallengeFunctionCtrl","BossCtrl","FightCtrl","JoystickCtrl","PlayerCtrl","BossBaseSkill","DurationLineSkill","SingleLineSkill","PlayerFightBaseSkill","PlayerFixSkill","PlayerSingleLineSkill","ExecSkillCtrl","GeneralInitSkill","GeneralLevelSkillCtrl","MainSkillCtrl","PetSkillCtrl","MainPetCtrl","ItemPicCtrl","DailyTaskCtrl","ItemInfo","AnimationManager","AudioManager","CollisitionManager","ObjectManager","SpriteManager","UnlockManager","ButtonUtil","CacheUtil","CloneUtil","DateUtil","MathUtil","PlatformUtil","PositionUtil","RandomUtil","SpineUtil","SpriteUtil","TxtUtil","WxAdUtil","WxSdkUtil"]);